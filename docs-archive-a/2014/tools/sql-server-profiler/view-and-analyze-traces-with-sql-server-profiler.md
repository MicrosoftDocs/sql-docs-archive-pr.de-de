---
title: Anzeigen und Analysieren von Ablaufverfolgungen mit SQL Server Profiler | Microsoft-Dokumentation
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: profiler
ms.topic: conceptual
helpviewer_keywords:
- Profiler [SQL Server Profiler], viewing traces
- SQL Server Profiler, viewing traces
- traces [SQL Server], viewing
- SQL Server Profiler, troubleshooting
- troubleshooting [SQL Server], traces
- events [SQL Server], finding inside trace
- Profiler [SQL Server Profiler], troubleshooting
- traces [SQL Server], events
ms.assetid: 17e821ca-a12e-4192-acc1-96765d9ae266
author: stevestein
ms.author: sstein
ms.openlocfilehash: b3e848fe9a07d838631eef1737c2a7679b67e649
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 08/04/2020
ms.locfileid: "87615725"
---
# <a name="view-and-analyze-traces-with-sql-server-profiler"></a><span data-ttu-id="8aaef-102">Anzeigen und Analysieren von Ablaufverfolgungen mit SQL Server Profiler</span><span class="sxs-lookup"><span data-stu-id="8aaef-102">View and Analyze Traces with SQL Server Profiler</span></span>
  <span data-ttu-id="8aaef-103">Verwenden Sie [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)] , um aufgezeichnete Ereignisdaten in einer Ablaufverfolgung anzuzeigen.</span><span class="sxs-lookup"><span data-stu-id="8aaef-103">Use [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)] to view captured event data in a trace.</span></span> [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)] <span data-ttu-id="8aaef-104">zeigt Daten je nach definierten Ablaufverfolgungseigenschaften an.</span><span class="sxs-lookup"><span data-stu-id="8aaef-104">displays data based on defined trace properties.</span></span> <span data-ttu-id="8aaef-105">Eine Möglichkeit, [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] -Daten zu analysieren, besteht darin, die Daten in ein anderes Programm wie [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] oder den Optimierungsratgeber von [!INCLUDE[ssDE](../../includes/ssde-md.md)] zu kopieren.</span><span class="sxs-lookup"><span data-stu-id="8aaef-105">One way to analyze [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] data is to copy the data to another program, such as [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] or [!INCLUDE[ssDE](../../includes/ssde-md.md)] Tuning Advisor.</span></span> [!INCLUDE[ssDE](../../includes/ssde-md.md)] <span data-ttu-id="8aaef-106">Wenn bei der Ablaufverfolgung die **Text** -Datenspalte einbezogen wird, kann der Optimierungsratgeber eine Ablaufverfolgungsdatei mit SQL-Batch- und RPC-Ereignissen verwenden.</span><span class="sxs-lookup"><span data-stu-id="8aaef-106">Tuning Advisor can use a trace file that contains SQL batch and remote procedure call (RPC) events if the **Text** data column is included in the trace.</span></span> <span data-ttu-id="8aaef-107">Verwenden Sie die im Lieferumfang von [!INCLUDE[ssDE](../../includes/ssde-md.md)] enthaltene vordefinierte Optimierungsvorlage, um sicherzustellen, dass für den Optimierungsratgeber von [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)]die richtigen Ereignisse und Spalten aufgezeichnet werden.</span><span class="sxs-lookup"><span data-stu-id="8aaef-107">To make sure that the correct events and columns are captured for use with [!INCLUDE[ssDE](../../includes/ssde-md.md)] Tuning Advisor, use the predefined Tuning template that is supplied with [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)].</span></span>  
  
 <span data-ttu-id="8aaef-108">Wenn Sie mit [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)]eine Ablaufverfolgung aufrufen und die Ablaufverfolgungsdatei durch gespeicherte Systemprozeduren von [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)] oder der SQL-Ablaufverfolgung erstellt wurde, muss diese Datei nicht die Dateierweiterung TRC tragen.</span><span class="sxs-lookup"><span data-stu-id="8aaef-108">When you open a trace by using [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)], the trace file does not need to have the .trc file extension if the file was created by either [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)] or SQL Trace system stored procedures.</span></span>  
  
> [!NOTE]  
>  [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)] <span data-ttu-id="8aaef-109">kann auch Protokolldateien der SQL-Ablaufverfolgung sowie allgemeine SQL-Skriptdateien lesen.</span><span class="sxs-lookup"><span data-stu-id="8aaef-109">can also read SQL Trace .log files and generic SQL script files.</span></span> <span data-ttu-id="8aaef-110">Wenn Sie eine Protokolldatei der SQL-Ablaufverfolgung öffnen, die nicht die Dateierweiterung LOG aufweist (z.B. „trace.txt“), legen Sie als Dateiformat **SQLTrace_Log** fest.</span><span class="sxs-lookup"><span data-stu-id="8aaef-110">When opening a SQL Trace .log file that does not have a .log file extension, such as trace.txt, specify **SQLTrace_Log** as the file format.</span></span>  
  
 <span data-ttu-id="8aaef-111">Um die Ablaufverfolgungsanalyse zu erleichtern, können Sie das Anzeigeformat für Datum und Uhrzeit in [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)] konfigurieren.</span><span class="sxs-lookup"><span data-stu-id="8aaef-111">You can configure the [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)] date and time display format to assist in trace analysis.</span></span>  
  
## <a name="troubleshooting-data"></a><span data-ttu-id="8aaef-112">Problembehandlung von Daten</span><span class="sxs-lookup"><span data-stu-id="8aaef-112">Troubleshooting Data</span></span>  
 <span data-ttu-id="8aaef-113">Mit [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)]können Sie die Problembehandlung für Daten ausführen, indem Sie Ablaufverfolgungen oder Ablaufverfolgungsdateien nach der Datenspalte **Duration**, **CPU**, **Reads**oder **Writes** in Gruppen zusammenfassen.</span><span class="sxs-lookup"><span data-stu-id="8aaef-113">Using [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)], you can troubleshoot data by grouping traces or trace files by the **Duration**, **CPU**, **Reads**, or **Writes** data columns.</span></span> <span data-ttu-id="8aaef-114">Zu den Daten, für die Sie eine Problembehandlung durchführen können, gehören beispielsweise Abfragen, deren Ergebnisse nicht zufrieden stellend ausfallen, oder die eine außergewöhnlich hohe Anzahl logischer Lesevorgänge aufweisen.</span><span class="sxs-lookup"><span data-stu-id="8aaef-114">Examples of data you might troubleshoot are queries that perform poorly or that have exceptionally high numbers of logical read operations.</span></span>  
  
 <span data-ttu-id="8aaef-115">Zusätzliche Informationen stehen zur Verfügung, wenn die Ablaufverfolgungen in Tabellen gespeichert werden und [!INCLUDE[tsql](../../includes/tsql-md.md)] für die Abfrage der Ereignisdaten verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="8aaef-115">Additional information can be found by saving traces to tables and using [!INCLUDE[tsql](../../includes/tsql-md.md)] to query the event data.</span></span> <span data-ttu-id="8aaef-116">Wenn Sie z.B. feststellen möchten, welche **SQL:BatchCompleted** -Ereignisse eine überlange Wartezeit aufweisen, führen Sie Folgendes aus:</span><span class="sxs-lookup"><span data-stu-id="8aaef-116">For example, to determine which **SQL:BatchCompleted** events had excessive wait time, execute the following:</span></span>  
  
```  
SELECT  TextData, Duration, CPU  
FROM    trace_table_name  
WHERE   EventClass = 12 -- SQL:BatchCompleted events  
AND     CPU < (Duration * 1000)  
```  
  
> [!NOTE]  
>  <span data-ttu-id="8aaef-117">Der Server meldet die Dauer eines Ereignisses in Mikrosekunden (ein Millionstel oder 10<sup>-6</sup>einer Sekunde) und den Umfang der vom Ereignis verbrauchten CPU-Zeit in Millisekunden (ein Tausendstel oder 10<sup>-3</sup>einer Sekunde).</span><span class="sxs-lookup"><span data-stu-id="8aaef-117">The server reports the duration of an event in microseconds (one millionth, or 10<sup>-6</sup>, of a second) and the amount of CPU time used by the event in milliseconds (one thousandth, or 10<sup>-3</sup>, of a second).</span></span> <span data-ttu-id="8aaef-118">In [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)] zeigt die grafische Benutzeroberfläche die **Duration** -Spalte standardmäßig in Millisekunden an. Wird jedoch eine Ablaufverfolgung entweder in einer Datei oder in einer Datenbanktabelle gespeichert, wird der Wert der **Duration** -Spalte in Mikrosekunden aufgezeichnet.</span><span class="sxs-lookup"><span data-stu-id="8aaef-118">The [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)] graphical user interface displays the **Duration** column in milliseconds by default, but when a trace is saved to either a file or a database table, the **Duration** column value is written in microseconds.</span></span>  
  
## <a name="displaying-object-names-when-viewing-traces"></a><span data-ttu-id="8aaef-119">Anzeigen von Objektnamen bei der Anzeige von Ablaufverfolgungen</span><span class="sxs-lookup"><span data-stu-id="8aaef-119">Displaying Object Names When Viewing Traces</span></span>  
 <span data-ttu-id="8aaef-120">Wenn Sie statt des Objektbezeichners (**ObjectID**) lieber den Namen eines Objekts anzeigen möchten, müssen Sie zusammen mit der Datenspalte **ObjectName** auch die Datenspalten **ServerName** und **DatabaseID** aufzeichnen.</span><span class="sxs-lookup"><span data-stu-id="8aaef-120">If you wish to display the name of an object rather than the object identifier (**Object ID**), you must capture the **Server Name** and **Database ID** data columns along with the **Object Name** data column.</span></span>  
  
 <span data-ttu-id="8aaef-121">Wenn auf der Grundlage der **ObjectID** -Datenspalte gruppiert werden soll, stellen Sie sicher, dass Sie zuerst nach den Datenspalten **ServerName** und **DatabaseID** und erst anschließend nach der **ObjectID** -Datenspalte gruppieren.</span><span class="sxs-lookup"><span data-stu-id="8aaef-121">If you choose to group by the **Object ID** data column, make sure you group by the **Server Name** and **Database ID** data columns first, and then by the **Object ID** data column.</span></span> <span data-ttu-id="8aaef-122">Analog müssen Sie, wenn Sie auf der Grundlage der **IndexID** -Datenspalte gruppieren möchten, sicherstellen, dass Sie zuerst nach den Datenspalten **ServerName**, **DatabaseID**und **ObjectID** und erst anschließend nach der **IndexID** -Datenspalte gruppieren.</span><span class="sxs-lookup"><span data-stu-id="8aaef-122">Similarly, if you choose to group by the **Index ID** data column, make sure you group by the **Server Name**, **Database ID**, and **Object ID** data columns first, and then by the **Index ID** data columns.</span></span> <span data-ttu-id="8aaef-123">Diese Reihenfolge muss beim Gruppieren eingehalten werden, weil die Objekt- und Index-IDs für die verschiedenen Server und Datenbanken (und die Index-IDs für die verschiedenen Objekte) nicht eindeutig erkennbar sind.</span><span class="sxs-lookup"><span data-stu-id="8aaef-123">You must group in this order because object and index IDs are not unique among servers and databases (and among objects for index IDs).</span></span>  
  
## <a name="finding-specific-events-within-a-trace"></a><span data-ttu-id="8aaef-124">Suchen nach bestimmten Ereignissen in einer Ablaufverfolgung</span><span class="sxs-lookup"><span data-stu-id="8aaef-124">Finding Specific Events Within a Trace</span></span>  
 <span data-ttu-id="8aaef-125">Gehen Sie wie folgt vor, um in einer Ablaufverfolgung nach Ereignissen zu suchen und diese zu gruppieren:</span><span class="sxs-lookup"><span data-stu-id="8aaef-125">To find and group events in a trace, follow these steps:</span></span>  
  
1.  <span data-ttu-id="8aaef-126">Erstellen Sie eine Ablaufverfolgung.</span><span class="sxs-lookup"><span data-stu-id="8aaef-126">Create your trace.</span></span>  
  
    -   <span data-ttu-id="8aaef-127">Zeichnen Sie beim Definieren der Ablaufverfolgung neben allen anderen gewünschten Datenspalten auch die Datenspalten **EventClass**, **ClientProcessID**und **StartTime** auf.</span><span class="sxs-lookup"><span data-stu-id="8aaef-127">When defining the trace, capture the **Event Class**, **ClientProcessID**, and **Start Time** data columns in addition to any other data columns you want to capture.</span></span> <span data-ttu-id="8aaef-128">Weitere Informationen finden Sie unter [Erstellen einer Ablaufverfolgung &#40;SQL Server Profiler&#41;](create-a-trace-sql-server-profiler.md).</span><span class="sxs-lookup"><span data-stu-id="8aaef-128">For more information, see [Create a Trace &#40;SQL Server Profiler&#41;](create-a-trace-sql-server-profiler.md).</span></span>  
  
    -   <span data-ttu-id="8aaef-129">Gruppieren Sie die aufgezeichneten Daten nach der Datenspalte **Event Class**, und zeichnen Sie die Ablaufverfolgung in einer Datei oder Tabelle auf.</span><span class="sxs-lookup"><span data-stu-id="8aaef-129">Group the captured data by the **Event Class**data column, and capture the trace to a file or table.</span></span> <span data-ttu-id="8aaef-130">Klicken Sie im Dialogfeld „Ablaufverfolgungseigenschaften“ auf der Registerkarte **Ereignisauswahl** auf **Spalten organisieren** , um die aufgezeichneten Daten zu gruppieren.</span><span class="sxs-lookup"><span data-stu-id="8aaef-130">To group the captured data, click **Organize Columns** on the **Events Selection** tab of the Trace Properties dialog box.</span></span> <span data-ttu-id="8aaef-131">Weitere Informationen finden Sie unter [Organisieren von in einer Ablaufverfolgung angezeigten Spalten &#40;SQL Server Profiler&#41;](organize-columns-displayed-in-a-trace-sql-server-profiler.md).</span><span class="sxs-lookup"><span data-stu-id="8aaef-131">For more information, see [Organize Columns Displayed in a Trace &#40;SQL Server Profiler&#41;](organize-columns-displayed-in-a-trace-sql-server-profiler.md).</span></span>  
  
    -   <span data-ttu-id="8aaef-132">Starten Sie die Ablaufverfolgung, und beenden Sie sie nach Ablauf der festgelegten Zeit oder nach Erfassung der festgelegten Anzahl von Ereignissen.</span><span class="sxs-lookup"><span data-stu-id="8aaef-132">Start the trace and stop it after the appropriate time has passed or number of events have been captured.</span></span>  
  
2.  <span data-ttu-id="8aaef-133">Suchen Sie nach den Zielereignissen.</span><span class="sxs-lookup"><span data-stu-id="8aaef-133">Find the target events.</span></span>  
  
    -   <span data-ttu-id="8aaef-134">Öffnen Sie die Ablaufverfolgungsdatei oder -tabelle, und erweitern Sie den Knoten der gewünschten Ereignisklasse, z.B. **Deadlock Chain**.</span><span class="sxs-lookup"><span data-stu-id="8aaef-134">Open the trace file or table, and expand the node of the desired event class; for example, **Deadlock Chain**.</span></span> <span data-ttu-id="8aaef-135">Weitere Informationen finden Sie unter [Öffnen einer Ablaufverfolgungsdatei &#40;SQL Server Profiler&#41;](open-a-trace-file-sql-server-profiler.md) oder den Optimierungsratgeber von [Öffnen einer Ablaufverfolgungstabelle &#40;SQL Server Profiler&#41;](open-a-trace-table-sql-server-profiler.md)die richtigen Ereignisse und Spalten aufgezeichnet werden.</span><span class="sxs-lookup"><span data-stu-id="8aaef-135">For more information, see [Open a Trace File &#40;SQL Server Profiler&#41;](open-a-trace-file-sql-server-profiler.md) or [Open a Trace Table &#40;SQL Server Profiler&#41;](open-a-trace-table-sql-server-profiler.md).</span></span>  
  
    -   <span data-ttu-id="8aaef-136">Durchsuchen Sie die Daten der Ablaufverfolgung, bis Sie die gesuchten Ereignisse finden (klicken Sie in **im Menü** Bearbeiten **auf** Suchen [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)] , um nach Werten in der Ablaufverfolgung zu suchen).</span><span class="sxs-lookup"><span data-stu-id="8aaef-136">Search through the trace data until you find the events for which you are looking (use the **Find** command on the **Edit** menu of [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)] to help you find values in the trace).</span></span> <span data-ttu-id="8aaef-137">Beachten Sie bei den Ereignissen, für die Sie die Ablaufverfolgung durchführen, die Werte in den Datenspalten **ClientProcessID** und **StartTime** .</span><span class="sxs-lookup"><span data-stu-id="8aaef-137">Note the values in the **ClientProcessID** and **Start Time** data columns of the events you trace.</span></span>  
  
3.  <span data-ttu-id="8aaef-138">Zeigen Sie die Ereignisse im Kontext an.</span><span class="sxs-lookup"><span data-stu-id="8aaef-138">Display the events in context.</span></span>  
  
    -   <span data-ttu-id="8aaef-139">Zeigen Sie die Eigenschaften der Ablaufverfolgung an, und gruppieren Sie die Daten nicht auf Grundlage der Datenspalte **Event Class**, sondern nach der Datenspalte **ClientProcessID** .</span><span class="sxs-lookup"><span data-stu-id="8aaef-139">Display the trace properties, and group by the **ClientProcessID**data column rather than by the **Event Class** data column.</span></span>  
  
    -   <span data-ttu-id="8aaef-140">Erweitern Sie die Knoten für jede einzelne Clientprozess-ID, die Sie anzeigen möchten.</span><span class="sxs-lookup"><span data-stu-id="8aaef-140">Expand the nodes of each client process ID you want to view.</span></span> <span data-ttu-id="8aaef-141">Durchsuchen Sie die Ablaufverfolgung manuell oder mithilfe der Option **Suchen** , bis Sie die zuvor notierten **Start Time**-Werte der Zielereignisse finden.</span><span class="sxs-lookup"><span data-stu-id="8aaef-141">Search through the trace manually, or use **Find** until you find the previously noted **Start Time**values of the target events.</span></span> <span data-ttu-id="8aaef-142">Die Ereignisse werden in chronologischer Reihenfolge mit den anderen Ereignissen angezeigt, die zu den einzelnen ausgewählten Client-Prozess-IDs gehören.</span><span class="sxs-lookup"><span data-stu-id="8aaef-142">The events are displayed in chronological order with the other events that belong to each selected client process ID.</span></span> <span data-ttu-id="8aaef-143">Beispielsweise werden das **Deadlock** -Ereignis und das **Deadlock Chain**-Ereignis, die bei der Ablaufverfolgung aufgezeichnet wurden, innerhalb der erweiterten Client-Prozess-ID sofort nach den **SQL:BatchStarting**-Ereignissen angezeigt.</span><span class="sxs-lookup"><span data-stu-id="8aaef-143">For example, the **Deadlock** and **Deadlock Chain**events, captured within the trace, appear immediately after the **SQL:BatchStarting**events within the expanded client process ID.</span></span>  
  
 <span data-ttu-id="8aaef-144">Diese Methode kann auch verwendet werden, um nach anderen gruppierten Ereignissen zu suchen.</span><span class="sxs-lookup"><span data-stu-id="8aaef-144">The same technique can be used to find any grouped events.</span></span> <span data-ttu-id="8aaef-145">Sobald Sie die gesuchten Ereignisse gefunden haben, gruppieren Sie diese nach der Ereignisklasse **ClientProcessID**, **ApplicationName**oder einer anderen Ereignisklasse, um zugehörige Aktivitäten in chronologischer Reihenfolge anzuzeigen.</span><span class="sxs-lookup"><span data-stu-id="8aaef-145">Once you have found the events you seek, group them by **ClientProcessID**, **ApplicationName**, or another event class to view related activity in chronological order.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="8aaef-146">Weitere Informationen</span><span class="sxs-lookup"><span data-stu-id="8aaef-146">See Also</span></span>  
 <span data-ttu-id="8aaef-147">[Anzeigen einer gespeicherten Ablaufverfolgung &#40;Transact-SQL&#41;](../../relational-databases/sql-trace/view-a-saved-trace-transact-sql.md) </span><span class="sxs-lookup"><span data-stu-id="8aaef-147">[View a Saved Trace &#40;Transact-SQL&#41;](../../relational-databases/sql-trace/view-a-saved-trace-transact-sql.md) </span></span>  
 <span data-ttu-id="8aaef-148">[sys.fn_trace_getinfo &#40;Transact-SQL&#41;](/sql/relational-databases/system-functions/sys-fn-trace-getinfo-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="8aaef-148">[sys.fn_trace_getinfo &#40;Transact-SQL&#41;](/sql/relational-databases/system-functions/sys-fn-trace-getinfo-transact-sql) </span></span>  
 <span data-ttu-id="8aaef-149">[Anzeigen von Filterinformationen &#40;SQL Server Profiler&#41;](view-filter-information-sql-server-profiler.md) </span><span class="sxs-lookup"><span data-stu-id="8aaef-149">[View Filter Information &#40;SQL Server Profiler&#41;](view-filter-information-sql-server-profiler.md) </span></span>  
 <span data-ttu-id="8aaef-150">[Anzeigen von Filterinformationen &#40;Transact-SQL&#41;](../../relational-databases/sql-trace/view-filter-information-transact-sql.md) </span><span class="sxs-lookup"><span data-stu-id="8aaef-150">[View Filter Information &#40;Transact-SQL&#41;](../../relational-databases/sql-trace/view-filter-information-transact-sql.md) </span></span>  
 <span data-ttu-id="8aaef-151">[Öffnen einer Ablaufverfolgungsdatei &#40;SQL Server Profiler&#41;](open-a-trace-file-sql-server-profiler.md) </span><span class="sxs-lookup"><span data-stu-id="8aaef-151">[Open a Trace File &#40;SQL Server Profiler&#41;](open-a-trace-file-sql-server-profiler.md) </span></span>  
 [<span data-ttu-id="8aaef-152">Öffnen einer Ablaufverfolgungstabelle &#40;SQL Server Profiler&#41;</span><span class="sxs-lookup"><span data-stu-id="8aaef-152">Open a Trace Table &#40;SQL Server Profiler&#41;</span></span>](open-a-trace-table-sql-server-profiler.md)  
  
  
