---
title: SQLdiag-Hilfsprogramm | Microsoft-Dokumentation
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: tools-other
ms.topic: conceptual
helpviewer_keywords:
- command prompt utilities [SQL Server], SQLdiag
- stopping diagnostic collection
- storing diagnostic information
- performance [SQL Server], diagnostic collection
- diagnostic records [SQL Server]
- scripts [SQL Server], diagnostic collection
- logs [SQL Server], diagnostic collection
- starting diagnostic collection
- clustered instance of SQL Server
- monitoring performance [SQL Server], diagnostic collection
- security [SQL Server], diagnostic collection
- SQLDIAG service
- space [SQL Server], diagnostic collection
- SQLdiag utility
- disk space [SQL Server], diagnostic collection
- configuration files [SQL Server]
- automatic diagnostic collection
- clusters [SQL Server], diagnostic collection
ms.assetid: 45ba1307-33d1-431e-872c-a6e4556f5ff2
author: stevestein
ms.author: sstein
ms.openlocfilehash: 0559e0b2261ed5ba1c9c384608d04194d685f695
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 08/04/2020
ms.locfileid: "87694921"
---
# <a name="sqldiag-utility"></a><span data-ttu-id="a9026-102">SQLdiag (Hilfsprogramm)</span><span class="sxs-lookup"><span data-stu-id="a9026-102">SQLdiag Utility</span></span>
  <span data-ttu-id="a9026-103">Das Hilfsprogramm **SQLDiag** listet allgemeine Diagnoseinformationen auf und kann als Konsolenanwendung oder Dienst ausgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="a9026-103">The **SQLdiag** utility is a general purpose diagnostics collection utility that can be run as a console application or as a service.</span></span> <span data-ttu-id="a9026-104">Mithilfe von **SQLDiag** können Sie Protokolle und Datendateien von [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] und anderen Servertypen sammeln. Dies kann hilfreich sein, um Server für eine gewisse Zeit zu überwachen oder bestimmte Serverprobleme zu behandeln.</span><span class="sxs-lookup"><span data-stu-id="a9026-104">You can use **SQLdiag** to collect logs and data files from [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] and other types of servers, and use it to monitor your servers over time or troubleshoot specific problems with your servers.</span></span> <span data-ttu-id="a9026-105">**SQLDiag** dient dazu, das Sammeln von Diagnoseinformationen für [!INCLUDE[msCoName](../includes/msconame-md.md)] Support Services zu beschleunigen und zu vereinfachen.</span><span class="sxs-lookup"><span data-stu-id="a9026-105">**SQLdiag** is intended to expedite and simplify diagnostic information gathering for [!INCLUDE[msCoName](../includes/msconame-md.md)] Customer Support Services.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="a9026-106">Dieses Hilfsprogramm kann weiter geändert werden, und es besteht die Möglichkeit, dass Anwendungen oder Skripts, die auf den Befehlszeilenargumenten und dem entsprechenden Verhalten dieses Hilfsprogramms aufbauen, in zukünftigen Versionen nicht ordnungsgemäß ausgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="a9026-106">This utility may be changed, and applications or scripts that rely on its command line arguments or behavior may not work correctly in future releases.</span></span>  
  
 <span data-ttu-id="a9026-107">Mit**SQLDiag** können die folgenden Arten von Diagnoseinformationen gesammelt werden:</span><span class="sxs-lookup"><span data-stu-id="a9026-107">**SQLdiag** can collect the following types of diagnostic information:</span></span>  
  
-   <span data-ttu-id="a9026-108">Windows-Leistungsprotokolle</span><span class="sxs-lookup"><span data-stu-id="a9026-108">Windows performance logs</span></span>  
  
-   <span data-ttu-id="a9026-109">Windows-Ereignisprotokolle</span><span class="sxs-lookup"><span data-stu-id="a9026-109">Windows event logs</span></span>  
  
-   [!INCLUDE[ssSqlProfiler](../includes/sssqlprofiler-md.md)] <span data-ttu-id="a9026-110">Ablaufverfolgungen</span><span class="sxs-lookup"><span data-stu-id="a9026-110">traces</span></span>  
  
-   [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] <span data-ttu-id="a9026-111">Blockierungsinformationen</span><span class="sxs-lookup"><span data-stu-id="a9026-111">blocking information</span></span>  
  
-   [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] <span data-ttu-id="a9026-112">Konfigurationsinformationen</span><span class="sxs-lookup"><span data-stu-id="a9026-112">configuration information</span></span>  
  
 <span data-ttu-id="a9026-113">Sie können angeben, welche Informationen **SQLDiag** sammeln soll, indem Sie die Konfigurationsdatei „SQLDiag.xml“ bearbeiten. Dies wird im nächsten Abschnitt weiter beschrieben.</span><span class="sxs-lookup"><span data-stu-id="a9026-113">You can specify what types of information you want **SQLdiag** to collect by editing the configuration file SQLDiag.xml, which is described in a following section.</span></span>  
  
## <a name="syntax"></a><span data-ttu-id="a9026-114">Syntax</span><span class="sxs-lookup"><span data-stu-id="a9026-114">Syntax</span></span>  
  
```  
  
      sqldiag   
     { [/?] }  
     |  
     { [/I configuration_file]  
       [/O output_folder_path]  
       [/Psupport_folder_path]  
       [/Noutput_folder_management_option]  
       [/Mmachine1 [ machine2machineN]| @machinelistfile]  
       [/Cfile_compression_type]  
       [/B [+]start_time]  
       [/E [+]stop_time]  
       [/ASQLdiag_application_name]  
       [/T { tcp [ ,port ] | np | lpc } ]  
       [/Q] [/G] [/R] [/U] [/L] [/X] }  
     |  
     { [START | STOP | STOP_ABORT] }  
     |  
     { [START | STOP | STOP_ABORT] /ASQLdiag_application_name }  
```  
  
## <a name="arguments"></a><span data-ttu-id="a9026-115">Argumente</span><span class="sxs-lookup"><span data-stu-id="a9026-115">Arguments</span></span>  
 <span data-ttu-id="a9026-116">**/?**</span><span class="sxs-lookup"><span data-stu-id="a9026-116">**/?**</span></span>  
 <span data-ttu-id="a9026-117">Zeigt Informationen zur Nutzung an.</span><span class="sxs-lookup"><span data-stu-id="a9026-117">Displays usage information.</span></span>  
  
 <span data-ttu-id="a9026-118">**/I** _configuration_file_</span><span class="sxs-lookup"><span data-stu-id="a9026-118">**/I** _configuration_file_</span></span>  
 <span data-ttu-id="a9026-119">Legt die Konfigurationsdatei fest, die **SQLDiag** verwenden soll.</span><span class="sxs-lookup"><span data-stu-id="a9026-119">Sets the configuration file for **SQLdiag** to use.</span></span> <span data-ttu-id="a9026-120">Standardmäßig wird mit **/I** die Datei SQLDiag.Xml festgelegt.</span><span class="sxs-lookup"><span data-stu-id="a9026-120">By default, **/I** is set to SQLDiag.Xml.</span></span>  
  
 <span data-ttu-id="a9026-121">**/O** _output_folder_path_</span><span class="sxs-lookup"><span data-stu-id="a9026-121">**/O** _output_folder_path_</span></span>  
 <span data-ttu-id="a9026-122">Leitet die Ausgabe von **SQLDiag** in den angegebenen Ordner um.</span><span class="sxs-lookup"><span data-stu-id="a9026-122">Redirects **SQLdiag** output to the specified folder.</span></span> <span data-ttu-id="a9026-123">Wenn die Option **/O** nicht angegeben wird, wird die Ausgabe von **SQLDiag** in den Unterordner SQLDIAG unterhalb des Startordners **SQLDiag** geschrieben.</span><span class="sxs-lookup"><span data-stu-id="a9026-123">If the **/O** option is not specified, **SQLdiag** output is written to a subfolder named SQLDIAG under the **SQLdiag** startup folder.</span></span> <span data-ttu-id="a9026-124">Wenn der Ordner SQLDIAG nicht vorhanden ist, versucht **SQLDiag** , ihn zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="a9026-124">If the SQLDIAG folder does not exist, **SQLdiag** attempts to create it.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="a9026-125">Der Speicherort des Ausgabeordners ist relativ zum Speicherort des Unterstützungsordners, der mit **/P**angegeben werden kann.</span><span class="sxs-lookup"><span data-stu-id="a9026-125">The output folder location is relative to the support folder location that can be specified with **/P**.</span></span> <span data-ttu-id="a9026-126">Geben Sie den vollständigen Verzeichnispfad für **/O**an, um einen gänzlich anderen Speicherort für den Ausgabeordner festzulegen.</span><span class="sxs-lookup"><span data-stu-id="a9026-126">To set an entirely different location for the output folder, specify the full directory path for **/O**.</span></span>  
  
 <span data-ttu-id="a9026-127">**/P** _support_folder_path_</span><span class="sxs-lookup"><span data-stu-id="a9026-127">**/P** _support_folder_path_</span></span>  
 <span data-ttu-id="a9026-128">Legt den Pfad für den Unterstützungsordner fest.</span><span class="sxs-lookup"><span data-stu-id="a9026-128">Sets the support folder path.</span></span> <span data-ttu-id="a9026-129">Standardmäßig wird für **/P** der Ordner festgelegt, in dem sich die ausführbaren Dateien von **SQLDiag** befinden.</span><span class="sxs-lookup"><span data-stu-id="a9026-129">By default, **/P** is set to the folder where the **SQLdiag** executable resides.</span></span> <span data-ttu-id="a9026-130">Der Unterstützungsordner enthält **SQLDiag** -Unterstützungsdateien, wie die XML-Konfigurationsdatei, Transact-SQL-Skripts und andere Dateien, die das Hilfsprogramm zum Auflisten von Diagnoseinformationen verwendet.</span><span class="sxs-lookup"><span data-stu-id="a9026-130">The support folder contains **SQLdiag** support files, such as the XML configuration file, Transact-SQL scripts, and other files that the utility uses during diagnostics collection.</span></span> <span data-ttu-id="a9026-131">Wenn Sie mithilfe dieser Option einen anderen Pfad für die Unterstützungsdateien angeben, kopiert **SQLDiag** automatisch die erforderlichen Unterstützungsdateien in den angegebenen Ordner, sofern sie noch nicht vorhanden sind.</span><span class="sxs-lookup"><span data-stu-id="a9026-131">If you use this option to specify an alternate support files path, **SQLdiag** will automatically copy the support files it requires to the specified folder if they do not already exist.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="a9026-132">Soll der aktuelle Ordner als Unterstützungspfad festgelegt werden, geben Sie **%cd%** folgendermaßen in der Befehlszeile an:</span><span class="sxs-lookup"><span data-stu-id="a9026-132">To set your current folder as the support path, specify **%cd%** on the command line as follows:</span></span>  
>   
>  <span data-ttu-id="a9026-133">**SQLDIAG /P %cd%**</span><span class="sxs-lookup"><span data-stu-id="a9026-133">**SQLDIAG /P %cd%**</span></span>  
  
 <span data-ttu-id="a9026-134">**/N** _output_folder_management_option_</span><span class="sxs-lookup"><span data-stu-id="a9026-134">**/N** _output_folder_management_option_</span></span>  
 <span data-ttu-id="a9026-135">Legt fest, ob **SQLDiag** den Ausgabeordner beim Starten überschreibt oder umbenennt.</span><span class="sxs-lookup"><span data-stu-id="a9026-135">Sets whether **SQLdiag** overwrites or renames the output folder when it starts up.</span></span> <span data-ttu-id="a9026-136">Verfügbare Optionen:</span><span class="sxs-lookup"><span data-stu-id="a9026-136">Available options:</span></span>  
  
 <span data-ttu-id="a9026-137">1 = Überschreibt den Ausgabeordner (Standardeinstellung)</span><span class="sxs-lookup"><span data-stu-id="a9026-137">1 = Overwrites the output folder (default)</span></span>  
  
 <span data-ttu-id="a9026-138">2 = Beim Starten von **SQLDiag** wird der Ausgabeordner in SQLDIAG_00001, SQLDIAG_00002 usw. umbenannt.</span><span class="sxs-lookup"><span data-stu-id="a9026-138">2 = When **SQLdiag** starts up, it renames the output folder to SQLDIAG_00001, SQLDIAG_00002, and so on.</span></span> <span data-ttu-id="a9026-139">Nachdem der aktuelle Ausgabeordner umbenannt wurde, schreibt **SQLDiag** die Ausgabe in den Standardausgabeordner SQLDIAG.</span><span class="sxs-lookup"><span data-stu-id="a9026-139">After renaming the current output folder, **SQLdiag** writes output to the default output folder SQLDIAG.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="a9026-140">**SQLDiag** fügt beim Starten die Ausgabe nicht an den aktuellen Ausgabeordner an.</span><span class="sxs-lookup"><span data-stu-id="a9026-140">**SQLdiag** does not append output to the current output folder when it starts up.</span></span> <span data-ttu-id="a9026-141">Das Programm kann nur den Standardausgabeordner überschreiben (Option 1) oder den Ordner umbenennen (Option 2) und dann die Ausgabe in den neuen Standardausgabeordner namens SQLDIAG schreiben.</span><span class="sxs-lookup"><span data-stu-id="a9026-141">It can only overwrite the default output folder (option 1) or rename the folder (option 2), and then it writes output to the new default output folder named SQLDIAG.</span></span>  
  
 <span data-ttu-id="a9026-142">**/M** _machine1_ [ *machine2 \* \* Machinen*] |*@machinelistfile*</span><span class="sxs-lookup"><span data-stu-id="a9026-142">**/M** _machine1_ [ *machine2\*\*machineN*] | *@machinelistfile*</span></span>  
 <span data-ttu-id="a9026-143">Überschreibt die in der Konfigurationsdatei angegebenen Computer.</span><span class="sxs-lookup"><span data-stu-id="a9026-143">Overrides the machines specified in the configuration file.</span></span> <span data-ttu-id="a9026-144">Standardmäßig ist die Konfigurationsdatei SQLDiag.Xml oder wird mit dem **/I** -Parameter festgelegt.</span><span class="sxs-lookup"><span data-stu-id="a9026-144">By default the configuration file is SQLDiag.Xml, or is set with the **/I** parameter.</span></span> <span data-ttu-id="a9026-145">Wenn Sie mehr als einen Computer angeben möchten, verwenden Sie Leerzeichen zum Trennen der Computernamen.</span><span class="sxs-lookup"><span data-stu-id="a9026-145">When specifying more than one machine, separate each machine name with a space.</span></span>  
  
 <span data-ttu-id="a9026-146">Mithilfe *@machinelistfile* von wird ein Computer Listen Dateiname angegeben, der in der Konfigurationsdatei gespeichert werden soll.</span><span class="sxs-lookup"><span data-stu-id="a9026-146">Using *@machinelistfile* specifies a machine list filename to be stored in the configuration file.</span></span>  
  
 <span data-ttu-id="a9026-147">**/C** _file_compression_type_</span><span class="sxs-lookup"><span data-stu-id="a9026-147">**/C** _file_compression_type_</span></span>  
 <span data-ttu-id="a9026-148">Legt den Typ der Dateikompression fest, die für die Dateien im Ausgabeordner von **SQLDiag** verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="a9026-148">Sets the type of file compression used on the **SQLdiag** output folder files.</span></span> <span data-ttu-id="a9026-149">Verfügbare Optionen:</span><span class="sxs-lookup"><span data-stu-id="a9026-149">Available options:</span></span>  
  
 <span data-ttu-id="a9026-150">0 = keine Komprimierung (Standardeinstellung)</span><span class="sxs-lookup"><span data-stu-id="a9026-150">0 = none (default)</span></span>  
  
 <span data-ttu-id="a9026-151">1 = NTFS-Komprimierung</span><span class="sxs-lookup"><span data-stu-id="a9026-151">1 = uses NTFS compression</span></span>  
  
 <span data-ttu-id="a9026-152">**/B** [ **+** ]*start_time*</span><span class="sxs-lookup"><span data-stu-id="a9026-152">**/B** [**+**]*start_time*</span></span>  
 <span data-ttu-id="a9026-153">Gibt das Datum und die Uhrzeit des Zeitpunkts, an dem die Sammlung von Diagnoseinformationen gestartet werden soll, im folgenden Format an:</span><span class="sxs-lookup"><span data-stu-id="a9026-153">Specifies the date and time to start collecting diagnostic data in the following format:</span></span>  
  
 <span data-ttu-id="a9026-154">YYYYMMDD_HH:MM:SS</span><span class="sxs-lookup"><span data-stu-id="a9026-154">YYYYMMDD_HH:MM:SS</span></span>  
  
 <span data-ttu-id="a9026-155">Die Uhrzeit wird in 24-Stunden-Notation angegeben.</span><span class="sxs-lookup"><span data-stu-id="a9026-155">The time is specified using 24-hour notation.</span></span> <span data-ttu-id="a9026-156">Beispiel: 2 Uhr nachmittags</span><span class="sxs-lookup"><span data-stu-id="a9026-156">For example, 2:00 P.M.</span></span> <span data-ttu-id="a9026-157">sollte für **14:00:00**angegeben werden.</span><span class="sxs-lookup"><span data-stu-id="a9026-157">should be specified as **14:00:00**.</span></span>  
  
 <span data-ttu-id="a9026-158">Verwenden Sie **+** ohne Datumsangabe (also nur HH:MM:SS), um eine Uhrzeit relativ zum aktuellen Datum und zur aktuellen Uhrzeit anzugeben.</span><span class="sxs-lookup"><span data-stu-id="a9026-158">Use **+** without the date (HH:MM:SS only) to specify a time that is relative to the current date and time.</span></span> <span data-ttu-id="a9026-159">Wenn Sie beispielsweise **/B +02:00:00**angeben, wartet **SQLDiag** 2 Stunden, bevor die Sammlung von Informationen gestartet wird.</span><span class="sxs-lookup"><span data-stu-id="a9026-159">For example, if you specify **/B +02:00:00**, **SQLdiag** will wait 2 hours before it starts collecting information.</span></span>  
  
 <span data-ttu-id="a9026-160">Fügen Sie kein Leerzeichen zwischen **+** und dem angegebenen Wert für *start_time*ein.</span><span class="sxs-lookup"><span data-stu-id="a9026-160">Do not insert a space between **+** and the specified *start_time*.</span></span>  
  
 <span data-ttu-id="a9026-161">Wenn Sie eine Startzeit angeben, die in der Vergangenheit liegt, erzwingt **SQLDiag** eine Änderung des Startdatums, sodass Startdatum und -zeit in der Zukunft liegen.</span><span class="sxs-lookup"><span data-stu-id="a9026-161">If you specify a start time that is in the past, **SQLdiag** forcibly changes the start date so the start date and time are in the future.</span></span> <span data-ttu-id="a9026-162">Wenn Sie beispielsweise **/B 01:00:00** angeben und es schon 08:00:00 Uhr ist, ändert **SQLDiag** das Startdatum und legt den nächsten Tag als Startdatum fest.</span><span class="sxs-lookup"><span data-stu-id="a9026-162">For example, if you specify **/B 01:00:00** and the current time is 08:00:00, **SQLdiag** forcibly changes the start date so that the start date is the next day.</span></span>  
  
 <span data-ttu-id="a9026-163">Beachten Sie, dass **SQLDiag** die lokale Zeit auf dem Computer verwendet, auf dem das Hilfsprogramm ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="a9026-163">Note that **SQLdiag** uses the local time on the computer where the utility is running.</span></span>  
  
 <span data-ttu-id="a9026-164">**/E** [ **+** ]*stop_time*</span><span class="sxs-lookup"><span data-stu-id="a9026-164">**/E** [**+**]*stop_time*</span></span>  
 <span data-ttu-id="a9026-165">Gibt das Datum und die Uhrzeit des Zeitpunkts, an dem die Sammlung von Diagnoseinformationen beendet werden soll, im folgenden Format an:</span><span class="sxs-lookup"><span data-stu-id="a9026-165">Specifies the date and time to stop collecting diagnostic data in the following format:</span></span>  
  
 <span data-ttu-id="a9026-166">YYYYMMDD_HH:MM:SS</span><span class="sxs-lookup"><span data-stu-id="a9026-166">YYYYMMDD_HH:MM:SS</span></span>  
  
 <span data-ttu-id="a9026-167">Die Uhrzeit wird in 24-Stunden-Notation angegeben.</span><span class="sxs-lookup"><span data-stu-id="a9026-167">The time is specified using 24-hour notation.</span></span> <span data-ttu-id="a9026-168">Beispiel: 2 Uhr nachmittags</span><span class="sxs-lookup"><span data-stu-id="a9026-168">For example, 2:00 P.M.</span></span> <span data-ttu-id="a9026-169">sollte für **14:00:00**angegeben werden.</span><span class="sxs-lookup"><span data-stu-id="a9026-169">should be specified as **14:00:00**.</span></span>  
  
 <span data-ttu-id="a9026-170">Verwenden Sie **+** ohne Datumsangabe (also nur HH:MM:SS), um eine Uhrzeit relativ zum aktuellen Datum und zur aktuellen Uhrzeit anzugeben.</span><span class="sxs-lookup"><span data-stu-id="a9026-170">Use **+** without the date (HH:MM:SS only) to specify a time that is relative to the current date and time.</span></span> <span data-ttu-id="a9026-171">Wenn Sie beispielsweise **/B +02:00:00 /E +03:00:00**angeben, um eine Start- und eine Beendigungszeit festzulegen, wartet **SQLDiag** 2 Stunden, bevor die Sammlung von Informationen gestartet wird. Daraufhin werden 3 Stunden lang Informationen gesammelt, bevor der Vorgang endet und das Hilfsprogramm beendet wird.</span><span class="sxs-lookup"><span data-stu-id="a9026-171">For example, if you specify a start time and end time by using **/B +02:00:00 /E +03:00:00**, **SQLdiag** waits 2 hours before it starts collecting information, then collects information for 3 hours before it stops and exits.</span></span> <span data-ttu-id="a9026-172">Wenn **/B** nicht angegeben wird, beginnt **SQLDiag** sofort mit dem Sammeln von Diagnoseinformationen und beendet den Vorgang an dem Datum und der Uhrzeit, das bzw. die durch **/E**angegeben wurde.</span><span class="sxs-lookup"><span data-stu-id="a9026-172">If **/B** is not specified, **SQLdiag** starts collecting diagnostics immediately and ends at the date and time specified by **/E**.</span></span>  
  
 <span data-ttu-id="a9026-173">Fügen Sie kein Leerzeichen zwischen **+** und dem angegebenen Wert für *start_time* oder *end_time*ein.</span><span class="sxs-lookup"><span data-stu-id="a9026-173">Do not insert a space between **+** and the specified *start_time* or *end_time*.</span></span>  
  
 <span data-ttu-id="a9026-174">Beachten Sie, dass **SQLDiag** die lokale Zeit auf dem Computer verwendet, auf dem das Hilfsprogramm ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="a9026-174">Note that **SQLdiag** uses the local time on the computer where the utility is running.</span></span>  
  
 <span data-ttu-id="a9026-175">**/A** _SQLdiag_application_name_</span><span class="sxs-lookup"><span data-stu-id="a9026-175">**/A** _SQLdiag_application_name_</span></span>  
 <span data-ttu-id="a9026-176">Ermöglicht das Ausführen mehrerer Instanzen des Hilfsprogramms **SQLDiag** für dieselbe Instanz von [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="a9026-176">Enables running multiple instances of the **SQLdiag** utility against the same [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] instance.</span></span>  
  
 <span data-ttu-id="a9026-177">Jeder *SQLDiag_application_name* identifiziert eine andere Instanz von **SQLDiag**.</span><span class="sxs-lookup"><span data-stu-id="a9026-177">Each *SQLdiag_application_name* identifies a different instance of **SQLdiag**.</span></span> <span data-ttu-id="a9026-178">Zwischen einer Instanz von *SQLDiag_application_name* und einem Instanznamen von [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] besteht keine Beziehung.</span><span class="sxs-lookup"><span data-stu-id="a9026-178">No relationship exists between a *SQLdiag_application_name* instance and a [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] instance name.</span></span>  
  
 <span data-ttu-id="a9026-179">*SQLDiag_application_name* kann zum Starten oder Beenden einer bestimmten Instanz des **SQLDiag** -Diensts verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="a9026-179">*SQLdiag_application_name* can be used to start or stop a specific instance of the **SQLdiag** service.</span></span>  
  
 <span data-ttu-id="a9026-180">Beispiel:</span><span class="sxs-lookup"><span data-stu-id="a9026-180">For example:</span></span>  
  
 <span data-ttu-id="a9026-181">**SQLDIAG START /A** _SQLdiag_application_name_</span><span class="sxs-lookup"><span data-stu-id="a9026-181">**SQLDIAG START /A** _SQLdiag_application_name_</span></span>  
  
 <span data-ttu-id="a9026-182">Das Argument kann zusammen mit der Option **/R** auch zum Registrieren einer bestimmten Instanz von **SQLDiag** als Dienst verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="a9026-182">It can also be used with the **/R** option to register a specific instance of **SQLdiag** as a service.</span></span> <span data-ttu-id="a9026-183">Beispiel:</span><span class="sxs-lookup"><span data-stu-id="a9026-183">For example:</span></span>  
  
 <span data-ttu-id="a9026-184">**SQLDIAG /R /A** _SQLdiag_application_name_</span><span class="sxs-lookup"><span data-stu-id="a9026-184">**SQLDIAG /R /A** _SQLdiag_application_name_</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="a9026-185">**SQLDiag** setzt vor den für *SQLDiag_application_name*angegebenen Instanznamen automatisch das Präfix DIAG$.</span><span class="sxs-lookup"><span data-stu-id="a9026-185">**SQLdiag** automatically prefixes DIAG$ to the instance name specified for *SQLdiag_application_name*.</span></span> <span data-ttu-id="a9026-186">Hierdurch kann beim Registrieren von **SQLDiag** als Dienst ein aussagefähiger Dienstname bereitgestellt werden.</span><span class="sxs-lookup"><span data-stu-id="a9026-186">This provides a sensible service name if you register **SQLdiag** as a service.</span></span>  
  
 <span data-ttu-id="a9026-187">/T { tcp [ ,*port* ] | np | lpc }</span><span class="sxs-lookup"><span data-stu-id="a9026-187">/T { tcp [ ,*port* ] | np | lpc }</span></span>  
 <span data-ttu-id="a9026-188">Stellt eine Verbindung zu einer Instanz von [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] unter Verwendung des angegebenen Protokolls her.</span><span class="sxs-lookup"><span data-stu-id="a9026-188">Connects to an instance of [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] using the specified protocol.</span></span>  
  
 <span data-ttu-id="a9026-189">tcp [,*port*]</span><span class="sxs-lookup"><span data-stu-id="a9026-189">tcp [,*port*]</span></span>  
 <span data-ttu-id="a9026-190">Transmission Control Protocol/Internet Protocol (TCP/IP).</span><span class="sxs-lookup"><span data-stu-id="a9026-190">Transmission Control Protocol/Internet Protocol (TCP/IP).</span></span> <span data-ttu-id="a9026-191">Sie können optional eine Portnummer für die Verbindung angeben.</span><span class="sxs-lookup"><span data-stu-id="a9026-191">You can optionally specify a port number for the connection.</span></span>  
  
 <span data-ttu-id="a9026-192">np</span><span class="sxs-lookup"><span data-stu-id="a9026-192">np</span></span>  
 <span data-ttu-id="a9026-193">Named Pipes.</span><span class="sxs-lookup"><span data-stu-id="a9026-193">Named pipes.</span></span> <span data-ttu-id="a9026-194">Standardmäßig überwacht die Standardinstanz von [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] die Named Pipe `\\.\pipe\sql\query` und `\\.\pipe\MSSQL$<instancename>\sql\query` auf eine benannte Instanz.</span><span class="sxs-lookup"><span data-stu-id="a9026-194">By default, the default instance of [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] listens on named pipe `\\.\pipe\sql\query` and `\\.\pipe\MSSQL$<instancename>\sql\query` for a named instance.</span></span> <span data-ttu-id="a9026-195">Sie können keine Verbindung mit einer Instanz von [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] unter Verwendung eines alternativen Pipenamens herstellen.</span><span class="sxs-lookup"><span data-stu-id="a9026-195">You cannot connect to an instance of [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] by using an alternate pipe name.</span></span>  
  
 <span data-ttu-id="a9026-196">lpc</span><span class="sxs-lookup"><span data-stu-id="a9026-196">lpc</span></span>  
 <span data-ttu-id="a9026-197">Lokaler Prozeduraufruf.</span><span class="sxs-lookup"><span data-stu-id="a9026-197">Local procedure call.</span></span> <span data-ttu-id="a9026-198">Dieses Shared Memory-Protokoll ist verfügbar, wenn der Client eine Verbindung mit einer Instanz von [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] auf demselben Computer herstellt.</span><span class="sxs-lookup"><span data-stu-id="a9026-198">This shared memory protocol is available if the client is connecting to an instance of [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] on the same computer.</span></span>  
  
 <span data-ttu-id="a9026-199">**/Q**</span><span class="sxs-lookup"><span data-stu-id="a9026-199">**/Q**</span></span>  
 <span data-ttu-id="a9026-200">Führt **SQLDiag** im stillen Modus aus.</span><span class="sxs-lookup"><span data-stu-id="a9026-200">Runs **SQLdiag** in quiet mode.</span></span> <span data-ttu-id="a9026-201">**/Q** unterdrückt alle Aufforderungen, z.B. Aufforderungen zur Angabe eines Kennworts.</span><span class="sxs-lookup"><span data-stu-id="a9026-201">**/Q** suppresses all prompts, such as password prompts.</span></span>  
  
 <span data-ttu-id="a9026-202">**/G**</span><span class="sxs-lookup"><span data-stu-id="a9026-202">**/G**</span></span>  
 <span data-ttu-id="a9026-203">Führt **SQLDiag** im generischen Modus aus.</span><span class="sxs-lookup"><span data-stu-id="a9026-203">Runs **SQLdiag** in generic mode.</span></span> <span data-ttu-id="a9026-204">Wenn **/G** angegeben wird, wird beim Starten von **SQLDiag** weder eine [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] -Konnektivitätsprüfung erzwungen, noch wird überprüft, ob der Benutzer Mitglied der festen Serverrolle **sysadmin** ist.</span><span class="sxs-lookup"><span data-stu-id="a9026-204">When **/G** is specified, on startup **SQLdiag** does not enforce [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] connectivity checks or verify that the user is a member of the **sysadmin** fixed server role.</span></span> <span data-ttu-id="a9026-205">Stattdessen orientiert sich **SQLDiag** an Windows, um zu bestimmen, ob ein Benutzer die erforderlichen Rechte zum Sammeln der angeforderten Diagnoseinformationen besitzt.</span><span class="sxs-lookup"><span data-stu-id="a9026-205">Instead, **SQLdiag** defers to Windows to determine whether a user has the appropriate rights to gather each requested diagnostic.</span></span>  
  
 <span data-ttu-id="a9026-206">Wenn **/G** nicht angegeben wird, führt **SQLDiag** eine Überprüfung durch, um zu bestimmen, ob der Benutzer ein Mitglied der Windows-Gruppe **Administratoren** ist. Gehört der Benutzer nicht der Gruppe [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] Administratoren **an, werden keine** -Diagnoseinformationen gesammelt.</span><span class="sxs-lookup"><span data-stu-id="a9026-206">If **/G** is not specified, **SQLdiag** checks to determine whether the user is a member of the Windows **Administrators** group, and will not collect [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] diagnostics if the user is not an **Administrators** group member.</span></span>  
  
 <span data-ttu-id="a9026-207">**/R**</span><span class="sxs-lookup"><span data-stu-id="a9026-207">**/R**</span></span>  
 <span data-ttu-id="a9026-208">Registriert **SQLDiag** als Dienst.</span><span class="sxs-lookup"><span data-stu-id="a9026-208">Registers **SQLdiag** as a service.</span></span> <span data-ttu-id="a9026-209">Alle Befehlszeilenargumente, die angegeben werden, wenn Sie **SQLDiag** als Dienst registrieren, werden für die künftige Ausführung des Diensts beibehalten.</span><span class="sxs-lookup"><span data-stu-id="a9026-209">Any command line arguments that are specified when you register **SQLdiag** as a service are preserved for future runs of the service.</span></span>  
  
 <span data-ttu-id="a9026-210">Wenn **SQLDiag** als Dienst registriert wird, lautet der Standarddienstname SQLDIAG.</span><span class="sxs-lookup"><span data-stu-id="a9026-210">When **SQLdiag** is registered as a service, the default service name is SQLDIAG.</span></span> <span data-ttu-id="a9026-211">Sie können den Dienstnamen mithilfe des **/A** -Arguments ändern.</span><span class="sxs-lookup"><span data-stu-id="a9026-211">You can change the service name by using the **/A** argument.</span></span>  
  
 <span data-ttu-id="a9026-212">Starten Sie den Dienst mit dem Befehlszeilenargument **START** :</span><span class="sxs-lookup"><span data-stu-id="a9026-212">Use the **START** command line argument to start the service:</span></span>  
  
 <span data-ttu-id="a9026-213">**SQLDIAG START**</span><span class="sxs-lookup"><span data-stu-id="a9026-213">**SQLDIAG START**</span></span>  
  
 <span data-ttu-id="a9026-214">Sie können auch den Befehl **net start** verwenden, um den Dienst zu starten.</span><span class="sxs-lookup"><span data-stu-id="a9026-214">You can also use the **net start** command to start the service:</span></span>  
  
 <span data-ttu-id="a9026-215">**NET Start SQLdiag**</span><span class="sxs-lookup"><span data-stu-id="a9026-215">**net start SQLDIAG**</span></span>  
  
 <span data-ttu-id="a9026-216">**/U**</span><span class="sxs-lookup"><span data-stu-id="a9026-216">**/U**</span></span>  
 <span data-ttu-id="a9026-217">Hebt die Registrierung von **SQLDiag** als Dienst auf.</span><span class="sxs-lookup"><span data-stu-id="a9026-217">Unregisters **SQLdiag** as a service.</span></span>  
  
 <span data-ttu-id="a9026-218">Verwenden Sie das **/A** -Argument auch zum Aufheben der Registrierung einer benannten Instanz von **SQLDiag** .</span><span class="sxs-lookup"><span data-stu-id="a9026-218">Use the **/A** argument also if unregistering a named **SQLdiag** instance.</span></span>  
  
 <span data-ttu-id="a9026-219">**/L**</span><span class="sxs-lookup"><span data-stu-id="a9026-219">**/L**</span></span>  
 <span data-ttu-id="a9026-220">Führt **SQLDiag** im fortlaufenden Modus aus, wenn mit den Argumenten **/B** oder **/E** auch eine Startzeit bzw. Beendigungszeit angegeben wird.</span><span class="sxs-lookup"><span data-stu-id="a9026-220">Runs **SQLdiag** in continuous mode when a start time or end time is also specified with the **/B** or **/E** arguments, respectively.</span></span> <span data-ttu-id="a9026-221">**SQLDiag** wird automatisch neu gestartet, nachdem die Sammlung von Diagnoseinformationen aufgrund eines geplanten Herunterfahrens beendet wurde.</span><span class="sxs-lookup"><span data-stu-id="a9026-221">**SQLdiag** automatically restarts after diagnostics collection stops due to a scheduled shutdown.</span></span> <span data-ttu-id="a9026-222">Dies ist beispielsweise beim Verwenden des Arguments **/E** oder **/X** der Fall.</span><span class="sxs-lookup"><span data-stu-id="a9026-222">For example, by using the **/E** or the **/X** arguments.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="a9026-223">**SQLDiag** ignoriert das **/L** -Argument, wenn mit den Befehlszeilenargumenten **/B** und **/E** keine Startzeit bzw. Beendigungszeit angegeben wird.</span><span class="sxs-lookup"><span data-stu-id="a9026-223">**SQLdiag** ignores the **/L** argument if a start time or end time is not specified by using the **/B** and **/E** command line arguments.</span></span>  
  
 <span data-ttu-id="a9026-224">Das Verwenden von **/L** schließt den Dienstmodus nicht automatisch ein.</span><span class="sxs-lookup"><span data-stu-id="a9026-224">Using **/L** does not imply the service mode.</span></span> <span data-ttu-id="a9026-225">Wenn Sie **/L** beim Ausführen von **SQLDiag** als Dienst verwenden möchten, müssen Sie die Option in der Befehlszeile angeben, wenn Sie den Dienst registrieren.</span><span class="sxs-lookup"><span data-stu-id="a9026-225">To use **/L** when running **SQLdiag** as a service, specify it on the command line when you register the service.</span></span>  
  
 <span data-ttu-id="a9026-226">**/X**</span><span class="sxs-lookup"><span data-stu-id="a9026-226">**/X**</span></span>  
 <span data-ttu-id="a9026-227">Führt **SQLDiag** im Momentaufnahmemodus aus.</span><span class="sxs-lookup"><span data-stu-id="a9026-227">Runs **SQLdiag** in snapshot mode.</span></span> <span data-ttu-id="a9026-228">**SQLDiag** erstellt eine Momentaufnahme aller konfigurierten Diagnosesammlungen und wird dann automatisch heruntergefahren.</span><span class="sxs-lookup"><span data-stu-id="a9026-228">**SQLdiag** takes a snapshot of all configured diagnostics and then shuts down automatically.</span></span>  
  
 <span data-ttu-id="a9026-229">**START** | **STOP** | **STOP_ABORT**</span><span class="sxs-lookup"><span data-stu-id="a9026-229">**START** | **STOP** | **STOP_ABORT**</span></span>  
 <span data-ttu-id="a9026-230">Startet oder beendet den **SQLDiag** -Dienst.</span><span class="sxs-lookup"><span data-stu-id="a9026-230">Starts or stops the **SQLdiag** service.</span></span> <span data-ttu-id="a9026-231">**STOP_ABORT** zwingt den Dienst, so schnell wie möglich herunterzufahren, ohne die aktuell durchgeführte Sammlung von Diagnoseinformationen abzuschließen.</span><span class="sxs-lookup"><span data-stu-id="a9026-231">**STOP_ABORT** forces the service to shut down as quickly as possible without finishing collection of diagnostics it is currently collecting.</span></span>  
  
 <span data-ttu-id="a9026-232">Wenn diese Dienstkontrollargumente verwendet werden, müssen sie als erstes Argument in der Befehlszeile angegeben werden.</span><span class="sxs-lookup"><span data-stu-id="a9026-232">When these service control arguments are used, they must be the first argument used on the command line.</span></span> <span data-ttu-id="a9026-233">Beispiel:</span><span class="sxs-lookup"><span data-stu-id="a9026-233">For example:</span></span>  
  
 <span data-ttu-id="a9026-234">**SQLDIAG START**</span><span class="sxs-lookup"><span data-stu-id="a9026-234">**SQLDIAG START**</span></span>  
  
 <span data-ttu-id="a9026-235">Nur das **/A** -Argument, das eine benannte Instanz von **SQLDiag**angibt, kann zusammen mit **START**, **STOP**oder **STOP_ABORT** verwendet werden, um eine bestimmte Instanz des **SQLDiag** -Diensts zu steuern.</span><span class="sxs-lookup"><span data-stu-id="a9026-235">Only the **/A** argument, which specifies a named instance of **SQLdiag**, can be used with **START**, **STOP**, or **STOP_ABORT** to control a specific instance of the **SQLdiag** service.</span></span> <span data-ttu-id="a9026-236">Beispiel:</span><span class="sxs-lookup"><span data-stu-id="a9026-236">For example:</span></span>  
  
 <span data-ttu-id="a9026-237">**SQLDIAG START /A** _SQLdiag_application_name_</span><span class="sxs-lookup"><span data-stu-id="a9026-237">**SQLDIAG START /A** _SQLdiag_application_name_</span></span>  
  
## <a name="security-requirements"></a><span data-ttu-id="a9026-238">Sicherheitsanforderungen</span><span class="sxs-lookup"><span data-stu-id="a9026-238">Security Requirements</span></span>  
 <span data-ttu-id="a9026-239">Sofern **SQLDiag** nicht im generischen Modus (durch Angeben des Befehlszeilenarguments **/G** ) ausgeführt wird, muss der Benutzer, der **SQLDiag** ausführt, Mitglied der Windows-Gruppe **Administratoren** und der festen [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)]-Serverrolle **sysadmin** sein.</span><span class="sxs-lookup"><span data-stu-id="a9026-239">Unless **SQLdiag** is run in generic mode (by specifying the **/G** command line argument), the user who runs **SQLdiag** must be a member of the Windows **Administrators** group and a member of the [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] **sysadmin** fixed server role.</span></span> <span data-ttu-id="a9026-240">Standardmäßig verwendet **SQLDiag** die Windows-Authentifizierung für die Verbindung mit [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] . Die [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] -Authentifizierung wird jedoch ebenfalls unterstützt.</span><span class="sxs-lookup"><span data-stu-id="a9026-240">By default, **SQLdiag** connects to [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] by using Windows Authentication, but it also supports [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] Authentication.</span></span>  
  
## <a name="performance-considerations"></a><span data-ttu-id="a9026-241">Überlegungen zur Leistung</span><span class="sxs-lookup"><span data-stu-id="a9026-241">Performance Considerations</span></span>  
 <span data-ttu-id="a9026-242">Inwiefern sich die Ausführung von **SQLDiag** auf die Leistung auswirkt, hängt von der Art der Diagnosedaten ab, deren Sammlung konfiguriert wurde.</span><span class="sxs-lookup"><span data-stu-id="a9026-242">The performance effects of running **SQLdiag** depend on the type of diagnostic data you have configured it to collect.</span></span> <span data-ttu-id="a9026-243">Wenn Sie **SQLDiag** z.B. so konfiguriert haben, dass [!INCLUDE[ssSqlProfiler](../includes/sssqlprofiler-md.md)] -Ablaufverfolgungsdaten gesammelt werden, wirkt sich dies umso stärker auf die Serverleistung aus, je mehr Ereignisklassen Sie für die Ablaufverfolgung ausgewählt haben.</span><span class="sxs-lookup"><span data-stu-id="a9026-243">For example, if you have configured **SQLdiag** to collect [!INCLUDE[ssSqlProfiler](../includes/sssqlprofiler-md.md)] tracing information, the more event classes you choose to trace, the more your server performance is affected.</span></span>  
  
 <span data-ttu-id="a9026-244">Die Leistungseinbußen, die sich durch das Ausführen von **SQLDiag** ergeben, entsprechen ungefähr der Summe der Kosten, die sich durch die getrennte Sammlung der konfigurierten Diagnosedaten ergeben.</span><span class="sxs-lookup"><span data-stu-id="a9026-244">The performance impact of running **SQLdiag** is approximately equivalent to the sum of the costs of collecting the configured diagnostics separately.</span></span> <span data-ttu-id="a9026-245">So entstehen z.B. durch die Sammlung von Ablaufverfolgungsdaten mithilfe von **SQLDiag** dieselben Leistungskosten wie durch die Sammlung mit [!INCLUDE[ssSqlProfiler](../includes/sssqlprofiler-md.md)].</span><span class="sxs-lookup"><span data-stu-id="a9026-245">For example, collecting a trace with **SQLdiag** incurs the same performance cost as collecting it with [!INCLUDE[ssSqlProfiler](../includes/sssqlprofiler-md.md)].</span></span> <span data-ttu-id="a9026-246">Die Leistungseinbußen bei Verwendung von **SQLDiag** sind unerheblich.</span><span class="sxs-lookup"><span data-stu-id="a9026-246">The performance impact of using **SQLdiag** is negligible.</span></span>  
  
## <a name="required-disk-space"></a><span data-ttu-id="a9026-247">Erforderlicher Speicherplatz</span><span class="sxs-lookup"><span data-stu-id="a9026-247">Required Disk Space</span></span>  
 <span data-ttu-id="a9026-248">Da **SQLDiag** verschiedene Arten von Diagnoseinformationen sammeln kann, variiert auch der freie Speicherplatz, der für das Ausführen von **SQLDiag** erforderlich ist.</span><span class="sxs-lookup"><span data-stu-id="a9026-248">Because **SQLdiag** can collect different types of diagnostic information, the free disk space that is required to run **SQLdiag** varies.</span></span> <span data-ttu-id="a9026-249">Die Menge der gesammelten Diagnoseinformationen hängt von der Eigenart und dem Umfang der Arbeitsauslastung ab, die der Server verarbeitet, und kann von einigen Megabytes bis hin zu vielen Gigabytes reichen.</span><span class="sxs-lookup"><span data-stu-id="a9026-249">The amount of diagnostic information collected depends on the nature and volume of the workload that the server is processing and may range from a few megabytes to several gigabytes.</span></span>  
  
## <a name="configuration-files"></a><span data-ttu-id="a9026-250">Konfigurationsdateien</span><span class="sxs-lookup"><span data-stu-id="a9026-250">Configuration Files</span></span>  
 <span data-ttu-id="a9026-251">Beim Start liest **SQLDiag** die Konfigurationsdatei und die angegebenen Befehlszeilenargumente.</span><span class="sxs-lookup"><span data-stu-id="a9026-251">On startup, **SQLdiag** reads the configuration file and the command line arguments that have been specified.</span></span> <span data-ttu-id="a9026-252">In der Konfigurationsdatei geben Sie die Art der Diagnoseinformationen, die mit **SQLDiag** gesammelt werden.</span><span class="sxs-lookup"><span data-stu-id="a9026-252">You specify the types of diagnostic information that **SQLdiag** collects in the configuration file.</span></span> <span data-ttu-id="a9026-253">Standardmäßig verwendet **SQLDiag** die Konfigurationsdatei SQLDiag.Xml, die sich im Startordner des Hilfsprogramms **SQLDiag** befindet und bei jeder Ausführung des Tools extrahiert wird.</span><span class="sxs-lookup"><span data-stu-id="a9026-253">By default, **SQLdiag** uses the SQLDiag.Xml configuration file, which is extracted each time the tool runs and is located in the **SQLdiag** utility startup folder.</span></span> <span data-ttu-id="a9026-254">Die Konfigurationsdatei verwendet das XML-Schema, SQLDiag_schema.xsd, das ebenfalls bei jedem Ausführen von **SQLDiag** aus der ausführbaren Datei in das Startverzeichnis des Hilfsprogramms extrahiert wird.</span><span class="sxs-lookup"><span data-stu-id="a9026-254">The configuration file uses the XML schema, SQLDiag_schema.xsd, which is also extracted into the utility startup directory from the executable file each time **SQLdiag** runs.</span></span>  
  
### <a name="editing-the-configuration-files"></a><span data-ttu-id="a9026-255">Bearbeiten der Konfigurationsdateien</span><span class="sxs-lookup"><span data-stu-id="a9026-255">Editing the Configuration Files</span></span>  
 <span data-ttu-id="a9026-256">Sie können SQLDiag.Xml kopieren und bearbeiten, um die Art der von **SQLDiag** gesammelten Diagnosedaten zu ändern.</span><span class="sxs-lookup"><span data-stu-id="a9026-256">You can copy and edit SQLDiag.Xml to change the types of diagnostic data that **SQLdiag** collects.</span></span> <span data-ttu-id="a9026-257">Bearbeiten Sie die Konfigurationsdatei immer mit einem XML-Editor, der die Konfigurationsdatei anhand des XML-Schemas überprüfen kann (z. B. [!INCLUDE[ssManStudio](../includes/ssmanstudio-md.md)]).</span><span class="sxs-lookup"><span data-stu-id="a9026-257">When editing the configuration file always use an XML editor that can validate the configuration file against its XML schema, such as [!INCLUDE[ssManStudio](../includes/ssmanstudio-md.md)].</span></span> <span data-ttu-id="a9026-258">SQLDiag.Xml sollte nicht direkt bearbeitet werden.</span><span class="sxs-lookup"><span data-stu-id="a9026-258">You should not edit SQLDiag.Xml directly.</span></span> <span data-ttu-id="a9026-259">Erstellen Sie stattdessen eine Kopie von SQLDiag.Xml, und weisen Sie der Datei in demselben Ordner einen neuen Namen zu.</span><span class="sxs-lookup"><span data-stu-id="a9026-259">Instead, make a copy of SQLDiag.Xml and rename it to a new file name in the same folder.</span></span> <span data-ttu-id="a9026-260">Bearbeiten Sie dann die neue Datei, und verwenden Sie das Argument **/I** , um sie an **SQLDiag**zu übergeben.</span><span class="sxs-lookup"><span data-stu-id="a9026-260">Then edit the new file, and use the **/I** argument to pass it to **SQLdiag**.</span></span>  
  
#### <a name="editing-the-configuration-file-when-sqldiag-runs-as-a-service"></a><span data-ttu-id="a9026-261">Bearbeiten der Konfigurationsdatei, wenn SQLdiag als Dienst ausgeführt wird</span><span class="sxs-lookup"><span data-stu-id="a9026-261">Editing the Configuration File When SQLdiag Runs as a Service</span></span>  
 <span data-ttu-id="a9026-262">Wenn Sie **SQLDiag** bereits als Dienst ausgeführt haben und die Konfigurationsdatei nun bearbeiten müssen, müssen Sie die Registrierung des SQLDIAG-Diensts aufheben, indem Sie das Befehlszeilenargument **/U** angeben und den Dienst anschließend mithilfe des Befehlszeilenarguments **/R** erneut registrieren.</span><span class="sxs-lookup"><span data-stu-id="a9026-262">If you have already run **SQLdiag** as a service and need to edit the configuration file, unregister the SQLDIAG service by specifying the **/U** command line argument and then re-register the service by using the **/R** command line argument.</span></span> <span data-ttu-id="a9026-263">Durch das Aufheben der Registrierung und die erneute Registrierung des Diensts werden alle Konfigurationsinformationen entfernt, die in der Windows-Registrierung zwischengespeichert waren.</span><span class="sxs-lookup"><span data-stu-id="a9026-263">Unregistering and re-registering the service removes old configuration information that was cached in the Windows registry.</span></span>  
  
## <a name="output-folder"></a><span data-ttu-id="a9026-264">Ausgabeordner</span><span class="sxs-lookup"><span data-stu-id="a9026-264">Output Folder</span></span>  
 <span data-ttu-id="a9026-265">Wenn Sie keinen Ausgabeordner mithilfe von **/O** angeben, erstellt **SQLDiag** den Unterordner SQLDIAG unterhalb des Startordners von **SQLDiag** .</span><span class="sxs-lookup"><span data-stu-id="a9026-265">If you do not specify an output folder with the **/O** argument, **SQLdiag** creates a subfolder named SQLDIAG under the **SQLdiag** startup folder.</span></span> <span data-ttu-id="a9026-266">Beim Sammeln von Diagnoseinformationen, die große Mengen an Ablaufverfolgungsdaten einschließen, z.B. mit [!INCLUDE[ssSqlProfiler](../includes/sssqlprofiler-md.md)] , müssen Sie sicherstellen, dass sich der Ausgabeordner auf einem lokalen Laufwerk befindet, das über ausreichend Speicherplatz zum Speichern der angeforderten Diagnoseausgabe verfügt.</span><span class="sxs-lookup"><span data-stu-id="a9026-266">For diagnostic information collection that involves high volume tracing, such as [!INCLUDE[ssSqlProfiler](../includes/sssqlprofiler-md.md)] , make sure that the output folder is on a local drive with enough space to store the requested diagnostic output.</span></span>  
  
 <span data-ttu-id="a9026-267">Bei einem Neustart von **SQLDiag** wird der Inhalt des Ausgabeordners überschrieben.</span><span class="sxs-lookup"><span data-stu-id="a9026-267">When **SQLdiag** is restarted, it overwrites the contents of the output folder.</span></span> <span data-ttu-id="a9026-268">Geben Sie **/N 2** in der Befehlszeile an, um dies zu vermeiden.</span><span class="sxs-lookup"><span data-stu-id="a9026-268">To avoid this, specify **/N 2** on the command line.</span></span>  
  
## <a name="data-collection-process"></a><span data-ttu-id="a9026-269">Datensammlung</span><span class="sxs-lookup"><span data-stu-id="a9026-269">Data Collection Process</span></span>  
 <span data-ttu-id="a9026-270">Beim Starten von **SQLDiag** werden die Initialisierungsprüfungen ausgeführt, die notwendig sind, um die in „SQLDiag.Xml“ angegebenen Diagnosedaten zu sammeln.</span><span class="sxs-lookup"><span data-stu-id="a9026-270">When **SQLdiag** starts, it performs the initialization checks necessary to collect the diagnostic data that have been specified in SQLDiag.Xml.</span></span> <span data-ttu-id="a9026-271">Dieser Vorgang kann mehrere Sekunden dauern.</span><span class="sxs-lookup"><span data-stu-id="a9026-271">This process may take several seconds.</span></span> <span data-ttu-id="a9026-272">Wenn das Hilfsprogramm als Konsolenanwendung ausgeführt wird, wird eine Meldung angezeigt, sobald **SQLDiag** mit der Sammlung von Diagnosedaten begonnen hat. Diese Meldung informiert Sie darüber, dass die Sammlung von Daten mithilfe von **SQLDiag** gestartet wurde dass Sie diesen Vorgang durch Drücken von STRG+C beenden können.</span><span class="sxs-lookup"><span data-stu-id="a9026-272">After **SQLdiag** has started collecting diagnostic data when it is run as a console application, a message displays informing you that **SQLdiag** collection has started and that you can press CTRL+C to stop it.</span></span> <span data-ttu-id="a9026-273">Wenn **SQLDiag** als Dienst ausgeführt wird, wird eine vergleichbare Meldung in das Windows-Ereignisprotokoll geschrieben.</span><span class="sxs-lookup"><span data-stu-id="a9026-273">When **SQLdiag** is run as a service, a similar message is written to the Windows event log.</span></span>  
  
 <span data-ttu-id="a9026-274">Wenn Sie **SQLDiag** zum Diagnostizieren eines reproduzierbaren Problems verwenden, sollten Sie warten, bis diese Meldung angezeigt wird, bevor Sie das Problem auf dem Server reproduzieren.</span><span class="sxs-lookup"><span data-stu-id="a9026-274">If you are using **SQLdiag** to diagnose a problem that you can reproduce, wait until you receive this message before you reproduce the problem on your server.</span></span>  
  
 <span data-ttu-id="a9026-275">**SQLDiag** sammelt die meisten Diagnosedaten parallel.</span><span class="sxs-lookup"><span data-stu-id="a9026-275">**SQLdiag** collects most diagnostic data in parallel.</span></span> <span data-ttu-id="a9026-276">Alle Diagnoseinformationen werden gesammelt, indem Verbindungen mit Tools wie dem [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)]-Hilfsprogramm **sqlcmd** oder dem Windows-Befehlsprozessor hergestellt werden, es sei denn die Informationen werden über Windows-Leistungs- und Ereignisprotokolle gesammelt.</span><span class="sxs-lookup"><span data-stu-id="a9026-276">All diagnostic information is collected by connecting to tools, such as the [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] **sqlcmd** utility or the Windows command processor, except when information is collected from Windows performance logs and event logs.</span></span> <span data-ttu-id="a9026-277">**SQLDiag** verwendet einen Arbeitsthread je Computer, um die Sammlung der Diagnosedaten mithilfe dieser anderen Tools zu überwachen; hierbei wird oftmals gleichzeitig auf die Beendigung der Ausführung mehrerer Tools gewartet.</span><span class="sxs-lookup"><span data-stu-id="a9026-277">**SQLdiag** uses one worker thread per computer to monitor the diagnostic data collection of these other tools, often simultaneously waiting for several tools to complete.</span></span> <span data-ttu-id="a9026-278">Während des Sammelns leitet **SQLDiag** die Ausgabe jeder Diagnose an den Ausgabeordner weiter.</span><span class="sxs-lookup"><span data-stu-id="a9026-278">During the collection process, **SQLdiag** routes the output from each diagnostic to the output folder.</span></span>  
  
## <a name="stopping-data-collection"></a><span data-ttu-id="a9026-279">Beenden der Datensammlung</span><span class="sxs-lookup"><span data-stu-id="a9026-279">Stopping Data Collection</span></span>  
 <span data-ttu-id="a9026-280">Nachdem **SQLDiag** mit dem Sammeln von Diagnosedaten begonnen hat, wird dieser Vorgang fortgesetzt, bis Sie ihn beenden oder er konfigurationsgemäß zu einer bestimmten Zeit beendet wird.</span><span class="sxs-lookup"><span data-stu-id="a9026-280">After **SQLdiag** starts collecting diagnostic data, it continues to do so unless you stop it or it is configured to stop at a specified time.</span></span> <span data-ttu-id="a9026-281">Sie können **SQLDiag** so konfigurieren, dass die Datensammlung zu einem bestimmten Zeitpunkt beendet wird, indem Sie **/E** verwenden, um eine bestimmte Beendigungszeit anzugeben, oder **/X** angeben, um **SQLDiag** im Momentaufnahmemodus auszuführen.</span><span class="sxs-lookup"><span data-stu-id="a9026-281">You can configure **SQLdiag** to stop at a specified time by using the **/E** argument, which allows you to specify a stop time, or by using the **/X** argument, which causes **SQLdiag** to run in snapshot mode.</span></span>  
  
 <span data-ttu-id="a9026-282">Wenn **SQLDiag** beendet wird, werden alle gestarteten Diagnosen beendet.</span><span class="sxs-lookup"><span data-stu-id="a9026-282">When **SQLdiag** stops, it stops all diagnostics it has started.</span></span> <span data-ttu-id="a9026-283">So werden beispielsweise [!INCLUDE[ssSqlProfiler](../includes/sssqlprofiler-md.md)] -Ablaufverfolgungen, die gesammelt wurden, und das Ausführen von [!INCLUDE[tsql](../includes/tsql-md.md)] -Skripts beendet. Weiterhin werden alle Unterprozesse beendet, die während der Datensammlung erzeugt wurden.</span><span class="sxs-lookup"><span data-stu-id="a9026-283">For example, it stops [!INCLUDE[ssSqlProfiler](../includes/sssqlprofiler-md.md)] traces it was collecting, it stops executing [!INCLUDE[tsql](../includes/tsql-md.md)] scripts it was running, and it stops any sub processes it has spawned during data collection.</span></span> <span data-ttu-id="a9026-284">Nachdem die Sammlung von Diagnosedaten abgeschlossen ist, wird **SQLDiag** beendet.</span><span class="sxs-lookup"><span data-stu-id="a9026-284">After diagnostic data collection has completed, **SQLdiag** exits.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="a9026-285">Das Anhalten des **SQLDiag** -Diensts wird nicht unterstützt.</span><span class="sxs-lookup"><span data-stu-id="a9026-285">Pausing the **SQLdiag** service is not supported.</span></span> <span data-ttu-id="a9026-286">Wenn Sie versuchen, den **SQLDiag** -Dienst anzuhalten, wird der Dienst nach Abschluss der Sammlung von Diagnoseinformationen beendet, die beim Anhalten des Diensts gerade durchgeführt wurde.</span><span class="sxs-lookup"><span data-stu-id="a9026-286">If you attempt to pause the **SQLdiag** service, it stops after it finishes collecting the diagnostics that it was collecting when you paused it.</span></span> <span data-ttu-id="a9026-287">Wenn Sie **SQLDiag** nach Beendigung neu starten, wird beim Starten der Anwendung der Inhalt des Ausgabeordners überschrieben.</span><span class="sxs-lookup"><span data-stu-id="a9026-287">If you restart **SQLdiag** after stopping it, the application restarts and overwrites the output folder.</span></span> <span data-ttu-id="a9026-288">Soll der Ausgabeordner nicht überschrieben werden, müssen Sie **/N 2** in der Befehlszeile angeben.</span><span class="sxs-lookup"><span data-stu-id="a9026-288">To avoid overwriting the output folder, specify **/N 2** on the command line.</span></span>  
  
 <span data-ttu-id="a9026-289">**So beenden Sie SQLdiag, wenn das Hilfsprogramm als Konsolenanwendung ausgeführt wird**</span><span class="sxs-lookup"><span data-stu-id="a9026-289">**To stop SQLdiag when running as a console application**</span></span>  
  
 <span data-ttu-id="a9026-290">Wenn Sie **SQLDiag** als Konsolenanwendung ausführen, können Sie das Ausführen beenden, indem Sie im Konsolenfenster, in dem **SQLDiag** ausgeführt wird, STRG+C drücken.</span><span class="sxs-lookup"><span data-stu-id="a9026-290">If you are running **SQLdiag** as a console application, press CTRL+C in the console window where **SQLdiag** is running to stop it.</span></span> <span data-ttu-id="a9026-291">Nach dem Drücken von STRG+C wird eine Meldung im Konsolenfenster angezeigt, die Sie darüber informiert, dass die Datensammlung durch **SQLDiag** beendet wird und Sie warten sollten, bis der Prozess heruntergefahren wird, was einige Minuten in Anspruch nehmen kann.</span><span class="sxs-lookup"><span data-stu-id="a9026-291">After you press CTRL+C, a message displays in the console window informing you that **SQLDiag** data collection is ending, and that you should wait until the process shuts down, which may take several minutes.</span></span>  
  
 <span data-ttu-id="a9026-292">Drücken Sie STRG+C zweimal, um alle untergeordneten Diagnoseprozesse zu beenden und die Anwendung sofort zu beenden.</span><span class="sxs-lookup"><span data-stu-id="a9026-292">Press Ctrl+C twice to terminate all child diagnostic processes and immediately terminate the application.</span></span>  
  
 <span data-ttu-id="a9026-293">**So beenden Sie SQLdiag, wenn das Hilfsprogramm als Dienst ausgeführt wird**</span><span class="sxs-lookup"><span data-stu-id="a9026-293">**To stop SQLdiag when running as a service**</span></span>  
  
 <span data-ttu-id="a9026-294">Wenn Sie **SQLDiag** als Dienst ausführen, führen Sie **SQLDiag STOP** im Startordner von **SQLDiag** aus, um das Programm zu beenden.</span><span class="sxs-lookup"><span data-stu-id="a9026-294">If you are running **SQLdiag** as a service, run **SQLDiag STOP** in the **SQLdiag** startup folder to stop it.</span></span>  
  
 <span data-ttu-id="a9026-295">Wenn Sie mehrere Instanzen von **SQLDiag** auf demselben Computer ausführen, können Sie beim Beenden des Diensts auch den Namen der jeweiligen Instanz von **SQLDiag** an die Befehlszeile übergeben.</span><span class="sxs-lookup"><span data-stu-id="a9026-295">If you are running multiple instances of **SQLdiag** on the same computer, you can also pass the **SQLdiag** instance name to on the command line when you stop the service.</span></span> <span data-ttu-id="a9026-296">Verwenden Sie die folgende Syntax, um z.B. eine Instanz von **SQLDiag** mit dem Namen „Instance1“ zu beenden:</span><span class="sxs-lookup"><span data-stu-id="a9026-296">For example, to stop a **SQLdiag** instance named Instance1, use the following syntax:</span></span>  
  
```  
SQLDIAG STOP /A Instance1  
```  
  
> [!NOTE]  
>  <span data-ttu-id="a9026-297">**/A** ist das einzige Befehlszeilenargument, das mit **START**, **STOP**oder **STOP_ABORT**verwendet werden kann.</span><span class="sxs-lookup"><span data-stu-id="a9026-297">**/A** is the only command-line argument that can be used with **START**, **STOP**, or **STOP_ABORT**.</span></span> <span data-ttu-id="a9026-298">Wenn Sie eine benannte Instanz von **SQLDiag** mit einem der Dienstkontrollverben angeben müssen, müssen Sie **/A** wie im vorherigen Syntaxbeispiel nach dem Kontrollverb in der Befehlszeile angeben.</span><span class="sxs-lookup"><span data-stu-id="a9026-298">If you need to specify a named instance of **SQLdiag** with one of the service control verbs, specify **/A** after the control verb on the command line as shown in the previous syntax example.</span></span> <span data-ttu-id="a9026-299">Werden Kontrollverben verwendet, müssen diese als erstes Argument in der Befehlszeile angegeben werden.</span><span class="sxs-lookup"><span data-stu-id="a9026-299">When control verbs are used, they must be the first argument on the command line.</span></span>  
  
 <span data-ttu-id="a9026-300">Soll der Dienst so schnell wie möglich beendet werden, führen Sie **SQLDIAG STOP_ABORT** im Startordner des Hilfsprogramms aus.</span><span class="sxs-lookup"><span data-stu-id="a9026-300">To stop the service as quickly as possible, run **SQLDIAG STOP_ABORT** in the utility startup folder.</span></span> <span data-ttu-id="a9026-301">Mit diesem Befehl werden alle aktuell ausgeführten Sammlungen von Diagnoseinformationen abgebrochen, ohne auf ihre Beendigung zu warten.</span><span class="sxs-lookup"><span data-stu-id="a9026-301">This command aborts any diagnostics collecting currently being performed without waiting for them to finish.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="a9026-302">Verwenden Sie **SQLDiag STOP** oder **SQLDIAG STOP_ABORT** , um den **SQLDiag** -Dienst zu beenden.</span><span class="sxs-lookup"><span data-stu-id="a9026-302">Use **SQLDiag STOP** or **SQLDIAG STOP_ABORT** to stop the **SQLdiag** service.</span></span> <span data-ttu-id="a9026-303">Verwenden Sie die zum Beenden von **SQLDiag** oder anderen [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] -Diensten nicht die Windows-Dienstkonsole.</span><span class="sxs-lookup"><span data-stu-id="a9026-303">Do not use the Windows Services Console to stop **SQLdiag** or other [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] services.</span></span>  
  
## <a name="automatically-starting-and-stopping-sqldiag"></a><span data-ttu-id="a9026-304">Automatisches Starten und Beenden von SQLdiag</span><span class="sxs-lookup"><span data-stu-id="a9026-304">Automatically Starting and Stopping SQLdiag</span></span>  
 <span data-ttu-id="a9026-305">Um die Sammlung von Diagnosedaten zu einem bestimmten Zeitpunkt automatisch zu starten und zu starten, verwenden Sie die **/B**_-start_time_ und die **/E**-_stop_time_ Argumente mit 24-Stunden-Notation.</span><span class="sxs-lookup"><span data-stu-id="a9026-305">To automatically start and stop diagnostic data collection at a specified time, use the **/B**_start_time_ and **/E**_stop_time_ arguments, using 24-hour notation.</span></span> <span data-ttu-id="a9026-306">Wenn Sie beispielsweise ein Problem behandeln möchten, das immer gegen ca. 02:00:00 Uhr auftritt, können Sie **SQLDiag** so konfigurieren, dass die Sammlung von Diagnosedaten automatisch um 01:00 Uhr beginnt und automatisch um 03:00:00 Uhr endet.</span><span class="sxs-lookup"><span data-stu-id="a9026-306">For example, if you are troubleshooting a problem that consistently appears at approximately 02:00:00, you can configure **SQLdiag** to automatically start collecting diagnostic data at 01:00 and automatically stop at 03:00:00.</span></span> <span data-ttu-id="a9026-307">Geben Sie die Start- und Beendigungszeit mit dem **/B** -Argument und dem **/E** -Argument an.</span><span class="sxs-lookup"><span data-stu-id="a9026-307">Use the **/B** and **/E** arguments to specify the start and stop time.</span></span> <span data-ttu-id="a9026-308">Verwenden Sie die 24-Stunden-Notation, um das genau Start- und Beendigungsdatum und die Uhrzeit im Format YYYYMMDD_HH:MM:SS anzugeben.</span><span class="sxs-lookup"><span data-stu-id="a9026-308">Use 24-hour notation to specify an exact start and stop date and time with the format YYYYMMDD_HH:MM:SS.</span></span> <span data-ttu-id="a9026-309">Zum Angeben einer relativen Start- und Beendigungszeit geben Sie **+** vor der Start- und der Beendigungszeit an, wobei jedoch der Datumsabschnitt (YYYYMMDD_) wie im folgenden Beispiel gezeigt, entfällt. Diese Angabe bewirkt, dass **SQLDiag** 1 Stunde wartet, bevor mit dem Sammeln von Informationen begonnen wird. Die Datensammlung wird dann für 3 Stunden fortgeführt und danach beendet:</span><span class="sxs-lookup"><span data-stu-id="a9026-309">To specify a relative start or stop time, prefix the start and stop time with **+** and omit the date portion (YYYYMMDD_) as shown in the following example, which causes **SQLdiag** to wait 1 hour before it starts collecting information, then it collects information for 3 hours before it stops and exits:</span></span>  
  
```  
sqldiag /B +01:00:00 /E +03:00:00  
```  
  
 <span data-ttu-id="a9026-310">Wenn ein relativer *start_time* -Wert angegeben wird, wird **SQLDiag** zu einem Zeitpunkt gestartet, der relativ zum aktuellen Datum und zur aktuellen Uhrzeit ist.</span><span class="sxs-lookup"><span data-stu-id="a9026-310">When a relative *start_time* is specified, **SQLdiag** starts at a time that is relative to the current date and time.</span></span> <span data-ttu-id="a9026-311">Wenn ein relativer *end_time* -Wert angegeben wird, wird **SQLDiag** zu einem Zeitpunkt beendet, der relativ zum angegebenen *start_time*-Wert ist.</span><span class="sxs-lookup"><span data-stu-id="a9026-311">When a relative *end_time* is specified, **SQLdiag** ends at a time that is relative to the specified *start_time*.</span></span> <span data-ttu-id="a9026-312">Wenn die angegebenen Start- oder Beendigungszeitpunkte in der Vergangenheit liegen, erzwingt **SQLDiag** eine Änderung des Startdatums, sodass Startdatum und -uhrzeit in der Zukunft liegen.</span><span class="sxs-lookup"><span data-stu-id="a9026-312">If the start or end date and time that you have specified is in the past, **SQLdiag** forcibly changes the start date so that the start date and time are in the future.</span></span>  
  
 <span data-ttu-id="a9026-313">Dies hat erhebliche Auswirkungen auf die von Ihnen ausgewählten Start- und Beendigungsdaten.</span><span class="sxs-lookup"><span data-stu-id="a9026-313">This has important implications on the start and end dates you choose.</span></span> <span data-ttu-id="a9026-314">Betrachten Sie das folgenden Beispiel:</span><span class="sxs-lookup"><span data-stu-id="a9026-314">Consider the following example:</span></span>  
  
```  
sqldiag /B +01:00:00 /E 08:30:00  
```  
  
 <span data-ttu-id="a9026-315">Wenn es derzeit 08:00 Uhr, ist die Beendigungszeit schon vorbei, bevor die Sammlung der Diagnosedaten überhaupt begonnen hat.</span><span class="sxs-lookup"><span data-stu-id="a9026-315">If the current time is 08:00, the end time passes before diagnostic collection actually begins.</span></span> <span data-ttu-id="a9026-316">Da **SQLDiag** die Start- und Beendigungsdaten automatisch anpasst und auf den nächsten Tag verschiebt, wenn die Zeitpunkte in der Vergangenheit liegen, beginnt die Sammlung der Diagnosedaten in diesem Beispiel heute um 09:00 Uhr (mit **+** wurde eine relative Startzeit angegeben) und wird bis zum folgenden Morgen um 08:30 Uhr fortgeführt.</span><span class="sxs-lookup"><span data-stu-id="a9026-316">Because **SQLDiag** automatically adjusts start and end dates to the next day when they occur in the past, in this example diagnostic collection starts at 09:00 today (a relative start time has been specified with **+**) and continues collecting until 08:30 the following morning.</span></span>  
  
### <a name="stopping-and-restarting-sqldiag-to-collect-daily-diagnostics"></a><span data-ttu-id="a9026-317">Beenden und erneutes Starten von SQLdiag zum Sammeln täglicher Diagnoseinformationen</span><span class="sxs-lookup"><span data-stu-id="a9026-317">Stopping and Restarting SQLdiag to Collect Daily Diagnostics</span></span>  
 <span data-ttu-id="a9026-318">Mithilfe von **/L**können Sie jeden Tag einen angegebenen Satz von Diagnosedaten sammeln, ohne **SQLDiag** manuell starten und beenden zu müssen.</span><span class="sxs-lookup"><span data-stu-id="a9026-318">To collect a specified set of diagnostics on a daily basis without having to manually start and stop **SQLdiag**, use the **/L** argument.</span></span> <span data-ttu-id="a9026-319">Durch **/L** wird **SQLDiag** fortlaufend ausgeführt, da dieses Argument bewirkt, dass sich das Hilfsprogramm nach einem geplanten Herunterfahren automatisch neu startet.</span><span class="sxs-lookup"><span data-stu-id="a9026-319">The **/L** argument causes **SQLdiag** to run continuously by automatically restarting itself after a scheduled shutdown.</span></span> <span data-ttu-id="a9026-320">Wenn **/L** angegeben wurde und **SQLDiag** beendet wird, weil die mit **/E** angegebene Beendigungszeit erreicht wurde oder weil das Hilfsprogramm durch die Angabe von **/X** im Momentaufnahmemodus ausgeführt wird, wird **SQLDiag** nicht vollständig beendet, sondern erneut gestartet.</span><span class="sxs-lookup"><span data-stu-id="a9026-320">When **/L** is specified, and **SQLdiag** stops because it has reached the end time specified with the **/E** argument, or it stops because it is being run in snapshot mode by using the **/X** argument, **SQLdiag** restarts instead of exiting.</span></span>  
  
 <span data-ttu-id="a9026-321">Im folgenden Beispiel wird angegeben, dass **SQLDiag** im fortlaufenden Modus ausgeführt wird, damit das Hilfsprogramm automatisch neu gestartet wird, nachdem zwischen 03:00:00 und 05:00:00 Uhr die Sammlung von Diagnosedaten erfolgt ist.</span><span class="sxs-lookup"><span data-stu-id="a9026-321">The following example specifies that **SQLdiag** run in continuous mode to automatically restart after diagnostic data collecting occurs between 03:00:00 and 05:00:00.</span></span>  
  
```  
sqldiag /B 03:00:00 /E 05:00:00 /L  
```  
  
 <span data-ttu-id="a9026-322">Im folgenden Beispiel wird angegeben, dass **SQLDiag** im fortlaufenden Modus ausgeführt wird, damit das Hilfsprogramm automatisch neu gestartet wird, nachdem um 03:00:00 Uhr eine Momentaufnahme der Diagnosedaten erstellt wurde.</span><span class="sxs-lookup"><span data-stu-id="a9026-322">The following example specifies that **SQLdiag** run in continuous mode to automatically restart after taking a diagnostic data snapshot at 03:00:00.</span></span>  
  
```  
sqldiag /B 03:00:00 /X /L  
```  
  
## <a name="running-sqldiag-as-a-service"></a><span data-ttu-id="a9026-323">Ausführen von SQLdiag als Dienst</span><span class="sxs-lookup"><span data-stu-id="a9026-323">Running SQLdiag as a Service</span></span>  
 <span data-ttu-id="a9026-324">Wenn Sie **SQLDiag** verwenden möchten, um Diagnosedaten über längere Zeiträume zu sammeln, in deren Verlauf Sie sich jedoch möglicherweise vom Computer abmelden müssen, auf dem **SQLDiag** ausgeführt wird, können Sie es als Dienst ausführen.</span><span class="sxs-lookup"><span data-stu-id="a9026-324">When you want to use **SQLdiag** to collect diagnostic data for long periods of time during which you might need to log out of the computer on which **SQLdiag** is running, you can run it as a service.</span></span>  
  
 <span data-ttu-id="a9026-325">**So registrieren Sie SQLDiag für das Ausführen als Dienst**</span><span class="sxs-lookup"><span data-stu-id="a9026-325">**To register SQLDiag to run as a service**</span></span>  
  
 <span data-ttu-id="a9026-326">Sie können **SQLDiag** für das Ausführen als Dienst registrieren, indem Sie **/R** in der Befehlszeile angeben.</span><span class="sxs-lookup"><span data-stu-id="a9026-326">You can register **SQLdiag** to run as a service by specifying the **/R** argument at the command line.</span></span> <span data-ttu-id="a9026-327">Hierdurch wird **SQLDiag** für das Ausführen als Dienst registriert.</span><span class="sxs-lookup"><span data-stu-id="a9026-327">This registers **SQLdiag** to run as a service.</span></span> <span data-ttu-id="a9026-328">Der Dienstname von **SQLDiag** ist SQLDIAG.</span><span class="sxs-lookup"><span data-stu-id="a9026-328">The **SQLdiag** service name is SQLDIAG.</span></span> <span data-ttu-id="a9026-329">Wenn Sie beim Registrieren von **SQLDiag** als Dienst weitere Argumente in der Befehlszeile angeben, werden diese Argumente beibehalten und erneut verwendet, wenn der Dienst gestartet wird.</span><span class="sxs-lookup"><span data-stu-id="a9026-329">Any other arguments you specify on the command line when you register **SQLDiag** as a service are preserved and reused when the service is started.</span></span>  
  
 <span data-ttu-id="a9026-330">Wenn Sie den Standarddienstnamen SQLDIAG ändern möchten, geben Sie mit dem Befehlszeilenargument **/A** einen anderen Namen an.</span><span class="sxs-lookup"><span data-stu-id="a9026-330">To change the default SQLDIAG service name, use the **/A** command-line argument to specify another name.</span></span> <span data-ttu-id="a9026-331">**SQLDiag** setzt vor jeden mit **/A** angegebenen Instanznamen von **SQLDiag** automatisch das Präfix DIAG$, um aussagefähige Dienstnamen zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="a9026-331">**SQLdiag** automatically prefixes DIAG$ to any **SQLdiag** instance name specified with **/A** to create sensible service names.</span></span>  
  
 <span data-ttu-id="a9026-332">**So heben Sie die Registrierung des SQLDIAG-Diensts auf**</span><span class="sxs-lookup"><span data-stu-id="a9026-332">**To unregister the SQLDIAG service**</span></span>  
  
 <span data-ttu-id="a9026-333">Zum Aufheben der Dienstregistrierung geben Sie das Argument **/U** an.</span><span class="sxs-lookup"><span data-stu-id="a9026-333">To unregister the service, specify the **/U** argument.</span></span> <span data-ttu-id="a9026-334">Wird die Registrierung von **SQLDiag** als Dienst aufgehoben, wird hierdurch auch der Windows-Registrierungsschlüssel für den SQLDIAG-Dienst gelöscht.</span><span class="sxs-lookup"><span data-stu-id="a9026-334">Unregistering **SQLdiag** as a service also deletes the Windows registry keys of the service.</span></span>  
  
 <span data-ttu-id="a9026-335">**So starten Sie den SQLDIAG-Dienst bzw. führen einen Neustart des Diensts durch**</span><span class="sxs-lookup"><span data-stu-id="a9026-335">**To start or restart the SQLDIAG service**</span></span>  
  
 <span data-ttu-id="a9026-336">Führen Sie zum Starten oder Neustarten des SQLDIAG-Diensts **SQLDiag START** an der Befehlszeile aus.</span><span class="sxs-lookup"><span data-stu-id="a9026-336">To start or restart the SQLDIAG service, run **SQLDiag START** from the command line.</span></span>  
  
 <span data-ttu-id="a9026-337">Falls Sie mithilfe des **/A** -Arguments mehrere Instanzen von **SQLDiag** ausführen, können Sie beim Starten des Diensts auch den Instanznamen von **SQLDiag** an der Befehlszeile übergeben.</span><span class="sxs-lookup"><span data-stu-id="a9026-337">If you are running multiple instances of **SQLdiag** by using the **/A** argument, you can also pass the **SQLdiag** instance name on the command line when you start the service.</span></span> <span data-ttu-id="a9026-338">Verwenden Sie die folgende Syntax, um z.B. eine Instanz von **SQLDiag** mit dem Namen „Instance1“ zu starten:</span><span class="sxs-lookup"><span data-stu-id="a9026-338">For example, to start a **SQLdiag** instance named Instance1, use the following syntax:</span></span>  
  
```  
SQLDIAG START /A Instance1  
```  
  
 <span data-ttu-id="a9026-339">Sie können auch den Befehl **net start** verwenden, um den SQLDIAG-Dienst zu starten.</span><span class="sxs-lookup"><span data-stu-id="a9026-339">You can also use the **net start** command to start the SQLDIAG service.</span></span>  
  
 <span data-ttu-id="a9026-340">Wenn Sie **SQLDiag**neu starten, wird der Inhalt des aktuellen Ausgabeordners überschrieben.</span><span class="sxs-lookup"><span data-stu-id="a9026-340">When you restart **SQLdiag**, it overwrites the contents in the current output folder.</span></span> <span data-ttu-id="a9026-341">Soll dies verhindert werden, geben Sie **/N 2** in der Befehlszeile an, damit der Ausgabeordner beim Starten des Hilfsprogramms umbenannt wird.</span><span class="sxs-lookup"><span data-stu-id="a9026-341">To avoid this, specify **/N 2** on the command line to rename the output folder when the utility starts.</span></span>  
  
 <span data-ttu-id="a9026-342">Das Anhalten des **SQLDiag** -Diensts wird nicht unterstützt.</span><span class="sxs-lookup"><span data-stu-id="a9026-342">Pausing the **SQLdiag** service is not supported.</span></span>  
  
## <a name="running-multiple-instances-of-sqldiag"></a><span data-ttu-id="a9026-343">Ausführen mehrerer Instanzen von SQLdiag</span><span class="sxs-lookup"><span data-stu-id="a9026-343">Running Multiple Instances of SQLdiag</span></span>  
 <span data-ttu-id="a9026-344">Führen Sie mehrere Instanzen von **SQLdiag** auf demselben Computer aus, indem Sie **/A**_SQLdiag_application_name_ in der Befehlszeile angeben.</span><span class="sxs-lookup"><span data-stu-id="a9026-344">Run multiple instances of **SQLdiag** on the same computer by specifying **/A**_SQLdiag_application_name_ on the command line.</span></span> <span data-ttu-id="a9026-345">Dies ist sinnvoll, wenn von derselben Instanz von [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] verschiedene Sätze von Diagnosedaten gleichzeitig gesammelt werden sollen.</span><span class="sxs-lookup"><span data-stu-id="a9026-345">This is useful for collecting different sets of diagnostics simultaneously from the same [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] instance.</span></span> <span data-ttu-id="a9026-346">Sie können beispielsweise eine benannte Instanz von **SQLDiag** konfigurieren, um fortlaufend eine geringe Menge von Daten zu sammeln.</span><span class="sxs-lookup"><span data-stu-id="a9026-346">For example, you can configure a named instance of **SQLdiag** to continuously perform lightweight data collection.</span></span> <span data-ttu-id="a9026-347">Falls anschließend ein bestimmtes Problem in [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)]auftritt, können Sie die Standardinstanz von **SQLDiag** ausführen, um Diagnosedaten für dieses Problem zu sammeln, oder um auf Anforderung vom [!INCLUDE[msCoName](../includes/msconame-md.md)] -Kundenservice und -support hin einen Satz von Diagnosedaten zu sammeln, die für die Diagnose eines Problems erforderlich sind.</span><span class="sxs-lookup"><span data-stu-id="a9026-347">Then, if a specific problem occurs on [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)], you can run the default **SQLdiag** instance to collect diagnostics for that problem, or to gather a set of diagnostics that [!INCLUDE[msCoName](../includes/msconame-md.md)] Customer Support Services has asked you to gather to diagnose a problem.</span></span>  
  
## <a name="collecting-diagnostic-data-from-clustered-sql-server-instances"></a><span data-ttu-id="a9026-348">Sammeln von Diagnosedaten von gruppierten SQL Server-Instanzen</span><span class="sxs-lookup"><span data-stu-id="a9026-348">Collecting Diagnostic Data from Clustered SQL Server Instances</span></span>  
 <span data-ttu-id="a9026-349">**SQLDiag** unterstützt das Sammeln von Diagnosedaten von gruppierten Instanzen von [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="a9026-349">**SQLdiag** supports collecting diagnostic data from clustered [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] instances.</span></span> <span data-ttu-id="a9026-350">Zum Sammeln von Diagnosedaten von gruppierten Instanzen von [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] müssen Sie sicherstellen, dass **"."** für das **name**-Attribut des **\<Machine>** -Elements in der Konfigurationsdatei „SQLDiag.Xml“ angegeben ist. Das Argument **/G** darf in der Befehlszeile nicht angegeben werden.</span><span class="sxs-lookup"><span data-stu-id="a9026-350">To gather diagnostics from clustered [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] instances, make sure that **"."** is specified for the **name** attribute of the **\<Machine>** element in the configuration file SQLDiag.Xml and do not specify the **/G** argument on the command line.</span></span> <span data-ttu-id="a9026-351">Standardmäßig ist **"."** für das **name** -Attribut in der Konfigurationsdatei angegeben und das Argument **/G** deaktiviert.</span><span class="sxs-lookup"><span data-stu-id="a9026-351">By default, **"."** is specified for the **name** attribute in the configuration file and the **/G** argument is turned off.</span></span> <span data-ttu-id="a9026-352">Normalerweise ist es nicht nötig, die Konfigurationsdatei zu bearbeiten oder die Befehlszeilenargumente zu ändern, wenn Sie Diagnosedaten von einer gruppierten Instanz von [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] sammeln möchten.</span><span class="sxs-lookup"><span data-stu-id="a9026-352">Typically, you do not need to edit the configuration file or change the command line arguments when collecting from a clustered [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] instance.</span></span>  
  
 <span data-ttu-id="a9026-353">Wenn **"."** als Computername angegeben ist, erkennt **SQLDiag** , dass es in einem Cluster ausgeführt wird, und ruft daher gleichzeitig Diagnoseinformationen von allen virtuellen Instanzen von [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] im Cluster ab.</span><span class="sxs-lookup"><span data-stu-id="a9026-353">When **"."** is specified as the machine name, **SQLdiag** detects that it is running on a cluster, and simultaneously retrieves diagnostic information from all virtual instances of [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] that are installed on the cluster.</span></span> <span data-ttu-id="a9026-354">Wenn die Diagnosedaten nur für eine der virtuellen Instanzen von [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] gesammelt werden sollen, die auf einem Computer ausgeführt werden, müssen Sie den Namen dieser virtuellen Instanz von [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] für das **name**-Attribut des **\<Machine>** -Elements in „SQLDiag.Xml“ angeben.</span><span class="sxs-lookup"><span data-stu-id="a9026-354">If you want to collect diagnostic information from only one virtual instance of [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] that is running on a computer, specify that virtual [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] for the **name** attribute of the **\<Machine>** element in SQLDiag.Xml.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="a9026-355">Zum Sammeln von [!INCLUDE[ssSqlProfiler](../includes/sssqlprofiler-md.md)] -Ablaufverfolgungsinformationen aus gruppierten Instanzen von [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] müssen auf dem Cluster administrative Freigaben (ADMIN$) aktiviert sein.</span><span class="sxs-lookup"><span data-stu-id="a9026-355">To collect [!INCLUDE[ssSqlProfiler](../includes/sssqlprofiler-md.md)] trace information from clustered [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] instances, administrative shares (ADMIN$) must be enabled on the cluster.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="a9026-356">Weitere Informationen</span><span class="sxs-lookup"><span data-stu-id="a9026-356">See Also</span></span>  
 [<span data-ttu-id="a9026-357">Referenz zum Eingabeaufforderungs-Hilfsprogramm &#40;Datenbank-Engine&#41;</span><span class="sxs-lookup"><span data-stu-id="a9026-357">Command Prompt Utility Reference &#40;Database Engine&#41;</span></span>](command-prompt-utility-reference-database-engine.md)  
  
  
