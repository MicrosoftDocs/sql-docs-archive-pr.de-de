---
title: Erstellen von Vorhersagen für ein Sequence Clustering-Modell (Data Mining-Lernprogramm für Fortgeschrittene) | Microsoft-Dokumentation
ms.custom: ''
ms.date: 03/08/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: analysis-services
ms.topic: conceptual
ms.assetid: 94a8d4f9-a76a-49c5-9785-917010359511
author: minewiskan
ms.author: owend
manager: kfilee
ms.openlocfilehash: 2402c28a564502df9ce12c5e3f97b9d19590cfea
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 08/04/2020
ms.locfileid: "87607469"
---
# <a name="creating-predictions-on-a-sequence-clustering-model-intermediate-data-mining-tutorial"></a><span data-ttu-id="82189-102">Erstellen von Vorhersagen für ein Sequenzclustermodell (Data Mining-Lernprogramm für Fortgeschrittene)</span><span class="sxs-lookup"><span data-stu-id="82189-102">Creating Predictions on a Sequence Clustering Model (Intermediate Data Mining Tutorial)</span></span>
  <span data-ttu-id="82189-103">Nachdem Sie das Sequence Clustering-Modell besser verstanden haben, indem Sie es im Viewer durchsuchen, können Sie Vorhersage Abfragen erstellen, indem Sie Vorhersage Abfrage-Generator auf der Registerkarte **Mining Modellvorhersage** im Data Mining-Designer verwenden.</span><span class="sxs-lookup"><span data-stu-id="82189-103">After you understand the sequence clustering model better by browsing it in the viewer, you can create prediction queries by using Prediction Query Builder on the **Mining Model Prediction** tab in Data Mining Designer.</span></span> <span data-ttu-id="82189-104">Um eine Vorhersage zu erstellen, wählen Sie zuerst das Sequenzclustermodell und dann die Eingabedaten aus.</span><span class="sxs-lookup"><span data-stu-id="82189-104">To create a prediction, you first select the sequence clustering model, and then select the input data.</span></span> <span data-ttu-id="82189-105">Sie können eine externe Datenquelle als Eingabe verwenden, oder Sie können eine SINGLETON-Abfrage erstellen und Werte in einem Dialogfeld angeben.</span><span class="sxs-lookup"><span data-stu-id="82189-105">For inputs, you can use either an external data source, or you can build a singleton query and provide values in a dialog box.</span></span>  
  
 <span data-ttu-id="82189-106">In dieser Lektion wird davon ausgegangen, dass Sie bereits mit der Verwendung des Generators für Vorhersageabfragen vertraut sind und lernen möchten, wie spezifische Abfragen für ein Sequenzclustermodell erstellt werden.</span><span class="sxs-lookup"><span data-stu-id="82189-106">This lesson assumes that you are already familiar with how to use the prediction query builder and want to learn how to build queries that are specific to a sequence clustering model.</span></span> <span data-ttu-id="82189-107">Allgemeine Informationen zur Verwendung von Vorhersage Abfrage-Generator finden Sie unter [Data Mining-Abfrageschnittstellen](../../2014/analysis-services/data-mining/data-mining-query-tools.md) oder im Abschnitt des Lernprogramms zu Data Mining-Grundlagen, [Erstellen von Vorhersagen &#40;Lernprogramm zu Data Mining-Grundlagen&#41;](../../2014/tutorials/creating-predictions-basic-data-mining-tutorial.md).</span><span class="sxs-lookup"><span data-stu-id="82189-107">For general information about how to use Prediction Query Builder, see [Data Mining Query Interfaces](../../2014/analysis-services/data-mining/data-mining-query-tools.md) or the section of the Basic Data Mining tutorial, [Creating Predictions &#40;Basic Data Mining Tutorial&#41;](../../2014/tutorials/creating-predictions-basic-data-mining-tutorial.md).</span></span>  
  
## <a name="creating-predictions-on-the-regional-model"></a><span data-ttu-id="82189-108">Erstellen von Vorhersagen für das regionale Modell</span><span class="sxs-lookup"><span data-stu-id="82189-108">Creating Predictions on the Regional Model</span></span>  
 <span data-ttu-id="82189-109">In diesem Szenario erstellen Sie zunächst einige SINGLETON-Vorhersageabfragen, um eine Vorstellung von den regionalen Unterschieden bei Vorhersageabfragen zu erhalten.</span><span class="sxs-lookup"><span data-stu-id="82189-109">For this scenario, you will first create some singleton prediction queries, to get an idea of how predictions might be different by region.</span></span>  
  
#### <a name="to-create-a-singleton-query-on-a-sequence-clustering-model"></a><span data-ttu-id="82189-110">So erstellen Sie eine SINGLETON-Abfrage für ein Sequenzclustermodell</span><span class="sxs-lookup"><span data-stu-id="82189-110">To create a singleton query on a sequence clustering model</span></span>  
  
1.  <span data-ttu-id="82189-111">Klicken Sie im Data Mining-Designer auf die Registerkarte **Mining Modellvorhersage** .</span><span class="sxs-lookup"><span data-stu-id="82189-111">Click the **Mining Model Prediction** tab of Data Mining Designer.</span></span>  
  
2.  <span data-ttu-id="82189-112">Wählen Sie im Menü **Mining Modell** Spalte die Option **Singleton-Abfrage**aus.</span><span class="sxs-lookup"><span data-stu-id="82189-112">In the **Mining Model** column menu, select **Singleton Query**.</span></span>  
  
     <span data-ttu-id="82189-113">Der Bereich **Mining Modell** und der **Eingabebereich SINGLETON-Abfrage** werden angezeigt.</span><span class="sxs-lookup"><span data-stu-id="82189-113">The **Mining Model** pane and **Singleton Query Input** pane appear.</span></span>  
  
3.  <span data-ttu-id="82189-114">Klicken Sie im Bereich **Mining Modell** auf **Modell auswählen**.</span><span class="sxs-lookup"><span data-stu-id="82189-114">In the **Mining Model** pane, click **Select Model**.</span></span> <span data-ttu-id="82189-115">(Sie können diesen Schritt überspringen, wenn der Sequenzclustermodus bereits ausgewählt wurde.)</span><span class="sxs-lookup"><span data-stu-id="82189-115">(You can skip this step if the sequence clustering mode is already selected.)</span></span>  
  
     <span data-ttu-id="82189-116">Das Dialogfeld **Mining Modell auswählen** wird geöffnet.</span><span class="sxs-lookup"><span data-stu-id="82189-116">The **Select Mining Model** dialog box opens.</span></span>  
  
4.  <span data-ttu-id="82189-117">Erweitern Sie den Knoten, der die Mining Struktur **Sequence Clustering with Region**darstellt, und wählen Sie das Modell **Sequence Clustering with Region**aus.</span><span class="sxs-lookup"><span data-stu-id="82189-117">Expand the node that represents the mining structure **Sequence Clustering with Region**, and select the model **Sequence Clustering with Region**.</span></span> <span data-ttu-id="82189-118">Klicken Sie auf **OK**.</span><span class="sxs-lookup"><span data-stu-id="82189-118">Click **OK**.</span></span> <span data-ttu-id="82189-119">Der Eingabebereich spielt im Moment noch keine Rolle; die Eingaben werden nach Einrichten der Vorhersagefunktionen vorgenommen.</span><span class="sxs-lookup"><span data-stu-id="82189-119">For now, ignore the input pane; you will specify the inputs after you have set up the prediction functions.</span></span>  
  
5.  <span data-ttu-id="82189-120">Klicken Sie im Raster unter **Quelle** auf die leere Zelle, und wählen Sie **Vorhersagefunktion aus.**</span><span class="sxs-lookup"><span data-stu-id="82189-120">In the grid, click the empty cell under **Source** and select **Prediction Function.**</span></span> <span data-ttu-id="82189-121">Wählen Sie in der Zelle unter **Feld**die Option **prätsequenzsequenz**aus.</span><span class="sxs-lookup"><span data-stu-id="82189-121">In the cell under **Field**, select **PredictSequence**.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="82189-122">Sie können auch die **Vorhersage** Funktion verwenden.</span><span class="sxs-lookup"><span data-stu-id="82189-122">You can also use the **Predict** function.</span></span> <span data-ttu-id="82189-123">Wenn Sie dies tun, achten Sie darauf, dass Sie die Version der **Vorhersage** Funktion auswählen, die eine Tabellenspalte als Argument annimmt.</span><span class="sxs-lookup"><span data-stu-id="82189-123">If you do, be sure to choose the version of the **Predict** function that takes a table column as argument..</span></span>  
  
6.  <span data-ttu-id="82189-124">Wählen Sie im Bereich **Mining Modell** die Tabelle `v Assoc Seq Line Items` aus, und ziehen Sie Sie in das Raster, um das Feld **Kriterium/Argument** für die Funktion " **vorhersagesequence** " zu markieren.</span><span class="sxs-lookup"><span data-stu-id="82189-124">In the **Mining Model** pane, select the nested table `v Assoc Seq Line Items`, and drag it into the grid, to the **Criteria/Argument** box for the **PredictSequence** function.</span></span>  
  
     <span data-ttu-id="82189-125">Durchziehen und Ablegen von Tabellen-und Spaltennamen können Sie komplexe Anweisungen ohne Syntax Fehler erstellen.</span><span class="sxs-lookup"><span data-stu-id="82189-125">Dragging and dropping table and column names enables you to build complex statements without syntax errors.</span></span> <span data-ttu-id="82189-126">Allerdings ersetzt Sie den aktuellen Inhalt der Zelle, die andere optionale Argumente für die **prätsequence** -Funktion enthält.</span><span class="sxs-lookup"><span data-stu-id="82189-126">However, it replaces the current contents of the cell, which include other optional arguments for the **PredictSequence** function.</span></span> <span data-ttu-id="82189-127">Wenn Sie die anderen Argumente anzeigen möchten, können Sie dem Raster vorübergehend eine zweite Instanz der Funktion als Referenz hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="82189-127">To view the other arguments, you can temporarily add a second instance of the function to the grid for reference.</span></span>  
  
7.  <span data-ttu-id="82189-128">Klicken Sie in der oberen Ecke der Vorhersage Abfrage-Generator auf die Schaltfläche **Ergebnis** .</span><span class="sxs-lookup"><span data-stu-id="82189-128">Click the **Result** button in the upper corner of the Prediction Query Builder.</span></span>  
  
 <span data-ttu-id="82189-129">Die erwarteten Ergebnisse enthalten eine einzelne Spalte mit dem Überschriften **Ausdruck**.</span><span class="sxs-lookup"><span data-stu-id="82189-129">The expected results contain a single column with the heading **Expression**.</span></span> <span data-ttu-id="82189-130">Die Spalte **Ausdruck** enthält eine Tabelle mit drei Spalten wie folgt:</span><span class="sxs-lookup"><span data-stu-id="82189-130">The **Expression** column contains a nested table with three columns as follows:</span></span>  
  
|<span data-ttu-id="82189-131">$SEQUENCE</span><span class="sxs-lookup"><span data-stu-id="82189-131">$SEQUENCE</span></span>|<span data-ttu-id="82189-132">Zeilennummer</span><span class="sxs-lookup"><span data-stu-id="82189-132">Line Number</span></span>|<span data-ttu-id="82189-133">Modell</span><span class="sxs-lookup"><span data-stu-id="82189-133">Model</span></span>|  
|---------------|-----------------|-----------|  
|<span data-ttu-id="82189-134">1</span><span class="sxs-lookup"><span data-stu-id="82189-134">1</span></span>||<span data-ttu-id="82189-135">Mountain-200</span><span class="sxs-lookup"><span data-stu-id="82189-135">Mountain-200</span></span>|  
  
 <span data-ttu-id="82189-136">Was bedeuten diese Ergebnisse?</span><span class="sxs-lookup"><span data-stu-id="82189-136">What do these results mean?</span></span> <span data-ttu-id="82189-137">Denken Sie daran, dass Sie keine Eingaben angegeben haben.</span><span class="sxs-lookup"><span data-stu-id="82189-137">Remember that you did not specify any inputs.</span></span> <span data-ttu-id="82189-138">Die Vorhersage erfolgt daher auf Basis aller Fälle, und die wahrscheinlichste Gesamtvorhersage wird von Analysis Services zurückgegeben.</span><span class="sxs-lookup"><span data-stu-id="82189-138">Therefore, the prediction is made against the entire population of cases, and Analysis Services returns the most likely prediction overall.</span></span>  
  
### <a name="adding-inputs-to-a-singleton-prediction-query"></a><span data-ttu-id="82189-139">Hinzufügen von Eingaben zu einer Singleton-Vorhersageabfrage</span><span class="sxs-lookup"><span data-stu-id="82189-139">Adding Inputs to a Singleton Prediction Query</span></span>  
 <span data-ttu-id="82189-140">Bislang haben Sie noch keine Eingaben angegeben.</span><span class="sxs-lookup"><span data-stu-id="82189-140">Until now, you have not specified any inputs.</span></span> <span data-ttu-id="82189-141">In der nächsten Aufgabe verwenden Sie den Bereich **Singleton-Abfrage Eingabe** , um einige Eingaben für die Abfrage anzugeben.</span><span class="sxs-lookup"><span data-stu-id="82189-141">In the next task, you will use the **Singleton Query Input** pane to specify some inputs to the query.</span></span> <span data-ttu-id="82189-142">Zunächst verwenden Sie [Region] als Eingabe für das Clustermodell für regionale Sequenzen, um zu überprüfen, ob die vorhergesagten Sequenzen für alle Regionen gleich sind.</span><span class="sxs-lookup"><span data-stu-id="82189-142">First, you will use [Region] as an input to the regional sequence clustering model, to determine whether the predicted sequences are the same for all regions.</span></span> <span data-ttu-id="82189-143">Anschließend erfahren Sie, wie Sie die Abfrage bearbeiten und die Wahrscheinlichkeit für die einzelnen Vorhersagen hinzufügen können; außerdem vereinfachen Sie die Ergebnisse, um diese übersichtlicher zu gestalten.</span><span class="sxs-lookup"><span data-stu-id="82189-143">You will then learn how to modify the query to add the probability for each prediction, and flatten the results to make them easier to view.</span></span>  
  
##### <a name="to-generate-predictions-for-a-specific-customer-group"></a><span data-ttu-id="82189-144">So generieren Sie Vorhersagen für eine bestimmte Kundengruppe</span><span class="sxs-lookup"><span data-stu-id="82189-144">To generate predictions for a specific customer group</span></span>  
  
1.  <span data-ttu-id="82189-145">Klicken Sie in der linken oberen Ecke der Vorhersage Abfrage-Generator auf die Schaltfläche **Entwurf** , um zum Raster für die Abfrage Erstellung zurückzukehren.</span><span class="sxs-lookup"><span data-stu-id="82189-145">Click the **Design** button in the upper left-hand corner of the Prediction Query Builder to switch back to the query building grid.</span></span>  
  
2.  <span data-ttu-id="82189-146">Klicken Sie im Dialogfeld **Singleton-Abfrage Eingabe** auf das Feld **Wert** für `Region` , und wählen Sie **Europa**aus.</span><span class="sxs-lookup"><span data-stu-id="82189-146">In the **Singleton Query Input** dialog box, click the **Value** box for `Region`, and select **Europe**.</span></span>  
  
3.  <span data-ttu-id="82189-147">Klicken Sie auf die Schaltfläche **Ergebnis** , um Vorhersagen für Kunden in Europa anzuzeigen.</span><span class="sxs-lookup"><span data-stu-id="82189-147">Click the **Result** button to view predictions for customers in Europe.</span></span>  
  
4.  <span data-ttu-id="82189-148">Klicken Sie in der linken oberen Ecke der Vorhersage Abfrage-Generator auf die Schaltfläche **Entwurf** , um zum Raster für die Abfrage Erstellung zurückzukehren.</span><span class="sxs-lookup"><span data-stu-id="82189-148">Click the **Design** button in the upper left-hand corner of the Prediction Query Builder to switch back to the query building grid.</span></span>  
  
5.  <span data-ttu-id="82189-149">Klicken Sie im Dialogfeld **Singleton-Abfrage Eingabe** auf das Feld **Wert** für `Region` , und wählen Sie **Nordamerika**aus.</span><span class="sxs-lookup"><span data-stu-id="82189-149">In the **Singleton Query Input** dialog box, click the **Value** box for `Region`, and select **North America**.</span></span>  
  
6.  <span data-ttu-id="82189-150">Klicken Sie auf die Schaltfläche **Ergebnis** , um Vorhersagen für Kunden in Nordamerika anzuzeigen.</span><span class="sxs-lookup"><span data-stu-id="82189-150">Click the **Result** button to view predictions for customers in North America.</span></span>  
  
### <a name="adding-probabilities-by-using-a-custom-expression"></a><span data-ttu-id="82189-151">Hinzufügen von Wahrscheinlichkeiten mit einem benutzerdefinierten Ausdruck</span><span class="sxs-lookup"><span data-stu-id="82189-151">Adding Probabilities by Using a Custom Expression</span></span>  
 <span data-ttu-id="82189-152">Das Ausgeben der Wahrscheinlichkeit für die einzelnen Vorhersagen gestaltet sich etwas schwieriger, da die Wahrscheinlichkeit ein Attribut der Vorhersage darstellt und als geschachtelte Tabelle ausgegeben wird.</span><span class="sxs-lookup"><span data-stu-id="82189-152">To output the probability for each prediction is slightly more complicated, because the probability is an attribute of the prediction and is output as a nested table.</span></span> <span data-ttu-id="82189-153">Wenn Sie bereits mit Data Mining-Erweiterungen (DMX) vertraut sind, können Sie einfach die Abfrage ändern und der geschachtelten Tabelle eine untergeordnete SELECT-Anweisung hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="82189-153">If you are familiar with Data Mining Extensions (DMX), you can easily alter the query to add a sub-select statement on the nested table.</span></span> <span data-ttu-id="82189-154">Sie können jedoch auch eine untergeordnete SELECT-Anweisung im Generator für Vorhersageabfragen erstellen, indem Sie einen benutzerdefinierten Ausdruck hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="82189-154">However, you can also create a sub-select statement in the Prediction Query Builder by adding a custom expression.</span></span>  
  
##### <a name="to-output-probabilities-for-a-predicted-sequence-by-using-a-custom-expression"></a><span data-ttu-id="82189-155">So geben Sie Wahrscheinlichkeiten für eine vorhergesagte Sequenz mit einem benutzerdefinierten Ausdruck aus</span><span class="sxs-lookup"><span data-stu-id="82189-155">To output probabilities for a predicted sequence by using a custom expression</span></span>  
  
1.  <span data-ttu-id="82189-156">Klicken Sie in der linken oberen Ecke der Vorhersage Abfrage-Generator auf die Schaltfläche **Entwurf** , um zum Raster für die Abfrage Erstellung zurückzukehren.</span><span class="sxs-lookup"><span data-stu-id="82189-156">Click the **Design** button in the upper left-hand corner of the Prediction Query Builder to switch back to the query building grid.</span></span>  
  
2.  <span data-ttu-id="82189-157">Klicken Sie im Raster unter **Quelle**auf eine neue Zeile, und wählen Sie **Benutzerdefinierter Ausdruck**aus.</span><span class="sxs-lookup"><span data-stu-id="82189-157">In the grid, under **Source**, click a new row, and select **Custom Expression**.</span></span>  
  
3.  <span data-ttu-id="82189-158">Lassen Sie das **Feld** leer.</span><span class="sxs-lookup"><span data-stu-id="82189-158">Leave the box under **Field** blank.</span></span>  
  
4.  <span data-ttu-id="82189-159">Geben Sie als **Alias**ein `t` .</span><span class="sxs-lookup"><span data-stu-id="82189-159">For **Alias**, type `t`.</span></span>  
  
5.  <span data-ttu-id="82189-160">Geben Sie im Feld **Kriterium/Argument** die gesamte untergeordnete SELECT-Anweisung ein, wie im folgenden Codebeispiel gezeigt.</span><span class="sxs-lookup"><span data-stu-id="82189-160">In the **Criteria/Argument** box, type the complete sub-select statement as shown in the following code sample.</span></span> <span data-ttu-id="82189-161">Achten Sie darauf, auch die öffnende und die schließende Klammer einzugeben.</span><span class="sxs-lookup"><span data-stu-id="82189-161">Be sure to include the starting and ending parentheses.</span></span>  
  
    ```  
    (SELECT PredictProbability([Model]) FROM PredictSequence([Sequence Clustering with Region].[v Assoc Seq Line Items]))  
    ```  
  
6.  <span data-ttu-id="82189-162">Klicken Sie auf die Schaltfläche **Ergebnis** , um Vorhersagen für Kunden in Europa anzuzeigen.</span><span class="sxs-lookup"><span data-stu-id="82189-162">Click the **Result** button to view predictions for customers in Europe.</span></span>  
  
 <span data-ttu-id="82189-163">Das Ergebnis enthält zwei geschachtelte Tabellen: eine Tabelle mit der Vorhersage und eine Tabelle mit der Wahrscheinlichkeit für die Vorhersage.</span><span class="sxs-lookup"><span data-stu-id="82189-163">The results now contain two nested tables, one with the prediction, and one with the probability for the prediction.</span></span> <span data-ttu-id="82189-164">Wenn Sie die Abfrage nicht ausführen können, können Sie zur Abfrageentwurfsansicht wechseln und die vollständige Abfrageanweisung überprüfen. Diese sollte wie folgt lauten:</span><span class="sxs-lookup"><span data-stu-id="82189-164">If the query does not work, you can switch to query design view and review the complete query statement, which should be as follows:</span></span>  
  
```  
SELECT  
  PredictSequence([Sequence Clustering with Region].[v Assoc Seq Line Items]),  
  ( (SELECT PredictProbability([Model]) FROM PredictSequence([Sequence Clustering with Region].[v Assoc Seq Line Items]))) as [t]  
FROM  
  [Sequence Clustering with Region]  
NATURAL PREDICTION JOIN  
(SELECT 'Europe' AS [Region]) AS t  
```  
  
### <a name="working-with-results"></a><span data-ttu-id="82189-165">Arbeiten mit Ergebnissen</span><span class="sxs-lookup"><span data-stu-id="82189-165">Working with Results</span></span>  
 <span data-ttu-id="82189-166">Wenn Ihre Ergebnisse eine große Zahl von geschachtelten Tabellen enthalten, können Sie diese vereinfachen, um die Anzeige übersichtlicher zu gestalten.</span><span class="sxs-lookup"><span data-stu-id="82189-166">When there are many nested tables in the results, you might want to flatten the results for easier viewing.</span></span> <span data-ttu-id="82189-167">Dazu können Sie die Abfrage manuell ändern und das `FLATTENED`-Schlüsselwort hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="82189-167">To do this, you can manually modify the query and add the `FLATTENED` keyword.</span></span>  
  
##### <a name="to-flatten-nested-rowsets-in-a-prediction-query"></a><span data-ttu-id="82189-168">So vereinfachen Sie geschachtelte Rowsets in einer Vorhersageabfrage</span><span class="sxs-lookup"><span data-stu-id="82189-168">To flatten nested rowsets in a prediction query</span></span>  
  
1.  <span data-ttu-id="82189-169">Klicken Sie in der Ecke der Vorhersage Abfrage-Generator auf die Schaltfläche **Abfrage** .</span><span class="sxs-lookup"><span data-stu-id="82189-169">Click the **Query** button in the corner of the Prediction Query Builder.</span></span>  
  
     <span data-ttu-id="82189-170">Das Raster ändert sich in einen offenen Bereich, in dem Sie die DMX-Anweisung anzeigen und ändern können, die Sie mit dem Generator für Vorhersageabfragen erstellt haben.</span><span class="sxs-lookup"><span data-stu-id="82189-170">The grid changes to an open pane where you can view and modify the DMX statement that was created by the Prediction Query Builder.</span></span>  
  
2.  <span data-ttu-id="82189-171">Geben Sie nach dem `SELECT`-Schlüsselwort `FLATTENED` ein.</span><span class="sxs-lookup"><span data-stu-id="82189-171">After the `SELECT` keyword, type `FLATTENED`.</span></span>  
  
     <span data-ttu-id="82189-172">Der vollständige Abfragetext sollte wie folgt aussehen:</span><span class="sxs-lookup"><span data-stu-id="82189-172">The complete text of the query should be similar to the following:</span></span>  
  
    ```  
    SELECT FLATTENED  
      PredictSequence([Sequence Clustering with Region].[v Assoc Seq Line Items]),  
      ( (SELECT PredictProbability([Model]) FROM PredictSequence([Sequence Clustering with Region].[v Assoc Seq Line Items]))) as [t]  
    FROM  
      [Sequence Clustering with Region]  
    NATURAL PREDICTION JOIN  
    (SELECT 'Europe' AS [Region]) AS t  
    ```  
  
3.  <span data-ttu-id="82189-173">Klicken Sie in der oberen Ecke der Vorhersage Abfrage-Generator auf die Schaltfläche **Ergebnisse** .</span><span class="sxs-lookup"><span data-stu-id="82189-173">Click the **Results** button in the upper corner of the Prediction Query Builder.</span></span>  
  
 <span data-ttu-id="82189-174">Nachdem Sie eine Abfrage manuell bearbeitet haben, können Sie nicht wieder zu Designansicht wechseln, ohne die Änderungen zu verlieren.</span><span class="sxs-lookup"><span data-stu-id="82189-174">After you have manually edited a query, you will not be able to switch back to Design view without losing the changes.</span></span> <span data-ttu-id="82189-175">Sie können jedoch die DMX-Anweisung, die Sie manuell erstellt haben, als Textdatei speichern und anschließend zur Entwurfsansicht zurückkehren.</span><span class="sxs-lookup"><span data-stu-id="82189-175">You can, however, save the DMX statement that you created manually to a text file, and then change back to Design view.</span></span> <span data-ttu-id="82189-176">In diesem Fall wird die Abfrage auf die letzte gültige Version in der Entwurfsansicht zurückgesetzt.</span><span class="sxs-lookup"><span data-stu-id="82189-176">When you do so, the query is reverted to the last version that was valid in Design view.</span></span>  
  
## <a name="creating-predictions-on-the-related-model"></a><span data-ttu-id="82189-177">Erstellen von Vorhersagen für das verwandte Modell</span><span class="sxs-lookup"><span data-stu-id="82189-177">Creating Predictions on the Related Model</span></span>  
 <span data-ttu-id="82189-178">In den vorangegangenen Beispielen wurde die Tabellenspalte für den Fall Region als Eingabe für eine SINGLETON-Vorhersageabfrage verwendet, um zu überprüfen, ob im Modell regionale Unterschiede festzustellen sind.</span><span class="sxs-lookup"><span data-stu-id="82189-178">The previous examples used a case table column, Region, as the input to the singleton prediction query, because you were interested in knowing whether the model had found any differences between regions.</span></span> <span data-ttu-id="82189-179">Nach der Untersuchung des Modells sind Sie jedoch zu dem Schluss gekommen, dass die Unterschiede nicht groß genug sind, um eine Anpassung von Produktempfehlungen nach Region zu rechtfertigen.</span><span class="sxs-lookup"><span data-stu-id="82189-179">However, after exploring the model, you decided that the differences are not strong enough to justify customizing product recommendations by region.</span></span> <span data-ttu-id="82189-180">Vielmehr interessieren Sie sich für Vorhersagen über die Elemente, die ein Kunde voraussichtlich wählen wird.</span><span class="sxs-lookup"><span data-stu-id="82189-180">What you are really interested in predicting is the items that customers select.</span></span> <span data-ttu-id="82189-181">In den folgenden Abfragen verwenden Sie daher das Sequenzclustermodell ohne Region, um Empfehlungen für alle Kunden zu generieren.</span><span class="sxs-lookup"><span data-stu-id="82189-181">Therefore, in the queries that follow, you will use the sequence clustering model that does not include Region, to generate recommendations for all customers.</span></span>  
  
### <a name="using-nested-table-columns-as-input"></a><span data-ttu-id="82189-182">Verwenden von geschachtelten Tabellenspalten als Eingabe</span><span class="sxs-lookup"><span data-stu-id="82189-182">Using Nested Table Columns as Input</span></span>  
 <span data-ttu-id="82189-183">Zunächst erstellen Sie eine SINGLETON-Vorhersageabfrage, die ein Element als Eingabe akzeptiert und das Element mit der nächsthöheren Wahrscheinlichkeit zurückgibt.</span><span class="sxs-lookup"><span data-stu-id="82189-183">First you will create a singleton prediction query that takes a single item as input and returns the next most likely item.</span></span> <span data-ttu-id="82189-184">Voraussetzung für eine solche Vorhersage ist die Verwendung einer geschachtelten Tabellenspalte als Eingabewert.</span><span class="sxs-lookup"><span data-stu-id="82189-184">To get a prediction of this kind, you have to use a nested table column as the input value.</span></span> <span data-ttu-id="82189-185">Dies liegt daran, dass das Attribut für die Vorhersage (Modell) Teil einer geschachtelten Tabelle ist.</span><span class="sxs-lookup"><span data-stu-id="82189-185">This is because the attribute that you are predicting, Model, is part of a nested table.</span></span> <span data-ttu-id="82189-186">Analysis Services stellt das Eingabe Dialogfeld der **eingefügten Tabelle** bereit, mit dem Sie mithilfe der Vorhersage Abfrage-Generator problemlos Vorhersage Abfragen für Tabellen Attribute erstellen können.</span><span class="sxs-lookup"><span data-stu-id="82189-186">Analysis Services provides the **Nested Table Input** dialog box to help you easily create prediction queries on nested table attributes, by using the Prediction Query Builder.</span></span>  
  
##### <a name="to-use-a-nested-table-as-input-to-a-prediction"></a><span data-ttu-id="82189-187">So verwenden Sie eine geschachtelte Tabelle als Eingabe für eine Vorhersage</span><span class="sxs-lookup"><span data-stu-id="82189-187">To use a nested table as input to a prediction</span></span>  
  
1.  <span data-ttu-id="82189-188">Klicken Sie in der linken oberen Ecke der Vorhersage Abfrage-Generator auf die Schaltfläche **Entwurf** , um zum Raster für die Abfrage Erstellung zurückzukehren.</span><span class="sxs-lookup"><span data-stu-id="82189-188">Click the **Design** button in the upper left-hand corner of the Prediction Query Builder to switch back to the query building grid.</span></span>  
  
2.  <span data-ttu-id="82189-189">Klicken Sie im Dialogfeld **Singleton-Abfrage Eingabe** auf das Feld **Wert** für `Region` , und wählen Sie die leere Zeile aus, um die Eingabe für dieses Feld zu löschen.</span><span class="sxs-lookup"><span data-stu-id="82189-189">In the **Singleton Query Input** dialog box, click the **Value** box for `Region`, and select the empty row to clear the input for this field.</span></span>  
  
3.  <span data-ttu-id="82189-190">Klicken Sie im Dialogfeld **Singleton-Abfrage Eingabe** auf das Feld **Wert** für `vAssocSeqLineItems` , und klicken Sie dann auf die Schaltfläche (...).</span><span class="sxs-lookup"><span data-stu-id="82189-190">In the **Singleton Query Input** dialog box, click the **Value** box for `vAssocSeqLineItems`, and then click the (...) button.</span></span>  
  
4.  <span data-ttu-id="82189-191">Klicken Sie im Dialogfeld **Eingabe der eingefügten Tabelle** auf **Hinzufügen**.</span><span class="sxs-lookup"><span data-stu-id="82189-191">In the **Nested Table Input** dialog box, click **Add**.</span></span>  
  
5.  <span data-ttu-id="82189-192">Klicken Sie in der neuen Zeile auf das Feld unter `Model` , und wählen Sie Touring Tire in der Liste aus.</span><span class="sxs-lookup"><span data-stu-id="82189-192">In the new row, click the box under `Model`, and select Touring Tire from the list.</span></span> <span data-ttu-id="82189-193">Klicken Sie auf **OK**.</span><span class="sxs-lookup"><span data-stu-id="82189-193">Click **OK**.</span></span>  
  
6.  <span data-ttu-id="82189-194">Klicken Sie auf die Schaltfläche **Ergebnis** , um die Vorhersagen anzuzeigen.</span><span class="sxs-lookup"><span data-stu-id="82189-194">Click the **Result** button to view the predictions.</span></span>  
  
 <span data-ttu-id="82189-195">Im Modell werden die angegebenen Folgeelemente für alle Kunden empfohlen, die Touring Tire als erstes Element ausgewählt haben.</span><span class="sxs-lookup"><span data-stu-id="82189-195">The model recommends the following next items for all customers who choose the Touring Tire as the first item.</span></span> <span data-ttu-id="82189-196">Aus Ihrer Untersuchung des Modells wissen Sie, dass die Produkte Touring Tire und Touring Tire Tube von Kunden häufig zusammen gekauft werden. Die Empfehlungen entsprechen daher den Erwartungen.</span><span class="sxs-lookup"><span data-stu-id="82189-196">You already know from exploring the model that customers frequently purchase the products Touring Tire and Touring Tire Tube together, so these recommendations look good.</span></span>  
  
|<span data-ttu-id="82189-197">$SEQUENCE</span><span class="sxs-lookup"><span data-stu-id="82189-197">$SEQUENCE</span></span>|<span data-ttu-id="82189-198">Zeilennummer</span><span class="sxs-lookup"><span data-stu-id="82189-198">Line Number</span></span>|<span data-ttu-id="82189-199">Modell</span><span class="sxs-lookup"><span data-stu-id="82189-199">Model</span></span>|  
|---------------|-----------------|-----------|  
|<span data-ttu-id="82189-200">1</span><span class="sxs-lookup"><span data-stu-id="82189-200">1</span></span>||<span data-ttu-id="82189-201">Touring Tire Tube</span><span class="sxs-lookup"><span data-stu-id="82189-201">Touring Tire Tube</span></span>|  
|<span data-ttu-id="82189-202">2</span><span class="sxs-lookup"><span data-stu-id="82189-202">2</span></span>||<span data-ttu-id="82189-203">Sport-100</span><span class="sxs-lookup"><span data-stu-id="82189-203">Sport-100</span></span>|  
|<span data-ttu-id="82189-204">3</span><span class="sxs-lookup"><span data-stu-id="82189-204">3</span></span>||<span data-ttu-id="82189-205">Long-Sleeve Logo Jersey</span><span class="sxs-lookup"><span data-stu-id="82189-205">Long-Sleeve Logo Jersey</span></span>|  
  
### <a name="creating-a-bulk-prediction-query-using-nested-table-inputs"></a><span data-ttu-id="82189-206">Erstellen einer Abfrage für Massenvorhersagen mit Eingaben für geschachtelte Tabellen</span><span class="sxs-lookup"><span data-stu-id="82189-206">Creating a Bulk Prediction Query using Nested Table Inputs</span></span>  
 <span data-ttu-id="82189-207">Sie können nun mit dem Modell wie gewünscht Vorhersagen erstellen, die als Grundlage für Empfehlungen dienen können. Als Nächstes erstellen Sie eine Vorhersageabfrage, die einer externen Datenquelle zugeordnet ist.</span><span class="sxs-lookup"><span data-stu-id="82189-207">Now that you are satisfied that the model creates the kind of predictions that you can use in making recommendations, you will create a prediction query that is mapped to an external data source.</span></span> <span data-ttu-id="82189-208">Diese Datenquelle stellt Werte bereit, die aktuelle Produkte darstellen.</span><span class="sxs-lookup"><span data-stu-id="82189-208">That data source will provide values representing current products.</span></span> <span data-ttu-id="82189-209">Da Sie eine Vorhersageabfrage erstellen möchten, die die Customer ID sowie eine Liste der Produkte als Eingabe bereitstellt, fügen Sie die Kundentabelle als Falltabelle hinzu und die Tabelle mit den von Kunden getätigten Käufen als geschachtelte Tabelle.</span><span class="sxs-lookup"><span data-stu-id="82189-209">Because you are interested in creating a prediction query that provides Customer ID and a list of products as input, you will add the customer table as the case table, and the purchases table as the nested table.</span></span> <span data-ttu-id="82189-210">Anschließend fügen Sie wie zuvor Vorhersagefunktionen hinzu, um Empfehlungen zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="82189-210">Then you will add prediction functions as you did previously to create recommendations.</span></span>  
  
 <span data-ttu-id="82189-211">Dieses Verfahren wird auch in Lektion 3 zum Erstellen von Vorhersagen für das Market Basket-Szenario verwendet; bei Vorhersagen in einem Sequenzclustermodell ist allerdings auch die Reihenfolge als Eingabe erforderlich.</span><span class="sxs-lookup"><span data-stu-id="82189-211">This is the same procedure that you use to create predictions for the market basket scenario in Lesson 3; however, in a sequence clustering model predictions also need the order as input.</span></span>  
  
##### <a name="to-create-a-prediction-query-using-nested-table-inputs"></a><span data-ttu-id="82189-212">So erstellen Sie eine Vorhersageabfrage mit Eingaben für geschachtelte Tabellen</span><span class="sxs-lookup"><span data-stu-id="82189-212">To create a prediction query using nested table inputs</span></span>  
  
1.  <span data-ttu-id="82189-213">Wählen Sie im Bereich **Mining Modell** das Sequence Clustering-Modell aus, falls es nicht bereits ausgewählt ist.</span><span class="sxs-lookup"><span data-stu-id="82189-213">In the **Mining Model** pane, select the Sequence Clustering model, if it is not already selected.</span></span>  
  
2.  <span data-ttu-id="82189-214">Klicken Sie im Dialogfeld **Eingabe Tabelle (n) auswählen** auf **Fall Tabelle auswählen**.</span><span class="sxs-lookup"><span data-stu-id="82189-214">In the **Select Input Table(s)** dialog box, click **Select Case Table**.</span></span>  
  
3.  <span data-ttu-id="82189-215">Wählen Sie im Dialogfeld **Tabelle auswählen** für Datenquelle die Option Aufträge aus.</span><span class="sxs-lookup"><span data-stu-id="82189-215">In the **Select Table** dialog box, for Data Source, select Orders.</span></span> <span data-ttu-id="82189-216">Wählen Sie in der Liste **Tabellen-/Sichtname** den Eintrag vassocsqorders aus, und klicken Sie dann auf **OK**.</span><span class="sxs-lookup"><span data-stu-id="82189-216">In the **Table/View Name** list, select vAssocSeqOrders, and then click **OK**.</span></span>  
  
4.  <span data-ttu-id="82189-217">Klicken Sie im Dialogfeld **Eingabe Tabelle (n) auswählen** auf **Tabelle auswählen**.</span><span class="sxs-lookup"><span data-stu-id="82189-217">In the **Select Input Table(s)** dialog box, click **Select Nested Table**.</span></span>  
  
5.  <span data-ttu-id="82189-218">Wählen Sie im Dialogfeld **Tabelle auswählen** für **Datenquelle**die Option Aufträge aus.</span><span class="sxs-lookup"><span data-stu-id="82189-218">In the **Select Table** dialog box, for **Data Source**, select Orders.</span></span> <span data-ttu-id="82189-219">Wählen Sie in der Liste **Tabellen-/Sichtname** den Eintrag vassocsetqlineitems aus, und klicken Sie dann auf **OK**.</span><span class="sxs-lookup"><span data-stu-id="82189-219">In the **Table/View name** list, select vAssocSeqLineItems, and then click **OK**.</span></span>  
  
     <span data-ttu-id="82189-220">Analysis Services versucht, Beziehungen zu erkennen und automatisch zu erstellen, wenn die Datentypen übereinstimmen und ähnliche Spaltennamen vorliegen.</span><span class="sxs-lookup"><span data-stu-id="82189-220">Analysis Services will try to detect relationships and create them automatically if the data types match and the column names are similar.</span></span> <span data-ttu-id="82189-221">Wenn die erstellten Beziehungen falsch sind, können Sie mit der rechten Maustaste auf die Joinlinie klicken und **Verbindungen ändern** auswählen, um die Spalten Zuordnung zu bearbeiten, oder Sie können mit der rechten Maustaste auf die Joinlinie klicken und **Löschen** auswählen, um die Beziehung vollständig zu entfernen.</span><span class="sxs-lookup"><span data-stu-id="82189-221">If the relationships that it creates are wrong, you can right-click the join line and select **Modify Connections** to edit the column mapping, or you can right-click the join line and select **Delete** to remove the relationship completely.</span></span> <span data-ttu-id="82189-222">In diesem Fall werden die Beziehungen automatisch dem Entwurfsbereich hinzugefügt, da die Tabellen in der Datenquellensicht bereits verbunden waren.</span><span class="sxs-lookup"><span data-stu-id="82189-222">In this case, because the tables were already joined in the data source view, those relationships are automatically added to the design pane.</span></span>  
  
6.  <span data-ttu-id="82189-223">Fügen Sie dem Raster eine neue Zeile hinzu.</span><span class="sxs-lookup"><span data-stu-id="82189-223">Add a new row to the grid.</span></span> <span data-ttu-id="82189-224">Wählen Sie als **Quelle**die Option vassocabqorders aus, und wählen Sie für **Feld**die Option CustomerKey aus.</span><span class="sxs-lookup"><span data-stu-id="82189-224">For **Source**, select vAssocSeqOrders, and for **Field**, select CustomerKey.</span></span>  
  
7.  <span data-ttu-id="82189-225">Fügen Sie dem Raster eine neue Zeile hinzu.</span><span class="sxs-lookup"><span data-stu-id="82189-225">Add a new row to the grid.</span></span> <span data-ttu-id="82189-226">Wählen Sie für **Quelle**die Option **Vorhersagefunktion**aus, und wählen Sie für **Feld**die Option **vorhersag Sequenz**aus.</span><span class="sxs-lookup"><span data-stu-id="82189-226">For **Source**, select **Prediction Function**, and for **Field**, select **PredictSequence**.</span></span>  
  
8.  <span data-ttu-id="82189-227">Ziehen Sie vassoccot qlineitems in das Feld **Kriterium/Argument** .</span><span class="sxs-lookup"><span data-stu-id="82189-227">Drag vAssocSeqLineItems, into the **Criteria/Argument** box.</span></span> <span data-ttu-id="82189-228">Klicken Sie am Ende des Felds **Kriterium/Argument** , und geben Sie dann die folgenden Argumente ein: `2` .</span><span class="sxs-lookup"><span data-stu-id="82189-228">Click at the end of the **Criteria/Argument** box and then type the following arguments: `2`.</span></span>  
  
     <span data-ttu-id="82189-229">Der vollständige Text im Feld **Kriterium/Argument** sollte wie folgt lauten:`[Sequence Clustering].[v Assoc Seq Line Items],2`</span><span class="sxs-lookup"><span data-stu-id="82189-229">The complete text in the **Criteria/Argument** box should be: `[Sequence Clustering].[v Assoc Seq Line Items],2`</span></span>  
  
9. <span data-ttu-id="82189-230">Klicken Sie auf die Schaltfläche **Ergebnis** , um die Vorhersagen für jeden Kunden anzuzeigen.</span><span class="sxs-lookup"><span data-stu-id="82189-230">Click the **Result** button to view the predictions for each customer.</span></span>  
  
 <span data-ttu-id="82189-231">Sie haben das Lernprogramm für Sequenzclustermodelle abgeschlossen.</span><span class="sxs-lookup"><span data-stu-id="82189-231">You have completed the tutorial on sequence clustering models.</span></span>  
  
## <a name="next-steps"></a><span data-ttu-id="82189-232">Nächste Schritte</span><span class="sxs-lookup"><span data-stu-id="82189-232">Next Steps</span></span>  
 <span data-ttu-id="82189-233">Wenn Sie alle Abschnitte im Data Mining-Lernprogramm für fort [geschrittene &#40;Analysis Services Data Mining-&#41;](../../2014/tutorials/intermediate-data-mining-tutorial-analysis-services-data-mining.md)fertiggestellt haben, können Sie im nächsten Schritt erfahren, wie Sie DMX-Anweisungen (Data Mining Extensions) zum Erstellen von Modellen und Generieren von Vorhersagen verwenden.</span><span class="sxs-lookup"><span data-stu-id="82189-233">If you have finished all the sections in the [Intermediate Data Mining Tutorial &#40;Analysis Services - Data Mining&#41;](../../2014/tutorials/intermediate-data-mining-tutorial-analysis-services-data-mining.md), the next step might be to learn to use Data Mining Extensions (DMX) statements to build models and generate predictions.</span></span> <span data-ttu-id="82189-234">Weitere Informationen finden Sie unter [Erstellen und Abfragen von Data Mining-Modellen mit DMX: Tutorials &#40;Analysis Services Data Mining-&#41;](../../2014/tutorials/create-query-data-mining-models-dmx-tutorials.md).</span><span class="sxs-lookup"><span data-stu-id="82189-234">For more information, see [Creating and Querying Data Mining Models with DMX: Tutorials &#40;Analysis Services - Data Mining&#41;](../../2014/tutorials/create-query-data-mining-models-dmx-tutorials.md).</span></span>  
  
 <span data-ttu-id="82189-235">Wenn Sie mit Programmierkonzepten vertraut sind, können Sie Data Mining-Objekte mithilfe von Analysis Management Objects (AMO) auch programmgesteuert bearbeiten.</span><span class="sxs-lookup"><span data-stu-id="82189-235">If you are familiar with programming concepts, you can also use Analysis Management Objects (AMO) to programmatically work with data mining objects.</span></span> <span data-ttu-id="82189-236">Weitere Informationen finden Sie unter [AMO-Klassen für Data Mining](https://docs.microsoft.com/bi-reference/amo/amo-data-mining-classes).</span><span class="sxs-lookup"><span data-stu-id="82189-236">For more information, see [AMO Data Mining Classes](https://docs.microsoft.com/bi-reference/amo/amo-data-mining-classes).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="82189-237">Weitere Informationen</span><span class="sxs-lookup"><span data-stu-id="82189-237">See Also</span></span>  
 <span data-ttu-id="82189-238">[Sequence Clustering-Modell Abfrage Beispiele](../../2014/analysis-services/data-mining/sequence-clustering-model-query-examples.md) </span><span class="sxs-lookup"><span data-stu-id="82189-238">[Sequence Clustering Model Query Examples](../../2014/analysis-services/data-mining/sequence-clustering-model-query-examples.md) </span></span>  
 [<span data-ttu-id="82189-239">Miningmodellinhalt von Sequence Clustering-Modellen &#40;Analysis Services – Data Mining&#41;</span><span class="sxs-lookup"><span data-stu-id="82189-239">Mining Model Content for Sequence Clustering Models &#40;Analysis Services - Data Mining&#41;</span></span>](../../2014/analysis-services/data-mining/mining-model-content-for-sequence-clustering-models.md)  
  
  
