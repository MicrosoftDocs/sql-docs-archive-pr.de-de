---
title: Cloudadapter für SQL Server | Microsoft-Dokumentation
ms.custom: ''
ms.date: 03/09/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: database-engine
ms.topic: conceptual
helpviewer_keywords:
- Cloud adapter
- Deploy to Azure
ms.assetid: 82ed0d0f-952d-4d49-aa36-3855a3ca9877
author: mashamsft
ms.author: mathoma
ms.openlocfilehash: d5716435bb1db494bdabeb45ed366c1783926989
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 08/04/2020
ms.locfileid: "87619363"
---
# <a name="cloud-adapter-for-sql-server"></a><span data-ttu-id="3133b-102">Cloud-Adapter für SQL Server</span><span class="sxs-lookup"><span data-stu-id="3133b-102">Cloud Adapter for SQL Server</span></span>
  <span data-ttu-id="3133b-103">Der Cloudadapter-Dienst wird als Teil der Bereitstellung [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] auf einer Azure-VM erstellt.</span><span class="sxs-lookup"><span data-stu-id="3133b-103">The Cloud Adapter service is created as part of [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] provisioning on an Azure VM.</span></span> <span data-ttu-id="3133b-104">Der Cloud-Adapterdienst generiert bei der ersten Ausführung ein selbstsigniertes Zertifikat und wird danach unter dem Konto **Lokales System** ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="3133b-104">The Cloud Adapter service generates a self-signed SSL certificate as part of its first run, and then runs as a **Local System** account.</span></span> <span data-ttu-id="3133b-105">Er generiert eine Konfigurationsdatei, die für die eigene Konfiguration verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="3133b-105">It generates a configuration file that is used to configure itself.</span></span> <span data-ttu-id="3133b-106">Der Cloudadapter erstellt außerdem eine Windows-Firewall-Regel, um eingehende TCP-Verbindungen über den Standardport 11435 zuzulassen.</span><span class="sxs-lookup"><span data-stu-id="3133b-106">The Cloud Adapter also creates a Windows Firewall rule to allow its incoming TCP connections at default port 11435.</span></span>  
  
 <span data-ttu-id="3133b-107">Der Cloud-Adapter ist ein zustandsloser, synchroner Dienst, der Nachrichten von der lokalen [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)]-Instanz empfängt.</span><span class="sxs-lookup"><span data-stu-id="3133b-107">The Cloud Adapter is a stateless, synchronous service that receives messages from the on-premise instance of [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="3133b-108">Beim Beenden des Cloud-Adapterdiensts wird der Remotezugriff für Cloud-Adapter beendet, die Bindung des SSL-Zertifikats aufgehoben und die Windows-Firewall-Regel deaktiviert.</span><span class="sxs-lookup"><span data-stu-id="3133b-108">When the Cloud Adapter service is stopped, it stops the remote access Cloud Adapter, unbinds the SSL certificate, and disables the Windows Firewall rule.</span></span>  
  
## <a name="cloud-adapter-requirements"></a><span data-ttu-id="3133b-109">Cloud-Adapter-Anforderungen</span><span class="sxs-lookup"><span data-stu-id="3133b-109">Cloud Adapter Requirements</span></span>  
 <span data-ttu-id="3133b-110">Beachten Sie die folgenden Anforderungen für die Installation, Aktivierung und Ausführung des Cloud-Adapters für [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)]:</span><span class="sxs-lookup"><span data-stu-id="3133b-110">Note the following requirements to install, enable, and run the Cloud Adapter for [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)]:</span></span>  
  
-   <span data-ttu-id="3133b-111">Der Cloud-Adapter wird ab [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] 2012 unterstützt.</span><span class="sxs-lookup"><span data-stu-id="3133b-111">Cloud Adapter is supported with [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] 2012 and higher.</span></span> <span data-ttu-id="3133b-112">In [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] 2012 erfordert der Cloud-Adapter für [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] SQL Management Objects für [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] 2012.</span><span class="sxs-lookup"><span data-stu-id="3133b-112">On [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] 2012, the Cloud Adapter for [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] requires SQL Management Objects for [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] 2012.</span></span>  
  
-   <span data-ttu-id="3133b-113">Der Cloud-Adapterwebdienst wird unter dem Konto **Lokales System** ausgeführt und überprüft die Clientanmeldeinformationen vor der Ausführung eines Tasks.</span><span class="sxs-lookup"><span data-stu-id="3133b-113">Cloud Adapter web service runs as a **Local System** account and verifies client credentials before executing any task.</span></span> <span data-ttu-id="3133b-114">Die vom Client bereitgestellten Anmelde Informationen müssen zu dem Konto gehören, das Mitglied der lokalen **Administratoren** Gruppe auf dem Remote Computer ist.</span><span class="sxs-lookup"><span data-stu-id="3133b-114">Credentials supplied by the client must belong to the use account that is a member of the local **Administrators** group on the remote machine.</span></span>  
  
-   <span data-ttu-id="3133b-115">Der Cloud-Adapter unterstützt nur die [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] -Authentifizierung.</span><span class="sxs-lookup"><span data-stu-id="3133b-115">Cloud Adapter supports only [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] Authentication.</span></span>  
  
-   <span data-ttu-id="3133b-116">Cloud-Adapter verwendet kein sa-Konto, sondern das lokale Administratorkonto der VM, um Befehle auf dem lokalen Computer auszuführen.</span><span class="sxs-lookup"><span data-stu-id="3133b-116">Cloud Adapter uses VM local administrator account to execute commands on the local machine, not an sa account.</span></span>  
  
-   <span data-ttu-id="3133b-117">Cloud-Adapter wartet auf TCP/IP-Verbindungen.</span><span class="sxs-lookup"><span data-stu-id="3133b-117">Cloud Adapter listens on TCP/IP.</span></span> <span data-ttu-id="3133b-118">Der Standardport ist 11435.</span><span class="sxs-lookup"><span data-stu-id="3133b-118">The default port is 11435.</span></span>  
  
-   <span data-ttu-id="3133b-119">Cloud-Adapter muss über Berechtigungen zum Erstellen und Ändern von Windows-Firewall-Regeln verfügen.</span><span class="sxs-lookup"><span data-stu-id="3133b-119">Cloud Adapter must have permissions to create and modify Windows Firewall rules.</span></span>  
  
## <a name="cloud-adapter-configuration-settings"></a><span data-ttu-id="3133b-120">Cloud-Adapter-Konfigurationseinstellungen</span><span class="sxs-lookup"><span data-stu-id="3133b-120">Cloud Adapter Configuration Settings</span></span>  
 <span data-ttu-id="3133b-121">Verwenden Sie die folgenden Konfigurationsdetails für Cloud-Adapter, um die Einstellungen für einen Cloud-Adapter zu ändern.</span><span class="sxs-lookup"><span data-stu-id="3133b-121">Use the following Cloud Adapter configuration details to modify settings for a Cloud Adapter.</span></span>  
  
-   <span data-ttu-id="3133b-122">**Standardpfad für die Konfigurationsdatei** : c:\Programme\Microsoft SQL server\120\tools\cloudadapter</span><span class="sxs-lookup"><span data-stu-id="3133b-122">**Default path for the configuration file** - C:\Program Files\Microsoft SQL Server\120\Tools\CloudAdapter</span></span>\  
  
-   <span data-ttu-id="3133b-123">**Konfigurationsdatei Parameter** -</span><span class="sxs-lookup"><span data-stu-id="3133b-123">**Configuration file parameters** -</span></span>  
  
    -   \<configuration>  
  
        -   \<appSettings>  
  
            -   \<add key="WebServicePort" value="" />  
  
            -   \<add key="WebServiceCertificate" value="GUID" />  
  
            -   \<add key="ExposeExceptionDetails" value="true" />  
  
        -   \</appSettings>  
  
    -   \</configuration>  
  
-   <span data-ttu-id="3133b-124">**Zertifikat Details** : das Zertifikat weist die folgenden Werte auf:</span><span class="sxs-lookup"><span data-stu-id="3133b-124">**Certificate details** - The certificate has the following values:</span></span>  
  
    -   <span data-ttu-id="3133b-125">Subject-"CN = cloudadapter \<VMName> , DC = SQL Server, DC = Microsoft"</span><span class="sxs-lookup"><span data-stu-id="3133b-125">Subject - "CN=CloudAdapter\<VMName>, DC=SQL Server, DC=Microsoft"</span></span>  
  
    -   <span data-ttu-id="3133b-126">Für das Zertifikat darf nur die Serverauthentifizierung EKU aktiviert sein.</span><span class="sxs-lookup"><span data-stu-id="3133b-126">The certificate should have only Server Authentication EKU enabled.</span></span>  
  
    -   <span data-ttu-id="3133b-127">Die Zertifikatschlüssellänge beträgt 2048.</span><span class="sxs-lookup"><span data-stu-id="3133b-127">The certificate key length is 2048.</span></span>  
  
 <span data-ttu-id="3133b-128">**Werte der Konfigurationsdatei**:</span><span class="sxs-lookup"><span data-stu-id="3133b-128">**Configuration file values**:</span></span>  
  
|<span data-ttu-id="3133b-129">Einstellung</span><span class="sxs-lookup"><span data-stu-id="3133b-129">Setting</span></span>|<span data-ttu-id="3133b-130">Werte</span><span class="sxs-lookup"><span data-stu-id="3133b-130">Values</span></span>|<span data-ttu-id="3133b-131">Standard</span><span class="sxs-lookup"><span data-stu-id="3133b-131">Default</span></span>|<span data-ttu-id="3133b-132">Kommentare</span><span class="sxs-lookup"><span data-stu-id="3133b-132">Comments</span></span>|  
|-------------|------------|-------------|--------------|  
|<span data-ttu-id="3133b-133">WebServicePort</span><span class="sxs-lookup"><span data-stu-id="3133b-133">WebServicePort</span></span>|<span data-ttu-id="3133b-134">1-65535</span><span class="sxs-lookup"><span data-stu-id="3133b-134">1-65535</span></span>|<span data-ttu-id="3133b-135">11435</span><span class="sxs-lookup"><span data-stu-id="3133b-135">11435</span></span>|<span data-ttu-id="3133b-136">Wenn nicht angegeben, wird 11435 verwendet.</span><span class="sxs-lookup"><span data-stu-id="3133b-136">If not specified, use 11435.</span></span>|  
|<span data-ttu-id="3133b-137">WebServiceCertificate</span><span class="sxs-lookup"><span data-stu-id="3133b-137">WebServiceCertificate</span></span>|<span data-ttu-id="3133b-138">Fingerabdruck</span><span class="sxs-lookup"><span data-stu-id="3133b-138">Thumbprint</span></span>|<span data-ttu-id="3133b-139">Empty</span><span class="sxs-lookup"><span data-stu-id="3133b-139">Empty</span></span>|<span data-ttu-id="3133b-140">Bei einem leeren Wert wird ein neues selbstsigniertes Zertifikat generiert.</span><span class="sxs-lookup"><span data-stu-id="3133b-140">If empty, a new self-signed certificate is generated.</span></span>|  
|<span data-ttu-id="3133b-141">ExposeExceptionDetails</span><span class="sxs-lookup"><span data-stu-id="3133b-141">ExposeExceptionDetails</span></span>|<span data-ttu-id="3133b-142">Wahr/falsch</span><span class="sxs-lookup"><span data-stu-id="3133b-142">True/False</span></span>|<span data-ttu-id="3133b-143">False</span><span class="sxs-lookup"><span data-stu-id="3133b-143">False</span></span>||  
  
## <a name="cloud-adapter-troubleshooting"></a><span data-ttu-id="3133b-144">Cloud-Adapter-Problembehandlung</span><span class="sxs-lookup"><span data-stu-id="3133b-144">Cloud Adapter Troubleshooting</span></span>  
 <span data-ttu-id="3133b-145">Verwenden Sie die folgenden Informationen zur Problembehandlung beim Cloud-Adapter für [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)]:</span><span class="sxs-lookup"><span data-stu-id="3133b-145">Use the following information to troubleshoot the Cloud Adapter for [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)]:</span></span>  
  
-   <span data-ttu-id="3133b-146">**Fehlerbehandlung und Protokollierung** : Fehler und Statusmeldungen werden in das Anwendungs Ereignisprotokoll geschrieben.</span><span class="sxs-lookup"><span data-stu-id="3133b-146">**Error handling and logging** - Errors and status messages are written to the Application Event Log.</span></span>  
  
-   <span data-ttu-id="3133b-147">Ablauf **Verfolgung, Ereignisse** : alle Ereignisse werden in das Anwendungs Ereignisprotokoll geschrieben.</span><span class="sxs-lookup"><span data-stu-id="3133b-147">**Tracing, Events** - All events are written to the Application Event Log.</span></span>  
  
-   <span data-ttu-id="3133b-148">**Steuerung, Konfiguration** : Verwenden Sie die Konfigurationsdatei, die sich unter befindet: c:\Programme\Microsoft SQL server\120\tools\cloudadapter \\ .</span><span class="sxs-lookup"><span data-stu-id="3133b-148">**Control, configuration** - Use the configuration file located in:  C:\Program Files\Microsoft SQL Server\120\Tools\CloudAdapter\\.</span></span>  
  
|<span data-ttu-id="3133b-149">Fehler</span><span class="sxs-lookup"><span data-stu-id="3133b-149">Error</span></span>|<span data-ttu-id="3133b-150">Fehler-ID</span><span class="sxs-lookup"><span data-stu-id="3133b-150">Error ID</span></span>|<span data-ttu-id="3133b-151">Ursache</span><span class="sxs-lookup"><span data-stu-id="3133b-151">Cause</span></span>|<span data-ttu-id="3133b-152">Lösung</span><span class="sxs-lookup"><span data-stu-id="3133b-152">Resolution</span></span>|  
|-----------|--------------|-----------|----------------|  
|<span data-ttu-id="3133b-153">Ausnahme beim Hinzufügen des Zertifikats zum Zertifikatspeicher.</span><span class="sxs-lookup"><span data-stu-id="3133b-153">There was an exception while adding the certificate to the certificate store.</span></span> <span data-ttu-id="3133b-154">{Exception text}.</span><span class="sxs-lookup"><span data-stu-id="3133b-154">{Exception text}.</span></span>|<span data-ttu-id="3133b-155">45560</span><span class="sxs-lookup"><span data-stu-id="3133b-155">45560</span></span>|<span data-ttu-id="3133b-156">Computer Zertifikat Speicher-Berechtigungen</span><span class="sxs-lookup"><span data-stu-id="3133b-156">Machine certificate store permissions</span></span>|<span data-ttu-id="3133b-157">Stellen Sie sicher, dass der Cloudadapter-Dienst über Berechtigungen zum Hinzufügen von Zertifikaten zum Zertifikat Speicher des Computers verfügt.</span><span class="sxs-lookup"><span data-stu-id="3133b-157">Ensure that the Cloud Adapter service has permissions to add certificates to the machine certificate store.</span></span>|  
|<span data-ttu-id="3133b-158">Ausnahme bei dem Versuch, die SSL-Bindung für Port {Port number} und Zertifikat {Thumbprint} zu konfigurieren.</span><span class="sxs-lookup"><span data-stu-id="3133b-158">There was an exception while trying to configure the SSL binding for port {Port number} and certificate {Thumbprint}.</span></span> <span data-ttu-id="3133b-159">{Exception}.</span><span class="sxs-lookup"><span data-stu-id="3133b-159">{Exception}.</span></span>|<span data-ttu-id="3133b-160">45561</span><span class="sxs-lookup"><span data-stu-id="3133b-160">45561</span></span>|<span data-ttu-id="3133b-161">Eine andere Anwendung verwendet bereits den Port oder hat ein Zertifikat an diesen gebunden.</span><span class="sxs-lookup"><span data-stu-id="3133b-161">Another application has already used the port or bound a certificate to it.</span></span>|<span data-ttu-id="3133b-162">Entfernen Sie alle vorhandenen Bindungen, oder ändern Sie in der Konfigurationsdatei den Port für Cloud-Adapter.</span><span class="sxs-lookup"><span data-stu-id="3133b-162">Remove existing bindings or change Cloud Adapter port in the configuration file.</span></span>|  
|<span data-ttu-id="3133b-163">Das SSL-Zertifikat [{Thumbprint}] wurde im Zertifikatspeicher nicht gefunden.</span><span class="sxs-lookup"><span data-stu-id="3133b-163">Failed to find SSL certificate [{Thumbprint}] in the certificate store.</span></span>|<span data-ttu-id="3133b-164">45564</span><span class="sxs-lookup"><span data-stu-id="3133b-164">45564</span></span>|<span data-ttu-id="3133b-165">Der Fingerabdruck des Zertifikats ist in der Konfigurationsdatei verfügbar, aber das Zertifikat ist im persönlichen Zertifikatspeicher für den Dienst nicht enthalten.</span><span class="sxs-lookup"><span data-stu-id="3133b-165">Certificate thumbprint is in the configuration file, but personal certificate store for the service does not contain certificate.</span></span><br /><br /> <span data-ttu-id="3133b-166">Unzureichende Berechtigungen.</span><span class="sxs-lookup"><span data-stu-id="3133b-166">Insufficient permissions.</span></span>|<span data-ttu-id="3133b-167">Stellen Sie sicher, dass das Zertifikat im persönlichen Zertifikatspeicher für den Dienst vorhanden ist.</span><span class="sxs-lookup"><span data-stu-id="3133b-167">Make sure the certificate is in the personal certificate store for the service.</span></span><br /><br /> <span data-ttu-id="3133b-168">Stellen Sie sicher, dass der Dienst über die erforderlichen Berechtigungen für den Speicher verfügt.</span><span class="sxs-lookup"><span data-stu-id="3133b-168">Make sure the service has correct permissions for the store.</span></span>|  
|<span data-ttu-id="3133b-169">Fehler beim Starten des Webdiensts.</span><span class="sxs-lookup"><span data-stu-id="3133b-169">Failed to start the web service.</span></span> <span data-ttu-id="3133b-170">{Exception text}.</span><span class="sxs-lookup"><span data-stu-id="3133b-170">{Exception text}.</span></span>|<span data-ttu-id="3133b-171">45570</span><span class="sxs-lookup"><span data-stu-id="3133b-171">45570</span></span>|<span data-ttu-id="3133b-172">Wird in der Ausnahme beschrieben.</span><span class="sxs-lookup"><span data-stu-id="3133b-172">Described in the exception.</span></span>|<span data-ttu-id="3133b-173">Aktivieren Sie ExposeExceptionDetails, und lesen Sie die erweiterten Informationen in der Ausnahme.</span><span class="sxs-lookup"><span data-stu-id="3133b-173">Enable ExposeExceptionDetails and use extended information from the exception.</span></span>|  
|<span data-ttu-id="3133b-174">Das Zertifikat [{Thumbprint}] ist abgelaufen.</span><span class="sxs-lookup"><span data-stu-id="3133b-174">Certificate [{Thumbprint}] has expired.</span></span>|<span data-ttu-id="3133b-175">45565</span><span class="sxs-lookup"><span data-stu-id="3133b-175">45565</span></span>|<span data-ttu-id="3133b-176">In der Konfigurationsdatei wird auf ein abgelaufenes Zertifikat verwiesen.</span><span class="sxs-lookup"><span data-stu-id="3133b-176">Expired certificate referenced from the configuration file.</span></span>|<span data-ttu-id="3133b-177">Fügen Sie ein gültiges Zertifikat hinzu, und aktualisieren Sie die Konfigurationsdatei mit dem Fingerabdruck.</span><span class="sxs-lookup"><span data-stu-id="3133b-177">Add a valid certificate and update the configuration file with its thumbprint.</span></span>|  
|<span data-ttu-id="3133b-178">Webdienst Fehler: {0} .</span><span class="sxs-lookup"><span data-stu-id="3133b-178">Web service error: {0}.</span></span>|<span data-ttu-id="3133b-179">45571</span><span class="sxs-lookup"><span data-stu-id="3133b-179">45571</span></span>|<span data-ttu-id="3133b-180">Wird in der Ausnahme beschrieben.</span><span class="sxs-lookup"><span data-stu-id="3133b-180">Described in the exception.</span></span>|<span data-ttu-id="3133b-181">Aktivieren Sie ExposeExceptionDetails, und lesen Sie die erweiterten Informationen in der Ausnahme.</span><span class="sxs-lookup"><span data-stu-id="3133b-181">Enable ExposeExceptionDetails and use extended information from the exception.</span></span>|  
  
## <a name="see-also"></a><span data-ttu-id="3133b-182">Weitere Informationen</span><span class="sxs-lookup"><span data-stu-id="3133b-182">See Also</span></span>  
 [<span data-ttu-id="3133b-183">Bereitstellen einer SQL Server-Datenbank auf einem virtuellen Microsoft Azure-Computer</span><span class="sxs-lookup"><span data-stu-id="3133b-183">Deploy a SQL Server Database to a Microsoft Azure Virtual Machine</span></span>](../relational-databases/databases/deploy-a-sql-server-database-to-a-microsoft-azure-virtual-machine.md)  
  
  
