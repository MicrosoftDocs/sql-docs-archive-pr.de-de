---
title: Problembehandlung beim SQL Server-Hilfsprogramm | Microsoft-Dokumentation
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: ''
ms.topic: conceptual
ms.assetid: f5f47c2a-38ea-40f8-9767-9bc138d14453
author: mashamsft
ms.author: mathoma
ms.openlocfilehash: 3c139f9f084374aeb711e905ac0c315acc25c6ac
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 08/04/2020
ms.locfileid: "87720338"
---
# <a name="troubleshoot-the-sql-server-utility"></a><span data-ttu-id="7d223-102">Problembehandlung beim SQL Server-Hilfsprogramm</span><span class="sxs-lookup"><span data-stu-id="7d223-102">Troubleshoot the SQL Server Utility</span></span>
  <span data-ttu-id="7d223-103">Die Behebung von Problemen mit dem [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] -Hilfsprogramm kann das Auflösen eines fehlgeschlagenen Vorgangs zur Registrierung einer Instanz von SQL Server mit einem UCP, die Behebung von Fehlern bei Datensammlungen, die zu grauen Symbolen in der Listenansicht der verwalteten Instanzen auf einem UCP führen, die Abhilfe für Leistungsengpässe oder das Beheben von Problemen mit der Ressourcenintegrität umfassen.</span><span class="sxs-lookup"><span data-stu-id="7d223-103">Troubleshooting [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] Utility issues might include resolving a failed operation to enroll an instance of SQL Server with a UCP, troubleshooting failed data collection resulting in gray icons in the managed instance list view on a UCP, mitigating performance bottlenecks, or resolving resource health issues.</span></span> <span data-ttu-id="7d223-104">Weitere Informationen zum Beheben von Problemen mit der Ressourcen Integrität, die von einem [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] UCP identifiziert werden, finden Sie unter Problembehandlung [SQL Server Resource Health &#40;SQL Server-Hilfsprogramm&#41;](../relational-databases/manage/troubleshoot-sql-server-resource-health-sql-server-utility.md).</span><span class="sxs-lookup"><span data-stu-id="7d223-104">For more information about mitigating resource health issues identified by a [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] UCP, see [Troubleshoot SQL Server Resource Health &#40;SQL Server Utility&#41;](../relational-databases/manage/troubleshoot-sql-server-resource-health-sql-server-utility.md).</span></span>  
  
## <a name="failed-operation-to-enroll-an-instance-of-sql-server-into-a-sql-server-utility"></a><span data-ttu-id="7d223-105">Fehlgeschlagener Vorgang, eine Instanz von SQL Server in ein SQL Server-Hilfsprogramm zu registrieren</span><span class="sxs-lookup"><span data-stu-id="7d223-105">Failed Operation to Enroll an Instance of SQL Server into a SQL Server Utility</span></span>  
 <span data-ttu-id="7d223-106">Wenn Sie die [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] -Authentifizierung für die Verbindung mit der Instanz von [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] für die Registrierung verwenden, und Sie geben ein Proxykonto an, das zu einer anderen Active Directory-Domäne gehört als die Domäne, wo sich der UCP befindet, ist die Instanzüberprüfung erfolgreich, aber der Registrierungsvorgang schlägt mit der folgenden Fehlermeldung fehl:</span><span class="sxs-lookup"><span data-stu-id="7d223-106">If you connect to the instance of [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] to enroll using [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] Authentication, and you specify a proxy account that belongs to a different Active Directory domain than the domain where the UCP is located, instance validation succeeds, but the enrollment operation fails with the following error message:</span></span>  
  
 <span data-ttu-id="7d223-107">Beim Ausführen einer Transact-SQL-Anweisung oder eines Batches ist eine Ausnahme aufgetreten.</span><span class="sxs-lookup"><span data-stu-id="7d223-107">An exception occurred while executing a Transact-SQL statement or batch.</span></span> <span data-ttu-id="7d223-108">(Microsoft.SqlServer.ConnectionInfo)</span><span class="sxs-lookup"><span data-stu-id="7d223-108">(Microsoft.SqlServer.ConnectionInfo)</span></span>  
  
 <span data-ttu-id="7d223-109">Zusätzliche Informationen:  Die Informationen über Windows NT-Gruppe oder -Benutzer „\<DomainName\AccountName>“ konnten nicht abgerufen werden, Fehlercode 0x5.</span><span class="sxs-lookup"><span data-stu-id="7d223-109">Additional information:  Could not obtain information about Windows NT group/user '\<DomainName\AccountName>', error code 0x5.</span></span> <span data-ttu-id="7d223-110">(Microsoft SQL Server, Fehler: 15404)</span><span class="sxs-lookup"><span data-stu-id="7d223-110">(Microsoft SQL Server, Error: 15404)</span></span>  
  
 <span data-ttu-id="7d223-111">Das Problem tritt im folgenden Beispielszenario auf:</span><span class="sxs-lookup"><span data-stu-id="7d223-111">This issue occurs in the following example scenario:</span></span>  
  
1.  <span data-ttu-id="7d223-112">Der UCP ist ein Element von "Domain_1."</span><span class="sxs-lookup"><span data-stu-id="7d223-112">The UCP is a member of "Domain_1."</span></span>  
  
2.  <span data-ttu-id="7d223-113">Eine unidirektionale Domänenvertrauensstellung ist vorhanden: das heißt, "Domain_1" wird nicht von "Domain_2" vertraut, aber "Domain_2" wird von "Domain_1" vertraut.</span><span class="sxs-lookup"><span data-stu-id="7d223-113">A one-way domain trust relationship is in place: that is, "Domain_1" is not trusted by "Domain_2" but "Domain_2" is trusted by "Domain_1."</span></span>  
  
3.  <span data-ttu-id="7d223-114">Die Instanz von [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] , die in das [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] -Hilfsprogramm registriert werden soll, ist auch ein Element von "Domain_1."</span><span class="sxs-lookup"><span data-stu-id="7d223-114">The instance of [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] to enroll into the [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] Utility is also a member of "Domain_1."</span></span>  
  
4.  <span data-ttu-id="7d223-115">Stellen Sie während des Registrierungsvorgangs eine Verbindung mit der Instanz von [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] her, um sich mit "SA" zu registrieren.</span><span class="sxs-lookup"><span data-stu-id="7d223-115">During the enroll operation, connect to the instance of [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] to enroll using "sa".</span></span> <span data-ttu-id="7d223-116">Geben Sie ein Proxykonto bei "Domain_2" an.</span><span class="sxs-lookup"><span data-stu-id="7d223-116">Specify a proxy account from "Domain_2."</span></span>  
  
5.  <span data-ttu-id="7d223-117">Die Überprüfung ist erfolgreich, aber die Registrierung schlägt fehl.</span><span class="sxs-lookup"><span data-stu-id="7d223-117">Validation succeeds but enrollment fails.</span></span>  
  
 <span data-ttu-id="7d223-118">Die Problem Umgehung für dieses Problem ist, indem Sie das obige Beispiel verwenden, eine Verbindung mit der Instanz von herzustellen, [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] um sich [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] mit "SA" bei dem Hilfsprogramm zu registrieren und ein Proxy Konto von "Domain_1" bereitzustellen.</span><span class="sxs-lookup"><span data-stu-id="7d223-118">The workaround for this issue, using the example above, is to connect to the instance of [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] to enroll into the [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] Utility using "sa" and provide a proxy account from "Domain_1."</span></span>  
  
## <a name="failed-wmi-validation"></a><span data-ttu-id="7d223-119">Fehlgeschlagene WMI-Überprüfung</span><span class="sxs-lookup"><span data-stu-id="7d223-119">Failed WMI Validation</span></span>  
 <span data-ttu-id="7d223-120">Wenn WMI nicht ordnungsgemäß auf einer Instanz von [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)]konfiguriert wird, zeigen die Vorgänge für das Erstellen des UCPs und die Registrierung verwalteter Instanzen eine Warnung an, der Vorgang wird jedoch nicht blockiert.</span><span class="sxs-lookup"><span data-stu-id="7d223-120">If WMI is not properly configured on an instance of [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)], the Create UCP and Enroll Managed Instance operations display a warning, but the operation is not blocked.</span></span> <span data-ttu-id="7d223-121">Wenn Sie die [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] -Agent-Kontokonfiguration ändern, sodass der [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] -Agent nicht über die Berechtigung für die erforderlichen WMI-Klassen verfügt, lädt die Datensammlung auf der betroffenen verwalteten Instanz von [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] nicht zum UCP hoch.</span><span class="sxs-lookup"><span data-stu-id="7d223-121">Additionally, if you change the [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] Agent account configuration so that [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] Agent does not have permission to required WMI classes, data collection on the affected managed instance of [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] fails to upload to the UCP.</span></span> <span data-ttu-id="7d223-122">Dies führt im UCP zu grauen Symbolen.</span><span class="sxs-lookup"><span data-stu-id="7d223-122">This results in gray icons in the UCP.</span></span>  
  
 <span data-ttu-id="7d223-123">Die fehlgeschlagene Datensammlung führt in der UCP-Listenansicht für betroffene verwaltete Instanzen von [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)]zu grauen Statussymbolen.</span><span class="sxs-lookup"><span data-stu-id="7d223-123">Failed data collection results in gray status icons in the UCP list view for affected managed instances of [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="7d223-124">Der Auftragsverlauf auf der verwalteten Instanz von [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] zeigt an, dass sysutility_mi_collect_and_upload bei Schritt 2 (Phasendaten haben sich von PowerShell-Skript gesammelt) fehlschlägt.</span><span class="sxs-lookup"><span data-stu-id="7d223-124">The job history on the managed instance of [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] shows that sysutility_mi_collect_and_upload fails on step 2 (Stage Data Collected from PowerShell Script).</span></span>  
  
 <span data-ttu-id="7d223-125">Die vereinfachten Fehlermeldungen sind:</span><span class="sxs-lookup"><span data-stu-id="7d223-125">The simplified error messages are:</span></span>  
  
 <span data-ttu-id="7d223-126">Die Befehlsausführung wurde beendet, da die Shellvariable "ErrorActionPreference" auf Beenden festgelegt wurde: Zugriff verweigert.</span><span class="sxs-lookup"><span data-stu-id="7d223-126">Command execution stopped because the shell variable "ErrorActionPreference" is set to Stop: Access denied.</span></span>  
  
 <span data-ttu-id="7d223-127">Fehler: \<Date-time (MM/DD/YYYY HH:MM:SS)> : beim Sammeln von CPU-Eigenschaften wurde eine Ausnahme abgefangen.</span><span class="sxs-lookup"><span data-stu-id="7d223-127">ERROR: \<Date-time (MM/DD/YYYY HH:MM:SS)>: Caught exception while collecting cpu properties.</span></span>  <span data-ttu-id="7d223-128">Eine WMI-Abfrage könnte fehlgeschlagen sein.</span><span class="sxs-lookup"><span data-stu-id="7d223-128">A WMI query might have failed.</span></span>  <span data-ttu-id="7d223-129">WARNUNG:</span><span class="sxs-lookup"><span data-stu-id="7d223-129">WARNING.</span></span>  
  
 <span data-ttu-id="7d223-130">Um dieses Problem zu beheben, überprüfen Sie die folgenden Konfigurationseinstellungen:</span><span class="sxs-lookup"><span data-stu-id="7d223-130">To resolve this issue, verify the following configuration settings:</span></span>  
  
-   <span data-ttu-id="7d223-131">Unter Windows Server 2003 muss der SQL Server-Agent-Dienst Teil der Gruppe der Systemmonitorbenutzer auf der verwalteten Instanz von [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)]sein.</span><span class="sxs-lookup"><span data-stu-id="7d223-131">On Windows Server 2003, the SQL Server Agent service must be part of the Windows Performance Monitoring group on the managed instance of [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)].</span></span>  
  
-   <span data-ttu-id="7d223-132">Der WMI-Dienst muss auf der verwalteten Instanz von [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)]aktiviert und konfiguriert sein.</span><span class="sxs-lookup"><span data-stu-id="7d223-132">The WMI service must be enabled and configured on the managed instance of [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)].</span></span>  
  
-   <span data-ttu-id="7d223-133">Das WMI-Repository könnte auf der verwalteten Instanz von [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)]fehlerhaft sein.</span><span class="sxs-lookup"><span data-stu-id="7d223-133">The WMI repository might be corrupt on the managed instance of [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)].</span></span>  
  
-   <span data-ttu-id="7d223-134">Die Leistungsbibliothek könnte fehlen oder auf der verwalteten Instanz von [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)]beschädigt sein.</span><span class="sxs-lookup"><span data-stu-id="7d223-134">The performance library might be missing or corrupt on the managed instance of [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)].</span></span>  
  
 <span data-ttu-id="7d223-135">Um zu überprüfen, ob die angegebene Instanz von [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] ordnungsgemäß für Datenberichte an den UCP konfiguriert ist, überprüfen Sie, ob die folgenden Klassen auf der angegebenen Instanz von [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)]verfügbar sind und ob auf sie vom SQL Server-Agent-Dienstkonto zugegriffen werden kann:</span><span class="sxs-lookup"><span data-stu-id="7d223-135">To verify that the specified instance of [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] is configured properly to report data to the UCP, verify that the following classes are available on the specified instance of [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)], and that they are accessible to SQL Server Agent service account:</span></span>  
  
-   <span data-ttu-id="7d223-136">Win32_MountPoint</span><span class="sxs-lookup"><span data-stu-id="7d223-136">Win32_MountPoint</span></span>  
  
-   <span data-ttu-id="7d223-137">Win32_PerfRawData_PerfProc_Process</span><span class="sxs-lookup"><span data-stu-id="7d223-137">Win32_PerfRawData_PerfProc_Process</span></span>  
  
-   <span data-ttu-id="7d223-138">Win32_PerfRawData_PerfOS_Processor</span><span class="sxs-lookup"><span data-stu-id="7d223-138">Win32_PerfRawData_PerfOS_Processor</span></span>  
  
-   <span data-ttu-id="7d223-139">Win32_Processor</span><span class="sxs-lookup"><span data-stu-id="7d223-139">Win32_Processor</span></span>  
  
-   <span data-ttu-id="7d223-140">Win32_Volume</span><span class="sxs-lookup"><span data-stu-id="7d223-140">Win32_Volume</span></span>  
  
-   <span data-ttu-id="7d223-141">Win32_LogicalDisk</span><span class="sxs-lookup"><span data-stu-id="7d223-141">Win32_LogicalDisk</span></span>  
  
 <span data-ttu-id="7d223-142">Sie können das Get-WmiObject PowerShell Cmdlet auf jede der Klassen anwenden, um zu überprüfen, dass auf jede Klasse zugegriffen werden kann.</span><span class="sxs-lookup"><span data-stu-id="7d223-142">You can use the Get-WmiObject PowerShell cmdlet on each of the classes to verify that each class is accessible.</span></span> <span data-ttu-id="7d223-143">Führen Sie die folgenden Cmdlets auf der verwalteten Instanz von [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)]aus:</span><span class="sxs-lookup"><span data-stu-id="7d223-143">Run the following cmdlets on the managed instance of [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)]:</span></span>  
  
```  
Get-WmiObject Win32_MountPoint -ErrorAction Stop | Out-Null  
Get-WmiObject Win32_PerfRawData_PerfProc_Process -ErrorAction Stop| Out-Null  
Get-WmiObject Win32_PerfRawData_PerfOS_Processor -ErrorAction Stop | Out-Null  
Get-WmiObject Win32_Processor -ErrorAction Stop | Out-Null  
Get-WmiObject Win32_Volume -ErrorAction Stop | Out-Null  
Get-WmiObject Win32_LogicalDisk -ErrorAction Stop | Out-Null  
```  
  
 <span data-ttu-id="7d223-144">Weitere Informationen zum Durchführen einer Problembehandlung für WMI finden Sie unter [Problembehandlung bei WMI](https://go.microsoft.com/fwlink/?LinkId=178250).</span><span class="sxs-lookup"><span data-stu-id="7d223-144">For more information about troubleshooting WMI, see [Troubleshooting WMI](https://go.microsoft.com/fwlink/?LinkId=178250).</span></span> <span data-ttu-id="7d223-145">Beachten Sie, dass Abfragen an diese SQL Server-Hilfsprogrammvorgänge lokal ausgeführt werden, so dass DCOM und Remoteproblembehandlungsinhalte nicht gültig sind.</span><span class="sxs-lookup"><span data-stu-id="7d223-145">Note that queries in these SQL Server Utility operations are running locally, so the DCOM and remote troubleshooting content does not apply.</span></span>  
  
## <a name="failed-data-collection"></a><span data-ttu-id="7d223-146">Fehlerhafte Datensammlung</span><span class="sxs-lookup"><span data-stu-id="7d223-146">Failed Data Collection</span></span>  
 <span data-ttu-id="7d223-147">Wenn bei Datensammlungsereignissen des [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] -Hilfsprogramms ein Fehler auftritt, sollten Sie folgende Möglichkeiten in Betracht ziehen:</span><span class="sxs-lookup"><span data-stu-id="7d223-147">If [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] Utility data collection events fail, consider the following possibilities:</span></span>  
  
-   <span data-ttu-id="7d223-148">Ändern Sie keine Eigenschaften des Sammlungssatzes „Hilfsprogramminformationen“ in einer verwalteten Instanz von [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)], und aktivieren/deaktivieren Sie die Datensammlung nicht manuell, da die Datensammlung von einem Hilfsprogramm-Agentauftrag gesteuert wird.</span><span class="sxs-lookup"><span data-stu-id="7d223-148">Do not change any properties of the "Utility Information" collection set on a managed instance of [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)], and do not turn data collection on/off manually, as data collection is controlled by a Utility agent job.</span></span>  
  
-   <span data-ttu-id="7d223-149">Fehlgeschlagene oder nicht unterstützte WMI-Überprüfung.</span><span class="sxs-lookup"><span data-stu-id="7d223-149">Failed or unsupported WMI validation.</span></span> <span data-ttu-id="7d223-150">Weitere Informationen finden Sie im Abschnitt "Fehlgeschlagene WMI-Überprüfung" weiter oben in diesem Thema.</span><span class="sxs-lookup"><span data-stu-id="7d223-150">For more information, see the Failed WMI Validation section earlier in this topic.</span></span>  
  
-   <span data-ttu-id="7d223-151">Aktualisieren Sie Daten in der Listenansicht verwalteter Instanzen, da die Daten in den Blickpunkten des [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] -Hilfsprogramms nicht automatisch aktualisiert werden.</span><span class="sxs-lookup"><span data-stu-id="7d223-151">Refresh data in the managed instance list view, as data in [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] Utility viewpoints does not refresh automatically.</span></span> <span data-ttu-id="7d223-152">Um Daten zu aktualisieren, klicken Sie mit der rechten Maustaste auf den Knoten **Verwaltete Instanzen** im **Hilfsprogramm-Explorer** -Navigationsbereich und wählen dann **Aktualisieren**aus. Alternativ klicken Sie mit der rechten Maustaste in der Listenansicht auf den [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] -Instanznamen und wählen dann **Aktualisieren**aus.</span><span class="sxs-lookup"><span data-stu-id="7d223-152">To refresh data, right-click the **Managed Instances** node in the **Utility Explorer Navigation** pane, then select **Refresh**, or right-click on the [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] instance name in the list view, then select **Refresh**.</span></span> <span data-ttu-id="7d223-153">Nachdem eine Instanz von [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] bei einem UCP registriert wurde, kann es bis zu 30 Minuten dauern, bis die ersten Daten im Inhaltsbereich des Hilfsprogramm-Explorers im Dashboard und in den Blickpunkten angezeigt werden.</span><span class="sxs-lookup"><span data-stu-id="7d223-153">Note that after an instance of [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] has been enrolled with a UCP, it can take up to 30 minutes for data to first appear in the dashboard and viewpoints in the Utility Explorer content pane.</span></span>  
  
-   <span data-ttu-id="7d223-154">Verwenden Sie den SQL Server-Konfigurations-Manager, um zu überprüfen, ob die Instanz von [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="7d223-154">Use SQL Server Configuration Manager to verify that the instance of [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] is running.</span></span>  
  
-   <span data-ttu-id="7d223-155">Wenn die Datensammlung oder das Hochladen von Daten aufgrund von Timeoutproblemen scheitern, aktualisieren Sie die Funktion dbo.fn_sysutility_mi_get_collect_script() in der MSDB-Datenbank.</span><span class="sxs-lookup"><span data-stu-id="7d223-155">If data collection or data upload fail due to timeout issues, update the function dbo.fn_sysutility_mi_get_collect_script() in the MSDB database.</span></span> <span data-ttu-id="7d223-156">Fügen Sie insbesondere in der Funktion "Invoke-BulkCopyCommand()" die folgende Zeile hinzu:</span><span class="sxs-lookup"><span data-stu-id="7d223-156">Specifically, in the function "Invoke-BulkCopyCommand()" add line:</span></span>  
  
    ```
    $bulkCopy.BulkCopyTimeout=180  
    ```  
  
     <span data-ttu-id="7d223-157">Der Standard-Timeoutwert beträgt 30 Sekunden.</span><span class="sxs-lookup"><span data-stu-id="7d223-157">The default timeout value is 30 seconds.</span></span>  
  
-   <span data-ttu-id="7d223-158">Wenn die Instanz von [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] nicht gruppiert ist, überprüfen Sie, ob der [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] -Agent-Dienst ausgeführt wird und ob der Dienst für den automatischen Start auf dem UCP und in der verwalteten Instanz von [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)]eingerichtet wurde.</span><span class="sxs-lookup"><span data-stu-id="7d223-158">If the instance of [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] is not clustered, verify that the [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] Agent service is running and that the service is set to start automatically on the UCP and on the managed instance of [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)].</span></span>  
  
-   <span data-ttu-id="7d223-159">Überprüfen Sie, ob ein gültiges Konto verwendet wird, um die Datensammlung für die verwaltete Instanz von [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)]auszuführen.</span><span class="sxs-lookup"><span data-stu-id="7d223-159">Verify that a valid account is being used to run data collection on the managed instance of [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="7d223-160">Möglicherweise ist das Kennwort z. B. abgelaufen.</span><span class="sxs-lookup"><span data-stu-id="7d223-160">For example, the password may have expired.</span></span> <span data-ttu-id="7d223-161">Wenn das Proxykennwort abgelaufen ist, aktualisieren Sie die Kennwort-Anmeldeinformationen in SSMS wie folgt:</span><span class="sxs-lookup"><span data-stu-id="7d223-161">If the proxy password has expired, update password credentials in SSMS, as follows:</span></span>  
  
    1.  <span data-ttu-id="7d223-162">Erweitern Sie im **Objekt-Explorer**von SSMS den Knoten **Sicherheit** und dann den Knoten **Anmeldeinformationen** .</span><span class="sxs-lookup"><span data-stu-id="7d223-162">In SSMS **Object Explorer**, expand the **Security** node, then expand the **Credentials** node.</span></span>  
  
    2.  <span data-ttu-id="7d223-163">Klicken Sie mit der rechten Maustaste auf \*\*UtilityAgentProxyCredential_ \<GUID> \*\* und wählen Sie **Eigenschaften**aus.</span><span class="sxs-lookup"><span data-stu-id="7d223-163">Right-click on **UtilityAgentProxyCredential_\<GUID>** and select **Properties**.</span></span>  
  
    3.  <span data-ttu-id="7d223-164">Aktualisieren Sie im Dialogfeld Eigenschaften für Anmelde Informationen die Anmelde Informationen für **die \<GUID> UtilityAgentProxyCredential_** Anmelde Informationen nach Bedarf.</span><span class="sxs-lookup"><span data-stu-id="7d223-164">On the Credential Properties dialog, update credentials as necessary for the **UtilityAgentProxyCredential_\<GUID>** credential.</span></span>  
  
    4.  <span data-ttu-id="7d223-165">Klicken Sie auf **OK**, um die Änderung zu bestätigen.</span><span class="sxs-lookup"><span data-stu-id="7d223-165">Click **OK** to confirm the change.</span></span>  
  
-   <span data-ttu-id="7d223-166">TCP/IP muss für den UCP und die verwaltete Instanz von [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)]aktiviert sein.</span><span class="sxs-lookup"><span data-stu-id="7d223-166">TCP/IP should be enabled on the UCP and on the managed instance of [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="7d223-167">Aktivieren Sie TCP/IP über den [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] -Konfigurations-Manager.</span><span class="sxs-lookup"><span data-stu-id="7d223-167">Enable TCP/IP through [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] Configuration Manager.</span></span>  
  
-   <span data-ttu-id="7d223-168">Der SQL Server-Browserdienst auf dem UCP sollte gestartet werden und für den automatischen Start konfiguriert sein.</span><span class="sxs-lookup"><span data-stu-id="7d223-168">The SQL Server Browser service on the UCP should be started and configured to start automatically.</span></span> <span data-ttu-id="7d223-169">Wenn die Verwendung des SQL Server-Browserdiensts in Ihrer Organisation verhindert wird, führen Sie die folgenden Schritte aus, damit eine verwaltete Instanz von [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] eine Verbindung mit dem UCP herstellen kann:</span><span class="sxs-lookup"><span data-stu-id="7d223-169">If your organization prevents use of the SQL Server Browser service, use the following steps to allow a managed instance of [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] to connect to the UCP:</span></span>  
  
    1.  <span data-ttu-id="7d223-170">Klicken Sie in der Windows-Taskleiste der verwalteten Instanz von auf [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] **Start**, und klicken Sie dann auf **Ausführen**.</span><span class="sxs-lookup"><span data-stu-id="7d223-170">On the Windows taskbar on the managed instance of [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)], click **Start**, then click **Run...**.</span></span>  
  
    2.  <span data-ttu-id="7d223-171">Geben Sie im dafür vorgesehenen Feld **cliconfg.exe**ein, und klicken Sie auf OK.</span><span class="sxs-lookup"><span data-stu-id="7d223-171">Type "cliconfg.exe" in the space provided, then click **OK**.</span></span>  
  
    3.  <span data-ttu-id="7d223-172">Sobald Sie aufgefordert werden, die EXE-Datei für das SQL Server-Clientkonfigurationsprogramm zu starten, klicken Sie auf**Weiter**.</span><span class="sxs-lookup"><span data-stu-id="7d223-172">If prompted to allow "SQL Client Configuration Utility EXE" to start, click "**Continue**."</span></span>  
  
    4.  <span data-ttu-id="7d223-173">Wählen Sie im Dialogfeld **SQL Server Client-Netzwerk Hilfsprogramm** die Registerkarte **Alias** aus, und klicken Sie dann auf **hinzufügen.**</span><span class="sxs-lookup"><span data-stu-id="7d223-173">On the **SQL Server Client Network Utility** dialog box, select the **Alias** tab, then click **Add...**.</span></span>  
  
    5.  <span data-ttu-id="7d223-174">Im Dialogfeld **Netzwerkbibliothekskonfiguration hinzufügen** :</span><span class="sxs-lookup"><span data-stu-id="7d223-174">On the **Add Network Library Configuration** dialog box:</span></span>  
  
    6.  <span data-ttu-id="7d223-175">Geben Sie in der Liste der Netzwerkbibliotheken TCP/IP an.</span><span class="sxs-lookup"><span data-stu-id="7d223-175">Specify TCP/IP from the list of network libraries.</span></span>  
  
    7.  <span data-ttu-id="7d223-176">Geben Sie den **ComputerName\InstanceName** des UCPs im Textfeld Serveralias an.</span><span class="sxs-lookup"><span data-stu-id="7d223-176">Specify the ComputerName\InstanceName of the UCP in the **Server Alias** text box.</span></span>  
  
    8.  <span data-ttu-id="7d223-177">Geben Sie den **ComputerName** des UCPs im Textfeld Servername an.</span><span class="sxs-lookup"><span data-stu-id="7d223-177">Specify the ComputerName of the UCP in the **Server Name** text box.</span></span>  
  
    9. <span data-ttu-id="7d223-178">Deaktivieren Sie das Kontrollkästchen **Anschluss dynamisch bestimmen** .</span><span class="sxs-lookup"><span data-stu-id="7d223-178">Uncheck the **Dynamically determine port** checkbox.</span></span>  
  
    10. <span data-ttu-id="7d223-179">Geben Sie die Nummer des Anschlusses, an dem der UCP lauscht, im Textfeld **Anschlussnummer** an.</span><span class="sxs-lookup"><span data-stu-id="7d223-179">Specify the port number that the UCP is listening on in the **Port number** text box.</span></span>  
  
    11. <span data-ttu-id="7d223-180">Klicken Sie auf **OK** , um die Änderungen zu speichern.</span><span class="sxs-lookup"><span data-stu-id="7d223-180">Click **OK** to save your changes.</span></span>  
  
    12. <span data-ttu-id="7d223-181">Wiederholen Sie diese Schritte für jede verwaltete Instanz von [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] , die eine Verbindung mit einem UCP herstellt, auf dem der SQL Server-Browserdienst nicht aktiviert ist.</span><span class="sxs-lookup"><span data-stu-id="7d223-181">Repeat these steps for each managed instance of [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] that connects to a UCP where the SQL Server Browser service is not enabled.</span></span>  
  
-   <span data-ttu-id="7d223-182">Stellen Sie sicher, dass verwaltete Instanzen von [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] mit dem Netzwerk verbunden sind.</span><span class="sxs-lookup"><span data-stu-id="7d223-182">Ensure that managed instances of [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] are connected to the network.</span></span>  
  
-   <span data-ttu-id="7d223-183">Wenn Datenbanken mit dem gleichen Namen, aber unterschiedlichen Einstellungen im Hinblick auf die Berücksichtigung von Groß- und Kleinschreibung für eine verwaltete Instanz von [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)]vorhanden sind, kann die Datenauflistung fehlschlagen.</span><span class="sxs-lookup"><span data-stu-id="7d223-183">If there are databases with the same name but different case-sensitivity settings on a managed instance of [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)], the identification between the database and its viewpoints can be incorrect, resulting in failed data collection.</span></span> <span data-ttu-id="7d223-184">Eine Datenbank mit dem Namen "MYDATABASE" könnte z. B. Integritätszustände für eine Datenbank mit dem Namen "MYDATABASE" anzeigen.</span><span class="sxs-lookup"><span data-stu-id="7d223-184">For example, a database named "MYDATABASE" might show health states for a database named "MyDatabase".</span></span> <span data-ttu-id="7d223-185">Bei diesem Szenario wird kein Fehler generiert.</span><span class="sxs-lookup"><span data-stu-id="7d223-185">No error is generated in this scenario.</span></span> <span data-ttu-id="7d223-186">Die fehlgeschlagene Datensammlung kann auch für andere im UCP angezeigte Objekte aus Konflikten bei der Groß- und Kleinschreibung im UCP stammen, wie Datenbankdatei- und Dateigruppennamen.</span><span class="sxs-lookup"><span data-stu-id="7d223-186">Failed data collection can also result from case-sensitivity mismatches in other objects displayed in the UCP, like database file and file group names.</span></span>  
  
-   <span data-ttu-id="7d223-187">Wenn eine verwaltete Instanz von [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] auf einem Windows Server 2003-Computer gehostet wird, muss das [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] -Agent-Dienstkonto der Sicherheitsgruppe Systemmonitorbenutzer oder der lokalen Gruppe Administratoren angehören.</span><span class="sxs-lookup"><span data-stu-id="7d223-187">If a managed instance of [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] is hosted on a Windows Server 2003 computer, then the [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] Agent service account must belong to the Performance Monitor Users security group or the local Administrators group.</span></span> <span data-ttu-id="7d223-188">Andernfalls meldet die Datensammlung den Fehler, dass der Zugriff verweigert wurde.</span><span class="sxs-lookup"><span data-stu-id="7d223-188">Otherwise, data collection will fail with an access denied error.</span></span> <span data-ttu-id="7d223-189">Um der Sicherheitsgruppe der Systemmonitorbenutzer ein [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] -Agent-Dienstkonto hinzuzufügen, führen Sie die folgenden Schritte aus:</span><span class="sxs-lookup"><span data-stu-id="7d223-189">To add a [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] Agent service account to the Performance Monitor Users security group, use the following steps:</span></span>  
  
    1.  <span data-ttu-id="7d223-190">Erweitern Sie unter **Computerverwaltung**den Eintrag **Lokale Benutzer und Gruppen**, und klicken Sie dann auf **Gruppen**.</span><span class="sxs-lookup"><span data-stu-id="7d223-190">Open **Computer Management**, then **Local Users and Groups**, then **Groups**.</span></span>  
  
    2.  <span data-ttu-id="7d223-191">Klicken Sie mit der rechten Maustaste auf **Systemmonitorbenutzer** , und wählen Sie **Zur Gruppe hinzufügen**aus.</span><span class="sxs-lookup"><span data-stu-id="7d223-191">Right-click **Performance Monitor Users** and select **Add to Group**.</span></span>  
  
    3.  <span data-ttu-id="7d223-192">Klicken Sie auf **Hinzufügen**.</span><span class="sxs-lookup"><span data-stu-id="7d223-192">Click **Add**.</span></span>  
  
    4.  <span data-ttu-id="7d223-193">Geben Sie das Konto ein, unter dem der SQL Server-Agent-Dienst ausgeführt wird, und klicken Sie dann auf **OK**.</span><span class="sxs-lookup"><span data-stu-id="7d223-193">Enter the account that the SQL Server Agent service is running under, then click **OK**.</span></span>  
  
    5.  <span data-ttu-id="7d223-194">Wenn die Instanz von [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] bereits beim UCP registriert war, bevor der Benutzer dieser Gruppe hinzugefügt wurde, starten Sie den [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] -Agent-Dienst neu.</span><span class="sxs-lookup"><span data-stu-id="7d223-194">If the instance of [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] was already enrolled with the UCP before adding the user to this group, restart the [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] Agent service.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="7d223-195">Weitere Informationen</span><span class="sxs-lookup"><span data-stu-id="7d223-195">See Also</span></span>  
 <span data-ttu-id="7d223-196">[Funktionen und Tasks im SQL Server-Hilfsprogramm](../relational-databases/manage/sql-server-utility-features-and-tasks.md) </span><span class="sxs-lookup"><span data-stu-id="7d223-196">[SQL Server Utility Features and Tasks](../relational-databases/manage/sql-server-utility-features-and-tasks.md) </span></span>  
 [<span data-ttu-id="7d223-197">Fehlerbehebung für die SQL Server-Ressourcenintegrität &#40;SQL Server-Hilfsprogramm&#41;</span><span class="sxs-lookup"><span data-stu-id="7d223-197">Troubleshoot SQL Server Resource Health &#40;SQL Server Utility&#41;</span></span>](../relational-databases/manage/troubleshoot-sql-server-resource-health-sql-server-utility.md)
