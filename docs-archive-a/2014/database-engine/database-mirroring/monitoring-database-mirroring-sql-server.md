---
title: Überwachen der Datenbankspiegelung (SQL Server) | Microsoft-Dokumentation
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: high-availability
ms.topic: conceptual
helpviewer_keywords:
- monitoring [SQL Server], database mirroring
- database mirroring [SQL Server], monitoring
ms.assetid: a7b1b9b0-7c19-4acc-9de3-3a7c5e70694d
author: MikeRayMSFT
ms.author: mikeray
ms.openlocfilehash: 92179abd47df2ee40b48be8eade7ea3e7b9267af
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 08/04/2020
ms.locfileid: "87701864"
---
# <a name="monitoring-database-mirroring-sql-server"></a><span data-ttu-id="69f51-102">Überwachen der Datenbankspiegelung (SQL Server)</span><span class="sxs-lookup"><span data-stu-id="69f51-102">Monitoring Database Mirroring (SQL Server)</span></span>
  <span data-ttu-id="69f51-103">Dieser Abschnitt stellt den Datenbankspiegelungs-Monitor und die gespeicherten Prozeduren **sp_dbmmonitor** vor, erklärt die Funktionsweise der Überwachung von Datenbankspiegelungen (mit dem **Auftrag für den Datenbankspiegelungs-Monitor**) und bietet einen Überblick über die Informationen, die Sie im Zusammenhang mit Datenbankspiegelungssitzungen überwachen können.</span><span class="sxs-lookup"><span data-stu-id="69f51-103">This section introduces Database Mirroring Monitor and the **sp_dbmmonitor** system stored procedures, explains how database mirroring monitoring works (including the **Database Mirroring Monitor Job)**, and summarizes the information that you can monitor about database mirroring sessions.</span></span> <span data-ttu-id="69f51-104">Außerdem erläutert dieser Abschnitt das Definieren von Warnschwellenwerten für eine Reihe vordefinierter Datenbankspiegelungsereignisse sowie das Einrichten von Warnungen für jedes Datenbankspiegelungsereignis.</span><span class="sxs-lookup"><span data-stu-id="69f51-104">Additionally, this section introduces how to define warning thresholds for a set of predefined database mirroring events and how to set up alerts on any database mirroring event.</span></span>  
  
 <span data-ttu-id="69f51-105">Sie können eine gespiegelte Datenbank während einer Spiegelungssitzung überwachen, um zu überprüfen, ob und auf welche Weise ein Datenfluss stattfindet.</span><span class="sxs-lookup"><span data-stu-id="69f51-105">You can monitor a mirrored database during a mirroring session to verify whether and how well data is flowing.</span></span> <span data-ttu-id="69f51-106">Zum Einrichten und Verwalten der Überwachung für eine oder mehrere gespiegelte Datenbanken auf einer Serverinstanz können Sie entweder den Datenbanküberwachungs-Monitor oder die gespeicherten Systemprozeduren **sp_dbmmonitor** verwenden.</span><span class="sxs-lookup"><span data-stu-id="69f51-106">To set up and manage monitoring for one or more of the mirrored databases on a server instance, you can use either Database Mirroring Monitor or the **sp_dbmmonitor** system stored procedures.</span></span>  
  
 <span data-ttu-id="69f51-107">Der als **Auftrag für den Datenbankspiegelungs-Monitor**bezeichnete Auftrag für die Überwachung der Datenbankspiegelung wird unabhängig vom Datenbankspiegelungs-Monitor im Hintergrund ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="69f51-107">A database mirroring monitoring job, **Database Mirroring Monitor Job**, operates in the background, independently of Database Mirroring Monitor.</span></span> [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="69f51-108">-Agent ruft den **Auftrag für den Datenbankspiegelungs-Monitor** in regelmäßigen Intervallen auf (Standard ist einmal pro Minute), und der Auftrag ruft eine gespeicherte Prozedur auf, die den Spiegelstatus aktualisiert.</span><span class="sxs-lookup"><span data-stu-id="69f51-108">Agent calls **Database Mirroring Monitor Job** at regular intervals, the default is once a minute, and the job calls a stored procedure that updates mirroring status.</span></span> <span data-ttu-id="69f51-109">Wenn Sie [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] zum Starten einer Spiegelungssitzung verwenden, wird der **Auftrag für den Datenbankspiegelungs-Monitor** automatisch erstellt.</span><span class="sxs-lookup"><span data-stu-id="69f51-109">If you use [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] to start a mirroring session, **Database Mirroring Monitor Job** is created automatically.</span></span> <span data-ttu-id="69f51-110">Wenn Sie jedoch nur ALTER DATABASE *<Datenbankname>* SET PARTNER zum Starten der Spiegelung verwenden, müssen Sie den Auftrag erstellen, indem Sie eine gespeicherte Prozedur ausführen.</span><span class="sxs-lookup"><span data-stu-id="69f51-110">However, if you only use ALTER DATABASE *<database_name>* SET PARTNER to start mirroring, you must create the job by running a stored procedure.</span></span>  
  
 <span data-ttu-id="69f51-111">**In diesem Thema:**</span><span class="sxs-lookup"><span data-stu-id="69f51-111">**In this Topic:**</span></span>  
  
-   [<span data-ttu-id="69f51-112">Überwachen des Spiegelungsstatus</span><span class="sxs-lookup"><span data-stu-id="69f51-112">Monitoring Mirroring Status</span></span>](#MonitoringStatus)  
  
-   [<span data-ttu-id="69f51-113">Zusätzliche Informationsquellen zu gespiegelten Datenbanken</span><span class="sxs-lookup"><span data-stu-id="69f51-113">Additional Sources of Information About a Mirrored Database</span></span>](#AdditionalSources)  
  
-   [<span data-ttu-id="69f51-114">Verwandte Aufgaben</span><span class="sxs-lookup"><span data-stu-id="69f51-114">Related Tasks</span></span>](#RelatedTasks)  
  
##  <a name="monitoring-mirroring-status"></a><a name="MonitoringStatus"></a> <span data-ttu-id="69f51-115">Überwachen des Spiegelungsstatus</span><span class="sxs-lookup"><span data-stu-id="69f51-115">Monitoring Mirroring Status</span></span>  
 <span data-ttu-id="69f51-116">Zum Einrichten und Verwalten der Überwachung für eine oder mehrere gespiegelte Datenbanken auf einer Serverinstanz können Sie entweder den Datenbanküberwachungs-Monitor oder die gespeicherten Systemprozeduren von **dbmmonitor** verwenden.</span><span class="sxs-lookup"><span data-stu-id="69f51-116">To set up and manage monitoring for one or more of the mirrored databases on a server instance, you can use either Database Mirroring Monitor or the **dbmmonitor** system stored procedures.</span></span> <span data-ttu-id="69f51-117">Sie können eine gespiegelte Datenbank während einer Spiegelungssitzung überwachen, um zu überprüfen, ob und auf welche Weise ein Datenfluss stattfindet.</span><span class="sxs-lookup"><span data-stu-id="69f51-117">You can monitor a mirrored database during a mirroring session to verify whether and how well data is flowing.</span></span>  
  
 <span data-ttu-id="69f51-118">Die Überwachung einer gespiegelten Datenbank ermöglicht Ihnen insbesondere Folgendes:</span><span class="sxs-lookup"><span data-stu-id="69f51-118">Specifically, monitoring a mirrored database enables you to:</span></span>  
  
-   <span data-ttu-id="69f51-119">Überprüfen, ob die Spiegelung funktionsfähig ist.</span><span class="sxs-lookup"><span data-stu-id="69f51-119">Verify that mirroring is functioning.</span></span>  
  
     <span data-ttu-id="69f51-120">Aus dem Basisstatus erkennen Sie, ob die zwei Serverinstanzen in Betrieb sind, ob zwischen den Servern eine Verbindung besteht und ob das Protokoll vom Prinzipal auf den Spiegel verschoben wird.</span><span class="sxs-lookup"><span data-stu-id="69f51-120">Basic status includes knowing if the two server instances are up, that the servers are connected, and that the log is being moved from the principal to the mirror.</span></span>  
  
-   <span data-ttu-id="69f51-121">Bestimmen, ob die Spiegeldatenbank mit der Prinzipaldatenbank Schritt hält.</span><span class="sxs-lookup"><span data-stu-id="69f51-121">Determine whether the mirror database is keeping up with the principal database.</span></span>  
  
     <span data-ttu-id="69f51-122">Im Modus für hohe Leistung kann auf einem Prinzipalserver ein Rückstand von nicht gesendeten Protokolldatensätzen entstehen, die vom Prinzipalserver noch an den Spiegelserver gesendet werden müssen.</span><span class="sxs-lookup"><span data-stu-id="69f51-122">During high-performance mode, a principal server can develop a backlog of unsent log records that still need to be sent from the principal server to the mirror server.</span></span> <span data-ttu-id="69f51-123">In jedem Betriebsmodus kann zudem auf dem Spiegelserver ein Rückstand an noch nicht wiederhergestellten Protokolldatensätzen entstehen, die zwar bereits in die Protokolldatei geschrieben wurden, aber auf der Spiegeldatenbank noch wiederhergestellt werden müssen.</span><span class="sxs-lookup"><span data-stu-id="69f51-123">Furthermore, in any operating mode, the mirror server can develop a backlog of unrestored log records that have been written to the log file but still need to be restored on the mirror database.</span></span>  
  
-   <span data-ttu-id="69f51-124">Das Ausmaß an Datenverlusten bestimmen, wenn die Prinzipalserverinstanz während des Modus für hohe Leistung unverfügbar wird.</span><span class="sxs-lookup"><span data-stu-id="69f51-124">Determine how much data was lost when the principal server instance becomes unavailable during high-performance mode.</span></span>  
  
     <span data-ttu-id="69f51-125">Sie können den Datenverlust anhand des evtl. noch nicht gesendeten Transaktionsprotokollanteils und des Zeitintervalls ermitteln, in dem für die verlorenen Transaktionen auf dem Prinzipal ein Commit ausgeführt wurde.</span><span class="sxs-lookup"><span data-stu-id="69f51-125">You can determine data loss by looking at the amount of unsent transaction log (if any) and the time interval in which the lost transactions were committed at the principal.</span></span>  
  
-   <span data-ttu-id="69f51-126">Vergleichen der aktuellen Leistung mit der vergangenen Leistung.</span><span class="sxs-lookup"><span data-stu-id="69f51-126">Compare current performance with past performance.</span></span>  
  
     <span data-ttu-id="69f51-127">Bei Auftreten von Problemen kann ein Datenbankadministrator einen Verlauf der Spiegelungsleistung anzeigen lassen und dadurch u. U. die Ursache des aktuellen Status feststellen.</span><span class="sxs-lookup"><span data-stu-id="69f51-127">When problems are occurring, a database administrator can view a history of the mirroring performance to help in understanding the current state.</span></span> <span data-ttu-id="69f51-128">Ein Blick auf die Verlaufsdaten kann es dem Benutzer ermöglichen, Trends im Leistungsverhalten zu erkennen, Muster von Leistungsproblemen zu identifizieren (z. B. zu welchen Tageszeiten das Netzwerk langsam ist oder zu welchen Zeiten eine große Anzahl von Befehlen in das Protokoll geschrieben werden).</span><span class="sxs-lookup"><span data-stu-id="69f51-128">Looking at the history can allow the user to detect trends in performance, identify patterns of performance problems (such as times of day when the network is slow or the number of commands entering the log is very large).</span></span>  
  
-   <span data-ttu-id="69f51-129">Feststellen der Ursache eines reduzierten Datenflusses zwischen Spiegelungspartnern.</span><span class="sxs-lookup"><span data-stu-id="69f51-129">Troubleshoot the cause of reduced data flow between mirroring partners.</span></span>  
  
-   <span data-ttu-id="69f51-130">Festlegen von Warnungsschwellenwerten für Schlüsselleistungsmetriken.</span><span class="sxs-lookup"><span data-stu-id="69f51-130">Set warning thresholds on key performance metrics.</span></span>  
  
     <span data-ttu-id="69f51-131">Wenn eine neue Statuszeile einen Wert enthält, der einen Schwellenwert überschreitet, wird ein Informationsereignis an das Windows-Ereignisprotokoll gesendet.</span><span class="sxs-lookup"><span data-stu-id="69f51-131">If a new status row contains a value that exceeds a threshold, an informational event is sent to the Windows event log.</span></span> <span data-ttu-id="69f51-132">Ein Systemadministrator kann dann manuell Warnmeldungen basierend auf diesen Ereignissen konfigurieren.</span><span class="sxs-lookup"><span data-stu-id="69f51-132">A system administrator can then manually configure alerts based on these events.</span></span> <span data-ttu-id="69f51-133">Weitere Informationen finden Sie unter [Verwenden von Warnungsschwellenwerten und Warnmeldungen für Spiegelungsleistungsmetriken &#40;SQL Server&#41;](use-warning-thresholds-and-alerts-on-mirroring-performance-metrics-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="69f51-133">For more information, see [Use Warning Thresholds and Alerts on Mirroring Performance Metrics &#40;SQL Server&#41;](use-warning-thresholds-and-alerts-on-mirroring-performance-metrics-sql-server.md).</span></span>  
  
###  <a name="tools-for-monitoring-database-mirroring-status"></a><a name="tools_for_monitoring_dbm_status"></a> <span data-ttu-id="69f51-134">Tools zum Überwachen des Datenbank-Spiegelungsstatus</span><span class="sxs-lookup"><span data-stu-id="69f51-134">Tools for Monitoring Database Mirroring Status</span></span>  
 <span data-ttu-id="69f51-135">Der Status der Spiegelung kann entweder mithilfe des Datenbanküberwachungs-Monitors oder der gespeicherten Systemprozedur **sp_dbmmonitorresults** überwacht werden.</span><span class="sxs-lookup"><span data-stu-id="69f51-135">Mirroring status can be monitored using either Database Mirroring Monitor or the **sp_dbmmonitorresults** system stored procedure.</span></span> <span data-ttu-id="69f51-136">Mit diesen Tools können sowohl Systemadministratoren, d.h., Mitglieder der festen Serverrolle **sysadmin** , als auch Benutzer, die von einem Systemadministrator der festen Datenbankrolle **dbm_monitor** in der **msdb** -Datenbank hinzugefügt wurden, die Datenbankspiegelung für jede gespiegelte Datenbank auf der lokalen Serverinstanz überwachen.</span><span class="sxs-lookup"><span data-stu-id="69f51-136">These tools can be used to monitor database mirroring on any mirrored database on the local server instance by both System administrators, that is, members of the **sysadmin** fixed server role, and user who have been added to the **dbm_monitor** fixed database role in the **msdb** database by a system administrator.</span></span> <span data-ttu-id="69f51-137">Bei beiden Tools kann ein Systemadministrator den Spiegelungsstatus auch manuell aktualisieren.</span><span class="sxs-lookup"><span data-stu-id="69f51-137">When using either tool, a system administrator can also manually refresh mirroring status.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="69f51-138">Systemadministratoren können auch Warnungsschwellenwerte für wichtige Leistungsmetriken konfigurieren und anzeigen.</span><span class="sxs-lookup"><span data-stu-id="69f51-138">System administrators can also configure and view warning thresholds for key performance metrics.</span></span> <span data-ttu-id="69f51-139">Weitere Informationen finden Sie unter [Verwenden von Warnungsschwellenwerten und Warnmeldungen für Spiegelungsleistungsmetriken &#40;SQL Server&#41;](use-warning-thresholds-and-alerts-on-mirroring-performance-metrics-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="69f51-139">For more information, see [Use Warning Thresholds and Alerts on Mirroring Performance Metrics &#40;SQL Server&#41;](use-warning-thresholds-and-alerts-on-mirroring-performance-metrics-sql-server.md).</span></span>  
  
-   <span data-ttu-id="69f51-140">Datenbankspiegelungs-Monitor</span><span class="sxs-lookup"><span data-stu-id="69f51-140">Database Mirroring Monitor</span></span>  
  
     <span data-ttu-id="69f51-141">Der Datenbankspiegelungs-Monitor verfügt über eine grafische Benutzeroberfläche, mit der Systemadministratoren den Status anzeigen und aktualisieren können und für mehrere Schlüsselleistungsmetriken Warnungsschwellenwerte konfigurieren können.</span><span class="sxs-lookup"><span data-stu-id="69f51-141">Database Mirroring Monitor is a graphical user interface tool that enables system administrators to view and update status and to configure warning thresholds on several key performance metrics.</span></span> <span data-ttu-id="69f51-142">Der Datenbankspiegelungs-Monitor kann auch von Mitgliedern der festen Datenbankrolle **dbm_monitor** verwendet werden, um die jeweils neueste Zeile der Spiegelungsstatustabelle anzuzeigen. Die Statustabelle kann von diesen Benutzern jedoch nicht aktualisiert werden.</span><span class="sxs-lookup"><span data-stu-id="69f51-142">Database Mirroring Monitor can also be used by members of the **dbm_monitor** fixed database role to view the most recent row of the mirroring status table, though they cannot update the status table.</span></span>  
  
     <span data-ttu-id="69f51-143">Auf dem Monitor wird der Status einschließlich der Leistungsmetrik für eine ausgewählte Datenbank auf der Seite **Status** im Registerformat angezeigt.</span><span class="sxs-lookup"><span data-stu-id="69f51-143">The monitor displays the status, including performance metrics, for a selected database on the **Status** tabbed page.</span></span> <span data-ttu-id="69f51-144">Der Inhalt dieser Seite stammt sowohl von der Prinzipal- als auch von der Spiegelserverinstanz.</span><span class="sxs-lookup"><span data-stu-id="69f51-144">The content of this page comes from both the principal and mirror server instances.</span></span> <span data-ttu-id="69f51-145">Die Seite wird mit den Statusinformationen, die über jeweils separate Verbindungen zur Prinzipalserver- und Spiegelserverinstanz gesammelt werden, asynchron gefüllt.</span><span class="sxs-lookup"><span data-stu-id="69f51-145">The page is filled asynchronously as status is gathered through separate connections to the principal and mirror server instances.</span></span> <span data-ttu-id="69f51-146">Der Monitor versucht, die Statustabelle alle 30 Sekunden zu aktualisieren.</span><span class="sxs-lookup"><span data-stu-id="69f51-146">The monitor tries to update the status table at 30-second intervals.</span></span> <span data-ttu-id="69f51-147">Das Update ist nur dann erfolgreich, wenn die Tabelle nicht innerhalb von 15 Sekunden aktualisiert worden ist und der Benutzer ein Mitglied der festen Serverrolle **sysadmin** ist.</span><span class="sxs-lookup"><span data-stu-id="69f51-147">The update succeeds only if the table has not been updated within 15 seconds and the user is a member of the **sysadmin** fixed server role.</span></span> <span data-ttu-id="69f51-148">Eine Zusammenfassung der Informationen, die auf der Seite **Status** angegeben werden, finden Sie unter [Auf dem Datenbankspiegelungs-Monitor angezeigter Status](#perf_metrics_of_dbm_monitor)weiter unten in diesem Thema.</span><span class="sxs-lookup"><span data-stu-id="69f51-148">For a summary of the information reported on the **Status** page, see [Status Displayed by the Database Mirroring Monitor](#perf_metrics_of_dbm_monitor), later in this topic.</span></span>  
  
     <span data-ttu-id="69f51-149">Eine Einführung zur Benutzeroberfläche des Datenbankspiegelungs-Monitors finden Sie unter [Database Mirroring Monitor Overview](database-mirroring-monitor-overview.md).</span><span class="sxs-lookup"><span data-stu-id="69f51-149">For an introduction to the Database Mirroring Monitor interface, see [Database Mirroring Monitor Overview](database-mirroring-monitor-overview.md).</span></span> <span data-ttu-id="69f51-150">Informationen zum Starten des Datenbankspiegelungs-Monitors finden Sie unter [Starten des Datenbankspiegelungs-Monitors &#40;SQL Server Management Studio&#41;](../database-mirroring/start-database-mirroring-monitor-sql-server-management-studio.md).</span><span class="sxs-lookup"><span data-stu-id="69f51-150">For information on launching Database Mirroring Monitor, see [Start Database Mirroring Monitor &#40;SQL Server Management Studio&#41;](../database-mirroring/start-database-mirroring-monitor-sql-server-management-studio.md).</span></span>  
  
-   <span data-ttu-id="69f51-151">Gespeicherte Systemprozeduren</span><span class="sxs-lookup"><span data-stu-id="69f51-151">System stored procedures</span></span>  
  
     <span data-ttu-id="69f51-152">Sie können den aktuellen Status auch abrufen oder aktualisieren, indem Sie die gespeicherte Systemprozedur **sp_dbmmonitorresults** ausführen.</span><span class="sxs-lookup"><span data-stu-id="69f51-152">You can also retrieve or update the current status by running the **sp_dbmmonitorresults** system stored procedure.</span></span> <span data-ttu-id="69f51-153">Andere gespeicherte Prozeduren von dbmmonitor ermöglichen es Ihnen, die Überwachung einzurichten, Überwachungsparameter zu ändern, den aktuellen Updatezeitraum anzuzeigen sowie die Überwachung auf der Serverinstanz zu entfernen.</span><span class="sxs-lookup"><span data-stu-id="69f51-153">Other dbmmonitor stored procedures enable you to set up monitoring, change monitoring parameters, view the current update period, and drop monitoring on the server instance.</span></span>  
  
     <span data-ttu-id="69f51-154">In der folgenden Tabelle werden die gespeicherten Prozeduren vorgestellt, mit denen die Datenbankspiegelungsüberwachung unabhängig vom Datenbankspiegelungs-Monitor verwaltet und verwendet werden kann.</span><span class="sxs-lookup"><span data-stu-id="69f51-154">The following table introduces the stored procedures for managing and using database mirroring monitoring independently of the Database Mirroring Monitor.</span></span>  
  
    |<span data-ttu-id="69f51-155">Verfahren</span><span class="sxs-lookup"><span data-stu-id="69f51-155">Procedure</span></span>|<span data-ttu-id="69f51-156">BESCHREIBUNG</span><span class="sxs-lookup"><span data-stu-id="69f51-156">Description</span></span>|  
    |---------------|-----------------|  
    |[<span data-ttu-id="69f51-157">sp_dbmmonitoraddmonitoring</span><span class="sxs-lookup"><span data-stu-id="69f51-157">sp_dbmmonitoraddmonitoring</span></span>](/sql/relational-databases/system-stored-procedures/sp-dbmmonitoraddmonitoring-transact-sql)|<span data-ttu-id="69f51-158">Erstellt einen Auftrag, mit dem in regelmäßigen Abständen die Statusinformationen für jede gespiegelte Datenbank auf der Serverinstanz aktualisiert werden.</span><span class="sxs-lookup"><span data-stu-id="69f51-158">Creates a job that periodically updates the status information for every mirrored database on the server instance.</span></span>|  
    |[<span data-ttu-id="69f51-159">sp_dbmmonitorchangemonitoring</span><span class="sxs-lookup"><span data-stu-id="69f51-159">sp_dbmmonitorchangemonitoring</span></span>](/sql/relational-databases/system-stored-procedures/sp-dbmmonitorchangemonitoring-transact-sql)|<span data-ttu-id="69f51-160">Ändert den Wert eines Parameters für die Datenbank-Spiegelungsüberwachung.</span><span class="sxs-lookup"><span data-stu-id="69f51-160">Changes the value of a database mirroring monitoring parameter.</span></span>|  
    |[<span data-ttu-id="69f51-161">sp_dbmmonitorhelpmonitoring</span><span class="sxs-lookup"><span data-stu-id="69f51-161">sp_dbmmonitorhelpmonitoring</span></span>](/sql/relational-databases/system-stored-procedures/sp-dbmmonitorhelpmonitoring-transact-sql)|<span data-ttu-id="69f51-162">Gibt den aktuellen Updatezeitraum zurück.</span><span class="sxs-lookup"><span data-stu-id="69f51-162">Returns the current update period.</span></span>|  
    |[<span data-ttu-id="69f51-163">sp_dbmmonitorresults</span><span class="sxs-lookup"><span data-stu-id="69f51-163">sp_dbmmonitorresults</span></span>](/sql/relational-databases/system-stored-procedures/sp-dbmmonitorresults-transact-sql)|<span data-ttu-id="69f51-164">Gibt Statuszeilen für eine überwachte Datenbank zurück. Außerdem können Sie damit festlegen, ob die Prozedur den neuesten Status vorzeitig abrufen soll.</span><span class="sxs-lookup"><span data-stu-id="69f51-164">Returns status rows for a monitored database and allows you to choose whether the procedure obtains the latest status beforehand.</span></span>|  
    |[<span data-ttu-id="69f51-165">sp_dbmmonitordropmonitoring</span><span class="sxs-lookup"><span data-stu-id="69f51-165">sp_dbmmonitordropmonitoring</span></span>](/sql/relational-databases/system-stored-procedures/sp-dbmmonitordropmonitoring-transact-sql)|<span data-ttu-id="69f51-166">Beendet und löscht den Auftrag für den Datenbankspiegelungs-Monitor für alle Datenbanken auf der Serverinstanz.</span><span class="sxs-lookup"><span data-stu-id="69f51-166">Stops and deletes the mirroring monitor job for all the databases on the server instance.</span></span>|  
  
     <span data-ttu-id="69f51-167">Die gespeicherten Systemprozeduren von **dbmmonitor** können als Zusatz zum Datenbankspiegelungs-Monitor verwendet werden</span><span class="sxs-lookup"><span data-stu-id="69f51-167">The **dbmmonitor** system stored procedures can be used as an adjunct to the Database Mirroring Monitor.</span></span> <span data-ttu-id="69f51-168">So kann z.B. der Status auch dann mit dem Datenbankspiegelungs-Monitor angezeigt werden, wenn die Überwachung mit **sp_dbmmonitoraddmonitoring**konfiguriert wurde.</span><span class="sxs-lookup"><span data-stu-id="69f51-168">For example, even if monitoring was configured using **sp_dbmmonitoraddmonitoring**, Database Mirroring Monitor can be used to view the status.</span></span>  
  
### <a name="how-monitoring-works"></a><span data-ttu-id="69f51-169">Funktionsweise der Überwachung</span><span class="sxs-lookup"><span data-stu-id="69f51-169">How Monitoring Works</span></span>  
 <span data-ttu-id="69f51-170">Dieser Abschnitt enthält Erläuterungen zur Datenbank-Spiegelungsstatustabelle, zum Auftrag für den Datenbankspiegelungs-Monitor sowie zum Datenbankspiegelungs-Monitor. Sie erfahren außerdem, wie Benutzer den Status der Datenbankspiegelung überwachen können und wie der Überwachungsauftrag gelöscht werden kann.</span><span class="sxs-lookup"><span data-stu-id="69f51-170">This section introduces the database mirroring status table, database mirroring monitor job and the monitor, how users can monitor database mirroring status, and how the monitoring job can be dropped.</span></span>  
  
#### <a name="database-mirroring-status-table"></a><span data-ttu-id="69f51-171">Datenbank-Spiegelungsstatustabelle</span><span class="sxs-lookup"><span data-stu-id="69f51-171">Database Mirroring Status Table</span></span>  
 <span data-ttu-id="69f51-172">Der Datenbank-Spiegelungsstatus wird in einer internen, nicht dokumentierten Datenbank-Spiegelungsstatustabelle in der **msdb** -Datenbank gespeichert.</span><span class="sxs-lookup"><span data-stu-id="69f51-172">Database mirroring status is stored in an internal, undocumented database mirroring status table in the **msdb** database.</span></span> <span data-ttu-id="69f51-173">Diese Statustabelle wird automatisch erstellt, wenn der Spiegelungsstatus zum ersten Mal auf der Serverinstanz aktualisiert wird.</span><span class="sxs-lookup"><span data-stu-id="69f51-173">This status table is automatically created the first time the mirroring status is updated on the server instance.</span></span>  
  
 <span data-ttu-id="69f51-174">Die Statustabelle kann entweder automatisch aktualisiert werden oder manuell von einem Systemadministrator unter Einhaltung eines Mindestupdateintervalls von 15 Sekunden.</span><span class="sxs-lookup"><span data-stu-id="69f51-174">The status table may be updated either automatically or manually by a system administrator, with a minimum update interval of 15 seconds.</span></span> <span data-ttu-id="69f51-175">Durch das Minimum von 15 Sekunden wird verhindert, dass Serverinstanzen mit Statusanforderungen überlastet werden.</span><span class="sxs-lookup"><span data-stu-id="69f51-175">The 15 second minimum prevents server instances from being overloaded with status requests.</span></span>  
  
 <span data-ttu-id="69f51-176">Die Statustabelle wird automatisch sowohl vom Datenbankspiegelungs-Monitor als auch vom Auftrag für den Datenbankspiegelungs-Monitor aktualisiert, sofern dieser ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="69f51-176">The status table is updated automatically by both Database Mirroring Monitor and the database mirroring monitor job, if running.</span></span> <span data-ttu-id="69f51-177">Der**Auftrag für den Datenbankspiegelungs-Monitor** aktualisiert die Tabelle standardmäßig einmal pro Minute (ein Systemadministrator kann einen Updatezeitraum zwischen 1 und 120 Minuten angeben).</span><span class="sxs-lookup"><span data-stu-id="69f51-177">**Database Mirroring Monitor Job** updates the table once a minute by default (a system administrator can specify an update period of 1 to 120 minutes).</span></span> <span data-ttu-id="69f51-178">Der Datenbankspiegelungs-Monitor hingegen aktualisiert die Tabelle automatisch alle 30 Sekunden.</span><span class="sxs-lookup"><span data-stu-id="69f51-178">Database Mirroring Monitor, in contrast, updates the table automatically every 30 seconds.</span></span> <span data-ttu-id="69f51-179">Für diese Updates rufen der **Auftrag für den Datenbankspiegelungs-Monitor** und der Datenbankspiegelungs-Monitor die Prozedur **sp_dbmmonitorupdate**auf.</span><span class="sxs-lookup"><span data-stu-id="69f51-179">For these updates, **Database Mirroring Monitor Job** and Database Mirroring Monitor call **sp_dbmmonitorupdate**.</span></span>  
  
 <span data-ttu-id="69f51-180">Bei der ersten Ausführung von **sp_dbmmonitorupdate** werden die Tabelle des **Datenbankspiegelungsstatus** und die feste Datenbankrolle **dbm_monitor** in der **msdb** -Datenbank erstellt.</span><span class="sxs-lookup"><span data-stu-id="69f51-180">The first time **sp_dbmmonitorupdate** runs, it creates the **database mirroring status** table and the **dbm_monitor** fixed database role in the **msdb** database.</span></span> <span data-ttu-id="69f51-181">Mit**sp_dbmmonitorupdate** wird der Spiegelungsstatus in der Regel durch Einfügen einer neuen Zeile in die Statustabelle für jede gespiegelte Datenbank auf der Serverinstanz aktualisiert. Weitere Informationen hierzu finden Sie unter „Datenbank-Spiegelungsstatustabelle“ weiter unten in diesem Thema.</span><span class="sxs-lookup"><span data-stu-id="69f51-181">**sp_dbmmonitorupdate** usually updates the mirroring status by inserting a new row into the status table for every mirrored database on the server instance; for more information, see "Database Mirroring Status Table," later in this topic.</span></span> <span data-ttu-id="69f51-182">Diese Prozedur wertet außerdem die Leistungsmetrik in den neuen Zeilen aus und entfernt Zeilen, die älter sind als die aktuelle Beibehaltungsdauer (die Standardeinstellung ist 7 Tage).</span><span class="sxs-lookup"><span data-stu-id="69f51-182">This procedure also evaluates the performance metrics in the new rows and truncates rows older than the current retention period (the default is 7 days).</span></span> <span data-ttu-id="69f51-183">Weitere Informationen finden Sie unter [sp_dbmmonitorupdate &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-dbmmonitorupdate-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="69f51-183">For more information, see [sp_dbmmonitorupdate &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-dbmmonitorupdate-transact-sql).</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="69f51-184">Sofern der Datenbankspiegelungs-Monitor nicht aktuell von einem Mitglied der festen Serverrolle **sysadmin** verwendet wird, erfolgt eine automatische Aktualisierung der Statustabelle nur dann, wenn der **Auftrag für den Datenbankspiegelungs-Monitor** vorhanden ist und der [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] -Agent ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="69f51-184">Unless Database Mirroring Monitor is currently being used by a member of the **sysadmin** fixed server role, the status table is automatically updated only if the **Database Mirroring Monitor Job** exists and [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent is running.</span></span>  
  
#### <a name="database-mirroring-monitor-job"></a><span data-ttu-id="69f51-185">Auftrag für den Datenbankspiegelungs-Monitor</span><span class="sxs-lookup"><span data-stu-id="69f51-185">Database Mirroring Monitor Job</span></span>  
 <span data-ttu-id="69f51-186">Der als **Auftrag für den Datenbankspiegelungs-Monitor**bezeichnete Auftrag für die Überwachung der Datenbankspiegelung arbeitet unabhängig vom Datenbankspiegelungs-Monitor.</span><span class="sxs-lookup"><span data-stu-id="69f51-186">The database mirroring monitoring job, **Database Mirroring Monitor Job**, operates independently of Database Mirroring Monitor.</span></span> <span data-ttu-id="69f51-187">Der**Auftrag für den Datenbankspiegelungs-Monitor** wird nur dann automatisch erstellt, wenn eine Spiegelungssitzung mithilfe von [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] gestartet wird.</span><span class="sxs-lookup"><span data-stu-id="69f51-187">**Database Mirroring Monitor Job** is created automatically only if [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] is used to start a mirroring session.</span></span> <span data-ttu-id="69f51-188">Wenn zum Starten der Spiegelung immer die ALTER DATABASE *Datenbankname* SET PARTNER-Befehle verwendet werden, ist der Auftrag nur dann vorhanden, wenn der Systemadministrator die gespeicherte Prozedur **sp_dbmmonitoraddmonitoring** ausführt.</span><span class="sxs-lookup"><span data-stu-id="69f51-188">If ALTER DATABASE *database_name* SET PARTNER commands are always used to start mirroring, the job exists only if the system administrator runs the **sp_dbmmonitoraddmonitoring** stored procedure.</span></span>  
  
 <span data-ttu-id="69f51-189">Nachdem der **Auftrag für den Datenbankspiegelungs-Monitor** erstellt wurde und vorausgesetzt, dass der [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] -Agent ausgeführt wird, wird der Auftrag standardmäßig einmal pro Minute aufgerufen.</span><span class="sxs-lookup"><span data-stu-id="69f51-189">After **Database Mirroring Monitor Job** is created, assuming that [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent is running, the job is called once a minute, by default.</span></span> <span data-ttu-id="69f51-190">Der Auftrag ruft dann die gespeicherte Systemprozedur **sp_dbmmonitorupdate** auf.</span><span class="sxs-lookup"><span data-stu-id="69f51-190">The job then calls the **sp_dbmmonitorupdate** system stored procedure.</span></span>  
  
 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="69f51-191">-Agent ruft den **Auftrag für den Datenbankspiegelungs-Monitor** standardmäßig einmal pro Minute auf, und der Auftrag ruft seinerseits **sp_dbmmonitorupdate** auf, um die Statustabelle zu aktualisieren.</span><span class="sxs-lookup"><span data-stu-id="69f51-191">Agent calls **Database Mirroring Monitor Job** once a minute, by default, and the job calls **sp_dbmmonitorupdate** to update the status table.</span></span> <span data-ttu-id="69f51-192">Systemadministratoren können den Updatezeitraum mithilfe der gespeicherten Systemprozedur **sp_dbmmonitorchangemonitoring** aktualisieren. Sie können außerdem mit der gespeicherten Systemprozedur **sp_dbmmonitorchangemonitoring** den aktuellen Updatezeitraum anzeigen lassen.</span><span class="sxs-lookup"><span data-stu-id="69f51-192">System administrators can change the update period by using the **sp_dbmmonitorchangemonitoring** system stored procedure, and they can view the current update period by using the **sp_dbmmonitorchangemonitoring** system stored procedure.</span></span> <span data-ttu-id="69f51-193">Weitere Informationen finden Sie unter [sp_dbmmonitoraddmonitoring &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-dbmmonitoraddmonitoring-transact-sql) und [sp_dbmmonitorchangemonitoring &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-dbmmonitorchangemonitoring-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="69f51-193">For more information, see [sp_dbmmonitoraddmonitoring &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-dbmmonitoraddmonitoring-transact-sql) and [sp_dbmmonitorchangemonitoring &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-dbmmonitorchangemonitoring-transact-sql).</span></span>  
  
#### <a name="monitoring-database-mirroring-status-by-system-administrators"></a><span data-ttu-id="69f51-194">Überwachen des Datenbank-Spiegelungsstatus (durch Systemadministratoren)</span><span class="sxs-lookup"><span data-stu-id="69f51-194">Monitoring Database Mirroring Status (by System Administrators)</span></span>  
 <span data-ttu-id="69f51-195">Mitglieder der festen Serverrolle **sysadmin** können die Statustabelle anzeigen und aktualisieren.</span><span class="sxs-lookup"><span data-stu-id="69f51-195">Members of the **sysadmin** fixed server role can view and update the status table</span></span>  
  
-   <span data-ttu-id="69f51-196">Verwenden des Datenbankspiegelungs-Monitors</span><span class="sxs-lookup"><span data-stu-id="69f51-196">Using Database Mirroring Monitor</span></span>  
  
     <span data-ttu-id="69f51-197">Mit dem Datenbankspiegelungs-Monitor kann ein Systemadministrator manuell die Seite **Status** , die Navigationsstruktur oder die Seite **Verlauf** aktualisieren.</span><span class="sxs-lookup"><span data-stu-id="69f51-197">When using Database Mirroring Monitor, a system administrator can manually refresh the **Status** page, navigation tree, or **History** page.</span></span> <span data-ttu-id="69f51-198">Dabei wird auch die Statustabelle aktualisiert, sofern sie nicht innerhalb der vorhergehenden 15 Sekunden bereits aktualisiert wurde.</span><span class="sxs-lookup"><span data-stu-id="69f51-198">This also updates the status table, unless it has already been updated within the previous 15 seconds.</span></span>  
  
     <span data-ttu-id="69f51-199">Der Systemadministrator kann auch über die Schaltfläche **Verlauf** für eine Serverinstanz (auf der Seite **Status** ) den Verlauf des Spiegelungsstatus auf einer bestimmten Serverinstanz anzeigen.</span><span class="sxs-lookup"><span data-stu-id="69f51-199">To view the history of mirroring status on a given server instance, the system administrator can also click the **History** button for a server instance (on the **Status** page).</span></span> <span data-ttu-id="69f51-200">Der Verlauf wird im Dialogfeld **Datenbankspiegelungsverlauf** angezeigt.</span><span class="sxs-lookup"><span data-stu-id="69f51-200">The history is displayed in the **Database Mirroring History** dialog box.</span></span> <span data-ttu-id="69f51-201">Hier kann der Systemadministrator alle oder auch nur einen Teil der Zeilen in der Statustabelle der Serverinstanz einsehen.</span><span class="sxs-lookup"><span data-stu-id="69f51-201">There, the system administrator can view some or all of the rows in the status table of the server instance.</span></span>  
  
     <span data-ttu-id="69f51-202">Informationen zu den Metriken auf der Seite **Status** finden Sie unter "Vom Datenbankspiegelungs-Monitor angezeigte Leistungsmetriken" weiter unten in diesem Thema.</span><span class="sxs-lookup"><span data-stu-id="69f51-202">For information about the **Status** page metrics, see Performance Metrics Displayed by the "Database Mirroring Monitor," later in this topic.</span></span>  
  
-   <span data-ttu-id="69f51-203">Verwenden von **sp_dbmmonitorresults**</span><span class="sxs-lookup"><span data-stu-id="69f51-203">Using **sp_dbmmonitorresults**</span></span>  
  
     <span data-ttu-id="69f51-204">Systemadministratoren können mit der gespeicherten Systemprozedur **sp_dbmmonitorresults** die Statustabelle anzeigen und bei Bedarf aktualisieren, sofern sie nicht in den vorhergehenden 15 Sekunden aktualisiert wurde.</span><span class="sxs-lookup"><span data-stu-id="69f51-204">System administrators can use the **sp_dbmmonitorresults** system stored procedure to view and, optionally, to update the status table, if it has not been updated within the previous 15 seconds.</span></span> <span data-ttu-id="69f51-205">Diese Prozedur ruft die **sp_dbmmonitorupdate** -Prozedur auf und gibt, abhängig von der im Prozeduraufruf angeforderten Menge, eine oder mehrere Verlaufszeilen zurück.</span><span class="sxs-lookup"><span data-stu-id="69f51-205">This procedure calls the **sp_dbmmonitorupdate** procedure and returns one or more history rows, depending on the amount requested in the procedure call.</span></span> <span data-ttu-id="69f51-206">Informationen zu dem in den Resultsets angezeigten Status finden Sie unter [sp_dbmmonitorresults &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-dbmmonitorresults-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="69f51-206">For information about the status in its results set, see [sp_dbmmonitorresults &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-dbmmonitorresults-transact-sql).</span></span>  
  
#### <a name="monitoring-database-mirroring-status-by-dbm_monitor-members"></a><span data-ttu-id="69f51-207">Überwachen des Datenbankspiegelungs-Status (durch dbm_monitor Members)</span><span class="sxs-lookup"><span data-stu-id="69f51-207">Monitoring Database Mirroring Status (by dbm_monitor Members)</span></span>  
 <span data-ttu-id="69f51-208">Wie bereits erwähnt, wird beim ersten Ausführen von **sp_dbmmonitorupdate** die feste Datenbankrolle **dbm_monitor** in der **msdb** -Datenbank erstellt.</span><span class="sxs-lookup"><span data-stu-id="69f51-208">As mentioned, the first time **sp_dbmmonitorupdate** runs, it creates the **dbm_monitor** fixed database role in the **msdb** database.</span></span> <span data-ttu-id="69f51-209">Mitglieder der festen Datenbankrolle **dbm_monitor** können den vorhandenen Spiegelungsstatus entweder mithilfe des Datenbankspiegelungs-Monitors oder der gespeicherten Prozedur **sp_dbmmonitorresults** anzeigen.</span><span class="sxs-lookup"><span data-stu-id="69f51-209">Members of the **dbm_monitor** fixed database role can view the existing mirroring status by using either Database Mirroring Monitor or the **sp_dbmmonitorresults** stored procedure.</span></span> <span data-ttu-id="69f51-210">Diese Benutzer können jedoch nicht die Statustabelle aktualisieren.</span><span class="sxs-lookup"><span data-stu-id="69f51-210">But these users cannot update the status table.</span></span> <span data-ttu-id="69f51-211">Das Alter des angezeigten Status kann ein Benutzer in den Bezeichnungen **Prinzipal Protokoll ( ***\<time>*** )** und **Spiegelungs Protokoll ( ***\<time>*** )** auf der Seite **Status** sehen.</span><span class="sxs-lookup"><span data-stu-id="69f51-211">To learn the age of the displayed status a user can look at the times in the **Principal log (***\<time>***)** and **Mirror log (***\<time>***)** labels on the **Status** page.</span></span>  
  
 <span data-ttu-id="69f51-212">Für Mitglieder der festen Datenbankrolle **dbm_monitor** wird die Statustabelle über den **Auftrag für den Datenbankspiegelungs-Monitor** in regelmäßigen Intervallen aktualisiert.</span><span class="sxs-lookup"><span data-stu-id="69f51-212">Members of the **dbm_monitor** fixed database role depend on the **Database Mirroring Monitor Job** to update the status table at regular intervals.</span></span> <span data-ttu-id="69f51-213">Wenn der Auftrag nicht vorhanden ist oder der [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] -Agent beendet wird, veraltet der Status zunehmend und gibt möglicherweise nicht mehr die Konfiguration der Spiegelungssitzung wieder.</span><span class="sxs-lookup"><span data-stu-id="69f51-213">If the job does not exist or [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent is stopped, the status becomes increasingly stale and may no longer reflect the configuration of the mirroring session.</span></span> <span data-ttu-id="69f51-214">So kann z. B. nach einem Failover fälschlicherweise angezeigt werden, dass die Partner dieselbe Rolle haben (Prinzipal oder Spiegel), oder der aktuelle Prinzipalserver wird als Spiegel angezeigt, während der aktuelle Spiegelserver als Prinzipal angezeigt wird.</span><span class="sxs-lookup"><span data-stu-id="69f51-214">For example, after a failover, the partners might appear to share the same role-principal or mirror, or the current principal server might be shown as the mirror, while the current mirror server is shown as the principal.</span></span>  
  
#### <a name="dropping-the-database-mirroring-monitor-job"></a><span data-ttu-id="69f51-215">Löschen des Auftrags für den Datenbankspiegelungs-Monitor</span><span class="sxs-lookup"><span data-stu-id="69f51-215">Dropping the Database Mirroring Monitor Job</span></span>  
 <span data-ttu-id="69f51-216">Der als **Auftrag für den Datenbankspiegelungs-Monitor**bezeichnete Auftrag für die Überwachung der Datenbankspiegelung bleibt so lange bestehen, bis er gelöscht wird.</span><span class="sxs-lookup"><span data-stu-id="69f51-216">The database mirroring monitor job, **Database Mirroring Monitor Job**, remains until it is dropped.</span></span> <span data-ttu-id="69f51-217">Der Überwachungsauftrag muss vom Systemadministrator verwaltet werden.</span><span class="sxs-lookup"><span data-stu-id="69f51-217">The monitoring job must be managed by the system administrator.</span></span> <span data-ttu-id="69f51-218">Der **Auftrag für den Datenbankspiegelungs-Monitor**kann mit **sp_dbmmonitordropmonitoring**gelöscht werden.</span><span class="sxs-lookup"><span data-stu-id="69f51-218">To drop **Database Mirroring Monitor Job**, use **sp_dbmmonitordropmonitoring**.</span></span> <span data-ttu-id="69f51-219">Weitere Informationen finden Sie unter [sp_dbmmonitordropmonitoring &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-dbmmonitordropmonitoring-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="69f51-219">For more information, see [sp_dbmmonitordropmonitoring &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-dbmmonitordropmonitoring-transact-sql).</span></span>  
  
###  <a name="status-displayed-by-the-database-mirroring-monitor"></a><a name="perf_metrics_of_dbm_monitor"></a> <span data-ttu-id="69f51-220">Auf dem Datenbankspiegelungs-Monitor angezeigter Status</span><span class="sxs-lookup"><span data-stu-id="69f51-220">Status Displayed by the Database Mirroring Monitor</span></span>  
 <span data-ttu-id="69f51-221">Auf der Seite **Status** des Datenbankspiegelungs-Monitors werden die Partner beschrieben sowie der Status der Spiegelungssitzung.</span><span class="sxs-lookup"><span data-stu-id="69f51-221">The **Status** page of the Database Mirroring Monitor describes the partners, and also the state of the mirroring session.</span></span> <span data-ttu-id="69f51-222">Der Status umfasst Werte der Leistungsmetrik, z. B. den Zustand des Transaktionsprotokolls und weitere Informationen, mit denen gegenwärtig die Zeit zum Abschließen eines Failovers und die Gefahr des Datenverlusts abgeschätzt werden kann, wenn die Sitzung nicht synchronisiert wird.</span><span class="sxs-lookup"><span data-stu-id="69f51-222">The status includes performance metrics such as the state of the transaction log and other information that is intended to help currently estimate the time required to complete a failover and the potential of data loss, if the session is not synchronized.</span></span> <span data-ttu-id="69f51-223">Zusätzlich enthält die Seite **Status** Angaben zum Status der Spiegelungssitzung sowie allgemeine Sitzungsinformationen.</span><span class="sxs-lookup"><span data-stu-id="69f51-223">In addition, the **Status** page displays status and information about the mirroring session in general.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="69f51-224">Eine Einführung zum Datenbankspiegelungs-Monitor und zur Seite **Status** finden Sie unter [Tools zum Überwachen des Datenbank-Spiegelungsstatus](#tools_for_monitoring_dbm_status)weiter oben in diesem Thema.</span><span class="sxs-lookup"><span data-stu-id="69f51-224">For an introduction to the Database Mirroring Monitor and **Status** page, see [Tools for Monitoring Database Mirroring Status](#tools_for_monitoring_dbm_status), earlier in this topic.</span></span>  
  
 <span data-ttu-id="69f51-225">Die jeweiligen bereitgestellten Informationen werden in den folgenden Abschnitten zusammengefasst.</span><span class="sxs-lookup"><span data-stu-id="69f51-225">The information provided for each of these is summarized in the following sections.</span></span>  
  
#### <a name="partners"></a><span data-ttu-id="69f51-226">Partner</span><span class="sxs-lookup"><span data-stu-id="69f51-226">Partners</span></span>  
 <span data-ttu-id="69f51-227">Auf der Seite **Status** werden für jeden der Partner die folgenden Informationen angezeigt:</span><span class="sxs-lookup"><span data-stu-id="69f51-227">The **Status** page displays the following information for each of the partners:</span></span>  
  
-   <span data-ttu-id="69f51-228">Serverinstanz</span><span class="sxs-lookup"><span data-stu-id="69f51-228">Server instance</span></span>  
  
     <span data-ttu-id="69f51-229">Name der Serverinstanz, deren Status in der Zeile **Status** angezeigt wird.</span><span class="sxs-lookup"><span data-stu-id="69f51-229">Name of the server instance whose status is displayed in the **Status** row.</span></span>  
  
-   <span data-ttu-id="69f51-230">Aktuelle Rolle</span><span class="sxs-lookup"><span data-stu-id="69f51-230">Current role</span></span>  
  
     <span data-ttu-id="69f51-231">Aktuelle Rolle der Serverinstanz.</span><span class="sxs-lookup"><span data-stu-id="69f51-231">Current role of the server instance.</span></span> <span data-ttu-id="69f51-232">Mögliche Zustandswerte:</span><span class="sxs-lookup"><span data-stu-id="69f51-232">The possible states are:</span></span>  
  
    -   <span data-ttu-id="69f51-233">Prinzipal</span><span class="sxs-lookup"><span data-stu-id="69f51-233">Principal</span></span>  
  
    -   <span data-ttu-id="69f51-234">Spiegel</span><span class="sxs-lookup"><span data-stu-id="69f51-234">Mirror</span></span>  
  
-   <span data-ttu-id="69f51-235">Spiegelungsstatus</span><span class="sxs-lookup"><span data-stu-id="69f51-235">Mirroring state</span></span>  
  
     <span data-ttu-id="69f51-236">Mögliche Zustandswerte:</span><span class="sxs-lookup"><span data-stu-id="69f51-236">The possible states are:</span></span>  
  
    -   <span data-ttu-id="69f51-237">Unknown</span><span class="sxs-lookup"><span data-stu-id="69f51-237">Unknown</span></span>  
  
    -   <span data-ttu-id="69f51-238">Wird synchronisiert</span><span class="sxs-lookup"><span data-stu-id="69f51-238">Synchronizing</span></span>  
  
    -   <span data-ttu-id="69f51-239">Synchronisiert</span><span class="sxs-lookup"><span data-stu-id="69f51-239">Synchronized</span></span>  
  
    -   <span data-ttu-id="69f51-240">Ausgesetzt</span><span class="sxs-lookup"><span data-stu-id="69f51-240">Suspended</span></span>  
  
    -   <span data-ttu-id="69f51-241">Getrennt</span><span class="sxs-lookup"><span data-stu-id="69f51-241">Disconnected</span></span>  
  
-   <span data-ttu-id="69f51-242">Zeugenverbindung</span><span class="sxs-lookup"><span data-stu-id="69f51-242">Witness connection</span></span>  
  
     <span data-ttu-id="69f51-243">Verbindungsstatus des Zeugen.</span><span class="sxs-lookup"><span data-stu-id="69f51-243">Connection status of the witness.</span></span> <span data-ttu-id="69f51-244">Mögliche Zustandswerte:</span><span class="sxs-lookup"><span data-stu-id="69f51-244">The possible states are:</span></span>  
  
    -   <span data-ttu-id="69f51-245">Unknown</span><span class="sxs-lookup"><span data-stu-id="69f51-245">Unknown</span></span>  
  
    -   <span data-ttu-id="69f51-246">Verbunden</span><span class="sxs-lookup"><span data-stu-id="69f51-246">Connected</span></span>  
  
    -   <span data-ttu-id="69f51-247">Getrennt</span><span class="sxs-lookup"><span data-stu-id="69f51-247">Disconnected.</span></span>  
  
#### <a name="log-on-the-principal-server"></a><span data-ttu-id="69f51-248">Protokoll auf dem Prinzipalserver</span><span class="sxs-lookup"><span data-stu-id="69f51-248">Log on the Principal Server</span></span>  
 <span data-ttu-id="69f51-249">Auf der Seite **Status** werden die folgenden Informationen zum Status des Protokolls auf dem Prinzipalserver entsprechend der angegebenen Zeit angezeigt:</span><span class="sxs-lookup"><span data-stu-id="69f51-249">The **Status** page displays the following information about the status of the log on the principal server as of the indicated time:</span></span>  
  
-   <span data-ttu-id="69f51-250">Nicht gesendetes Protokoll</span><span class="sxs-lookup"><span data-stu-id="69f51-250">Unsent log</span></span>  
  
     <span data-ttu-id="69f51-251">Menge der in der Sendewarteschlange wartenden Protokolldaten (in KB).</span><span class="sxs-lookup"><span data-stu-id="69f51-251">The amount of log waiting in the send queue in kilobytes (KB).</span></span>  
  
-   <span data-ttu-id="69f51-252">Älteste, nicht gesendete Transaktion</span><span class="sxs-lookup"><span data-stu-id="69f51-252">Oldest unsent transaction</span></span>  
  
     <span data-ttu-id="69f51-253">Alter der ältesten, nicht gesendeten Transaktion in der Sendewarteschlange.</span><span class="sxs-lookup"><span data-stu-id="69f51-253">Age of the oldest unsent transaction in the send queue.</span></span> <span data-ttu-id="69f51-254">Das Alter dieser Transaktion gibt an, wie viele Minuten an Transaktionen noch nicht an die Spiegelserverinstanz gesendet wurden.</span><span class="sxs-lookup"><span data-stu-id="69f51-254">The age of this transaction indicates how many minutes of transactions have not yet been sent to the mirror server instance.</span></span> <span data-ttu-id="69f51-255">Dieser Wert hilft, das Datenverlustrisiko in Bezug auf die Zeit zu messen.</span><span class="sxs-lookup"><span data-stu-id="69f51-255">This value helps measure the potential for data loss in terms of time.</span></span>  
  
-   <span data-ttu-id="69f51-256">Zeit zum Senden des Protokolls (geschätzt)</span><span class="sxs-lookup"><span data-stu-id="69f51-256">Time to send log (estimated)</span></span>  
  
     <span data-ttu-id="69f51-257">Die geschätzte Anzahl von Minuten, die die Prinzipalserverinstanz benötigt, um das Protokoll, das sich derzeit in der Sendewarteschlange befindet, basierend auf der aktuellen Senderate an die Spiegelserverinstanz zu senden.</span><span class="sxs-lookup"><span data-stu-id="69f51-257">Estimated number of minutes the principal server instance requires to send the log that is currently in the send queue to the mirror server instance based on the current send rate.</span></span> <span data-ttu-id="69f51-258">Die zum Senden des Protokolls tatsächlich erforderliche Zeit wird von der Rate der eintreffenden Transaktionen beeinflusst, die erheblichen Schwankungen unterworfen sein kann.</span><span class="sxs-lookup"><span data-stu-id="69f51-258">The actual time to send the log will be affected by the rate of incoming transactions, which can vary significantly.</span></span> <span data-ttu-id="69f51-259">Anhand des Werts **Zeit zum Senden des Protokolls (geschätzt)** kann jedoch die für ein manuelles Failover erforderliche Zeit grob geschätzt werden.</span><span class="sxs-lookup"><span data-stu-id="69f51-259">However, the **Time to send log (estimated)** value can be useful for roughly estimating the time required for a manual failover.</span></span>  
  
-   <span data-ttu-id="69f51-260">Aktuelle Senderate</span><span class="sxs-lookup"><span data-stu-id="69f51-260">Current send rate</span></span>  
  
     <span data-ttu-id="69f51-261">Rate, mit der Transaktionen an die Spiegelserverinstanz gesendet werden (in KB pro Sekunde).</span><span class="sxs-lookup"><span data-stu-id="69f51-261">Rate at which transactions are being sent to the mirror server instance in KB per second.</span></span>  
  
-   <span data-ttu-id="69f51-262">Aktuelle Rate neuer Transaktionen</span><span class="sxs-lookup"><span data-stu-id="69f51-262">Current rate of new transactions</span></span>  
  
     <span data-ttu-id="69f51-263">Rate, mit der eingehende Transaktionen in das Protokoll des Prinzipals eingetragen werden (in KB pro Sekunde).</span><span class="sxs-lookup"><span data-stu-id="69f51-263">Rate at which incoming transactions are being entered into the principal's log in KB per second.</span></span> <span data-ttu-id="69f51-264">Sie können feststellen, ob die Spiegelung zurück liegt, gleich schnell ist oder aufholt, indem Sie diesen Wert mit dem Wert von **Zeit zum Senden des Protokolls (geschätzt)** vergleichen.</span><span class="sxs-lookup"><span data-stu-id="69f51-264">To determine whether mirroring is falling behind, staying up, or catching up, compare this value to the **Estimated time to send log** value.</span></span>  
  
#### <a name="log-on-the-mirror-server"></a><span data-ttu-id="69f51-265">Protokoll auf dem Spiegelserver</span><span class="sxs-lookup"><span data-stu-id="69f51-265">Log on the Mirror Server</span></span>  
 <span data-ttu-id="69f51-266">Auf der Seite **Status** werden die folgenden Informationen zum Status des Protokolls auf dem Spiegelserver entsprechend der angegebenen Zeit angezeigt:</span><span class="sxs-lookup"><span data-stu-id="69f51-266">The **Status** page displays the following information about the status of the log on the mirror server as of the indicated time:</span></span>  
  
-   <span data-ttu-id="69f51-267">Nicht wiederhergestelltes Protokoll</span><span class="sxs-lookup"><span data-stu-id="69f51-267">Unrestored log</span></span>  
  
     <span data-ttu-id="69f51-268">Menge der in der Wiederholungswarteschlange wartenden Protokolldaten (in KB).</span><span class="sxs-lookup"><span data-stu-id="69f51-268">The amount of log waiting in the redo queue in KB.</span></span>  
  
-   <span data-ttu-id="69f51-269">Zeit zum Wiederherstellen des Protokolls (geschätzt)</span><span class="sxs-lookup"><span data-stu-id="69f51-269">Time to restore log (estimated)</span></span>  
  
     <span data-ttu-id="69f51-270">Die geschätzte Anzahl von Minuten, die erforderlich ist, um das Protokoll, das sich derzeit in der Wiederholungswarteschlange befindet, auf die Spiegeldatenbank anzuwenden.</span><span class="sxs-lookup"><span data-stu-id="69f51-270">Approximate number of minutes required for the log currently in the redo queue to be applied to the mirror database.</span></span>  
  
-   <span data-ttu-id="69f51-271">Aktuelle Wiederherstellungsrate</span><span class="sxs-lookup"><span data-stu-id="69f51-271">Current restore rate</span></span>  
  
     <span data-ttu-id="69f51-272">Rate, mit der Transaktionen in der Spiegelserverinstanz wiederhergestellt werden (in KB pro Sekunde).</span><span class="sxs-lookup"><span data-stu-id="69f51-272">Rate at which transactions are being restored into the mirror database (in KB per second).</span></span>  
  
#### <a name="mirroring-session"></a><span data-ttu-id="69f51-273">Spiegelungssitzung</span><span class="sxs-lookup"><span data-stu-id="69f51-273">Mirroring Session</span></span>  
 <span data-ttu-id="69f51-274">Zusätzlich werden auf der Seite **Status** die folgenden Informationen zur Spiegelungssitzung angezeigt:</span><span class="sxs-lookup"><span data-stu-id="69f51-274">In addition, the **Status** page displays the following information about the mirroring session:</span></span>  
  
-   <span data-ttu-id="69f51-275">Spiegelungscommitaufwand</span><span class="sxs-lookup"><span data-stu-id="69f51-275">Mirroring commit overhead</span></span>  
  
     <span data-ttu-id="69f51-276">Durchschnittliche Verzögerung pro Transaktion in Millisekunden (nur im Modus für hohe Sicherheit relevant).</span><span class="sxs-lookup"><span data-stu-id="69f51-276">Average delay per transaction in milliseconds (relevant only in high-safety mode).</span></span> <span data-ttu-id="69f51-277">Hierbei handelt es sich um die Verzögerung, die entsteht, während die Prinzipalserverinstanz darauf wartet, dass die Spiegelserverinstanz den Transaktionsprotokolldatensatz in die Wiederholungswarteschlange schreibt.</span><span class="sxs-lookup"><span data-stu-id="69f51-277">This delay is the amount of overhead incurred while the principal server instance waits for the mirror server instance to write the transaction's log record into the redo queue.</span></span>  
  
-   <span data-ttu-id="69f51-278">Zeit zum Senden und Wiederherstellen aller aktuellen Protokolle (geschätzt)</span><span class="sxs-lookup"><span data-stu-id="69f51-278">Time to send and restore all current log (estimated)</span></span>  
  
     <span data-ttu-id="69f51-279">Geschätzte Zeit, die erforderlich ist, um das gesamte, noch nicht gesendete Protokoll, für das auf dem Prinzipal ein Commit ausgeführt wurde, zu senden, und um das gesamte Protokoll wiederherzustellen, das sich derzeit in der Wiederholungswarteschlange befindet.</span><span class="sxs-lookup"><span data-stu-id="69f51-279">Estimated time needed to send all of the unsent log that has been committed at the principal and to restore all of the log currently in the redo queue.</span></span> <span data-ttu-id="69f51-280">Der Schätzung ist möglicherweise niedriger als die Summe der Werte in den Feldern **Zeit zum Senden des Protokolls (geschätzt)** und **Zeit zum Wiederherstellen des Protokolls (geschätzt)** , da Sende- und Wiederherstellungsvorgänge parallel ausgeführt werden können.</span><span class="sxs-lookup"><span data-stu-id="69f51-280">This estimate may be less than the sum of the values of the **Time to send log (estimated)** and **Time to restore log (estimated)** fields, because sending and restoring can operate in parallel.</span></span>  
  
-   <span data-ttu-id="69f51-281">Zeugenadresse</span><span class="sxs-lookup"><span data-stu-id="69f51-281">Witness address</span></span>  
  
     <span data-ttu-id="69f51-282">Netzwerkadresse der Zeugenserverinstanz.</span><span class="sxs-lookup"><span data-stu-id="69f51-282">Network address of the witness server instance.</span></span> <span data-ttu-id="69f51-283">Informationen zum Format dieser Adresse finden Sie unter [Angeben einer Servernetzwerkadresse &#40;Datenbankspiegelung&#41;](specify-a-server-network-address-database-mirroring.md).</span><span class="sxs-lookup"><span data-stu-id="69f51-283">For information about the format of this address, see [Specify a Server Network Address &#40;Database Mirroring&#41;](specify-a-server-network-address-database-mirroring.md).</span></span>  
  
-   <span data-ttu-id="69f51-284">Betriebsmodus</span><span class="sxs-lookup"><span data-stu-id="69f51-284">Operating mode</span></span>  
  
     <span data-ttu-id="69f51-285">Der Betriebsmodus der Datenbank-Spiegelungssitzung:</span><span class="sxs-lookup"><span data-stu-id="69f51-285">The operating mode of the database mirroring session:</span></span>  
  
    -   <span data-ttu-id="69f51-286">Hohe Leistung (asynchron)</span><span class="sxs-lookup"><span data-stu-id="69f51-286">High performance (asynchronous)</span></span>  
  
    -   <span data-ttu-id="69f51-287">Hohe Sicherheit ohne automatisches Failover (synchron)</span><span class="sxs-lookup"><span data-stu-id="69f51-287">High safety without automatic failover (synchronous)</span></span>  
  
    -   <span data-ttu-id="69f51-288">Hohe Sicherheit mit automatischem Failover (synchron)</span><span class="sxs-lookup"><span data-stu-id="69f51-288">High safety with automatic failover (synchronous)</span></span>  
  
##  <a name="additional-sources-of-information-about-a-mirrored-database"></a><a name="AdditionalSources"></a> <span data-ttu-id="69f51-289">Zusätzliche Informationsquellen zu gespiegelten Datenbanken</span><span class="sxs-lookup"><span data-stu-id="69f51-289">Additional Sources of Information About a Mirrored Database</span></span>  
 <span data-ttu-id="69f51-290">Zusätzlich zur Verwendung des Datenbankspiegelungs-Monitors und dbmmonitor-basierter gespeicherter Prozeduren zur Überwachung einer gespiegelten Datenbank und zum Einrichten von Warnungen für überwachte Leistungsvariablen bietet [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] Katalogsichten, Leistungsindikatoren und Ereignisbenachrichtigungen für die Datenbankspiegelung.</span><span class="sxs-lookup"><span data-stu-id="69f51-290">In addition to using the Database Mirroring Monitor and dbmmonitor stored procedures to monitor a mirrored database and set up alerts on monitored performance variables, [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] provides catalog views, performance counters, and event notifications for database mirroring.</span></span>  
  
 <span data-ttu-id="69f51-291">**In diesem Abschnitt:**</span><span class="sxs-lookup"><span data-stu-id="69f51-291">**In This Section:**</span></span>  
  
-   [<span data-ttu-id="69f51-292">Metadaten für die Datenbankspiegelung</span><span class="sxs-lookup"><span data-stu-id="69f51-292">Database Mirroring Metadata</span></span>](#DbmMetadata)  
  
-   [<span data-ttu-id="69f51-293">Leistungsindikatoren für die Datenbankspiegelung</span><span class="sxs-lookup"><span data-stu-id="69f51-293">Database Mirroring Performance Counters</span></span>](#DbmPerfCounters)  
  
-   [<span data-ttu-id="69f51-294">Ereignisbenachrichtigungen für die Datenbankspiegelung</span><span class="sxs-lookup"><span data-stu-id="69f51-294">Database Mirroring Event Notifications</span></span>](#DbmEventNotif)  
  
###  <a name="database-mirroring-metadata"></a><a name="DbmMetadata"></a> <span data-ttu-id="69f51-295">Metadaten für die Datenbankspiegelung</span><span class="sxs-lookup"><span data-stu-id="69f51-295">Database Mirroring Metadata</span></span>  
 <span data-ttu-id="69f51-296">Jede Datenbank-Spiegelungssitzung wird in Metadaten beschrieben, die mithilfe der folgenden Katalogsichten oder dynamischen Verwaltungssichten offengelegt werden:</span><span class="sxs-lookup"><span data-stu-id="69f51-296">Each database mirroring session is described in metadata that is exposed through the following catalog or dynamic management views:</span></span>  
  
-   <span data-ttu-id="69f51-297">**sys.database_mirroring**</span><span class="sxs-lookup"><span data-stu-id="69f51-297">**sys.database_mirroring**</span></span>  
  
     <span data-ttu-id="69f51-298">Diese Sicht zeigt die Metadaten für die Datenbankspiegelung für jede gespiegelte Datenbank in einer Serverinstanz an.</span><span class="sxs-lookup"><span data-stu-id="69f51-298">This view displays the database mirroring metadata for each mirrored database in a server instance.</span></span> <span data-ttu-id="69f51-299">Weitere Informationen finden Sie unter [sys.database_mirroring &#40;Transact-SQL&#41;](/sql/relational-databases/system-catalog-views/sys-database-mirroring-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="69f51-299">For more information, see [sys.database_mirroring &#40;Transact-SQL&#41;](/sql/relational-databases/system-catalog-views/sys-database-mirroring-transact-sql).</span></span>  
  
-   <span data-ttu-id="69f51-300">**sys.database_mirroring_endpoints**</span><span class="sxs-lookup"><span data-stu-id="69f51-300">**sys.database_mirroring_endpoints**</span></span>  
  
     <span data-ttu-id="69f51-301">Die **sys.database_mirroring_endpoints** -Katalogsicht zeigt Informationen zum Endpunkt der Datenbankspiegelung der Serverinstanz an.</span><span class="sxs-lookup"><span data-stu-id="69f51-301">The **sys.database_mirroring_endpoints** catalog view displays information about the database mirroring endpoint of the server instance.</span></span> <span data-ttu-id="69f51-302">Weitere Informationen finden Sie unter [sys.database_mirroring_endpoints &#40;Transact-SQL&#41;](/sql/relational-databases/system-catalog-views/sys-database-mirroring-endpoints-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="69f51-302">For more information, see [sys.database_mirroring_endpoints &#40;Transact-SQL&#41;](/sql/relational-databases/system-catalog-views/sys-database-mirroring-endpoints-transact-sql).</span></span>  
  
-   <span data-ttu-id="69f51-303">**sys.database_mirroring_witnesses**</span><span class="sxs-lookup"><span data-stu-id="69f51-303">**sys.database_mirroring_witnesses**</span></span>  
  
     <span data-ttu-id="69f51-304">Diese Katalogsicht zeigt die Metadaten für die Datenbankspiegelung für jede Sitzung an, bei der eine Serverinstanz Zeuge ist.</span><span class="sxs-lookup"><span data-stu-id="69f51-304">This catalog view displays the database mirroring metadata for each session in which a server instance is the witness.</span></span> <span data-ttu-id="69f51-305">Weitere Informationen finden Sie unter [sys.database_mirroring_witnesses &#40;Transact-SQL&#41;](/sql/relational-databases/system-catalog-views/database-mirroring-witness-catalog-views-sys-database-mirroring-witnesses).</span><span class="sxs-lookup"><span data-stu-id="69f51-305">For more information, see [sys.database_mirroring_witnesses &#40;Transact-SQL&#41;](/sql/relational-databases/system-catalog-views/database-mirroring-witness-catalog-views-sys-database-mirroring-witnesses).</span></span>  
  
-   <span data-ttu-id="69f51-306">**sys.dm_db_mirroring_connections**</span><span class="sxs-lookup"><span data-stu-id="69f51-306">**sys.dm_db_mirroring_connections**</span></span>  
  
     <span data-ttu-id="69f51-307">Diese dynamische Verwaltungssicht gibt für jede Datenbankspiegelungs-Netzwerkverbindung eine Zeile zurück.</span><span class="sxs-lookup"><span data-stu-id="69f51-307">This dynamic management view returns a row for each database mirroring network connection.</span></span>  
  
     <span data-ttu-id="69f51-308">Weitere Informationen finden Sie unter [sys.dm_db_mirroring_connections &#40;Transact-SQL&#41;](/sql/relational-databases/system-dynamic-management-views/database-mirroring-sys-dm-db-mirroring-connections).</span><span class="sxs-lookup"><span data-stu-id="69f51-308">For more information, see [sys.dm_db_mirroring_connections &#40;Transact-SQL&#41;](/sql/relational-databases/system-dynamic-management-views/database-mirroring-sys-dm-db-mirroring-connections).</span></span>  
  
###  <a name="database-mirroring-performance-counters"></a><a name="DbmPerfCounters"></a> <span data-ttu-id="69f51-309">Leistungsindikatoren für die Datenbankspiegelung</span><span class="sxs-lookup"><span data-stu-id="69f51-309">Database Mirroring Performance Counters</span></span>  
 <span data-ttu-id="69f51-310">Mit Leistungsindikatoren können Sie die Leistung der Datenbankspiegelung überwachen.</span><span class="sxs-lookup"><span data-stu-id="69f51-310">Performance counters let you monitor database mirroring performance.</span></span> <span data-ttu-id="69f51-311">Beispielsweise können Sie den Indikator **Transaktionsverzögerung** untersuchen, um festzustellen, ob die Datenbankspiegelung Auswirkungen auf die Leistung des Prinzipalservers hat, oder Sie können die Indikatoren **Wiederholungswarteschlange** und **Protokollsende-Warteschlange** untersuchen, um festzustellen, wie gut die Spiegeldatenbank mit der Prinzipaldatenbank Schritt halten kann.</span><span class="sxs-lookup"><span data-stu-id="69f51-311">For example, you can examine the **Transaction Delay** counter to see if database mirroring is impacting performance on the principal server, you can examine the **Redo Queue** and **Log Send Queue** counters to see how well the mirror database is keeping up with the principal database.</span></span> <span data-ttu-id="69f51-312">Mit dem Leistungsindikator **Gesendete Protokollbytes/Sekunde** können Sie überwachen, wie viele Protokollbytes pro Sekunde gesendet wurden.</span><span class="sxs-lookup"><span data-stu-id="69f51-312">You can examine the **Log Bytes Sent/sec** counter to monitor the amount of log sent per second.</span></span>  
  
 <span data-ttu-id="69f51-313">In den Systemmonitoren auf beiden Partnern sind Leistungsindikatoren im Datenbankspiegelungs-Leistungsobjekt verfügbar (**SQLServer:Datenbankspiegelung**).</span><span class="sxs-lookup"><span data-stu-id="69f51-313">In Performance Monitor on either partner, performance counters are available in the database mirroring performance object (**SQLServer:Database Mirroring**).</span></span> <span data-ttu-id="69f51-314">Weitere Informationen finden Sie unter [SQL Server, Database Mirroring Object](../../relational-databases/performance-monitor/sql-server-database-mirroring-object.md).</span><span class="sxs-lookup"><span data-stu-id="69f51-314">For more information, see [SQL Server, Database Mirroring Object](../../relational-databases/performance-monitor/sql-server-database-mirroring-object.md).</span></span>  
  
 <span data-ttu-id="69f51-315">**So starten Sie den Systemmonitor**</span><span class="sxs-lookup"><span data-stu-id="69f51-315">**To start the performance monitor**</span></span>  
  
-   [<span data-ttu-id="69f51-316">Starten des Systemmonitors &#40;Windows&#41;</span><span class="sxs-lookup"><span data-stu-id="69f51-316">Start System Monitor &#40;Windows&#41;</span></span>](../../relational-databases/performance/start-system-monitor-windows.md)  
  
###  <a name="database-mirroring-event-notifications"></a><a name="DbmEventNotif"></a> <span data-ttu-id="69f51-317">Ereignisbenachrichtigungen für die Datenbankspiegelung</span><span class="sxs-lookup"><span data-stu-id="69f51-317">Database Mirroring Event Notifications</span></span>  
 <span data-ttu-id="69f51-318">Bei einer Ereignisbenachrichtigung handelt es sich um eine spezielle Art von Datenbankobjekt.</span><span class="sxs-lookup"><span data-stu-id="69f51-318">Event notifications are a special kind of database object.</span></span> <span data-ttu-id="69f51-319">Ereignisbenachrichtigungen werden als Antwort auf eine Vielzahl von Transact-SQL DDL-Anweisungen (Data Definition Language) und Ereignissen der SQL-Ablaufverfolgung ausgeführt; sie senden Informationen zu Server- und Datenbankereignissen an einen [!INCLUDE[ssSB](../../includes/sssb-md.md)] -Dienst.</span><span class="sxs-lookup"><span data-stu-id="69f51-319">Event notifications execute in response to a variety of Transact-SQL data definition language (DDL) statements and SQL Trace events and send information about server and database events to a [!INCLUDE[ssSB](../../includes/sssb-md.md)] service.</span></span>  
  
 <span data-ttu-id="69f51-320">Die folgenden Ereignisse stehen für die Datenbankspiegelung zur Verfügung:</span><span class="sxs-lookup"><span data-stu-id="69f51-320">The following events are available for database mirroring:</span></span>  
  
-   <span data-ttu-id="69f51-321">**Database Mirroring State Change** -Ereignisklasse</span><span class="sxs-lookup"><span data-stu-id="69f51-321">**Database Mirroring State Change** event class</span></span>  
  
     <span data-ttu-id="69f51-322">Sie zeigt an, wenn sich der Spiegelungsstatus einer gespiegelten Datenbank ändert.</span><span class="sxs-lookup"><span data-stu-id="69f51-322">This indicates when the mirroring state of a mirrored database changes.</span></span> <span data-ttu-id="69f51-323">Weitere Informationen finden Sie unter [Database Mirroring State Change Event Class](../../relational-databases/event-classes/database-mirroring-state-change-event-class.md).</span><span class="sxs-lookup"><span data-stu-id="69f51-323">For more information, see [Database Mirroring State Change Event Class](../../relational-databases/event-classes/database-mirroring-state-change-event-class.md).</span></span>  
  
-   <span data-ttu-id="69f51-324">**Audit Database Mirroring Login** -Ereignisklasse</span><span class="sxs-lookup"><span data-stu-id="69f51-324">**Audit Database Mirroring Login** event class</span></span>  
  
     <span data-ttu-id="69f51-325">Sie meldet Überwachungsmeldungen, die mit der Transportsicherheit bei der Datenbankspiegelung verbunden sind.</span><span class="sxs-lookup"><span data-stu-id="69f51-325">This reports audit messages related to database mirroring transport security.</span></span> <span data-ttu-id="69f51-326">Weitere Informationen finden Sie unter [Audit Database Mirroring Login Event Class](../../relational-databases/event-classes/audit-database-mirroring-login-event-class.md).</span><span class="sxs-lookup"><span data-stu-id="69f51-326">For more information, see [Audit Database Mirroring Login Event Class](../../relational-databases/event-classes/audit-database-mirroring-login-event-class.md).</span></span>  
  
##  <a name="related-tasks"></a><a name="RelatedTasks"></a> <span data-ttu-id="69f51-327">Verwandte Aufgaben</span><span class="sxs-lookup"><span data-stu-id="69f51-327">Related Tasks</span></span>  
  
-   [<span data-ttu-id="69f51-328">Verwenden von Warnungsschwellenwerten und Warnmeldungen für Spiegelungsleistungsmetriken &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="69f51-328">Use Warning Thresholds and Alerts on Mirroring Performance Metrics &#40;SQL Server&#41;</span></span>](use-warning-thresholds-and-alerts-on-mirroring-performance-metrics-sql-server.md)  
  
-   [<span data-ttu-id="69f51-329">Starten des Datenbankspiegelungs-Monitors &#40;SQL Server Management Studio&#41;</span><span class="sxs-lookup"><span data-stu-id="69f51-329">Start Database Mirroring Monitor &#40;SQL Server Management Studio&#41;</span></span>](../database-mirroring/start-database-mirroring-monitor-sql-server-management-studio.md)  
  
-   [<span data-ttu-id="69f51-330">Anzeigen des Status einer gespiegelten Datenbank &#40;SQL Server Management Studio&#41;</span><span class="sxs-lookup"><span data-stu-id="69f51-330">View the State of a Mirrored Database &#40;SQL Server Management Studio&#41;</span></span>](view-the-state-of-a-mirrored-database-sql-server-management-studio.md)  
  
 <span data-ttu-id="69f51-331">**Gespeicherten Prozeduren**</span><span class="sxs-lookup"><span data-stu-id="69f51-331">**Stored procedures**</span></span>  
  
-   [<span data-ttu-id="69f51-332">sp_dbmmonitoraddmonitoring &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="69f51-332">sp_dbmmonitoraddmonitoring &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-stored-procedures/sp-dbmmonitoraddmonitoring-transact-sql)  
  
-   [<span data-ttu-id="69f51-333">sp_dbmmonitorchangealert &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="69f51-333">sp_dbmmonitorchangealert &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-stored-procedures/sp-dbmmonitorchangealert-transact-sql)  
  
-   [<span data-ttu-id="69f51-334">sp_dbmmonitorchangemonitoring &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="69f51-334">sp_dbmmonitorchangemonitoring &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-stored-procedures/sp-dbmmonitorchangemonitoring-transact-sql)  
  
-   [<span data-ttu-id="69f51-335">sp_dbmmonitordropalert &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="69f51-335">sp_dbmmonitordropalert &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-stored-procedures/sp-dbmmonitordropalert-transact-sql)  
  
-   [<span data-ttu-id="69f51-336">sp_dbmmonitordropmonitoring &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="69f51-336">sp_dbmmonitordropmonitoring &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-stored-procedures/sp-dbmmonitordropmonitoring-transact-sql)  
  
-   [<span data-ttu-id="69f51-337">sp_dbmmonitorhelpalert &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="69f51-337">sp_dbmmonitorhelpalert &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-stored-procedures/sp-dbmmonitorhelpalert-transact-sql)  
  
-   [<span data-ttu-id="69f51-338">sp_dbmmonitorhelpmonitoring &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="69f51-338">sp_dbmmonitorhelpmonitoring &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-stored-procedures/sp-dbmmonitorhelpmonitoring-transact-sql)  
  
-   [<span data-ttu-id="69f51-339">sp_dbmmonitorresults &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="69f51-339">sp_dbmmonitorresults &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-stored-procedures/sp-dbmmonitorresults-transact-sql)  
  
-   [<span data-ttu-id="69f51-340">sp_dbmmonitorupdate &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="69f51-340">sp_dbmmonitorupdate &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-stored-procedures/sp-dbmmonitorupdate-transact-sql)  
  
## <a name="see-also"></a><span data-ttu-id="69f51-341">Weitere Informationen</span><span class="sxs-lookup"><span data-stu-id="69f51-341">See Also</span></span>  
 <span data-ttu-id="69f51-342">[Datenbankspiegelung &#40;SQL Server&#41;](database-mirroring-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="69f51-342">[Database Mirroring &#40;SQL Server&#41;](database-mirroring-sql-server.md) </span></span>  
 [<span data-ttu-id="69f51-343">Konzepte des WMI-Anbieters für Serverereignisse</span><span class="sxs-lookup"><span data-stu-id="69f51-343">WMI Provider for Server Events Concepts</span></span>](../../relational-databases/wmi-provider-server-events/wmi-provider-for-server-events-concepts.md)  
  
  
