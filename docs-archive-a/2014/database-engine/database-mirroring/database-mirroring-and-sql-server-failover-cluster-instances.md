---
title: Datenbankspiegelung und SQL Server-Failoverclusterinstanzen | Microsoft-Dokumentation
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: high-availability
ms.topic: conceptual
helpviewer_keywords:
- failover clustering [SQL Server], database mirroring
- database mirroring [SQL Server], failover
- high-availability mode [SQL Server]
ms.assetid: f1dd6a79-698b-4e31-b923-6bfc3ea0b617
author: MikeRayMSFT
ms.author: mikeray
ms.openlocfilehash: 378f834b4482f44f6a84abf419f027b353c7771a
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 08/04/2020
ms.locfileid: "87721734"
---
# <a name="database-mirroring-and-sql-server-failover-cluster-instances"></a><span data-ttu-id="16915-102">Datenbankspiegelung und SQL Server-Failoverclusterinstanzen</span><span class="sxs-lookup"><span data-stu-id="16915-102">Database Mirroring and SQL Server Failover Cluster Instances</span></span>
  <span data-ttu-id="16915-103">Ein Failovercluster ist eine Kombination eines oder mehrerer physischer Datenträger in einer Clustergruppe der [!INCLUDE[msCoName](../../includes/msconame-md.md)] -Clusterdienste (MSCS, Microsoft Cluster Service), auch als Ressourcengruppe bezeichnet, die teilnehmende Knoten des Clusters sind.</span><span class="sxs-lookup"><span data-stu-id="16915-103">A failover cluster is a combination of one or more physical disks in a [!INCLUDE[msCoName](../../includes/msconame-md.md)] Cluster Service (MSCS) cluster group, known as a resource group, that are participating nodes of the cluster.</span></span> <span data-ttu-id="16915-104">Die Ressourcengruppe ist als Failoverclusterinstanz konfiguriert, die eine Instanz von [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]hostet.</span><span class="sxs-lookup"><span data-stu-id="16915-104">The resource group is configured as a failover clustered instance that hosts an instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="16915-105">Eine [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] -Failoverclusterinstanz wird im Netzwerk wie ein einzelner Computer angezeigt, besitzt jedoch Funktionalität, die ein Failover von einem Knoten zu einem anderen ermöglicht, falls ein Knoten nicht mehr verfügbar ist.</span><span class="sxs-lookup"><span data-stu-id="16915-105">A [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] failover clustered instance appears on the network as if it were a single computer, but has functionality that provides failover from one node to another if one node becomes unavailable.</span></span> <span data-ttu-id="16915-106">Weitere Informationen finden Sie unter [ Always On-Failoverclusterinstanzen (SQL Server)](../../sql-server/failover-clusters/windows/always-on-failover-cluster-instances-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="16915-106">For more information, see [AlwaysOn Failover Cluster Instances (SQL Server)](../../sql-server/failover-clusters/windows/always-on-failover-cluster-instances-sql-server.md).</span></span>  
  
 <span data-ttu-id="16915-107">Failovercluster unterstützen die Hochverfügbarkeit einer gesamten Instanz von [!INCLUDE[msCoName](../../includes/msconame-md.md)] [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], während die Datenbankspiegelung die Hochverfügbarkeit einzelner Datenbanken unterstützt.</span><span class="sxs-lookup"><span data-stu-id="16915-107">Failover clusters provide high-availability support for an entire [!INCLUDE[msCoName](../../includes/msconame-md.md)] [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] instance, in contrast to database mirroring, which provides high-availability support for a single database.</span></span> <span data-ttu-id="16915-108">Datenbankspiegelung kann zwischen Failoverclustern, aber auch zwischen einem Failovercluster und einem nicht zu einem Cluster gehörenden Host ausgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="16915-108">Database mirroring works between failover clusters and, also, between a failover cluster and a nonclustered host.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="16915-109">Eine Einführung in die Datenbankspiegelung finden Sie unter [Datenbankspiegelung &#40;SQL Server&#41;](database-mirroring-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="16915-109">For an introduction to database mirroring, see [Database Mirroring &#40;SQL Server&#41;](database-mirroring-sql-server.md).</span></span>  
  
## <a name="mirroring-and-clustering"></a><span data-ttu-id="16915-110">Spiegelung und Clusterunterstützung</span><span class="sxs-lookup"><span data-stu-id="16915-110">Mirroring and Clustering</span></span>  
 <span data-ttu-id="16915-111">Wenn die Spiegelung zusammen mit Clustern verwendet wird, befinden sich sowohl der Prinzipalserver als auch der Spiegelserver auf Clustern, wobei der Prinzipalserver auf der Failoverclusterinstanz eines Clusters und der Spiegelserver auf der Failoverclusterinstanz eines anderen Clusters ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="16915-111">Typically, when mirroring is used with clustering, the principal server and mirror server both reside on clusters, with the principal server running on the failover clustered instance of one cluster and the mirror server running on the failover clustered instance of a different cluster.</span></span> <span data-ttu-id="16915-112">Sie können aber auch eine Spiegelungssitzung einrichten, in der sich ein Partner auf der Failoverclusterinstanz eines Clusters und der andere Partner auf einem separaten, nicht zu einem Cluster gehörenden Computer befindet.</span><span class="sxs-lookup"><span data-stu-id="16915-112">You can establish a mirroring session in which one partner resides on the failover clustered instance of a cluster and the other partner resides on a separate, unclustered computer, however.</span></span>  
  
 <span data-ttu-id="16915-113">Wenn durch ein Clusterfailover ein Prinzipalserver vorübergehend nicht verfügbar wird, werden Clientverbindungen mit der Datenbank getrennt.</span><span class="sxs-lookup"><span data-stu-id="16915-113">If a cluster failover makes a principal server temporarily unavailable, client connections are disconnected from the database.</span></span> <span data-ttu-id="16915-114">Nach Abschluss des Clusterfailovers können die Clients abhängig vom [Betriebsmodus](database-mirroring-operating-modes.md)die Verbindung mit dem Prinzipalserver auf demselben Cluster oder auf einem anderen Cluster bzw. auf einem nicht zu einem Cluster gehörenden Computer wiederherstellen.</span><span class="sxs-lookup"><span data-stu-id="16915-114">After the cluster failover completes, clients can reconnect to the principal server on the same cluster, or on a different cluster or an unclustered computer, depending on the [operating mode](database-mirroring-operating-modes.md).</span></span> <span data-ttu-id="16915-115">Wenn Sie entscheiden, wie die Datenbankspiegelung in einer Clusterumgebung konfiguriert werden soll, ist der Betriebsmodus, den Sie für die Spiegelung verwenden, daher von besonderer Bedeutung.</span><span class="sxs-lookup"><span data-stu-id="16915-115">Therefore, when deciding how to configure database mirroring in a clustered environment, the operating mode you use for mirroring is significant.</span></span>  
  
### <a name="high-safety-mode-session-with-automatic-failover"></a><span data-ttu-id="16915-116">Hoher Sicherheitsmodus in einer Sitzung mit einem automatischen Failover</span><span class="sxs-lookup"><span data-stu-id="16915-116">High-Safety mode Session with Automatic Failover</span></span>  
 <span data-ttu-id="16915-117">Wenn Sie beabsichtigen, eine Datenbank in einem hohen Sicherheitsmodus mit einem automatischen Failover zu spiegeln, wird eine Konfiguration mit zwei Clustern für die Partner empfohlen.</span><span class="sxs-lookup"><span data-stu-id="16915-117">If you intend to mirror a database in high-safety mode with automatic failover, a two-cluster configuration is recommended for the partners.</span></span> <span data-ttu-id="16915-118">Diese Konfiguration stellt maximale Verfügbarkeit bereit.</span><span class="sxs-lookup"><span data-stu-id="16915-118">This configuration provides maximum availability.</span></span> <span data-ttu-id="16915-119">Der Zeuge kann sich entweder auf einem dritten Cluster oder auf einem nicht zu einem Cluster gehörenden Computer befinden.</span><span class="sxs-lookup"><span data-stu-id="16915-119">The witness can reside either on a third cluster or on an unclustered computer.</span></span>  
  
 <span data-ttu-id="16915-120">Wenn der Knoten ausfällt, auf dem der aktuelle Prinzipalserver ausgeführt wird, beginnt innerhalb weniger Sekunden ein automatisches Failover der Datenbank, während für den Cluster noch immer ein Failover zu einem anderen Knoten ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="16915-120">If the node running the current principal server fails, automatic failover of the database begins within a few seconds, while the cluster is still failing over to another node.</span></span> <span data-ttu-id="16915-121">Für die Datenbank-Spiegelungssitzung wird ein Failover zum Spiegelserver auf dem anderen Cluster bzw. auf einem nicht zu einem Cluster gehörenden Computer ausgeführt, und der ehemalige Spiegelserver wird zum Prinzipalserver.</span><span class="sxs-lookup"><span data-stu-id="16915-121">The database mirroring session fails over to the mirror server on the other cluster or unclustered computer, and the former mirror server becomes the principal server.</span></span> <span data-ttu-id="16915-122">Der neue Prinzipalserver führt so schnell wie möglich ein Rollforward für seine Kopie der Datenbank aus und schaltet sie als Prinzipaldatenbank online.</span><span class="sxs-lookup"><span data-stu-id="16915-122">The new principal server rolls forward its copy of the database as quickly as possible and brings it online as the principal database.</span></span> <span data-ttu-id="16915-123">Nach Abschluss des Clusterfailovers, was normalerweise einige Minuten in Anspruch nimmt, wird die Failoverclusterinstanz, die zuvor Prinzipalserver war, zum Spiegelserver.</span><span class="sxs-lookup"><span data-stu-id="16915-123">After the cluster failover completes, which typically takes several minutes, the failover clustered instance that was formerly the principal server becomes the mirror server.</span></span>  
  
 <span data-ttu-id="16915-124">In der folgenden Abbildung wird ein automatisches Failover zwischen Clustern in einer Spiegelungssitzung dargestellt, die im Hochsicherheitsmodus mit einem Zeugen (der ein automatisches Failover unterstützt) ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="16915-124">The following illustration shows an automatic failover between clusters in a mirroring session running in high-safety mode with a witness (which supports automatic failover).</span></span>  
  
 <span data-ttu-id="16915-125">![Failover auf einem Cluster](../media/dbm-and-failover-clustering.gif "Failover auf einem Cluster")</span><span class="sxs-lookup"><span data-stu-id="16915-125">![A failover on a cluster](../media/dbm-and-failover-clustering.gif "A failover on a cluster")</span></span>  
  
 <span data-ttu-id="16915-126">Die drei Serverinstanzen in der Spiegelungssitzung befinden sich auf drei verschiedenen Clustern: **Cluster_A**, **Cluster_B** und **Cluster_C**.</span><span class="sxs-lookup"><span data-stu-id="16915-126">The three server instances in the mirroring session reside on three distinct clusters: **Cluster_A**, **Cluster_B**, and **Cluster_C**.</span></span> <span data-ttu-id="16915-127">Auf jedem Cluster wird eine Standardinstanz von [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] als [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] -Failoverclusterinstanz ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="16915-127">On each cluster, a default instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] is running as a [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] failover clustered instance.</span></span> <span data-ttu-id="16915-128">Wenn die Spiegelungssitzung beginnt, ist die Failoverclusterinstanz auf **Cluster_A** der Prinzipalserver, die Failoverclusterinstanz auf **Cluster_B** ist der Spiegelserver, und die Failoverclusterinstanz auf **Cluster_C** ist der Zeuge in der Spiegelungssitzung.</span><span class="sxs-lookup"><span data-stu-id="16915-128">When the mirroring session starts, the failover clustered instance on **Cluster_A** is the principal server, the failover clustered instance on **Cluster_B** is the mirror server, and the failover clustered instance on **Cluster_C** is the witness in the mirroring session.</span></span> <span data-ttu-id="16915-129">Schließlich fällt der aktive Knoten auf **Cluster_A** aus, sodass der Prinzipalserver nicht mehr verfügbar ist.</span><span class="sxs-lookup"><span data-stu-id="16915-129">Eventually, the active node on **Cluster_A** fails, which causes the principal server to become unavailable.</span></span>  
  
 <span data-ttu-id="16915-130">Bevor der Cluster ein Failover ausführen kann, erkennt der Spiegelserver mithilfe des Zeugen den Ausfall des Prinzipalservers.</span><span class="sxs-lookup"><span data-stu-id="16915-130">Before the cluster has time to fail over, the loss of the principal server is detected by the mirror server, with the help of the witness.</span></span> <span data-ttu-id="16915-131">Der Spiegelserver führt ein Rollforward für seine Datenbank aus und schaltet sie so schnell wie möglich als neue Prinzipaldatenbank online.</span><span class="sxs-lookup"><span data-stu-id="16915-131">The mirror server rolls forward its database and brings it online as the new principal database as quickly as possible.</span></span> <span data-ttu-id="16915-132">Wenn das Failover für **Cluster_A** beendet ist, ist der ehemalige Prinzipalserver nun der Spiegelserver und synchronisiert seine Datenbank mit der aktuellen Prinzipaldatenbank auf **Cluster_B**.</span><span class="sxs-lookup"><span data-stu-id="16915-132">When **Cluster_A** finishes failing over, the former principal server is now the mirror server, and it synchronizes its database with the current principal database on **Cluster_B**.</span></span>  
  
### <a name="high-safety-mode-session-without-automatic-failover"></a><span data-ttu-id="16915-133">Hoher Sicherheitsmodus in einer Sitzung ohne ein automatisches Failover</span><span class="sxs-lookup"><span data-stu-id="16915-133">High-Safety Mode Session Without Automatic Failover</span></span>  
 <span data-ttu-id="16915-134">Wenn Sie eine Datenbank in einem hohen Sicherheitsmodus ohne ein automatisches Failover spiegeln, dient ein anderer Knoten in dem Cluster als Prinzipalserver, wenn der ausgeführte Knoten des aktuellen Prinzipalservers fehlerhaft ist.</span><span class="sxs-lookup"><span data-stu-id="16915-134">If you are mirroring a database in high-safety mode without automatic failover, another node in the cluster will act as the principal server if the node running the current principal server fails.</span></span> <span data-ttu-id="16915-135">Beachten Sie, dass die Datenbank nicht verfügbar ist, während der Cluster nicht verfügbar ist.</span><span class="sxs-lookup"><span data-stu-id="16915-135">Note that while the cluster is unavailable, the database is unavailable.</span></span>  
  
### <a name="high-performance-mode-session"></a><span data-ttu-id="16915-136">Sitzung im Hochleistungsmodus</span><span class="sxs-lookup"><span data-stu-id="16915-136">High-Performance Mode Session</span></span>  
 <span data-ttu-id="16915-137">Wenn Sie beabsichtigen, eine Datenbank im Hochleistungsmodus zu spiegeln, sollten Sie den Prinzipalserver auf der Failoverclusterinstanz eines Clusters und den Spiegelserver auf einem nicht zu einem Cluster gehörenden Server an einem Remotestandort ausführen.</span><span class="sxs-lookup"><span data-stu-id="16915-137">If you intend to mirror a database in high-performance mode, consider placing the principal server on the failover clustered instance of a cluster and placing the mirror server on an unclustered server in a remote location.</span></span> <span data-ttu-id="16915-138">Wenn für den Cluster ein Failover zu einem anderen Knoten ausgeführt wird, bleibt die Failoverclusterinstanz weiterhin Prinzipalserver in der Spiegelungssitzung.</span><span class="sxs-lookup"><span data-stu-id="16915-138">If the cluster fails over to a different node, the failover clustered instance will continue as the principal server in the mirroring session.</span></span> <span data-ttu-id="16915-139">Falls Probleme auftreten, die den gesamten Cluster betreffen, können Sie den Dienst auf dem Spiegelserver erzwingen.</span><span class="sxs-lookup"><span data-stu-id="16915-139">If the entire cluster has problems, you can force service onto the mirror server.</span></span>  
  
 <span data-ttu-id="16915-140">**So richten Sie einen neuen SQL Server-Failovercluster ein**</span><span class="sxs-lookup"><span data-stu-id="16915-140">**To set up a new SQL Server failover cluster**</span></span>  
  
-   [<span data-ttu-id="16915-141">Erstellen eines neuen SQL Server-Failoverclusters &#40;Setup&#41;</span><span class="sxs-lookup"><span data-stu-id="16915-141">Create a New SQL Server Failover Cluster &#40;Setup&#41;</span></span>](../../sql-server/failover-clusters/install/create-a-new-sql-server-failover-cluster-setup.md)  
  
 <span data-ttu-id="16915-142">**So richten Sie die Datenbankspiegelung ein**</span><span class="sxs-lookup"><span data-stu-id="16915-142">**To set up database mirroring**</span></span>  
  
-   [<span data-ttu-id="16915-143">Einrichten der Datenbankspiegelung &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="16915-143">Setting Up Database Mirroring &#40;SQL Server&#41;</span></span>](setting-up-database-mirroring-sql-server.md)  
  
-   [<span data-ttu-id="16915-144">Einrichten einer Datenbank-Spiegelungssitzung mithilfe der Windows-Authentifizierung &#40;SQL Server Management Studio&#41;</span><span class="sxs-lookup"><span data-stu-id="16915-144">Establish a Database Mirroring Session Using Windows Authentication &#40;SQL Server Management Studio&#41;</span></span>](establish-database-mirroring-session-windows-authentication.md)  
  
## <a name="see-also"></a><span data-ttu-id="16915-145">Weitere Informationen</span><span class="sxs-lookup"><span data-stu-id="16915-145">See Also</span></span>  
 <span data-ttu-id="16915-146">[Datenbankspiegelung &#40;SQL Server&#41;](database-mirroring-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="16915-146">[Database Mirroring &#40;SQL Server&#41;](database-mirroring-sql-server.md) </span></span>  
 <span data-ttu-id="16915-147">[Betriebsmodi der Datenbankspiegelung](database-mirroring-operating-modes.md) </span><span class="sxs-lookup"><span data-stu-id="16915-147">[Database Mirroring Operating Modes](database-mirroring-operating-modes.md) </span></span>  
 [<span data-ttu-id="16915-148">AlwaysOn-Failoverclusterinstanzen (SQL Server)</span><span class="sxs-lookup"><span data-stu-id="16915-148">AlwaysOn Failover Cluster Instances (SQL Server)</span></span>](../../sql-server/failover-clusters/windows/always-on-failover-cluster-instances-sql-server.md) 
  
  
