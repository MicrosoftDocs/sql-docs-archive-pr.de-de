---
title: Betriebsmodi der Datenbankspiegelung | Microsoft-Dokumentation
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: high-availability
ms.topic: conceptual
helpviewer_keywords:
- database mirroring [SQL Server], operating modes
ms.assetid: f8a579c2-55d7-4278-8088-f1da1de5b2e6
author: MikeRayMSFT
ms.author: mikeray
ms.openlocfilehash: c944b402b8b1ba9b78036d667ec728ccaf561a91
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 08/04/2020
ms.locfileid: "87609425"
---
# <a name="database-mirroring-operating-modes"></a><span data-ttu-id="2ebb6-102">Betriebsmodi der Datenbankspiegelung</span><span class="sxs-lookup"><span data-stu-id="2ebb6-102">Database Mirroring Operating Modes</span></span>
  <span data-ttu-id="2ebb6-103">In diesem Thema werden die synchronen und asynchronen Betriebsmodi für Datenbank-Spiegelungssitzungen beschrieben.</span><span class="sxs-lookup"><span data-stu-id="2ebb6-103">This topic describes the synchronous and asynchronous operating modes for database mirroring sessions.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="2ebb6-104">Eine Einführung in die Datenbankspiegelung finden Sie unter [Datenbankspiegelung &#40;SQL Server&#41;](database-mirroring-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="2ebb6-104">For an introduction to database mirroring, see [Database Mirroring &#40;SQL Server&#41;](database-mirroring-sql-server.md).</span></span>  
  
 
  
##  <a name="terms-and-definitions"></a><a name="TermsAndDefinitions"></a> <span data-ttu-id="2ebb6-105">Begriffe und Definitionen</span><span class="sxs-lookup"><span data-stu-id="2ebb6-105">Terms and Definitions</span></span>  
 <span data-ttu-id="2ebb6-106">In diesem Abschnitt werden einige Begriffe eingeführt, die für dieses Thema wichtig sind.</span><span class="sxs-lookup"><span data-stu-id="2ebb6-106">This section introduces a few terms that are central to this topic.</span></span>  
  
 <span data-ttu-id="2ebb6-107">Modus mit hoher Leistung</span><span class="sxs-lookup"><span data-stu-id="2ebb6-107">High-performance mode</span></span>  
 <span data-ttu-id="2ebb6-108">Die Sitzung für die Datenbankspiegelung erfolgt asynchron und verwendet nur den Prinzipalserver und Spiegelserver.</span><span class="sxs-lookup"><span data-stu-id="2ebb6-108">The database mirroring session operates asynchronously and uses only the principal server and mirror server.</span></span> <span data-ttu-id="2ebb6-109">Die einzige Art des Rollenwechsels ist der erzwungene Dienst (mit möglichem Datenverlust).</span><span class="sxs-lookup"><span data-stu-id="2ebb6-109">The only form of role switching is forced service (with possible data loss).</span></span>  
  
 <span data-ttu-id="2ebb6-110">Modus für hohe Sicherheit</span><span class="sxs-lookup"><span data-stu-id="2ebb6-110">High-safety mode</span></span>  
 <span data-ttu-id="2ebb6-111">Die Sitzung für die Datenbankspiegelung erfolgt synchron und verwendet optional einen Zeugen sowie den Prinzipalserver und Spiegelserver.</span><span class="sxs-lookup"><span data-stu-id="2ebb6-111">The database mirroring session operates synchronously and, optionally, uses a witness, as well as the principal server and mirror server.</span></span>  
  
 <span data-ttu-id="2ebb6-112">Transaktionssicherheit</span><span class="sxs-lookup"><span data-stu-id="2ebb6-112">Transaction safety</span></span>  
 <span data-ttu-id="2ebb6-113">Entspricht einer spiegelungsspezifischen Datenbankeigenschaft, die bestimmt, ob eine Datenbank-Spiegelungssitzung synchron oder asynchron ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="2ebb6-113">A mirroring-specific database property that determines whether a database mirroring session operates synchronously or asynchronously.</span></span> <span data-ttu-id="2ebb6-114">Es gibt zwei Sicherheitsstufen: FULL und OFF.</span><span class="sxs-lookup"><span data-stu-id="2ebb6-114">There are two safety levels: FULL and OFF.</span></span>  
  
 <span data-ttu-id="2ebb6-115">Zeuge</span><span class="sxs-lookup"><span data-stu-id="2ebb6-115">Witness</span></span>  
 <span data-ttu-id="2ebb6-116">Ist nur für den Modus mit hoher Sicherheit bestimmt und entspricht einer optionalen SQL Server-Instanz, durch die der Spiegelserver erkennen kann, ob die Initiierung eines automatischen Failovers auszulösen ist.</span><span class="sxs-lookup"><span data-stu-id="2ebb6-116">For use only with high-safety mode, an optional instance of SQL Server that enables the mirror server to recognize whether to initiate an automatic failover.</span></span> <span data-ttu-id="2ebb6-117">Im Gegensatz zu den zwei Failoverpartnern bedient der Zeuge nicht die Datenbank.</span><span class="sxs-lookup"><span data-stu-id="2ebb6-117">Unlike the two failover partners, the witness does not serve the database.</span></span> <span data-ttu-id="2ebb6-118">Die Unterstützung des automatischen Failovers ist die einzige Aufgabe des Zeugen.</span><span class="sxs-lookup"><span data-stu-id="2ebb6-118">Supporting automatic failover is the only role of the witness.</span></span>  
  
##  <a name="asynchronous-database-mirroring-high-performance-mode"></a><a name="VisualElement"></a><span data-ttu-id="2ebb6-119">Asynchrone Daten Bank Spiegelung (Modus für hohe Leistung)</span><span class="sxs-lookup"><span data-stu-id="2ebb6-119">Asynchronous Database Mirroring (High-Performance Mode)</span></span>  
 <span data-ttu-id="2ebb6-120">In diesem Abschnitt werden die Funktionsweise der asynchronen Datenbankspiegelung, die geeignete Verwendung des Modus für hohe Leistung sowie die entsprechende Reaktion auf den Fehlschlag des Prinzipalservers beschrieben.</span><span class="sxs-lookup"><span data-stu-id="2ebb6-120">This section describes how asynchronous database mirroring works, when it is appropriate to use high-performance mode, and how to respond if the principal server fails.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="2ebb6-121">Die meisten Editionen von [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] unterstützen nur die synchrone Datenbankspiegelung (nur SAFETY FULL).</span><span class="sxs-lookup"><span data-stu-id="2ebb6-121">Most editions of [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] support only synchronous database mirroring ("Safety Full Only").</span></span> <span data-ttu-id="2ebb6-122">Informationen zu Editionen, die die Daten Bank Spiegelung vollständig unterstützen, finden Sie unter "hohe Verfügbarkeit (AlwaysOn)" in [den von den Editionen von SQL Server 2014 unterstützten Funktionen](../../getting-started/features-supported-by-the-editions-of-sql-server-2014.md).</span><span class="sxs-lookup"><span data-stu-id="2ebb6-122">For information about editions that fully support database mirroring, see "High Availability (AlwaysOn)" in [Features Supported by the Editions of SQL Server 2014](../../getting-started/features-supported-by-the-editions-of-sql-server-2014.md).</span></span>  
  
 <span data-ttu-id="2ebb6-123">Wenn die Transaktionssicherheit auf OFF festgelegt ist, wird die Datenbank-Spiegelungssitzung asynchron ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="2ebb6-123">When transaction safety is set to OFF, the database mirroring session operates asynchronously.</span></span> <span data-ttu-id="2ebb6-124">Im asynchronen Betrieb wird nur ein Betriebsmodus unterstützt, der Modus für hohe Leistung.</span><span class="sxs-lookup"><span data-stu-id="2ebb6-124">Asynchronous operation supports only one operating mode-high-performance mode.</span></span> <span data-ttu-id="2ebb6-125">Dieser Modus verbessert die Leistung auf Kosten der Hochverfügbarkeit.</span><span class="sxs-lookup"><span data-stu-id="2ebb6-125">This mode enhances performance at the expense of high availability.</span></span> <span data-ttu-id="2ebb6-126">Im Modus für hohe Leistung werden nur der Prinzipalserver und der Spiegelserver verwendet.</span><span class="sxs-lookup"><span data-stu-id="2ebb6-126">High-performance mode uses just the principal server and the mirror server.</span></span> <span data-ttu-id="2ebb6-127">Probleme auf dem Spiegelserver haben nie Auswirkungen auf den Prinzipalserver.</span><span class="sxs-lookup"><span data-stu-id="2ebb6-127">Problems on the mirror server never impact the principal server.</span></span> <span data-ttu-id="2ebb6-128">Bei einem Ausfall des Prinzipalservers wird die Spiegeldatenbank als DISCONNECTED gekennzeichnet, steht jedoch als betriebsbereit zur Verfügung.</span><span class="sxs-lookup"><span data-stu-id="2ebb6-128">On the loss of the principal server, the mirror database is marked DISCONNECTED but is available as a warm standby.</span></span>  
  
 <span data-ttu-id="2ebb6-129">Im Modus für hohe Leistung wird nur eine Form des Rollenwechsels unterstützt: erzwungener Dienst (mit möglichem Datenverlust), der den Spiegelserver als betriebsbereiten Standbyserver verwendet.</span><span class="sxs-lookup"><span data-stu-id="2ebb6-129">High-performance mode, supports only one form of role switching: forced service (with possible data loss), which uses the mirror server as a warm standby server.</span></span> <span data-ttu-id="2ebb6-130">Der erzwungene Dienst ist eine der möglichen Antworten auf einen Fehler des Prinzipalservers.</span><span class="sxs-lookup"><span data-stu-id="2ebb6-130">Forced service is one of the possible responses to the failure of the principal server.</span></span> <span data-ttu-id="2ebb6-131">Da Datenverlust möglich ist, sollten Sie andere Alternativen in Betracht ziehen, bevor Sie den erzwungenen Dienst für den Spiegelserver verwenden.</span><span class="sxs-lookup"><span data-stu-id="2ebb6-131">Because data loss is possible, you should consider other alternatives before forcing service to the mirror.</span></span> <span data-ttu-id="2ebb6-132">Weitere Informationen finden Sie im Abschnitt zu [Antworten auf Fehler des Prinzipalservers](#WhenPrincipalFails)weiter unten in diesem Thema.</span><span class="sxs-lookup"><span data-stu-id="2ebb6-132">For more information, see [Responding to Failure of the Principal](#WhenPrincipalFails), later in this topic.</span></span>  
  
 <span data-ttu-id="2ebb6-133">Die folgende Abbildung veranschaulicht die Konfiguration einer Sitzung im Modus für hohe Leistung.</span><span class="sxs-lookup"><span data-stu-id="2ebb6-133">The following figure shows the configuration of a session using high-performance mode.</span></span>  
  
 <span data-ttu-id="2ebb6-134">![Reine Partnerkonfiguration einer Sitzung](../media/dbm-high-performance-mode.gif "Reine Partnerkonfiguration einer Sitzung")</span><span class="sxs-lookup"><span data-stu-id="2ebb6-134">![Partner-only configuration of a session](../media/dbm-high-performance-mode.gif "Partner-only configuration of a session")</span></span>  
  
 <span data-ttu-id="2ebb6-135">Sobald im Modus für hohe Leistung der Prinzipalserver das Protokoll für eine Transaktion an den Spiegelserver sendet, wird vom Prinzipalserver eine Bestätigung an den Client gesendet, ohne auf eine Bestätigung vom Spiegelserver zu warten.</span><span class="sxs-lookup"><span data-stu-id="2ebb6-135">In high-performance mode, as soon as the principal server sends the log for a transaction to the mirror server, the principal server sends a confirmation to the client, without waiting for an acknowledgement from the mirror server.</span></span> <span data-ttu-id="2ebb6-136">Für Transaktionen wird ein Commit ausgeführt, ohne darauf zu warten, dass der Spiegelserver das Protokoll auf dem Datenträger speichert.</span><span class="sxs-lookup"><span data-stu-id="2ebb6-136">Transactions commit without waiting for the mirror server to write the log to disk.</span></span> <span data-ttu-id="2ebb6-137">Im asynchronen Betrieb kann der Prinzipalserver mit minimaler Transaktionslatenzzeit ausgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="2ebb6-137">Asynchronous operation permits the principal server to run with minimum transaction latency.</span></span>  
  
 <span data-ttu-id="2ebb6-138">Der Spiegelserver versucht mit den Protokolldatensätzen Schritt zu halten, die vom Prinzipalserver gesendet werden.</span><span class="sxs-lookup"><span data-stu-id="2ebb6-138">The mirror server attempts to keep up with the log records sent by the principal server.</span></span> <span data-ttu-id="2ebb6-139">Die Spiegeldatenbank kann sich jedoch in einem gewissen zeitlichen Abstand zur Prinzipaldatenbank befinden, wobei der Abstand zwischen den Datenbanken normalerweise gering ist.</span><span class="sxs-lookup"><span data-stu-id="2ebb6-139">But the mirror database might lag somewhat behind the principal database, though typically the gap between the databases is small.</span></span> <span data-ttu-id="2ebb6-140">Diese Differenz kann jedoch umfangreich werden, wenn der Prinzipalserver stark ausgelastet ist oder wenn der Spiegelserver überlastet ist.</span><span class="sxs-lookup"><span data-stu-id="2ebb6-140">However, the gap can become substantial if the principal server is under a heavy work load or the system of the mirror server is over loaded.</span></span>  
  
 
  
###  <a name="when-is-high-performance-mode-appropriate"></a><a name="WhenUseHighPerf"></a> <span data-ttu-id="2ebb6-141">Wann eignet sich der Modus für hohe Leistung?</span><span class="sxs-lookup"><span data-stu-id="2ebb6-141">When Is High-Performance Mode Appropriate?</span></span>  
 <span data-ttu-id="2ebb6-142">Der Modus für hohe Leistung kann bei der Wiederherstellung im Notfall hilfreich sein, wenn der Prinzipalserver und der Spiegelserver durch eine beträchtliche Distanz voneinander getrennt sind und wenn kleine Fehler den Prinzipalserver nicht beeinträchtigen sollen.</span><span class="sxs-lookup"><span data-stu-id="2ebb6-142">High-performance mode can be useful in a disaster-recovery scenario in which the principal and mirror servers are separated by a significant distance and where you do not want small errors to impact the principal server.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="2ebb6-143">Protokollversand kann eine Ergänzung zur Datenbankspiegelung darstellen und ist eine empfehlenswerte Alternative zur asynchronen Datenbankspiegelung.</span><span class="sxs-lookup"><span data-stu-id="2ebb6-143">Log shipping can be a supplement to database mirroring and is a favorable alternative to asynchronous database mirroring.</span></span> <span data-ttu-id="2ebb6-144">Informationen zu den Vorteilen des Protokollversands finden Sie unter [Lösungen mit hoher Verfügbarkeit &#40;SQL Server&#41;](../../sql-server/failover-clusters/high-availability-solutions-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="2ebb6-144">For information about the advantages of log shipping, see [High Availability Solutions &#40;SQL Server&#41;](../../sql-server/failover-clusters/high-availability-solutions-sql-server.md).</span></span> <span data-ttu-id="2ebb6-145">Informationen zum Verwenden des Protokollversands mit Datenbankspiegelung finden Sie unter [Datenbankspiegelung und Protokollversand &#40;SQL Server&#41;](database-mirroring-and-log-shipping-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="2ebb6-145">For information on using log shipping with database mirroring, see [Database Mirroring and Log Shipping &#40;SQL Server&#41;](database-mirroring-and-log-shipping-sql-server.md).</span></span>  
  
###  <a name="the-impact-of-a-witness-on-high-performance-mode"></a><a name="WitnessImpactOnHighPerf"></a> <span data-ttu-id="2ebb6-146">Auswirkung eines Zeugen im Modus für hohe Leistung</span><span class="sxs-lookup"><span data-stu-id="2ebb6-146">The Impact of a Witness on High-Performance Mode</span></span>  
 <span data-ttu-id="2ebb6-147">Wenn Sie Transact-SQL zum Konfigurieren des Modus für hohe Leistung verwenden und die SAFETY-Eigenschaft auf OFF festgelegt ist, sollte unbedingt auch für die WITNESS-Eigenschaft OFF festgelegt sein.</span><span class="sxs-lookup"><span data-stu-id="2ebb6-147">If you use Transact-SQL to configure high-performance mode, whenever the SAFETY property is set to OFF, we strongly recommend that the WITNESS property also be set to OFF.</span></span> <span data-ttu-id="2ebb6-148">Ein Zeuge kann im Modus für hohe Leistung vorhanden sein, er stellt jedoch keinen Vorteil, sondern ein Risiko dar.</span><span class="sxs-lookup"><span data-stu-id="2ebb6-148">A witness can coexist with high-performance mode, but the witness provides no benefit and introduces risk.</span></span>  
  
 <span data-ttu-id="2ebb6-149">Wenn der Zeuge von der Sitzung getrennt wird und einer der Partner ausfällt, ist die Datenbank nicht mehr verfügbar.</span><span class="sxs-lookup"><span data-stu-id="2ebb6-149">If the witness is disconnected from the session when either partner goes down, the database becomes unavailable.</span></span> <span data-ttu-id="2ebb6-150">Dies ist darauf zurückzuführen, dass die Sitzung ein aus mindestens zwei Serverinstanzen bestehendes Quorum benötigt, wenn ein Zeuge festgelegt ist, obwohl der Modus für hohe Leistung keinen Zeugen erfordert.</span><span class="sxs-lookup"><span data-stu-id="2ebb6-150">This is because, even though high-performance mode does not require a witness, if one is set, the session requires a quorum consisting of two or more server instances.</span></span> <span data-ttu-id="2ebb6-151">Wenn die Sitzung das Quorum verliert, kann sie die Datenbank nicht bedienen.</span><span class="sxs-lookup"><span data-stu-id="2ebb6-151">If the session losses quorum, it cannot serve the database.</span></span>  
  
 <span data-ttu-id="2ebb6-152">Wenn ein Zeuge in einer Sitzung im Modus für hohe Leistung festgelegt ist, hat das Erzwingen eines Quorums folgende Auswirkungen:</span><span class="sxs-lookup"><span data-stu-id="2ebb6-152">When a witness is set in a high-performance mode session, the enforcement of quorum means that:</span></span>  
  
-   <span data-ttu-id="2ebb6-153">Wenn der Spiegelserver ausfällt, muss der Prinzipalserver mit dem Zeugen verbunden sein.</span><span class="sxs-lookup"><span data-stu-id="2ebb6-153">If the mirror server is lost, the principal server must be connected to the witness.</span></span> <span data-ttu-id="2ebb6-154">Andernfalls schaltet der Prinzipalserver die Datenbank so lange offline, bis entweder der Zeuge oder der Spiegelserver wieder mit der Sitzung verbunden ist.</span><span class="sxs-lookup"><span data-stu-id="2ebb6-154">Otherwise, the principal server takes its database offline until either the witness or mirror server rejoins the session.</span></span>  
  
-   <span data-ttu-id="2ebb6-155">Wenn der Prinzipalserver ausfällt, wird für das Erzwingen des Diensts auf dem Spiegelserver eine Verbindung des Spiegelservers mit dem Zeugen benötigt.</span><span class="sxs-lookup"><span data-stu-id="2ebb6-155">If the principal server is lost, forcing service to the mirror server requires that the mirror server be connected to the witness.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="2ebb6-156">Weitere Informationen zu den Quorumtypen finden Sie unter [Quorum: Auswirkungen eines Zeugen auf die Datenbankverfügbarkeit &#40;Datenbankspiegelung&#41;](quorum-how-a-witness-affects-database-availability-database-mirroring.md).</span><span class="sxs-lookup"><span data-stu-id="2ebb6-156">For information about the types of quorums, see [Quorum: How a Witness Affects Database Availability &#40;Database Mirroring&#41;](quorum-how-a-witness-affects-database-availability-database-mirroring.md).</span></span>  
  
###  <a name="responding-to-failure-of-the-principal"></a><a name="WhenPrincipalFails"></a> <span data-ttu-id="2ebb6-157">Antworten auf Fehler des Prinzipalservers</span><span class="sxs-lookup"><span data-stu-id="2ebb6-157">Responding to Failure of the Principal</span></span>  
 <span data-ttu-id="2ebb6-158">Bei einem Fehler des Prinzipalservers hat der Datenbankbesitzer folgende Möglichkeiten:</span><span class="sxs-lookup"><span data-stu-id="2ebb6-158">When the principal fails, the database owner has several choices, as follows:</span></span>  
  
-   <span data-ttu-id="2ebb6-159">Die Datenbank nicht verfügbar belassen, bis der Prinzipalserver wieder verfügbar ist.</span><span class="sxs-lookup"><span data-stu-id="2ebb6-159">Leave the database unavailable until the principal becomes available again.</span></span>  
  
     <span data-ttu-id="2ebb6-160">Falls die Prinzipaldatenbank und das zugehörige Transaktionsprotokoll intakt sind, werden mit dieser Methode alle Transaktionen, für die ein Commit ausgeführt wurde, auf Kosten der Verfügbarkeit beibehalten.</span><span class="sxs-lookup"><span data-stu-id="2ebb6-160">If the principal database and its transaction log are intact, this choice preserves all of the committed transactions at the expense of availability.</span></span>  
  
-   <span data-ttu-id="2ebb6-161">Beenden der Datenbank-Spiegelungssitzung, manuelles Aktualisieren der Datenbank und dann Starten einer neuen Datenbank-Spiegelungssitzung.</span><span class="sxs-lookup"><span data-stu-id="2ebb6-161">Stop the database mirroring session, manually update the database, and then begin a new database mirroring session.</span></span>  
  
     <span data-ttu-id="2ebb6-162">Falls die Prinzipaldatenbank verloren gegangen ist, aber der Prinzipalserver noch ausgeführt wird, versuchen Sie sofort das Protokollfragment in der Prinzipaldatenbank zu sichern.</span><span class="sxs-lookup"><span data-stu-id="2ebb6-162">If the principal database is lost but the principal server is still running, immediately attempt to back up the tail of the log on the principal database.</span></span> <span data-ttu-id="2ebb6-163">Falls die Sicherung des Protokollfragments erfolgreich ist, ist das Entfernen der Spiegelung vermutlich die beste Alternative.</span><span class="sxs-lookup"><span data-stu-id="2ebb6-163">If the tail-log backup succeeds, removing mirroring may be your best alternative.</span></span> <span data-ttu-id="2ebb6-164">Nachdem Sie die Spiegelung entfernt haben, können Sie das Protokoll in der ehemaligen Spiegeldatenbank wiederherstellen, wodurch alle Daten erhalten bleiben.</span><span class="sxs-lookup"><span data-stu-id="2ebb6-164">After removing mirroring, you can restore the log onto the former mirror database, which preserves all of the data.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="2ebb6-165">Falls bei der Sicherung des Protokollfragments ein Fehler auftrat und Sie nicht auf die Wiederherstellung des Prinzipalservers warten können, sollten Sie den Dienst erzwingen. Dies hat den Vorteil, dass der Sitzungsstatus erhalten bleibt.</span><span class="sxs-lookup"><span data-stu-id="2ebb6-165">If the tail-log backup failed and you cannot wait for the principal server to recover, consider forcing service, which has the advantage of maintaining the session state.</span></span>  
  
-   <span data-ttu-id="2ebb6-166">Erzwingen des Dienstes (mit möglichem Datenverlust) auf dem Spiegelserver.</span><span class="sxs-lookup"><span data-stu-id="2ebb6-166">Force service (with possible data loss) on the mirror server.</span></span>  
  
     <span data-ttu-id="2ebb6-167">Das Erzwingen des Dienstes ist ausschließlich eine Maßnahme im Rahmen der Wiederherstellung im Notfall und sollte nur selten verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="2ebb6-167">Forced service is strictly a disaster recovery method and should be used sparingly.</span></span> <span data-ttu-id="2ebb6-168">Das Erzwingen des Dienstes ist nur möglich, wenn der Prinzipalserver heruntergefahren ist, es sich um eine asynchrone Sitzung handelt (die Transaktionssicherheit ist auf OFF festgelegt) und die Sitzung keinen Zeugen aufweist (WITNESS ist auf OFF festgelegt) oder der Zeuge mit dem Spiegelserver verbunden ist (er also ein Quorum besitzt).</span><span class="sxs-lookup"><span data-stu-id="2ebb6-168">Forcing service is possible only if the principal server is down, the session is asynchronous (transaction safety is set to OFF), and either the session does not have any witness (the WITNESS property is set to OFF) or the witness is connected to the mirror server (that is, they have quorum).</span></span>  
  
     <span data-ttu-id="2ebb6-169">Durch das Erzwingen des Dienstes nimmt der Spiegelserver die Rolle des Prinzipalservers an und bietet die Datenbankkopie den Clients an.</span><span class="sxs-lookup"><span data-stu-id="2ebb6-169">Forcing service causes the mirror server to assume the role of principal and serve its copy of the database for clients.</span></span> <span data-ttu-id="2ebb6-170">Wenn der Dienst erzwungen wird, gehen alle Transaktionsprotokolle verloren, die der Prinzipalserver noch nicht an den Spiegelserver gesendet hat.</span><span class="sxs-lookup"><span data-stu-id="2ebb6-170">When service is forced, whatever transaction logs the principal has not yet sent to the mirror server are lost.</span></span> <span data-ttu-id="2ebb6-171">Deshalb sollten Sie das Erzwingen des Dienstes für Situationen vorbehalten, in denen ein möglicher Datenverlust akzeptabel ist und die sofortige Verfügbarkeit der Datenbank von entscheidender Bedeutung ist.</span><span class="sxs-lookup"><span data-stu-id="2ebb6-171">Therefore, you should limit forced service to situations where possible data loss is acceptable and immediate database availability is critical.</span></span> <span data-ttu-id="2ebb6-172">Informationen zur Funktionsweise des erzwungenen Diensts und zu bewährten Methoden für dessen Verwendung finden Sie unter [Rollenwechsel während einer Datenbank-Spiegelungssitzung &#40;SQL Server&#41;](role-switching-during-a-database-mirroring-session-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="2ebb6-172">For information on how forced service works and on best practices for using it, see [Role Switching During a Database Mirroring Session &#40;SQL Server&#41;](role-switching-during-a-database-mirroring-session-sql-server.md).</span></span>  
  
##  <a name="synchronous-database-mirroring-high-safety-mode"></a><a name="Sync"></a> <span data-ttu-id="2ebb6-173">Synchrone Datenbankspiegelung (Modus für hohe Sicherheit)</span><span class="sxs-lookup"><span data-stu-id="2ebb6-173">Synchronous Database Mirroring (High-Safety Mode)</span></span>  
 <span data-ttu-id="2ebb6-174">In diesem Abschnitt wird die Funktionsweise der synchronen Datenbankspiegelung beschrieben, einschließlich der alternativen Modi für hohe Sicherheit (mit automatischem Failover und ohne automatischem Failover). Außerdem enthält der Abschnitt Informationen zur Rolle des Zeugen beim automatischen Failover.</span><span class="sxs-lookup"><span data-stu-id="2ebb6-174">This section describes how synchronous database mirroring works, including the alternative high-safety modes (with automatic failover and without automatic failover), and contains information about the role of the witness in automatic failover.</span></span>  
  
 <span data-ttu-id="2ebb6-175">Wenn die Transaktionssicherheit auf FULL festgelegt ist, wird die Datenbank-Spiegelungssitzung im Modus für hohe Sicherheit und – nach einer Synchronisierungsphase zu Beginn – synchron ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="2ebb6-175">When transaction safety is set to FULL, the database mirroring session runs in high-safety mode and operates synchronously after an initial synchronizing phase.</span></span> <span data-ttu-id="2ebb6-176">In diesem Abschnitt werden die Details der Datenbank-Spiegelungssitzungen beschrieben, die für den synchronen Vorgang konfiguriert werden.</span><span class="sxs-lookup"><span data-stu-id="2ebb6-176">This section describes the details of database mirroring sessions that are configured for synchronous operation.</span></span>  
  
 <span data-ttu-id="2ebb6-177">Um einen synchronen Vorgang für eine Sitzung zu erreichen, muss der Spiegelserver die Spiegeldatenbank mit der Prinzipaldatenbank synchronisieren.</span><span class="sxs-lookup"><span data-stu-id="2ebb6-177">To achieve synchronous operation for a session, the mirror server must synchronize the mirror database with the principal database.</span></span> <span data-ttu-id="2ebb6-178">Wenn die Sitzung startet, beginnt der Prinzipalserver damit, sein aktives Protokoll an den Spiegelserver zu senden.</span><span class="sxs-lookup"><span data-stu-id="2ebb6-178">When the session begins, the principal server begins sending its active log to the mirror server.</span></span> <span data-ttu-id="2ebb6-179">Der Spiegelserver schreibt so schnell wie möglich alle eingehenden Protokolldatensätze auf den Datenträger.</span><span class="sxs-lookup"><span data-stu-id="2ebb6-179">The mirror server writes all of the incoming log records to disk as quickly as possible.</span></span> <span data-ttu-id="2ebb6-180">Sobald alle empfangenen Protokolldatensätze auf den Datenträger geschrieben wurden, werden die Datenbanken synchronisiert.</span><span class="sxs-lookup"><span data-stu-id="2ebb6-180">As soon as all of the received log records have been written to disk, the databases are synchronized.</span></span> <span data-ttu-id="2ebb6-181">Solange die Partner kommunizieren, verbleiben die Datenbanken synchronisiert.</span><span class="sxs-lookup"><span data-stu-id="2ebb6-181">As long as the partners remain in communication, the databases remain synchronized.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="2ebb6-182">Verwenden Sie zum Überwachen von Statusänderungen in einer Datenbank-Spiegelungssitzung die **Database Mirroring State Change** -Ereignisklasse.</span><span class="sxs-lookup"><span data-stu-id="2ebb6-182">To monitor state changes in a database mirroring session, use the **Database Mirroring State Change** event class.</span></span> <span data-ttu-id="2ebb6-183">Weitere Informationen finden Sie unter [Database Mirroring State Change Event Class](../../relational-databases/event-classes/database-mirroring-state-change-event-class.md).</span><span class="sxs-lookup"><span data-stu-id="2ebb6-183">For more information, see [Database Mirroring State Change Event Class](../../relational-databases/event-classes/database-mirroring-state-change-event-class.md).</span></span>  
  
 <span data-ttu-id="2ebb6-184">Nach Abschluss der Synchronisierung wird für jede Transaktion, für die auf der Prinzipaldatenbank ein Commit ausgeführt wurde, auch auf dem Spiegelserver ein Commit ausgeführt, um den Schutz der Daten sicherzustellen.</span><span class="sxs-lookup"><span data-stu-id="2ebb6-184">After synchronization finishes, every transaction committed on the principal database is also committed on the mirror server, guaranteeing protection of the data.</span></span> <span data-ttu-id="2ebb6-185">Dies wird erreicht, indem erst dann ein Commit für eine Transaktion auf der Prinzipaldatenbank ausgeführt wird, wenn der Prinzipalserver eine Meldung vom Spiegelserver empfängt, die besagt, dass das Protokoll der Transaktion auf den Datenträger geschrieben wurde.</span><span class="sxs-lookup"><span data-stu-id="2ebb6-185">This is achieved by waiting to commit a transaction on the principal database, until the principal server receives a message from the mirror server stating that it has hardened the transaction's log to disk.</span></span> <span data-ttu-id="2ebb6-186">Beachten Sie, dass die Latenzzeit für diese Meldung die Latenzzeit für die Transaktion verlängert.</span><span class="sxs-lookup"><span data-stu-id="2ebb6-186">Note the wait for this message increases the latency of the transaction.</span></span>  
  
 <span data-ttu-id="2ebb6-187">Die für die Synchronisierung benötigte Zeit hängt in hohem Maße davon ab, wie weit die Spiegeldatenbank zu Beginn der Sitzung gegenüber der Prinzipaldatenbank zurücklag (gemessen an der Anzahl der Protokolldatensätze, die anfänglich vom Prinzipalserver empfangen wurden), sowie von der Arbeitsauslastung auf der Prinzipaldatenbank und der Geschwindigkeit des Spiegelsystems.</span><span class="sxs-lookup"><span data-stu-id="2ebb6-187">The time required for synchronization depends essentially on how far the mirror database was behind the principal database at the start of the session (measured by the number of log records initially received from the principal server), the work load on the principal database, and the speed of the mirror system.</span></span> <span data-ttu-id="2ebb6-188">Nachdem eine Sitzung synchronisiert wurde, verbleibt das festgeschriebene Protokoll, das noch auf der Spiegeldatenbank wiederholt werden muss, in der Wiederholungswarteschlange.</span><span class="sxs-lookup"><span data-stu-id="2ebb6-188">After a session is synchronized, the hardened log that has yet to be redone on the mirror database remains in the redo queue.</span></span>  
  
 <span data-ttu-id="2ebb6-189">Sobald die Spiegeldatenbank synchronisiert ist, wird der Status beider Kopien der Datenbank in SYNCHRONIZED geändert.</span><span class="sxs-lookup"><span data-stu-id="2ebb6-189">As soon as the mirror database becomes synchronized, the state of both the copies of the database changes to SYNCHRONIZED.</span></span>  
  
 <span data-ttu-id="2ebb6-190">Die synchrone Operation wird wie folgt beibehalten:</span><span class="sxs-lookup"><span data-stu-id="2ebb6-190">Synchronous operation is maintained in the following manner:</span></span>  
  
1.  <span data-ttu-id="2ebb6-191">Der Prinzipalserver schreibt das Protokoll für die Transaktion in das Transaktionsprotokoll, sobald er eine Transaktion von einem Client erhält.</span><span class="sxs-lookup"><span data-stu-id="2ebb6-191">On receiving a transaction from a client, the principal server writes the log for the transaction to the transaction log.</span></span>  
  
2.  <span data-ttu-id="2ebb6-192">Der Prinzipalserver schreibt die Transaktion in die Datenbank und sendet gleichzeitig den Protokolldatensatz an den Spiegelserver.</span><span class="sxs-lookup"><span data-stu-id="2ebb6-192">The principal server writes the transaction to the database and, concurrently, sends the log record to the mirror server.</span></span> <span data-ttu-id="2ebb6-193">Der Prinzipalserver wartet auf eine Bestätigung vom Spiegelserver, bevor er dem Client eine der folgenden Aktionen bestätigt: einen Transaktionscommit oder ein Rollback.</span><span class="sxs-lookup"><span data-stu-id="2ebb6-193">The principal server waits for an acknowledgement from the mirror server before confirming either of the following to the client: a transaction commit or a rollback.</span></span>  
  
3.  <span data-ttu-id="2ebb6-194">Der Spiegelserver schreibt das Protokoll auf den Datenträger und gibt eine Bestätigung an den Prinzipalserver zurück.</span><span class="sxs-lookup"><span data-stu-id="2ebb6-194">The mirror server hardens the log to disk and returns an acknowledgement to the principal server.</span></span>  
  
4.  <span data-ttu-id="2ebb6-195">Sobald er die Bestätigung vom Spiegelserver erhält, sendet der Prinzipalserver eine Bestätigungsmeldung an den Client.</span><span class="sxs-lookup"><span data-stu-id="2ebb6-195">On receiving the acknowledgement from the mirror server, the principal server sends a confirmation message to the client.</span></span>  
  
 <span data-ttu-id="2ebb6-196">Im Modus für hohe Sicherheit werden Ihre Daten dadurch geschützt, dass die an zwei Stellen vorhandenen Daten synchronisiert werden müssen.</span><span class="sxs-lookup"><span data-stu-id="2ebb6-196">High-safety mode protects your data by requiring the data to be synchronized between two places.</span></span> <span data-ttu-id="2ebb6-197">Es ist sichergestellt, dass alle Transaktionen, für die ein Commit ausgeführt wurde, auf dem Spiegelserver auf den Datenträger geschrieben werden.</span><span class="sxs-lookup"><span data-stu-id="2ebb6-197">All the committed transactions are guaranteed to be written to disk on the mirror server.</span></span>  
  

  
###  <a name="high-safety-mode-without-automatic-failover"></a><a name="HighSafetyWithOutAutoFailover"></a> <span data-ttu-id="2ebb6-198">Modus für hohe Sicherheit ohne automatisches Failover</span><span class="sxs-lookup"><span data-stu-id="2ebb6-198">High-Safety Mode Without Automatic Failover</span></span>  
 <span data-ttu-id="2ebb6-199">Die folgende Abbildung veranschaulicht die Konfiguration des Modus für hohe Sicherheit ohne automatisches Failover.</span><span class="sxs-lookup"><span data-stu-id="2ebb6-199">The following figure shows the configuration of high-safety mode without automatic failover.</span></span> <span data-ttu-id="2ebb6-200">Die Konfiguration besteht nur aus den zwei Partnern.</span><span class="sxs-lookup"><span data-stu-id="2ebb6-200">The configuration consists of only the two partners.</span></span>  
  
 <span data-ttu-id="2ebb6-201">![Partnerkommunikation ohne Zeugen](../media/dbm-high-protection-mode.gif "Partnerkommunikation ohne Zeugen")</span><span class="sxs-lookup"><span data-stu-id="2ebb6-201">![Partners communicating without a witness](../media/dbm-high-protection-mode.gif "Partners communicating without a witness")</span></span>  
  
 <span data-ttu-id="2ebb6-202">Wenn die Partner verbunden sind und die Datenbank bereits synchronisiert ist, wird das manuelle Failover unterstützt.</span><span class="sxs-lookup"><span data-stu-id="2ebb6-202">When the partners are connected and the database is already synchronized, manual failover is supported.</span></span> <span data-ttu-id="2ebb6-203">Wenn die Spiegelserverinstanz ausfällt, bleibt die Prinzipalserverinstanz in Betrieb und wird ungeschützt ausgeführt (d. h., ohne die Spiegelung der Daten).</span><span class="sxs-lookup"><span data-stu-id="2ebb6-203">If the mirror server instance goes down, the principal server instance is unaffected and runs exposed (that is without mirroring the data).</span></span> <span data-ttu-id="2ebb6-204">Wenn der Prinzipalserver ausfällt, wird die Spiegelung unterbrochen, der Dienst kann aber auf dem Spiegelserver erzwungen werden (mit möglichem Datenverlust).</span><span class="sxs-lookup"><span data-stu-id="2ebb6-204">If the principal server is lost, the mirror is suspended, but service can be forced to the mirror server (with possible data loss).</span></span> <span data-ttu-id="2ebb6-205">Weitere Informationen finden Sie unter [Rollenwechsel während einer Datenbank-Spiegelungssitzung &#40;SQL Server&#41;](role-switching-during-a-database-mirroring-session-sql-server.md)herunter.</span><span class="sxs-lookup"><span data-stu-id="2ebb6-205">For more information, see [Role Switching During a Database Mirroring Session &#40;SQL Server&#41;](role-switching-during-a-database-mirroring-session-sql-server.md).</span></span>  
  
###  <a name="high-safety-mode-with-automatic-failover"></a><a name="HighSafetyWithAutoFailover"></a> <span data-ttu-id="2ebb6-206">Modus für hohe Sicherheit mit automatischem Failover</span><span class="sxs-lookup"><span data-stu-id="2ebb6-206">High-Safety Mode with Automatic Failover</span></span>  
 <span data-ttu-id="2ebb6-207">Automatisches Failover bietet Hochverfügbarkeit, indem sichergestellt wird, dass die Datenbank trotz Ausfall eines Servers weiterhin bedient wird.</span><span class="sxs-lookup"><span data-stu-id="2ebb6-207">Automatic failover provides high availability by ensuring that the database is still served after the loss of one server.</span></span> <span data-ttu-id="2ebb6-208">Zur Unterstützung eines automatischen Failovers muss die Sitzung eine dritte Serverinstanz besitzen, den *Zeugen*, der sich idealerweise auf einem dritten Computer befindet.</span><span class="sxs-lookup"><span data-stu-id="2ebb6-208">Automatic failover requires that the session possess a third server instance, the *witness*, which ideally resides on a third computer.</span></span> <span data-ttu-id="2ebb6-209">Die folgende Abbildung veranschaulicht die Konfiguration einer Sitzung im Modus für hohe Sicherheit mit automatischem Failover.</span><span class="sxs-lookup"><span data-stu-id="2ebb6-209">The following figure shows the configuration of a high-safety mode session that supports automatic failover.</span></span>  
  
 <span data-ttu-id="2ebb6-210">![Zeuge und die zwei Partner einer Sitzung](../media/dbm-high-availability-mode.gif "Zeuge und die zwei Partner einer Sitzung")</span><span class="sxs-lookup"><span data-stu-id="2ebb6-210">![The witness and two partners of a session](../media/dbm-high-availability-mode.gif "The witness and two partners of a session")</span></span>  
  
 <span data-ttu-id="2ebb6-211">Im Gegensatz zu den beiden Partnern stellt der Zeuge die Datenbank nicht bereit.</span><span class="sxs-lookup"><span data-stu-id="2ebb6-211">Unlike the two partners, the witness does not serve the database.</span></span> <span data-ttu-id="2ebb6-212">Der Zeuge unterstützt das automatische Failover einfach dadurch, dass er prüft, ob der Prinzipalserver aktiv und funktionsfähig ist.</span><span class="sxs-lookup"><span data-stu-id="2ebb6-212">The witness simply supports automatic failover by verifying whether the principal server is up and functioning.</span></span> <span data-ttu-id="2ebb6-213">Der Spiegelserver initiiert das automatische Failover nur, wenn der Spiegel und der Zeuge miteinander verbunden bleiben, nachdem beide vom Prinzipalserver getrennt wurden.</span><span class="sxs-lookup"><span data-stu-id="2ebb6-213">The mirror server initiates automatic failover only if the mirror and the witness remain connected to each other after both have been disconnected from the principal server.</span></span>  
  
 <span data-ttu-id="2ebb6-214">Wenn ein Zeuge festgelegt ist, benötigt die Sitzung das *Quorum*, eine Beziehung zwischen mindestens zwei Serverinstanzen, damit die Datenbank verfügbar gemacht werden kann.</span><span class="sxs-lookup"><span data-stu-id="2ebb6-214">When a witness is set, the session requires *quorum*-a relationship between at least two server instances that allows the database to be made available.</span></span> <span data-ttu-id="2ebb6-215">Weitere Informationen finden Sie unter [Datenbank-Spiegelungszeuge](database-mirroring-witness.md) und [Quorum: Auswirkungen eines Zeugen auf die Datenbankverfügbarkeit &#40;Datenbankspiegelung&#41;](quorum-how-a-witness-affects-database-availability-database-mirroring.md).</span><span class="sxs-lookup"><span data-stu-id="2ebb6-215">For more information, see [Database Mirroring Witness](database-mirroring-witness.md) and [Quorum: How a Witness Affects Database Availability &#40;Database Mirroring&#41;](quorum-how-a-witness-affects-database-availability-database-mirroring.md).</span></span>  
  
 <span data-ttu-id="2ebb6-216">Für automatisches Failover müssen folgende Bedingungen erfüllt sein:</span><span class="sxs-lookup"><span data-stu-id="2ebb6-216">Automatic failover requires the following conditions:</span></span>  
  
-   <span data-ttu-id="2ebb6-217">Die Datenbank ist bereits synchronisiert.</span><span class="sxs-lookup"><span data-stu-id="2ebb6-217">The database is already synchronized.</span></span>  
  
-   <span data-ttu-id="2ebb6-218">Der Fehler tritt auf, während alle drei Serverinstanzen verbunden sind und der Zeugenserver und der Spiegelserver verbunden bleiben.</span><span class="sxs-lookup"><span data-stu-id="2ebb6-218">The failure occurs while all three server instances are connected, and the witness and mirror server remain connected.</span></span>  
  
 <span data-ttu-id="2ebb6-219">Der Verlust eines Partners hat folgenden Effekt:</span><span class="sxs-lookup"><span data-stu-id="2ebb6-219">The loss of a partner has the following effect:</span></span>  
  
-   <span data-ttu-id="2ebb6-220">Wenn der Prinzipalserver unter den oben aufgeführten Bedingungen ausfällt, findet ein automatisches Failover statt.</span><span class="sxs-lookup"><span data-stu-id="2ebb6-220">If the principal server becomes unavailable under the above conditions, automatic failover occurs.</span></span> <span data-ttu-id="2ebb6-221">Der Spiegelserver wechselt in die Rolle des Prinzipals und bietet seine Datenbank als Prinzipaldatenbank an.</span><span class="sxs-lookup"><span data-stu-id="2ebb6-221">The mirror server switches to the role of principal, and it offers its database as the principal database.</span></span>  
  
-   <span data-ttu-id="2ebb6-222">Wenn der Prinzipalserver ausfällt, da diese Bedingungen nicht erfüllt sind, kann die Ausführung des Diensts (mit möglichem Datenverlust) gegebenenfalls erzwungen werden.</span><span class="sxs-lookup"><span data-stu-id="2ebb6-222">If the principal server becomes unavailable when those conditions are not met, forcing service (with possible data loss) might be possible.</span></span> <span data-ttu-id="2ebb6-223">Weitere Informationen finden Sie unter [Rollenwechsel während einer Datenbank-Spiegelungssitzung &#40;SQL Server&#41;](role-switching-during-a-database-mirroring-session-sql-server.md)herunter.</span><span class="sxs-lookup"><span data-stu-id="2ebb6-223">For more information, see [Role Switching During a Database Mirroring Session &#40;SQL Server&#41;](role-switching-during-a-database-mirroring-session-sql-server.md).</span></span>  
  
-   <span data-ttu-id="2ebb6-224">Wenn nur der Spiegelserver nicht mehr verfügbar ist, setzen der Prinzipal und der Zeuge ihren Betrieb fort.</span><span class="sxs-lookup"><span data-stu-id="2ebb6-224">If the only mirror server becomes unavailable, the principal and witness continue.</span></span>  
  
 <span data-ttu-id="2ebb6-225">Wenn die Sitzung ihren Zeugen verliert, sind für das Quorum beide Partner erforderlich.</span><span class="sxs-lookup"><span data-stu-id="2ebb6-225">If the session loses its witness, quorum requires both partners.</span></span> <span data-ttu-id="2ebb6-226">Wenn einer der Partner das Quorum verliert, verlieren beide Partner das Quorum, und die Datenbank ist erst dann wieder verfügbar, wenn das Quorum erneut hergestellt worden ist.</span><span class="sxs-lookup"><span data-stu-id="2ebb6-226">If either partner loses quorum, both partners lose quorum, and the database becomes unavailable until quorum is re-established.</span></span> <span data-ttu-id="2ebb6-227">Durch diese Quorumanforderung wird sichergestellt, dass die Datenbank in Abwesenheit eines Zeugen niemals *ungeschützt*(d. h., ohne gespiegelt zu werden) ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="2ebb6-227">This quorum requirement makes sure that in the absence of a witness the database never runs *exposed*, that is without being mirrored.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="2ebb6-228">Wenn zu erwarten ist, dass der Zeuge für einen signifikanten Zeitraum getrennt bleiben wird, sollten Sie den Zeugen vorübergehend aus der Sitzung entfernen, bis er wieder verfügbar ist.</span><span class="sxs-lookup"><span data-stu-id="2ebb6-228">If you expect the witness to remain disconnected for a significant amount of time, we recommend that you remove the witness from the session until it becomes available.</span></span>  
  
##  <a name="transact-sql-settings-and-database-mirroring-operating-modes"></a><a name="TsqlSettingsAndOpModes"></a> <span data-ttu-id="2ebb6-229">Transact-SQL-Einstellungen und Betriebsmodi für die Datenbankspiegelung</span><span class="sxs-lookup"><span data-stu-id="2ebb6-229">Transact-SQL Settings and Database Mirroring Operating Modes</span></span>  
 <span data-ttu-id="2ebb6-230">In diesem Abschnitt wird eine Datenbank-Spiegelungssitzung im Hinblick auf die ALTER DATABASE-Einstellungen und die Status der gespiegelten Datenbank und des Zeugen (sofern vorhanden) beschrieben.</span><span class="sxs-lookup"><span data-stu-id="2ebb6-230">This section describes a database mirroring session in terms of the ALTER DATABASE settings and states of the mirrored database and witness, if any.</span></span> <span data-ttu-id="2ebb6-231">Der Abschnitt ist für Benutzer bestimmt, die Datenbankspiegelungen primär oder ausschließlich mit [!INCLUDE[tsql](../../includes/tsql-md.md)]anstelle von [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)]verwalten.</span><span class="sxs-lookup"><span data-stu-id="2ebb6-231">The section is aimed at users who manage database mirroring primarily or exclusively using [!INCLUDE[tsql](../../includes/tsql-md.md)], rather than using [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)].</span></span>  
  
> [!TIP]  
>  <span data-ttu-id="2ebb6-232">Als Alternative zu [!INCLUDE[tsql](../../includes/tsql-md.md)]können Sie den Betriebsmodus einer Sitzung im Objekt-Explorer mithilfe der Seite **Spiegelung** des Dialogfelds **Datenbankeigenschaften** steuern.</span><span class="sxs-lookup"><span data-stu-id="2ebb6-232">As an alternative to using [!INCLUDE[tsql](../../includes/tsql-md.md)], you can control the operating mode of a session in Object Explorer using the **Mirroring** page of the **Database Properties** dialog box.</span></span> <span data-ttu-id="2ebb6-233">Weitere Informationen finden Sie unter [Einrichten einer Datenbank-Spiegelungssitzung mithilfe der Windows-Authentifizierung &#40;SQL Server Management Studio&#41;](establish-database-mirroring-session-windows-authentication.md).</span><span class="sxs-lookup"><span data-stu-id="2ebb6-233">For more information, see [Establish a Database Mirroring Session Using Windows Authentication &#40;SQL Server Management Studio&#41;](establish-database-mirroring-session-windows-authentication.md).</span></span>  
  

  
###  <a name="how-transaction-safety-and-witness-state-affect-the-operating-mode"></a><a name="TxnSafetyAndWitness"></a> <span data-ttu-id="2ebb6-234">Auswirkungen der Transaktionssicherheit und des Zeugenstatus auf den Betriebsmodus</span><span class="sxs-lookup"><span data-stu-id="2ebb6-234">How Transaction Safety and Witness State Affect the Operating Mode</span></span>  
 <span data-ttu-id="2ebb6-235">Der Betriebsmodus einer Sitzung wird durch die Kombination ihrer Transaktionssicherheitseinstellungen und dem Status des Zeugen bestimmt.</span><span class="sxs-lookup"><span data-stu-id="2ebb6-235">The operating mode of a session is determined by the combination of its transaction safety setting and the state of the witness.</span></span> <span data-ttu-id="2ebb6-236">Der Datenbankbesitzer kann jederzeit die Transaktionssicherheitsstufe ändern und den Zeugen hinzufügen oder entfernen.</span><span class="sxs-lookup"><span data-stu-id="2ebb6-236">At any time, the database owner can change the transaction safety level, and can add or remove the witness.</span></span>  
  

  
####  <a name="transaction-safety"></a><a name="TxnSafety"></a> <span data-ttu-id="2ebb6-237">Transaction Safety</span><span class="sxs-lookup"><span data-stu-id="2ebb6-237">Transaction Safety</span></span>  
 <span data-ttu-id="2ebb6-238">Bei der Transaktionssicherheit handelt es sich um eine spiegelungsspezifische Datenbankeigenschaft, die bestimmt, ob eine Datenbank-Spiegelungssitzung synchron oder asynchron betrieben wird.</span><span class="sxs-lookup"><span data-stu-id="2ebb6-238">Transaction safety is a mirroring-specific database property that determines whether a database mirroring session operates synchronously or asynchronously.</span></span> <span data-ttu-id="2ebb6-239">Es gibt zwei Sicherheitsstufen: FULL und OFF.</span><span class="sxs-lookup"><span data-stu-id="2ebb6-239">There are two safety levels: FULL and OFF.</span></span>  
  
-   <span data-ttu-id="2ebb6-240">SAFETY FULL</span><span class="sxs-lookup"><span data-stu-id="2ebb6-240">SAFETY FULL</span></span>  
  
     <span data-ttu-id="2ebb6-241">Durch die vollständige Transaktionssicherheit wird die Sitzung synchron im Modus mit hoher Leistung ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="2ebb6-241">Full transaction safety causes the session to operate synchronously in high-safety mode.</span></span> <span data-ttu-id="2ebb6-242">Wenn ein Zeuge vorhanden ist, unterstützt die Sitzung ein automatisches Failover.</span><span class="sxs-lookup"><span data-stu-id="2ebb6-242">If a witness is present, a session supports automatic failover.</span></span>  
  
     <span data-ttu-id="2ebb6-243">Wenn Sie mithilfe von ALTER DATABASE-Anweisungen eine Sitzung einrichten, wird die Sitzung mit der SAFETY-Einstellung FULL begonnen. Die Sitzung startet also im Modus mit hoher Sicherheit.</span><span class="sxs-lookup"><span data-stu-id="2ebb6-243">When you establish a session using ALTER DATABASE statements, the session begins with the SAFETY property set to FULL; that is, the session begins in high-safety mode.</span></span> <span data-ttu-id="2ebb6-244">Nachdem die Sitzung begonnen hat, können Sie einen Zeugen hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="2ebb6-244">After the session begins, you can add a witness.</span></span>  
  
     <span data-ttu-id="2ebb6-245">Weitere Informationen finden Sie unter [Synchrone Datenbankspiegelung (Modus für hohe Sicherheit)](#Sync)(zuvor in diesem Thema beschrieben).</span><span class="sxs-lookup"><span data-stu-id="2ebb6-245">For more information, see [Synchronous Database Mirroring (High-Safety Mode)](#Sync), earlier in this topic.</span></span>  
  
-   <span data-ttu-id="2ebb6-246">SAFETY OFF</span><span class="sxs-lookup"><span data-stu-id="2ebb6-246">SAFETY OFF</span></span>  
  
     <span data-ttu-id="2ebb6-247">Durch das Deaktivieren der Transaktionssicherheit wird die Sitzung asynchron im Modus mit hoher Leistung betrieben.</span><span class="sxs-lookup"><span data-stu-id="2ebb6-247">Turning off transaction safety causes the session to operate asynchronously, in high-performance mode.</span></span> <span data-ttu-id="2ebb6-248">Wenn die SAFETY-Eigenschaft auf OFF festgelegt ist, sollte die WITNESS-Eigenschaft ebenfalls auf OFF festgelegt werden (Standardeinstellung).</span><span class="sxs-lookup"><span data-stu-id="2ebb6-248">If the SAFETY property is set to OFF, the WITNESS property should also be set to OFF (the default).</span></span> <span data-ttu-id="2ebb6-249">Informationen zur Auswirkung der Zeugenoption im Modus für hohe Leistung finden Sie im Abschnitt [Der Zeugenstatus](#WitnessState)weiter unten in diesem Thema.</span><span class="sxs-lookup"><span data-stu-id="2ebb6-249">For information about the impact of the witness in high-performance mode, see [The State of the Witness](#WitnessState), later in this topic.</span></span> <span data-ttu-id="2ebb6-250">Weitere Informationen zum Ausführen mit deaktivierter Transaktionssicherheit finden Sie unter [Asynchrone Datenbankspiegelung (Modus für hohe Leistung)](#VisualElement)(zuvor in diesem Thema beschrieben).</span><span class="sxs-lookup"><span data-stu-id="2ebb6-250">For more information about running with transaction safety turned off, see [Asynchronous Database Mirroring (High-Performance Mode)](#VisualElement), earlier in this topic.</span></span>  
  
 <span data-ttu-id="2ebb6-251">Die Transaktionssicherheitseinstellung der Datenbank wird auf jedem Partner in der **sys.database_mirroring**-Katalogsicht in der **mirroring_safety_level**-Spalte und der **mirroring_safety_level_desc**-Spalte aufgezeichnet.</span><span class="sxs-lookup"><span data-stu-id="2ebb6-251">The transaction safety setting of the database is recorded on each partner in the **sys.database_mirroring** catalog view in the **mirroring_safety_level** and **mirroring_safety_level_desc** columns.</span></span> <span data-ttu-id="2ebb6-252">Weitere Informationen finden Sie unter [sys.database_mirroring &#40;Transact-SQL&#41;](/sql/relational-databases/system-catalog-views/sys-database-mirroring-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="2ebb6-252">For more information, see [sys.database_mirroring &#40;Transact-SQL&#41;](/sql/relational-databases/system-catalog-views/sys-database-mirroring-transact-sql).</span></span>  
  
 <span data-ttu-id="2ebb6-253">Der Datenbankbesitzer kann die Transaktionssicherheitsstufe jederzeit ändern.</span><span class="sxs-lookup"><span data-stu-id="2ebb6-253">The database owner can change the transaction safety level at any time.</span></span>  
  
####  <a name="the-state-of-the-witness"></a><a name="WitnessState"></a> <span data-ttu-id="2ebb6-254">Der Zeugenstatus</span><span class="sxs-lookup"><span data-stu-id="2ebb6-254">The State of the Witness</span></span>  
 <span data-ttu-id="2ebb6-255">Wenn ein Zeuge festgelegt wurde, ist ein Quorum erforderlich, sodass der Zeugenstatus stets wichtig ist.</span><span class="sxs-lookup"><span data-stu-id="2ebb6-255">If a witness has been set, quorum is required, so the state of the witness is always significant.</span></span>  
  
 <span data-ttu-id="2ebb6-256">Falls er vorhanden ist, weist der Zeuge einen von zwei Status auf:</span><span class="sxs-lookup"><span data-stu-id="2ebb6-256">If it exists, the witness has one of two states:</span></span>  
  
-   <span data-ttu-id="2ebb6-257">Wenn der Zeuge über eine Verbindung zu einem Partner verfügt, ist der Zeuge relativ zu diesem Partner im Status CONNECTED und verfügt über ein Quorum mit diesem Partner.</span><span class="sxs-lookup"><span data-stu-id="2ebb6-257">When the witness is connected to a partner, the witness is in the CONNECTED state relative to that partner and has quorum with that partner.</span></span> <span data-ttu-id="2ebb6-258">In diesem Fall kann die Datenbank verfügbar gemacht werden, auch wenn einer der Partner nicht verfügbar ist.</span><span class="sxs-lookup"><span data-stu-id="2ebb6-258">In this case, the database can be made available, even if one of the partners is unavailable.</span></span>  
  
-   <span data-ttu-id="2ebb6-259">Wenn der Zeuge vorhanden ist, aber über keine Verbindung zu einem Partner verfügt, ist der Zeuge relativ zu diesem Partner im Status UNKOWN oder DISCONNECTED.</span><span class="sxs-lookup"><span data-stu-id="2ebb6-259">When the witness exists but is not connected to a partner, the witness is in the UNKOWN or DISCONNECTED state relative to that partner.</span></span> <span data-ttu-id="2ebb6-260">In diesem Fall verfügt der Zeuge über kein Quorum in Bezug auf diesen Partner, und wenn die Partner nicht miteinander verbunden sind, ist die Datenbank nicht mehr verfügbar.</span><span class="sxs-lookup"><span data-stu-id="2ebb6-260">In this case, the witness lacks quorum with that partner, and if the partners are not connected to each other, the database becomes unavailable.</span></span>  
  
 <span data-ttu-id="2ebb6-261">Weitere Informationen zum Quorum finden Sie unter [Quorum: Auswirkungen eines Zeugen auf die Datenbankverfügbarkeit &#40;Datenbankspiegelung&#41;](quorum-how-a-witness-affects-database-availability-database-mirroring.md).</span><span class="sxs-lookup"><span data-stu-id="2ebb6-261">For information about quorum, see [Quorum: How a Witness Affects Database Availability &#40;Database Mirroring&#41;](quorum-how-a-witness-affects-database-availability-database-mirroring.md).</span></span>  
  
 <span data-ttu-id="2ebb6-262">Der Status jedes Zeugen auf einer Serverinstanz wird in der **sys.database_mirroring**-Katalogsicht in den Spalten **mirroring_witness_state** und **mirroring_witness_state_desc** aufgezeichnet.</span><span class="sxs-lookup"><span data-stu-id="2ebb6-262">The state of each witness on a server instance is recorded in the **sys.database_mirroring** catalog view in the **mirroring_witness_state** and **mirroring_witness_state_desc** columns.</span></span> <span data-ttu-id="2ebb6-263">Weitere Informationen finden Sie unter [sys.database_mirroring &#40;Transact-SQL&#41;](/sql/relational-databases/system-catalog-views/sys-database-mirroring-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="2ebb6-263">For more information, see [sys.database_mirroring &#40;Transact-SQL&#41;](/sql/relational-databases/system-catalog-views/sys-database-mirroring-transact-sql).</span></span>  
  
 <span data-ttu-id="2ebb6-264">Die folgende Tabelle bietet eine Übersicht darüber, wie der Betriebsmodus einer Sitzung von ihren Transaktionssicherheitseinstellungen und dem Zeugenstatus abhängt.</span><span class="sxs-lookup"><span data-stu-id="2ebb6-264">The following table summarizes how the operating mode of a session depends upon its transaction safety setting and on state of the witness.</span></span>  
  
|<span data-ttu-id="2ebb6-265">Betriebsmodus</span><span class="sxs-lookup"><span data-stu-id="2ebb6-265">Operating mode</span></span>|<span data-ttu-id="2ebb6-266">Transaktionssicherheit</span><span class="sxs-lookup"><span data-stu-id="2ebb6-266">Transaction safety</span></span>|<span data-ttu-id="2ebb6-267">Zeugenstatus</span><span class="sxs-lookup"><span data-stu-id="2ebb6-267">Witness state</span></span>|  
|--------------------|------------------------|-------------------|  
|<span data-ttu-id="2ebb6-268">Modus mit hoher Leistung</span><span class="sxs-lookup"><span data-stu-id="2ebb6-268">High-performance mode</span></span>|<span data-ttu-id="2ebb6-269">OFF</span><span class="sxs-lookup"><span data-stu-id="2ebb6-269">OFF</span></span>|<span data-ttu-id="2ebb6-270">NULL (kein Zeuge)<sup>2</sup></span><span class="sxs-lookup"><span data-stu-id="2ebb6-270">NULL (no witness)<sup>2</sup></span></span>|  
|<span data-ttu-id="2ebb6-271">Modus für hohe Sicherheit ohne automatisches Failover</span><span class="sxs-lookup"><span data-stu-id="2ebb6-271">High-safety mode without automatic failover</span></span>|<span data-ttu-id="2ebb6-272">FULL</span><span class="sxs-lookup"><span data-stu-id="2ebb6-272">FULL</span></span>|<span data-ttu-id="2ebb6-273">NULL (kein Zeuge)</span><span class="sxs-lookup"><span data-stu-id="2ebb6-273">NULL (no witness)</span></span>|  
|<span data-ttu-id="2ebb6-274">Modus für hohe Sicherheit mit automatischem Failover<sup>1</sup></span><span class="sxs-lookup"><span data-stu-id="2ebb6-274">High-safety mode with automatic failover<sup>1</sup></span></span>|<span data-ttu-id="2ebb6-275">FULL</span><span class="sxs-lookup"><span data-stu-id="2ebb6-275">FULL</span></span>|<span data-ttu-id="2ebb6-276">CONNECTED</span><span class="sxs-lookup"><span data-stu-id="2ebb6-276">CONNECTED</span></span>|  
  
 <span data-ttu-id="2ebb6-277"><sup>1</sup> wenn der Zeuge getrennt wird, wird empfohlen, dass Sie Witness auf Off festlegen, bis die Zeugen Serverinstanz verfügbar ist.</span><span class="sxs-lookup"><span data-stu-id="2ebb6-277"><sup>1</sup> If the witness becomes disconnected, we recommend that you set WITNESS OFF until the witness server instance becomes available.</span></span>  
  
 <span data-ttu-id="2ebb6-278"><sup>2</sup> wenn ein Zeuge im Modus für hohe Leistung vorhanden ist, wird der Zeuge nicht an der Sitzung teilnehmen.</span><span class="sxs-lookup"><span data-stu-id="2ebb6-278"><sup>2</sup> If a witness is present in high-performance mode, the witness does not participate in the session.</span></span> <span data-ttu-id="2ebb6-279">Um die Datenbank verfügbar zu machen, müssen jedoch eine Verbindung mit mindestens zwei Serverinstanzen bestehen bleiben.</span><span class="sxs-lookup"><span data-stu-id="2ebb6-279">However, to make the database available, at least two of the server instances must remain connected.</span></span> <span data-ttu-id="2ebb6-280">Daher wird empfohlen, die WITNESS-Eigenschaft in Sitzungen im Modus für hohe Leistung auf OFF festgelegt zu lassen.</span><span class="sxs-lookup"><span data-stu-id="2ebb6-280">Therefore, we recommend keeping the WITNESS property set to OFF in high-performance mode sessions.</span></span> <span data-ttu-id="2ebb6-281">Weitere Informationen finden Sie unter [Quorum: Auswirkungen eines Zeugen auf die Datenbankverfügbarkeit &#40;Datenbankspiegelung&#41;](quorum-how-a-witness-affects-database-availability-database-mirroring.md).</span><span class="sxs-lookup"><span data-stu-id="2ebb6-281">For more information, see [Quorum: How a Witness Affects Database Availability &#40;Database Mirroring&#41;](quorum-how-a-witness-affects-database-availability-database-mirroring.md).</span></span>  
  
###  <a name="viewing-the-safety-setting-and-state-of-the-witness"></a><a name="ViewWitness"></a> <span data-ttu-id="2ebb6-282">Anzeigen der Sicherheitseinstellung und des Status des Zeugen</span><span class="sxs-lookup"><span data-stu-id="2ebb6-282">Viewing the Safety Setting and State of the Witness</span></span>  
 <span data-ttu-id="2ebb6-283">Verwenden Sie zum Anzeigen der Sicherheitseinstellung und des Status des Zeugen für eine Datenbank die **sys.database_mirroring** -Katalogsicht.</span><span class="sxs-lookup"><span data-stu-id="2ebb6-283">To view the safety setting and the state of the witness for a database, use the **sys.database_mirroring** catalog view.</span></span> <span data-ttu-id="2ebb6-284">Die wichtigen Spalten sind die folgenden:</span><span class="sxs-lookup"><span data-stu-id="2ebb6-284">The relevant columns are as follows:</span></span>  
  
|<span data-ttu-id="2ebb6-285">Faktor</span><span class="sxs-lookup"><span data-stu-id="2ebb6-285">Factor</span></span>|<span data-ttu-id="2ebb6-286">Spalten</span><span class="sxs-lookup"><span data-stu-id="2ebb6-286">Columns</span></span>|<span data-ttu-id="2ebb6-287">BESCHREIBUNG</span><span class="sxs-lookup"><span data-stu-id="2ebb6-287">Description</span></span>|  
|------------|-------------|-----------------|  
|<span data-ttu-id="2ebb6-288">Transaktionssicherheit</span><span class="sxs-lookup"><span data-stu-id="2ebb6-288">Transaction safety</span></span>|<span data-ttu-id="2ebb6-289">**mirroring_safety_level** oder **mirroring_safety_level_desc**</span><span class="sxs-lookup"><span data-stu-id="2ebb6-289">**mirroring_safety_level** or **mirroring_safety_level_desc**</span></span>|<span data-ttu-id="2ebb6-290">Transaktionssicherheitseinstellung für Updates der Spiegeldatenbank:</span><span class="sxs-lookup"><span data-stu-id="2ebb6-290">Transaction safety setting for updates on the mirror database, one of:</span></span><br /><br /> <span data-ttu-id="2ebb6-291">UNKNOWN</span><span class="sxs-lookup"><span data-stu-id="2ebb6-291">UNKNOWN</span></span><br /><br /> <span data-ttu-id="2ebb6-292">OFF</span><span class="sxs-lookup"><span data-stu-id="2ebb6-292">OFF</span></span><br /><br /> <span data-ttu-id="2ebb6-293">FULL</span><span class="sxs-lookup"><span data-stu-id="2ebb6-293">FULL</span></span><br /><br /> <span data-ttu-id="2ebb6-294">NULL= Datenbank ist nicht online.</span><span class="sxs-lookup"><span data-stu-id="2ebb6-294">NULL= database is not online.</span></span>|  
|<span data-ttu-id="2ebb6-295">Ist ein Zeuge vorhanden?</span><span class="sxs-lookup"><span data-stu-id="2ebb6-295">Does a witness exist?</span></span>|<span data-ttu-id="2ebb6-296">**mirroring_witness_name**</span><span class="sxs-lookup"><span data-stu-id="2ebb6-296">**mirroring_witness_name**</span></span>|<span data-ttu-id="2ebb6-297">Servername des Datenbankspiegelungszeugen oder NULL. Damit wird angegeben, das kein Zeuge vorhanden ist.</span><span class="sxs-lookup"><span data-stu-id="2ebb6-297">Server name of the database mirroring witness or NULL, indicating that no witness exists.</span></span>|  
|<span data-ttu-id="2ebb6-298">Zeugenstatus</span><span class="sxs-lookup"><span data-stu-id="2ebb6-298">Witness state</span></span>|<span data-ttu-id="2ebb6-299">**mirroring_witness_state** oder **mirroring_witness_state_desc**</span><span class="sxs-lookup"><span data-stu-id="2ebb6-299">**mirroring_witness_state** or **mirroring_witness_state_desc**</span></span>|<span data-ttu-id="2ebb6-300">Zeugenstatus in der Datenbank auf einem gegebenen Partner:</span><span class="sxs-lookup"><span data-stu-id="2ebb6-300">State of the witness in the database on a given partner:</span></span><br /><br /> <span data-ttu-id="2ebb6-301">UNKNOWN</span><span class="sxs-lookup"><span data-stu-id="2ebb6-301">UNKNOWN</span></span><br /><br /> <span data-ttu-id="2ebb6-302">CONNECTED</span><span class="sxs-lookup"><span data-stu-id="2ebb6-302">CONNECTED</span></span><br /><br /> <span data-ttu-id="2ebb6-303">DISCONNECTED</span><span class="sxs-lookup"><span data-stu-id="2ebb6-303">DISCONNECTED</span></span><br /><br /> <span data-ttu-id="2ebb6-304">NULL = Es ist kein Zeuge vorhanden, oder die Datenbank ist nicht online.</span><span class="sxs-lookup"><span data-stu-id="2ebb6-304">NULL = no witness exists or the database is not online.</span></span>|  
  
 <span data-ttu-id="2ebb6-305">Geben Sie beispielsweise auf dem Prinzipal- oder Spiegelserver Folgendes ein:</span><span class="sxs-lookup"><span data-stu-id="2ebb6-305">For example, on either the principal or mirror server, enter:</span></span>  
  
```  
SELECT mirroring_safety_level_desc, mirroring_witness_name, mirroring_witness_state_desc FROM sys.database_mirroring  
```  
  
 <span data-ttu-id="2ebb6-306">Weitere Informationen zu dieser Katalogsicht finden Sie unter [sys.database_mirroring &#40;Transact-SQL&#41;](/sql/relational-databases/system-catalog-views/sys-database-mirroring-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="2ebb6-306">For more information about this catalog view, see [sys.database_mirroring &#40;Transact-SQL&#41;](/sql/relational-databases/system-catalog-views/sys-database-mirroring-transact-sql).</span></span>  
  
###  <a name="factors-affecting-behavior-on-loss-of-the-principal-server"></a><a name="FactorsOnLossOfPrincipal"></a> <span data-ttu-id="2ebb6-307">Faktoren, die sich auf das Verhalten beim Verlust des Prinzipalservers auswirken</span><span class="sxs-lookup"><span data-stu-id="2ebb6-307">Factors Affecting Behavior on Loss of the Principal Server</span></span>  
 <span data-ttu-id="2ebb6-308">Die folgende Tabelle bietet eine Übersicht über die kombinierten Auswirkungen der Transaktionssicherheitseinstellung, des Status der Datenbank sowie des Zeugenstatus auf das Verhalten einer Spiegelungssitzung beim Verlust des Prinzipalservers.</span><span class="sxs-lookup"><span data-stu-id="2ebb6-308">The following table summarizes the combined effect of the transaction safety setting, the state of the database, and the state of the witness on the behavior of a mirroring session on the loss of the principal server.</span></span>  
  
|<span data-ttu-id="2ebb6-309">Transaktionssicherheit</span><span class="sxs-lookup"><span data-stu-id="2ebb6-309">Transaction safety</span></span>|<span data-ttu-id="2ebb6-310">Gespiegelter Status der gespiegelten Datenbank</span><span class="sxs-lookup"><span data-stu-id="2ebb6-310">Mirroring state of mirror database</span></span>|<span data-ttu-id="2ebb6-311">Zeugenstatus</span><span class="sxs-lookup"><span data-stu-id="2ebb6-311">Witness state</span></span>|<span data-ttu-id="2ebb6-312">Verhalten beim Verlust des Prinzipals</span><span class="sxs-lookup"><span data-stu-id="2ebb6-312">Behavior when principal is lost</span></span>|  
|------------------------|----------------------------------------|-------------------|-------------------------------------|  
|<span data-ttu-id="2ebb6-313">FULL</span><span class="sxs-lookup"><span data-stu-id="2ebb6-313">FULL</span></span>|<span data-ttu-id="2ebb6-314">SYNCHRONIZED</span><span class="sxs-lookup"><span data-stu-id="2ebb6-314">SYNCHRONIZED</span></span>|<span data-ttu-id="2ebb6-315">CONNECTED</span><span class="sxs-lookup"><span data-stu-id="2ebb6-315">CONNECTED</span></span>|<span data-ttu-id="2ebb6-316">Automatisches Failover tritt auf.</span><span class="sxs-lookup"><span data-stu-id="2ebb6-316">Automatic failover occurs.</span></span>|  
|<span data-ttu-id="2ebb6-317">FULL</span><span class="sxs-lookup"><span data-stu-id="2ebb6-317">FULL</span></span>|<span data-ttu-id="2ebb6-318">SYNCHRONIZED</span><span class="sxs-lookup"><span data-stu-id="2ebb6-318">SYNCHRONIZED</span></span>|<span data-ttu-id="2ebb6-319">DISCONNECTED</span><span class="sxs-lookup"><span data-stu-id="2ebb6-319">DISCONNECTED</span></span>|<span data-ttu-id="2ebb6-320">Der Spiegelserver wird beendet, Failover ist nicht möglich, und die Datenbank kann nicht zur Verfügung gestellt werden.</span><span class="sxs-lookup"><span data-stu-id="2ebb6-320">Mirror server stops; failover is not possible, and the database cannot be made available.</span></span>|  
|<span data-ttu-id="2ebb6-321">OFF</span><span class="sxs-lookup"><span data-stu-id="2ebb6-321">OFF</span></span>|<span data-ttu-id="2ebb6-322">SUSPENDED oder DISCONNECTED</span><span class="sxs-lookup"><span data-stu-id="2ebb6-322">SUSPENDED or DISCONNECTED</span></span>|<span data-ttu-id="2ebb6-323">NULL (kein Zeuge)</span><span class="sxs-lookup"><span data-stu-id="2ebb6-323">NULL (no witness)</span></span>|<span data-ttu-id="2ebb6-324">Die Ausführung des Diensts wird auf dem Spiegelserver erzwungen (mit möglichem Datenverlust).</span><span class="sxs-lookup"><span data-stu-id="2ebb6-324">Service can be forced to the mirror server (with possible data loss).</span></span>|  
|<span data-ttu-id="2ebb6-325">FULL</span><span class="sxs-lookup"><span data-stu-id="2ebb6-325">FULL</span></span>|<span data-ttu-id="2ebb6-326">SYNCHRONIZING oder SUSPENDED</span><span class="sxs-lookup"><span data-stu-id="2ebb6-326">SYNCHRONIZING or SUSPENDED</span></span>|<span data-ttu-id="2ebb6-327">NULL (kein Zeuge)</span><span class="sxs-lookup"><span data-stu-id="2ebb6-327">NULL (no witness)</span></span>|<span data-ttu-id="2ebb6-328">Die Ausführung des Diensts wird auf dem Spiegelserver erzwungen (mit möglichem Datenverlust).</span><span class="sxs-lookup"><span data-stu-id="2ebb6-328">Service can be forced to the mirror server (with possible data loss).</span></span>|  
  
##  <a name="related-tasks"></a><a name="RelatedTasks"></a> <span data-ttu-id="2ebb6-329">Verwandte Aufgaben</span><span class="sxs-lookup"><span data-stu-id="2ebb6-329">Related Tasks</span></span>  
  
-   [<span data-ttu-id="2ebb6-330">Hinzufügen oder Ersetzen eines Datenbank-Spiegelungszeugen &#40;SQL Server Management Studio&#41;</span><span class="sxs-lookup"><span data-stu-id="2ebb6-330">Add or Replace a Database Mirroring Witness &#40;SQL Server Management Studio&#41;</span></span>](../database-mirroring/add-or-replace-a-database-mirroring-witness-sql-server-management-studio.md)  
  
-   [<span data-ttu-id="2ebb6-331">Einrichten einer Datenbank-Spiegelungssitzung mithilfe der Windows-Authentifizierung &#40;SQL Server Management Studio&#41;</span><span class="sxs-lookup"><span data-stu-id="2ebb6-331">Establish a Database Mirroring Session Using Windows Authentication &#40;SQL Server Management Studio&#41;</span></span>](establish-database-mirroring-session-windows-authentication.md)  
  
-   [<span data-ttu-id="2ebb6-332">Hinzufügen eines Zeugen für die Datenbankspiegelung mithilfe der Windows-Authentifizierung &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="2ebb6-332">Add a Database Mirroring Witness Using Windows Authentication &#40;Transact-SQL&#41;</span></span>](add-a-database-mirroring-witness-using-windows-authentication-transact-sql.md)  
  
-   [<span data-ttu-id="2ebb6-333">Entfernen des Zeugen aus einer Datenbank-Spiegelungssitzung &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="2ebb6-333">Remove the Witness from a Database Mirroring Session &#40;SQL Server&#41;</span></span>](remove-the-witness-from-a-database-mirroring-session-sql-server.md)  
  
-   [<span data-ttu-id="2ebb6-334">Ändern der Transaktionssicherheit in einer Datenbank-Spiegelungssitzung &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="2ebb6-334">Change Transaction Safety in a Database Mirroring Session &#40;Transact-SQL&#41;</span></span>](change-transaction-safety-in-a-database-mirroring-session-transact-sql.md)  
  
## <a name="see-also"></a><span data-ttu-id="2ebb6-335">Weitere Informationen</span><span class="sxs-lookup"><span data-stu-id="2ebb6-335">See Also</span></span>  
 <span data-ttu-id="2ebb6-336">[Überwachen der Datenbankspiegelung &#40;SQL Server&#41;](monitoring-database-mirroring-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="2ebb6-336">[Monitoring Database Mirroring &#40;SQL Server&#41;](monitoring-database-mirroring-sql-server.md) </span></span>  
 [<span data-ttu-id="2ebb6-337">Datenbank-Spiegelungszeuge</span><span class="sxs-lookup"><span data-stu-id="2ebb6-337">Database Mirroring Witness</span></span>](database-mirroring-witness.md)  
