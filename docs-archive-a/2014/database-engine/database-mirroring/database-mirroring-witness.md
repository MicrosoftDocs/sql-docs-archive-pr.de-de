---
title: Datenbank-Spiegelungszeuge | Microsoft-Dokumentation
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: high-availability
ms.topic: conceptual
helpviewer_keywords:
- witness [SQL Server], about witness
- witness [SQL Server]
- database mirroring [SQL Server], witness
ms.assetid: 05606de8-90c3-451a-938d-1ed34211dad7
author: MikeRayMSFT
ms.author: mikeray
ms.openlocfilehash: 6ac02e2a5dbe86af72c15c07e14de70b12892b48
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 08/04/2020
ms.locfileid: "87609411"
---
# <a name="database-mirroring-witness"></a><span data-ttu-id="57644-102">Database Mirroring Witness</span><span class="sxs-lookup"><span data-stu-id="57644-102">Database Mirroring Witness</span></span>
  <span data-ttu-id="57644-103">Zur Unterstützung eines automatischen Failovers muss eine Datenbank-Spiegelungssitzung im Modus für hohe Sicherheit konfiguriert sein und außerdem eine dritte Serverinstanz besitzen, die als *Zeuge*bezeichnet wird.</span><span class="sxs-lookup"><span data-stu-id="57644-103">To support automatic failover, a database mirroring session must be configured in high-safety mode and also possess a third server instance, known as the *witness*.</span></span> <span data-ttu-id="57644-104">Der Zeuge ist eine optionale Instanz von [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] , die es dem Spiegelserver in einer Sitzung mit dem Modus für hohe Sicherheit ermöglicht, zu erkennen, ob ein automatisches Failover initiiert werden soll.</span><span class="sxs-lookup"><span data-stu-id="57644-104">The witness is an optional instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] that enables the mirror server in a high-safety mode session to recognize whether to initiate an automatic failover.</span></span> <span data-ttu-id="57644-105">Im Gegensatz zu den beiden Partnern stellt der Zeuge die Datenbank nicht bereit.</span><span class="sxs-lookup"><span data-stu-id="57644-105">Unlike the two partners, the witness does not serve the database.</span></span> <span data-ttu-id="57644-106">Die Unterstützung des automatischen Failovers ist die einzige Aufgabe des Zeugen.</span><span class="sxs-lookup"><span data-stu-id="57644-106">Supporting automatic failover is the only role of the witness.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="57644-107">Im Modus für hohe Leistung kann sich der Zeuge negativ auf die Verfügbarkeit auswirken.</span><span class="sxs-lookup"><span data-stu-id="57644-107">In high-performance mode, the witness can adversely affect availability.</span></span> <span data-ttu-id="57644-108">Wenn ein Zeuge für eine Datenbank-Spiegelungssitzung konfiguriert ist, muss der Prinzipalserver mindestens mit einer der anderen Serverinstanzen verbunden sein, also mit dem Spiegelserver oder dem Zeugen oder mit beiden.</span><span class="sxs-lookup"><span data-stu-id="57644-108">If a witness is configured for a database mirroring session, the principal server must be connected at least to one of the other server instances, the mirror server or the witness, or both of them.</span></span> <span data-ttu-id="57644-109">Andernfalls ist die Datenbank nicht mehr verfügbar und das Erzwingen des Diensts (mit möglichem Datenverlust) ist nicht möglich.</span><span class="sxs-lookup"><span data-stu-id="57644-109">Otherwise, the database becomes unavailable and forcing service (with possible data loss) is impossible.</span></span> <span data-ttu-id="57644-110">Daher wird beim Modus für hohe Leistung dringend empfohlen, die Zeugeneinstellung immer auf OFF zu belassen.</span><span class="sxs-lookup"><span data-stu-id="57644-110">Therefore, for high-performance mode, we strongly recommend that you always keep the witness set to OFF.</span></span> <span data-ttu-id="57644-111">Informationen zu den Auswirkungen eines Zeugen auf den Hochleistungsmodus finden Sie unter [Betriebsmodi der Datenbankspiegelung](database-mirroring-operating-modes.md).</span><span class="sxs-lookup"><span data-stu-id="57644-111">For information about the impact of a witness on high-performance mode, see [Database Mirroring Operating Modes](database-mirroring-operating-modes.md).</span></span>  
  
 <span data-ttu-id="57644-112">In der folgende Abbildung wird eine Sitzung im Modus für hohe Sicherheit mit einem Zeugen dargestellt.</span><span class="sxs-lookup"><span data-stu-id="57644-112">The following illustration shows a high-safety mode session with a witness.</span></span>  
  
 <span data-ttu-id="57644-113">![Spiegelungssitzung mit einem Zeugen](../media/dbm-3-way-session-intro.gif "Spiegelungssitzung mit einem Zeugen")</span><span class="sxs-lookup"><span data-stu-id="57644-113">![Mirroring session with a witness](../media/dbm-3-way-session-intro.gif "Mirroring session with a witness")</span></span>  
  
 <span data-ttu-id="57644-114">**In diesem Thema:**</span><span class="sxs-lookup"><span data-stu-id="57644-114">**In This Topic:**</span></span>  
  
-   [<span data-ttu-id="57644-115">Verwenden eines Zeugen in mehreren Sitzungen</span><span class="sxs-lookup"><span data-stu-id="57644-115">Using a Witness in Multiple Sessions</span></span>](#InMultipleSessions)  
  
-   [<span data-ttu-id="57644-116">Software- und Hardwareempfehlungen</span><span class="sxs-lookup"><span data-stu-id="57644-116">Software and Hardware Recommendations</span></span>](#SwHwRecommendations)  
  
-   [<span data-ttu-id="57644-117">Rolle des Zeugen beim automatischen Failover</span><span class="sxs-lookup"><span data-stu-id="57644-117">Role of the Witness in Automatic Failover</span></span>](#InAutoFo)  
  
-   [<span data-ttu-id="57644-118">So fügen Sie einen Zeugen hinzu oder entfernen ihn</span><span class="sxs-lookup"><span data-stu-id="57644-118">To Add or Remove a Witness</span></span>](#AddRemoveWitness)  
  
##  <a name="using-a-witness-in-multiple-sessions"></a><a name="InMultipleSessions"></a> <span data-ttu-id="57644-119">Verwenden eines Zeugen in mehreren Sitzungen</span><span class="sxs-lookup"><span data-stu-id="57644-119">Using a Witness in Multiple Sessions</span></span>  
 <span data-ttu-id="57644-120">Eine bestimmte Serverinstanz kann als Zeuge in gleichzeitigen Datenbank-Spiegelungssitzungen agieren – jeweils für eine unterschiedliche Datenbank.</span><span class="sxs-lookup"><span data-stu-id="57644-120">A specific server instance can act as a witness in concurrent database mirroring sessions, each for a different database.</span></span> <span data-ttu-id="57644-121">Verschiedene Sitzungen können dabei mit unterschiedlichen Partnern ablaufen.</span><span class="sxs-lookup"><span data-stu-id="57644-121">Different sessions can be with different partners.</span></span> <span data-ttu-id="57644-122">In der folgenden Abbildung ist eine Serverinstanz dargestellt, die Zeuge zweier Datenbank-Spiegelungssitzungen mit unterschiedlichen Partnern ist.</span><span class="sxs-lookup"><span data-stu-id="57644-122">The following illustration shows a server instance that is a witness in two database mirroring sessions with different partners.</span></span>  
  
 <span data-ttu-id="57644-123">![Serverinstanz als Zeuge für zwei Datenbanken](../media/dbm-witness-in-2-sessions.gif "Serverinstanz als Zeuge für zwei Datenbanken")</span><span class="sxs-lookup"><span data-stu-id="57644-123">![Server instance that is a witness for 2 databases](../media/dbm-witness-in-2-sessions.gif "Server instance that is a witness for 2 databases")</span></span>  
  
 <span data-ttu-id="57644-124">Eine einzelne Serverinstanz kann auch gleichzeitig in bestimmten Sitzungen als Zeuge und in anderen als Partner eingesetzt werden.</span><span class="sxs-lookup"><span data-stu-id="57644-124">A single-server instance can also function at the same time as a witness in some sessions and a partner in other sessions.</span></span> <span data-ttu-id="57644-125">In der Praxis fungiert eine Serverinstanz jedoch in der Regel entweder als Zeuge oder als Partner.</span><span class="sxs-lookup"><span data-stu-id="57644-125">However, in practice, a server instance typically functions as either a witness or a partner.</span></span> <span data-ttu-id="57644-126">Das ist darauf zurückzuführen, dass als Partner nur leistungsfähige Computer mit entsprechender Hardware zur Unterstützung einer Produktionsdatenbank verwendet werden können, während der Zeuge unter jedem verfügbaren Windows-System ausgeführt werden kann, das Unterstützung für [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)]bietet.</span><span class="sxs-lookup"><span data-stu-id="57644-126">This is because the partners require sophisticated computers that have enough hardware to support a production database, whereas the witness can run on any available Windows system that supports [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)].</span></span>  
  
##  <a name="software-and-hardware-recommendations"></a><a name="SwHwRecommendations"></a> <span data-ttu-id="57644-127">Software- und Hardwareempfehlungen</span><span class="sxs-lookup"><span data-stu-id="57644-127">Software and Hardware Recommendations</span></span>  
 <span data-ttu-id="57644-128">Sie sollten den Zeugen unbedingt auf einem von den Partnern separaten Computer platzieren.</span><span class="sxs-lookup"><span data-stu-id="57644-128">We strongly recommend that the witness reside on a separate computer from the partners.</span></span> <span data-ttu-id="57644-129">Datenbank-Spiegelungspartner werden nur von [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Standard Edition und von [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Enterprise Edition unterstützt.</span><span class="sxs-lookup"><span data-stu-id="57644-129">Database mirroring partners are supported only by [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Standard edition and by [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Enterprise edition.</span></span> <span data-ttu-id="57644-130">Zeugen hingegen werden auch von [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Workgroup und [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Express unterstützt.</span><span class="sxs-lookup"><span data-stu-id="57644-130">Witnesses, in contrast, are also supported by [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Workgroup and by [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Express.</span></span> <span data-ttu-id="57644-131">Außer während eines Upgrades von einer früheren Version von [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]muss in einer Spiegelungssitzung auf allen Serverinstanzen dieselbe Version von [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]ausgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="57644-131">Except during an upgrade from an earlier version of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], the server instances in a mirroring session must all be running the same version of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="57644-132">Ein [!INCLUDE[ssKatmai](../../includes/sskatmai-md.md)] -Zeuge wird beispielsweise unterstützt, wenn Sie von einer Spiegelungskonfiguration der Version [!INCLUDE[ssKatmai](../../includes/sskatmai-md.md)] aktualisieren, er kann jedoch nicht einer vorhandenen oder neuen Spiegelungskonfiguration der Version [!INCLUDE[ssKilimanjaro](../../includes/sskilimanjaro-md.md)] oder höher hinzugefügt werden.</span><span class="sxs-lookup"><span data-stu-id="57644-132">For example, a [!INCLUDE[ssKatmai](../../includes/sskatmai-md.md)] witness is supported when you are upgrading from a [!INCLUDE[ssKatmai](../../includes/sskatmai-md.md)] mirroring configuration but cannot be added to an existing or new [!INCLUDE[ssKilimanjaro](../../includes/sskilimanjaro-md.md)] or later mirroring configuration.</span></span>  
  
 <span data-ttu-id="57644-133">Ein Zeuge kann auf jedem zuverlässigen Computersystem ausgeführt werden kann, das eine der Editionen von [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]unterstützt.</span><span class="sxs-lookup"><span data-stu-id="57644-133">A witness can run on any reliable computer system that supports any of these editions of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="57644-134">Es wird jedoch empfohlen, dass jede als Zeuge verwendete Serverinstanz der Mindestkonfiguration entspricht, die für die ausgeführte Version von [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Standard Edition erforderlich ist.</span><span class="sxs-lookup"><span data-stu-id="57644-134">However, we recommend that every server instance that is used as a witness correspond to the minimum configuration that is required for the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Standard version that you are running.</span></span> <span data-ttu-id="57644-135">Weitere Informationen zu diesen Anforderungen finden Sie unter [Hardware-und Software Anforderungen für die Installation von SQL Server 2014](../../sql-server/install/hardware-and-software-requirements-for-installing-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="57644-135">For more information about these requirements, see [Hardware and Software Requirements for Installing SQL Server 2014](../../sql-server/install/hardware-and-software-requirements-for-installing-sql-server.md).</span></span>  
  
##  <a name="role-of-the-witness-in-automatic-failover"></a><a name="InAutoFo"></a> <span data-ttu-id="57644-136">Rolle des Zeugen beim automatischen Failover</span><span class="sxs-lookup"><span data-stu-id="57644-136">Role of the Witness in Automatic Failover</span></span>  
 <span data-ttu-id="57644-137">Während der gesamten Dauer einer Datenbank-Spiegelungssitzung überwachen alle Serverinstanzen ihren Verbindungsstatus.</span><span class="sxs-lookup"><span data-stu-id="57644-137">Throughout a database mirroring session, all the server instances monitor their connection status.</span></span> <span data-ttu-id="57644-138">Werden die Partner voneinander getrennt, können Sie nur anhand des Zeugen sicherstellen, dass nur einer von ihnen aktuell die Datenbank bedient.</span><span class="sxs-lookup"><span data-stu-id="57644-138">If the partners become disconnected from each other, they rely on the witness to make sure that only one of them is currently serving the database.</span></span> <span data-ttu-id="57644-139">Wenn ein synchronisierter Spiegelserver seine Verbindung mit dem Prinzipalserver verliert, jedoch weiterhin mit dem Zeugen verbunden bleibt, kontaktiert der Spiegelserver den Zeugen, um zu ermitteln, ob der Zeuge seine Verbindung mit dem Prinzipalserver verloren hat:</span><span class="sxs-lookup"><span data-stu-id="57644-139">If a synchronized mirror server loses its connection to the principal server but remains connected to the witness, the mirror server contacts the witness to determine whether the witness has lost its connection to the principal server:</span></span>  
  
-   <span data-ttu-id="57644-140">Wenn der Prinzipalserver weiterhin mit dem Zeugen verbunden ist, erfolgt kein automatisches Failover.</span><span class="sxs-lookup"><span data-stu-id="57644-140">If the principal server is still connected to the witness, automatic failover does not occur.</span></span> <span data-ttu-id="57644-141">Stattdessen bedient der Prinzipalserver weiterhin die Datenbank und sammelt Protokolldatensätze, die zum Spiegelserver gesendet werden, wenn die Verbindung zwischen den Partnern erneut hergestellt wird.</span><span class="sxs-lookup"><span data-stu-id="57644-141">Instead, the principal server continues to server the database while accumulating log records to send the mirror server when the partners reconnect.</span></span>  
  
-   <span data-ttu-id="57644-142">Wenn auch die Verbindung zwischen dem Zeugen und dem Prinzipalserver getrennt ist, weiß der Spiegelserver, dass die Prinzipaldatenbank nicht mehr verfügbar ist.</span><span class="sxs-lookup"><span data-stu-id="57644-142">If the witness is also disconnected from the principal server, the mirror server knows that principal database has become unavailable.</span></span> <span data-ttu-id="57644-143">In diesem Fall initiiert der Spiegelserver sofort ein automatisches Failover.</span><span class="sxs-lookup"><span data-stu-id="57644-143">In this case, the mirror server immediately initiates an automatic failover.</span></span>  
  
-   <span data-ttu-id="57644-144">Wenn die Verbindung zwischen dem Spiegelserver und dem Zeugen und auch die Verbindung zwischen dem Spiegelserver und dem Prinzipalserver getrennt ist, ist unabhängig vom Status des Prinzipalservers kein automatisches Failover möglich.</span><span class="sxs-lookup"><span data-stu-id="57644-144">If the mirror server is disconnected from the witness and also from the principal server, automatic failover is not possible, regardless of the state of the principal server.</span></span>  
  
 <span data-ttu-id="57644-145">Die Anforderung, dass mindestens zwei der Serverinstanzen verbunden sein müssen, wird als *Quorum*bezeichnet.</span><span class="sxs-lookup"><span data-stu-id="57644-145">The requirement that at least two of the server instances be connected is known as *quorum*.</span></span> <span data-ttu-id="57644-146">Durch das Quorum wird sichergestellt, dass die Datenbank jeweils immer nur von einem Partner bedient werden kann.</span><span class="sxs-lookup"><span data-stu-id="57644-146">Quorum makes sure that the database can only be served by one partner at a time.</span></span> <span data-ttu-id="57644-147">Informationen zur Funktionsweise des Quorums und zu seinen Auswirkungen auf eine Sitzung finden Sie unter [Quorum: Auswirkungen eines Zeugen auf die Datenbankverfügbarkeit &#40;Datenbankspiegelung&#41;](quorum-how-a-witness-affects-database-availability-database-mirroring.md).</span><span class="sxs-lookup"><span data-stu-id="57644-147">For information about how quorum works and its impact on a session, see [Quorum: How a Witness Affects Database Availability &#40;Database Mirroring&#41;](quorum-how-a-witness-affects-database-availability-database-mirroring.md).</span></span>  
  
##  <a name="to-add-or-remove-a-witness"></a><a name="AddRemoveWitness"></a> <span data-ttu-id="57644-148">So fügen Sie einen Zeugen hinzu oder entfernen ihn</span><span class="sxs-lookup"><span data-stu-id="57644-148">To Add or Remove a Witness</span></span>  
 <span data-ttu-id="57644-149">**So fügen Sie einen Zeugen hinzu**</span><span class="sxs-lookup"><span data-stu-id="57644-149">**To add a witness**</span></span>  
  
-   [<span data-ttu-id="57644-150">Hinzufügen oder Ersetzen eines Datenbank-Spiegelungszeugen &#40;SQL Server Management Studio&#41;</span><span class="sxs-lookup"><span data-stu-id="57644-150">Add or Replace a Database Mirroring Witness &#40;SQL Server Management Studio&#41;</span></span>](../database-mirroring/add-or-replace-a-database-mirroring-witness-sql-server-management-studio.md)  
  
-   [<span data-ttu-id="57644-151">Hinzufügen eines Zeugen für die Datenbankspiegelung mithilfe der Windows-Authentifizierung &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="57644-151">Add a Database Mirroring Witness Using Windows Authentication &#40;Transact-SQL&#41;</span></span>](add-a-database-mirroring-witness-using-windows-authentication-transact-sql.md)  
  
 <span data-ttu-id="57644-152">**So entfernen Sie den Zeugen**</span><span class="sxs-lookup"><span data-stu-id="57644-152">**To remove the witness**</span></span>  
  
-   [<span data-ttu-id="57644-153">Entfernen des Zeugen aus einer Datenbank-Spiegelungssitzung &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="57644-153">Remove the Witness from a Database Mirroring Session &#40;SQL Server&#41;</span></span>](remove-the-witness-from-a-database-mirroring-session-sql-server.md)  
  
## <a name="see-also"></a><span data-ttu-id="57644-154">Weitere Informationen</span><span class="sxs-lookup"><span data-stu-id="57644-154">See Also</span></span>  
 <span data-ttu-id="57644-155">[Rollenwechsel während einer Datenbank-Spiegelungssitzung &#40;SQL Server&#41;](role-switching-during-a-database-mirroring-session-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="57644-155">[Role Switching During a Database Mirroring Session &#40;SQL Server&#41;](role-switching-during-a-database-mirroring-session-sql-server.md) </span></span>  
 <span data-ttu-id="57644-156">[Betriebsmodi der Datenbankspiegelung](database-mirroring-operating-modes.md) </span><span class="sxs-lookup"><span data-stu-id="57644-156">[Database Mirroring Operating Modes](database-mirroring-operating-modes.md) </span></span>  
 <span data-ttu-id="57644-157">[Quorum: Auswirkungen eines Zeugen auf die Datenbankverfügbarkeit &#40;Datenbankspiegelung&#41;](quorum-how-a-witness-affects-database-availability-database-mirroring.md) </span><span class="sxs-lookup"><span data-stu-id="57644-157">[Quorum: How a Witness Affects Database Availability &#40;Database Mirroring&#41;](quorum-how-a-witness-affects-database-availability-database-mirroring.md) </span></span>  
 <span data-ttu-id="57644-158">[Mögliche Fehler während der Datenbankspiegelung](possible-failures-during-database-mirroring.md) </span><span class="sxs-lookup"><span data-stu-id="57644-158">[Possible Failures During Database Mirroring](possible-failures-during-database-mirroring.md) </span></span>  
 [<span data-ttu-id="57644-159">Spiegelungsstatus &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="57644-159">Mirroring States &#40;SQL Server&#41;</span></span>](mirroring-states-sql-server.md)  
  
  
