---
title: Problembehandlung SQL Server Managed Backup in Azure | Microsoft-Dokumentation
description: In diesem Artikel werden die Aufgaben und Tools beschrieben, die Sie zum Beheben von Fehlern verwenden können, die möglicherweise bei der SQL Server verwalteten Sicherung in Microsoft Azure Vorgängen auftreten.
ms.custom: ''
ms.date: 03/08/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: backup-restore
ms.topic: conceptual
ms.assetid: a34d35b0-48eb-4ed1-9f19-ea14754650da
author: mashamsft
ms.author: mathoma
ms.openlocfilehash: 9c7ed5dd25ed2b02445bfae5eb78ac03b2270552
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 08/04/2020
ms.locfileid: "87701529"
---
# <a name="troubleshooting-sql-server-managed--backup-to-azure"></a><span data-ttu-id="c5166-103">Problembehandlung für die verwaltete SQL Server-Sicherung in Azure</span><span class="sxs-lookup"><span data-stu-id="c5166-103">Troubleshooting SQL Server Managed  Backup to Azure</span></span>
  <span data-ttu-id="c5166-104">Dieses Thema enthält zudem Informationen zu den Aufgaben und Tools, die Sie verwenden können, um Fehler bei [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)]-Vorgängen zu beheben.</span><span class="sxs-lookup"><span data-stu-id="c5166-104">This topic describes the tasks and tools you can use to troubleshoot errors that may occur during [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)] operations.</span></span>  
  
## <a name="overview"></a><span data-ttu-id="c5166-105">Übersicht</span><span class="sxs-lookup"><span data-stu-id="c5166-105">Overview</span></span>  
 [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)] <span data-ttu-id="c5166-106">verfügt über integrierte Prüfungen und Fehlerbehebungen, d. h., in vielen Fällen kümmert sich der [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)]-Prozess selbst um interne Fehler.</span><span class="sxs-lookup"><span data-stu-id="c5166-106">has built in checks and troubleshooting, so in many cases internal failures are taken care of by [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)] process itself.</span></span>  
  
 <span data-ttu-id="c5166-107">Ein Beispiel für einen solchen Fall ist das Löschen einer Sicherungsdatei, die zu einer Unterbrechung der Protokoll Kette führt, die die Wiederherstellbarkeit beeinträchtigt [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)] . in wird die Unterbrechung in der Protokoll Kette identifiziert und eine sofortige Sicherung geplant.</span><span class="sxs-lookup"><span data-stu-id="c5166-107">Example of one such case is a deletion of a backup file resulting in a break of the log chain affecting recoverability - [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)] will identify the break in log chain and schedule a backup to be taken immediately.</span></span> <span data-ttu-id="c5166-108">Nichtsdestotrotz sollten Sie den Status überwachen und mögliche Fehler, die ein manuelles Eingreifen erfordern, entsprechend behandeln.</span><span class="sxs-lookup"><span data-stu-id="c5166-108">However we recommend that you monitor the status and address any errors that require manual intervention.</span></span>  
  
 [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)] <span data-ttu-id="c5166-109">protokolliert Ereignisse und Fehler anhand gespeicherter Systemprozeduren, Systemsichten und erweiterter Ereignisse.</span><span class="sxs-lookup"><span data-stu-id="c5166-109">logs events and errors using system stored procedures, system views and extended events.</span></span> <span data-ttu-id="c5166-110">Systemsichten und gespeicherte Prozeduren stellen [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)] Konfigurationsinformationen, Status von geplanten Sicherungen sowie Fehler bereit, die von erweiterten Ereignissen aufgezeichnet wurden.</span><span class="sxs-lookup"><span data-stu-id="c5166-110">System views and stored procedures provide [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)] configuration information, status of backup scheduled backups, and also the errors captured by Extended Events.</span></span> [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)] <span data-ttu-id="c5166-111">verwendet erweiterte Ereignisse zur Aufzeichnung von Fehlern für die Fehlerbehebung.</span><span class="sxs-lookup"><span data-stu-id="c5166-111">uses Extended Events to capture the errors to use for troubleshooting.</span></span> <span data-ttu-id="c5166-112">Zusätzlich zur Ereignisprotokollierung stellen die intelligenten Administrations-Richtlinien von SQL Server einen Integritätsstatus bereit, der von einem E-Mail-Benachrichtigungs-Auftrag zur Bereitstellung von Benachrichtigungen zu Fehlern und Problemen verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="c5166-112">In addition to logging events, SQL Server Smart Admin Policies provide a health status which is used by an email notification job to provide notification or errors and issues.</span></span> <span data-ttu-id="c5166-113">Weitere Informationen finden [Sie unter Überwachen SQL Server verwalteten Sicherung in Azure](../relational-databases/backup-restore/sql-server-managed-backup-to-microsoft-azure.md).</span><span class="sxs-lookup"><span data-stu-id="c5166-113">For more information see [Monitor SQL Server Managed Backup to Azure](../relational-databases/backup-restore/sql-server-managed-backup-to-microsoft-azure.md).</span></span>  
  
 [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)]<span data-ttu-id="c5166-114">verwendet auch die gleiche Protokollierung, die beim manuellen Sichern in Azure Storage (SQL Server Sicherung auf URL) verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="c5166-114">also uses the same logging that is used when manually backing up to Azure storage (SQL Server Backup to URL).</span></span> <span data-ttu-id="c5166-115">Weitere Informationen zu Problemen bei der Sicherung auf URL finden Sie im Abschnitt zur Problembehandlung unter [SQL Server bewährte Methoden und Problem](../relational-databases/backup-restore/sql-server-backup-to-url-best-practices-and-troubleshooting.md) Behandlung bei der Sicherung von URLs.</span><span class="sxs-lookup"><span data-stu-id="c5166-115">For more information on Backup to URL related issues, see the troubleshooting section in [SQL Server Backup to URL Best Practices and Troubleshooting](../relational-databases/backup-restore/sql-server-backup-to-url-best-practices-and-troubleshooting.md)</span></span>  
  
### <a name="general-troubleshooting-steps"></a><span data-ttu-id="c5166-116">Allgemeine Schritte zur Problembehandlung</span><span class="sxs-lookup"><span data-stu-id="c5166-116">General Troubleshooting Steps</span></span>  
  
1.  <span data-ttu-id="c5166-117">Aktivieren Sie die E-Mail-Benachrichtigung, um E-Mails zu Fehlern und Warnungen zu erhalten.</span><span class="sxs-lookup"><span data-stu-id="c5166-117">Enable Email Notification to start to receive emails for error and warnings.</span></span>  
  
     <span data-ttu-id="c5166-118">Alternativ können Sie auch `smart_admin.fn_get_health_status` regelmäßig ausführen, um die aggregierten Fehler und Zahlen zu überprüfen.</span><span class="sxs-lookup"><span data-stu-id="c5166-118">Alternatively, you can also periodically run `smart_admin.fn_get_health_status` to check the aggregated errors and counts.</span></span> <span data-ttu-id="c5166-119">Zum Beispiel gibt `number_of_invalid_credential_errors` an, wie häufig die intelligente Sicherung eine Sicherung versucht, aber einen Fehler aufgrund ungültiger Anmeldeinformationen erhalten hat.</span><span class="sxs-lookup"><span data-stu-id="c5166-119">For example, `number_of_invalid_credential_errors` is the number of times smart backup attempted a backup but got invalid credential error.</span></span> <span data-ttu-id="c5166-120">`Number_of_backup_loops` und `number_of_retention_loops` sind keine Fehler; sie geben an, wie häufig Sicherungsthread und Beibehaltungsthread die Liste der Datenbanken überprüft haben.</span><span class="sxs-lookup"><span data-stu-id="c5166-120">`Number_of_backup_loops` and `number_of_retention_loops` are not errors; but they indicate the number of times backup thread and retention thread scanned the list of databases.</span></span> <span data-ttu-id="c5166-121">Wenn @begin_time und @end_time nicht bereitgestellt werden, zeigt die Funktion in der Regel die Informationen in den letzten 30 Minuten an. für diese beiden Spalten sollten normalerweise Werte ungleich Null angezeigt werden.</span><span class="sxs-lookup"><span data-stu-id="c5166-121">Typically, when @begin_time and @end_time are not provided, the function is showing the information from last 30 minutes, then we should normally see non-zero values for these two columns.</span></span> <span data-ttu-id="c5166-122">Wenn sie null sind, weist dies auf eine Systemüberlastung oder sogar auf ein nicht reagierendes System hin.</span><span class="sxs-lookup"><span data-stu-id="c5166-122">If they are zero then it implies system overloaded or even system not responding.</span></span> <span data-ttu-id="c5166-123">Weitere Informationen finden Sie im Abschnitt Problembehandlung bei **System Problemen** weiter unten in diesem Thema.</span><span class="sxs-lookup"><span data-stu-id="c5166-123">For more information, see **Troubleshooting System Issues** section later in this topic.</span></span>  
  
2.  <span data-ttu-id="c5166-124">Prüfen Sie die Protokolle der erweiterten Ereignisse, um weitere Details zu den Fehlern und zu den zugehörigen Ereignissen zu erfahren.</span><span class="sxs-lookup"><span data-stu-id="c5166-124">Review the Extended Event logs to learn more details on the errors and other associated events.</span></span>  
  
3.  <span data-ttu-id="c5166-125">Anhand der Informationen in den Protokollen sollten Sie das Problem lösen können.</span><span class="sxs-lookup"><span data-stu-id="c5166-125">Use the information in the logs to resolve the issue.</span></span>  <span data-ttu-id="c5166-126">Bei einem Systemproblem oder -fehler müssen Sie den Dienst oder SQL Server-Agent möglicherweise neu starten.</span><span class="sxs-lookup"><span data-stu-id="c5166-126">In case of a system issue or error, you may need to restart the service or SQL Server Agent.</span></span>  
  
### <a name="common-causes-of-errors"></a><span data-ttu-id="c5166-127">Häufige Fehlerursachen</span><span class="sxs-lookup"><span data-stu-id="c5166-127">Common Causes of Errors</span></span>  
 <span data-ttu-id="c5166-128">Es folgt eine Liste häufiger Ursachen von Fehlern:</span><span class="sxs-lookup"><span data-stu-id="c5166-128">Following is the list of common causes resulting in failures:</span></span>  
  
1.  <span data-ttu-id="c5166-129">**Änderungen an den SQL** -Anmelde Informationen: Wenn der Name der von verwendeten Anmelde Informationen [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)] geändert wird oder gelöscht wird, [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)] kann keine Sicherungen durchführen.</span><span class="sxs-lookup"><span data-stu-id="c5166-129">**Changes to SQL Credential:** If the name of the credential used by [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)] is changed or if it is deleted, [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)] will not be able to take backups.</span></span> <span data-ttu-id="c5166-130">Die Änderung sollte auf die [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)]-Konfigurationseinstellungen angewendet werden.</span><span class="sxs-lookup"><span data-stu-id="c5166-130">The change should be applied to [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)] configuration settings.</span></span>  
  
2.  <span data-ttu-id="c5166-131">**Änderungen an Speicherzugriffs Schlüssel-Werten:** Wenn die Speicher Schlüsselwerte für das Azure-Konto geändert werden, die SQL-Anmelde Informationen jedoch nicht mit den neuen Werten aktualisiert werden, [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)] schlägt bei der Authentifizierung beim Speicher fehl, und es werden keine Datenbanken gesichert, die für die Verwendung dieses Kontos konfiguriert sind.</span><span class="sxs-lookup"><span data-stu-id="c5166-131">**Changes to storage access key values:** If the storage key values are changed for the Azure account, but SQL Credential is not updated with the new values, [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)] will fail when authenticating to the storage, and fails to backup databases configured to use this account.</span></span>  
  
3.  <span data-ttu-id="c5166-132">**Änderungen an Azure Storage Konto:** Das Löschen oder Umbenennen des Speicher Kontos ohne entsprechende Änderungen an den SQL-Anmelde Informationen führt dazu [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)] , dass fehlschlägt und keine Sicherungen erstellt werden.</span><span class="sxs-lookup"><span data-stu-id="c5166-132">**Changes to Azure Storage Account:** Deleting or renaming storage account without corresponding changes to the SQL Credential will cause [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)] to fail and no backups will be taken.</span></span> <span data-ttu-id="c5166-133">Wenn Sie ein Speicherkonto löschen, müssen Sie sicherstellen, dass die Datenbanken mit gültigen Speicherkontoinformationen neu konfiguriert werden.</span><span class="sxs-lookup"><span data-stu-id="c5166-133">If you delete a storage account, ensure that the databases are reconfigured with valid storage account information.</span></span> <span data-ttu-id="c5166-134">Wenn ein Speicherkonto umbenannt oder die Schlüsselwerte geändert werden, stellen Sie sicher, dass diese Änderungen sich entsprechend in den von [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)] verwendeten SQL-Anmeldeinformationen widerspiegeln.</span><span class="sxs-lookup"><span data-stu-id="c5166-134">If a storage account is renamed or the key values are changed, ensure that these changes are reflected in the SQL Credential used by [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)].</span></span>  
  
4.  <span data-ttu-id="c5166-135">**Änderungen an Daten Bank Eigenschaften:** Änderungen an Wiederherstellungs Modellen oder eine Änderung des Namens können dazu führen, dass Sicherungen fehlschlagen.</span><span class="sxs-lookup"><span data-stu-id="c5166-135">**Changes to Database Properties:** Changes to recovery models or changing the name can cause backups to fail.</span></span>  
  
5.  <span data-ttu-id="c5166-136">**Änderungen am Wiederherstellungs Modell:** Wenn das Wiederherstellungs Modell der Datenbank von vollständig oder Massen protokolliert in einfach geändert wird, werden die Sicherungen angehalten, und die Datenbanken werden von übersprungen [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="c5166-136">**Changes to Recovery Model:** If the recovery model of the database is changed to simple from full or bulk-logged, backups will stop, and the databases will be skipped by [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)].</span></span> <span data-ttu-id="c5166-137">Weitere Informationen finden Sie unter [SQL Server verwaltete Sicherung in Azure: Interoperabilität und Koexistenz](../../2014/database-engine/sql-server-managed-backup-to-windows-azure-interoperability-and-coexistence.md)</span><span class="sxs-lookup"><span data-stu-id="c5166-137">For more information, see [SQL Server Managed Backup to Azure: Interoperability and Coexistence](../../2014/database-engine/sql-server-managed-backup-to-windows-azure-interoperability-and-coexistence.md)</span></span>  
  
### <a name="most-common-error-messages-and-solutions"></a><span data-ttu-id="c5166-138">Häufigste Fehlermeldungen und Lösungen</span><span class="sxs-lookup"><span data-stu-id="c5166-138">Most Common Error Messages and Solutions</span></span>  
  
1.  <span data-ttu-id="c5166-139">**Fehler beim Aktivieren oder Konfigurieren von [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)] :**</span><span class="sxs-lookup"><span data-stu-id="c5166-139">**Errors when enabling or configuring [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)]:**</span></span>  
  
     <span data-ttu-id="c5166-140">Fehler: "Fehler beim Zugriff auf die Speicher-URL.... Geben Sie gültige SQL-Anmelde Informationen an... ": möglicherweise werden diese und andere ähnliche Fehler angezeigt, die sich auf die SQL-Anmelde Informationen beziehen.</span><span class="sxs-lookup"><span data-stu-id="c5166-140">Error: " Failed to access the storage URL.... Provide a valid SQL Credential..." : You may see this and other similar errors referring to SQL Credentials.</span></span>  <span data-ttu-id="c5166-141">Überprüfen Sie in diesen Fällen den Namen der angegebenen SQL-Anmelde Informationen sowie die in den SQL-Anmelde Informationen gespeicherten Informationen, den Speicherkonto Namen und den Speicherzugriffs Schlüssel, und stellen Sie sicher, dass Sie aktuell und gültig sind.</span><span class="sxs-lookup"><span data-stu-id="c5166-141">In such cases, review the name of the SQL Credential you provided, and also the information stored in the SQL Credential - the storage account name, and the storage access key and make sure that they are current and valid.</span></span>  
  
     <span data-ttu-id="c5166-142">Fehler: "... die Datenbank kann nicht konfiguriert werden... Da es sich um eine Systemdatenbank handelt ": dieser Fehler wird angezeigt, wenn Sie versuchen, [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)] für eine Systemdatenbank zu aktivieren.</span><span class="sxs-lookup"><span data-stu-id="c5166-142">Error: "... cannot configure the database....because it is a system database": You will see this error if you try to enable [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)] for a system database.</span></span>  [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)] <span data-ttu-id="c5166-143">unterstützt keine Sicherungen von Systemdatenbanken.</span><span class="sxs-lookup"><span data-stu-id="c5166-143">does not support backups for system databases.</span></span>  <span data-ttu-id="c5166-144">Um die Sicherung einer Systemdatenbank zu konfigurieren, verwenden Sie andere SQL Server-Sicherungstechnologien, z. B. Wartungspläne.</span><span class="sxs-lookup"><span data-stu-id="c5166-144">To configure backup for a system database use other SQL Server Backup technologies such as maintenance plans.</span></span>  
  
     <span data-ttu-id="c5166-145">Fehler: "... Geben Sie eine Beibehaltungs Dauer an.... ": möglicherweise werden Fehler bezüglich der Beibehaltungs Dauer angezeigt, wenn Sie für die Datenbank oder Instanz bei der erstmaligen Konfiguration dieser Werte keine Beibehaltungs Dauer angegeben haben.</span><span class="sxs-lookup"><span data-stu-id="c5166-145">Error:" ... Provide a retention period...." : You may see errors regarding the retention period if you either have not specified a retention period for the database or instance when you are configuring these values for the first time.</span></span> <span data-ttu-id="c5166-146">Es wird außerdem ein Fehler angezeigt, wenn Sie einen anderen Wert als eine Zahl zwischen 1 und 30 angeben.</span><span class="sxs-lookup"><span data-stu-id="c5166-146">You may also see an error if you provide a value other than a number between 1 and 30.</span></span> <span data-ttu-id="c5166-147">Der zulässige Wert für die Beibehaltungsdauer ist eine Zahl zwischen 1 und 30.</span><span class="sxs-lookup"><span data-stu-id="c5166-147">The allowed value for the retention period is a number between 1 and 30.</span></span>  
  
2.  <span data-ttu-id="c5166-148">**E-Mail-Benachrichtigungsfehler:**</span><span class="sxs-lookup"><span data-stu-id="c5166-148">**Email Notification Errors:**</span></span>  
  
     <span data-ttu-id="c5166-149">Fehler: "Datenbank-E-Mail ist nicht aktiviert...". dieser Fehler wird angezeigt, wenn Sie e-Mail-Benachrichtigungen aktivieren, aber Datenbank-E-Mail ist für die Instanz nicht konfiguriert.</span><span class="sxs-lookup"><span data-stu-id="c5166-149">Error: "Database Mail is not enabled..." - You will see this error if you enable e-mail notifications, but Database Mail is not configured on the instance.</span></span> <span data-ttu-id="c5166-150">Sie müssen Datenbank-E-Mail für die Instanz konfigurieren, um Benachrichtigungen zum Integritätsstatus von [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)] empfangen zu können.</span><span class="sxs-lookup"><span data-stu-id="c5166-150">You must configure Database Mail on the instance to be able to receive notification of the health status of [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)].</span></span> <span data-ttu-id="c5166-151">Informationen zum Aktivieren von Datenbank-e-Mail finden Sie unter [Konfigurieren von Datenbank-E-Mail](../relational-databases/database-mail/configure-database-mail.md).</span><span class="sxs-lookup"><span data-stu-id="c5166-151">For information about how to enable database mail, see [Configure Database Mail](../relational-databases/database-mail/configure-database-mail.md).</span></span> <span data-ttu-id="c5166-152">Sie müssen außerdem den SQL Server-Agent aktivieren, um Datenbank-E-Mail für Benachrichtigungen verwenden zu können.</span><span class="sxs-lookup"><span data-stu-id="c5166-152">You must also enable SQL Server Agent to use Database Mail for notifications.</span></span> <span data-ttu-id="c5166-153">Weitere Informationen finden [Sie](../relational-databases/database-mail/configure-sql-server-agent-mail-to-use-database-mail.md#BeforeYouBegin)unter Vorbereitung.</span><span class="sxs-lookup"><span data-stu-id="c5166-153">For more information, see [Before You Begin](../relational-databases/database-mail/configure-sql-server-agent-mail-to-use-database-mail.md#BeforeYouBegin).</span></span>  
  
     <span data-ttu-id="c5166-154">Es folgt eine Liste der Fehlernummern, die möglicherweise angezeigt werden und die E-Mail-Benachrichtigungen zugeordnet sind:</span><span class="sxs-lookup"><span data-stu-id="c5166-154">Following is a list of error numbers you might see that are associated with email notifications:</span></span>  
  
    -   <span data-ttu-id="c5166-155">ErrorNumber: 45209</span><span class="sxs-lookup"><span data-stu-id="c5166-155">ErrorNumber: 45209</span></span>  
  
    -   <span data-ttu-id="c5166-156">ErrorNumber: 45210</span><span class="sxs-lookup"><span data-stu-id="c5166-156">ErrorNumber: 45210</span></span>  
  
    -   <span data-ttu-id="c5166-157">Fehlernummer: 45211</span><span class="sxs-lookup"><span data-stu-id="c5166-157">ErrorNumber: 45211</span></span>  
  
3.  <span data-ttu-id="c5166-158">**Verbindungsfehler:**</span><span class="sxs-lookup"><span data-stu-id="c5166-158">**Connectivity Errors:**</span></span>  
  
    -   <span data-ttu-id="c5166-159">**Fehler im Zusammenhang mit der SQL-Konnektivität:** Diese Fehler treten auf, wenn Probleme beim Herstellen einer Verbindung mit SQL Server-Instanz auftreten.</span><span class="sxs-lookup"><span data-stu-id="c5166-159">**Errors Related to SQL Connectivity:** These errors happen when there are issues connecting to SQL Server instance.</span></span> <span data-ttu-id="c5166-160">Dieser Fehlertyp wird durch erweiterte Ereignisse über den Adminkanal verfügbar gemacht.</span><span class="sxs-lookup"><span data-stu-id="c5166-160">The extended events expose these type of errors through the admin channel.</span></span> <span data-ttu-id="c5166-161">Die folgenden beiden erweiterten Ereignisse können bei Fehlern im Zusammenhang mit dieser Art von Verbindungsproblemen auftreten:</span><span class="sxs-lookup"><span data-stu-id="c5166-161">Following are the two extended events that you might see for errors related to this type of connectivity issues:</span></span>  
  
         <span data-ttu-id="c5166-162">FileRetentionAdminXEvent mit event_type = SqlError.</span><span class="sxs-lookup"><span data-stu-id="c5166-162">FileRetentionAdminXEvent with event_type = SqlError.</span></span> <span data-ttu-id="c5166-163">Ausführliche Informationen zu diesem Fehler finden Sie im Ereignis unter error_code, error_message und stack_trace.</span><span class="sxs-lookup"><span data-stu-id="c5166-163">For details of this error, look at the error_code, error_message and stack_trace of that event.</span></span> <span data-ttu-id="c5166-164">Der error_code ist die Fehlernummer der SqlException.</span><span class="sxs-lookup"><span data-stu-id="c5166-164">The error_code is the SqlException's error number.</span></span>  
  
         <span data-ttu-id="c5166-165">SmartBackupAdminXevent mit folgenden Meldungspräfixen:</span><span class="sxs-lookup"><span data-stu-id="c5166-165">SmartBackupAdminXevent with the following messages/message prefixes:</span></span>  
  
         <span data-ttu-id="c5166-166">*"Interner Fehler beim Konfigurieren SQL Server Managed Backup in Azure-Standardeinstellungen. Der Fehler ist möglicherweise vorübergehend. "*</span><span class="sxs-lookup"><span data-stu-id="c5166-166">*"An internal error occurred while configuring SQL Server Managed Backup to Azure default settings for instance. Error might be transient."*</span></span>  
  
         <span data-ttu-id="c5166-167">*"Wahrscheinlich treten Verbindungsprobleme mit SQL Server auf. Die Datenbank wird in der aktuellen Iterations Datenbank übersprungen. "*</span><span class="sxs-lookup"><span data-stu-id="c5166-167">*"Probably experiencing connectivity issues with SQL Server. Skipping database in the current iteration."*</span></span>  
  
         <span data-ttu-id="c5166-168">*"Fehler beim Abfragen der Protokoll Verwendungs Informationen. Der Fehler ist möglicherweise vorübergehend. Die Datenbank wird in der aktuellen Iterations Datenbank übersprungen. "*</span><span class="sxs-lookup"><span data-stu-id="c5166-168">*"Querying log usage info failed. The failure might be transient. Skipping database in the current iteration."*</span></span>  
  
         <span data-ttu-id="c5166-169">*"SQL-Ausnahme beim Laden von SSMBackup2WA-Agent-Metadaten. Der Fehler ist möglicherweise vorübergehend. Der Vorgang wird wiederholt. "*</span><span class="sxs-lookup"><span data-stu-id="c5166-169">*"SQL exception encountered while loading SSMBackup2WA agent metadata. The failure might be transient. Operation will be retried."*</span></span>  
  
         <span data-ttu-id="c5166-170">*"SSMBackup2WA hat eine SQL-Ausnahme gefunden, während... "*</span><span class="sxs-lookup"><span data-stu-id="c5166-170">*"SSMBackup2WA encountered SQL exception while ... "*</span></span>  
  
    -   <span data-ttu-id="c5166-171">**Fehler bei Verbindungen mit dem Speicherkonto:**</span><span class="sxs-lookup"><span data-stu-id="c5166-171">**Errors Connecting to the storage account:**</span></span>  
  
         <span data-ttu-id="c5166-172">Speicherausnahmen werden in FileRetentionAdminXEvent mit event_type = XstoreError angegeben.</span><span class="sxs-lookup"><span data-stu-id="c5166-172">Storage exceptions are reported in FileRetentionAdminXEvent with event_type = XstoreError.</span></span> <span data-ttu-id="c5166-173">Ausführliche Informationen zum Fehler finden Sie im Ereignis unter error_message und stack_trace.</span><span class="sxs-lookup"><span data-stu-id="c5166-173">For details of the error, look at the error_message and stack_trace of that event.</span></span>  
  
         <span data-ttu-id="c5166-174">Da SQL Server Managed Backup die zugrunde liegende URL-Sicherungstechnologie nutzt, beziehen sich die Fehler zu Speicherverbindungen auf beide Funktionen.</span><span class="sxs-lookup"><span data-stu-id="c5166-174">Since SQL Server Managed Backup uses the underlying Backup to URL technology, the errors related to storage connectivity apply to both the features.</span></span> <span data-ttu-id="c5166-175">Weitere Informationen zu Problem Behandlungsschritten finden Sie im **Abschnitt "Problem** Behandlung" im Artikel [bewährte Methoden und Problembehandlung bei der SQL Server Backup to URL](../relational-databases/backup-restore/sql-server-backup-to-url-best-practices-and-troubleshooting.md) .</span><span class="sxs-lookup"><span data-stu-id="c5166-175">For more information on troubleshooting steps, see **troubleshooting section** of the [SQL Server Backup to URL Best Practices and Troubleshooting](../relational-databases/backup-restore/sql-server-backup-to-url-best-practices-and-troubleshooting.md) article.</span></span>  
  
### <a name="troubleshooting-system-issues"></a><span data-ttu-id="c5166-176">Behandlung von Systemproblemen</span><span class="sxs-lookup"><span data-stu-id="c5166-176">Troubleshooting System Issues</span></span>  
 <span data-ttu-id="c5166-177">Es folgen einige Szenarien, wenn es ein Problem mit dem System (SQL Server, SQL Server-Agent) und den Auswirkungen auf [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)] gibt:</span><span class="sxs-lookup"><span data-stu-id="c5166-177">Following are some scenarios when there is an issue with the system (SQL Server, SQL Server Agent) and its effects on [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)]:</span></span>  
  
-   <span data-ttu-id="c5166-178">**Sqlservr.exe reagiert nicht mehr oder funktioniert nicht mehr, wenn [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)] ausgeführt wird:** wenn SQL Server nicht mehr funktioniert, wird der SQL-Agent ordnungsgemäß heruntergefahren, [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)] und die Ereignisse werden in der Datei "SQL Agent. out" protokolliert.</span><span class="sxs-lookup"><span data-stu-id="c5166-178">**Sqlservr.exe stops responding or stops working when [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)] is running:** If SQL Server stops working, SQL Agent will gracefully shut down, [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)] also stops and the events are logged in SQL Agent.out file.</span></span>  
  
     <span data-ttu-id="c5166-179">Wenn SQL Server nicht mehr reagiert, werden Ereignisse im Adminkanal protokolliert.</span><span class="sxs-lookup"><span data-stu-id="c5166-179">If SQL Server stops responding, events are logged in the admin channel.</span></span>  <span data-ttu-id="c5166-180">Ein Beispiel für das Ereignisprotokoll:</span><span class="sxs-lookup"><span data-stu-id="c5166-180">An example of the event log:</span></span>  
  
     <span data-ttu-id="c5166-181">*SQL-Fehler (Engine antwortet nicht oder SqlException: SqlException: SqlException:* </span><span class="sxs-lookup"><span data-stu-id="c5166-181">*Sql Error (engine not responding or get sqlException: SqlException:* </span></span>  
     <span data-ttu-id="c5166-182">*Fehlercode, Message und StackTrace werden in einem Admin Channel-XEvent angezeigt, sowie einige zusätzliche Informationen, wie z. b.:* </span><span class="sxs-lookup"><span data-stu-id="c5166-182">*error code, message and stacktrace will be displayed in an admin channel xevent, together with some extra information, such as :* </span></span>  
    <span data-ttu-id="c5166-183">*"Wahrscheinlich treten Verbindungsprobleme mit SQL Server auf. Die Datenbank wird in der aktuellen Iterations Datenbank übersprungen.*</span><span class="sxs-lookup"><span data-stu-id="c5166-183">*"Probably experiencing connectivity issues with SQL Server. Skipping database in the current iteration"*</span></span>  
  
-   <span data-ttu-id="c5166-184">**Der SQL-Agent reagiert nicht mehr oder funktioniert nicht mehr, wenn [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)] ausgeführt wird:**</span><span class="sxs-lookup"><span data-stu-id="c5166-184">**SQL Agent stops responding or stops working when [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)] is running:**</span></span>  
  
     <span data-ttu-id="c5166-185">Wenn SQL Agent nicht mehr funktioniert, wird auch [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)] angehalten, und Ereignisse werden im Adminkanal protokolliert.</span><span class="sxs-lookup"><span data-stu-id="c5166-185">If SQL Agent stops working, [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)] also stops and events are logged in the admin channel.</span></span> <span data-ttu-id="c5166-186">Dies ist Szenarien ähnlich, in denen SQL Server nicht mehr reagiert.</span><span class="sxs-lookup"><span data-stu-id="c5166-186">This is similar to the scenarios when SQL Server stops responding.</span></span>  
  
     <span data-ttu-id="c5166-187">Wenn SQL Agent nicht mehr reagiert, kann [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)] die Sicherungsvorgänge nicht mehr fortsetzen, und Ereignisse werden im Adminkanal protokolliert.</span><span class="sxs-lookup"><span data-stu-id="c5166-187">If SQL Agent stops responding, [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)] will be unable to continue with backup operations, and events are logged in the admin channel.</span></span> <span data-ttu-id="c5166-188">Ein Beispiel für das Ereignisprotokoll:</span><span class="sxs-lookup"><span data-stu-id="c5166-188">An example of the event log:</span></span>  
  
     <span data-ttu-id="c5166-189">*Auftrags hängen: siehe admin Channel xevents* </span><span class="sxs-lookup"><span data-stu-id="c5166-189">*Job hangs: see admin channel xevents* </span></span>  
    <span data-ttu-id="c5166-190">*"Es wurde kein Fortschrittsupdate von SQL Server in mehr als" + Konstanten. dbbackupinfomsgmaxwaittime + "Stunden für die Datenbanksicherung empfangen.   SSM-cloudsicherung wird weiterhin gewartet. "*</span><span class="sxs-lookup"><span data-stu-id="c5166-190">*"A progress update hasn't been received from SQL Server in more than " + Constants.DBBackupInfoMsgMaxWaitTime  + " hours for database backup.   SSM Cloud Backup will continue to wait."*</span></span>  
  
 <span data-ttu-id="c5166-191">Wenn Sie e-Mail-Benachrichtigungen aktiviert haben, erhalten Sie eine Benachrichtigung, die die **Anzahl der Sicherungs Schleifen** und die **Anzahl der Beibehaltungs Schleifen**umfasst.</span><span class="sxs-lookup"><span data-stu-id="c5166-191">If you have enabled email notification, you will receive a notification which includes **Number of Backup Loops** and **Number of Retention Loops**.</span></span> <span data-ttu-id="c5166-192">Wenn der Wert, der in der Benachrichtigung für eine oder beide Spalten zurückgegeben wird, null ist, kann dies ein Hinweis darauf sein, dass das System nicht reagiert.</span><span class="sxs-lookup"><span data-stu-id="c5166-192">If the value returned in the notification for one or both of these two columns is zero, it could be an indication that the system is not responding.</span></span>  
  
> [!WARNING]  
>  <span data-ttu-id="c5166-193">Bei den internen Prozessen, durch die die Ergebnisse für den Bericht generiert werden, wird davon ausgegangen, dass sich die Diagnoseprotokolle der Engine am selben Speicherort wie das SQL Agent-Fehlerprotokoll befinden, das standardmäßig im selben Ordner wie die Fehlerprotokolle der SQL Server-Instanz gespeichert wird.</span><span class="sxs-lookup"><span data-stu-id="c5166-193">The internal processes that generate the results for the report, assumes that the engine diagnostic logs are in the same location of SQL Agent error log, which by default is in the same folder as the error logs of the SQL Server instance.</span></span> <span data-ttu-id="c5166-194">Wenn die Diagnoseprotokolle der Engine an einen anderen Speicherort als den des SQL Agent-Fehlerprotokolls verschoben werden, ist das System nicht in der Lage, die Diagnoseprotokolle für intelligente Sicherungen zu finden, sodass der Bericht in der E-Mail-Benachrichtigung u. U. fehlerhaft ist.</span><span class="sxs-lookup"><span data-stu-id="c5166-194">If the engine diagnostic logs are moved to a location other than SQL Agent error log location, the system is unable to find the smart backup diagnostic logs, and hence the report in the email notification may not be correct.</span></span> <span data-ttu-id="c5166-195">Beispielsweise kann in allen gemeldeten Feldern der Wert **0** (null) angezeigt werden, einschließlich der Anzahl der Sicherungs Schleifen und der Anzahl der Beibehaltungs Schleifen.</span><span class="sxs-lookup"><span data-stu-id="c5166-195">For example, you might see a value of **0** in all the fields reported including the Number of Backup Loops and Number of Retention Loops.</span></span> <span data-ttu-id="c5166-196">Wenn die Diagnoseprotokolle also an einen anderen Speicherort verschoben werden, bedeutet dies nicht, dass das System nicht reagiert, sondern dass es nicht in der Lage ist, die Protokolle zu finden.</span><span class="sxs-lookup"><span data-stu-id="c5166-196">In this case where the diagnostic logs are moved to a different location, it may not mean that the system is not responding, but that the system is unable to find the logs.</span></span> <span data-ttu-id="c5166-197">Stellen Sie zunächst sicher, dass sich die Diagnoseprotokolle und SQL Agent-Fehlerprotokolle am selben Speicherort befinden.</span><span class="sxs-lookup"><span data-stu-id="c5166-197">Ensure that the location of the diagnostic logs and SQL Agent error logs are at the same location first.</span></span> <span data-ttu-id="c5166-198">Um den aktuellen Speicherort der Diagnoseprotokolle zu überprüfen, können Sie [sys. dm_os_server_diagnostics_log_configurations](/sql/relational-databases/system-dynamic-management-views/sys-dm-os-server-diagnostics-log-configurations)verwenden.</span><span class="sxs-lookup"><span data-stu-id="c5166-198">To verify the current location of the diagnostic logs, you can use [sys.dm_os_server_diagnostics_log_configurations](/sql/relational-databases/system-dynamic-management-views/sys-dm-os-server-diagnostics-log-configurations).</span></span> <span data-ttu-id="c5166-199">Die- `path` Spalte gibt den aktuellen Speicherort der Diagnoseprotokolle der Engine zurück.</span><span class="sxs-lookup"><span data-stu-id="c5166-199">The `path` column returns the current location of the engine diagnostic logs.</span></span>  <span data-ttu-id="c5166-200">Er sollte sich im gleichen Ordner befinden wie die SQL Agent-Fehlerprotokolle.</span><span class="sxs-lookup"><span data-stu-id="c5166-200">It should be in the same folder as the SQL Agent error logs.</span></span> <span data-ttu-id="c5166-201">Der Pfad der SQL Agent-Fehlerprotokolle kann mithilfe der gespeicherten Prozedur `dbo.sp_get_sqlagent_properties` abgerufen werden.</span><span class="sxs-lookup"><span data-stu-id="c5166-201">You can get SQL Agent error log path using the `dbo.sp_get_sqlagent_properties` stored procedure.</span></span>  
  
 <span data-ttu-id="c5166-202">Überprüfen Sie die Protokolle mit erweiterten Ereignisses, um Details zu den Fehlern anzuzeigen.</span><span class="sxs-lookup"><span data-stu-id="c5166-202">Check the extended event logs to see details of the errors.</span></span> <span data-ttu-id="c5166-203">Beheben Sie die Fehler oder starten Sie den SQL Server-Agent neu, um die Situation zu korrigieren.</span><span class="sxs-lookup"><span data-stu-id="c5166-203">fix the errors, or restart SQL Server Agent to correct the situation.</span></span>  
  
  
