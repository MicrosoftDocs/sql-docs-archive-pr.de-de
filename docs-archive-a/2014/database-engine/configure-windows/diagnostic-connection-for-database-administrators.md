---
title: Diagnoseverbindung für Datenbankadministratoren | Microsoft-Dokumentation
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: configuration
ms.topic: conceptual
helpviewer_keywords:
- server management [SQL Server], connections
- administrator connections [SQL Server]
- ports [SQL Server], DAC
- DAC
- network connections [SQL Server], dedicated administrator
- diagnostic connections [SQL Server]
- connections [SQL Server], dedicated administrator
- ports [SQL Server]
- dedicated administrator connections [SQL Server]
ms.assetid: 993e0820-17f2-4c43-880c-d38290bf7abc
author: MikeRayMSFT
ms.author: mikeray
ms.openlocfilehash: 0d452ca155a5187136c910e81e8bd073e34cad56
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 08/04/2020
ms.locfileid: "87618901"
---
# <a name="diagnostic-connection-for-database-administrators"></a><span data-ttu-id="2c490-102">Diagnoseverbindung für Datenbankadministratoren</span><span class="sxs-lookup"><span data-stu-id="2c490-102">Diagnostic Connection for Database Administrators</span></span>
  [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="2c490-103">stellt eine spezielle Diagnoseverbindung für Administratoren bereit, wenn Standardverbindungen zum Server nicht möglich sind.</span><span class="sxs-lookup"><span data-stu-id="2c490-103">provides a special diagnostic connection for administrators when standard connections to the server are not possible.</span></span> <span data-ttu-id="2c490-104">Mit dieser Diagnoseverbindung kann ein Administrator auf [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] zugreifen, um Diagnoseabfragen auszuführen und Probleme zu behandeln, auch wenn [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] auf Anforderungen von Standardverbindungen nicht antwortet.</span><span class="sxs-lookup"><span data-stu-id="2c490-104">This diagnostic connection allows an administrator to access [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] to execute diagnostic queries and troubleshoot problems even when [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] is not responding to standard connection requests.</span></span>  
  
 <span data-ttu-id="2c490-105">Diese dedizierte Administratorverbindung unterstützt die Verschlüsselung und andere Sicherheitsfunktionen von [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="2c490-105">This dedicated administrator connection (DAC) supports encryption and other security features of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="2c490-106">Die DAC lässt den Wechsel des Benutzerkontexts ausschließlich in den eines anderen Administrators zu.</span><span class="sxs-lookup"><span data-stu-id="2c490-106">The DAC only allows changing the user context to another admin user.</span></span>  
  
 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="2c490-107">versucht alles, damit die DAC (Dedicated Administrator Connection, dedizierte Administratorverbindung) erfolgreich eine Verbindung herstellt, doch unter extremen Bedingungen ist dies eventuell nicht möglich.</span><span class="sxs-lookup"><span data-stu-id="2c490-107">makes every attempt to make DAC connect successfully, but under extreme situations it may not be successful.</span></span>  
  
||  
|-|  
|<span data-ttu-id="2c490-108">**Gilt für**: [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] ( [!INCLUDE[ssKatmai](../../includes/sskatmai-md.md)] bis zur [aktuellen Version](https://go.microsoft.com/fwlink/p/?LinkId=299658)), [!INCLUDE[sqldbesa](../../includes/sqldbesa-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="2c490-108">**Applies to**: [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] ([!INCLUDE[ssKatmai](../../includes/sskatmai-md.md)] through [current version](https://go.microsoft.com/fwlink/p/?LinkId=299658)), [!INCLUDE[sqldbesa](../../includes/sqldbesa-md.md)].</span></span>|  
  
## <a name="connecting-with-dac"></a><span data-ttu-id="2c490-109">Herstellen einer dedizierten Administratorverbindung</span><span class="sxs-lookup"><span data-stu-id="2c490-109">Connecting with DAC</span></span>  
 <span data-ttu-id="2c490-110">Standardmäßig ist die Verbindung nur von einem Client aus zulässig, der auf dem Server ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="2c490-110">By default, the connection is only allowed from a client running on the server.</span></span> <span data-ttu-id="2c490-111">Netzwerkverbindungen sind nur dann zulässig, wenn sie mithilfe der gespeicherten Prozedur „sp_configure“ mit der Option [remote admin connections](remote-admin-connections-server-configuration-option.md)konfiguriert wurden.</span><span class="sxs-lookup"><span data-stu-id="2c490-111">Network connections are not permitted unless they are configured by using the sp_configure stored procedure with the [remote admin connections option](remote-admin-connections-server-configuration-option.md).</span></span>  
  
 <span data-ttu-id="2c490-112">Nur Mitglieder der [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] -Rolle sysadmin können dedizierte Administratorverbindungen (DAC) herstellen.</span><span class="sxs-lookup"><span data-stu-id="2c490-112">Only members of the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] sysadmin role can connect using the DAC.</span></span>  
  
 <span data-ttu-id="2c490-113">Die DAC steht über das **sqlcmd** -Hilfsprogramm für Eingabeaufforderungen mit einem speziellen Administratorschalter (**-A**) zur Verfügung und wird von diesem unterstützt.</span><span class="sxs-lookup"><span data-stu-id="2c490-113">The DAC is available and supported through the **sqlcmd** command-prompt utility using a special administrator switch (**-A**).</span></span> <span data-ttu-id="2c490-114">Weitere Informationen zum Verwenden von **sqlcmd** finden Sie unter [Verwenden von sqlcmd mit Skriptvariablen](../../relational-databases/scripting/sqlcmd-use-with-scripting-variables.md).</span><span class="sxs-lookup"><span data-stu-id="2c490-114">For more information about using **sqlcmd**, see [Use sqlcmd with Scripting Variables](../../relational-databases/scripting/sqlcmd-use-with-scripting-variables.md).</span></span> <span data-ttu-id="2c490-115">Sie können auch eine Verbindung `admin:` mit dem Instanznamen im Format **sqlcmd-Sadmin:** _<instance_name> herstellen._</span><span class="sxs-lookup"><span data-stu-id="2c490-115">You can also connect prefixing `admin:`to the instance name in the format **sqlcmd -Sadmin:**_<instance_name>._</span></span> <span data-ttu-id="2c490-116">Sie können eine DAC auch aus einem [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] Abfrage-Editor initiieren, indem Sie eine Verbindung mit herstellen `admin:` \<*instance_name*> .</span><span class="sxs-lookup"><span data-stu-id="2c490-116">You can also initiate a DAC from a [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] Query Editor by connecting to `admin:`\<*instance_name*>.</span></span>  
  
## <a name="restrictions"></a><span data-ttu-id="2c490-117">Beschränkungen</span><span class="sxs-lookup"><span data-stu-id="2c490-117">Restrictions</span></span>  
 <span data-ttu-id="2c490-118">Da die DAC nur zum Diagnostizieren von Serverproblemen in seltenen Fällen gedacht ist, bestehen einige Einschränkungen für die Verbindung:</span><span class="sxs-lookup"><span data-stu-id="2c490-118">Because the DAC exists solely for diagnosing server problems in rare circumstances, there are some restrictions on the connection:</span></span>  
  
-   <span data-ttu-id="2c490-119">Um sicherzustellen, dass Ressourcen für die Verbindung verfügbar sind, ist nur eine DAC pro Instanz von [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]zulässig.</span><span class="sxs-lookup"><span data-stu-id="2c490-119">To guarantee that there are resources available for the connection, only one DAC is allowed per instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="2c490-120">Ist bereits eine dedizierte Administratorverbindung aktiv, wird jede weitere Anforderung einer Verbindung über DAC mit Fehler 17810 abgelehnt.</span><span class="sxs-lookup"><span data-stu-id="2c490-120">If a DAC connection is already active, any new request to connect through the DAC is denied with error 17810.</span></span>  
  
-   <span data-ttu-id="2c490-121">Zur Einsparung von Ressourcen lauscht [!INCLUDE[ssExpress](../../includes/ssexpress-md.md)] am DAC-Port nur dann, wenn beim Starten das Ablaufverfolgungsflag 7806 angegeben wird.</span><span class="sxs-lookup"><span data-stu-id="2c490-121">To conserve resources, [!INCLUDE[ssExpress](../../includes/ssexpress-md.md)] does not listen on the DAC port unless started with a trace flag 7806.</span></span>  
  
-   <span data-ttu-id="2c490-122">Die DAC versucht zunächst, eine Verbindung zu der Standarddatenbank herzustellen, die dem Anmeldenamen zugeordnet ist.</span><span class="sxs-lookup"><span data-stu-id="2c490-122">The DAC initially attempts to connect to the default database associated with the login.</span></span> <span data-ttu-id="2c490-123">Nach erfolgreichem Verbindungsaufbau können Sie eine Verbindung mit der master-Datenbank herstellen.</span><span class="sxs-lookup"><span data-stu-id="2c490-123">After it is successfully connected, you can connect to the master database.</span></span> <span data-ttu-id="2c490-124">Wenn die Standarddatenbank offline oder aus anderen Gründen nicht verfügbar ist, wird von der Verbindung der Fehler 4060 zurückgegeben.</span><span class="sxs-lookup"><span data-stu-id="2c490-124">If the default database is offline or otherwise not available, the connection will return error 4060.</span></span> <span data-ttu-id="2c490-125">Die Verbindung kann jedoch hergestellt werden, wenn Sie die Standarddatenbank überschreiben und stattdessen mithilfe des folgenden Befehls eine Verbindung mit der master-Datenbank herstellen:</span><span class="sxs-lookup"><span data-stu-id="2c490-125">However, it will succeed if you override the default database to connect to the master database instead using the following command:</span></span>  
  
     <span data-ttu-id="2c490-126">**sqlcmd -A -d master**</span><span class="sxs-lookup"><span data-stu-id="2c490-126">**sqlcmd -A -d master**</span></span>  
  
     <span data-ttu-id="2c490-127">Es wird empfohlen, die dedizierte Administratorverbindung mit der master-Datenbank herzustellen, da diese sicher verfügbar ist, wenn die Instanz von [!INCLUDE[ssDE](../../includes/ssde-md.md)] gestartet ist.</span><span class="sxs-lookup"><span data-stu-id="2c490-127">We recommend that you connect to the master database with the DAC because master is guaranteed to be available if the instance of the [!INCLUDE[ssDE](../../includes/ssde-md.md)] is started.</span></span>  
  
-   [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="2c490-128">verhindert die Ausführung paralleler Abfragen oder Befehle über die DAC.</span><span class="sxs-lookup"><span data-stu-id="2c490-128">prohibits running parallel queries or commands with the DAC.</span></span> <span data-ttu-id="2c490-129">So wird beispielsweise Fehler 3637 generiert, wenn Sie eine der folgenden Anweisungen über die DAC ausführen:</span><span class="sxs-lookup"><span data-stu-id="2c490-129">For example, error 3637 is generated if you execute either of the following statements with the DAC:</span></span>  
  
    -   <span data-ttu-id="2c490-130">RESTORE</span><span class="sxs-lookup"><span data-stu-id="2c490-130">RESTORE</span></span>  
  
    -   <span data-ttu-id="2c490-131">BACKUP</span><span class="sxs-lookup"><span data-stu-id="2c490-131">BACKUP</span></span>  
  
-   <span data-ttu-id="2c490-132">Bei einer DAC ist nur die Verfügbarkeit beschränkter Ressourcen sichergestellt.</span><span class="sxs-lookup"><span data-stu-id="2c490-132">Only limited resources are guaranteed to be available with the DAC.</span></span> <span data-ttu-id="2c490-133">Führen Sie über die DAC keine ressourcenintensiven Abfragen (z. B.</span><span class="sxs-lookup"><span data-stu-id="2c490-133">Do not use the DAC to run resource-intensive queries (for example.</span></span> <span data-ttu-id="2c490-134">eine komplexe Verknüpfung in einer großen Tabelle) oder Abfragen aus, die eine Blockierung verursachen können.</span><span class="sxs-lookup"><span data-stu-id="2c490-134">a complex join on large table) or queries that may block.</span></span> <span data-ttu-id="2c490-135">Dies trägt dazu bei, zu verhindern, dass vorhandene Serverprobleme durch die DAC verstärkt werden.</span><span class="sxs-lookup"><span data-stu-id="2c490-135">This helps prevent the DAC from compounding any existing server problems.</span></span> <span data-ttu-id="2c490-136">Zur Vermeidung möglicher Blockierungssituationen müssen Sie ggf. Abfragen, die eine Blockierung verursachen können, möglichst auf momentaufnahmebasierten Isolationsstufen ausführen. Ist dies nicht möglich, sollten Sie die Transaktionsisolationsstufe auf READ UNCOMMITTED festlegen und/oder den LOCK_TIMEOUT-Wert auf eine kurze Zeitspanne, beispielsweise 2000 Millisekunden, festlegen.</span><span class="sxs-lookup"><span data-stu-id="2c490-136">To avoid potential blocking scenarios, if you have to run queries that may block, run the query under snapshot-based isolation levels if possible; otherwise, set the transaction isolation level to READ UNCOMMITTED and set the LOCK_TIMEOUT value to a short value such as 2000 milliseconds, or both.</span></span> <span data-ttu-id="2c490-137">Dies verhindert, dass die DAC-Sitzung blockiert wird.</span><span class="sxs-lookup"><span data-stu-id="2c490-137">This will prevent the DAC session from getting blocked.</span></span> <span data-ttu-id="2c490-138">Abhängig vom Status von [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] kann die DAC-Sitzung jedoch durch ein Latch blockiert werden.</span><span class="sxs-lookup"><span data-stu-id="2c490-138">However, depending on the state that the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] is in, the DAC session might get blocked on a latch.</span></span> <span data-ttu-id="2c490-139">Möglicherweise können Sie die DAC-Sitzung mit STRG-C beenden, dies ist jedoch nicht sichergestellt.</span><span class="sxs-lookup"><span data-stu-id="2c490-139">You might be able to terminate the DAC session using CNTRL-C but it is not guaranteed.</span></span> <span data-ttu-id="2c490-140">In diesem Fall ist unter Umständen der Neustart von [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]unumgänglich.</span><span class="sxs-lookup"><span data-stu-id="2c490-140">In that case, your only option may be to restart [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span>  
  
-   <span data-ttu-id="2c490-141">Um die Konnektivität und die Problembehandlung mit der DAC sicherzustellen, reserviert [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] beschränkte Ressourcen für die Verarbeitung von Befehlen, die in der DAC ausgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="2c490-141">To guarantee connectivity and troubleshooting with the DAC, [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] reserves limited resources to process commands run on the DAC.</span></span> <span data-ttu-id="2c490-142">Diese Ressourcen sind in der Regel nur für einfache Diagnose- und Problembehandlungsfunktionen wie die unten aufgeführten ausreichend.</span><span class="sxs-lookup"><span data-stu-id="2c490-142">These resources are typically only enough for simple diagnostic and troubleshooting functions, such as those listed below.</span></span>  
  
 <span data-ttu-id="2c490-143">Obwohl Sie über die DAC theoretisch jede [!INCLUDE[tsql](../../includes/tsql-md.md)] -Anweisung ausführen können, die nicht parallel ausgeführt werden muss, wird dringend empfohlen, nur die folgenden Diagnose- und Problembehandlungsbefehle zu verwenden:</span><span class="sxs-lookup"><span data-stu-id="2c490-143">Although you can theoretically run any [!INCLUDE[tsql](../../includes/tsql-md.md)] statement that does not have to execute in parallel on the DAC, we strongly recommend that you restrict usage to the following diagnostic and troubleshooting commands:</span></span>  
  
-   <span data-ttu-id="2c490-144">Abfragen von dynamischen Verwaltungssichten für grundlegende Diagnosen, wie z. B. sys.dm_tran_locks für den Sperrstatus, sys.dm_os_memory_cache_counters für die Zustandsüberprüfung der Caches sowie sys.dm_exec_requests und sys.dm_exec_sessions für aktive Sitzungen und Anforderungen.</span><span class="sxs-lookup"><span data-stu-id="2c490-144">Querying dynamic management views for basic diagnostics such as sys.dm_tran_locks for the locking status, sys.dm_os_memory_cache_counters to check the health of caches, and sys.dm_exec_requests and sys.dm_exec_sessions for active sessions and requests.</span></span> <span data-ttu-id="2c490-145">Vermeiden Sie dynamische Verwaltungssichten, die ressourcenintensiv sind (beispielsweise durchsucht sys.dm_tran_version_store den vollständigen Versionsspeicher und kann umfangreiche E/A verursachen) oder komplexe Joins verwenden.</span><span class="sxs-lookup"><span data-stu-id="2c490-145">Avoid dynamic management views that are resource intensive (for example, sys.dm_tran_version_store scans the full version store and can cause extensive I/O) or that use complex joins.</span></span> <span data-ttu-id="2c490-146">Informationen zu den Auswirkungen auf die Leistung finden Sie in der Dokumentation der jeweiligen [dynamischen Verwaltungssicht](../../relational-databases/views/views.md).</span><span class="sxs-lookup"><span data-stu-id="2c490-146">For information about performance implications, see the documentation for the specific [dynamic management view](../../relational-databases/views/views.md).</span></span>  
  
-   <span data-ttu-id="2c490-147">Abfragen von Katalogsichten.</span><span class="sxs-lookup"><span data-stu-id="2c490-147">Querying catalog views.</span></span>  
  
-   <span data-ttu-id="2c490-148">Einfache DBCC-Befehle, wie z. B. DBCC FREEPROCCACHE, DBCC FREESYSTEMCACHE, DBCC DROPCLEANBUFFERS`,` und DBCC SQLPERF.</span><span class="sxs-lookup"><span data-stu-id="2c490-148">Basic DBCC commands such as DBCC FREEPROCCACHE, DBCC FREESYSTEMCACHE, DBCC DROPCLEANBUFFERS`,` and DBCC SQLPERF.</span></span> <span data-ttu-id="2c490-149">Führen Sie keine ressourcenintensiven Befehle wie **DBCC** CHECKDB, DBCC DBREINDEX oder DBCC SHRINKDATABASE aus.</span><span class="sxs-lookup"><span data-stu-id="2c490-149">Do not run resource-intensive commands such as **DBCC** CHECKDB, DBCC DBREINDEX, or DBCC SHRINKDATABASE.</span></span>  
  
-   [!INCLUDE[tsql](../../includes/tsql-md.md)]<span data-ttu-id="2c490-150">-KILL *\<spid>* -Befehl</span><span class="sxs-lookup"><span data-stu-id="2c490-150">KILL*\<spid>* command.</span></span> <span data-ttu-id="2c490-151">Abhängig vom Status von [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]ist der KILL-Befehl nicht immer erfolgreich; dann ist ein Neustart von [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]unumgänglich.</span><span class="sxs-lookup"><span data-stu-id="2c490-151">Depending on the state of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], the KILL command might not always succeed; then the only option may be to restart [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="2c490-152">Es folgen einige allgemeine Richtlinien:</span><span class="sxs-lookup"><span data-stu-id="2c490-152">The following are some general guidelines:</span></span>  
  
    -   <span data-ttu-id="2c490-153">Überprüfen Sie mit der Abfrage `SELECT * FROM sys.dm_exec_sessions WHERE session_id = <spid>`, ob SPID tatsächlich beendet wurde.</span><span class="sxs-lookup"><span data-stu-id="2c490-153">Verify that the SPID was actually killed by querying `SELECT * FROM sys.dm_exec_sessions WHERE session_id = <spid>`.</span></span> <span data-ttu-id="2c490-154">Wenn keine Zeilen zurückgegeben werden, wurde die Sitzung beendet.</span><span class="sxs-lookup"><span data-stu-id="2c490-154">If it returns no rows, it means the session was killed.</span></span>  
  
    -   <span data-ttu-id="2c490-155">Ist die Sitzung noch vorhanden, sollten Sie überprüfen, ob der Sitzung Tasks zugewiesen sind. Führen Sie dazu die Abfrage `SELECT * FROM sys.dm_os_tasks WHERE session_id = <spid>`aus.</span><span class="sxs-lookup"><span data-stu-id="2c490-155">If the session is still there, verify whether there are tasks assigned to this session by running the query `SELECT * FROM sys.dm_os_tasks WHERE session_id = <spid>`.</span></span> <span data-ttu-id="2c490-156">Wird der Task dort angezeigt, wird die Sitzung wahrscheinlich gerade beendet.</span><span class="sxs-lookup"><span data-stu-id="2c490-156">If you see the task there, most likely your session is currently being killed.</span></span> <span data-ttu-id="2c490-157">Beachten Sie, dass die Abfrage möglicherweise erhebliche Zeit in Anspruch nimmt und unter Umständen nicht erfolgreich ist.</span><span class="sxs-lookup"><span data-stu-id="2c490-157">Note that this may take considerable amount of time and may not succeed at all.</span></span>  
  
    -   <span data-ttu-id="2c490-158">Enthält die dieser Sitzung zugeordnete sys.dm_os_tasks-Sicht keine Tasks, während die Sitzung nach der Ausführung des KILL-Befehls in sys.dm_exec_sessions verbleibt, bedeutet dies, dass kein Arbeitsthread verfügbar ist.</span><span class="sxs-lookup"><span data-stu-id="2c490-158">If there are no tasks in the sys.dm_os_tasks associated with this session, but the session remains in sys.dm_exec_sessions after executing the KILL command, it means that you do not have a worker available.</span></span> <span data-ttu-id="2c490-159">Wählen Sie einen der aktuell ausgeführten Tasks aus (einen Task in der sys.dm_os_tasks-Sicht mit `sessions_id <> NULL`), und beenden Sie die diesem zugeordnete Sitzung, um den Arbeitsthread freizugeben.</span><span class="sxs-lookup"><span data-stu-id="2c490-159">Select one of the currently running tasks (a task listed in the sys.dm_os_tasks view with a `sessions_id <> NULL`), and kill the session associated with it to free up the worker.</span></span> <span data-ttu-id="2c490-160">Beachten Sie, dass das Beenden einer einzelnen Sitzung möglicherweise nicht ausreicht. Unter Umständen müssen Sie mehrere Sitzungen beenden.</span><span class="sxs-lookup"><span data-stu-id="2c490-160">Note that it may not be enough to kill a single session: you may have to kill multiple ones.</span></span>  
  
## <a name="dac-port"></a><span data-ttu-id="2c490-161">DAC-Port</span><span class="sxs-lookup"><span data-stu-id="2c490-161">DAC Port</span></span>  
 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="2c490-162">lauscht am TCP-Port 1434 (sofern verfügbar) oder einem TCP-Port, der beim Starten von [!INCLUDE[ssDE](../../includes/ssde-md.md)] dynamisch zugewiesen wurde, auf eine DAC.</span><span class="sxs-lookup"><span data-stu-id="2c490-162">listens for the DAC on TCP port 1434 if available or a TCP port dynamically assigned upon [!INCLUDE[ssDE](../../includes/ssde-md.md)] startup.</span></span> <span data-ttu-id="2c490-163">Das Fehlerprotokoll enthält die Nummer des Ports, der von der DAC überwacht wird.</span><span class="sxs-lookup"><span data-stu-id="2c490-163">The error log contains the port number the DAC is listening on.</span></span> <span data-ttu-id="2c490-164">Standardmäßig nimmt die DAC-Überwachung nur am lokalen Port Verbindungen an.</span><span class="sxs-lookup"><span data-stu-id="2c490-164">By default the DAC listener accepts connection on only the local port.</span></span> <span data-ttu-id="2c490-165">Ein Codebeispiel zum Aktivieren von Remoteverwaltungsverbindungen finden Sie unter [Remoteadministratorverbindungen (Serverkonfigurationsoption)](remote-admin-connections-server-configuration-option.md).</span><span class="sxs-lookup"><span data-stu-id="2c490-165">For a code sample that activates remote administration connections, see [remote admin connections Server Configuration Option](remote-admin-connections-server-configuration-option.md).</span></span>  
  
 <span data-ttu-id="2c490-166">Nachdem die Remoteverwaltungsverbindung konfiguriert wurde, wird die DAC-Überwachung aktiviert, ohne dass ein Neustart von [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] erforderlich ist. Jetzt kann ein Client remote eine DAC herstellen.</span><span class="sxs-lookup"><span data-stu-id="2c490-166">After the remote administration connection is configured, the DAC listener is enabled without requiring a restart of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] and a client can now connect to the DAC remotely.</span></span> <span data-ttu-id="2c490-167">Sie können die DAC-Überwachung für die Annahme von Remoteverbindungen auch dann aktivieren, wenn [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] nicht reagiert, indem Sie zunächst unter lokaler Verwendung der DAC eine Verbindung mit [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] herstellen und dann die gespeicherte Prozedur sp_configure ausführen, sodass Verbindungen über Remoteverbindungen angenommen werden.</span><span class="sxs-lookup"><span data-stu-id="2c490-167">You can enable the DAC listener to accept connections remotely even if [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] is unresponsive by first connecting to [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] using the DAC locally, and then executing the sp_configure stored procedure to accept connection from remote connections.</span></span>  
  
 <span data-ttu-id="2c490-168">In Clusterkonfigurationen ist die DAC standardmäßig deaktiviert.</span><span class="sxs-lookup"><span data-stu-id="2c490-168">On cluster configurations, the DAC will be off by default.</span></span> <span data-ttu-id="2c490-169">Benutzer können die remote admin connection-Option von sp_configure verwenden, um den Zugriff der DAC-Überwachung auf eine Remoteverbindung zu aktivieren.</span><span class="sxs-lookup"><span data-stu-id="2c490-169">Users can execute the remote admin connection option of sp_configure to enable the DAC listener to access a remote connection.</span></span> <span data-ttu-id="2c490-170">Wenn [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] nicht reagiert und die DAC-Überwachung nicht aktiviert ist, müssen Sie möglicherweise [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] neu starten, um eine Verbindung mit der DAC herzustellen.</span><span class="sxs-lookup"><span data-stu-id="2c490-170">If [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] is unresponsive and the DAC listener is not enabled, you might have to restart [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] to connect with the DAC.</span></span> <span data-ttu-id="2c490-171">Deshalb wird empfohlen, die Konfigurationsoption remote admin connections in Clustersystemen zu aktivieren.</span><span class="sxs-lookup"><span data-stu-id="2c490-171">Therefore, we recommend that you enable the remote admin connections configuration option on clustered systems.</span></span>  
  
 <span data-ttu-id="2c490-172">Der DAC-Port wird dynamisch von [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] beim Start zugewiesen.</span><span class="sxs-lookup"><span data-stu-id="2c490-172">The DAC port is assigned dynamically by [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] during startup.</span></span> <span data-ttu-id="2c490-173">Beim Herstellen der Verbindung mit der Standardinstanz vermeidet die DAC die Verwendung einer SSRP-Anforderung ( [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Resolution Protocol) an den SQL Server-Browser-Dienst.</span><span class="sxs-lookup"><span data-stu-id="2c490-173">When connecting to the default instance, the DAC avoids using a [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Resolution Protocol (SSRP) request to the SQL Server Browser Service when connecting.</span></span> <span data-ttu-id="2c490-174">Zunächst wird eine Verbindung über den TCP-Port 1434 hergestellt.</span><span class="sxs-lookup"><span data-stu-id="2c490-174">It first connects over TCP port 1434.</span></span> <span data-ttu-id="2c490-175">Tritt dabei ein Fehler auf, wird ein SSRP-Aufruf ausgegeben, um den Port abzurufen.</span><span class="sxs-lookup"><span data-stu-id="2c490-175">If that fails, it makes an SSRP call to get the port.</span></span> <span data-ttu-id="2c490-176">Falls der [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] -Browser SSRP-Anforderungen nicht überwacht, gibt die Verbindungsanforderung einen Fehler zurück.</span><span class="sxs-lookup"><span data-stu-id="2c490-176">If [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Browser is not listening for SSRP requests, the connection request returns an error.</span></span> <span data-ttu-id="2c490-177">Suchen Sie im Fehlerprotokoll nach der Portnummer, die von der DAC überwacht wird.</span><span class="sxs-lookup"><span data-stu-id="2c490-177">Refer to the error log to find the port number DAC is listening on.</span></span> <span data-ttu-id="2c490-178">Wenn [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] für die Annahme von Remoteverwaltungsverbindungen konfiguriert ist, muss die DAC wie folgt mit einer expliziten Portnummer initiiert werden:</span><span class="sxs-lookup"><span data-stu-id="2c490-178">If [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] is configured to accept remote administration connections, the DAC must be initiated with an explicit port number:</span></span>  
  
 <span data-ttu-id="2c490-179">**sqlcmd-STCP:** _ \<server> , \<port> _</span><span class="sxs-lookup"><span data-stu-id="2c490-179">**sqlcmd-Stcp:** _\<server>,\<port>_</span></span>  
  
 <span data-ttu-id="2c490-180">Im [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] -Fehlerprotokoll ist die Portnummer für die DAC aufgelistet, standardmäßig 1434.</span><span class="sxs-lookup"><span data-stu-id="2c490-180">The [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] error log lists the port number for the DAC, which is 1434 by default.</span></span> <span data-ttu-id="2c490-181">Ist [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] ausschließlich für die Annahme lokaler DAC konfiguriert, müssen Sie die Verbindung mithilfe des Loopbackadapters herstellen. Verwenden Sie dazu folgenden Befehl:</span><span class="sxs-lookup"><span data-stu-id="2c490-181">If [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] is configured to accept local DAC connections only, connect using the loopback adapter using the following command:</span></span>  
  
 <span data-ttu-id="2c490-182">**sqlcmd-s 127.0.0.1**,`1434`</span><span class="sxs-lookup"><span data-stu-id="2c490-182">**sqlcmd-S127.0.0.1**,`1434`</span></span>  
  
## <a name="example"></a><span data-ttu-id="2c490-183">Beispiel</span><span class="sxs-lookup"><span data-stu-id="2c490-183">Example</span></span>  
 <span data-ttu-id="2c490-184">In diesem Beispiel bemerkt ein Administrator, dass der Server `URAN123` nicht reagiert, und möchte das Problem analysieren.</span><span class="sxs-lookup"><span data-stu-id="2c490-184">In this example, an administrator notices that server `URAN123` is not responding and wants to diagnose the problem.</span></span> <span data-ttu-id="2c490-185">Dazu aktiviert der Benutzer das Eingabeaufforderungs-Hilfsprogramm `sqlcmd` und stellt eine Verbindung mit dem Server `URAN123` her. Dabei gibt er den Schalter `-A` an, um die DAC anzuzeigen.</span><span class="sxs-lookup"><span data-stu-id="2c490-185">To do this, the user activates the `sqlcmd` command prompt utility and connects to server `URAN123` using `-A` to indicate the DAC.</span></span>  
  
 `sqlcmd -S URAN123 -U sa -P <xxx> -A`  
  
 <span data-ttu-id="2c490-186">Jetzt kann der Administrator Abfragen für eine Problemdiagnose ausführen und möglicherweise die nicht reagierenden Sitzungen beenden.</span><span class="sxs-lookup"><span data-stu-id="2c490-186">The administrator can now execute queries to diagnose the problem and possibly terminate the unresponsive sessions.</span></span>  
  
## <a name="related-tasks"></a><span data-ttu-id="2c490-187">Related Tasks</span><span class="sxs-lookup"><span data-stu-id="2c490-187">Related Tasks</span></span>  
  
## <a name="related-content"></a><span data-ttu-id="2c490-188">Verwandte Inhalte</span><span class="sxs-lookup"><span data-stu-id="2c490-188">Related Content</span></span>  
 [<span data-ttu-id="2c490-189">Verwenden von sqlcmd mit Skriptvariablen</span><span class="sxs-lookup"><span data-stu-id="2c490-189">Use sqlcmd with Scripting Variables</span></span>](../../relational-databases/scripting/sqlcmd-use-with-scripting-variables.md)  
  
 [<span data-ttu-id="2c490-190">SQLCMD-Hilfsprogramm</span><span class="sxs-lookup"><span data-stu-id="2c490-190">sqlcmd Utility</span></span>](../../tools/sqlcmd-utility.md)  
  
 [<span data-ttu-id="2c490-191">SELECT &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="2c490-191">SELECT &#40;Transact-SQL&#41;</span></span>](/sql/t-sql/queries/select-transact-sql)  
  
 [<span data-ttu-id="2c490-192">sp_who &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="2c490-192">sp_who &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-stored-procedures/sp-who-transact-sql)  
  
 [<span data-ttu-id="2c490-193">sp_lock &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="2c490-193">sp_lock &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-stored-procedures/sp-lock-transact-sql)  
  
 [<span data-ttu-id="2c490-194">KILL &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="2c490-194">KILL &#40;Transact-SQL&#41;</span></span>](/sql/t-sql/language-elements/kill-transact-sql)  
  
 [<span data-ttu-id="2c490-195">DBCC CHECKALLOC &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="2c490-195">DBCC CHECKALLOC &#40;Transact-SQL&#41;</span></span>](/sql/t-sql/database-console-commands/dbcc-checkalloc-transact-sql)  
  
 [<span data-ttu-id="2c490-196">DBCC CHECKDB &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="2c490-196">DBCC CHECKDB &#40;Transact-SQL&#41;</span></span>](/sql/t-sql/database-console-commands/dbcc-checkdb-transact-sql)  
  
 [<span data-ttu-id="2c490-197">DBCC OPENTRAN &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="2c490-197">DBCC OPENTRAN &#40;Transact-SQL&#41;</span></span>](/sql/t-sql/database-console-commands/dbcc-opentran-transact-sql)  
  
 [<span data-ttu-id="2c490-198">DBCC INPUTBUFFER &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="2c490-198">DBCC INPUTBUFFER &#40;Transact-SQL&#41;</span></span>](/sql/t-sql/database-console-commands/dbcc-inputbuffer-transact-sql)  
  
 [<span data-ttu-id="2c490-199">Serverkonfigurationsoptionen &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="2c490-199">Server Configuration Options &#40;SQL Server&#41;</span></span>](server-configuration-options-sql-server.md)  
  
 [<span data-ttu-id="2c490-200">Dynamische Verwaltungssichten und Funktionen in Verbindung mit Transaktionen &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="2c490-200">Transaction Related Dynamic Management Views and Functions &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-dynamic-management-views/transaction-related-dynamic-management-views-and-functions-transact-sql)  
  
 [<span data-ttu-id="2c490-201">Ablaufverfolgungsflags &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="2c490-201">Trace Flags &#40;Transact-SQL&#41;</span></span>](/sql/t-sql/database-console-commands/dbcc-traceon-trace-flags-transact-sql)  
  
  
