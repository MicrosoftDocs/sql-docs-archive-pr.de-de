---
title: Affinity I/O Mask (Serverkonfigurationsoption) | Microsoft-Dokumentation
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: configuration
ms.topic: conceptual
helpviewer_keywords:
- affinity I/O mask option
- processor affinity [SQL Server]
- binding processors [SQL Server]
- CPU affinity mask option
ms.assetid: 9950a8c9-9fe0-4003-95df-6f0d1becb0e7
author: MikeRayMSFT
ms.author: mikeray
ms.openlocfilehash: 3d0606e2a3f5480b27e27a4a585562f4b289b640
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 08/04/2020
ms.locfileid: "87607984"
---
# <a name="affinity-input-output-mask-server-configuration-option"></a><span data-ttu-id="7d5ce-102">Affinity I/O Mask (Serverkonfigurationsoption)</span><span class="sxs-lookup"><span data-stu-id="7d5ce-102">affinity Input-Output mask Server Configuration Option</span></span>
  <span data-ttu-id="7d5ce-103">Für die Ausführung von Multitasking verschieben [!INCLUDE[msCoName](../../includes/msconame-md.md)] Windows 2000 und Windows Server 2003 gelegentlich Prozessthreads zwischen den Prozessoren.</span><span class="sxs-lookup"><span data-stu-id="7d5ce-103">To carry out multitasking, [!INCLUDE[msCoName](../../includes/msconame-md.md)] Windows 2000 and Windows Server 2003 sometimes move process threads among different processors.</span></span> <span data-ttu-id="7d5ce-104">Obwohl dies aus der Sicht des Betriebssystems effizient ist, kann diese Aktivität die Leistung von [!INCLUDE[msCoName](../../includes/msconame-md.md)] [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] bei starker Systemauslastung reduzieren, da jeder Prozessorcache wiederholt mit Daten geladen wird.</span><span class="sxs-lookup"><span data-stu-id="7d5ce-104">Although efficient from an operating system point of view, this activity can reduce [!INCLUDE[msCoName](../../includes/msconame-md.md)] [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] performance under heavy system loads, as each processor cache is repeatedly reloaded with data.</span></span> <span data-ttu-id="7d5ce-105">Unter diesen Bedingungen kann das Zuweisen bestimmter Threads zu bestimmten Prozessoren die Leistung verbessern, da das erneute Laden von Prozessoren vermieden wird. Eine solche Zuordnung zwischen einem Thread und einem Prozessor wird als Prozessoraffinität bezeichnet.</span><span class="sxs-lookup"><span data-stu-id="7d5ce-105">Assigning processors to specific threads can improve performance under these conditions by eliminating processor reloads; such an association between a thread and a processor is called processor affinity.</span></span>  
  
 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="7d5ce-106">unterstützt die Prozessoraffinität durch zwei Affinitätsmaskenoptionen: **affinity mask** (auch als **CPU-Affinitätsmaske**bezeichnet) und **affinity I/O mask**.</span><span class="sxs-lookup"><span data-stu-id="7d5ce-106">supports processor affinity by means of two affinity mask options: **affinity mask** (also known as **CPU affinity mask**) and **affinity I/O mask**.</span></span> <span data-ttu-id="7d5ce-107">Weitere Informationen zur Option **affinity mask** finden Sie unter [Affinitätsmaske (Serverkonfigurationsoption)](affinity-mask-server-configuration-option.md).</span><span class="sxs-lookup"><span data-stu-id="7d5ce-107">For more information on the **affinity mask** option, see [affinity mask Server Configuration Option](affinity-mask-server-configuration-option.md).</span></span> <span data-ttu-id="7d5ce-108">CPU- und E/A-Affinitätsunterstützung für Server mit 33–64 Prozessoren erfordert die zusätzliche Verwendung von [affinity64 mask (Serverkonfigurationsoption)](affinity64-mask-server-configuration-option.md) bzw. [affinity64 Input-Output mask (Serverkonfigurationsoption)](affinity64-input-output-mask-server-configuration-option.md) .</span><span class="sxs-lookup"><span data-stu-id="7d5ce-108">CPU and I/O affinity support for servers with 33 to 64 processors requires the additional use of the [affinity64 mask Server Configuration Option](affinity64-mask-server-configuration-option.md) and [affinity64 Input-Output mask Server Configuration Option](affinity64-input-output-mask-server-configuration-option.md) respectively.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="7d5ce-109">Affinitätsunterstützung für Server mit 33 bis 64 Prozessoren steht nur auf 64-Bit-Betriebssystemen zur Verfügung.</span><span class="sxs-lookup"><span data-stu-id="7d5ce-109">Affinity support for servers with 33 to 64 processors is only available on 64-bit operating systems.</span></span>  
  
 <span data-ttu-id="7d5ce-110">Die Option **affinity I/O mask** bindet die [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] -Datenträger-E/A an eine bestimmte Teilmenge von CPUs.</span><span class="sxs-lookup"><span data-stu-id="7d5ce-110">The **affinity I/O mask** option binds [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] disk I/O to a specified subset of CPUs.</span></span> <span data-ttu-id="7d5ce-111">In High-End-OLTP-Umgebungen (Online Transactional Processing, Onlinetransaktionsverarbeitung) für [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] kann diese Erweiterung die Leistung von [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] -Threads, die E/A verursachen, verbessern.</span><span class="sxs-lookup"><span data-stu-id="7d5ce-111">In high-end [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] online transactional processing (OLTP) environments, this extension can enhance the performance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] threads issuing I/Os.</span></span> <span data-ttu-id="7d5ce-112">Diese Verbesserung unterstützt keine Hardwareaffinität für einzelne Datenträger oder Datenträgercontroller.</span><span class="sxs-lookup"><span data-stu-id="7d5ce-112">This enhancement does not support hardware affinity for individual disks or disk controllers.</span></span>  
  
 <span data-ttu-id="7d5ce-113">Der Wert für **affinity I/O mask** gibt an, welche CPUs eines Multiprozessorcomputers für die Verarbeitung von [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] -Datenträger-E/A-Vorgängen verwendet werden sollen.</span><span class="sxs-lookup"><span data-stu-id="7d5ce-113">The value for **affinity I/O mask** specifies which CPUs in a multiprocessor computer are eligible to process [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] disk I/O operations.</span></span> <span data-ttu-id="7d5ce-114">Die Maske ist eine Bitmap, in der das erste Bit von rechts die CPU mit der niedrigsten Nummer angibt, CPU(0), das zweite Bit von rechts die CPU mit der nächsthöheren Nummer, CPU(1) usw.</span><span class="sxs-lookup"><span data-stu-id="7d5ce-114">The mask is a bitmap in which the rightmost bit specifies the lowest-order CPU(0), the bit to its immediate left specifies the next-lowest-order CPU(1), and so on.</span></span> <span data-ttu-id="7d5ce-115">Bei mehr als 32 Prozessoren legen Sie beide Konfigurationsoptionen **affinity I/O mask** und **affinity64 I/O mask**fest.</span><span class="sxs-lookup"><span data-stu-id="7d5ce-115">To configure more than 32 processors, set both the **affinity I/O mask** and the **affinity64 I/O mask**.</span></span>  
  
 <span data-ttu-id="7d5ce-116">Die Werte für **affinity I/O mask** lauten wie folgt:</span><span class="sxs-lookup"><span data-stu-id="7d5ce-116">The values for **affinity I/O mask** are as follows:</span></span>  
  
-   <span data-ttu-id="7d5ce-117">Eine aus 1 Byte bestehende **affinity I/O mask deckt bis zu 8 CPUs** in einem Multiprozessorcomputer ab.</span><span class="sxs-lookup"><span data-stu-id="7d5ce-117">A 1-byte **affinity I/O mask** covers up to 8 CPUs in a multiprocessor computer.</span></span>  
  
-   <span data-ttu-id="7d5ce-118">Eine aus 2 Bytes bestehende **affinity I/O mask** deckt bis zu 16 CPUs in einem Multiprozessorcomputer ab.</span><span class="sxs-lookup"><span data-stu-id="7d5ce-118">A 2-byte **affinity I/O mask** covers up to 16 CPUs in a multiprocessor computer.</span></span>  
  
-   <span data-ttu-id="7d5ce-119">Eine aus 3 Bytes bestehende **affinity I/O mask** deckt bis zu 24 CPUs in einem Multiprozessorcomputer ab.</span><span class="sxs-lookup"><span data-stu-id="7d5ce-119">A 3-byte **affinity I/O mask** covers up to 24 CPUs in a multiprocessor computer.</span></span>  
  
-   <span data-ttu-id="7d5ce-120">Eine aus 4 Bytes bestehende **affinity I/O mask** deckt bis zu 32 CPUs in einem Multiprozessorcomputer ab.</span><span class="sxs-lookup"><span data-stu-id="7d5ce-120">A 4-byte **affinity I/O mask** covers up to 32 CPUs in a multiprocessor computer.</span></span>  
  
-   <span data-ttu-id="7d5ce-121">Bei mehr als 32 CPUs konfigurieren Sie eine aus 4 Bytes bestehende **affinity I/O mask** für die ersten 32 CPUs und eine aus maximal 4 Bytes bestehende **affinity64 I/O mask** für die verbleibenden CPUs.</span><span class="sxs-lookup"><span data-stu-id="7d5ce-121">To cover more than 32 CPUs, configure a four-byte **affinity I/O mask** for the first 32 CPUs and up to a four-byte **affinity64 I/O mask** for the remaining CPUs.</span></span>  
  
 <span data-ttu-id="7d5ce-122">Ein 1-Bit im E/A-Affinitätsmuster gibt an, dass die entsprechende CPU für [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] -Datenträger-E/A-Vorgänge geeignet ist; ein 0-Bit gibt an, dass keine [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] -Datenträger-E/A-Vorgänge für die entsprechende CPU geplant werden sollen.</span><span class="sxs-lookup"><span data-stu-id="7d5ce-122">A 1 bit in the affinity I/O pattern specifies that the corresponding CPU is eligible to perform [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] disk I/O operations; a 0 bit specifies that no [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] disk I/O operations should be scheduled for the corresponding CPU.</span></span> <span data-ttu-id="7d5ce-123">Sind alle Bits auf 0 festgelegt oder ist **affinity I/O mask** nicht angegeben, werden [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] -Datenträger-E/A-Vorgänge für eine beliebige CPU geplant, die für die Verarbeitung von [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] -Threads geeignet ist.</span><span class="sxs-lookup"><span data-stu-id="7d5ce-123">When all bits are set to zero, or **affinity I/O mask** is not specified, [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] disk I/O is scheduled to any of the CPUs eligible to process [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] threads.</span></span>  
  
 <span data-ttu-id="7d5ce-124">Da das Festlegen der Option **Affinity I/O Mask**  (Affinität E/A Maske) von [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] einen spezialisierten Vorgang darstellt, sollte er nur bei Bedarf ausgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="7d5ce-124">Because setting the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] **affinity I/O mask** option is a specialized operation, it should be used only when necessary.</span></span> <span data-ttu-id="7d5ce-125">In den meisten Fällen kann eine optimale Leistung durch die standardmäßige Affinität von Windows 2000 oder Windows Server 2003 erzielt werden.</span><span class="sxs-lookup"><span data-stu-id="7d5ce-125">In most cases, the Windows 2000 or Windows Server 2003 default affinity provides the best performance.</span></span>  
  
 <span data-ttu-id="7d5ce-126">Wenn Sie die Option **affinity I/O mask** angeben, müssen Sie sie mit der Konfigurationsoption **affinity mask** verwenden.</span><span class="sxs-lookup"><span data-stu-id="7d5ce-126">When specifying the **affinity I/O mask** option, you must use it with the **affinity mask** configuration option.</span></span> <span data-ttu-id="7d5ce-127">Aktivieren Sie in der Option **affinity I/O mask** und in der Option **affinity mask** nicht dieselbe CPU.</span><span class="sxs-lookup"><span data-stu-id="7d5ce-127">Do not enable the same CPU in both the **affinity I/O mask** switch and the **affinity mask** option.</span></span> <span data-ttu-id="7d5ce-128">Die Bits, die den einzelnen CPUs entsprechen, sollten sich jeweils in einem der folgenden drei Zustände befinden:</span><span class="sxs-lookup"><span data-stu-id="7d5ce-128">The bits corresponding to each CPU should be in one of the following three states:</span></span>  
  
-   <span data-ttu-id="7d5ce-129">0 in der Option **affinity I/O mask** und in der Option **affinity mask** .</span><span class="sxs-lookup"><span data-stu-id="7d5ce-129">0 in both the **affinity I/O mask** option and the **affinity mask** option.</span></span>  
  
-   <span data-ttu-id="7d5ce-130">1 in der Option **affinity I/O mask** und 0 in der Option **affinity mask** .</span><span class="sxs-lookup"><span data-stu-id="7d5ce-130">1 in the **affinity I/O mask** option and 0 in the **affinity mask** option.</span></span>  
  
-   <span data-ttu-id="7d5ce-131">0 in der Option **affinity I/O mask** und 1 in der Option **affinity mask** .</span><span class="sxs-lookup"><span data-stu-id="7d5ce-131">0 in the **affinity I/O mask** option and 1 in the **affinity mask** option.</span></span>  
  
 <span data-ttu-id="7d5ce-132">Die Option **affinity I/O mask** ist eine erweiterte Option.</span><span class="sxs-lookup"><span data-stu-id="7d5ce-132">The **affinity I/O mask** option is an advanced option.</span></span> <span data-ttu-id="7d5ce-133">Wenn Sie die Einstellung mithilfe der `sp_configure` gespeicherten System Prozedur ändern, können Sie die **Affinitäts-e/a-Maske** nur ändern, wenn **Erweiterte Optionen anzeigen** auf 1 festgelegt ist.</span><span class="sxs-lookup"><span data-stu-id="7d5ce-133">If you are using the `sp_configure` system stored procedure to change the setting, you can change **affinity I/O mask** only when **show advanced options** is set to 1.</span></span> <span data-ttu-id="7d5ce-134">In [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]ist für das erneute Konfigurieren der Option **affinity I/O mask** ein Neustart der [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] -Instanz erforderlich.</span><span class="sxs-lookup"><span data-stu-id="7d5ce-134">In [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], reconfiguring the **affinity I/O mask** option requires a restart of the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] instance.</span></span>  
  
> [!CAUTION]  
>  <span data-ttu-id="7d5ce-135">Konfigurieren Sie nicht die CPU-Affinität im Windows-Betriebssystem und gleichzeitig die Affinitätsmaske in [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="7d5ce-135">Do not configure CPU affinity in the Windows operating system and also configure the affinity mask in [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="7d5ce-136">Diese Einstellungen zielen auf dasselbe Ergebnis. Wenn die Konfigurationen inkonsistent sind, kann dies zu unvorhersehbaren Ergebnissen führen.</span><span class="sxs-lookup"><span data-stu-id="7d5ce-136">These settings are attempting to achieve the same result, and if the configurations are inconsistent, you may have unpredictable results.</span></span> <span data-ttu-id="7d5ce-137">Die CPU-Affinität von [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] wird am besten mit der entsprechenden Option von `sp_configure` in [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] konfiguriert.</span><span class="sxs-lookup"><span data-stu-id="7d5ce-137">[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] CPU affinity is best configured using the `sp_configure` option in [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="7d5ce-138">Weitere Informationen</span><span class="sxs-lookup"><span data-stu-id="7d5ce-138">See Also</span></span>  
 <span data-ttu-id="7d5ce-139">[Überwachen der Ressourcenverwendung &#40;Systemmonitor&#41;](../../relational-databases/performance-monitor/monitor-resource-usage-system-monitor.md) </span><span class="sxs-lookup"><span data-stu-id="7d5ce-139">[Monitor Resource Usage &#40;System Monitor&#41;](../../relational-databases/performance-monitor/monitor-resource-usage-system-monitor.md) </span></span>  
 <span data-ttu-id="7d5ce-140">[RECONFIGURE &#40;Transact-SQL&#41;](/sql/t-sql/language-elements/reconfigure-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="7d5ce-140">[RECONFIGURE &#40;Transact-SQL&#41;](/sql/t-sql/language-elements/reconfigure-transact-sql) </span></span>  
 <span data-ttu-id="7d5ce-141">[Serverkonfigurationsoptionen &#40;SQL Server&#41;](server-configuration-options-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="7d5ce-141">[Server Configuration Options &#40;SQL Server&#41;](server-configuration-options-sql-server.md) </span></span>  
 [<span data-ttu-id="7d5ce-142">sp_configure &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="7d5ce-142">sp_configure &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-stored-procedures/sp-configure-transact-sql)  
  
  
