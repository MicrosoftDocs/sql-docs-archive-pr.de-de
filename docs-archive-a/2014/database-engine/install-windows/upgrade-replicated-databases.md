---
title: Aktualisieren von replizierten Datenbanken | Microsoft-Dokumentation
ms.custom: ''
ms.date: 05/24/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: install
ms.topic: conceptual
helpviewer_keywords:
- merge replication database upgrades [SQL Server replication]
- replication [SQL Server], upgrading
- transactional replication, upgrading databases
- snapshot replication [SQL Server], upgrading databases
- upgrading replicated databases
ms.assetid: 9926a4f7-bcd8-4b9b-9dcf-5426a5857116
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: 326a94820876b40128428aac58e47c650ce122b8
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 08/04/2020
ms.locfileid: "87616145"
---
# <a name="upgrade-replicated-databases"></a><span data-ttu-id="fac4b-102">Aktualisieren von replizierten Datenbanken</span><span class="sxs-lookup"><span data-stu-id="fac4b-102">Upgrade Replicated Databases</span></span>
  [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] <span data-ttu-id="fac4b-103">unterstützt das Aktualisieren replizierter Datenbanken von früheren Versionen von [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]. Während der Aktualisierung eines Knotens müssen die auf anderen Knoten ausgeführten Aktivitäten nicht beendet werden.</span><span class="sxs-lookup"><span data-stu-id="fac4b-103">supports upgrading replicated databases from previous versions of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]; it is not required to stop activity at other nodes while a node is being upgraded.</span></span> <span data-ttu-id="fac4b-104">Stellen Sie sicher, dass die Regeln, die im Hinblick auf die in einer Topologie unterstützten Versionen gelten, eingehalten werden:</span><span class="sxs-lookup"><span data-stu-id="fac4b-104">Ensure that you adhere to the rules regarding which versions are supported in a topology:</span></span>  
  
-   <span data-ttu-id="fac4b-105">Für den Verteiler ist jede Version zulässig, die der Verleger-Version entspricht oder höher als diese ist. (In vielen Fällen gehören Verteiler und Verleger derselben Instanz an.)</span><span class="sxs-lookup"><span data-stu-id="fac4b-105">A Distributor can be any version as long as it is greater than or equal to the Publisher version (in many cases the Distributor is the same instance as the Publisher).</span></span>  
  
-   <span data-ttu-id="fac4b-106">Für den Verleger ist jede Version zulässig, die der Verteiler-Version entspricht oder niedriger als diese ist.</span><span class="sxs-lookup"><span data-stu-id="fac4b-106">A Publisher can be any version as long as it less than or equal to the Distributor version.</span></span>  
  
-   <span data-ttu-id="fac4b-107">Die Abonnenten-Version ist vom Veröffentlichungstyp abhängig:</span><span class="sxs-lookup"><span data-stu-id="fac4b-107">Subscriber version depends on the type of publication:</span></span>  
  
    -   <span data-ttu-id="fac4b-108">Ein Abonnent einer Transaktionsveröffentlichung kann einer der beiden Versionen im Rahmen der Verlegerversion angehören.</span><span class="sxs-lookup"><span data-stu-id="fac4b-108">A Subscriber to a transactional publication can be any version within two versions of the Publisher version.</span></span> <span data-ttu-id="fac4b-109">Beispiel: Ein aktiver [!INCLUDE[ssKatmai](../../includes/sskatmai-md.md)]-Verleger kann mit [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)]-Abonnenten verwendet werden, und ein [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)]-Verleger kann mit [!INCLUDE[ssKatmai](../../includes/sskatmai-md.md)]-Abonnenten verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="fac4b-109">For example: a [!INCLUDE[ssKatmai](../../includes/sskatmai-md.md)] Publisher running can have [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] Subscribers; and a [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] Publisher can have [!INCLUDE[ssKatmai](../../includes/sskatmai-md.md)] Subscribers.</span></span>  
  
    -   <span data-ttu-id="fac4b-110">Für einen Abonnenten einer Mergeveröffentlichung ist jede Version zulässig, die der Verleger-Version entspricht oder niedriger als diese ist.</span><span class="sxs-lookup"><span data-stu-id="fac4b-110">A Subscriber to a merge publication can be any version less than or equal to the Publisher version.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="fac4b-111">Das Thema ist sowohl in der Hilfe zum Setup als auch in der [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] -Onlinedokumentation enthalten.</span><span class="sxs-lookup"><span data-stu-id="fac4b-111">This topic is available in the Setup Help documentation and in [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Books Online.</span></span> <span data-ttu-id="fac4b-112">Über die fett formatierten Links in der Hilfe zum Setup gelangen Sie zu Themen, die nur in der Onlinedokumentation verfügbar sind.</span><span class="sxs-lookup"><span data-stu-id="fac4b-112">Topic links that appear as bold text in the Setup Help documentation refer to topics that are only available in Books Online.</span></span>  
  
## <a name="run-the-log-reader-agent-for-transactional-replication-before-upgrade"></a><span data-ttu-id="fac4b-113">Führen Sie den Protokolllese-Agent für die Transaktionsreplikation vor dem Upgrade aus.</span><span class="sxs-lookup"><span data-stu-id="fac4b-113">Run the Log Reader Agent for Transactional Replication Before Upgrade</span></span>  
 <span data-ttu-id="fac4b-114">Bevor Sie auf [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)]aktualisieren, müssen Sie sich vergewissern, dass alle Transaktionen mit ausgeführtem Commit von veröffentlichten Tabellen vom Protokolllese-Agent verarbeitet wurden.</span><span class="sxs-lookup"><span data-stu-id="fac4b-114">Before you upgrade to [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)], you must make sure that all committed transactions from published tables have been processed by the Log Reader Agent.</span></span> <span data-ttu-id="fac4b-115">Um sicherzustellen, dass alle Transaktionen verarbeitet wurden, führen Sie die folgenden Schritte für jede Datenbank aus, die Transaktionsveröffentlichungen enthält:</span><span class="sxs-lookup"><span data-stu-id="fac4b-115">To make sure that all transactions have been processed, perform the following steps for each database that contains transactional publications:</span></span>  
  
1.  <span data-ttu-id="fac4b-116">Stellen Sie sicher, dass der Protokolllese-Agent für die Datenbank ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="fac4b-116">Make sure that the Log Reader Agent is running for the database.</span></span> <span data-ttu-id="fac4b-117">Standardmäßig wird der Agent ununterbrochen ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="fac4b-117">By default, the agent runs continuously.</span></span>  
  
2.  <span data-ttu-id="fac4b-118">Beenden Sie die Benutzeraktivität auf veröffentlichten Tabellen.</span><span class="sxs-lookup"><span data-stu-id="fac4b-118">Stop user activity on published tables.</span></span>  
  
3.  <span data-ttu-id="fac4b-119">Warten Sie eine gewissen Zeit, bis der Protokolllese-Agent die Transaktionen in die Verteilungsdatenbank kopiert hat, und beenden Sie dann den Agent.</span><span class="sxs-lookup"><span data-stu-id="fac4b-119">Allow time for the Log Reader Agent to copy transactions to the distribution database, and then stop the agent.</span></span>  
  
4.  <span data-ttu-id="fac4b-120">Führen Sie [sp_replcmds](/sql/relational-databases/system-stored-procedures/sp-replcmds-transact-sql) aus, um zu überprüfen, ob alle Transaktionen verarbeitet wurden.</span><span class="sxs-lookup"><span data-stu-id="fac4b-120">Execute [sp_replcmds](/sql/relational-databases/system-stored-procedures/sp-replcmds-transact-sql) to verify that all transactions have been processed.</span></span> <span data-ttu-id="fac4b-121">Das Resultset dieser Prozedur sollte leer sein.</span><span class="sxs-lookup"><span data-stu-id="fac4b-121">The result set from this procedure should be empty.</span></span>  
  
5.  <span data-ttu-id="fac4b-122">Führen Sie [sp_replflush](/sql/relational-databases/system-stored-procedures/sp-replflush-transact-sql) aus, um die Verbindung von „sp_replcmds“ zu trennen.</span><span class="sxs-lookup"><span data-stu-id="fac4b-122">Execute [sp_replflush](/sql/relational-databases/system-stored-procedures/sp-replflush-transact-sql) to close the connection from sp_replcmds.</span></span>  
  
6.  <span data-ttu-id="fac4b-123">Führen Sie das Serverupgrade auf [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)]aus.</span><span class="sxs-lookup"><span data-stu-id="fac4b-123">Perform the server upgrade to [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)].</span></span>  
  
7.  <span data-ttu-id="fac4b-124">Starten Sie den [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] -Agent und den Protokolllese-Agent neu, wenn sie nach dem Upgrade nicht automatisch starten.</span><span class="sxs-lookup"><span data-stu-id="fac4b-124">Restart [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent and the Log Reader Agent if they do not start automatically after the upgrade.</span></span>  
  
## <a name="run-agents-for-merge-replication-after-upgrade"></a><span data-ttu-id="fac4b-125">Ausführen von Agents nach dem Upgrade für die Mergereplikation</span><span class="sxs-lookup"><span data-stu-id="fac4b-125">Run Agents for Merge Replication After Upgrade</span></span>  
 <span data-ttu-id="fac4b-126">Führen Sie nach dem Upgrade für jede Mergeveröffentlichung den Momentaufnahme-Agent und für jedes Abonnement den Merge-Agent aus, um die Replikationsmetadaten zu aktualisieren.</span><span class="sxs-lookup"><span data-stu-id="fac4b-126">After upgrade, run the Snapshot Agent for each merge publication and the Merge Agent for each subscription to update replication metadata.</span></span> <span data-ttu-id="fac4b-127">Sie müssen die neue Momentaufnahme nicht anwenden, da sie für die erneute Initialisierung der Abonnements nicht benötigt wird.</span><span class="sxs-lookup"><span data-stu-id="fac4b-127">You do not have to apply the new snapshot, because it is not necessary to reinitialize subscriptions.</span></span> <span data-ttu-id="fac4b-128">Die Metadaten des Abonnements werden aktualisiert, sobald der Merge-Agent zum ersten Mal nach dem Upgrade ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="fac4b-128">Subscription metadata is updated the first time the Merge Agent is run after upgrade.</span></span> <span data-ttu-id="fac4b-129">Dies bedeutet, dass die Abonnementdatenbank während des Upgrades des Verlegers online und aktiv bleiben kann.</span><span class="sxs-lookup"><span data-stu-id="fac4b-129">This means that the subscription database can remain online and active during the Publisher upgrade.</span></span>  
  
 <span data-ttu-id="fac4b-130">Die Mergereplikation speichert die Metadaten der Veröffentlichung und des Abonnements in einer Reihe von Systemtabellen in den Veröffentlichungs- und Abonnement-Datenbanken.</span><span class="sxs-lookup"><span data-stu-id="fac4b-130">Merge replication stores publication and subscription metadata in a number of system tables in the publication and subscription databases.</span></span> <span data-ttu-id="fac4b-131">Bei Ausführung des s werden die Veröffentlichungsmetadaten aktualisiert, und bei Ausführung des Merge-Agents werden die Abonnementmetadaten aktualisiert.</span><span class="sxs-lookup"><span data-stu-id="fac4b-131">Running the Snapshot Agent updates publication metadata and running the Merge Agent updates subscription metadata.</span></span> <span data-ttu-id="fac4b-132">Der Agent wird nur benötigt, um eine Momentaufnahme der Veröffentlichung zu generieren.</span><span class="sxs-lookup"><span data-stu-id="fac4b-132">It is only required to generate a publication snapshot.</span></span> <span data-ttu-id="fac4b-133">Wenn bei einer Mergeveröffentlichung parametrisierte Filter verwendet werden, gibt es auch für jede Partition eine Momentaufnahme.</span><span class="sxs-lookup"><span data-stu-id="fac4b-133">If a merge publication uses parameterized filters, each partition also has a snapshot.</span></span> <span data-ttu-id="fac4b-134">Diese partitionierten Momentaufnahmen zu aktualisieren, ist nicht erforderlich.</span><span class="sxs-lookup"><span data-stu-id="fac4b-134">It is not necessary to update these partitioned snapshots.</span></span>  
  
 <span data-ttu-id="fac4b-135">Die Agents werden in [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)], im Replikationsmonitor oder in der Befehlszeile ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="fac4b-135">Run the agents from [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)], Replication Monitor, or from the command line.</span></span> <span data-ttu-id="fac4b-136">Weitere Informationen zum Ausführen des Momentaufnahme-Agents finden Sie unter den folgenden Themen:</span><span class="sxs-lookup"><span data-stu-id="fac4b-136">For more information about running the Snapshot Agent, see the following topics:</span></span>  
  
-   [<span data-ttu-id="fac4b-137">Erstellen und Anwenden der Anfangsmomentaufnahme</span><span class="sxs-lookup"><span data-stu-id="fac4b-137">Create and Apply the Initial Snapshot</span></span>](../../../2014/relational-databases/replication/create-and-apply-the-initial-snapshot.md)  
  
-   [<span data-ttu-id="fac4b-138">Starten und Beenden eines Replikations-Agents &#40;SQL Server Management Studio&#41;</span><span class="sxs-lookup"><span data-stu-id="fac4b-138">Start and Stop a Replication Agent &#40;SQL Server Management Studio&#41;</span></span>](../../relational-databases/replication/agents/start-and-stop-a-replication-agent-sql-server-management-studio.md)  
  
-   [<span data-ttu-id="fac4b-139">Erstellen und Anwenden der Anfangsmomentaufnahme</span><span class="sxs-lookup"><span data-stu-id="fac4b-139">Create and Apply the Initial Snapshot</span></span>](../../../2014/relational-databases/replication/create-and-apply-the-initial-snapshot.md)  
  
-   [<span data-ttu-id="fac4b-140">Ausführbare Konzepte für die Programmierung von Replikations-Agent</span><span class="sxs-lookup"><span data-stu-id="fac4b-140">Replication Agent Executables Concepts</span></span>](../../../2014/relational-databases/replication/concepts/replication-agent-executables-concepts.md)  
  
 <span data-ttu-id="fac4b-141">Weitere Informationen zum Ausführen des Merge-Agents finden Sie unter den folgenden Themen:</span><span class="sxs-lookup"><span data-stu-id="fac4b-141">For more information about running the Merge Agent, see the following topics:</span></span>  
  
-   [<span data-ttu-id="fac4b-142">Synchronisieren eines Pullabonnements</span><span class="sxs-lookup"><span data-stu-id="fac4b-142">Synchronize a Pull Subscription</span></span>](../../../2014/relational-databases/replication/synchronize-a-pull-subscription.md)  
  
-   [<span data-ttu-id="fac4b-143">Synchronisieren eines Pushabonnements</span><span class="sxs-lookup"><span data-stu-id="fac4b-143">Synchronize a Push Subscription</span></span>](../../../2014/relational-databases/replication/synchronize-a-push-subscription.md)  
  
 <span data-ttu-id="fac4b-144">Nach dem Upgrade von [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] in einer Topologie, in der die Mergereplikation verwendet wird, müssen Sie den Kompatibilitätsgrad aller Veröffentlichungen ändern, um neue Funktionen verwenden zu können.</span><span class="sxs-lookup"><span data-stu-id="fac4b-144">After upgrading [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] in a topology that uses merge replication, change the publication compatibility level of any publications if you want to use new features.</span></span>  
  
## <a name="upgrading-to-standard-workgroup-or-express-editions"></a><span data-ttu-id="fac4b-145">Aktualisieren auf die Standard Edition, Workgroup Edition oder Express Edition</span><span class="sxs-lookup"><span data-stu-id="fac4b-145">Upgrading to Standard, Workgroup, or Express Editions</span></span>  
 <span data-ttu-id="fac4b-146">Bevor eine Edition von [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] auf eine andere Edition aktualisiert wird, sollten Sie überprüfen, ob die derzeit verwendete Funktionalität in der Edition, die Ziel des Upgrades ist, unterstützt wird.</span><span class="sxs-lookup"><span data-stu-id="fac4b-146">Before upgrading from one edition of [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] to another, verify that the functionality you are currently using is supported in the edition to which you are upgrading.</span></span> <span data-ttu-id="fac4b-147">Weitere Informationen finden Sie im Abschnitt zur Replikation in [Funktionen, die von den Editionen von SQL Server 2014 unterstützt werden](../../../2014/getting-started/features-supported-by-the-editions-of-sql-server-2014.md).</span><span class="sxs-lookup"><span data-stu-id="fac4b-147">For more information, see the section on Replication in [Features Supported by the Editions of SQL Server 2014](../../../2014/getting-started/features-supported-by-the-editions-of-sql-server-2014.md).</span></span>  
  
## <a name="web-synchronization-for-merge-replication"></a><span data-ttu-id="fac4b-148">Websynchronisierung für die Mergereplikation</span><span class="sxs-lookup"><span data-stu-id="fac4b-148">Web Synchronization for Merge Replication</span></span>  
 <span data-ttu-id="fac4b-149">Bei der Websynchronisierung für die Mergereplikation ist es erforderlich, dass die [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] -Replikationsüberwachung (replisapi.dll) in das virtuelle Verzeichnis auf dem Server mit Internetinformationsdienste (Internet Information Services, IIS) kopiert wird, der für die Synchronisierung verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="fac4b-149">The Web synchronization option for merge replication requires that the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Replication Listener (replisapi.dll) be copied to the virtual directory on the Internet Information Services (IIS) server used for synchronization.</span></span> <span data-ttu-id="fac4b-150">Wenn Sie die Websynchronisierung konfigurieren, wird die Datei vom Assistenten zum Konfigurieren der Websynchronisierung in das virtuelle Verzeichnis kopiert.</span><span class="sxs-lookup"><span data-stu-id="fac4b-150">When you configure Web synchronization, the file is copied to the virtual directory by the Configure Web Synchronization Wizard.</span></span> <span data-ttu-id="fac4b-151">Wenn Sie die auf dem IIS-Server installierten [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] -Komponenten aktualisieren, müssen Sie replisapi.dll manuell vom Verzeichnis COM in das virtuelle Verzeichnis auf dem IIS-Server kopieren.</span><span class="sxs-lookup"><span data-stu-id="fac4b-151">If you upgrade the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] components installed on the IIS server, you must manually copy replisapi.dll from the COM directory to the virtual directory on the IIS server.</span></span> <span data-ttu-id="fac4b-152">Weitere Informationen zur Konfiguration der Websynchronisierung finden Sie unter [Konfigurieren der Websynchronisierung](../../../2014/relational-databases/replication/configure-web-synchronization.md).</span><span class="sxs-lookup"><span data-stu-id="fac4b-152">For more information about configuring Web synchronization, see [Configure Web Synchronization](../../../2014/relational-databases/replication/configure-web-synchronization.md).</span></span>  
  
## <a name="restoring-a-replicated-database-from-an-earlier-version"></a><span data-ttu-id="fac4b-153">Wiederherstellen einer replizierten Datenbank von einer früheren Version</span><span class="sxs-lookup"><span data-stu-id="fac4b-153">Restoring a Replicated Database from an Earlier Version</span></span>  
 <span data-ttu-id="fac4b-154">Um sicherzustellen, dass die Replikationseinstellungen beibehalten werden, wenn die Sicherung einer replizierten Datenbank mithilfe einer früheren Version wiederhergestellt wird, stellen Sie die Sicherung auf einem Server und in einer Datenbank wieder her, deren Namen mit den Namen des Servers und der Datenbank übereinstimmen, von dem bzw. der die Sicherung erstellt wurde.</span><span class="sxs-lookup"><span data-stu-id="fac4b-154">To ensure replication settings are retained when restoring a backup of a replicated database from a previous version: restore to a server and database with the same names as the server and database at which the backup was taken.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="fac4b-155">Weitere Informationen</span><span class="sxs-lookup"><span data-stu-id="fac4b-155">See Also</span></span>  
 <span data-ttu-id="fac4b-156">[Häufig gestellte Fragen für Replikationsadministratoren](../../relational-databases/replication/administration/frequently-asked-questions-for-replication-administrators.md) </span><span class="sxs-lookup"><span data-stu-id="fac4b-156">[Replication Administration FAQ](../../relational-databases/replication/administration/frequently-asked-questions-for-replication-administrators.md) </span></span>  
 <span data-ttu-id="fac4b-157">[Abwärtskompatibilität von Replikationen](../../../2014/relational-databases/replication/replication-backward-compatibility.md) </span><span class="sxs-lookup"><span data-stu-id="fac4b-157">[Replication Backward Compatibility](../../../2014/relational-databases/replication/replication-backward-compatibility.md) </span></span>  
 <span data-ttu-id="fac4b-158">[Unterstützte Versions- und Editionsupgrades](../../database-engine/install-windows/supported-version-and-edition-upgrades.md) </span><span class="sxs-lookup"><span data-stu-id="fac4b-158">[Supported Version and Edition Upgrades](../../database-engine/install-windows/supported-version-and-edition-upgrades.md) </span></span>  
 [<span data-ttu-id="fac4b-159">Upgrade auf SQL Server 2014</span><span class="sxs-lookup"><span data-stu-id="fac4b-159">Upgrade to SQL Server 2014</span></span>](upgrade-sql-server.md)  
  
  
