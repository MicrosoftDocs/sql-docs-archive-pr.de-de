---
title: 'Aktive sekundäre Replikate: lesbare sekundäre Replikate (Always on Verfügbarkeits Gruppen) | Microsoft-Dokumentation'
ms.custom: ''
ms.date: 10/27/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: high-availability
ms.topic: conceptual
helpviewer_keywords:
- connection access to availability replicas
- Availability Groups [SQL Server], availability replicas
- Availability Groups [SQL Server], readable secondary replicas
- active secondary replicas [SQL Server], read-only access to
- readable secondary replicas
- Availability Groups [SQL Server], active secondary replicas
ms.assetid: 78f3f81a-066a-4fff-b023-7725ff874fdf
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: 8b85704b8110eb84ea6f4c33dfa79694112c2328
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 08/04/2020
ms.locfileid: "87622901"
---
# <a name="active-secondaries-readable-secondary-replicas-always-on-availability-groups"></a><span data-ttu-id="fea60-102">Aktive sekundäre Replikate: Lesbare sekundäre Replikate (AlwaysOn-Verfügbarkeitsgruppen)</span><span class="sxs-lookup"><span data-stu-id="fea60-102">Active Secondaries: Readable Secondary Replicas (Always On Availability Groups)</span></span>
  <span data-ttu-id="fea60-103">Die Funktionen für aktive sekundäre Replikate in [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] umfassen Unterstützung für den schreibgeschützten Zugriff auf ein oder mehrere sekundäre Replikate (*lesbare sekundäre Replikate*).</span><span class="sxs-lookup"><span data-stu-id="fea60-103">The [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] active secondary capabilities include support for read-only access to one or more secondary replicas (*readable secondary replicas*).</span></span> <span data-ttu-id="fea60-104">Lesbare sekundäre Replikate lassen den schreibgeschützten Zugriff auf alle eigenen sekundären Datenbanken zu.</span><span class="sxs-lookup"><span data-stu-id="fea60-104">A readable secondary replica allows read-only access to all its secondary databases.</span></span> <span data-ttu-id="fea60-105">Bei lesbaren sekundären Datenbanken ist jedoch kein Schreibschutz festgelegt.</span><span class="sxs-lookup"><span data-stu-id="fea60-105">However, readable secondary databases are not set to read-only.</span></span> <span data-ttu-id="fea60-106">Sie sind dynamisch.</span><span class="sxs-lookup"><span data-stu-id="fea60-106">They are dynamic.</span></span> <span data-ttu-id="fea60-107">Eine sekundäre Datenbank wird geändert, wenn Änderungen an der zugehörigen primären Datenbank auf die sekundäre Datenbank angewendet werden.</span><span class="sxs-lookup"><span data-stu-id="fea60-107">A given secondary database changes as changes on the corresponding primary database are applied to the secondary database.</span></span> <span data-ttu-id="fea60-108">Bei einem typischen sekundären Replikat liegen die Daten in den sekundären Datenbanken nahezu in Echtzeit vor. Dies gilt auch für dauerhafte speicheroptimierte Tabellen.</span><span class="sxs-lookup"><span data-stu-id="fea60-108">For a typical secondary replica, the data, including durable memory optimized tables, in the secondary databases is in near real time.</span></span> <span data-ttu-id="fea60-109">Weiterhin werden Volltextindizes mit den sekundären Datenbanken synchronisiert.</span><span class="sxs-lookup"><span data-stu-id="fea60-109">Furthermore, full-text indexes are synchronized with the secondary databases.</span></span> <span data-ttu-id="fea60-110">In vielen Fällen beträgt die Datenlatenz zwischen einer primären Datenbank und der zugehörigen sekundären Datenbank nur wenige Sekunden.</span><span class="sxs-lookup"><span data-stu-id="fea60-110">In many circumstances, data latency between a primary database and the corresponding secondary database is only a few seconds.</span></span>  
  
 <span data-ttu-id="fea60-111">Sicherheitseinstellungen, die in den primären Datenbanken auftreten, werden in den sekundären Datenbanken beibehalten.</span><span class="sxs-lookup"><span data-stu-id="fea60-111">Security settings that occur in the primary databases are persisted to the secondary databases.</span></span> <span data-ttu-id="fea60-112">Dazu gehören Benutzer, Datenbankrollen und Anwendungsrollen sowie die jeweiligen zugehörigen Berechtigungen und die transparente Datenverschlüsselung (TDE), wenn diese in der primären Datenbank aktiviert ist.</span><span class="sxs-lookup"><span data-stu-id="fea60-112">This includes users, database roles, and applications roles together with their respective permissions and transparent data encryption (TDE), if enabled on the primary database.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="fea60-113">Sie können zwar keine Daten in sekundäre Datenbanken schreiben, aber in Datenbanken mit Lese-/Schreibzugriff auf der Serverinstanz, auf der die sekundären Replikate gehostet werden, einschließlich Benutzerdatenbanken und Systemdatenbanken, wie **tempdb**.</span><span class="sxs-lookup"><span data-stu-id="fea60-113">Though you cannot write data to secondary databases, you can write to read-write databases on the server instance that hosts the secondary replica, including user databases and system databases such as **tempdb**.</span></span>  
  
 [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] <span data-ttu-id="fea60-114">unterstützt auch das Umleiten von Verbindungsanforderungen für beabsichtigte Lesevorgänge an ein lesbares sekundäres Replikat (*schreibgeschütztes Routing*).</span><span class="sxs-lookup"><span data-stu-id="fea60-114">also supports the re-routing of read-intent connection requests to a readable secondary replica (*read-only routing*).</span></span> <span data-ttu-id="fea60-115">Weitere Informationen zum schreibgeschützten Routing finden Sie unter [Verwenden eines Listeners zum Herstellen einer Verbindung mit einem schreibgeschützten sekundären Replikat (schreibgeschütztes Routing)](../../listeners-client-connectivity-application-failover.md#ConnectToSecondary).</span><span class="sxs-lookup"><span data-stu-id="fea60-115">For information about read-only routing, see [Using a Listener to Connect to a Read-Only Secondary Replica (Read-Only Routing)](../../listeners-client-connectivity-application-failover.md#ConnectToSecondary).</span></span>  
  
 
  
##  <a name="benefits"></a><a name="bkmk_Benefits"></a> <span data-ttu-id="fea60-116">Vorteile</span><span class="sxs-lookup"><span data-stu-id="fea60-116">Benefits</span></span>  
 <span data-ttu-id="fea60-117">Die Weiterleitung schreibgeschützter Verbindungen an lesbare sekundäre Replikate bietet die folgenden Vorteile:</span><span class="sxs-lookup"><span data-stu-id="fea60-117">Directing read-only connections to readable secondary replicas provides the following benefits:</span></span>  
  
-   <span data-ttu-id="fea60-118">Entlastet das primäre Replikat von sekundären schreibgeschützten Arbeitsauslastungen, wodurch dessen Ressourcen für unternehmenswichtige Arbeitsauslastungen zur Verfügung stehen.</span><span class="sxs-lookup"><span data-stu-id="fea60-118">Offloads your secondary read-only workloads from your primary replica, which conserves its resources for your mission critical workloads.</span></span> <span data-ttu-id="fea60-119">Unternehmenswichtige Lesearbeitsauslastungen oder Arbeitsauslastungen, die keine Latenzen tolerieren, sollten auf dem primären Replikat ausgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="fea60-119">If you have mission critical read-workload or the workload that cannot tolerate latency, you should run it on the primary.</span></span>  
  
-   <span data-ttu-id="fea60-120">Verbessert die Rendite von Systemen, auf denen lesbare sekundäre Replikate gehostet werden.</span><span class="sxs-lookup"><span data-stu-id="fea60-120">Improves your return on investment for the systems that host readable secondary replicas.</span></span>  
  
 <span data-ttu-id="fea60-121">Außerdem bieten lesbare sekundäre Replikate folgendermaßen stabile Unterstützung für schreibgeschützte Vorgänge:</span><span class="sxs-lookup"><span data-stu-id="fea60-121">In addition, readable secondaries provide robust support for read-only operations, as follows:</span></span>  
  
-   <span data-ttu-id="fea60-122">Durch automatische temporäre Statistiken für lesbare sekundäre Datenbanken werden schreibgeschützte Abfragen in datenträgerbasierten Tabellen optimiert.</span><span class="sxs-lookup"><span data-stu-id="fea60-122">Automatic temporary statistics on readable secondary database optimize read-only queries on disk-based tables.</span></span> <span data-ttu-id="fea60-123">Bei speicheroptimierten Tabellen werden die fehlenden Statistiken automatisch erstellt.</span><span class="sxs-lookup"><span data-stu-id="fea60-123">For memory-optimized tables, the missing statistics are created automatically.</span></span> <span data-ttu-id="fea60-124">Veraltete Statistiken werden jedoch nicht automatisch aktualisiert.</span><span class="sxs-lookup"><span data-stu-id="fea60-124">However, there is no auto-update of stale statistics.</span></span> <span data-ttu-id="fea60-125">Sie müssen die Statistiken auf dem primären Replikat manuell aktualisieren.</span><span class="sxs-lookup"><span data-stu-id="fea60-125">You will need to manually update the statistics on the primary replica.</span></span> <span data-ttu-id="fea60-126">Weitere Informationen finden Sie unter [Statistiken für Datenbanken mit schreibgeschütztem Zugriff](#Read-OnlyStats)weiter unten in diesem Thema.</span><span class="sxs-lookup"><span data-stu-id="fea60-126">For more information, see [Statistics for Read-Only Access Databases](#Read-OnlyStats), later in this topic.</span></span>  
  
-   <span data-ttu-id="fea60-127">Schreibgeschützte Arbeitsauslastungen für datenträgerbasierte Tabellen verwenden die Zeilenversionsverwaltung, um Blockierungskonflikte für sekundäre Datenbanken aufzuheben.</span><span class="sxs-lookup"><span data-stu-id="fea60-127">Read-only workloads for disk-based tables use row versioning to remove blocking contention on the secondary databases.</span></span> <span data-ttu-id="fea60-128">Alle Abfragen für sekundäre Datenbanken werden automatisch der Momentaufnahme-Transaktionsisolationsstufe zugeordnet, selbst wenn explizit andere Transaktionsisolationsstufen festgelegt wurden.</span><span class="sxs-lookup"><span data-stu-id="fea60-128">All queries that run against the secondary databases are automatically mapped to snapshot isolation transaction level, even when other transaction isolation levels are explicitly set.</span></span> <span data-ttu-id="fea60-129">Zudem werden alle Sperrhinweise ignoriert.</span><span class="sxs-lookup"><span data-stu-id="fea60-129">Also, all locking hints are ignored.</span></span> <span data-ttu-id="fea60-130">Dies schließt Leser-/Schreiberkonflikte aus.</span><span class="sxs-lookup"><span data-stu-id="fea60-130">This eliminates reader/writer contention.</span></span>  
  
-   <span data-ttu-id="fea60-131">Schreibgeschützte Arbeitsauslastungen für dauerhafte speicheroptimierte Tabellen greifen unter Verwendung von systemeigenen gespeicherten Prozeduren oder SQL-Interoperabilität, für die hinsichtlich der Transaktionsisolationsstufen dieselben Einschränkungen gelten (siehe ), auf genau dieselbe Weise auf Daten wie in der primären Datenbank zu.</span><span class="sxs-lookup"><span data-stu-id="fea60-131">Read-only workloads for memory-optimized durable tables access the data in exactly the same way it is accessed on the primary database, using native stored procedures or SQL Interoperability with the same transaction isolation level limitations.</span></span> <span data-ttu-id="fea60-132">Auf dem primären Replikat ausgeführte Arbeitsauslastungen für die Berichterstellung oder schreibgeschützte Abfragen können unverändert auf dem sekundären Replikat ausgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="fea60-132">Reporting workload or read-only queries running on the primary replica can be run on the secondary replica without requiring any changes.</span></span> <span data-ttu-id="fea60-133">Analog dazu können auf einem sekundären Replikat ausgeführte Arbeitsauslastungen für die Berichterstellung oder schreibgeschützte Abfragen unverändert auf dem primären Replikat ausgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="fea60-133">Similarly, a reporting workload or read-only queries running on a secondary replica can be run on the primary replica without requiring any changes.</span></span>  <span data-ttu-id="fea60-134">Ähnlich wie bei datenträgerbasierten Tabellen werden alle Abfragen für sekundäre Datenbanken automatisch der Momentaufnahme-Transaktionsisolationsstufe zugeordnet, selbst wenn explizit andere Transaktionsisolationsstufen festgelegt wurden.</span><span class="sxs-lookup"><span data-stu-id="fea60-134">Similar to disk-based tables, all queries that run against the secondary databases are automatically mapped to snapshot isolation transaction level, even when other transaction isolation levels are explicitly set.</span></span>  
  
-   <span data-ttu-id="fea60-135">DML-Vorgänge sind für Tabellenvariablen datenträgerbasierter und speicheroptimierter Tabellentypen auf dem sekundären Replikat zulässig.</span><span class="sxs-lookup"><span data-stu-id="fea60-135">DML operations are allowed on table variables both for disk-based and memory-optimized table types on the secondary replica.</span></span>  
  
##  <a name="prerequisites-for-the-availability-group"></a><a name="bkmk_Prerequisites"></a> <span data-ttu-id="fea60-136">Voraussetzungen für die Verfügbarkeitsgruppe</span><span class="sxs-lookup"><span data-stu-id="fea60-136">Prerequisites for the Availability Group</span></span>  
  
-   <span data-ttu-id="fea60-137">**Lesbare sekundäre Replikate (erforderlich)**</span><span class="sxs-lookup"><span data-stu-id="fea60-137">**Readable secondary replicas (required)**</span></span>  
  
     <span data-ttu-id="fea60-138">Der Datenbankadministrator muss mindestens ein Replikat so konfigurieren, dass es bei Ausführung in der sekundären Rolle alle Verbindungen (nur für den schreibgeschützten Zugriff) oder aber nur Verbindungen für beabsichtigte Lesevorgänge zulässt.</span><span class="sxs-lookup"><span data-stu-id="fea60-138">The database administrator needs to configure one or more replicas so that, when running under the secondary role, they allow either all connections (just for read-only access) or only read-intent connections.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="fea60-139">Optional kann der Datenbankadministrator eines der Verfügbarkeitsreplikate so konfigurieren, dass schreibgeschützte Verbindungen bei Ausführung in der primären Rolle ausgeschlossen werden.</span><span class="sxs-lookup"><span data-stu-id="fea60-139">Optionally, the database administrator can configure any of the availability replicas to exclude read-only connections when running under the primary role.</span></span>  
  
     <span data-ttu-id="fea60-140">Weitere Informationen finden Sie unter [Informationen zum Clientverbindungszugriff auf Verfügbarkeitsreplikate &#40;SQL Server&#41;](about-client-connection-access-to-availability-replicas-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="fea60-140">For more information, see [About Client Connection Access to Availability Replicas &#40;SQL Server&#41;](about-client-connection-access-to-availability-replicas-sql-server.md).</span></span>  
  
-   <span data-ttu-id="fea60-141">**Verfügbarkeitsgruppenlistener**</span><span class="sxs-lookup"><span data-stu-id="fea60-141">**Availability group listener**</span></span>  
  
     <span data-ttu-id="fea60-142">Um schreibgeschütztes Routing zu unterstützen, muss eine Verfügbarkeitsgruppe einen [Verfügbarkeitsgruppenlistener](../../listeners-client-connectivity-application-failover.md)besitzen.</span><span class="sxs-lookup"><span data-stu-id="fea60-142">To support read-only routing, an availability group must possess an [availability group listener](../../listeners-client-connectivity-application-failover.md).</span></span> <span data-ttu-id="fea60-143">Der schreibgeschützte Client muss die eigenen Verbindungsanforderungen an diesen Listener weiterleiten, und in der Verbindungszeichenfolge des Clients muss der Anwendungszweck als "schreibgeschützt" angegeben sein.</span><span class="sxs-lookup"><span data-stu-id="fea60-143">The read-only client must direct its connection requests to this listener, and the client's connection string must specify the application intent as "read-only."</span></span> <span data-ttu-id="fea60-144">Es muss sich also um *Verbindungsanforderungen für beabsichtigte Lesevorgänge*handeln.</span><span class="sxs-lookup"><span data-stu-id="fea60-144">That is, they must be *read-intent connection requests*.</span></span>  
  
-   <span data-ttu-id="fea60-145">**Schreibgeschütztes Routing**</span><span class="sxs-lookup"><span data-stu-id="fea60-145">**Read only routing**</span></span>  
  
     <span data-ttu-id="fea60-146">Als*schreibgeschütztes Routing* wird die Fähigkeit von SQL Server bezeichnet, eingehende Verbindungsanforderungen für beabsichtigte Lesevorgänge, die an einen Verfügbarkeitsgruppenlistener gerichtet sind, an ein verfügbares lesbares sekundäres Replikat weiterzuleiten.</span><span class="sxs-lookup"><span data-stu-id="fea60-146">*Read-only routing* refers to the ability of SQL Server to route incoming read-intent connection requests, that are directed to an availability group listener, to an available readable secondary replica.</span></span> <span data-ttu-id="fea60-147">Für schreibgeschütztes Routing gelten folgende Voraussetzungen:</span><span class="sxs-lookup"><span data-stu-id="fea60-147">The prerequisites for read-only routing are as follows:</span></span>  
  
    -   <span data-ttu-id="fea60-148">Zur Unterstützung von schreibgeschütztem Routing muss für lesbare sekundäre Replikate eine URL für schreibgeschütztes Routing angegeben werden.</span><span class="sxs-lookup"><span data-stu-id="fea60-148">To support read-only routing, a readable secondary replica requires a read-only routing URL.</span></span> <span data-ttu-id="fea60-149">Diese URL wird nur wirksam, wenn das lokale Replikat unter der sekundären Rolle ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="fea60-149">This URL takes effect only when the local replica is running under the secondary role.</span></span> <span data-ttu-id="fea60-150">Die URL für schreibgeschütztes Routing muss nach Bedarf replikatweise angegeben werden.</span><span class="sxs-lookup"><span data-stu-id="fea60-150">The read-only routing URL must be specified on a replica-by-replica basis, as needed.</span></span> <span data-ttu-id="fea60-151">Jede URL für schreibgeschütztes Routing wird zum Weiterleiten von Verbindungsanforderungen für beabsichtigte Lesevorgänge an ein bestimmtes lesbares sekundäres Replikat verwendet.</span><span class="sxs-lookup"><span data-stu-id="fea60-151">Each read-only routing URL is used for routing read-intent connection requests to a specific readable secondary replica.</span></span> <span data-ttu-id="fea60-152">In der Regel wird jedem lesbaren sekundären Replikat eine URL für schreibgeschütztes Routing zugewiesen.</span><span class="sxs-lookup"><span data-stu-id="fea60-152">Typically, every readable secondary replica is assigned a read-only routing URL.</span></span>  
  
    -   <span data-ttu-id="fea60-153">Jedes Verfügbarkeitsreplikat, das als primäres Replikat schreibgeschütztes Routing unterstützen soll, erfordert eine Liste für schreibgeschütztes Routing.</span><span class="sxs-lookup"><span data-stu-id="fea60-153">Each availability replica that is to support read-only routing when it is the primary replica requires a read-only routing list.</span></span> <span data-ttu-id="fea60-154">Eine Liste für schreibgeschütztes Routing wird nur wirksam, wenn das lokale Replikat unter der primären Rolle ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="fea60-154">A given read-only routing list takes effect only when the local replica is running under the primary role.</span></span> <span data-ttu-id="fea60-155">Diese Liste muss nach Bedarf replikatweise angegeben werden.</span><span class="sxs-lookup"><span data-stu-id="fea60-155">This list must be specified on a replica-by-replica basis, as needed.</span></span> <span data-ttu-id="fea60-156">Normalerweise enthält jede Liste für schreibgeschütztes Routing jede URL für schreibgeschütztes Routing, wobei die URL des lokalen Replikats am Ende der Liste steht.</span><span class="sxs-lookup"><span data-stu-id="fea60-156">Typically, each read-only routing list would contain every read-only routing URL, with the URL of the local replica at the end of the list.</span></span>  
  
        > [!NOTE]  
        >  <span data-ttu-id="fea60-157">Verbindungsanforderungen für beabsichtigte Lesevorgänge werden an das erste verfügbare lesbare sekundäre Replikat auf der Liste für schreibgeschütztes Routing des aktuellen primären Replikats weitergeleitet.</span><span class="sxs-lookup"><span data-stu-id="fea60-157">Read-intent connection requests are routed to the first available readable secondary on the read-only routing list of the current primary replica.</span></span> <span data-ttu-id="fea60-158">Es erfolgt kein Lastenausgleich.</span><span class="sxs-lookup"><span data-stu-id="fea60-158">There is no load balancing.</span></span>  
  
     <span data-ttu-id="fea60-159">Weitere Informationen finden Sie unter [Konfigurieren des schreibgeschützten Routing für eine Verfügbarkeitsgruppe &#40;SQL Server&#41;](configure-read-only-routing-for-an-availability-group-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="fea60-159">For more information, see [Configure Read-Only Routing for an Availability Group &#40;SQL Server&#41;](configure-read-only-routing-for-an-availability-group-sql-server.md).</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="fea60-160">Weitere Informationen zu Verfügbarkeitsgruppenlistenern und zum schreibgeschützten Routing finden Sie unter [Verfügbarkeitsgruppenlistener, Clientkonnektivität und Anwendungsfailover &#40;SQL Server&#41;](../../listeners-client-connectivity-application-failover.md)besitzen.</span><span class="sxs-lookup"><span data-stu-id="fea60-160">For information about availability group listeners and more information about read-only routing, see [Availability Group Listeners, Client Connectivity, and Application Failover &#40;SQL Server&#41;](../../listeners-client-connectivity-application-failover.md).</span></span>  
  
##  <a name="limitations-and-restrictions"></a><a name="bkmk_LimitationsRestrictions"></a> <span data-ttu-id="fea60-161">Einschränkungen</span><span class="sxs-lookup"><span data-stu-id="fea60-161">Limitations and Restrictions</span></span>  
 <span data-ttu-id="fea60-162">Folgende Vorgänge werden nicht vollständig unterstützt:</span><span class="sxs-lookup"><span data-stu-id="fea60-162">Some operations are not fully supported, as follows:</span></span>  
  
-   <span data-ttu-id="fea60-163">Sobald für ein lesbares Replikat der Lesezugriff aktiviert ist, können Verbindungsanforderungen für die sekundären Datenbanken angenommen werden.</span><span class="sxs-lookup"><span data-stu-id="fea60-163">As soon as a readable replica is enabled for read, it can start accepting connections to its secondary databases.</span></span> <span data-ttu-id="fea60-164">Wenn in einer primären Datenbank jedoch aktive Transaktionen vorhanden sind, sind die Zeilenversionen in der entsprechenden sekundären Datenbank nicht vollständig verfügbar.</span><span class="sxs-lookup"><span data-stu-id="fea60-164">However, if any active transactions exist on a primary database, the row versions will not be fully available on the corresponding secondary database.</span></span> <span data-ttu-id="fea60-165">Für jegliche aktiven Transaktionen, die bei der Konfiguration des sekundären Replikats auf dem primären Replikat vorhanden waren, muss ein Commit oder ein Rollback durchgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="fea60-165">Any active transactions that existed on the primary replica when the secondary replica was configured must commit or roll back.</span></span> <span data-ttu-id="fea60-166">Bis dieser Prozess abgeschlossen ist, ist die Zuordnung der Transaktionsisolationsstufe auf der sekundären Datenbank unvollständig, und Abfragen werden vorübergehend blockiert.</span><span class="sxs-lookup"><span data-stu-id="fea60-166">Until this process completes, the transaction isolation level mapping on the secondary database is incomplete and queries are temporarily blocked.</span></span>  
  
    > [!WARNING]  
    >  <span data-ttu-id="fea60-167">Die Ausführung von Transaktionen mit langer Ausführungszeit wirkt sich darauf aus, wie viele Zeilen mit Versionsangabe für datenträgerbasierte und speicheroptimierte Tabellen beibehalten werden.</span><span class="sxs-lookup"><span data-stu-id="fea60-167">Running long transactions impacts the number of versioned rows kept, both for disk-based and memory-optimized tables.</span></span>  
  
-   <span data-ttu-id="fea60-168">Obwohl für speicheroptimierte Tabellen immer Zeilenversionen generiert werden, werden bei einer sekundären Datenbank mit speicheroptimierten Tabellen Abfragen blockiert, bis alle aktiven Transaktionen abgeschlossen sind, die sich im primären Replikat befanden, während der Lesezugriff für das sekundäre Replikat aktiviert wurde.</span><span class="sxs-lookup"><span data-stu-id="fea60-168">On a secondary database with memory-optimized tables, even though row versions are always generated for memory-optimzied tables, queries are blocked until all active transactions that existed in the primary replica when the secondary replica was enabled for read complete.</span></span> <span data-ttu-id="fea60-169">Dadurch wird sichergestellt, dass der Arbeitsauslastung für die Berichterstellung und den schreibgeschützten Abfragen sowohl datenträgerbasierte als auch speicheroptimierte Tabellen gleichzeitig zur Verfügung stehen.</span><span class="sxs-lookup"><span data-stu-id="fea60-169">This ensures that both disk-based and memory-optimized tables are available to the reporting workload and read-only queries at the same time.</span></span>  
  
-   <span data-ttu-id="fea60-170">Die Änderungsnachverfolgung und Change Data Capture werden nicht für sekundäre Datenbanken unterstützt, die zu einem lesbaren sekundären Replikat gehören:</span><span class="sxs-lookup"><span data-stu-id="fea60-170">Change tracking and change data capture are not supported on secondary databases that belong to a readable secondary replica:</span></span>  
  
    -   <span data-ttu-id="fea60-171">Die Änderungsnachverfolgung ist auf sekundären Datenbanken explizit deaktiviert.</span><span class="sxs-lookup"><span data-stu-id="fea60-171">Change tracking is explicitly disabled on secondary databases.</span></span>  
  
    -   <span data-ttu-id="fea60-172">Change Data Capture kann für eine sekundäre Datenbank aktiviert werden, dies wird aber nicht unterstützt.</span><span class="sxs-lookup"><span data-stu-id="fea60-172">Change data capture can be enabled on a secondary database, but this is not supported.</span></span>  
  
-   <span data-ttu-id="fea60-173">Da Lesevorgänge der Momentaufnahme-Transaktionsisolationsstufe zugeordnet werden, kann das Cleanup von inaktiven Datensätzen auf dem primären Replikat durch Transaktionen auf einem oder mehreren sekundären Replikaten blockiert werden.</span><span class="sxs-lookup"><span data-stu-id="fea60-173">Because read operations are mapped to snapshot isolation transaction level, the cleanup of ghost records on the primary replica can be blocked by transactions on one or more secondary replicas.</span></span> <span data-ttu-id="fea60-174">Mit der Bereinigungsaufgabe für inaktive Datensätze werden die inaktiven Datensätze für datenträgerbasierte Tabellen auf dem primären Replikat automatisch bereinigt, wenn sie von sekundären Replikaten nicht mehr benötigt werden.</span><span class="sxs-lookup"><span data-stu-id="fea60-174">The ghost record cleanup task will automatically clean up the ghost records for disk-based tables on the primary replica when they are no longer needed by any secondary replica.</span></span>  <span data-ttu-id="fea60-175">Dies ist analog zur Ausführung von Transaktionen auf dem primären Replikat.</span><span class="sxs-lookup"><span data-stu-id="fea60-175">This is similar to what is done when you run transaction(s) on the primary replica.</span></span> <span data-ttu-id="fea60-176">Im äußersten Fall müssen Sie Leseabfragen mit langer Laufzeit in der sekundären Datenbank abbrechen, die die Bereinigung der inaktiven Datensätze blockieren.</span><span class="sxs-lookup"><span data-stu-id="fea60-176">In the extreme case on the secondary database, you will need to kill a long running read-query that is blocking the ghost cleanup.</span></span> <span data-ttu-id="fea60-177">Hinweis: Die Bereinigung des inaktiven Elements kann blockiert werden, wenn das sekundäre Replikat getrennt oder die Datenverschiebung in der sekundären Datenbank angehalten wird.</span><span class="sxs-lookup"><span data-stu-id="fea60-177">Note, the ghost clean can be blocked if the secondary replica gets disconnected or when data movement is suspended on the secondary database.</span></span> <span data-ttu-id="fea60-178">Mit diesem Status wird zudem die Protokollkürzung verhindert. Wenn dieser Status weiterhin auftritt, sollten Sie demnach diese sekundäre Datenbank aus der Verfügbarkeitsgruppe entfernen.</span><span class="sxs-lookup"><span data-stu-id="fea60-178">This state also prevents log truncation, so if this state persists, we recommend that you remove this secondary database from the availability group.</span></span> <span data-ttu-id="fea60-179">Bei speicheroptimierten Tabellen besteht kein Problem mit dem Cleanup inaktiver Datensätze, da die Zeilenversionen im Arbeitsspeicher beibehalten werden und unabhängig von den Zeilenversionen auf dem primären Replikat sind.</span><span class="sxs-lookup"><span data-stu-id="fea60-179">There is no ghost record cleanup issue with memory-optimized tables because the row versions are kept in memory and are independent of the row versions on the primary replica.</span></span>  
  
-   <span data-ttu-id="fea60-180">Beim DBCC SHRINKFILE-Vorgang für Dateien mit datenträgerbasierten Tabellen kann auf dem primären Replikat ein Fehler auftreten, wenn die Datei inaktive Datensätze enthält, die auf einem sekundären Replikat weiterhin benötigt werden.</span><span class="sxs-lookup"><span data-stu-id="fea60-180">The DBCC SHRINKFILE operation on files containing disk-based tables might fail on the primary replica if the file contains ghost records that are still needed on a secondary replica.</span></span>  
  
-   <span data-ttu-id="fea60-181">Ab [!INCLUDE[ssSQL14](../../../includes/sssql14-md.md)]können lesbare sekundäre Replikate selbst dann online bleiben, wenn das primäre Replikat aufgrund einer Benutzeraktion oder eines Fehlers offline ist.</span><span class="sxs-lookup"><span data-stu-id="fea60-181">Beginning in [!INCLUDE[ssSQL14](../../../includes/sssql14-md.md)], readable secondary replicas can remain online even when the primary replica is offline due to user action or a failure.</span></span> <span data-ttu-id="fea60-182">Allerdings ist in diesem Fall kein schreibgeschütztes Routing möglich, da der Verfügbarkeitsgruppenlistener ebenfalls offline ist.</span><span class="sxs-lookup"><span data-stu-id="fea60-182">However, read-only routing does not work in this situation because the availability group listener is offline as well.</span></span> <span data-ttu-id="fea60-183">Clients müssen bei schreibgeschützten Arbeitsauslastungen direkt eine Verbindung mit den schreibgeschützten sekundären Replikaten herstellen.</span><span class="sxs-lookup"><span data-stu-id="fea60-183">Clients must connect directly to the read-only secondary replicas for read-only workloads.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="fea60-184">Wenn Sie die dynamische Verwaltungssicht [sys.dm_db_index_physical_stats](/sql/relational-databases/system-dynamic-management-views/sys-dm-db-index-physical-stats-transact-sql) auf einer Serverinstanz abfragen, die ein lesbares sekundäres Replikat hostet, kann ein REDO-Blockierungsproblem auftreten.</span><span class="sxs-lookup"><span data-stu-id="fea60-184">If you query the [sys.dm_db_index_physical_stats](/sql/relational-databases/system-dynamic-management-views/sys-dm-db-index-physical-stats-transact-sql) dynamic management view on a server instance that is hosting a readable secondary replica, you might encounter a REDO blocking issue.</span></span> <span data-ttu-id="fea60-185">Dies kommt daher, dass diese dynamische Verwaltungssicht eine IS-Sperre für die angegebene Benutzertabelle oder Sicht erhält, die Anforderungen von einem REDO-Thread für eine X-Sperre dieser Benutzertabelle oder Sicht blockieren kann.</span><span class="sxs-lookup"><span data-stu-id="fea60-185">This is because this dynamic management view acquires an IS lock on the specified user table or view that can block requests by a REDO thread for an X lock on that user table or view.</span></span>  
  
##  <a name="performance-considerations"></a><a name="bkmk_Performance"></a> <span data-ttu-id="fea60-186">Leistungsaspekte</span><span class="sxs-lookup"><span data-stu-id="fea60-186">Performance Considerations</span></span>  
 <span data-ttu-id="fea60-187">In diesem Abschnitt werden mehrere Überlegungen zur Leistung für lesbare sekundäre Datenbanken erläutert.</span><span class="sxs-lookup"><span data-stu-id="fea60-187">This section discusses several performance considerations for readable secondary databases</span></span>  
  
 
  
###  <a name="data-latency"></a><a name="DataLatency"></a> <span data-ttu-id="fea60-188">Datenlatenz</span><span class="sxs-lookup"><span data-stu-id="fea60-188">Data Latency</span></span>  
 <span data-ttu-id="fea60-189">Das Implementieren von schreibgeschütztem Zugriff auf sekundäre Replikate ist hilfreich, sofern Ihre schreibgeschützten Arbeitsauslastungen eine gewisse Datenlatenz tolerieren können.</span><span class="sxs-lookup"><span data-stu-id="fea60-189">Implementing read-only access to secondary replicas is useful if your read-only workloads can tolerate some data latency.</span></span> <span data-ttu-id="fea60-190">Führen Sie in Situationen mit inakzeptabler Datenlatenz ggf. schreibgeschützte Arbeitsauslastungen für das primäre Replikat aus.</span><span class="sxs-lookup"><span data-stu-id="fea60-190">In situations where data latency is unacceptable, consider running read-only workloads against the primary replica.</span></span>  
  
 <span data-ttu-id="fea60-191">Vom primären Replikat werden Protokolldatensätze der Änderungen in der primären Datenbank an die sekundären Replikate gesendet.</span><span class="sxs-lookup"><span data-stu-id="fea60-191">The primary replica sends log records of changes on primary database to the secondary replicas.</span></span> <span data-ttu-id="fea60-192">In der jeweiligen sekundären Datenbank werden die Protokolldatensätze von einem dedizierten REDO-Thread angewendet.</span><span class="sxs-lookup"><span data-stu-id="fea60-192">On each secondary database, a dedicated redo thread applies the log records.</span></span> <span data-ttu-id="fea60-193">In einer schreibgeschützten sekundären Datenbank erscheint eine angegebene Datenänderung erst in den Abfrageergebnissen, wenn der Protokolldatensatz, der die Änderung enthält, auf die sekundäre Datenbank angewendet und für die Transaktion in der primären Datenbank ein Commit ausgeführt wurde.</span><span class="sxs-lookup"><span data-stu-id="fea60-193">On a read-access secondary database, a given data change does not appear in query results until the log record that contains the change has been applied to the secondary database and the transaction has been committed on primary database.</span></span>  
  
 <span data-ttu-id="fea60-194">Dies weist auf eine gewisse Latenz zwischen den primären und sekundären Replikaten hin, wobei es sich in der Regel nur um wenige Sekunden handelt.</span><span class="sxs-lookup"><span data-stu-id="fea60-194">This means that there is some latency, usually only a matter of seconds, between the primary and secondary replicas.</span></span> <span data-ttu-id="fea60-195">In außergewöhnlichen Fällen, beispielsweise bei Netzwerkproblemen, die den Durchsatz reduzieren, kann die Latenz jedoch signifikant werden.</span><span class="sxs-lookup"><span data-stu-id="fea60-195">In unusual cases, however, for example if network issues reduce throughput, latency can become significant.</span></span> <span data-ttu-id="fea60-196">Die Latenz nimmt bei E/A-Engpässen und bei angehaltener Datenverschiebung zu.</span><span class="sxs-lookup"><span data-stu-id="fea60-196">Latency increases when I/O bottlenecks occur and when data movement is suspended.</span></span> <span data-ttu-id="fea60-197">Zur Überwachung einer angehaltenen Datenverschiebung können Sie das [AlwaysOn-Dashboard](use-the-always-on-dashboard-sql-server-management-studio.md) oder die dynamische Verwaltungssicht [sys.dm_hadr_database_replica_states](/sql/relational-databases/system-dynamic-management-views/sys-dm-hadr-database-replica-states-transact-sql) verwenden.</span><span class="sxs-lookup"><span data-stu-id="fea60-197">To monitor suspended data movement, you can use the [AlwaysOn Dashboard](use-the-always-on-dashboard-sql-server-management-studio.md) or the [sys.dm_hadr_database_replica_states](/sql/relational-databases/system-dynamic-management-views/sys-dm-hadr-database-replica-states-transact-sql) dynamic management view.</span></span>  
  
####  <a name="data-latency-on-databases-with-memory-optimized-tables"></a><a name="bkmk_LatencyWithInMemOLTP"></a> <span data-ttu-id="fea60-198">Datenlatenz bei Datenbanken mit speicheroptimierten Tabellen</span><span class="sxs-lookup"><span data-stu-id="fea60-198">Data Latency on databases with memory-optimized tables</span></span>  
 <span data-ttu-id="fea60-199">Beim Zugriff auf speicheroptimierte Tabellen auf einem sekundären Replikat für Lesearbeitsauslastungen wird ein *Sicherheitszeitstempel* verwendet, um Zeilen aus Transaktionen zurückzugeben, für die vor dem durch den *Sicherheitszeitstempel*angegebenen Zeitpunkt ein Commit ausgeführt wurde.</span><span class="sxs-lookup"><span data-stu-id="fea60-199">When accessing memory-optimized tables on secondary replica for read workload, a *safe-timestamp* is used to return rows from transactions that have committed earlier than *safe-timestamp*.</span></span> <span data-ttu-id="fea60-200">Der Sicherheitszeitstempel ist der älteste Zeitstempelhinweis, der vom Garbage Collection-Thread zum Bereinigen der Zeilen auf dem primären Replikat verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="fea60-200">The safe-timestamp is the oldest timestamp hint used by the garbage collection thread to garbage collect the rows on the primary replica.</span></span> <span data-ttu-id="fea60-201">Dieser Zeitstempel wird aktualisiert, wenn die Anzahl der DML-Transaktionen für speicheroptimierte Tabellen seit dem letzten Update einen internen Schwellenwert überschreitet.</span><span class="sxs-lookup"><span data-stu-id="fea60-201">This timestamp is updated when the number of DML transactions on memory-optimized tables exceed an internal threshold since the last update.</span></span> <span data-ttu-id="fea60-202">Sobald der älteste Transaktionszeitstempel auf dem primären Replikat aktualisiert wird, wird bei der nächsten DML-Transaktion für eine dauerhafte speicheroptimierte Tabelle dieser Zeitstempel als Teil eines speziellen Protokolldatensatzes an das sekundäre Replikat gesendet.</span><span class="sxs-lookup"><span data-stu-id="fea60-202">Whenever the oldest transaction timestamp is updated on the primary replica, the next DML transaction on a durable memory-optimized table will send this timestamp to be sent to secondary replica as part of a special log record.</span></span> <span data-ttu-id="fea60-203">Der Sicherheitszeitstempel wird von einem REDO-Thread auf dem sekundären Replikat bei der Verarbeitung dieses Protokolldatensatzes aktualisiert.</span><span class="sxs-lookup"><span data-stu-id="fea60-203">REDO thread on the secondary replica, updates the safe-timestamp as part of processing this log record.</span></span>  
  
#### <a name="the-impact-of-safe-timestamp-on-latency"></a><span data-ttu-id="fea60-204">Auswirkungen des Sicherheitszeitstempels auf die Latenz</span><span class="sxs-lookup"><span data-stu-id="fea60-204">The impact of safe-timestamp on Latency</span></span>  
  
-   <span data-ttu-id="fea60-205">Bei OLTP-Arbeitsauslastungen mit einem hohen Transaktionsdurchsatz sollte die Latenz mit der datenträgerbasierter Tabellen vergleichbar sein.</span><span class="sxs-lookup"><span data-stu-id="fea60-205">For OLTP workloads with high transaction throughput, the latency should be comparable to disk-based tables.</span></span> <span data-ttu-id="fea60-206">Dies wird in den meisten Fällen zutreffen.</span><span class="sxs-lookup"><span data-stu-id="fea60-206">We expect this to be the common case.</span></span>  
  
-   <span data-ttu-id="fea60-207">Eine Transaktion mit langer Laufzeit kann dazu führen, dass der Sicherheitszeitstempel beliebig verzögert wird.</span><span class="sxs-lookup"><span data-stu-id="fea60-207">A long running transaction can cause the safe-timestamp to be delayed arbitrarily.</span></span>  <span data-ttu-id="fea60-208">Dies gilt auch für den Zugriff auf datenträgerbasierte Tabellen, da sich der Zeitstempel der Momentaufnahmeisolation nach dem Commit der ältesten Transaktion richtet.</span><span class="sxs-lookup"><span data-stu-id="fea60-208">This is no different when accessing disk-based tables as the timestamp of snapshot isolation is determined by the commit of oldest transaction.</span></span>  
  
-   <span data-ttu-id="fea60-209">Änderungen, die seit dem letzten Update des Sicherheitszeitstempels durch Transaktionen auf dem primären Replikat vorgenommen wurden, sind erst auf dem sekundären Replikat sichtbar, nachdem der Sicherheitszeitstempel das nächste Mal übertragen und aktualisiert wurde.</span><span class="sxs-lookup"><span data-stu-id="fea60-209">Changes made by transactions on the primary replica since the last safe-timestamp update are not visible on the secondary replica till the next transmission and update of the safe-timestamp.</span></span> <span data-ttu-id="fea60-210">Wenn die Transaktionsaktivitäten auf dem primären Replikat beendet werden, bevor der interne Schwellenwert für das Update des Sicherheitszeitstempels überschritten wird, sind die Änderungen seit dem letzten Update des Sicherheitszeitstempels auf dem sekundären Replikat nicht sichtbar.</span><span class="sxs-lookup"><span data-stu-id="fea60-210">If transactional activity on the primary replica stops before the internal threshold for safe-timestamp update is crossed, the changes made since the last update to safe-timestamp will not be visible on the secondary replica.</span></span> <span data-ttu-id="fea60-211">Um dieses Problem zu beheben, müssen Sie möglicherweise einige DML-Transaktionen für eine dauerhafte speicheroptimierte Pseudotabelle auf dem primären Replikat ausführen.</span><span class="sxs-lookup"><span data-stu-id="fea60-211">To alleviate this issue, you may need to run a few DML transactions on a dummy durable memory-optimized table on the primary replica.</span></span> <span data-ttu-id="fea60-212">Alternativ können Sie den Versand des Sicherheitszeitstempels erzwingen, indem Sie einen manuellen Prüfpunkt ausführen. Allerdings wird von dieser Vorgehensweise abgeraten.</span><span class="sxs-lookup"><span data-stu-id="fea60-212">Alternatively, though not recommended, you can force shipping of safe-timestamp by running a manual checkpoint.</span></span>  
  
#### <a name="monitoring-and-troubleshooting-data-latency-in-memory-optimized-tables"></a><span data-ttu-id="fea60-213">Überwachen der Datenlatenz und Behandeln von Datenlatenzproblemen in speicheroptimierten Tabellen</span><span class="sxs-lookup"><span data-stu-id="fea60-213">Monitoring and Troubleshooting data latency in memory-optimized tables</span></span>  
 <span data-ttu-id="fea60-214">Sie ermitteln den Sicherheitszeitstempel, indem Sie die folgende Abfrage auf dem primären Replikat ausführen.</span><span class="sxs-lookup"><span data-stu-id="fea60-214">You can find out the safe-timestamp by running the following query on the primary replica</span></span>  
  
```  
  
SELECT MAX(base_generation)   
   AS max_base_generation  
   FROM sys.dm_db_xtp_gc_cycle_stats  
GO  
  
```  
  
 <span data-ttu-id="fea60-215">Sie können den auf dem sekundären Replikat verwendeten Sicherheitszeitstempel auch ermitteln, indem Sie die folgende Abfrage gleichzeitig mit der aktiven Lesearbeitsauslastung ausführen.</span><span class="sxs-lookup"><span data-stu-id="fea60-215">You can also identify the safe-timestamp used on the secondary replica by running the following query concurrently with the active read-workload.</span></span>  
  
```  
  
SELECT begin_tsn   
   FROM sys.dm_db_xtp_transactions  
GO  
  
```  
  
###  <a name="read-only-workload-impact"></a><a name="ReadOnlyWorkloadImpact"></a> <span data-ttu-id="fea60-216">Auswirkungen auf schreibgeschützte Arbeitsauslastungen</span><span class="sxs-lookup"><span data-stu-id="fea60-216">Read-Only Workload Impact</span></span>  
 <span data-ttu-id="fea60-217">Wenn Sie ein sekundäres Replikat für schreibgeschützten Zugriff konfigurieren, belegen die schreibgeschützten Arbeitsauslastungen in den sekundären Datenbanken Systemressourcen, z. B. CPU und E/A-Vorgänge (für datenträgerbasierte Tabellen) aus REDO-Threads, insbesondere wenn die schreibgeschützten Arbeitsauslastungen für datenträgerbasierte Tabellen äußerst E/A-intensiv sind.</span><span class="sxs-lookup"><span data-stu-id="fea60-217">When you configure a secondary replica for read-only access, your read-only workloads on the secondary databases consume system resources, such as CPU and I/O (for disk-based tables) from redo threads, especially if the read-only workloads on disk-based tables are highly I/O-intensive.</span></span> <span data-ttu-id="fea60-218">Der Zugriff auf speicheroptimierte Tabellen hat keine Auswirkungen auf die E/A-Leistung, weil alle Zeilen im Arbeitsspeicher enthalten sind.</span><span class="sxs-lookup"><span data-stu-id="fea60-218">There is no IO impact when accessing memory-optimized tables because all the rows reside in memory.</span></span>  
  
 <span data-ttu-id="fea60-219">Schreibgeschützte Arbeitsauslastungen auf den sekundären Replikaten können zudem Änderungen der Datendefinitionssprache (DDL) blockieren, die durch Protokolldatensätze angewendet werden.</span><span class="sxs-lookup"><span data-stu-id="fea60-219">Also, read-only workloads on the secondary replicas can block data definition language (DDL) changes that are applied through log records.</span></span>  
  
-   <span data-ttu-id="fea60-220">Obwohl die Lesevorgänge wegen der Zeilenversionsverwaltung über keine gemeinsamen Sperren verfügen, basieren diese Vorgänge auf Schemastabilitätssperren (Sch-S). Dadurch werden u. U. REDO-Vorgänge blockiert, die DDL-Änderungen anwenden.</span><span class="sxs-lookup"><span data-stu-id="fea60-220">Even though the read operations do not take shared locks because of row versioning, these operations take schema stability (Sch-S) locks, which can block redo operations that are applying DDL changes.</span></span> <span data-ttu-id="fea60-221">DDL-Vorgänge umfassen ALTER/DROP-Tabellen und -Sichten, aber keine DROP- oder ALTER-Anweisungen gespeicherter Prozeduren.</span><span class="sxs-lookup"><span data-stu-id="fea60-221">DDL operations include ALTER/DROP tables and Views but not DROP or ALTER of stored procedures.</span></span> <span data-ttu-id="fea60-222">Angenommen, Sie löschen eine datenträgerbasierte oder speicheroptimierte Tabelle auf dem primären Replikat.</span><span class="sxs-lookup"><span data-stu-id="fea60-222">So for example, if you drop a table disk-based or memory-optimized, on primary.</span></span> <span data-ttu-id="fea60-223">Wenn der Protokolldatensatz von einem REDO-Thread verarbeitet wird, um die Tabelle zu löschen, muss er eine SCH_M-Sperre für die Tabelle abrufen und kann durch eine laufende Abfrage, die auf die Tabelle zugreift, blockiert werden.</span><span class="sxs-lookup"><span data-stu-id="fea60-223">When REDO thread processes the log record to drop the table, it must acquire a SCH_M lock on the table and can get blocked by a running query accessing table.</span></span>  <span data-ttu-id="fea60-224">Auf dem primärem Replikat ist das Verhalten identisch, mit der Ausnahme, dass die Tabelle im Rahmen einer Benutzersitzung und nicht in einem REDO-Thread gelöscht wird.</span><span class="sxs-lookup"><span data-stu-id="fea60-224">This is the same behavior on primary replica except that the drop of the table is done as part of a user session and not REDO thread.</span></span>  
  
-   <span data-ttu-id="fea60-225">Es gibt weitere Gründe für das Blockieren speicheroptimierter Tabellen.</span><span class="sxs-lookup"><span data-stu-id="fea60-225">There is additional blocking Memory-Optimized Tables.</span></span> <span data-ttu-id="fea60-226">Durch das Löschen einer systemeigenen gespeicherten Prozedur kann ein REDO-Thread blockiert werden, wenn die systemeigene gespeicherte Prozedur gleichzeitig auf dem sekundären Replikat ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="fea60-226">A drop of native stored procedure can cause REDO thread to block if there is a concurrent execution of the native stored procedure on the secondary replica.</span></span> <span data-ttu-id="fea60-227">Auf dem primärem Replikat ist das Verhalten identisch, mit der Ausnahme, dass die gespeicherte Prozedur im Rahmen einer Benutzersitzung und nicht in einem REDO-Thread gelöscht wird.</span><span class="sxs-lookup"><span data-stu-id="fea60-227">This is the same behavior on the primary replica except that the drop of the stored procedure is done as part of a user session and not REDO thread.</span></span>  
  
 <span data-ttu-id="fea60-228">Beachten Sie die bewährten Methoden zum Erstellen von Abfragen, und wenden Sie diese Methoden auf die sekundären Datenbanken an.</span><span class="sxs-lookup"><span data-stu-id="fea60-228">Be aware of best practices around building queries, and exercise those best practices in the secondary databases.</span></span> <span data-ttu-id="fea60-229">Planen Sie beispielsweise Abfragen mit langer Laufzeit wie Datenaggregationen in Zeiträumen mit geringer Aktivität.</span><span class="sxs-lookup"><span data-stu-id="fea60-229">For example, schedule long-running queries such as aggregations of data during times of low activity.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="fea60-230">Wird ein REDO-Thread von Abfragen auf dem sekundären Replikat blockiert, wird das XEvent **sqlserver.lock_redo_blocked** ausgelöst.</span><span class="sxs-lookup"><span data-stu-id="fea60-230">If a redo thread is blocked by queries on a secondary replica, the **sqlserver.lock_redo_blocked** XEvent is raised.</span></span>  
  
###  <a name="indexing"></a><a name="bkmk_Indexing"></a> <span data-ttu-id="fea60-231">Indizierung</span><span class="sxs-lookup"><span data-stu-id="fea60-231">Indexing</span></span>  
 <span data-ttu-id="fea60-232">Um schreibgeschützte Arbeitsauslastungen auf den lesbaren sekundären Replikaten zu optimieren, können Sie ggf. Indizes in den Tabellen der sekundären Datenbanken erstellen.</span><span class="sxs-lookup"><span data-stu-id="fea60-232">To optimize read-only workloads on the readable secondary replicas, you may want to create indexes on the tables in the secondary databases.</span></span> <span data-ttu-id="fea60-233">Da Sie keine Schema- oder Datenänderungen auf den sekundären Datenbanken vornehmen können, erstellen Sie Indizes in den primären Datenbanken, und lassen Sie die Übertragung der Änderungen auf die sekundäre Datenbank mittels REDO-Prozess zu.</span><span class="sxs-lookup"><span data-stu-id="fea60-233">Because you cannot make schema or data changes on the secondary databases, create indexes in the primary databases and allow the changes to transfer to the secondary database through the redo process.</span></span>  
  
 <span data-ttu-id="fea60-234">Zur Überwachung der Indexverwendung auf einem sekundären Replikat fragen Sie die Spalten **user_seeks**, **user_scans**und **user_lookups** der dynamischen Verwaltungssicht [sys.dm_db_index_usage_stats](/sql/relational-databases/system-dynamic-management-views/sys-dm-db-index-usage-stats-transact-sql) ab.</span><span class="sxs-lookup"><span data-stu-id="fea60-234">To monitor index usage activity on a secondary replica, query the **user_seeks**, **user_scans**, and **user_lookups** columns of the [sys.dm_db_index_usage_stats](/sql/relational-databases/system-dynamic-management-views/sys-dm-db-index-usage-stats-transact-sql) dynamic management view.</span></span>  
  
###  <a name="statistics-for-read-only-access-databases"></a><a name="Read-OnlyStats"></a> <span data-ttu-id="fea60-235">Statistiken für Datenbanken mit schreibgeschütztem Zugriff</span><span class="sxs-lookup"><span data-stu-id="fea60-235">Statistics for Read-Only Access Databases</span></span>  
 <span data-ttu-id="fea60-236">Statistiken zu Spalten von Tabellen und indizierten Sichten werden verwendet, um Abfragepläne zu optimieren.</span><span class="sxs-lookup"><span data-stu-id="fea60-236">Statistics on columns of tables and indexed views are used to optimize query plans.</span></span> <span data-ttu-id="fea60-237">Bei Verfügbarkeitsgruppen werden Statistiken, die in den primären Datenbanken erstellt und verwaltet werden, automatisch in den sekundären Datenbanken beibehalten, wenn die Transaktionsprotokoll-Datensätze angewendet werden.</span><span class="sxs-lookup"><span data-stu-id="fea60-237">For availability groups, statistics that are created and maintained on the primary databases are automatically persisted on the secondary databases as part of applying the transaction log records.</span></span> <span data-ttu-id="fea60-238">Für die schreibgeschützte Arbeitsauslastung in den sekundären Datenbanken sind jedoch möglicherweise andere Statistiken als die erforderlich, die in den primären Datenbanken erstellt werden.</span><span class="sxs-lookup"><span data-stu-id="fea60-238">However, the read-only workload on the secondary databases may need different statistics than those that are created on the primary databases.</span></span> <span data-ttu-id="fea60-239">Da sekundäre Datenbanken jedoch auf schreibgeschützten Zugriff beschränkt sind, können für die sekundären Datenbanken keine Statistiken erstellt werden.</span><span class="sxs-lookup"><span data-stu-id="fea60-239">However, because secondary databases are restricted to read-only access, statistics cannot be created on the secondary databases.</span></span>  
  
 <span data-ttu-id="fea60-240">Zur Behebung dieses Problems erstellt und verwaltet das sekundäre Replikat temporäre Statistiken für sekundäre Datenbanken in **tempdb**.</span><span class="sxs-lookup"><span data-stu-id="fea60-240">To address this problem, the secondary replica creates and maintains temporary statistics for secondary databases in **tempdb**.</span></span> <span data-ttu-id="fea60-241">Das Suffix „_readonly_database_statistic“ wird an den Namen temporärer Statistiken angefügt, um die temporären Statistiken von den dauerhaften Statistiken zu unterscheiden, die von der primären Datenbank beibehalten werden.</span><span class="sxs-lookup"><span data-stu-id="fea60-241">The suffix _readonly_database_statistic is appended to the name of temporary statistics to differentiate them from the permanent statistics that are persisted from the primary database.</span></span>  
  
 <span data-ttu-id="fea60-242">Nur [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] kann temporäre Statistiken erstellen und aktualisieren.</span><span class="sxs-lookup"><span data-stu-id="fea60-242">Only [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] can create and update temporary statistics.</span></span> <span data-ttu-id="fea60-243">Sie können jedoch temporäre Statistiken löschen und ihre Eigenschaften mit den gleichen Tools überwachen, die Sie für dauerhafte Statistiken verwenden:</span><span class="sxs-lookup"><span data-stu-id="fea60-243">However, you can delete temporary statistics and monitor their properties using the same tools that you use for permanent statistics:</span></span>  
  
-   <span data-ttu-id="fea60-244">Löschen Sie temporäre Statistiken mit der Anweisung [DROP STATISTICS](/sql/t-sql/statements/drop-statistics-transact-sql)[!INCLUDE[tsql](../../../includes/tsql-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="fea60-244">Delete temporary statistics using the [DROP STATISTICS](/sql/t-sql/statements/drop-statistics-transact-sql)[!INCLUDE[tsql](../../../includes/tsql-md.md)] statement.</span></span>  
  
-   <span data-ttu-id="fea60-245">Überwachen Sie Statistiken mit den Katalogsichten **sys.stats** und **sys.stats_columns** .</span><span class="sxs-lookup"><span data-stu-id="fea60-245">Monitor statistics using the **sys.stats** and **sys.stats_columns** catalog views.</span></span> <span data-ttu-id="fea60-246">**sys_stats** beinhaltet eine Spalte, **is_temporary**. Damit wird angegeben, welche Statistiken dauerhaft und welche temporär sind.</span><span class="sxs-lookup"><span data-stu-id="fea60-246">**sys_stats** includes a column, **is_temporary**, to indicate which statistics are permanent and which are temporary.</span></span>  
  
 <span data-ttu-id="fea60-247">Automatische Updates von Statistiken werden für speicheroptimierte Tabellen auf dem primären oder sekundären Replikat nicht unterstützt.</span><span class="sxs-lookup"><span data-stu-id="fea60-247">There is no support for auto-statistics update for memory-optimized tables on the primary or secondary replica.</span></span> <span data-ttu-id="fea60-248">Sie müssen die Abfrageleistung und Pläne auf dem sekundären Replikat überwachen und die Statistiken auf dem primären Replikat ggf. manuell aktualisieren.</span><span class="sxs-lookup"><span data-stu-id="fea60-248">You must monitor query performance and plans on the secondary replica and manually update the statistics on the primary replica when needed.</span></span> <span data-ttu-id="fea60-249">Allerdings werden die fehlenden Statistiken auf dem primären und sekundären Replikat automatisch erstellt.</span><span class="sxs-lookup"><span data-stu-id="fea60-249">However, the missing statistics are automatically created both on primary and secondary replica.</span></span>  
  
 <span data-ttu-id="fea60-250">Weitere Informationen zu SQL Server-Statistiken finden Sie unter [Statistik](../../../relational-databases/statistics/statistics.md).</span><span class="sxs-lookup"><span data-stu-id="fea60-250">For more information about SQL Server statistics, see [Statistics](../../../relational-databases/statistics/statistics.md).</span></span>  
  

  
####  <a name="stale-permanent-statistics-on-secondary-databases"></a><a name="StalePermStats"></a> <span data-ttu-id="fea60-251">Veraltete dauerhafte Statistiken in sekundären Datenbanken</span><span class="sxs-lookup"><span data-stu-id="fea60-251">Stale Permanent Statistics on Secondary Databases</span></span>  
 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] <span data-ttu-id="fea60-252">erkennt, wenn dauerhafte Statistiken in einer sekundären Datenbank veraltet sind.</span><span class="sxs-lookup"><span data-stu-id="fea60-252">detects when permanent statistics on a secondary database are stale.</span></span> <span data-ttu-id="fea60-253">Änderungen an den dauerhaften Statistiken können aber nur durch Änderungen an der primären Datenbank vorgenommen werden.</span><span class="sxs-lookup"><span data-stu-id="fea60-253">But changes cannot be made to the permanent statistics except through changes on the primary database.</span></span> <span data-ttu-id="fea60-254">Zur Abfrageoptimierung erstellt [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] temporäre Statistiken für datenträgerbasierte Tabellen in der sekundären Datenbank und verwendet diese Statistiken anstelle der veralteten dauerhaften Statistiken.</span><span class="sxs-lookup"><span data-stu-id="fea60-254">For query optimization, [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] creates temporary statistics for disk-based tables on the secondary database and uses these statistics instead of the stale permanent statistics.</span></span>  
  
 <span data-ttu-id="fea60-255">Wenn die dauerhaften Statistiken in der primären Datenbank aktualisiert werden, werden sie automatisch in der sekundären Datenbank dauerhaft gespeichert.</span><span class="sxs-lookup"><span data-stu-id="fea60-255">When the permanent statistics are updated on the primary database, they are automatically persisted to the secondary database.</span></span> <span data-ttu-id="fea60-256">Dann verwendet [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] die aktualisierten dauerhaften Statistiken, die aktueller als die temporären Statistiken sind.</span><span class="sxs-lookup"><span data-stu-id="fea60-256">Then [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] uses the updated permanent statistics, which are more current than the temporary statistics.</span></span>  
  
 <span data-ttu-id="fea60-257">Wenn die Verfügbarkeitsgruppe ein Failover ausführt, werden temporäre Statistiken auf allen sekundären Replikaten gelöscht.</span><span class="sxs-lookup"><span data-stu-id="fea60-257">If the availability group fails over, temporary statistics are deleted on all of the secondary replicas.</span></span>  
  
####  <a name="limitations-and-restrictions"></a><a name="StatsLimitationsRestrictions"></a> <span data-ttu-id="fea60-258">Einschränkungen</span><span class="sxs-lookup"><span data-stu-id="fea60-258">Limitations and Restrictions</span></span>  
  
-   <span data-ttu-id="fea60-259">Da temporäre Statistiken in **tempdb**gespeichert werden, werden durch einen Neustart des [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] -Diensts alle temporären Statistiken entfernt.</span><span class="sxs-lookup"><span data-stu-id="fea60-259">Because temporary statistics are stored in **tempdb**, a restart of the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] service causes all temporary statistics to disappear.</span></span>  
  
-   <span data-ttu-id="fea60-260">Das Suffix „_readonly_database_statistic“ ist für von [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]generierte Statistiken reserviert.</span><span class="sxs-lookup"><span data-stu-id="fea60-260">The suffix _readonly_database_statistic is reserved for statistics generated by [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="fea60-261">Sie können dieses Suffix nicht verwenden, wenn Sie Statistiken in einer primären Datenbank erstellen.</span><span class="sxs-lookup"><span data-stu-id="fea60-261">You cannot use this suffix when creating statistics on a primary database.</span></span> <span data-ttu-id="fea60-262">Weitere Informationen finden Sie unter [Verwalten von Statistiken für Tabellen in SQL Data Warehouse](../../../relational-databases/statistics/statistics.md).</span><span class="sxs-lookup"><span data-stu-id="fea60-262">For more information, see [Statistics](../../../relational-databases/statistics/statistics.md).</span></span>  
  
##  <a name="accessing-memory-optimized-tables-on-a-secondary-replica"></a><a name="bkmk_AccessInMemTables"></a> <span data-ttu-id="fea60-263">Zugreifen auf speicheroptimierte Tabellen auf einem sekundären Replikat</span><span class="sxs-lookup"><span data-stu-id="fea60-263">Accessing memory-optimized tables on a Secondary Replica</span></span>  
 <span data-ttu-id="fea60-264">Die Isolationsstufen für Lesearbeitsauslastungen auf einem sekundären Replikat entsprechen ausschließlich denen, die auf dem primären Replikat zulässig sind.</span><span class="sxs-lookup"><span data-stu-id="fea60-264">The read workload isolation levels on secondary replica are only those allowed on the primary replica.</span></span> <span data-ttu-id="fea60-265">Auf dem sekundären Replikat werden keine Isolationsstufen zugeordnet.</span><span class="sxs-lookup"><span data-stu-id="fea60-265">There is no mapping of isolations levels done on the secondary replica.</span></span> <span data-ttu-id="fea60-266">Dadurch wird sichergestellt, dass Arbeitsauslastungen für die Berichterstellung, die auf dem primären Replikat ausgeführt werden können, auf dem sekundären Replikat ausgeführt werden können, ohne dass Änderungen erforderlich sind.</span><span class="sxs-lookup"><span data-stu-id="fea60-266">This ensure that any reporting workload that can be run on primary replica is able to run on the secondary replica without requiring any changes.</span></span> <span data-ttu-id="fea60-267">Auf diese Weise können Arbeitsauslastungen für die Berichterstellung einfacher vom primären Replikat zu einem sekundären Replikat migriert werden, oder umgekehrt, wenn das sekundäre Replikat nicht verfügbar ist.</span><span class="sxs-lookup"><span data-stu-id="fea60-267">This makes it easy for you to migrate a reporting workload from the primary replica to a secondary or vice versa when the secondary replica is not available.</span></span>  
  
 <span data-ttu-id="fea60-268">Die folgenden Abfragen schlagen auf dem sekundären Replikat auf dieselbe Weise fehl wie auf dem primären Replikat.</span><span class="sxs-lookup"><span data-stu-id="fea60-268">The following queries fail to run on the secondary replica similarly to the way they fail on the primary replica.</span></span>  
  
-   <span data-ttu-id="fea60-269">Bei Abfragen, die nur für speicheroptimierte Tabellen ausgeführt werden, sind die einzigen unterstützten Isolationsstufen SNAPSHOT, REPEATABLE READ und SERIALIZABLE.</span><span class="sxs-lookup"><span data-stu-id="fea60-269">For queries running only on memory-optimized tables, the only supported isolation levels are snapshot, repeatable read, and serializable.</span></span> <span data-ttu-id="fea60-270">Alle Abfragen mit der Isolationsstufe READ UNCOMMITTED oder READ COMMITTED geben einen Fehler zurück, sofern nicht die Option MEMORY_OPTIMIZED_ELEVATE_TO_SNAPSHOT auf Datenbankebene aktiviert wurde.</span><span class="sxs-lookup"><span data-stu-id="fea60-270">Any queries with read-uncommitted or read committed isolation level returns an error unless you have enabled the option MEMORY_OPTIMIZED_ELEVATE_TO_SNAPSHOT at the database level.</span></span>  
  
    ```sql  
    SET TRANSACTION ISOLATION LEVEL READ_COMMITTED  
    -- This is not allowed  
    BEGIN TRAN  
    SELECT * FROM t_hk  
    COMMIT  
  
    ```  
  
     <span data-ttu-id="fea60-271">Fehlermeldung:</span><span class="sxs-lookup"><span data-stu-id="fea60-271">Error message:</span></span>  
  
    ```  
    Msg 41368, Level 16, State 0, Line 2  
    Accessing memory optimized tables using the CREAD_COMMITTED isolation level is supported only for autocommit transactions. It is not supported for explicit or implicit transactions. Provide a supported isolation level for the memory optimized table using a table hing, such as WITH (SNAPSHOT).  
    ```  
  
-   <span data-ttu-id="fea60-272">Für speicheroptimierte Tabellen werden keine Sperrhinweise unterstützt.</span><span class="sxs-lookup"><span data-stu-id="fea60-272">No locking hints are supported on memory-optimized tables.</span></span> <span data-ttu-id="fea60-273">Beispielsweise führen alle folgenden Abfragen zu einem Fehler.</span><span class="sxs-lookup"><span data-stu-id="fea60-273">For example, all of the following queries fail with an error.</span></span> <span data-ttu-id="fea60-274">Nur der NOLOCK-Hinweis ist zulässig. Bei der Verwendung für speicheroptimierte Tabellen lautet dieser NOOP.</span><span class="sxs-lookup"><span data-stu-id="fea60-274">Only NOLOCK hint is allowed and it is NOOP when used with memory-optimized tables.</span></span>  
  
    ```sql  
    SELECT * FROM t_hk WITH (PAGLOCK)  
    SELECT * FROM t_hk WITH (READPAST)  
    SELECT * FROM t_hk WITH (ROWLOCK)  
    SELECT * FROM t_hk WITH (READPAST)  
    SELECT * FROM t_hk WITH (TABLOCK)  
    SELECT * FROM t_hk WITH (XLOCK)  
    SELECT * FROM t_hk WITH (UPDLOCK)  
    ```  
  
-   <span data-ttu-id="fea60-275">Für Container übergreifende Transaktionen werden Transaktionen mit der Sitzungs Isolationsstufe "Snapshot", die auf Speicher optimierte Tabellen zugreifen, nicht unterstützt.</span><span class="sxs-lookup"><span data-stu-id="fea60-275">For cross-container transactions, transactions with session isolation level "snapshot" that access memory-optimized tables is not supported.</span></span> <span data-ttu-id="fea60-276">Ein auf ein Objekt angewendeter</span><span class="sxs-lookup"><span data-stu-id="fea60-276">For example,</span></span>  
  
    ```sql  
    SET TRANSACTION ISOLATION LEVEL SNAPSHOT  
    -- This is not allowed  
    BEGIN TRAN  
       SELECT * FROM t_hk  
    COMMIT  
    ```  
  
     <span data-ttu-id="fea60-277">Fehlermeldung:</span><span class="sxs-lookup"><span data-stu-id="fea60-277">Error message:</span></span>  
  
    ```  
    Msg 41332, Level 16, State 0, Line 5  
    Memory optimized tables and natively compiled stored procedures cannot be accessed or created when the session TRANSACTION ISOLATION LEVEL is set to SNAPSHOT.  
    ```  
  
##  <a name="capacity-planning-considerations"></a><a name="bkmk_CapacityPlanning"></a> <span data-ttu-id="fea60-278">Aspekte der Kapazitätsplanung</span><span class="sxs-lookup"><span data-stu-id="fea60-278">Capacity Planning Considerations</span></span>  
  
-   <span data-ttu-id="fea60-279">Bei datenträgerbasierten Tabellen können lesbare sekundäre Replikate aus zwei Gründen Speicherplatz in **tempdb** beanspruchen:</span><span class="sxs-lookup"><span data-stu-id="fea60-279">In the case of disk-based tables, readable secondary replicas can require space in **tempdb** for two reasons:</span></span>  
  
    -   <span data-ttu-id="fea60-280">In der Momentaufnahme-Isolationsstufe werden Zeilenversionen in **tempdb**kopiert.</span><span class="sxs-lookup"><span data-stu-id="fea60-280">Snapshot isolation level copies row versions into **tempdb**.</span></span>  
  
    -   <span data-ttu-id="fea60-281">Temporäre Statistiken für sekundäre Datenbanken werden in **tempdb**erstellt und verwaltet.</span><span class="sxs-lookup"><span data-stu-id="fea60-281">Temporary statistics for secondary databases are created and maintained in **tempdb**.</span></span> <span data-ttu-id="fea60-282">Die temporären Statistiken können einen leichten Anstieg der Größe von **tempdb**verursachen.</span><span class="sxs-lookup"><span data-stu-id="fea60-282">The temporary statistics can cause a slight increase in the size of **tempdb**.</span></span> <span data-ttu-id="fea60-283">Weitere Informationen finden Sie unter [Statistiken für Datenbanken mit schreibgeschütztem Zugriff](#Read-OnlyStats)später in diesem Abschnitt.</span><span class="sxs-lookup"><span data-stu-id="fea60-283">For more information, see [Statistics for Read-Only Access Databases](#Read-OnlyStats), later in this section.</span></span>  
  
-   <span data-ttu-id="fea60-284">Wenn Sie für eines oder mehrere sekundäre Replikate Lesezugriff konfigurieren, wird von den primären Datenbanken für gelöschte, geänderte oder eingefügte Datenzeilen beim Speichern von Zeigern auf Zeilenversionen in den sekundären Datenbanken für datenträgerbasierte Tabellen ein Mehraufwand von 14 Bytes verursacht.</span><span class="sxs-lookup"><span data-stu-id="fea60-284">When you configure read-access for one or more secondary replicas, the primary databases add 14 bytes of overhead on deleted, modified, or inserted data rows to store pointers to row versions on the secondary databases for disk-based tables.</span></span> <span data-ttu-id="fea60-285">Dieser Mehraufwand von 14 Bytes geht auf die sekundären Datenbanken über.</span><span class="sxs-lookup"><span data-stu-id="fea60-285">This 14-byte overhead is carried over to the secondary databases.</span></span> <span data-ttu-id="fea60-286">Da der Mehraufwand von 14 Bytes auf die Datenzeilen übertragen wird, können Seitenteilungen auftreten.</span><span class="sxs-lookup"><span data-stu-id="fea60-286">As the 14-byte overhead is added to data rows, page splits might occur.</span></span>  
  
     <span data-ttu-id="fea60-287">Die Zeilenversionsdaten werden nicht von den primären Datenbanken generiert.</span><span class="sxs-lookup"><span data-stu-id="fea60-287">The row version data is not generated by the primary databases.</span></span> <span data-ttu-id="fea60-288">Stattdessen werden die Zeilenversionen von den sekundären Datenbanken generiert.</span><span class="sxs-lookup"><span data-stu-id="fea60-288">Instead, the secondary databases generate the row versions.</span></span> <span data-ttu-id="fea60-289">Durch die Zeilenversionsverwaltung nimmt jedoch die Datenspeicherung in der primären und in der sekundären Datenbank zu.</span><span class="sxs-lookup"><span data-stu-id="fea60-289">However, row versioning increases data storage in both the primary and secondary databases.</span></span>  
  
     <span data-ttu-id="fea60-290">Das Hinzufügen der Zeilenversionsdaten hängt von der Momentaufnahmeisolation oder der Einstellung der READ_COMMITTED_SNAPSHOT-Isolationsstufe (RCSI) in der primären Datenbank ab.</span><span class="sxs-lookup"><span data-stu-id="fea60-290">The addition of the row version data depends on the snapshot isolation or read-committed snapshot isolation (RCSI) level setting on the primary database.</span></span> <span data-ttu-id="fea60-291">In der folgenden Tabelle wird das Verhalten der Versionsverwaltung in einer lesbaren sekundären Datenbank mit unterschiedlichen Einstellungen für datenträgerbasierte Tabellen beschrieben.</span><span class="sxs-lookup"><span data-stu-id="fea60-291">The table below describes the behavior of versioning on a readable secondary database under different settings for disk based tables.</span></span>  
  
    |<span data-ttu-id="fea60-292">Lesbares sekundäres Replikat?</span><span class="sxs-lookup"><span data-stu-id="fea60-292">Readable secondary replica?</span></span>|<span data-ttu-id="fea60-293">Ist Momentaufnahmeisolation oder RCSI-Stufe aktiviert?</span><span class="sxs-lookup"><span data-stu-id="fea60-293">Snapshot isolation or RCSI level enabled?</span></span>|<span data-ttu-id="fea60-294">Primäre Datenbank</span><span class="sxs-lookup"><span data-stu-id="fea60-294">Primary Database</span></span>|<span data-ttu-id="fea60-295">Sekundäre Datenbank</span><span class="sxs-lookup"><span data-stu-id="fea60-295">Secondary Database</span></span>|  
    |---------------------------------|-----------------------------------------------|----------------------|------------------------|  
    |<span data-ttu-id="fea60-296">Nein</span><span class="sxs-lookup"><span data-stu-id="fea60-296">No</span></span>|<span data-ttu-id="fea60-297">Nein</span><span class="sxs-lookup"><span data-stu-id="fea60-297">No</span></span>|<span data-ttu-id="fea60-298">Keine Zeilenversionen oder 14-Byte-Mehraufwand</span><span class="sxs-lookup"><span data-stu-id="fea60-298">No row versions or 14-byte overhead</span></span>|<span data-ttu-id="fea60-299">Keine Zeilenversionen oder 14-Byte-Mehraufwand</span><span class="sxs-lookup"><span data-stu-id="fea60-299">No row versions or 14-byte overhead</span></span>|  
    |<span data-ttu-id="fea60-300">Nein</span><span class="sxs-lookup"><span data-stu-id="fea60-300">No</span></span>|<span data-ttu-id="fea60-301">Ja</span><span class="sxs-lookup"><span data-stu-id="fea60-301">Yes</span></span>|<span data-ttu-id="fea60-302">Zeilenversionen und 14-Byte-Mehraufwand</span><span class="sxs-lookup"><span data-stu-id="fea60-302">Row versions and 14-byte overhead</span></span>|<span data-ttu-id="fea60-303">Keine Zeilenversionen, aber 14-Byte-Mehraufwand</span><span class="sxs-lookup"><span data-stu-id="fea60-303">No row versions, but 14-byte overhead</span></span>|  
    |<span data-ttu-id="fea60-304">Ja</span><span class="sxs-lookup"><span data-stu-id="fea60-304">Yes</span></span>|<span data-ttu-id="fea60-305">Nein</span><span class="sxs-lookup"><span data-stu-id="fea60-305">No</span></span>|<span data-ttu-id="fea60-306">Keine Zeilenversionen, aber 14-Byte-Mehraufwand</span><span class="sxs-lookup"><span data-stu-id="fea60-306">No row versions, but 14-byte overhead</span></span>|<span data-ttu-id="fea60-307">Zeilenversionen und 14-Byte-Mehraufwand</span><span class="sxs-lookup"><span data-stu-id="fea60-307">Row versions and 14-byte overhead</span></span>|  
    |<span data-ttu-id="fea60-308">Ja</span><span class="sxs-lookup"><span data-stu-id="fea60-308">Yes</span></span>|<span data-ttu-id="fea60-309">Ja</span><span class="sxs-lookup"><span data-stu-id="fea60-309">Yes</span></span>|<span data-ttu-id="fea60-310">Zeilenversionen und 14-Byte-Mehraufwand</span><span class="sxs-lookup"><span data-stu-id="fea60-310">Row versions and 14-byte overhead</span></span>|<span data-ttu-id="fea60-311">Zeilenversionen und 14-Byte-Mehraufwand</span><span class="sxs-lookup"><span data-stu-id="fea60-311">Row versions and 14-byte overhead</span></span>|  
  
##  <a name="related-tasks"></a><a name="bkmk_RelatedTasks"></a> <span data-ttu-id="fea60-312">Verwandte Aufgaben</span><span class="sxs-lookup"><span data-stu-id="fea60-312">Related Tasks</span></span>  
  
-   [<span data-ttu-id="fea60-313">Konfigurieren des schreibgeschützten Zugriffs auf ein Verfügbarkeitsreplikat &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="fea60-313">Configure Read-Only Access on an Availability Replica &#40;SQL Server&#41;</span></span>](configure-read-only-access-on-an-availability-replica-sql-server.md)  
  
-   [<span data-ttu-id="fea60-314">Konfigurieren des schreibgeschützten Routing für eine Verfügbarkeitsgruppe &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="fea60-314">Configure Read-Only Routing for an Availability Group &#40;SQL Server&#41;</span></span>](configure-read-only-routing-for-an-availability-group-sql-server.md)  
  
-   [<span data-ttu-id="fea60-315">Erstellen oder Konfigurieren eines Verfügbarkeitsgruppenlisteners &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="fea60-315">Create or Configure an Availability Group Listener &#40;SQL Server&#41;</span></span>](create-or-configure-an-availability-group-listener-sql-server.md)  
  
-   [<span data-ttu-id="fea60-316">Überwachen von Verfügbarkeitsgruppen &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="fea60-316">Monitor Availability Groups &#40;Transact-SQL&#41;</span></span>](monitor-availability-groups-transact-sql.md)  
  
-   [<span data-ttu-id="fea60-317">Anzeigen von Verfügbarkeitsreplikateigenschaften &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="fea60-317">View Availability Replica Properties &#40;SQL Server&#41;</span></span>](view-availability-replica-properties-sql-server.md)  
  
-   [<span data-ttu-id="fea60-318">Verwenden des Dialogfelds Neue Verfügbarkeitsgruppe &#40;SQL Server Management Studio&#41;</span><span class="sxs-lookup"><span data-stu-id="fea60-318">Use the New Availability Group Dialog Box &#40;SQL Server Management Studio&#41;</span></span>](use-the-new-availability-group-dialog-box-sql-server-management-studio.md)  
  
##  <a name="related-content"></a><a name="RelatedContent"></a> <span data-ttu-id="fea60-319">Verwandte Inhalte</span><span class="sxs-lookup"><span data-stu-id="fea60-319">Related Content</span></span>  
  
-   [<span data-ttu-id="fea60-320">SQL Server AlwaysOn-Teamblog: Der offizielle SQL Server AlwaysOn-Teamblog</span><span class="sxs-lookup"><span data-stu-id="fea60-320">SQL Server AlwaysOn Team Blog: The official SQL Server AlwaysOn Team Blog</span></span>](https://blogs.msdn.com/b/sqlalwayson/)  
  
## <a name="see-also"></a><span data-ttu-id="fea60-321">Weitere Informationen</span><span class="sxs-lookup"><span data-stu-id="fea60-321">See Also</span></span>  
 <span data-ttu-id="fea60-322">[Übersicht über AlwaysOn-Verfügbarkeitsgruppen &#40;SQL Server&#41;](overview-of-always-on-availability-groups-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="fea60-322">[Overview of AlwaysOn Availability Groups &#40;SQL Server&#41;](overview-of-always-on-availability-groups-sql-server.md) </span></span>  
 <span data-ttu-id="fea60-323">[Informationen zum Clientverbindungszugriff auf Verfügbarkeitsreplikate &#40;SQL Server&#41;](about-client-connection-access-to-availability-replicas-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="fea60-323">[About Client Connection Access to Availability Replicas &#40;SQL Server&#41;](about-client-connection-access-to-availability-replicas-sql-server.md) </span></span>  
 <span data-ttu-id="fea60-324">[Verfügbarkeitsgruppenlistener, Clientkonnektivität und Anwendungsfailover &#40;SQL Server&#41;](../../listeners-client-connectivity-application-failover.md) </span><span class="sxs-lookup"><span data-stu-id="fea60-324">[Availability Group Listeners, Client Connectivity, and Application Failover &#40;SQL Server&#41;](../../listeners-client-connectivity-application-failover.md) </span></span>  
 [<span data-ttu-id="fea60-325">Statistik</span><span class="sxs-lookup"><span data-stu-id="fea60-325">Statistics</span></span>](../../../relational-databases/statistics/statistics.md)  
  
  
