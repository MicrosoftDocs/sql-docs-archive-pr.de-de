---
title: Analysis Services mit Always On-Verfügbarkeitsgruppen | Microsoft-Dokumentation
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: high-availability
ms.topic: conceptual
ms.assetid: 14d16bfd-228c-4870-b463-a283facda965
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: 9ea0c7f30fd8f431f70284122df7e2a036658f4e
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 08/04/2020
ms.locfileid: "87608878"
---
# <a name="analysis-services-with-always-on-availability-groups"></a><span data-ttu-id="4c89e-102">Analysis Services mit Always On-Verfügbarkeitsgruppen</span><span class="sxs-lookup"><span data-stu-id="4c89e-102">Analysis Services with Always On Availability Groups</span></span>
  <span data-ttu-id="4c89e-103">Eine AlwaysOn-Verfügbarkeitsgruppe ist eine vordefinierte Auflistung relationaler SQL Server-Datenbanken, für die gemeinsam ein Failover erfolgt, wenn Bedingungen in einer der Datenbanken ein Failover auslösen. Dabei werden Anforderungen an eine gespiegelte Datenbank in einer anderen Instanz in der gleichen Verfügbarkeitsgruppe umgeleitet.</span><span class="sxs-lookup"><span data-stu-id="4c89e-103">An AlwaysOn availability group is a predefined collection of SQL Server relational databases that failover together when conditions trigger a failover in any one database, redirecting requests to a mirrored database on another instance in the same availability group.</span></span> <span data-ttu-id="4c89e-104">Wenn Sie als Hochverfügbarkeitslösung Verfügbarkeitsgruppen verwenden, können Sie in einer tabellarischen oder mehrdimensionalen Analysis Services-Lösung eine Datenbank in dieser Gruppe als Datenquelle verwenden.</span><span class="sxs-lookup"><span data-stu-id="4c89e-104">If you are using availability groups as your high availability solution, you can use a database in that group as a data source in an Analysis Services tabular or multidimensional solution.</span></span> <span data-ttu-id="4c89e-105">Alle folgenden Analysis Services-Vorgänge werden bei Verwendung einer Verfügbarkeitsdatenbank wie erwartet ausgeführt: das Verarbeiten oder Importieren von Daten, das direkte Abfragen von relationalen Daten (im ROLAP-Speichermodus oder DirectQuery-Modus) und das Rückschreiben.</span><span class="sxs-lookup"><span data-stu-id="4c89e-105">All of the following Analysis Services operations work as expected when using an availability database: processing or importing data, querying relational data directly (using ROLAP storage or DirectQuery mode), and writeback.</span></span>  
  
 <span data-ttu-id="4c89e-106">Das Verarbeiten und Abfragen sind schreibgeschützte Arbeitsauslastungen.</span><span class="sxs-lookup"><span data-stu-id="4c89e-106">Processing and querying are read-only workloads.</span></span> <span data-ttu-id="4c89e-107">Sie können die Leistung verbessern, indem Sie diese Arbeitsauslastungen in ein lesbares sekundäres Replikat auslagern.</span><span class="sxs-lookup"><span data-stu-id="4c89e-107">You can improve performance by offloading these workloads to a readable secondary replica.</span></span> <span data-ttu-id="4c89e-108">Dieses Szenario erfordert zusätzliche Konfiguration.</span><span class="sxs-lookup"><span data-stu-id="4c89e-108">Additional configuration is required for this scenario.</span></span> <span data-ttu-id="4c89e-109">Stellen Sie mithilfe der Prüfliste in diesem Thema sicher, dass Sie alle Schritte ausführen.</span><span class="sxs-lookup"><span data-stu-id="4c89e-109">Use the checklist in this topic to ensure you follow all the steps.</span></span>  
  
  
##  <a name="prerequisites"></a><a name="bkmk_prereq"></a> <span data-ttu-id="4c89e-110">Voraussetzungen</span><span class="sxs-lookup"><span data-stu-id="4c89e-110">Prerequisites</span></span>  
 <span data-ttu-id="4c89e-111">Sie benötigen auf allen Replikaten eine SQL Server-Anmeldung.</span><span class="sxs-lookup"><span data-stu-id="4c89e-111">You must have a SQL Server login on all replicas.</span></span> <span data-ttu-id="4c89e-112">Verfügbarkeitsgruppen, Listener und Datenbanken müssen von einem Mitglied der **sysadmin** -Rolle konfiguriert werden. Benutzer benötigen jedoch für den Zugriff auf die Datenbank von einem Analysis Services-Client aus lediglich **db_datareader** -Berechtigungen.</span><span class="sxs-lookup"><span data-stu-id="4c89e-112">You must be a **sysadmin** to configure availability groups, listeners, and databases, but users only need **db_datareader** permissions to access the database from an Analysis Services client.</span></span>  
  
 <span data-ttu-id="4c89e-113">Verwenden Sie einen Datenanbieter, der das TDS (Tabular Data Stream)-Protokoll, Version 7.4 oder höher, unterstützt, z. B. SQL Server Native Client 11.0 oder den Datenanbieter für SQL Server in .NET Framework 4.02.</span><span class="sxs-lookup"><span data-stu-id="4c89e-113">Use a data provider that supports the tabular data stream (TDS) protocol version 7.4 or newer, such as the SQL Server Native Client 11.0 or the Data Provider for SQL Server in .NET Framework 4.02.</span></span>  
  
 <span data-ttu-id="4c89e-114">**(Für schreibgeschützte Arbeitsauslastungen)**.</span><span class="sxs-lookup"><span data-stu-id="4c89e-114">**(For read-only workloads)**.</span></span> <span data-ttu-id="4c89e-115">Die sekundäre Replikatrolle muss für schreibgeschützte Verbindungen konfiguriert sein, die Verfügbarkeitsgruppe muss über eine Routingliste verfügen, und die Verbindung in der Analysis Services-Datenquelle muss den Verfügbarkeitsgruppenlistener angeben.</span><span class="sxs-lookup"><span data-stu-id="4c89e-115">The secondary replica role must be configured for read-only connections, the availability group must have a routing list, and the connection in the Analysis Services data source must specify the availability group listener.</span></span> <span data-ttu-id="4c89e-116">In diesem Thema finden Sie Anweisungen.</span><span class="sxs-lookup"><span data-stu-id="4c89e-116">Instructions are provided in this topic.</span></span>  
  
##  <a name="checklist-use-a-secondary-replica-for-read-only-operations"></a><a name="bkmk_UseSecondary"></a> <span data-ttu-id="4c89e-117">Prüfliste: Verwenden eines sekundären Replikats für schreibgeschützte Vorgänge</span><span class="sxs-lookup"><span data-stu-id="4c89e-117">Checklist: Use a secondary replica for read-only operations</span></span>  
 <span data-ttu-id="4c89e-118">Wenn die Analysis Services-Lösung kein Rückschreiben umfasst, können Sie eine Datenquellenverbindung zum Verwenden eines lesbaren sekundären Replikats konfigurieren.</span><span class="sxs-lookup"><span data-stu-id="4c89e-118">Unless your Analysis Services solution includes writeback, you can configure a data source connection to use a readable secondary replica.</span></span> <span data-ttu-id="4c89e-119">Wenn Sie über eine schnelle Netzwerkverbindung verfügen, weist das sekundäre Replikat eine sehr geringe Datenlatenz auf und stellt nahezu die gleichen Daten wie das primäre Replikat bereit.</span><span class="sxs-lookup"><span data-stu-id="4c89e-119">If you have a fast network connection, the secondary replica has very low data latency, providing nearly identical data as the primary replica.</span></span> <span data-ttu-id="4c89e-120">Mit dem sekundären Replikat für Analysis Services-Vorgänge können Sie Lese-/Schreibkonflikte auf dem primären Replikat reduzieren und eine bessere Auslastung sekundärer Replikate in der Verfügbarkeitsgruppe erzielen.</span><span class="sxs-lookup"><span data-stu-id="4c89e-120">By using the secondary replica for Analysis Services operations, you can reduce read-write contention on the primary replica and get better utilization of secondary replicas in your availability group.</span></span>  
  
 <span data-ttu-id="4c89e-121">Standardmäßig sind sowohl der Lese-/Schreibzugriff als auch der Zugriff für beabsichtigte Lesevorgänge für das primäre Replikat zulässig, und es werden keine Verbindungen mit sekundären Replikaten zugelassen.</span><span class="sxs-lookup"><span data-stu-id="4c89e-121">By default, both read-write and read-intent access are allowed to the primary replica and no connections are allowed to secondary replicas.</span></span> <span data-ttu-id="4c89e-122">Das Einrichten einer schreibgeschützten Clientverbindung mit einem sekundären Replikat erfordert zusätzliche Konfiguration.</span><span class="sxs-lookup"><span data-stu-id="4c89e-122">Additional configuration is required to set up a read-only client connection to a secondary replica.</span></span> <span data-ttu-id="4c89e-123">Bei der Konfiguration müssen Eigenschaften auf dem sekundären Replikat festgelegt und ein T-SQL-Skript ausgeführt werden, das eine schreibgeschützte Routingliste definiert.</span><span class="sxs-lookup"><span data-stu-id="4c89e-123">Configuration requires setting properties on the secondary replica and running a T-SQL script that defines a read-only routing list.</span></span> <span data-ttu-id="4c89e-124">Stellen Sie mithilfe der folgenden Verfahren sicher, dass Sie beide Schritte ausgeführt haben.</span><span class="sxs-lookup"><span data-stu-id="4c89e-124">Use the following procedures to ensure you have performed both steps.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="4c89e-125">Für die folgenden Schritte werden eine vorhandene AlwaysOn-Verfügbarkeitsgruppe und vorhandene Datenbanken vorausgesetzt.</span><span class="sxs-lookup"><span data-stu-id="4c89e-125">The following steps assume an existing AlwaysOn availability group and databases.</span></span> <span data-ttu-id="4c89e-126">Wenn Sie eine neue Gruppe konfigurieren, verwenden Sie den Assistenten für neue Verfügbarkeitsgruppen, um die Gruppe zu erstellen und die Datenbanken zu verknüpfen.</span><span class="sxs-lookup"><span data-stu-id="4c89e-126">If you are configuring a new group, use the New Availability Group Wizard to create the group and join the databases.</span></span> <span data-ttu-id="4c89e-127">Der Assistent überprüft, ob die Voraussetzungen erfüllt sind, bietet Anleitungen für die einzelnen Schritte und führt die Erstsynchronisierung aus.</span><span class="sxs-lookup"><span data-stu-id="4c89e-127">The wizard checks for prerequisites, provides guidance for each step, and performs the initial synchronization.</span></span> <span data-ttu-id="4c89e-128">Weitere Informationen finden Sie unter [Verwenden des Assistenten für Verfügbarkeitsgruppen &#40;SQL Server Management Studio&#41;](use-the-availability-group-wizard-sql-server-management-studio.md).</span><span class="sxs-lookup"><span data-stu-id="4c89e-128">For more information, see [Use the Availability Group Wizard &#40;SQL Server Management Studio&#41;](use-the-availability-group-wizard-sql-server-management-studio.md).</span></span>  
  
#### <a name="step-1-configure-access-on-an-availability-replica"></a><span data-ttu-id="4c89e-129">Schritt 1: Konfigurieren des Zugriffs auf ein Verfügbarkeitsreplikat</span><span class="sxs-lookup"><span data-stu-id="4c89e-129">Step 1: Configure access on an availability replica</span></span>  
  
1.  <span data-ttu-id="4c89e-130">Stellen Sie im Objekt-Explorer eine Verbindung mit der Serverinstanz her, die das primäre Verfügbarkeitsreplikat hostet, und erweitern Sie die Serverstruktur.</span><span class="sxs-lookup"><span data-stu-id="4c89e-130">In Object Explorer, connect to the server instance that hosts the primary replica, and expand the server tree.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="4c89e-131">Diese Schritte sind unter [Konfigurieren des schreibgeschützten Zugriffs auf ein Verfügbarkeitsreplikat &#40;SQL Server&#41;](configure-read-only-access-on-an-availability-replica-sql-server.md) beschrieben. Dort finden Sie weitere Informationen und alternative Anweisungen zum Ausführen dieser Aufgabe.</span><span class="sxs-lookup"><span data-stu-id="4c89e-131">These steps are taken from [Configure Read-Only Access on an Availability Replica &#40;SQL Server&#41;](configure-read-only-access-on-an-availability-replica-sql-server.md), which provides additional information and alternative instructions for performing this task.</span></span>  
  
2.  <span data-ttu-id="4c89e-132">Erweitern Sie den Knoten **Hohe Verfügbarkeit (immer aktiviert)** und den Knoten **Verfügbarkeitsgruppen** .</span><span class="sxs-lookup"><span data-stu-id="4c89e-132">Expand the **AlwaysOn High Availability** node and the **Availability Groups** node.</span></span>  
  
3.  <span data-ttu-id="4c89e-133">Klicken Sie auf die Verfügbarkeitsgruppe, deren Replikat geändert werden soll.</span><span class="sxs-lookup"><span data-stu-id="4c89e-133">Click the availability group whose replica you want to change.</span></span> <span data-ttu-id="4c89e-134">Erweitern Sie **Verfügbarkeitsreplikate**.</span><span class="sxs-lookup"><span data-stu-id="4c89e-134">Expand **Availability Replicas**.</span></span>  
  
4.  <span data-ttu-id="4c89e-135">Klicken Sie mit der rechten Maustaste auf das sekundäre Replikat, und klicken Sie auf **Eigenschaften**.</span><span class="sxs-lookup"><span data-stu-id="4c89e-135">Right-click the secondary replica, and click **Properties**.</span></span>  
  
5.  <span data-ttu-id="4c89e-136">Ändern Sie im Dialogfeld **Eigenschaften des Verfügbarkeitsreplikats** den Verbindungszugriff für die sekundäre Rolle wie folgt:</span><span class="sxs-lookup"><span data-stu-id="4c89e-136">In the **Availability Replica Properties** dialog box, change the connection access for the secondary role, as follows:</span></span>  
  
    -   <span data-ttu-id="4c89e-137">Wählen Sie in der Dropdownliste **Lesbare sekundäre Rolle** den Eintrag **Nur beabsichtigte Lesevorgänge**aus.</span><span class="sxs-lookup"><span data-stu-id="4c89e-137">In the **Readable secondary** drop list, select **Read-intent only**.</span></span>  
  
    -   <span data-ttu-id="4c89e-138">Wählen Sie in der Dropdownliste **Verbindungen in primärer Rolle** den Eintrag **Alle Verbindungen zulassen**aus.</span><span class="sxs-lookup"><span data-stu-id="4c89e-138">In the **Connections in primary role** drop list, select **Allow all connections**.</span></span> <span data-ttu-id="4c89e-139">Dies ist die Standardeinstellung.</span><span class="sxs-lookup"><span data-stu-id="4c89e-139">This is the default.</span></span>  
  
    -   <span data-ttu-id="4c89e-140">Optional können Sie in der Dropdownliste **Verfügbarkeitsmodus** den Eintrag **Synchroner Commit**auswählen.</span><span class="sxs-lookup"><span data-stu-id="4c89e-140">Optionally, in **Availability mode** drop list, select **Synchronous commit**.</span></span> <span data-ttu-id="4c89e-141">Dieser Schritt ist nicht erforderlich, jedoch wird durch das Festlegen dieser Option Datenparität zwischen dem primären und sekundären Replikat sichergestellt.</span><span class="sxs-lookup"><span data-stu-id="4c89e-141">This step is not required, but setting it ensures that there is data parity between the primary and secondary replica.</span></span>  
  
         <span data-ttu-id="4c89e-142">Diese Eigenschaft ist auch eine Voraussetzung für geplantes Failover.</span><span class="sxs-lookup"><span data-stu-id="4c89e-142">This property is also a requirement for planned failover.</span></span> <span data-ttu-id="4c89e-143">Wenn Sie zu Testzwecken ein geplantes manuelles Failover ausführen möchten, legen Sie für das primäre und das sekundäre Replikat **Verfügbarkeitsmodus** auf **Synchroner Commit** fest.</span><span class="sxs-lookup"><span data-stu-id="4c89e-143">If you want to perform a planned manual failover for testing purposes, set **Availability mode** to **Synchronous commit** for both the primary and secondary replica.</span></span>  
  
#### <a name="step-2-configure-read-only-routing"></a><span data-ttu-id="4c89e-144">Schritt 2: Konfigurieren von schreibgeschütztem Routing</span><span class="sxs-lookup"><span data-stu-id="4c89e-144">Step 2: Configure read-only routing</span></span>  
  
1.  <span data-ttu-id="4c89e-145">Stellen Sie eine Verbindung mit dem primären Replikat her.</span><span class="sxs-lookup"><span data-stu-id="4c89e-145">Connect to the primary replica.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="4c89e-146">Diese Schritte sind unter [Konfigurieren des schreibgeschützten Routing für eine Verfügbarkeitsgruppe &#40;SQL Server&#41;](configure-read-only-routing-for-an-availability-group-sql-server.md) beschrieben. Dort finden Sie weitere Informationen und alternative Anweisungen zum Ausführen dieser Aufgabe.</span><span class="sxs-lookup"><span data-stu-id="4c89e-146">These steps are taken from [Configure Read-Only Routing for an Availability Group &#40;SQL Server&#41;](configure-read-only-routing-for-an-availability-group-sql-server.md), which provides additional information and alternative instructions for performing this task.</span></span>  
  
2.  <span data-ttu-id="4c89e-147">Öffnen Sie ein Abfragefenster, und fügen Sie das folgende Skript ein.</span><span class="sxs-lookup"><span data-stu-id="4c89e-147">Open a query window and paste in the following script.</span></span> <span data-ttu-id="4c89e-148">Dieses Skript führt drei Aufgaben aus: Es aktiviert lesbare Verbindungen mit einem sekundären Replikat (standardmäßig deaktiviert), legt die URL für das schreibgeschützte Routing fest und erstellt die Routingliste, in der die Priorisierung der Weiterleitung von Verbindungsanforderungen festgelegt ist.</span><span class="sxs-lookup"><span data-stu-id="4c89e-148">This script does three things: enables readable connections to a secondary replica (which is off by default), sets the read-only routing URL, and creates the routing list that prioritizes how connection requests are directed.</span></span>  <span data-ttu-id="4c89e-149">Die erste Anweisung, die lesbare Verbindungen zulässt, ist redundant, wenn Sie die Eigenschaften bereits in [!INCLUDE[ssManStudio](../../../includes/ssmanstudio-md.md)]festgelegt haben, sie wird jedoch der Vollständigkeit halber aufgeführt.</span><span class="sxs-lookup"><span data-stu-id="4c89e-149">The first statement, allowing readable connections, is redundant if you already set the properties in [!INCLUDE[ssManStudio](../../../includes/ssmanstudio-md.md)], but are included for completeness.</span></span>  
  
    ```  
    ALTER AVAILABILITY GROUP [AG1]  
     MODIFY REPLICA ON  
    N'COMPUTER01' WITH   
    (SECONDARY_ROLE (ALLOW_CONNECTIONS = READ_ONLY));  
  
    ALTER AVAILABILITY GROUP [AG1]  
     MODIFY REPLICA ON  
    N'COMPUTER01' WITH   
    (SECONDARY_ROLE (READ_ONLY_ROUTING_URL = N'TCP://COMPUTER01.contoso.com:1433'));  
  
    ALTER AVAILABILITY GROUP [AG1]  
     MODIFY REPLICA ON  
    N'COMPUTER02' WITH   
    (SECONDARY_ROLE (ALLOW_CONNECTIONS = READ_ONLY));  
  
    ALTER AVAILABILITY GROUP [AG1]  
     MODIFY REPLICA ON  
    N'COMPUTER02' WITH   
    (SECONDARY_ROLE (READ_ONLY_ROUTING_URL = N'TCP://COMPUTER02.contoso.com:1433'));  
  
    ALTER AVAILABILITY GROUP [AG1]   
    MODIFY REPLICA ON  
    N'COMPUTER01' WITH   
    (PRIMARY_ROLE (READ_ONLY_ROUTING_LIST=('COMPUTER02','COMPUTER01')));  
  
    ALTER AVAILABILITY GROUP [AG1]   
    MODIFY REPLICA ON  
    N'COMPUTER02' WITH   
    (PRIMARY_ROLE (READ_ONLY_ROUTING_LIST=('COMPUTER01','COMPUTER02')));  
    GO  
    ```  
  
3.  <span data-ttu-id="4c89e-150">Ändern Sie das Skript, und ersetzen Sie die Platzhalter durch gültige Werte für Ihre Bereitstellung:</span><span class="sxs-lookup"><span data-stu-id="4c89e-150">Modify the script, replacing placeholders with values that are valid for your deployment:</span></span>  
  
    -   <span data-ttu-id="4c89e-151">Ersetzen Sie 'COMPUTER01' durch den Namen der Serverinstanz, die das primäre Replikat hostet.</span><span class="sxs-lookup"><span data-stu-id="4c89e-151">Replace 'Computer01' with the name of the server instance that hosts the primary replica.</span></span>  
  
    -   <span data-ttu-id="4c89e-152">Ersetzen Sie 'COMPUTER02' durch den Namen der Serverinstanz, die das sekundäre Replikat hostet.</span><span class="sxs-lookup"><span data-stu-id="4c89e-152">Replace 'Computer02' with the name of the server instance that hosts the secondary replica.</span></span>  
  
    -   <span data-ttu-id="4c89e-153">Ersetzen Sie 'contoso.com' durch den Namen der Domäne, oder lassen Sie den Namen aus dem Skript aus, wenn sich alle Computer in der gleichen Domäne befinden.</span><span class="sxs-lookup"><span data-stu-id="4c89e-153">Replace 'contoso.com' with the name of your domain, or omit it from the script if all computers are in the same domain.</span></span> <span data-ttu-id="4c89e-154">Behalten Sie die Portnummer bei, wenn der Listener den Standardport verwendet.</span><span class="sxs-lookup"><span data-stu-id="4c89e-154">Keep the port number if the listener is using the default port.</span></span> <span data-ttu-id="4c89e-155">Der tatsächlich vom Listener verwendete Port ist auf der Eigenschaftenseite in [!INCLUDE[ssManStudio](../../../includes/ssmanstudio-md.md)]aufgeführt.</span><span class="sxs-lookup"><span data-stu-id="4c89e-155">The port that is actually used by the listener is listed in the properties page in [!INCLUDE[ssManStudio](../../../includes/ssmanstudio-md.md)].</span></span>  
  
4.  <span data-ttu-id="4c89e-156">Führen Sie das Skript aus.</span><span class="sxs-lookup"><span data-stu-id="4c89e-156">Execute the script.</span></span>  
  
     <span data-ttu-id="4c89e-157">Erstellen Sie anschließend eine Datenquelle in einem Analysis Services-Modell, die eine Datenbank aus der soeben von Ihnen konfigurierten Gruppe verwendet.</span><span class="sxs-lookup"><span data-stu-id="4c89e-157">Next, create a data source in an Analysis Services model that uses a database from the group you just configured.</span></span>  
  
##  <a name="create-an-analysis-services-data-source-using-an-alwayson-availability-database"></a><a name="bkmk_ssasAODB"></a><span data-ttu-id="4c89e-158">Erstellen einer Analysis Services Datenquelle mithilfe einer AlwaysOn-Verfügbarkeits Datenbank</span><span class="sxs-lookup"><span data-stu-id="4c89e-158">Create an Analysis Services data source using an AlwaysOn availability database</span></span>  
 <span data-ttu-id="4c89e-159">In diesem Abschnitt wird das Erstellen einer Analysis Services-Datenquelle beschrieben, die eine Verbindung mit einer Datenbank in einer Verfügbarkeitsgruppe herstellt.</span><span class="sxs-lookup"><span data-stu-id="4c89e-159">This section explains how to create an Analysis Services data source that connects to a database in an availability group.</span></span> <span data-ttu-id="4c89e-160">Sie können mithilfe dieser Anweisungen eine Verbindung mit einem primären Replikat (Standard) oder einem lesbaren sekundären Replikat konfigurieren, das Sie mit Schritten in einem vorherigen Abschnitt konfiguriert haben.</span><span class="sxs-lookup"><span data-stu-id="4c89e-160">You can use these instructions to configure a connection to either a primary replica (default) or a readable secondary replica that you configured based on steps in a previous section.</span></span> <span data-ttu-id="4c89e-161">AlwaysOn-Konfigurationseinstellungen sowie die im Client festgelegten Verbindungseigenschaften bestimmen, ob ein primäres oder sekundäres Replikat verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="4c89e-161">AlwaysOn configuration settings, plus the connection properties set in the client, will determine whether a primary or secondary replica is used.</span></span>  
  
1.  <span data-ttu-id="4c89e-162">Klicken Sie in [!INCLUDE[ssBIDevStudio](../../../includes/ssbidevstudio-md.md)]in einem Analysis Services-Projekt für mehrdimensionale und Data Mining-Modelle mit der rechten Maustaste auf **Datenquellen** , und wählen Sie **Neue Datenquelle**aus.</span><span class="sxs-lookup"><span data-stu-id="4c89e-162">In [!INCLUDE[ssBIDevStudio](../../../includes/ssbidevstudio-md.md)], in an Analysis Services Multidimensional and Data Mining Model project, right-click **Data Sources** and select **New Data Source**.</span></span> <span data-ttu-id="4c89e-163">Klicken Sie auf **Neu** , um eine neue Datenquelle zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="4c89e-163">Click **New** to create a new data source.</span></span>  
  
     <span data-ttu-id="4c89e-164">Alternativ können Sie für ein tabellarisches Modellprojekt auf das Menü „Modell“ und anschließend auf **Aus Datenquelle importieren**klicken.</span><span class="sxs-lookup"><span data-stu-id="4c89e-164">Alternatively, for a tabular model project, click the Model menu, and then click **Import from Data Source**.</span></span>  
  
2.  <span data-ttu-id="4c89e-165">Wählen Sie im Verbindungs-Manager unter "Anbieter" einen Anbieter aus, der das TDS (Tabular Data Stream)-Protokoll unterstützt.</span><span class="sxs-lookup"><span data-stu-id="4c89e-165">In Connection Manager, in Provider, choose a provider that supports the Tabular Data Stream (TDS) protocol.</span></span> <span data-ttu-id="4c89e-166">Dieses Protokoll wird von SQL Server Native Client 11.0 unterstützt.</span><span class="sxs-lookup"><span data-stu-id="4c89e-166">The SQL Server Native Client 11.0 supports this protocol.</span></span>  
  
3.  <span data-ttu-id="4c89e-167">Geben Sie im Verbindungs-Manager unter „Servername“ den Namen des *Verfügbarkeitsgruppenlisteners*ein, und wählen Sie anschließend eine Datenbank aus, die in der Gruppe verfügbar ist.</span><span class="sxs-lookup"><span data-stu-id="4c89e-167">In Connection Manager, in Server Name, enter the name of the *availability group listener*, and then choose a database that is available in the group.</span></span>  
  
     <span data-ttu-id="4c89e-168">Der Verfügbarkeitsgruppenlistener leitet für Lese-/Schreibanforderungen eine Clientverbindung an ein primäres Replikat um. Wenn Sie in der Verbindungszeichenfolge beabsichtigte Lesevorgänge angeben, erfolgt die Umleitung an ein sekundäres Replikat.</span><span class="sxs-lookup"><span data-stu-id="4c89e-168">The availability group listener redirects a client connection to a primary replica for read-write requests or to a secondary replica if you specify read-intent in the connection string.</span></span> <span data-ttu-id="4c89e-169">Da sich Replikatrollen während eines Failovers (bei dem das primäre Replikat zum sekundären Replikat und das sekundäre Replikat zum primären Replikat wird) ändern, sollten Sie immer den Listener angeben, damit die Clientverbindung entsprechend umgeleitet wird.</span><span class="sxs-lookup"><span data-stu-id="4c89e-169">Because replica roles will change during a failover (where the primary becomes the secondary and a secondary becomes a primary), you should always specify the listener so that the client connection is redirected accordingly.</span></span>  
  
     <span data-ttu-id="4c89e-170">Um den Namen des Verfügbarkeitsgruppenlisteners zu bestimmen, können Sie einen Datenbankadministrator fragen oder eine Verbindung mit einer Instanz in der Verfügbarkeitsgruppe herstellen und die entsprechende AlwaysOn-Verfügbarkeitskonfiguration anzeigen.</span><span class="sxs-lookup"><span data-stu-id="4c89e-170">To determine the name of the availability group listener, you can either ask a database administrator or connect to an instance in the availability group and view its AlwaysOn availability configuration.</span></span> <span data-ttu-id="4c89e-171">Im folgenden Screenshot lautet der Name des Verfügbarkeitsgruppenlisteners **AdventureWorks2**.</span><span class="sxs-lookup"><span data-stu-id="4c89e-171">In the screenshot below, the availability group listener is **AdventureWorks2**.</span></span>  
  
     <span data-ttu-id="4c89e-172">![AlwaysOn-Verfügbarkeitsordner in Management Studio](../../media/ssas-alwaysoninfoinssms.png "AlwaysOn-Verfügbarkeitsordner in Management Studio")</span><span class="sxs-lookup"><span data-stu-id="4c89e-172">![AlwaysOn Availability folder in Management Studio](../../media/ssas-alwaysoninfoinssms.png "AlwaysOn Availability folder in Management Studio")</span></span>  
  
4.  <span data-ttu-id="4c89e-173">Klicken Sie im Verbindungs-Manager im linken Navigationsbereich auf **Alle** , um das Eigenschaftenraster des Datenanbieters anzuzeigen.</span><span class="sxs-lookup"><span data-stu-id="4c89e-173">Still in Connection Manager, click **All** in the left navigation pane to view the property grid of data provider.</span></span>  
  
     <span data-ttu-id="4c89e-174">Legen Sie **Anwendungszweck** auf **READONLY** fest, wenn Sie eine schreibgeschützte Clientverbindung mit einem sekundären Replikat konfigurieren.</span><span class="sxs-lookup"><span data-stu-id="4c89e-174">Set **Application Intent** to **READONLY** if you are configuring a read-only client connection to a secondary replica.</span></span> <span data-ttu-id="4c89e-175">Behalten Sie andernfalls die Standardeinstellung **READWRITE** bei, um die Verbindung an das primäre Replikat umzuleiten.</span><span class="sxs-lookup"><span data-stu-id="4c89e-175">Otherwise, keep the **READWRITE** default to redirect the connection to the primary replica.</span></span>  
  
5.  <span data-ttu-id="4c89e-176">Wählen Sie in „Identitätswechselinformationen“ die Option **Bestimmter Windows-Benutzername und bestimmtes Kennwort**aus, und geben Sie dann ein Windows-Domänenbenutzerkonto ein, das mindestens über **db_datareader** -Berechtigungen für die Datenbank verfügt.</span><span class="sxs-lookup"><span data-stu-id="4c89e-176">In Impersonation Information, select **Use a specific Windows user name and password**, and then enter a Windows domain user account that has a minimum of **db_datareader** permissions on the database.</span></span>  
  
     <span data-ttu-id="4c89e-177">Lassen Sie die Optionen **Anmeldeinformationen des aktuellen Benutzers** und **Erben**unbedingt deaktiviert.</span><span class="sxs-lookup"><span data-stu-id="4c89e-177">Do not choose **Use the credentials of the current user** or **Inherit**.</span></span> <span data-ttu-id="4c89e-178">Sie können **Dienstkonto**auswählen, jedoch nur, wenn dieses Konto über Leseberechtigungen für die Datenbank verfügt.</span><span class="sxs-lookup"><span data-stu-id="4c89e-178">You can choose **Use the service account**, but only if that account has read permissions on the database.</span></span>  
  
     <span data-ttu-id="4c89e-179">Stellen Sie die Datenquelle fertig, und schließen Sie den Datenquellen-Assistenten.</span><span class="sxs-lookup"><span data-stu-id="4c89e-179">Finish the data source and close the Data Source Wizard.</span></span>  
  
6.  <span data-ttu-id="4c89e-180">Fügen Sie der Verbindungszeichenfolge **MultiSubnetFailover=Yes** hinzu, damit der aktive Server schneller erkannt wird und schneller eine Verbindung mit ihm hergestellt wird.</span><span class="sxs-lookup"><span data-stu-id="4c89e-180">Add **MultiSubnetFailover=Yes** to the connection string to provide faster detection and connection to the active server.</span></span> <span data-ttu-id="4c89e-181">Weitere Informationen zu dieser Eigenschaft finden Sie unter [SQL Server Native Client-Unterstützung für hohe Verfügbarkeit, Notfallwiederherstellung](../../../relational-databases/native-client/features/sql-server-native-client-support-for-high-availability-disaster-recovery.md).</span><span class="sxs-lookup"><span data-stu-id="4c89e-181">For more information about this property, see [SQL Server Native Client Support for High Availability, Disaster Recovery](../../../relational-databases/native-client/features/sql-server-native-client-support-for-high-availability-disaster-recovery.md).</span></span>  
  
     <span data-ttu-id="4c89e-182">Diese Eigenschaft wird im Eigenschaftenraster nicht angezeigt.</span><span class="sxs-lookup"><span data-stu-id="4c89e-182">This property is not visible in the property grid.</span></span> <span data-ttu-id="4c89e-183">Klicken Sie mit der rechten Maustaste auf die Datenquelle, und wählen Sie **Code anzeigen**aus, um die Eigenschaft hinzuzufügen.</span><span class="sxs-lookup"><span data-stu-id="4c89e-183">To add the property, right-click the data source and choose **View Code**.</span></span> <span data-ttu-id="4c89e-184">Fügen Sie der Verbindungszeichenfolge `MultiSubnetFailover=Yes` hinzu.</span><span class="sxs-lookup"><span data-stu-id="4c89e-184">Add `MultiSubnetFailover=Yes` to the connection string.</span></span>  
  
 <span data-ttu-id="4c89e-185">Die Datenquelle ist jetzt definiert.</span><span class="sxs-lookup"><span data-stu-id="4c89e-185">The data source is now defined.</span></span> <span data-ttu-id="4c89e-186">Sie können jetzt ein Modell erstellen, wobei Sie mit der Datenquellensicht beginnen. Für tabellarische Modelle beginnen Sie mit dem Erstellen von Beziehungen.</span><span class="sxs-lookup"><span data-stu-id="4c89e-186">You can now proceed to build a model, starting with the data source view, or in the case of tabular models, creating relationships.</span></span> <span data-ttu-id="4c89e-187">Wenn Daten aus der Verfügbarkeitsdatenbank abgerufen werden müssen (wenn Sie z. B. die Lösung verarbeiten oder bereitstellen möchten), können Sie die Konfiguration testen, um zu überprüfen, ob Zugriff auf Daten aus dem sekundären Replikat erfolgt.</span><span class="sxs-lookup"><span data-stu-id="4c89e-187">When you are at a point where data must be retrieved from the availability database (for example when you are ready to process or deploy the solution), you can test the configuration to verify data is accessed from the secondary replica.</span></span>  
  
##  <a name="test-the-configuration"></a><a name="bkmk_test"></a><span data-ttu-id="4c89e-188">Testen der Konfiguration</span><span class="sxs-lookup"><span data-stu-id="4c89e-188">Test the configuration</span></span>  
 <span data-ttu-id="4c89e-189">Nachdem Sie das sekundäre Replikat konfiguriert und in Analysis Services eine Datenquellenverbindung erstellt haben, können Sie überprüfen, ob Verarbeitungs- und Abfragebefehle an das sekundäre Replikat umgeleitet werden.</span><span class="sxs-lookup"><span data-stu-id="4c89e-189">After you configure the secondary replica and create a data source connection in Analysis Services, you can confirm that processing and query commands are redirected to the secondary replica.</span></span> <span data-ttu-id="4c89e-190">Sie können auch ein geplantes manuelles Failover ausführen, um den Wiederherstellungsplan für dieses Szenario zu überprüfen.</span><span class="sxs-lookup"><span data-stu-id="4c89e-190">You can also perform a planned manual failover to verify your recovery plan for this scenario.</span></span>  
  
#### <a name="step-1-confirm-the-data-source-connection-is-redirected-to-the-secondary-replica"></a><span data-ttu-id="4c89e-191">Schritt 1: Überprüfen, ob die Datenquellenverbindung an das sekundäre Replikat umgeleitet wird</span><span class="sxs-lookup"><span data-stu-id="4c89e-191">Step 1: Confirm the data source connection is redirected to the secondary replica</span></span>  
  
1.  <span data-ttu-id="4c89e-192">Starten Sie SQL Server Profiler, und stellen Sie eine Verbindung mit der SQL Server-Instanz her, die das sekundäre Replikat hostet.</span><span class="sxs-lookup"><span data-stu-id="4c89e-192">Start SQL Server Profiler and connect to the SQL Server instance hosting the secondary replica.</span></span>  
  
     <span data-ttu-id="4c89e-193">Bei der Ausführung der Ablaufverfolgung werden mit dem `SQL:BatchStarting`-Ereignis und dem `SQL:BatchCompleting`-Ereignis die von Analysis Services ausgegebenen Abfragen angezeigt, die in der Datenbank-Engine-Instanz ausgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="4c89e-193">As the trace runs, the `SQL:BatchStarting` and `SQL:BatchCompleting` events will show the queries issued from Analysis Services that are executing on the database engine instance.</span></span> <span data-ttu-id="4c89e-194">Diese Ereignisse sind standardmäßig ausgewählt, daher müssen Sie lediglich die Ablaufverfolgung starten.</span><span class="sxs-lookup"><span data-stu-id="4c89e-194">These events are selected by default so all you need to do is start the trace.</span></span>  
  
2.  <span data-ttu-id="4c89e-195">Öffnen Sie in [!INCLUDE[ssBIDevStudio](../../../includes/ssbidevstudio-md.md)]das Analysis Services-Projekt oder die Analysis Services-Lösung, das bzw. die eine Datenquellenverbindung enthält, die Sie testen möchten.</span><span class="sxs-lookup"><span data-stu-id="4c89e-195">In [!INCLUDE[ssBIDevStudio](../../../includes/ssbidevstudio-md.md)], open the Analysis Services project or solution containing a data source connection you want to test.</span></span> <span data-ttu-id="4c89e-196">Stellen Sie sicher, dass die Datenquelle den Verfügbarkeitsgruppenlistener und nicht eine Instanz in der Gruppe angibt.</span><span class="sxs-lookup"><span data-stu-id="4c89e-196">Be sure that the data source specifies the availability group listener and not an instance in the group.</span></span>  
  
     <span data-ttu-id="4c89e-197">Dieser Schritt ist wichtig.</span><span class="sxs-lookup"><span data-stu-id="4c89e-197">This step is important.</span></span> <span data-ttu-id="4c89e-198">Wenn Sie einen Serverinstanznamen angeben, erfolgt kein Routing zum sekundären Replikat.</span><span class="sxs-lookup"><span data-stu-id="4c89e-198">Routing to the secondary replica will not occur if you specify a server instance name.</span></span>  
  
3.  <span data-ttu-id="4c89e-199">Ordnen Sie die Anwendungsfenster so an, dass Server Profiler und [!INCLUDE[ssBIDevStudio](../../../includes/ssbidevstudio-md.md)] nebeneinander angezeigt werden.</span><span class="sxs-lookup"><span data-stu-id="4c89e-199">Arrange the application windows so that you can view SQL Server Profiler and [!INCLUDE[ssBIDevStudio](../../../includes/ssbidevstudio-md.md)] side by side.</span></span>  
  
4.  <span data-ttu-id="4c89e-200">Stellen Sie die Lösung bereit, und beenden Sie nach Abschluss der Bereitstellung die Ablaufverfolgung.</span><span class="sxs-lookup"><span data-stu-id="4c89e-200">Deploy the solution, and when it completes, stop the trace.</span></span>  
  
     <span data-ttu-id="4c89e-201">Im Ablaufverfolgungsfenster sollten Ereignisse aus der Anwendung **Microsoft SQL Server Analysis Services**angezeigt werden.</span><span class="sxs-lookup"><span data-stu-id="4c89e-201">In the trace window, you should see events from the application **Microsoft SQL Server Analysis Services**.</span></span> <span data-ttu-id="4c89e-202">Es sollten `SELECT`-Anweisungen angezeigt werden, mit denen Daten aus einer Datenbank auf der Serverinstanz abgerufen werden, die das sekundäre Replikat hostet. Dies bedeutet, dass die Verbindung mit dem sekundären Replikat über den Listener hergestellt wurde.</span><span class="sxs-lookup"><span data-stu-id="4c89e-202">You should see `SELECT` statements that retrieve data from a database on the server instance that hosts the secondary replica, proving that the connection was made via the listener to the secondary replica.</span></span>  
  
#### <a name="step-2-perform-a-planned-failover-to-test-the-configuration"></a><span data-ttu-id="4c89e-203">Schritt 2: Ausführen eines geplanten Failovers zum Testen der Konfiguration</span><span class="sxs-lookup"><span data-stu-id="4c89e-203">Step 2: Perform a planned failover to test the configuration</span></span>  
  
1.  <span data-ttu-id="4c89e-204">Überprüfen Sie in [!INCLUDE[ssManStudio](../../../includes/ssmanstudio-md.md)] das primäre und sekundäre Replikat, um sicherzustellen, dass beide für den Modus mit synchronem Commit konfiguriert sind und gegenwärtig synchronisiert sind.</span><span class="sxs-lookup"><span data-stu-id="4c89e-204">In [!INCLUDE[ssManStudio](../../../includes/ssmanstudio-md.md)] check the primary and secondary replicas to ensure that both are configured for synchronous-commit mode and are currently synchronized.</span></span>  
  
     <span data-ttu-id="4c89e-205">In den folgenden Schritten wird davon ausgegangen, dass ein sekundäres Replikat für synchronen Commit konfiguriert ist.</span><span class="sxs-lookup"><span data-stu-id="4c89e-205">The following steps assume a secondary replica is configured for synchronous commit.</span></span>  
  
     <span data-ttu-id="4c89e-206">Öffnen Sie eine Verbindung mit jeder Instanz, die das primäre und sekundäre Replikat hostet, erweitern Sie den Ordner „Datenbanken“, und stellen Sie sicher, dass in jedem Replikat **(Synchronisiert)** und **(Wird synchronisiert)** an den Namen der Datenbank angefügt ist, um die Synchronisierung zu überprüfen.</span><span class="sxs-lookup"><span data-stu-id="4c89e-206">To verify synchronization, open a connection to each instance that hosts the primary and secondary replicas, expand the Databases folder, and ensure that the database has **(Synchronized)** and **(Synchronizing)** appended to its name in each replica.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="4c89e-207">Diese Schritte sind unter [Ausführen eines geplanten manuellen Failovers einer Verfügbarkeitsgruppe &#40;SQL Server&#41;](perform-a-planned-manual-failover-of-an-availability-group-sql-server.md) beschrieben. Dort finden Sie weitere Informationen und alternative Anweisungen zum Ausführen dieser Aufgabe.</span><span class="sxs-lookup"><span data-stu-id="4c89e-207">These steps are taken from [Perform a Planned Manual Failover of an Availability Group &#40;SQL Server&#41;](perform-a-planned-manual-failover-of-an-availability-group-sql-server.md), which provides additional information and alternative instructions for performing this task.</span></span>  
  
2.  <span data-ttu-id="4c89e-208">Starten Sie in SQL Server Profiler Ablaufverfolgungen für jedes Replikat, und zeigen Sie die Ablaufverfolgungen nebeneinander an.</span><span class="sxs-lookup"><span data-stu-id="4c89e-208">In SQL Server Profiler, start traces for each replica and view the traces side-by-side.</span></span> <span data-ttu-id="4c89e-209">In den folgenden Schritten vergleichen Sie Ablaufverfolgungen und vergewissern sich, dass die zum Verarbeiten oder Abfragen verwendeten SQL-Abfragen aus Analysis Services zwischen den Replikaten wechseln.</span><span class="sxs-lookup"><span data-stu-id="4c89e-209">In the following steps, you will compare traces, confirming that the SQL queries used for processing or querying from Analysis Services switch from one replica to the other.</span></span>  
  
3.  <span data-ttu-id="4c89e-210">Führen Sie in Analysis Services einen Verarbeitungs- oder Abfragebefehl aus.</span><span class="sxs-lookup"><span data-stu-id="4c89e-210">Execute a processing or query command from within Analysis Services.</span></span> <span data-ttu-id="4c89e-211">Da Sie die Datenquelle für eine schreibgeschützte Verbindung konfiguriert haben, sollte angezeigt werden, dass der Befehl auf dem sekundären Replikat ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="4c89e-211">Because you configured the data source for a read-only connection, you should see the command execute on the secondary replica.</span></span>  
  
4.  <span data-ttu-id="4c89e-212">Stellen Sie in [!INCLUDE[ssManStudio](../../../includes/ssmanstudio-md.md)]eine Verbindung mit dem sekundären Replikat her.</span><span class="sxs-lookup"><span data-stu-id="4c89e-212">In [!INCLUDE[ssManStudio](../../../includes/ssmanstudio-md.md)], connect to the secondary replica.</span></span>  
  
5.  <span data-ttu-id="4c89e-213">Erweitern Sie den Knoten **Hohe Verfügbarkeit (immer aktiviert)** und den Knoten **Verfügbarkeitsgruppen** .</span><span class="sxs-lookup"><span data-stu-id="4c89e-213">Expand the **AlwaysOn High Availability** node and the **Availability Groups** node.</span></span>  
  
6.  <span data-ttu-id="4c89e-214">Klicken Sie mit der rechten Maustaste auf die Verfügbarkeitsgruppe, für die ein Failover ausgeführt werden soll, und wählen Sie den Befehl **Failover** aus.</span><span class="sxs-lookup"><span data-stu-id="4c89e-214">Right-click the availability group to be failed over, and select the **Failover** command.</span></span> <span data-ttu-id="4c89e-215">Dadurch wird der Assistent für das Failover von Verfügbarkeitsgruppen gestartet.</span><span class="sxs-lookup"><span data-stu-id="4c89e-215">This starts the Fail Over Availability Group Wizard.</span></span> <span data-ttu-id="4c89e-216">Wählen Sie mithilfe des Assistenten aus, welches Replikat als neues primäres Replikat verwendet werden soll.</span><span class="sxs-lookup"><span data-stu-id="4c89e-216">Use the wizard to choose which replica to make the new primary replica.</span></span>  
  
7.  <span data-ttu-id="4c89e-217">Vergewissern Sie sich, dass das Failover erfolgreich ausgeführt wurde:</span><span class="sxs-lookup"><span data-stu-id="4c89e-217">Confirm that failover succeeded:</span></span>  
  
    -   <span data-ttu-id="4c89e-218">Erweitern Sie in [!INCLUDE[ssManStudio](../../../includes/ssmanstudio-md.md)]die Verfügbarkeitsgruppen, um die Bezeichnungen für das primäre und sekundäre Replikat anzuzeigen.</span><span class="sxs-lookup"><span data-stu-id="4c89e-218">In [!INCLUDE[ssManStudio](../../../includes/ssmanstudio-md.md)], expand the availability groups to view the (primary) and (secondary) designations.</span></span> <span data-ttu-id="4c89e-219">Die Instanz, die zuvor ein primäres Replikat war, sollte jetzt ein sekundäres Replikat sein.</span><span class="sxs-lookup"><span data-stu-id="4c89e-219">The instance that was previously a primary replica should now be a secondary replica.</span></span>  
  
    -   <span data-ttu-id="4c89e-220">Zeigen Sie das Dashboard an, um zu bestimmen, ob Integritätsprobleme gefunden wurden.</span><span class="sxs-lookup"><span data-stu-id="4c89e-220">View the dashboard to determine if any health issues were detected.</span></span> <span data-ttu-id="4c89e-221">Klicken Sie mit der rechten Maustaste auf die Verfügbarkeits Gruppe und wählen Sie **Dashboard anzeigen**</span><span class="sxs-lookup"><span data-stu-id="4c89e-221">Right-click the availability group and select **Show Dashboard**.</span></span>  
  
8.  <span data-ttu-id="4c89e-222">Warten Sie ein oder zwei Minuten lang, bis das Failover auf dem Back-End abgeschlossen wurde.</span><span class="sxs-lookup"><span data-stu-id="4c89e-222">Wait one or two minutes for the failover to complete on the backend.</span></span>  
  
9. <span data-ttu-id="4c89e-223">Wiederholen Sie den Verarbeitungs- oder Abfragebefehl in der Analysis Services-Lösung, und beobachten Sie dann in SQL Server Profiler die Ablaufverfolgungen nebeneinander.</span><span class="sxs-lookup"><span data-stu-id="4c89e-223">Repeat the processing or query command in the Analysis Services solution, and then watch the traces side by side in SQL Server Profiler.</span></span> <span data-ttu-id="4c89e-224">Es sollte zu erkennen sein, dass die Verarbeitung auf der anderen Instanz erfolgt, die jetzt das neue sekundäre Replikat ist.</span><span class="sxs-lookup"><span data-stu-id="4c89e-224">You should see evidence of processing on the other instance, which is now the new secondary replica.</span></span>  
  
##  <a name="what-happens-after-a-failover-occurs"></a><a name="bkmk_whathappens"></a><span data-ttu-id="4c89e-225">Was geschieht nach einem Failover?</span><span class="sxs-lookup"><span data-stu-id="4c89e-225">What happens after a failover occurs</span></span>  
 <span data-ttu-id="4c89e-226">Während eines Failovers geht ein sekundäres Zielreplikat in die primäre Rolle über, und das frühere primäre Replikat geht in die sekundäre Rolle über.</span><span class="sxs-lookup"><span data-stu-id="4c89e-226">During a failover, a secondary replica transitions to the primary role and the former primary replica transitions to the secondary role.</span></span> <span data-ttu-id="4c89e-227">Alle Clientverbindungen werden beendet, der Besitz am Verfügbarkeitsgruppenlistener wechselt mit der primären Replikatrolle zu einer neuen SQL Server-Instanz, und der Listenerendpunkt wird an die virtuellen IP-Adressen und TCP-Ports der neuen Instanz gebunden.</span><span class="sxs-lookup"><span data-stu-id="4c89e-227">All client connections are terminated, ownership of the availability group listener moves with the primary replica role to a new SQL Server instance, and the listener endpoint is bound to the new instance's virtual IP addresses and TCP ports.</span></span> <span data-ttu-id="4c89e-228">Weitere Informationen finden Sie unter [Informationen zum Clientverbindungszugriff auf Verfügbarkeitsreplikate &#40;SQL Server&#41;](about-client-connection-access-to-availability-replicas-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="4c89e-228">For more information, see [About Client Connection Access to Availability Replicas &#40;SQL Server&#41;](about-client-connection-access-to-availability-replicas-sql-server.md).</span></span>  
  
 <span data-ttu-id="4c89e-229">Wenn während der Verarbeitung ein Failover erfolgt, wird in Analysis Services in der Protokolldatei oder im Ausgabefenster der folgende Fehler angezeigt „OLE DB-Fehler: OLE DB- oder ODBC-Fehler: Kommunikationslinkfehler; 08S01; TPC-Anbieter: Eine vorhandene Verbindung wurde vom Remotehost geschlossen.</span><span class="sxs-lookup"><span data-stu-id="4c89e-229">If failover occurs during processing, the following error occurs in Analysis Services in the log file or output window: "OLE DB error: OLE DB or ODBC error: Communication link failure; 08S01; TPC Provider: An existing connection was forcibly closed by the remote host.</span></span> <span data-ttu-id="4c89e-230">; 08S01.“</span><span class="sxs-lookup"><span data-stu-id="4c89e-230">; 08S01."</span></span>  
  
 <span data-ttu-id="4c89e-231">Dieser Fehler sollte behoben sein, wenn Sie eine Minute lang warten und es dann erneut versuchen.</span><span class="sxs-lookup"><span data-stu-id="4c89e-231">This error should resolve if you wait a minute and try again.</span></span> <span data-ttu-id="4c89e-232">Sofern die Verfügbarkeitsgruppe ordnungsgemäß für ein lesbares sekundäres Replikat konfiguriert ist, wird die Verarbeitung auf dem neuen sekundären Replikat fortgesetzt, wenn Sie die Verarbeitung erneut starten.</span><span class="sxs-lookup"><span data-stu-id="4c89e-232">If the availability group is configured correctly for readable secondary replica, processing will resume on the new secondary replica when you retry processing.</span></span>  
  
 <span data-ttu-id="4c89e-233">Persistente Fehler treten wahrscheinlich aufgrund eines Konfigurationsproblems auf.</span><span class="sxs-lookup"><span data-stu-id="4c89e-233">Persistent errors are most likely due to a configuration problem.</span></span> <span data-ttu-id="4c89e-234">Sie können versuchen, das T-SQL-Skript erneut auszuführen, um Probleme mit der Routingliste, mit URLs für das schreibgeschützte Routing und mit beabsichtigten Lesevorgängen auf dem sekundären Replikat zu beheben.</span><span class="sxs-lookup"><span data-stu-id="4c89e-234">You can try re-running the T-SQL script to resolve problems with the routing list, read-only routing URLs, and read-intent on the secondary replica.</span></span> <span data-ttu-id="4c89e-235">Sie sollten außerdem überprüfen, ob das primäre Replikat alle Verbindungen zulässt.</span><span class="sxs-lookup"><span data-stu-id="4c89e-235">You should also verify that the primary replica allows all connections.</span></span>  
  
##  <a name="writeback-when-using-an-alwayson-availability-database"></a><a name="bkmk_writeback"></a><span data-ttu-id="4c89e-236">Rück schreiben bei Verwendung einer AlwaysOn-Verfügbarkeits Datenbank</span><span class="sxs-lookup"><span data-stu-id="4c89e-236">Writeback when using an AlwaysOn availability database</span></span>  
 <span data-ttu-id="4c89e-237">Rückschreiben ist eine Analysis Services-Funktion, die Was-wäre-wenn-Analysen in Excel unterstützt.</span><span class="sxs-lookup"><span data-stu-id="4c89e-237">Writeback is an Analysis Services feature that supports What If analysis in Excel.</span></span> <span data-ttu-id="4c89e-238">Sie wird auch häufig für Budgetierungs- und Prognosetasks in benutzerdefinierten Anwendungen verwendet.</span><span class="sxs-lookup"><span data-stu-id="4c89e-238">It is also commonly used for budgeting and forecasting tasks in custom applications.</span></span>  
  
 <span data-ttu-id="4c89e-239">Die Unterstützung für Rückschreiben erfordert eine READWRITE-Clientverbindung.</span><span class="sxs-lookup"><span data-stu-id="4c89e-239">Support for writeback requires a READWRITE client connection.</span></span> <span data-ttu-id="4c89e-240">Wenn Sie in Excel versuchen, in eine schreibgeschützte Verbindung zurückzuschreiben, tritt der folgende Fehler auf: „Daten konnten nicht aus der externen Datenquelle abgerufen werden“.</span><span class="sxs-lookup"><span data-stu-id="4c89e-240">In Excel, if you attempt to write back on a read-only connection, the following error will occur: "Data could not be retrieved from the external data source."</span></span> <span data-ttu-id="4c89e-241">„Daten konnten nicht aus der externen Datenquelle abgerufen werden.“</span><span class="sxs-lookup"><span data-stu-id="4c89e-241">"Data could not be retrieved from the external data source."</span></span>  
  
 <span data-ttu-id="4c89e-242">Wenn Sie eine Verbindung ausschließlich für den Zugriff auf ein lesbares sekundäres Replikat konfiguriert haben, müssen Sie jetzt eine neue Verbindung als READWRITE-Verbindung mit dem primären Replikat konfigurieren.</span><span class="sxs-lookup"><span data-stu-id="4c89e-242">If you configured a connection to always access a readable secondary replica, you must now configure a new connection that uses a READWRITE connection to the primary replica.</span></span>  
  
 <span data-ttu-id="4c89e-243">Erstellen Sie hierzu in einem Analysis Services-Modell eine zusätzliche Datenquelle, um die Lese-/Schreibverbindung zu unterstützen.</span><span class="sxs-lookup"><span data-stu-id="4c89e-243">To do this, create an additional data source in an Analysis Services model to support the read-write connection.</span></span> <span data-ttu-id="4c89e-244">Wenn Sie die zusätzliche Datenquelle erstellen, verwenden Sie den gleichen Listenernamen und die gleiche Datenbank, die Sie in der schreibgeschützten Verbindung angegeben haben. Behalten Sie jedoch die Standardeinstellung bei, die READWRITE-Verbindungen unterstützt, statt **Anwendungszweck**zu ändern.</span><span class="sxs-lookup"><span data-stu-id="4c89e-244">When creating the additional data source, use the same listener name and database that you specified in the read-only connection, but instead of modifying **Application Intent**, keep the default that supports READWRITE connections.</span></span> <span data-ttu-id="4c89e-245">Jetzt können Sie der Datenquelle neue Fakten- oder Dimensionstabellen hinzufügen, die auf der Datenquelle mit Lese-/Schreibzugriff basieren, und dann für die neuen Tabellen Rückschreiben aktivieren.</span><span class="sxs-lookup"><span data-stu-id="4c89e-245">You can now add new fact or dimension tables to your data source view that are based on the read-write data source, and then enable writeback on the new tables.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="4c89e-246">Weitere Informationen</span><span class="sxs-lookup"><span data-stu-id="4c89e-246">See Also</span></span>  
 <span data-ttu-id="4c89e-247">[Verfügbarkeitsgruppenlistener, Clientkonnektivität und Anwendungsfailover &#40;SQL Server&#41;](../../listeners-client-connectivity-application-failover.md) </span><span class="sxs-lookup"><span data-stu-id="4c89e-247">[Availability Group Listeners, Client Connectivity, and Application Failover &#40;SQL Server&#41;](../../listeners-client-connectivity-application-failover.md) </span></span>  
 <span data-ttu-id="4c89e-248">[Aktive sekundäre Replikate: lesbare sekundäre Replikate &#40;AlwaysOn-Verfügbarkeitsgruppen&#41;](active-secondaries-readable-secondary-replicas-always-on-availability-groups.md) </span><span class="sxs-lookup"><span data-stu-id="4c89e-248">[Active Secondaries: Readable Secondary Replicas &#40;AlwaysOn Availability Groups&#41;](active-secondaries-readable-secondary-replicas-always-on-availability-groups.md) </span></span>  
 <span data-ttu-id="4c89e-249">[AlwaysOn-Richtlinien für Betriebsprobleme mit AlwaysOn-Verfügbarkeitsgruppen &#40;SQL Server&#41;](always-on-policies-for-operational-issues-always-on-availability.md) </span><span class="sxs-lookup"><span data-stu-id="4c89e-249">[AlwaysOn Policies for Operational Issues with AlwaysOn Availability Groups &#40;SQL Server&#41;](always-on-policies-for-operational-issues-always-on-availability.md) </span></span>  
 <span data-ttu-id="4c89e-250">[Erstellen einer Datenquelle &#40;mehrdimensionalen SSAS-&#41;](https://docs.microsoft.com/analysis-services/multidimensional-models/create-a-data-source-ssas-multidimensional) </span><span class="sxs-lookup"><span data-stu-id="4c89e-250">[Create a Data Source &#40;SSAS Multidimensional&#41;](https://docs.microsoft.com/analysis-services/multidimensional-models/create-a-data-source-ssas-multidimensional) </span></span>  
 [<span data-ttu-id="4c89e-251">Rückschreiben von Dimensionen aktivieren</span><span class="sxs-lookup"><span data-stu-id="4c89e-251">Enable Dimension Writeback</span></span>](https://docs.microsoft.com/analysis-services/multidimensional-models/bi-wizard-enable-dimension-writeback)  
  
  
