---
title: Übersicht über Transact-SQL-Anweisungen für AlwaysOn-Verfügbarkeitsgruppen (SQL Server) | Microsoft-Dokumentation
ms.custom: ''
ms.date: 04/27/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: high-availability
ms.topic: conceptual
helpviewer_keywords:
- Availability Groups [SQL Server], about
- Availability Groups [SQL Server], Transact-SQL statements
ms.assetid: 184d0a81-2259-4db9-9d0d-01aac0b502c8
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: ff25fecf54cfdd1d9c03d1586f0272896542bfa7
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 08/04/2020
ms.locfileid: "87724966"
---
# <a name="overview-of-transact-sql-statements-for-alwayson-availability-groups-sql-server"></a><span data-ttu-id="95e6d-102">Übersicht über Transact-SQL-Anweisungen für AlwaysOn-Verfügbarkeitsgruppen (SQL Server)</span><span class="sxs-lookup"><span data-stu-id="95e6d-102">Overview of Transact-SQL Statements for AlwaysOn Availability Groups (SQL Server)</span></span>
  <span data-ttu-id="95e6d-103">Dieses Thema bietet eine Einführung in die [!INCLUDE[tsql](../../../includes/tsql-md.md)] -Anweisungen, die das Bereitstellen von [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] und das Erstellen und Verwalten einer bestimmten Verfügbarkeitsgruppe, eines Verfügbarkeitsreplikats und einer Verfügbarkeitsdatenbank unterstützen.</span><span class="sxs-lookup"><span data-stu-id="95e6d-103">This topic introduces the [!INCLUDE[tsql](../../../includes/tsql-md.md)] statements that support deploying [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] and creating and managing an given availability group, availability replica and availability database.</span></span>  
  
  
##  <a name="create-endpoint"></a><a name="CreateEndpoint"></a><span data-ttu-id="95e6d-104">Endpunkt erstellen</span><span class="sxs-lookup"><span data-stu-id="95e6d-104">CREATE ENDPOINT</span></span>  
 <span data-ttu-id="95e6d-105">[Endpunkt erstellen... Für DATABASE_MIRRORING](/sql/t-sql/statements/create-endpoint-transact-sql) erstellt einen Datenbankspiegelungs-Endpunkt, falls auf der Serverinstanz keiner vorhanden ist.</span><span class="sxs-lookup"><span data-stu-id="95e6d-105">[CREATE ENDPOINT ... FOR DATABASE_MIRRORING](/sql/t-sql/statements/create-endpoint-transact-sql) creates a database mirroring endpoint, if none exists on the server instance.</span></span> <span data-ttu-id="95e6d-106">Für jede Serverinstanz, auf der Sie [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] oder eine Datenbankspiegelung bereitstellen möchten, ist ein Datenbankspiegelungs-Endpunkt erforderlich.</span><span class="sxs-lookup"><span data-stu-id="95e6d-106">Every server instance on which you intend to deploy [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] or database mirroring requires a database mirroring endpoint.</span></span>  
  
 <span data-ttu-id="95e6d-107">Führen Sie diese Anweisung auf der Serverinstanz aus, auf der Sie den Endpunkt erstellen.</span><span class="sxs-lookup"><span data-stu-id="95e6d-107">Execute this statement on the server instance on which you are creating the endpoint.</span></span> <span data-ttu-id="95e6d-108">Sie können auf einer angegebenen Serverinstanz nur einen Datenbankspiegelungs-Endpunkt erstellen.</span><span class="sxs-lookup"><span data-stu-id="95e6d-108">You can create only one database mirroring endpoint on a given server instance.</span></span> <span data-ttu-id="95e6d-109">Weitere Informationen finden Sie unter [Der Datenbankspiegelungs-Endpunkt &#40;SQL Server&#41;](../../database-mirroring/the-database-mirroring-endpoint-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="95e6d-109">For more information, see [The Database Mirroring Endpoint &#40;SQL Server&#41;](../../database-mirroring/the-database-mirroring-endpoint-sql-server.md).</span></span>  
  
##  <a name="create-availability-group"></a><a name="CreateAG"></a><span data-ttu-id="95e6d-110">Verfügbarkeits Gruppe erstellen</span><span class="sxs-lookup"><span data-stu-id="95e6d-110">CREATE AVAILABILITY GROUP</span></span>  
 <span data-ttu-id="95e6d-111">Mit[CREATE AVAILABILITY GROUP](/sql/t-sql/statements/create-availability-group-transact-sql) kann eine neue Verfügbarkeitsgruppe und optional ein Verfügbarkeitsgruppenlistener erstellt werden.</span><span class="sxs-lookup"><span data-stu-id="95e6d-111">[CREATE AVAILABILITY GROUP](/sql/t-sql/statements/create-availability-group-transact-sql) creates a new availability group and optionally an availability group listener.</span></span> <span data-ttu-id="95e6d-112">Sie müssen mindestens die lokale Serverinstanz angeben, die das ursprüngliche primäre Replikat wird.</span><span class="sxs-lookup"><span data-stu-id="95e6d-112">Minimally, you must specify your local server instance, which will become the initial primary replica.</span></span> <span data-ttu-id="95e6d-113">Optional können Sie auch bis zu vier sekundäre Replikate angeben.</span><span class="sxs-lookup"><span data-stu-id="95e6d-113">Optionally, you can also specify up to four secondary replicas.</span></span>  
  
 <span data-ttu-id="95e6d-114">Führen Sie CREATE AVAILABILITY GROUP für die Instanz von [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] aus, die das ursprüngliche primäre Replikat der neuen Verfügbarkeitsgruppe hosten soll.</span><span class="sxs-lookup"><span data-stu-id="95e6d-114">Execute CREATE AVAILABILITY GROUP on the instance of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] that you want to host the initial primary replica of your new availability group.</span></span> <span data-ttu-id="95e6d-115">Diese Serverinstanz muss sich auf einem Knoten eines Windows Server-Failoverclusters (wsfc) befinden (Weitere Informationen finden Sie unter [Voraussetzungen, Einschränkungen und Empfehlungen für AlwaysOn-Verfügbarkeitsgruppen &#40;SQL Server&#41;](prereqs-restrictions-recommendations-always-on-availability.md).</span><span class="sxs-lookup"><span data-stu-id="95e6d-115">This server instance must reside on a node of a Windows Server Failover Cluster (WSFC) (for more information, see [Prerequisites, Restrictions, and Recommendations for AlwaysOn Availability Groups &#40;SQL Server&#41;](prereqs-restrictions-recommendations-always-on-availability.md).</span></span>  
  
##  <a name="alter-availability-group"></a><a name="AlterAG"></a><span data-ttu-id="95e6d-116">Alter Availability Group</span><span class="sxs-lookup"><span data-stu-id="95e6d-116">ALTER AVAILABILITY GROUP</span></span>  
 <span data-ttu-id="95e6d-117">[ALTER AVAILABILITY GROUP](/sql/t-sql/statements/alter-availability-group-transact-sql) unterstützt das Ändern einer vorhandenen Verfügbarkeitsgruppe oder eines Verfügbarkeitsgruppenlisteners und das Durchführen eines Failovers für eine Verfügbarkeitsgruppe.</span><span class="sxs-lookup"><span data-stu-id="95e6d-117">[ALTER AVAILABILITY GROUP](/sql/t-sql/statements/alter-availability-group-transact-sql) supports changing an existing availability group or availability group listener and for failing over an availability group.</span></span>  
  
 <span data-ttu-id="95e6d-118">Führen Sie ALTER AVAILABILITY GROUP für die Instanz von [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] aus, die das aktuelle primäre Replikat hostet.</span><span class="sxs-lookup"><span data-stu-id="95e6d-118">Execute ALTER AVAILABILITY GROUP on the instance of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] that hosts the current primary replica.</span></span>  
  
##  <a name="alter-database--set-hadr-"></a><a name="AlterDb"></a><span data-ttu-id="95e6d-119">Datenbank ändern... HADR festlegen...</span><span class="sxs-lookup"><span data-stu-id="95e6d-119">ALTER DATABASE ... SET HADR ...</span></span>  
 <span data-ttu-id="95e6d-120">Die Optionen der [SET HADR](/sql/t-sql/statements/alter-database-transact-sql-set-hadr) -Klausel der ALTER DATABASE-Anweisung ermöglichen es Ihnen, eine sekundäre Datenbank mit der Verfügbarkeitsgruppe der entsprechenden primären Datenbank zu verknüpfen, eine verknüpfte Datenbank zu entfernen und die Datensynchronisierung für eine verknüpfte Datenbank anzuhalten und die Datensynchronisierung fortzusetzen.</span><span class="sxs-lookup"><span data-stu-id="95e6d-120">The options of the [SET HADR](/sql/t-sql/statements/alter-database-transact-sql-set-hadr) clause of the ALTER DATABASE statement enables you to join a secondary database to the availability group of the corresponding primary database, remove a joined database, and suspend data synchronization on a joined database, and resume data synchronization.</span></span>  
  
##  <a name="drop-availability-group"></a><a name="DropAG"></a><span data-ttu-id="95e6d-121">Löschen der Verfügbarkeits Gruppe</span><span class="sxs-lookup"><span data-stu-id="95e6d-121">DROP AVAILABILITY GROUP</span></span>  
 <span data-ttu-id="95e6d-122">[DROP AVAILABILITY GROUP](/sql/t-sql/statements/drop-availability-group-transact-sql) entfernt eine bestimmte Verfügbarkeitsgruppe und alle Replikate.</span><span class="sxs-lookup"><span data-stu-id="95e6d-122">[DROP AVAILABILITY GROUP](/sql/t-sql/statements/drop-availability-group-transact-sql) removes a specified availability group and all of its replicas.</span></span> <span data-ttu-id="95e6d-123">DROP AVAILABILITY GROUP kann von einem beliebigen [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] -Knoten im WSFC-Failovercluster ausgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="95e6d-123">DROP AVAILABILITY GROUP can be run from any [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] node in the WSFC failover cluster.</span></span>  
  
##  <a name="restrictions-on-the-availability-group-transact-sql-statements"></a><a name="Restrictions"></a><span data-ttu-id="95e6d-124">Einschränkungen für die Verfügbarkeits Gruppen-Transact-SQL-Anweisungen</span><span class="sxs-lookup"><span data-stu-id="95e6d-124">Restrictions on the AVAILABILITY GROUP Transact-SQL Statements</span></span>  
 <span data-ttu-id="95e6d-125">Die CREATE AVAILABILITY GROUP-, ALTER AVAILABILITY GROUP- und DROP AVAILABILITY GROUP-Anweisungen in [!INCLUDE[tsql](../../../includes/tsql-md.md)] weisen die folgenden Einschränkungen auf:</span><span class="sxs-lookup"><span data-stu-id="95e6d-125">The CREATE AVAILABILITY GROUP, ALTER AVAILABILITY GROUP, and DROP AVAILABILITY GROUP [!INCLUDE[tsql](../../../includes/tsql-md.md)] statements have the following limitations:</span></span>  
  
-   <span data-ttu-id="95e6d-126">Mit Ausnahme von DROP AVAILABILITY GROUP ist für die Ausführung dieser Anweisungen die Aktivierung des HADR-Diensts auf der Instanz von [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] erforderlich.</span><span class="sxs-lookup"><span data-stu-id="95e6d-126">With the exception of DROP AVAILABILITY GROUP, executing these statements requires that the HADR service is enabled on the instance of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="95e6d-127">Weitere Informationen finden Sie unter [Aktivieren und Deaktivieren von AlwaysOn-Verfügbarkeitsgruppen &#40;SQL Server&#41;](enable-and-disable-always-on-availability-groups-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="95e6d-127">For more information, see [Enable and Disable AlwaysOn Availability Groups &#40;SQL Server&#41;](enable-and-disable-always-on-availability-groups-sql-server.md).</span></span>  
  
-   <span data-ttu-id="95e6d-128">Diese Anweisungen können nicht innerhalb von Transaktionen oder Batches ausgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="95e6d-128">These statements cannot be executed within transactions or batches.</span></span>  
  
-   <span data-ttu-id="95e6d-129">Trotz der Bereinigung nach einem Fehler wird mit diesen Anweisungen nicht sichergestellt, dass bei einem Fehler ein Rollback aller Änderungen ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="95e6d-129">Though they make a best effort to clean up after a failure, these statements do not guarantee that they will roll back all changes on failure.</span></span> <span data-ttu-id="95e6d-130">Systeme sollten Teilfehler jedoch sauber verarbeiten und dann ignorieren können.</span><span class="sxs-lookup"><span data-stu-id="95e6d-130">However, systems should be able cleanly handle and then ignore partial failures.</span></span>  
  
-   <span data-ttu-id="95e6d-131">Diese Anweisungen unterstützen keine Ausdrücke oder Variablen.</span><span class="sxs-lookup"><span data-stu-id="95e6d-131">These statements do not support expressions or variables.</span></span>  
  
-   <span data-ttu-id="95e6d-132">Wenn eine [!INCLUDE[tsql](../../../includes/tsql-md.md)] -Anweisung während der Ausführung einer anderen Verfügbarkeitsgruppenaktion oder einer Wiederherstellung ausgeführt wird, gibt die Anweisung einen Fehler zurück.</span><span class="sxs-lookup"><span data-stu-id="95e6d-132">If a [!INCLUDE[tsql](../../../includes/tsql-md.md)] statement is executed while another availability group action or recovery is in process, the statement returns an error.</span></span> <span data-ttu-id="95e6d-133">Warten Sie, bis die Aktion oder die Wiederherstellung abgeschlossen ist, und wiederholen Sie ggf. die Anweisung.</span><span class="sxs-lookup"><span data-stu-id="95e6d-133">Wait for the action or recovery to complete, and retry the statement, if necessary.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="95e6d-134">Weitere Informationen</span><span class="sxs-lookup"><span data-stu-id="95e6d-134">See Also</span></span>  
 [<span data-ttu-id="95e6d-135">Übersicht über AlwaysOn-Verfügbarkeitsgruppen &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="95e6d-135">Overview of AlwaysOn Availability Groups &#40;SQL Server&#41;</span></span>](overview-of-always-on-availability-groups-sql-server.md)  
  
  
