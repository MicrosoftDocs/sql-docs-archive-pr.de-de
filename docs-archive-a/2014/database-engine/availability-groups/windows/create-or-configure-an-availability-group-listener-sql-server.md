---
title: Erstellen oder Konfigurieren eines Verfügbarkeitsgruppenlisteners (SQL Server) | Microsoft-Dokumentation
ms.custom: ''
ms.date: 06/14/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: high-availability
ms.topic: conceptual
f1_keywords:
- sql12.swb.availabilitygroup.newaglistener.general.f1
helpviewer_keywords:
- Availability Groups [SQL Server], listeners
- Availability Groups [SQL Server], client connectivity
ms.assetid: 2bc294f6-2312-4b6b-9478-2fb8a656e645
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: 2c74e92286eab4bc1be8f3f538d83d86f056cf01
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 08/04/2020
ms.locfileid: "87727130"
---
# <a name="create-or-configure-an-availability-group-listener-sql-server"></a><span data-ttu-id="6c20e-102">Erstellen oder Konfigurieren eines Verfügbarkeitsgruppenlisteners (SQL Server)</span><span class="sxs-lookup"><span data-stu-id="6c20e-102">Create or Configure an Availability Group Listener (SQL Server)</span></span>
  <span data-ttu-id="6c20e-103">In diesem Thema wird beschrieben, wie Sie einen einzelnen *verfügbarkeitsgruppenlistener* für eine AlwaysOn-Verfügbarkeits Gruppe mit [!INCLUDE[ssManStudioFull](../../../includes/ssmanstudiofull-md.md)] , [!INCLUDE[tsql](../../../includes/tsql-md.md)] oder PowerShell in erstellen oder konfigurieren [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="6c20e-103">This topic describes how to create or configure a single *availability group listener* for an AlwaysOn availability group by using [!INCLUDE[ssManStudioFull](../../../includes/ssmanstudiofull-md.md)], [!INCLUDE[tsql](../../../includes/tsql-md.md)], or PowerShell in [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)].</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="6c20e-104">Für die Erstellung des ersten Verfügbarkeitsgruppenlisteners einer Verfügbarkeitsgruppe empfehlen wir dringend die Verwendung von [!INCLUDE[ssManStudioFull](../../../includes/ssmanstudiofull-md.md)], [!INCLUDE[tsql](../../../includes/tsql-md.md)]oder [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] PowerShell.</span><span class="sxs-lookup"><span data-stu-id="6c20e-104">To create the first availability group listener of an availability group, we strongly recommend that you [!INCLUDE[ssManStudioFull](../../../includes/ssmanstudiofull-md.md)], [!INCLUDE[tsql](../../../includes/tsql-md.md)], or [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] PowerShell.</span></span> <span data-ttu-id="6c20e-105">Vermeiden Sie, einen Listener direkt im WSFC-Cluster zu erstellen, sofern dies nicht unbedingt notwendig ist (z. B. bei der Erstellung eines zusätzlichen Listeners).</span><span class="sxs-lookup"><span data-stu-id="6c20e-105">Avoid creating a listener directly in the WSFC cluster except when necessary, for example, to create an additional listener.</span></span>  
  
  
##  <a name="before-you-begin"></a><a name="BeforeYouBegin"></a> <span data-ttu-id="6c20e-106">Vorbereitungen</span><span class="sxs-lookup"><span data-stu-id="6c20e-106">Before You Begin</span></span>  
  
###  <a name="does-a-listener-exist-for-this-availability-group-already"></a><a name="DoesListenerExist"></a> <span data-ttu-id="6c20e-107">Ist bereits ein Listener für diese Verfügbarkeitsgruppe vorhanden?</span><span class="sxs-lookup"><span data-stu-id="6c20e-107">Does a Listener Exist for this Availability Group Already?</span></span>  
 <span data-ttu-id="6c20e-108">**So ermitteln Sie, ob bereits ein Listener für die Verfügbarkeitsgruppe vorhanden ist**</span><span class="sxs-lookup"><span data-stu-id="6c20e-108">**To determine whether a listener already exists for the availability group**</span></span>  
  
-   [<span data-ttu-id="6c20e-109">Anzeigen von Eigenschaften des Verfügbarkeitsgruppenlisteners &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="6c20e-109">View Availability Group Listener Properties &#40;SQL Server&#41;</span></span>](view-availability-group-listener-properties-sql-server.md)  
  
> [!NOTE]  
>  <span data-ttu-id="6c20e-110">Wenn ein Listener bereits vorhanden ist und Sie einen zusätzlichen Listener erstellen möchten, siehe [So erstellen Sie einen zusätzlichen Listener für eine Verfügbarkeitsgruppe (Optional)](#CreateAdditionalListener)weiter unten in diesem Thema.</span><span class="sxs-lookup"><span data-stu-id="6c20e-110">If a listener already exists and you want to create an additional listener, see [To Create An Additional Listener for an Availability Group (Optional)](#CreateAdditionalListener), later in this topic.</span></span>  
  
###  <a name="limitations-and-restrictions"></a><a name="Restrictions"></a> <span data-ttu-id="6c20e-111">Einschränkungen</span><span class="sxs-lookup"><span data-stu-id="6c20e-111">Limitations and Restrictions</span></span>  
  
-   <span data-ttu-id="6c20e-112">Sie können anhand von [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]nur einen Listener pro Verfügbarkeitsgruppe erstellen.</span><span class="sxs-lookup"><span data-stu-id="6c20e-112">You can create only one listener per availability group through [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="6c20e-113">In der Regel erfordert jede Verfügbarkeitsgruppe nur einen Listener.</span><span class="sxs-lookup"><span data-stu-id="6c20e-113">Typically, each availability group requires only one listener.</span></span> <span data-ttu-id="6c20e-114">Einige Kundenszenarien erfordern jedoch mehrere Listener für eine Verfügbarkeitsgruppe.</span><span class="sxs-lookup"><span data-stu-id="6c20e-114">However, some customer scenarios require multiple listeners for one availability group.</span></span>   <span data-ttu-id="6c20e-115">Nachdem Sie mit SQL Server einen Listener erstellt haben, können Sie Windows PowerShell für Failovercluster oder den WSFC Failovercluster-Manager verwenden, um zusätzliche Listener zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="6c20e-115">After creating a listener through SQL Server, you can use Windows PowerShell for failover clusters or the WSFC Failover Cluster Manager to create additional listeners.</span></span> <span data-ttu-id="6c20e-116">Weitere Informationen finden Sie weiter unten in diesem Thema unter [So erstellen Sie einen zusätzlichen Listener für eine Verfügbarkeitsgruppe (optional)](#CreateAdditionalListener).</span><span class="sxs-lookup"><span data-stu-id="6c20e-116">For more information, see [To Create An Additional Listener for an Availability Group (Optional)](#CreateAdditionalListener), later in this topic.</span></span>  
  
###  <a name="recommendations"></a><a name="Recommendations"></a> <span data-ttu-id="6c20e-117">Empfehlungen</span><span class="sxs-lookup"><span data-stu-id="6c20e-117">Recommendations</span></span>  
 <span data-ttu-id="6c20e-118">Die Verwendung einer statischen IP-Adresse wird zwar empfohlen, ist für Multisubnetz-Konfigurationen jedoch nicht unbedingt erforderlich.</span><span class="sxs-lookup"><span data-stu-id="6c20e-118">Using a static IP address is recommended, although not required, for multiple subnet configurations.</span></span>  
  
###  <a name="prerequisites"></a><a name="Prerequisites"></a> <span data-ttu-id="6c20e-119">Voraussetzungen</span><span class="sxs-lookup"><span data-stu-id="6c20e-119">Prerequisites</span></span>  
  
-   <span data-ttu-id="6c20e-120">Sie müssen mit der Serverinstanz verbunden sein, die das primäre Replikat hostet.</span><span class="sxs-lookup"><span data-stu-id="6c20e-120">You must be connected to the server instance that hosts the primary replica.</span></span>  
  
-   <span data-ttu-id="6c20e-121">Wenn Sie einen Verfügbarkeitsgruppenlistener für mehrere Subnetze einrichten und beabsichtigen, statische IP-Adressen zu verwenden, müssen Sie die statische IP-Adresse jedes Subnetzes abrufen, von dem ein Verfügbarkeitsreplikat für die Verfügbarkeitsgruppe gehostet wird, für die Sie den Listener erstellen.</span><span class="sxs-lookup"><span data-stu-id="6c20e-121">If you are setting up an availability group listener across multiple subnets and plan to use static IP addresses, you need to get the static IP address of every subnet that hosts an availability replica for the availability group for which you are creating the listener.</span></span> <span data-ttu-id="6c20e-122">Normalerweise müssen Sie die Netzwerkadministratoren um die statischen IP-Adressen bitten.</span><span class="sxs-lookup"><span data-stu-id="6c20e-122">Usually, you will need to ask your network administrators for the static IP addresses.</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="6c20e-123">Vor dem Erstellen des ersten Listeners empfehlen wir dringend, dass Sie [AlwaysOn-Clientkonnektivität &#40;SQL Server&#41;](always-on-client-connectivity-sql-server.md) lesen.</span><span class="sxs-lookup"><span data-stu-id="6c20e-123">Before you create your first listener, we strongly recommend that you read [AlwaysOn Client Connectivity &#40;SQL Server&#41;](always-on-client-connectivity-sql-server.md).</span></span>  
  
###  <a name="requirements-for-the-dns-name-of-an-availability-group-listener"></a><a name="DNSnameReqs"></a> <span data-ttu-id="6c20e-124">Anforderungen für den DNS-Namen eines Verfügbarkeitsgruppenlisteners</span><span class="sxs-lookup"><span data-stu-id="6c20e-124">Requirements for the DNS Name of an Availability Group Listener</span></span>  
 <span data-ttu-id="6c20e-125">Für jeden Verfügbarkeitsgruppenlistener ist ein DNS-Hostname erforderlich, der in der Domäne und in NetBIOS eindeutig ist.</span><span class="sxs-lookup"><span data-stu-id="6c20e-125">Each availability group listener requires a DNS host name that is unique in the domain and in NetBIOS.</span></span> <span data-ttu-id="6c20e-126">Der DNS-Name ist ein Zeichenfolgenwert.</span><span class="sxs-lookup"><span data-stu-id="6c20e-126">The DNS name is a string value.</span></span> <span data-ttu-id="6c20e-127">Dieser Name darf nur alphanumerische Zeichen, Bindestriche (-) und Unterstriche (_) enthalten (in beliebiger Reihenfolge).</span><span class="sxs-lookup"><span data-stu-id="6c20e-127">This name can contain only alphanumeric characters, dashes (-), and hyphens (_), in any order.</span></span> <span data-ttu-id="6c20e-128">Bei DNS-Hostnamen muss die Groß-/Kleinschreibung beachtet werden.</span><span class="sxs-lookup"><span data-stu-id="6c20e-128">DNS host names are case insensitive.</span></span> <span data-ttu-id="6c20e-129">Die maximale Länge beträgt 63 Zeichen, die maximale Länge, die in [!INCLUDE[ssManStudioFull](../../../includes/ssmanstudiofull-md.md)]angegeben werden kann, ist jedoch 15 Zeichen.</span><span class="sxs-lookup"><span data-stu-id="6c20e-129">The maximum length is 63 characters, however, in [!INCLUDE[ssManStudioFull](../../../includes/ssmanstudiofull-md.md)], the maximum length you can specify is 15 characters.</span></span>  
  
 <span data-ttu-id="6c20e-130">Wir empfehlen, dass Sie eine sinnvolle Zeichenfolge angeben.</span><span class="sxs-lookup"><span data-stu-id="6c20e-130">We recommend that you specify a meaningful string.</span></span> <span data-ttu-id="6c20e-131">Für eine Verfügbarkeitsgruppe mit dem Namen `AG1`wäre ein sinnvoller DNS-Hostname z. B. `ag1-listener`.</span><span class="sxs-lookup"><span data-stu-id="6c20e-131">For example, for an availability group named `AG1`, a meaningful DNS host name would be `ag1-listener`.</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="6c20e-132">NetBIOS erkennt nur die ersten 15 Zeichen im dns_name.</span><span class="sxs-lookup"><span data-stu-id="6c20e-132">NetBIOS recognizes only the first 15 chars in the dns_name.</span></span> <span data-ttu-id="6c20e-133">Wenn Sie zwei WSFC-Cluster verwenden, die vom gleichen Active Directory gesteuert werden, und Sie versuchen, Verfügbarkeitsgruppenlistener in beiden Clustern mit Namen mit mehr als 15 Zeichen und einem identischen 15-Zeichen-Präfix zu erstellen, erhalten Sie eine Fehlermeldung mit dem Hinweis, dass die VNN-Ressource nicht online geschaltet werden konnte.</span><span class="sxs-lookup"><span data-stu-id="6c20e-133">If you have two WSFC clusters that are controlled by the same Active Directory and you try to create availability group listeners in both of clusters using names with more than 15 characters and an identical 15 character prefix, you will get an error reporting that the Virtual Network Name resource could not be brought online.</span></span> <span data-ttu-id="6c20e-134">Informationen zu Präfix-Benennungsregeln für DNS-Namen finden Sie unter [Zuweisen von Domänennamen](https://technet.microsoft.com/library/cc731265\(WS.10\).aspx).</span><span class="sxs-lookup"><span data-stu-id="6c20e-134">For information about prefix naming rules for DNS names, see [Assigning Domain Names](https://technet.microsoft.com/library/cc731265\(WS.10\).aspx).</span></span>  
  
###  <a name="windows-permissions"></a><a name="WinPermissions"></a> <span data-ttu-id="6c20e-135">Windows-Berechtigungen</span><span class="sxs-lookup"><span data-stu-id="6c20e-135">Windows Permissions</span></span>  
  
|<span data-ttu-id="6c20e-136">Berechtigungen</span><span class="sxs-lookup"><span data-stu-id="6c20e-136">Permissions</span></span>|<span data-ttu-id="6c20e-137">Link</span><span class="sxs-lookup"><span data-stu-id="6c20e-137">Link</span></span>|  
|-----------------|----------|  
|<span data-ttu-id="6c20e-138">Das Clusternamenobjekt (CNO) des WSFC-Clusters, der die Verfügbarkeitsgruppe hostet, muss über die Berechtigung zum **Erstellen von Computerobjekten** verfügen.</span><span class="sxs-lookup"><span data-stu-id="6c20e-138">The cluster object name (CNO) of WSFC cluster that is hosting the availability group must have **Create Computer objects** permission.</span></span><br /><br /> <span data-ttu-id="6c20e-139">Standardmäßig weist ein CNO in Active Directory die Berechtigung zum **Erstellen von Computerobjekten** nicht explizit auf und kann 10 virtuelle Computerobjekte (Virtual Computer Objects, VCOs) erstellen.</span><span class="sxs-lookup"><span data-stu-id="6c20e-139">In Active Directory, a CNO by default does not have **Create Computer objects** permission explicitly and can create 10 virtual computer objects (VCOs).</span></span> <span data-ttu-id="6c20e-140">Nach der Erstellung von 10 VCOs können keine weiteren VCOs erstellt werden.</span><span class="sxs-lookup"><span data-stu-id="6c20e-140">After 10 VCOs are created, the creation of additional VCOs will fail.</span></span> <span data-ttu-id="6c20e-141">Sie können das vermeiden, indem Sie dem CNO des WSFC-Clusters die Berechtigung explizit erteilen.</span><span class="sxs-lookup"><span data-stu-id="6c20e-141">You can avoid this by granting the permission explicitly to the WSFC cluster's CNO.</span></span> <span data-ttu-id="6c20e-142">Beachten Sie, dass VCOs gelöschter Verfügbarkeitsgruppen in Active Directory nicht automatisch gelöscht werden. Sie werden auf die Standardbeschränkung von 10 VCOs angerechnet, sofern sie nicht manuell gelöscht werden.</span><span class="sxs-lookup"><span data-stu-id="6c20e-142">Note that VCOs for availability groups that you have deleted are not automatically deleted in Active Directory and count against your 10 VCO default limit unless they are manually deleted.</span></span><br /><br /> <span data-ttu-id="6c20e-143">Hinweis: In einigen Organisationen verhindert die Sicherheitsrichtlinie, dass einzelnen Benutzerkonten die Berechtigung zum **Erstellen von Computerobjekten** erteilt wird.</span><span class="sxs-lookup"><span data-stu-id="6c20e-143">Note: In some organizations, the security policy prohibits granting **Create Computer objects** permission to individual user accounts.</span></span>|<span data-ttu-id="6c20e-144">*Schritte für die Konfiguration des Kontos für den Benutzer, der den Cluster installiert* unter [Failover Cluster Step-by-Step Guide: Configuring Accounts in Active Directory (Ausführliche Anleitung zu Failoverclustern: Konfigurieren von Konten in Active Directory)](https://technet.microsoft.com/library/cc731002\(WS.10\).aspx#BKMK_steps_installer)</span><span class="sxs-lookup"><span data-stu-id="6c20e-144">*Steps for configuring the account for the person who installs the cluster* in [Failover Cluster Step-by-Step Guide: Configuring Accounts in Active Directory](https://technet.microsoft.com/library/cc731002\(WS.10\).aspx#BKMK_steps_installer)</span></span><br /><br /> <span data-ttu-id="6c20e-145">*Schritte für die Vorabbereitstellung des Clusternamenkontos* unter [Failover Cluster Step-by-Step Guide: Configuring Accounts in Active Directory (Ausführliche Anleitung zu Failoverclustern: Konfigurieren von Konten in Active Directory)](https://technet.microsoft.com/library/cc731002\(WS.10\).aspx#BKMK_steps_precreating)</span><span class="sxs-lookup"><span data-stu-id="6c20e-145">*Steps for prestaging the cluster name account* in [Failover Cluster Step-by-Step Guide: Configuring Accounts in Active Directory](https://technet.microsoft.com/library/cc731002\(WS.10\).aspx#BKMK_steps_precreating)</span></span>|  
|<span data-ttu-id="6c20e-146">Falls in der Organisation erforderlich ist, dass das Computerkonto für den Namen eines virtuellen Listenernetzwerks vorab bereitgestellt wird, müssen Sie Mitglied der Gruppe **Account Operator** sein oder den Domänenadministrator um Unterstützung bitten.</span><span class="sxs-lookup"><span data-stu-id="6c20e-146">If your organization requires that you prestage the computer account for a listener virtual network name, you will need membership in the **Account Operator** group or your domain administrator's assistance.</span></span><br /><br /> <span data-ttu-id="6c20e-147">Tipp: Im Allgemeinen ist es am einfachsten, das Computerkonto für den Namen eines virtuellen Listenernetzwerks nicht vorab bereitzustellen.</span><span class="sxs-lookup"><span data-stu-id="6c20e-147">Tip: Generally, it is simplest not to prestage the computer account for a listener virtual network name.</span></span> <span data-ttu-id="6c20e-148">Lassen Sie bei der Ausführung des Assistenten für die hohe WSFC-Verfügbarkeit nach Möglichkeit die automatische Erstellung und Konfiguration des Kontos zu.</span><span class="sxs-lookup"><span data-stu-id="6c20e-148">If you can, let the account to be created and configured automatically when you run the WSFC High Availability wizard.</span></span>|<span data-ttu-id="6c20e-149">*Schritte für die Vorabbereitstellung eines Kontos für einen gruppierten Dienst oder eine gruppierte Anwendung* in [Failover Cluster Step-by-Step Guide: Configuring Accounts in Active Directory](https://technet.microsoft.com/library/cc731002\(WS.10\).aspx#BKMK_steps_precreating2)(Schritt-für-Schritt-Anleitung für Failover Cluster: Konfigurieren von Konten in Active Directory).</span><span class="sxs-lookup"><span data-stu-id="6c20e-149">*Steps for prestaging an account for a clustered service or application* in [Failover Cluster Step-by-Step Guide: Configuring Accounts in Active Directory](https://technet.microsoft.com/library/cc731002\(WS.10\).aspx#BKMK_steps_precreating2).</span></span>|  
  
###  <a name="sql-server-permissions"></a><a name="SqlPermissions"></a> <span data-ttu-id="6c20e-150">SQL Server-Berechtigungen</span><span class="sxs-lookup"><span data-stu-id="6c20e-150">SQL Server Permissions</span></span>  
  
|<span data-ttu-id="6c20e-151">Aufgabe</span><span class="sxs-lookup"><span data-stu-id="6c20e-151">Task</span></span>|<span data-ttu-id="6c20e-152">Berechtigungen</span><span class="sxs-lookup"><span data-stu-id="6c20e-152">Permissions</span></span>|  
|----------|-----------------|  
|<span data-ttu-id="6c20e-153">So erstellen Sie einen Verfügbarkeitsgruppenlistener</span><span class="sxs-lookup"><span data-stu-id="6c20e-153">To create an availability group listener</span></span>|<span data-ttu-id="6c20e-154">Erfordert die Mitgliedschaft in der festen Serverrolle **sysadmin** und die CREATE AVAILABILITY GROUP-Serverberechtigung, ALTER ANY AVAILABILITY GROUP-Berechtigung oder CONTROL SERVER-Berechtigung.</span><span class="sxs-lookup"><span data-stu-id="6c20e-154">Requires membership in the **sysadmin** fixed server role and either CREATE AVAILABILITY GROUP server permission, ALTER ANY AVAILABILITY GROUP permission, or CONTROL SERVER permission.</span></span>|  
|<span data-ttu-id="6c20e-155">So ändern Sie einen vorhandenen Verfügbarkeitsgruppenlistener</span><span class="sxs-lookup"><span data-stu-id="6c20e-155">To modify an existing availability group listener</span></span>|<span data-ttu-id="6c20e-156">Erfordert die ALTER AVAILABILITY GROUP-Berechtigung für die Verfügbarkeitsgruppe, die CONTROL AVAILABILITY GROUP-Berechtigung, die ALTER ANY AVAILABILITY GROUP-Berechtigung oder die CONTROL SERVER-Berechtigung.</span><span class="sxs-lookup"><span data-stu-id="6c20e-156">Requires ALTER AVAILABILITY GROUP permission on the availability group, CONTROL AVAILABILITY GROUP permission, ALTER ANY AVAILABILITY GROUP permission, or CONTROL SERVER permission.</span></span>|  
  
##  <a name="using-sql-server-management-studio"></a><a name="SSMSProcedure"></a> <span data-ttu-id="6c20e-157">Verwenden von SQL Server Management Studio</span><span class="sxs-lookup"><span data-stu-id="6c20e-157">Using SQL Server Management Studio</span></span>  
  
> [!TIP]  
>  <span data-ttu-id="6c20e-158">Der [Assistent für neue Verfügbarkeitsgruppen](use-the-new-availability-group-dialog-box-sql-server-management-studio.md) unterstützt Sie bei der Erstellung eines Listeners für eine neue Verfügbarkeitsgruppe.</span><span class="sxs-lookup"><span data-stu-id="6c20e-158">The [New Availability Group wizard](use-the-new-availability-group-dialog-box-sql-server-management-studio.md) supports creation of the listener for a new availability group.</span></span>  
  
 <span data-ttu-id="6c20e-159">**So erstellen oder konfigurieren Sie einen Verfügbarkeitsgruppenlistener**</span><span class="sxs-lookup"><span data-stu-id="6c20e-159">**To create or configure an availability group listener**</span></span>  
  
1.  <span data-ttu-id="6c20e-160">Stellen Sie im Objekt-Explorer eine Verbindung mit der Serverinstanz her, die das primäre Replikat der Verfügbarkeitsgruppe hostet, und klicken Sie zum Erweitern der Serverstruktur auf den Servernamen.</span><span class="sxs-lookup"><span data-stu-id="6c20e-160">In Object Explorer, connect to the server instance that hosts the primary replica of the availability group, and click the server name to expand the server tree.</span></span>  
  
2.  <span data-ttu-id="6c20e-161">Erweitern Sie den Knoten **Hohe Verfügbarkeit (immer aktiviert)** und den Knoten **Verfügbarkeitsgruppen** .</span><span class="sxs-lookup"><span data-stu-id="6c20e-161">Expand the **AlwaysOn High Availability** node and the **Availability Groups** node.</span></span>  
  
3.  <span data-ttu-id="6c20e-162">Klicken Sie auf die Verfügbarkeitsgruppe, deren Listener Sie konfigurieren möchten, und wählen Sie eine der folgenden Alternativen aus:</span><span class="sxs-lookup"><span data-stu-id="6c20e-162">Click the availability group whose listener you want to configure, and choose one of the following alternatives:</span></span>  
  
    -   <span data-ttu-id="6c20e-163">Klicken Sie zum Erstellen eines Listeners mit der rechten Maustaste auf den Knoten **Verfügbarkeitsgruppenlistener** , und wählen Sie den Befehl **Neuer Listener** aus.</span><span class="sxs-lookup"><span data-stu-id="6c20e-163">To create a listener, right-click the **Availability group Listeners** node, and select the **New Listener** command.</span></span> <span data-ttu-id="6c20e-164">Das Dialogfeld **Neuer Verfügbarkeitsgruppenlistener** wird geöffnet.</span><span class="sxs-lookup"><span data-stu-id="6c20e-164">This opens the **New Availability Group Listener** dialog box.</span></span> <span data-ttu-id="6c20e-165">Weitere Informationen finden Sie weiter unten in diesem Thema unter [Verfügbarkeitsgruppenlistener hinzufügen (Dialogfeld)](#AddAgListenerDialog).</span><span class="sxs-lookup"><span data-stu-id="6c20e-165">For more information, see [Add Availability Group Listener (Dialog Box)](#AddAgListenerDialog), later in this topic.</span></span>  
  
    -   <span data-ttu-id="6c20e-166">Erweitern Sie zum Ändern der Portnummer eines vorhanden Listeners den Knoten **Verfügbarkeitsgruppenlistener** , klicken Sie mit der rechten Maustaste auf den Listener, und wählen Sie den Befehl **Eigenschaften** aus.</span><span class="sxs-lookup"><span data-stu-id="6c20e-166">To change the port number of an existing listener, expand the **Availability group Listeners** node, right-click the listener, and select the **Properties** command.</span></span> <span data-ttu-id="6c20e-167">Geben Sie die neue Portnummer in das Feld **Port** ein, und klicken Sie auf **OK**.</span><span class="sxs-lookup"><span data-stu-id="6c20e-167">Enter the new port number into the **Port** field, and click **OK**.</span></span>  
  
###  <a name="new-availability-group-listener-dialog-box"></a><a name="AddAgListenerDialog"></a> <span data-ttu-id="6c20e-168">Neuer Verfügbarkeitsgruppenlistener (Dialogfeld)</span><span class="sxs-lookup"><span data-stu-id="6c20e-168">New Availability Group Listener (Dialog Box)</span></span>  
 <span data-ttu-id="6c20e-169">**DNS-Name des Listeners**</span><span class="sxs-lookup"><span data-stu-id="6c20e-169">**Listener DNS Name**</span></span>  
 <span data-ttu-id="6c20e-170">Gibt den DNS-Hostnamen des Verfügbarkeitsgruppenlisteners an.</span><span class="sxs-lookup"><span data-stu-id="6c20e-170">Specifies the DNS host name of the availability group listener.</span></span> <span data-ttu-id="6c20e-171">Der DNS-Name ist eine Zeichenfolge, die in der Domäne und in NetBIOS eindeutig sein muss.</span><span class="sxs-lookup"><span data-stu-id="6c20e-171">The DNS name is a string  must be unique in the domain and in NetBIOS.</span></span> <span data-ttu-id="6c20e-172">Dieser Name darf nur alphanumerische Zeichen, Bindestriche (-) und Unterstriche (_) enthalten (in beliebiger Reihenfolge).</span><span class="sxs-lookup"><span data-stu-id="6c20e-172">This name can contain only alphanumeric characters, dashes (-), and hyphens (_), in any order.</span></span> <span data-ttu-id="6c20e-173">Bei DNS-Hostnamen muss die Groß-/Kleinschreibung beachtet werden.</span><span class="sxs-lookup"><span data-stu-id="6c20e-173">DNS host names are case insensitive.</span></span> <span data-ttu-id="6c20e-174">Die maximale Länge beträgt 15 Zeichen.</span><span class="sxs-lookup"><span data-stu-id="6c20e-174">The maximum length is 15 characters.</span></span>  
  
 <span data-ttu-id="6c20e-175">Weitere Informationen finden Sie weiter oben in diesem Thema unter [Anforderungen für den DNS-Namen eines Verfügbarkeitsgruppenlisteners](#DNSnameReqs).</span><span class="sxs-lookup"><span data-stu-id="6c20e-175">For more information, see [Requirements for the DNS Name of an Availability Group Listener](#DNSnameReqs), earlier in this topic.</span></span>  
  
 <span data-ttu-id="6c20e-176">**Port**</span><span class="sxs-lookup"><span data-stu-id="6c20e-176">**Port**</span></span>  
 <span data-ttu-id="6c20e-177">Der von diesem Listener verwendete TPC-Port.</span><span class="sxs-lookup"><span data-stu-id="6c20e-177">The TPC port used by this listener.</span></span>  
  
 <span data-ttu-id="6c20e-178">**Netzwerkmodus**</span><span class="sxs-lookup"><span data-stu-id="6c20e-178">**Network Mode**</span></span>  
 <span data-ttu-id="6c20e-179">Gibt das vom Listener verwendete TCP-Protokoll an. Folgende Werte sind möglich:</span><span class="sxs-lookup"><span data-stu-id="6c20e-179">Indicates the TCP protocol used by the listener, one of:</span></span>  
  
 <span data-ttu-id="6c20e-180">**DHCP**</span><span class="sxs-lookup"><span data-stu-id="6c20e-180">**DHCP**</span></span>  
 <span data-ttu-id="6c20e-181">Der Listener verwendet eine dynamische IP-Adresse, die von einem Server mit dem Dynamic Host Configuration-Protokoll (DHCP) zugewiesen wird.</span><span class="sxs-lookup"><span data-stu-id="6c20e-181">The listener will us a dynamic IP address that is assigned by a server running the Dynamic Host Configuration Protocol (DHCP).</span></span> <span data-ttu-id="6c20e-182">DHCP ist auf ein einzelnes Subnetz beschränkt.</span><span class="sxs-lookup"><span data-stu-id="6c20e-182">DHCP is limited to a single subnet.</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="6c20e-183">DHCP wird in einer Produktionsumgebung nicht empfohlen.</span><span class="sxs-lookup"><span data-stu-id="6c20e-183">We do not recommend DHCP in production environment.</span></span> <span data-ttu-id="6c20e-184">Wenn die DHCP-IP-Leasedauer bei einer Downtime abläuft, ist eine Verlängerung erforderlich, um die neue IP-Adresse des DHCP-Netzwerks zu registrieren, die dem DNS-Namen des Listeners zugeordnet ist, was sich auf die Clientkonnektivität auswirkt.</span><span class="sxs-lookup"><span data-stu-id="6c20e-184">If there is a down time and the DHCP IP lease expires, extra time is required to register the new DHCP network IP address that is associated with the listener DNS name and impact the client connectivity.</span></span> <span data-ttu-id="6c20e-185">DHCP eignet sich jedoch gut zum Einrichten der Entwicklungs- und Testumgebung, um grundlegende Funktionen von Verfügbarkeitsgruppen und die Integration in Ihre Anwendungen zu überprüfen.</span><span class="sxs-lookup"><span data-stu-id="6c20e-185">However, DHCP is good for setting up your development and testing environment to verify basic functions of availability groups and for integration with your applications.</span></span>  
  
 <span data-ttu-id="6c20e-186">**Statische IP**</span><span class="sxs-lookup"><span data-stu-id="6c20e-186">**Static IP**</span></span>  
 <span data-ttu-id="6c20e-187">Der Listener verwendet mindestens eine statische IP-Adresse.</span><span class="sxs-lookup"><span data-stu-id="6c20e-187">The listener will use one or more static IP addresses.</span></span> <span data-ttu-id="6c20e-188">Zusätzliche IP-Adressen sind optional.</span><span class="sxs-lookup"><span data-stu-id="6c20e-188">Additional IP addresses are optional.</span></span> <span data-ttu-id="6c20e-189">Sie müssen zum Erstellen eines Verfügbarkeitsgruppenlisteners für mehrere Subnetze für alle Subnetze eine statische IP-Adresse in der Listenerkonfiguration angeben.</span><span class="sxs-lookup"><span data-stu-id="6c20e-189">To create an availability group listener across multiple subnets, for each subnet you must specify a static IP address in the listener configuration.</span></span> <span data-ttu-id="6c20e-190">Wenden Sie sich an Ihren Netzwerkadministrator, um diese statischen IP-Adressen abzurufen.</span><span class="sxs-lookup"><span data-stu-id="6c20e-190">Contact your network administrator to get these static IP addresses.</span></span>  
  
 <span data-ttu-id="6c20e-191">Wenn Sie **Statische IP** auswählen, wird unter dem Feld **Netzwerkmodus** ein Subnetzraster angezeigt.</span><span class="sxs-lookup"><span data-stu-id="6c20e-191">If you select **Static IP** a subnet grid appears below the **Network Mode** field.</span></span> <span data-ttu-id="6c20e-192">Dieses Raster enthält Informationen zu allen Subnetzen, auf die von diesem Verfügbarkeitsgruppenlistener zugegriffen werden kann.</span><span class="sxs-lookup"><span data-stu-id="6c20e-192">This grid displays information about each subnet that can be accessed by this availability group listener.</span></span> <span data-ttu-id="6c20e-193">Dieses Raster ist leer, bis Sie eine statische IP-Adresse hinzufügen, indem Sie auf **Hinzufügen**klicken.</span><span class="sxs-lookup"><span data-stu-id="6c20e-193">This grid is empty until you add a static IP address by clicking **Add**.</span></span>  
  
 <span data-ttu-id="6c20e-194">Es gibt folgende Spalten:</span><span class="sxs-lookup"><span data-stu-id="6c20e-194">The columns are as follows:</span></span>  
  
 <span data-ttu-id="6c20e-195">**Subnetz**</span><span class="sxs-lookup"><span data-stu-id="6c20e-195">**Subnet**</span></span>  
 <span data-ttu-id="6c20e-196">Zeigt den Bezeichner aller Subnetze an, die Sie dem Verfügbarkeitsgruppenlistener hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="6c20e-196">Displays the identifier of each subnet that you add to the availability group listener.</span></span>  
  
 <span data-ttu-id="6c20e-197">**IP-Adresse**</span><span class="sxs-lookup"><span data-stu-id="6c20e-197">**IP Address**</span></span>  
 <span data-ttu-id="6c20e-198">Zeigt die IP-Adresse eines bestimmten Subnetzes an.</span><span class="sxs-lookup"><span data-stu-id="6c20e-198">Displays the IP address of a given subnet.</span></span>  <span data-ttu-id="6c20e-199">Für ein bestimmtes Subnetz ist die IP-Adresse entweder eine IPv4-Adresse oder eine IPv6-Adresse.</span><span class="sxs-lookup"><span data-stu-id="6c20e-199">For a given subnet, the IP address is either an IPv4 address or an IPv6 address.</span></span>  
  
 <span data-ttu-id="6c20e-200">**Add (Hinzufügen)**</span><span class="sxs-lookup"><span data-stu-id="6c20e-200">**Add**</span></span>  
 <span data-ttu-id="6c20e-201">Klicken Sie zum Hinzufügen einer statischen IP-Adresse zu einem ausgewählten Subnetz oder einem anderen Subnetz für diesen Listener auf diese Option.</span><span class="sxs-lookup"><span data-stu-id="6c20e-201">Click to add to add a static IP address to a selected subnet or to another subnet for this listener.</span></span> <span data-ttu-id="6c20e-202">Das Dialogfeld **IP-Adresse hinzufügen** wird geöffnet.</span><span class="sxs-lookup"><span data-stu-id="6c20e-202">This opens the **Add IP Address** dialog box.</span></span> <span data-ttu-id="6c20e-203">Weitere Informationen finden Sie im Hilfethema [Dialogfeld IP-Adresse hinzufügen&#40;SQL Server Management Studio&#41;](add-ip-address-dialog-box-sql-server-management-studio.md).</span><span class="sxs-lookup"><span data-stu-id="6c20e-203">For more information, see the [Add IP Address Dialog Box &#40;SQL Server Management Studio&#41;](add-ip-address-dialog-box-sql-server-management-studio.md) help topic.</span></span>  
  
 <span data-ttu-id="6c20e-204">**Remove**</span><span class="sxs-lookup"><span data-stu-id="6c20e-204">**Remove**</span></span>  
 <span data-ttu-id="6c20e-205">Klicken Sie, um das ausgewählte Subnetz von diesem Listener zu entfernen.</span><span class="sxs-lookup"><span data-stu-id="6c20e-205">Click to remove the selected subnet from this listener.</span></span>  
  
 <span data-ttu-id="6c20e-206">**OK**</span><span class="sxs-lookup"><span data-stu-id="6c20e-206">**OK**</span></span>  
 <span data-ttu-id="6c20e-207">Klicken Sie, um den angegebenen Verfügbarkeitsgruppenlistener zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="6c20e-207">Click to create the specified availability group listener.</span></span>  
  
##  <a name="using-transact-sql"></a><a name="TsqlProcedure"></a> <span data-ttu-id="6c20e-208">Verwenden von Transact-SQL</span><span class="sxs-lookup"><span data-stu-id="6c20e-208">Using Transact-SQL</span></span>  

### <a name="to-create-or-configure-an-availability-group-listener"></a><span data-ttu-id="6c20e-209">So erstellen oder konfigurieren Sie einen Verfügbarkeitsgruppenlistener</span><span class="sxs-lookup"><span data-stu-id="6c20e-209">To create or configure an availability group listener</span></span>
  
1.  <span data-ttu-id="6c20e-210">Stellen Sie eine Verbindung mit der Serverinstanz her, die das primäre Replikat hostet.</span><span class="sxs-lookup"><span data-stu-id="6c20e-210">Connect to the server instance that hosts the primary replica.</span></span>  
  
2.  <span data-ttu-id="6c20e-211">Verwenden Sie die LISTENER-Option der [CREATE AVAILABILITY GROUP](/sql/t-sql/statements/create-availability-group-transact-sql) -Anweisung oder die ADD LISTENER-Option der [ALTER AVAILABILITY GROUP](/sql/t-sql/statements/alter-availability-group-transact-sql) -Anweisung.</span><span class="sxs-lookup"><span data-stu-id="6c20e-211">Use the LISTENER option of the [CREATE AVAILABILITY GROUP](/sql/t-sql/statements/create-availability-group-transact-sql) statement or the ADD LISTENER option of the [ALTER AVAILABILITY GROUP](/sql/t-sql/statements/alter-availability-group-transact-sql) statement.</span></span>  
  
     <span data-ttu-id="6c20e-212">Im folgenden Beispiel wird einer vorhandenen Verfügbarkeitsgruppe namens `MyAg2`ein Verfügbarkeitsgruppenlistener hinzugefügt.</span><span class="sxs-lookup"><span data-stu-id="6c20e-212">The following example adds an availability group listener to an existing availability group named `MyAg2`.</span></span> <span data-ttu-id="6c20e-213">Der eindeutige DNS-Name `MyAg2ListenerIvP6`wird für diesen Listener angegeben.</span><span class="sxs-lookup"><span data-stu-id="6c20e-213">A unique DNS name, `MyAg2ListenerIvP6`, is specified for this listener.</span></span> <span data-ttu-id="6c20e-214">Da sich zwei Replikate in unterschiedlichen Subnetzen befinden, verwendet der Listener entsprechend der Empfehlung statische IP-Adressen.</span><span class="sxs-lookup"><span data-stu-id="6c20e-214">The two replicas are on different subnets, so , as recommended, the listener uses static IP addresses.</span></span> <span data-ttu-id="6c20e-215">Für die beiden Verfügbarkeitsreplikate gibt die WITH IP-Klausel jeweils die statische IP-Adresse `2001:4898:f0:f00f::cf3c and 2001:4898:e0:f213::4ce2`an, die das IPv6-Format verwendet.</span><span class="sxs-lookup"><span data-stu-id="6c20e-215">For each of the two availability replicas, the WITH IP clause specifies a static IP address, `2001:4898:f0:f00f::cf3c and 2001:4898:e0:f213::4ce2`, which use the IPv6 format.</span></span> <span data-ttu-id="6c20e-216">In diesem Beispiel wird zudem das optionale PORT-Argument verwendet, um Port `60173` als Listenerport anzugeben.</span><span class="sxs-lookup"><span data-stu-id="6c20e-216">This example also specifies uses the optional PORT argument to specify port `60173` as the listener port.</span></span>  
  
    ```sql
    ALTER AVAILABILITY GROUP MyAg2   
          ADD LISTENER 'MyAg2ListenerIvP6' ( WITH IP ( ('2001:db88:f0:f00f::cf3c'),('2001:4898:e0:f213::4ce2') ) , PORT = 60173 );   
    GO  
    ```  
  
##  <a name="using-powershell"></a><a name="PowerShellProcedure"></a> <span data-ttu-id="6c20e-217">PowerShell</span><span class="sxs-lookup"><span data-stu-id="6c20e-217">Using PowerShell</span></span>  

### <a name="to-create-or-configure-an-availability-group-listener"></a><span data-ttu-id="6c20e-218">So erstellen oder konfigurieren Sie einen Verfügbarkeitsgruppenlistener</span><span class="sxs-lookup"><span data-stu-id="6c20e-218">To create or configure an availability group listener</span></span> 
  
1.  <span data-ttu-id="6c20e-219">Ändern Sie das Verzeichnis (`cd`) zur Serverinstanz, die das primäre Replikat hostet.</span><span class="sxs-lookup"><span data-stu-id="6c20e-219">Change directory (`cd`) to the server instance that hosts the primary replica.</span></span>  
  
2.  <span data-ttu-id="6c20e-220">Erstellen oder ändern Sie einen Verfügbarkeitsgruppenlistener mit einem der folgenden Cmdlets:</span><span class="sxs-lookup"><span data-stu-id="6c20e-220">To create or modify an availability group listener use one of the following cmdlets:</span></span>  
  
     `New-SqlAvailabilityGroupListener`  
     <span data-ttu-id="6c20e-221">Erstellt einen neuen Verfügbarkeitsgruppenlistener und fügt ihn einer vorhandenen Verfügbarkeitsgruppe hinzu.</span><span class="sxs-lookup"><span data-stu-id="6c20e-221">Creates a new availability group listener and attaches it to an existing availability group.</span></span>  
  
     <span data-ttu-id="6c20e-222">Beispielsweise wird durch den folgenden `New-SqlAvailabilityGroupListener`-Befehl ein Verfügbarkeitsgruppenlistener namens `MyListener` für die Verfügbarkeitsgruppe `MyAg` erstellt.</span><span class="sxs-lookup"><span data-stu-id="6c20e-222">For example, the following `New-SqlAvailabilityGroupListener` command creates an availability group listener named `MyListener` for the availability group `MyAg`.</span></span> <span data-ttu-id="6c20e-223">Der Listener verwendet die an den `-StaticIp`-Parameter übergebene IPv4-Adresse als virtuelle IP-Adresse.</span><span class="sxs-lookup"><span data-stu-id="6c20e-223">This listener will use the IPv4 address passed to the `-StaticIp` parameter as its virtual IP address.</span></span>  
  
    ```powershell
    New-SqlAvailabilityGroupListener -Name MyListener `
    -StaticIp '192.168.3.1/255.255.252.0' `
    -Path SQLSERVER:\Sql\Computer\Instance\AvailabilityGroups\MyAg
    ```  
  
     `Set-SqlAvailabilityGroupListener`  
     <span data-ttu-id="6c20e-224">Ändert die Porteinstellung eines vorhandenen Verfügbarkeitsgruppenlisteners.</span><span class="sxs-lookup"><span data-stu-id="6c20e-224">Modifies the port setting on an existing availability group listener.</span></span>  
  
     <span data-ttu-id="6c20e-225">Durch den folgenden `Set-SqlAvailabilityGroupListener`-Befehl wird die Portnummer für den Verfügbarkeitsgruppenlistener `MyListener` beispielsweise auf `1535` festgelegt.</span><span class="sxs-lookup"><span data-stu-id="6c20e-225">For example, the following `Set-SqlAvailabilityGroupListener` command sets the port number for the availability group listener named `MyListener` to `1535`.</span></span> <span data-ttu-id="6c20e-226">Dieser Port wird zum Lauschen auf Verbindungen mit dem Listener verwendet.</span><span class="sxs-lookup"><span data-stu-id="6c20e-226">This port is used to listen for connections to the listener.</span></span>  
  
    ```powershell
    Set-SqlAvailabilityGroupListener -Port 1535 `
    -Path SQLSERVER:\Sql\PrimaryServer\InstanceName\AvailabilityGroups\MyAg\AGListeners\MyListener  
    ```  
  
     `Add-SqlAGListenerstaticIp`  
     <span data-ttu-id="6c20e-227">Fügt der vorhandenen Konfiguration eines Verfügbarkeitsgruppenlisteners eine statische IP-Adresse hinzu.</span><span class="sxs-lookup"><span data-stu-id="6c20e-227">Adds a static IP address to an existing availability group listener configuration.</span></span> <span data-ttu-id="6c20e-228">Die IP-Adresse kann eine IPv4-Adresse mit Subnetz oder eine IPv6-Adresse sein.</span><span class="sxs-lookup"><span data-stu-id="6c20e-228">The IP address can be an IPv4 address with subnet, or an IPv6 address.</span></span>  
  
     <span data-ttu-id="6c20e-229">Durch den folgenden `Add-SqlAGListenerstaticIp`-Befehl wird dem Verfügbarkeitsgruppenlistener `MyListener` in der Verfügbarkeitsgruppe `MyAg` beispielsweise eine statische IPv4-Adresse hinzugefügt.</span><span class="sxs-lookup"><span data-stu-id="6c20e-229">For example, the following `Add-SqlAGListenerstaticIp` command adds a static IPv4 address to the availability group listener `MyListener` on the availability group `MyAg`.</span></span> <span data-ttu-id="6c20e-230">Diese IPv6-Adresse stellt die virtuelle IP-Adresse des Listeners im Subnetz `255.255.252.0`dar.</span><span class="sxs-lookup"><span data-stu-id="6c20e-230">This IPv6 address serves as the virtual IP address of the listener on the subnet `255.255.252.0`.</span></span> <span data-ttu-id="6c20e-231">Wenn sich die Verfügbarkeitsgruppe über mehrere Subnetze erstreckt, sollten Sie dem Listener eine statische IP-Adresse für jedes Subnetz hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="6c20e-231">If the availability group spans multiple subnets, you should add a static IP address for each subnet to the listener.</span></span>  
  
    ```powershell
    $path = "SQLSERVER:\SQL\PrimaryServer\InstanceName\AvailabilityGroups\MyAg\AGListeners\ MyListener" `
    Add-SqlAGListenerstaticIp -Path $path `
    -StaticIp "2001:0db8:85a3:0000:0000:8a2e:0370:7334"  
    ```  
  
    > [!NOTE]  
    >  <span data-ttu-id="6c20e-232">Verwenden Sie das Cmdlet **Get-Help** in der PowerShell-Umgebung, um die Syntax eines Cmdlets anzuzeigen [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="6c20e-232">To view the syntax of a cmdlet, use the **Get-Help**  cmdlet in the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] PowerShell environment.</span></span> <span data-ttu-id="6c20e-233">Weitere Informationen finden Sie unter [Get Help SQL Server PowerShell](../../../powershell/sql-server-powershell.md).</span><span class="sxs-lookup"><span data-stu-id="6c20e-233">For more information, see [Get Help SQL Server PowerShell](../../../powershell/sql-server-powershell.md).</span></span>  
  
<span data-ttu-id="6c20e-234">Informationen zum Einrichten und Verwenden des SQL Server PowerShell Anbieters finden Sie unter [SQL Server PowerShell Provider](../../../powershell/sql-server-powershell-provider.md).</span><span class="sxs-lookup"><span data-stu-id="6c20e-234">To set up and use the SQL Server PowerShell provider, see [SQL Server PowerShell Provider](../../../powershell/sql-server-powershell-provider.md).</span></span>
  
## <a name="troubleshooting"></a><span data-ttu-id="6c20e-235">Problembehandlung</span><span class="sxs-lookup"><span data-stu-id="6c20e-235">Troubleshooting</span></span>  
  
###  <a name="failure-to-create-an-availability-group-listener-because-of-active-directory-quotas"></a><a name="ADQuotas"></a><span data-ttu-id="6c20e-236">Fehler beim Erstellen eines verfügbarkeitsgruppenlistener aufgrund von Active Directory Kontingenten.</span><span class="sxs-lookup"><span data-stu-id="6c20e-236">Failure to Create An Availability Group Listener Because of Active Directory Quotas</span></span>  
 <span data-ttu-id="6c20e-237">Die Erstellung eines neuen Verfügbarkeitsgruppenlisteners schlägt möglicherweise beim Erstellen fehl, da Sie ein Active Directory-Kontingent für das teilnehmende Clusterknoten-Computerkonto erreicht haben.</span><span class="sxs-lookup"><span data-stu-id="6c20e-237">The creation of a new availability group listener may fail upon creation because you have reached an Active Directory quota for the participating cluster node machine account.</span></span>  <span data-ttu-id="6c20e-238">Weitere Informationen finden Sie in den folgenden Artikeln:</span><span class="sxs-lookup"><span data-stu-id="6c20e-238">For more information, see the following articles:</span></span>  
  
-   [<span data-ttu-id="6c20e-239">Hyperlink " https://support.microsoft.com/kb/307532 " Behandlung von Problemen mit dem Cluster Dienst Konto beim Ändern von Computer Objekten</span><span class="sxs-lookup"><span data-stu-id="6c20e-239">HYPERLINK "https://support.microsoft.com/kb/307532" How to Troubleshoot the Cluster Service Account When It Modifies Computer Objects</span></span>](https://support.microsoft.com/kb/307532)  
  
-   <span data-ttu-id="6c20e-240">[Hyperlink " https://technet.microsoft.com/library/cc904295(WS.10).aspx " Active Directory Kontingente](https://technet.microsoft.com/library/cc904295\(WS.10\).aspx)</span><span class="sxs-lookup"><span data-stu-id="6c20e-240">[HYPERLINK "https://technet.microsoft.com/library/cc904295(WS.10).aspx" Active Directory Quotas](https://technet.microsoft.com/library/cc904295\(WS.10\).aspx)</span></span>  
  
##  <a name="follow-up-after-creating-an-availability-group-listener"></a><a name="FollowUp"></a> <span data-ttu-id="6c20e-241">Nachverfolgung: Nach dem Erstellen eines Verfügbarkeitsgruppenlisteners</span><span class="sxs-lookup"><span data-stu-id="6c20e-241">Follow-up: After Creating an Availability Group Listener</span></span>  
  
###  <a name="multisubnetfailover-keyword-and-associated-features"></a><a name="MultiSubnetFailover"></a><span data-ttu-id="6c20e-242">Multisubnetfailover-Schlüsselwort und zugehörige Funktionen</span><span class="sxs-lookup"><span data-stu-id="6c20e-242">MultiSubnetFailover Keyword and Associated Features</span></span>  
 <span data-ttu-id="6c20e-243">`MultiSubnetFailover` ist ein neues Schlüsselwort für Verbindungszeichenfolgen, das ein schnelleres Failover bei AlwaysOn-Verfügbarkeitsgruppen und AlwaysOn-Failoverclusterinstanzen in SQL Server 2012 ermöglicht.</span><span class="sxs-lookup"><span data-stu-id="6c20e-243">`MultiSubnetFailover` is a new connection string keyword used to enable faster failover with AlwaysOn Availability Groups and AlwaysOn Failover Cluster Instances in SQL Server 2012.</span></span> <span data-ttu-id="6c20e-244">Wenn in der Verbindungszeichenfolge `MultiSubnetFailover=True` festgelegt wird, werden die folgenden drei Teilfunktionen aktiviert:</span><span class="sxs-lookup"><span data-stu-id="6c20e-244">The following three sub-features are enabled when `MultiSubnetFailover=True` is set in connection string:</span></span>  
  
-   <span data-ttu-id="6c20e-245">Schnelleres Multisubnetz-Failover auf einen Multisubnetzlistener für eine AlwaysOn-Verfügbarkeitsgruppe oder Failoverclusterinstanzen.</span><span class="sxs-lookup"><span data-stu-id="6c20e-245">Faster multi-subnet failover to a multi-subnet listener for an AlwaysOn Availability Group or Failover Cluster Instances.</span></span>  
  
-   <span data-ttu-id="6c20e-246">Schnelleres Einzelsubnetz-Failover auf einen Einzelsubnetzlistener für eine AlwaysOn-Verfügbarkeitsgruppe oder Failoverclusterinstanzen.</span><span class="sxs-lookup"><span data-stu-id="6c20e-246">Faster single subnet failover to a single subnet listener for an AlwaysOn Availability Group or Failover Cluster Instances.</span></span>  
  
    -   <span data-ttu-id="6c20e-247">Diese Funktion wird für Verbindungen mit einem Listener verwendet, der über eine einzelne IP in einem einzelnen Subnetz verfügt.</span><span class="sxs-lookup"><span data-stu-id="6c20e-247">This feature is used when connecting to a listener that has a single IP in a single subnet.</span></span> <span data-ttu-id="6c20e-248">Dadurch werden TCP-Verbindungsversuche aggressiver wiederholt, um Failovervorgänge einzelner Subnetze zu beschleunigen.</span><span class="sxs-lookup"><span data-stu-id="6c20e-248">This performs more aggressive TCP connection retries to speed up single subnet failovers.</span></span>  
  
-   <span data-ttu-id="6c20e-249">Auflösung benannter Instanzen in eine Multisubnetz-AlwaysOn-Failoverclusterinstanz.</span><span class="sxs-lookup"><span data-stu-id="6c20e-249">Named instance resolution to a multi-subnet AlwaysOn Failover Cluster Instance.</span></span>  
  
    -   <span data-ttu-id="6c20e-250">Wird verwendet, um die Auflösung benannter Instanzen für AlwaysOn-Failoverclusterinstanzen mit mehreren Subnetzendpunkten zu unterstützen.</span><span class="sxs-lookup"><span data-stu-id="6c20e-250">This is to add named instance resolution support for an AlwaysOn Failover Cluster Instances with multiple subnet endpoints.</span></span>  
  
 <span data-ttu-id="6c20e-251">**"MultiSubnetFailover=True" wird von NET Framework 3.5 oder OLE DB nicht unterstützt.**</span><span class="sxs-lookup"><span data-stu-id="6c20e-251">**MultiSubnetFailover=True Not Supported by NET Framework 3.5 or OLEDB**</span></span>  
  
 <span data-ttu-id="6c20e-252">**Problem:** Wenn die Verfügbarkeits Gruppe oder Failoverclusterinstanz in Abhängigkeit von mehreren IP-Adressen aus unterschiedlichen Subnetzen über einen Listenernamen (Netzwerkname oder Client Zugriffspunkt im wsfc-Cluster-Manager) verfügt und Sie entweder ADO.net mit .NET Framework 3.5 SP1 oder SQL Native Client 11,0 OLEDB verwenden, erreichen möglicherweise 50% der Client Verbindungsanforderungen an den verfügbarkeitsgruppenlistener ein Verbindungs Timeout</span><span class="sxs-lookup"><span data-stu-id="6c20e-252">**Issue:** If your Availability Group or Failover Cluster Instance has a listener name (known as the network name or Client Access Point in the WSFC Cluster Manager) depending on multiple IP addresses from different subnets, and you are using either ADO.NET with .NET Framework 3.5SP1 or SQL Native Client 11.0 OLEDB, potentially 50% of your client-connection requests to the availability group listener will hit a connection timeout.</span></span>  
  
 <span data-ttu-id="6c20e-253">**Problemumgehungen:** Eine der folgenden Lösungen wird empfohlen.</span><span class="sxs-lookup"><span data-stu-id="6c20e-253">**Workarounds:** We recommend that you do one of the following tasks.</span></span>  
  
-   <span data-ttu-id="6c20e-254">Wenn Sie nicht über die Berechtigung zur Bearbeitung von Clusterressourcen verfügen, ändern Sie den Wert für das Verbindungstimeout in 30 Sekunden (20-sekündiger TCP-Timeoutzeitraum plus Puffer von 10 Sekunden).</span><span class="sxs-lookup"><span data-stu-id="6c20e-254">If do not have the permission to manipulate cluster resources, change your connection timeout to 30 seconds (this value results in a 20-second TCP timeout period plus a 10-second buffer).</span></span>  
  
     <span data-ttu-id="6c20e-255">**Vorteile:** Beim Eintreten eines subnetzübergreifenden Failovers ist die Clientwiederherstellungszeit nur kurz.</span><span class="sxs-lookup"><span data-stu-id="6c20e-255">**Pros**: If a cross-subnet failover occurs, client recovery time is short.</span></span>  
  
     <span data-ttu-id="6c20e-256">**Nachteile:** Für die Hälfte der Clientverbindungen sind mehr als 20 Sekunden erforderlich.</span><span class="sxs-lookup"><span data-stu-id="6c20e-256">**Cons**: Half of the client connections will take more than 20 seconds</span></span>  
  
-   <span data-ttu-id="6c20e-257">Wenn Sie über die notwendigen Berechtigungen zum Bearbeiten der Clusterressourcen verfügen, sollten Sie den Netzwerknamen des Verfügbarkeitsgruppenlisteners auf `RegisterAllProvidersIP=0`festlegen.</span><span class="sxs-lookup"><span data-stu-id="6c20e-257">If you have the permission to manipulate cluster resources, the more recommended approach is to set the network name of your availability group listener to `RegisterAllProvidersIP=0`.</span></span> <span data-ttu-id="6c20e-258">Weitere Informationen finden Sie weiter unten in diesem Abschnitt unter „Einstellung RegisterAllProvidersIP“.</span><span class="sxs-lookup"><span data-stu-id="6c20e-258">For more information, see "RegisterAllProvidersIP Setting" later in this section.</span></span>  
  
     <span data-ttu-id="6c20e-259">**Vorteile:** Sie müssen den Clientverbindungs-Timeoutwert nicht erhöhen.</span><span class="sxs-lookup"><span data-stu-id="6c20e-259">**Pros:** You do not need to increase your client-connection timeout value.</span></span>  
  
     <span data-ttu-id="6c20e-260">**Nachteile:** Beim Auftreten eines subnetzübergreifenden Failovers kann die Client Wiederherstellungszeit 15 Minuten oder länger betragen, je nach ihrer `HostRecordTTL` Einstellung und der Einstellung Ihres Site übergreifenden DNS/AD-Replikations Zeitplans.</span><span class="sxs-lookup"><span data-stu-id="6c20e-260">**Cons:** If a cross-subnet failover occurs, the client recovery time could be 15 minutes or longer, depending on your `HostRecordTTL` setting and the setting of your cross-site DNS/AD replication schedule.</span></span>  
  
###  <a name="registerallprovidersip-setting"></a><a name="RegisterAllProvidersIP"></a><span data-ttu-id="6c20e-261">Registerallprovidersip-Einstellung</span><span class="sxs-lookup"><span data-stu-id="6c20e-261">RegisterAllProvidersIP Setting</span></span>  
 <span data-ttu-id="6c20e-262">Bei der Erstellung eines Verfügbarkeitsgruppenlisteners über [!INCLUDE[ssManStudioFull](../../../includes/ssmanstudiofull-md.md)], [!INCLUDE[tsql](../../../includes/tsql-md.md)] oder PowerShell, wird der Client Access Point in WSFC mit Festlegung der Einstellung `RegisterAllProvidersIP` auf 1 (true) erstellt.</span><span class="sxs-lookup"><span data-stu-id="6c20e-262">When you use [!INCLUDE[ssManStudioFull](../../../includes/ssmanstudiofull-md.md)], [!INCLUDE[tsql](../../../includes/tsql-md.md)], or PowerShell to create an availability group listener, the Client Access Point is created in WSFC with the `RegisterAllProvidersIP` property set to 1 (true).</span></span> <span data-ttu-id="6c20e-263">Der Effekt dieses Eigenschaftswerts hängt gemäß den folgenden Angaben von der Clientverbindungszeichenfolge ab:</span><span class="sxs-lookup"><span data-stu-id="6c20e-263">The effect of this property value depends on the client connection string, as follows:</span></span>  
  
-   <span data-ttu-id="6c20e-264">Verbindungszeichenfolgen, die `MultiSubnetFailover` auf "true" festlegen</span><span class="sxs-lookup"><span data-stu-id="6c20e-264">Connection strings that set `MultiSubnetFailover` to true</span></span>  
  
     [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] <span data-ttu-id="6c20e-265">legt die `RegisterAllProvidersIP`-Eigenschaft auf 1 fest, um die Wiederverbindungszeit nach einem Failover für Clients zu reduzieren, deren Clientverbindungszeichenfolgen wie empfohlen `MultiSubnetFailover = True` angeben.</span><span class="sxs-lookup"><span data-stu-id="6c20e-265">sets the  `RegisterAllProvidersIP` property to 1 in order to reduce re-connection time after a failover for clients whose client connection strings specify `MultiSubnetFailover = True`, as recommended.</span></span> <span data-ttu-id="6c20e-266">Beachten Sie, dass die Clients zur Verwendung der Multisubnetzfunktion des Listeners möglicherweise einen Datenanbieter, der das `MultiSubnetFailover`-Schlüsselwort unterstützt, benötigen.</span><span class="sxs-lookup"><span data-stu-id="6c20e-266">Note that to take advantage of the listener multi-subnet feature, your clients might require a data provider that supports the `MultiSubnetFailover` keyword.</span></span> <span data-ttu-id="6c20e-267">Weitere Informationen zur Treiberunterstützung für Multisubnetzfailover finden Sie unter [AlwaysOn-Clientkonnektivität &#40;SQL Server&#41;](always-on-client-connectivity-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="6c20e-267">For information about driver support for multi-subnet failover, see [AlwaysOn Client Connectivity &#40;SQL Server&#41;](always-on-client-connectivity-sql-server.md).</span></span>  
  
     <span data-ttu-id="6c20e-268">Informationen zu Multisubnetzclustering finden Sie unter [SQL Server-Multisubnetzclustering &#40;SQL Server&#41;](../../../sql-server/failover-clusters/windows/sql-server-multi-subnet-clustering-sql-server.md)verwendet.</span><span class="sxs-lookup"><span data-stu-id="6c20e-268">For information about multi-subnet clustering, see [SQL Server Multi-Subnet Clustering &#40;SQL Server&#41;](../../../sql-server/failover-clusters/windows/sql-server-multi-subnet-clustering-sql-server.md).</span></span>  
  
    > [!TIP]  
    >  <span data-ttu-id="6c20e-269">Ist `RegisterAllProvidersIP = 1`, wird beim Ausführen des WSFC-Konfigurationsüberprüfungs-Assistenten im WSFC-Cluster die folgende Warnmeldung generiert:</span><span class="sxs-lookup"><span data-stu-id="6c20e-269">When `RegisterAllProvidersIP = 1`, if you run the WSFC Validate a Configuration Wizard on the WSFC cluster, the wizard generates the following warning message:</span></span>  
    >   
    >  <span data-ttu-id="6c20e-270">„Die RegisterAllProviderIP-Eigenschaft für Netzwerkname 'Name:&lt;Netzwerkname' ist auf 1 festgelegt. Für die aktuelle Clusterkonfiguration muss dieser Wert auf 0 festgelegt werden.“</span><span class="sxs-lookup"><span data-stu-id="6c20e-270">"The RegisterAllProviderIP property for network name 'Name:<network_name>' is set to 1 For the current cluster configuration this value should be set to 0."</span></span>  
    >   
    >  <span data-ttu-id="6c20e-271">Ignorieren Sie diese Meldung.</span><span class="sxs-lookup"><span data-stu-id="6c20e-271">Please ignore this message.</span></span>  
  
-   <span data-ttu-id="6c20e-272">Verbindungszeichenfolgen, die `MultiSubnetFailover` nicht auf "true" festlegen</span><span class="sxs-lookup"><span data-stu-id="6c20e-272">Connection strings that do not set `MultiSubnetFailover` to true</span></span>  
  
     <span data-ttu-id="6c20e-273">Bei `RegisterAllProvidersIP = 1`treten bei Clients, deren Verbindungszeichenfolgen nicht `MultiSubnetFailover = True`verwenden, Verbindungen mit hoher Latenzzeit auf.</span><span class="sxs-lookup"><span data-stu-id="6c20e-273">When `RegisterAllProvidersIP = 1`, any clients whose connection strings do not use `MultiSubnetFailover = True`, will experience high latency connections.</span></span> <span data-ttu-id="6c20e-274">Dies liegt daran, dass diese Clients versuchen, sequenziell Verbindungen zu allen IPs herzustellen.</span><span class="sxs-lookup"><span data-stu-id="6c20e-274">This occurs because these clients attempt connections to all IPs sequentially.</span></span> <span data-ttu-id="6c20e-275">Wird dagegen `RegisterAllProvidersIP` in 0 geändert, wird die aktive IP-Adresse im Clientzugriffspunkt im WSFC-Cluster registriert und so die Latenzzeit für Legacyclients reduziert.</span><span class="sxs-lookup"><span data-stu-id="6c20e-275">In contrast, if `RegisterAllProvidersIP` is changed to 0, the active IP address is registered in the Client Access Point in the WSFC cluster, reducing latency for legacy clients.</span></span> <span data-ttu-id="6c20e-276">Wenn Sie Legacy Clients haben, die eine Verbindung mit einem verfügbarkeitsgruppenlistener herstellen müssen und die-Eigenschaft nicht verwenden können `MultiSubnetFailover` , empfiehlt es sich daher, `RegisterAllProvidersIP` zu 0 zu wechseln.</span><span class="sxs-lookup"><span data-stu-id="6c20e-276">Therefore, if you have legacy clients that need to connect to an availability group listener and cannot use the `MultiSubnetFailover` property, we recommend that you change `RegisterAllProvidersIP` to 0.</span></span>  
  
    > [!IMPORTANT]  
    >  <span data-ttu-id="6c20e-277">Wenn Sie über den WSFC-Cluster (Failovercluster-Manager-GUI) einen Verfügbarkeitsgruppenlistener erstellen, ist `RegisterAllProvidersIP` standardmäßig 0 (false).</span><span class="sxs-lookup"><span data-stu-id="6c20e-277">When you create an availability group listener through the WSFC cluster (Failover Cluster Manager GUI), `RegisterAllProvidersIP` will be 0 (false) by default.</span></span>  
  
###  <a name="hostrecordttl-setting"></a><a name="HostRecordTTL"></a> <span data-ttu-id="6c20e-278">Einstellung HostRecordTTL</span><span class="sxs-lookup"><span data-stu-id="6c20e-278">HostRecordTTL Setting</span></span>  
 <span data-ttu-id="6c20e-279">Standardmäßig werden von Clients DNS-Clustereinträge 20 Minuten zwischengespeichert.</span><span class="sxs-lookup"><span data-stu-id="6c20e-279">By default, clients cache cluster DNS records for 20 minutes.</span></span>  <span data-ttu-id="6c20e-280">Durch das Reduzieren von `HostRecordTTL`, d. h. der Gültigkeitsdauer (Time to Live, TTL), für den zwischengespeicherten Eintrag können Legacyclients schneller wieder Verbindungen herstellen.</span><span class="sxs-lookup"><span data-stu-id="6c20e-280">By reducing `HostRecordTTL`, the Time to Live (TTL), for the cached record, legacy clients may reconnect more quickly.</span></span>  <span data-ttu-id="6c20e-281">Das Verringern der `HostRecordTTL`-Einstellung kann jedoch auch zu einem erhöhten Datenverkehr zu den DN-Servern führen.</span><span class="sxs-lookup"><span data-stu-id="6c20e-281">However, reducing the `HostRecordTTL` setting may also result in increased traffic to the DN servers.</span></span>  
  
###  <a name="sample-powershell-script-to-disable-registerallprovidersip-and-reduce-ttl"></a><a name="SampleScript"></a><span data-ttu-id="6c20e-282">PowerShell-Beispielskript zur Deaktivierung von registerallprovidersip und zur Reduzierung der Gültigkeitsdauer</span><span class="sxs-lookup"><span data-stu-id="6c20e-282">Sample PowerShell Script to Disable RegisterAllProvidersIP and Reduce TTL</span></span>  
 <span data-ttu-id="6c20e-283">Im folgenden PowerShell-Beispiel wird veranschaulicht, wie der `RegisterAllProvidersIP`-Clusterparameter und der `HostRecordTTL`-Clusterparameter für die Listenerressource konfiguriert werden.</span><span class="sxs-lookup"><span data-stu-id="6c20e-283">The following PowerShell example demonstrates how to configure both the `RegisterAllProvidersIP` and `HostRecordTTL` cluster parameters for the listener resource.</span></span>  <span data-ttu-id="6c20e-284">Der DNS-Eintrag wird statt der standardmäßigen 20 Minuten nur 5 Minuten zwischengespeichert.</span><span class="sxs-lookup"><span data-stu-id="6c20e-284">The DNS record will be cached for 5 minutes rather than the default 20 minutes.</span></span>  <span data-ttu-id="6c20e-285">Das Ändern beider Clusterparameter kann außerdem die Zeit zum Herstellen einer Verbindung mit der richtigen IP-Adresse nach einem Failover für Legacyclients verkürzen, die den `MultiSubnetFailover`-Parameter nicht verwenden können.</span><span class="sxs-lookup"><span data-stu-id="6c20e-285">Modifying both cluster parameters may reduce the time to connect to the correct IP address after a failover for legacy clients that cannot use the `MultiSubnetFailover` parameter.</span></span>  <span data-ttu-id="6c20e-286">Ersetzen Sie `yourListenerName` durch den Namen des Listeners, den Sie ändern.</span><span class="sxs-lookup"><span data-stu-id="6c20e-286">Replace `yourListenerName` with the name of the listener that you are changing.</span></span>  
  
```powershell
Import-Module FailoverClusters  
Get-ClusterResource yourListenerName | Set-ClusterParameter RegisterAllProvidersIP 0
Get-ClusterResource yourListenerName|Set-ClusterParameter HostRecordTTL 300  
Stop-ClusterResource yourListenerName  
Start-ClusterResource yourAGResource  
```  
  
 <span data-ttu-id="6c20e-287">Weitere Informationen zu Wiederherstellungszeiten während des Failovers finden Sie unter [Client Recovery Latency During Failover](../../../sql-server/failover-clusters/windows/sql-server-multi-subnet-clustering-sql-server.md#DNS).</span><span class="sxs-lookup"><span data-stu-id="6c20e-287">For more information about recovery times during failover, see [Client Recovery Latency During Failover](../../../sql-server/failover-clusters/windows/sql-server-multi-subnet-clustering-sql-server.md#DNS).</span></span>  
  
###  <a name="follow-up-recommendations"></a><a name="FollowUpRecommendations"></a> <span data-ttu-id="6c20e-288">Empfehlungen für anschließende Aufgaben</span><span class="sxs-lookup"><span data-stu-id="6c20e-288">Follow-up Recommendations</span></span>  
 <span data-ttu-id="6c20e-289">Nach dem Erstellen eines Verfügbarkeitsgruppenlisteners:</span><span class="sxs-lookup"><span data-stu-id="6c20e-289">After you create an availability group listener:</span></span>  
  
-   <span data-ttu-id="6c20e-290">Bitten Sie den Netzwerkadministrator, die IP-Adresse des Listeners zur exklusiven Verwendung zu reservieren.</span><span class="sxs-lookup"><span data-stu-id="6c20e-290">Ask your network administrator to reserve the listener's IP address for its exclusive use.</span></span>  
  
-   <span data-ttu-id="6c20e-291">Geben Sie den DNS-Hostnamen des Listeners an Anwendungsentwickler weiter, damit diese den Namen in Verbindungszeichenfolgen zum Anfordern von Clientverbindungen mit dieser Verfügbarkeitsgruppe verwenden.</span><span class="sxs-lookup"><span data-stu-id="6c20e-291">Give the listener's DNS host name to application developers to use in connection strings when requesting client connections to this availability group.</span></span>  
  
-   <span data-ttu-id="6c20e-292">Ermutigen Sie Entwickler, Clientverbindungszeichenfolgen wenn möglich auf `MultiSubnetFailover = True`zu aktualisieren.</span><span class="sxs-lookup"><span data-stu-id="6c20e-292">Encourage developers to update client connection strings to specify `MultiSubnetFailover = True`, if possible.</span></span> <span data-ttu-id="6c20e-293">Weitere Informationen zur Treiberunterstützung für Multisubnetzfailover finden Sie unter [AlwaysOn-Clientkonnektivität &#40;SQL Server&#41;](always-on-client-connectivity-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="6c20e-293">For information about driver support for multi-subnet failover, see [AlwaysOn Client Connectivity &#40;SQL Server&#41;](always-on-client-connectivity-sql-server.md).</span></span>  
  
###  <a name="create-an-additional-listener-for-an-availability-group-optional"></a><a name="CreateAdditionalListener"></a> <span data-ttu-id="6c20e-294">Erstellen eines zusätzlichen Listeners für eine Verfügbarkeitsgruppe (optional)</span><span class="sxs-lookup"><span data-stu-id="6c20e-294">Create an Additional Listener for an Availability Group (Optional)</span></span>  
 <span data-ttu-id="6c20e-295">Nachdem Sie mit SQL Server einen Listener erstellt haben, können Sie wie folgt einen zusätzlichen Listener hinzufügen:</span><span class="sxs-lookup"><span data-stu-id="6c20e-295">After you create one listener through SQL Server, you can add an additional listener, as follows:</span></span>  
  
1.  <span data-ttu-id="6c20e-296">Erstellen Sie den Listener mit einem der folgenden Tools:</span><span class="sxs-lookup"><span data-stu-id="6c20e-296">Create the listener using either of the following tools:</span></span>  
  
    -   <span data-ttu-id="6c20e-297">**WSFC Failovercluster-Manager:**</span><span class="sxs-lookup"><span data-stu-id="6c20e-297">**Using WSFC Failover Cluster Manager:**</span></span>  
  
        1.  <span data-ttu-id="6c20e-298">Fügen Sie einen Clientzugriffspunkt hinzu, und konfigurieren Sie die IP-Adresse.</span><span class="sxs-lookup"><span data-stu-id="6c20e-298">Add a client access point and configure the IP address.</span></span>  
  
        2.  <span data-ttu-id="6c20e-299">Schalten Sie den Listener online.</span><span class="sxs-lookup"><span data-stu-id="6c20e-299">Bring the listener online.</span></span>  
  
        3.  <span data-ttu-id="6c20e-300">Fügen Sie der WSCF-Verfügbarkeitsgruppenressource eine Abhängigkeit hinzu.</span><span class="sxs-lookup"><span data-stu-id="6c20e-300">Add a dependency to the WSFC availability group resource.</span></span>  
  
         <span data-ttu-id="6c20e-301">Informationen zu den Dialogfeldern und Registerkarten im Failovercluster-Manager finden Sie unter [Benutzeroberfläche: Failovercluster-Manager (Snap-In)](https://technet.microsoft.com/library/cc772502.aspx).</span><span class="sxs-lookup"><span data-stu-id="6c20e-301">For information about the dialog boxes and tabs of the Failover Cluster Manager, see [User Interface: The Failover Cluster Manager Snap-In](https://technet.microsoft.com/library/cc772502.aspx).</span></span>  
  
    -   <span data-ttu-id="6c20e-302">**Windows PowerShell für Failovercluster:**</span><span class="sxs-lookup"><span data-stu-id="6c20e-302">**Using Windows PowerShell for failover clusters:**</span></span>  
  
        1.  <span data-ttu-id="6c20e-303">Verwenden Sie [Add-ClusterResource](https://technet.microsoft.com/library/ee460983.aspx) , um einen Netzwerknamen und die IP-Adressressourcen zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="6c20e-303">Use [Add-ClusterResource](https://technet.microsoft.com/library/ee460983.aspx) to create a network name and the IP address resources.</span></span>  
  
        2.  <span data-ttu-id="6c20e-304">Verwenden Sie [Start-ClusterResource](https://technet.microsoft.com/library/ee461056.aspx) , um die Netzwerknamenressource zu starten.</span><span class="sxs-lookup"><span data-stu-id="6c20e-304">Use [Start-ClusterResource](https://technet.microsoft.com/library/ee461056.aspx) to start the network name resource.</span></span>  
  
        3.  <span data-ttu-id="6c20e-305">Verwenden Sie [Add-ClusterResourceDependency](https://technet.microsoft.com/library/ee461014.aspx) , um die Abhängigkeit zwischen dem Netzwerknamen und der vorhandenen SQL Server-Verfügbarkeitsgruppenressource festzulegen.</span><span class="sxs-lookup"><span data-stu-id="6c20e-305">Use [Add-ClusterResourceDependency](https://technet.microsoft.com/library/ee461014.aspx) to set the dependency between the network name and the existing SQL Server Availability Group resource.</span></span>  
  
         <span data-ttu-id="6c20e-306">Informationen zur Verwendung von Windows PowerShell für Failovercluster finden Sie unter [Übersicht über Server-Manager-Befehle](https://technet.microsoft.com/library/cc732757.aspx#BKMK_wps).</span><span class="sxs-lookup"><span data-stu-id="6c20e-306">For information about using Windows PowerShell for failover clusters, see [Overview of Server Manager Commands](https://technet.microsoft.com/library/cc732757.aspx#BKMK_wps).</span></span>  
  
2.  <span data-ttu-id="6c20e-307">Starten Sie in [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] das Lauschen am neuen Listener.</span><span class="sxs-lookup"><span data-stu-id="6c20e-307">Start [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] listening on the new listener.</span></span> <span data-ttu-id="6c20e-308">Stellen Sie nach dem Erstellen des zusätzlichen Listeners eine Verbindung mit der Instanz von [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] her, die das primäre Replikat der Verfügbarkeitsgruppe hostet, und ändern Sie den Listenerport mithilfe von [!INCLUDE[ssManStudioFull](../../../includes/ssmanstudiofull-md.md)], [!INCLUDE[tsql](../../../includes/tsql-md.md)]oder PowerShell.</span><span class="sxs-lookup"><span data-stu-id="6c20e-308">After creating the additional listener, connect to the instance of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] that hosts the primary replica of the availability group and use [!INCLUDE[ssManStudioFull](../../../includes/ssmanstudiofull-md.md)], [!INCLUDE[tsql](../../../includes/tsql-md.md)], or PowerShell to modify the listener port.</span></span>  
  
 <span data-ttu-id="6c20e-309">Weitere Informationen finden Sie unter [So erstellen Sie mehrere Listener für dieselbe Verfügbarkeitsgruppe](https://blogs.msdn.com/b/sqlalwayson/archive/2012/02/03/how-to-create-multiple-listeners-for-same-availability-group-goden-yao.aspx) (SQL Server AlwaysOn-Teamblog).</span><span class="sxs-lookup"><span data-stu-id="6c20e-309">For more information, see [How to create multiple listeners for same availability group](https://blogs.msdn.com/b/sqlalwayson/archive/2012/02/03/how-to-create-multiple-listeners-for-same-availability-group-goden-yao.aspx) (a SQL Server AlwaysOn team blog).</span></span>  
  
##  <a name="related-tasks"></a><a name="RelatedTasks"></a> <span data-ttu-id="6c20e-310">Verwandte Aufgaben</span><span class="sxs-lookup"><span data-stu-id="6c20e-310">Related Tasks</span></span>  
  
-   [<span data-ttu-id="6c20e-311">Anzeigen von Eigenschaften des Verfügbarkeitsgruppenlisteners &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="6c20e-311">View Availability Group Listener Properties &#40;SQL Server&#41;</span></span>](view-availability-group-listener-properties-sql-server.md)  
  
-   [<span data-ttu-id="6c20e-312">Entfernen eines Verfügbarkeitsgruppenlisteners &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="6c20e-312">Remove an Availability Group Listener &#40;SQL Server&#41;</span></span>](remove-an-availability-group-listener-sql-server.md)  
  
##  <a name="related-content"></a><a name="RelatedContent"></a> <span data-ttu-id="6c20e-313">Verwandte Inhalte</span><span class="sxs-lookup"><span data-stu-id="6c20e-313">Related Content</span></span>  
  
-   [<span data-ttu-id="6c20e-314">How to create multiple listeners for same availability group</span><span class="sxs-lookup"><span data-stu-id="6c20e-314">How to create multiple listeners for same availability group</span></span>](https://blogs.msdn.com/b/sqlalwayson/archive/2012/02/03/how-to-create-multiple-listeners-for-same-availability-group-goden-yao.aspx)  
  
-   [<span data-ttu-id="6c20e-315">SQL Server AlwaysOn-Teamblog: der offizielle SQL Server AlwaysOn-Teamblog</span><span class="sxs-lookup"><span data-stu-id="6c20e-315">SQL Server AlwaysOn Team Blog: The official SQL Server AlwaysOn team blog</span></span>](https://blogs.msdn.com/b/sqlalwayson/)  
  
## <a name="see-also"></a><span data-ttu-id="6c20e-316">Weitere Informationen</span><span class="sxs-lookup"><span data-stu-id="6c20e-316">See Also</span></span>  
 <span data-ttu-id="6c20e-317">[Übersicht über AlwaysOn-Verfügbarkeitsgruppen &#40;SQL Server&#41;](overview-of-always-on-availability-groups-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="6c20e-317">[Overview of AlwaysOn Availability Groups &#40;SQL Server&#41;](overview-of-always-on-availability-groups-sql-server.md) </span></span>  
 <span data-ttu-id="6c20e-318">[Verfügbarkeitsgruppenlistener, Clientkonnektivität und Anwendungsfailover &#40;SQL Server&#41;](../../listeners-client-connectivity-application-failover.md) </span><span class="sxs-lookup"><span data-stu-id="6c20e-318">[Availability Group Listeners, Client Connectivity, and Application Failover &#40;SQL Server&#41;](../../listeners-client-connectivity-application-failover.md) </span></span>  
 [<span data-ttu-id="6c20e-319">SQL Server-Multisubnetzclustering &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="6c20e-319">SQL Server Multi-Subnet Clustering &#40;SQL Server&#41;</span></span>](../../../sql-server/failover-clusters/windows/sql-server-multi-subnet-clustering-sql-server.md)  
