---
title: Implementieren der SQL Server-Agent-Sicherheit | Microsoft-Dokumentation
ms.custom: ''
ms.date: 06/14/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: ssms
ms.topic: conceptual
helpviewer_keywords:
- SQL Server Agent, security
- security [SQL Server Agent], about security
- security [SQL Server Agent]
- security [SQL Server], SQL Server Agent
ms.assetid: d770d35c-c8de-4e00-9a85-7d03f45a0f0d
author: stevestein
ms.author: sstein
ms.openlocfilehash: 8b70449ace66d4e33a547eca1c0b19eafabde5a7
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 08/04/2020
ms.locfileid: "87699213"
---
# <a name="implement-sql-server-agent-security"></a><span data-ttu-id="e24ff-102">Implementieren der SQL Server-Agent-Sicherheit</span><span class="sxs-lookup"><span data-stu-id="e24ff-102">Implement SQL Server Agent Security</span></span>
  [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="e24ff-103">Agent ermöglicht dem Datenbankadministrator, jeden Auftragsschritt in einem Sicherheitskontext auszuführen, dem lediglich die Berechtigungen erteilt wurden, die zum Durchführen dieses Auftragsschritts erforderlich sind, wie von einem [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] -Agent-Proxy festgelegt.</span><span class="sxs-lookup"><span data-stu-id="e24ff-103">Agent lets the database administrator run each job step in a security context that has only the permissions required to perform that job step, which is determined by a [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent proxy.</span></span> <span data-ttu-id="e24ff-104">Um Berechtigungen für einen bestimmten Auftragsschritt festzulegen, erstellen Sie einen Proxy mit den erforderlichen Berechtigungen und weisen dann diesen Proxy dem Auftragsschritt zu.</span><span class="sxs-lookup"><span data-stu-id="e24ff-104">To set the permissions for a particular job step, you create a proxy that has the required permissions and then assign that proxy to the job step.</span></span> <span data-ttu-id="e24ff-105">Ein Proxy kann für mehrere Auftragsschritte angegeben werden.</span><span class="sxs-lookup"><span data-stu-id="e24ff-105">A proxy can be specified for more than one job step.</span></span> <span data-ttu-id="e24ff-106">Für Auftragsschritte, für die dieselben Berechtigungen erforderlich sind, verwenden Sie denselben Proxy.</span><span class="sxs-lookup"><span data-stu-id="e24ff-106">For job steps that require the same permissions, you use the same proxy.</span></span>  
  
 <span data-ttu-id="e24ff-107">Im folgenden Abschnitt wird erläutert, welche Datenbankrolle Sie Benutzern erteilen müssen, damit sie Aufträge mithilfe des [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] -Agents erstellen oder ausführen können.</span><span class="sxs-lookup"><span data-stu-id="e24ff-107">The following section explains what database role you must grant to users so they can create or execute jobs by using [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent.</span></span>  
  
## <a name="granting-access-to-sql-server-agent"></a><span data-ttu-id="e24ff-108">Erteilen des Zugriffs auf den SQL Server-Agent</span><span class="sxs-lookup"><span data-stu-id="e24ff-108">Granting Access to SQL Server Agent</span></span>  
 <span data-ttu-id="e24ff-109">Um den [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] -Agent zu verwenden, müssen die Benutzer Mitglied mindestens einer der folgenden festen Datenbankrollen sein:</span><span class="sxs-lookup"><span data-stu-id="e24ff-109">To use [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent, users must be a member of one or more of the following fixed database roles:</span></span>  
  
-   <span data-ttu-id="e24ff-110">**SQLAgentUserRole**</span><span class="sxs-lookup"><span data-stu-id="e24ff-110">**SQLAgentUserRole**</span></span>  
  
-   <span data-ttu-id="e24ff-111">**SQLAgentReaderRole**</span><span class="sxs-lookup"><span data-stu-id="e24ff-111">**SQLAgentReaderRole**</span></span>  
  
-   <span data-ttu-id="e24ff-112">**SQLAgentOperatorRole**</span><span class="sxs-lookup"><span data-stu-id="e24ff-112">**SQLAgentOperatorRole**</span></span>  
  
 <span data-ttu-id="e24ff-113">Diese Rollen werden in der **msdb** -Datenbank gespeichert.</span><span class="sxs-lookup"><span data-stu-id="e24ff-113">These roles are stored in the **msdb** database.</span></span> <span data-ttu-id="e24ff-114">Standardmäßig ist kein Benutzer Mitglied dieser Datenbankrollen.</span><span class="sxs-lookup"><span data-stu-id="e24ff-114">By default, no user is a member of these database roles.</span></span> <span data-ttu-id="e24ff-115">Die Mitgliedschaft in diesen Rollen muss explizit erteilt werden.</span><span class="sxs-lookup"><span data-stu-id="e24ff-115">Membership in these roles must be granted explicitly.</span></span> <span data-ttu-id="e24ff-116">Benutzer, die Mitglieder der festen Serverrolle **sysadmin** sind, haben vollen Zugriff auf den [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] -Agent und müssen nicht Mitglied dieser festen Datenbankrollen sein, um den [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] -Agent verwenden zu können.</span><span class="sxs-lookup"><span data-stu-id="e24ff-116">Users who are members of the **sysadmin** fixed server role have full access to [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent, and do not need to be a member of these fixed database roles to use [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent.</span></span> <span data-ttu-id="e24ff-117">Wenn ein Benutzer nicht Mitglied einer dieser Datenbankrollen oder der **sysadmin** -Rolle ist, steht ihm der [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] -Agent-Knoten nicht zur Verfügung, wenn er mithilfe von [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] eine Verbindung mit [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)]herstellt.</span><span class="sxs-lookup"><span data-stu-id="e24ff-117">If a user is not a member of one of these database roles or of the **sysadmin** role, the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent node is not available to them when they connect to [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] by using [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)].</span></span>  
  
 <span data-ttu-id="e24ff-118">Die Mitglieder dieser Datenbankrollen können Aufträge anzeigen und ausführen, deren Besitzer sie sind, und Auftragsschritte erstellen, die als bereits vorhandenes Proxykonto ausgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="e24ff-118">Members of these database roles can view and execute jobs that they own, and create job steps that run as an existing proxy account.</span></span> <span data-ttu-id="e24ff-119">Weitere Informationen zu den einzelnen Berechtigungen, die jeder dieser festen Rollen zugeordnet sind, finden Sie unter [Feste Datenbankrollen des SQL Server-Agents](sql-server-agent-fixed-database-roles.md).</span><span class="sxs-lookup"><span data-stu-id="e24ff-119">For more information about the specific permissions that are associated with each of these roles, see [SQL Server Agent Fixed Database Roles](sql-server-agent-fixed-database-roles.md).</span></span>  
  
 <span data-ttu-id="e24ff-120">Die Mitglieder der festen Serverrolle **sysadmin** haben die Berechtigung zum Erstellen, Ändern und Löschen von Proxykonten.</span><span class="sxs-lookup"><span data-stu-id="e24ff-120">Members of the **sysadmin** fixed server role have permission to create, modify, and delete proxy accounts.</span></span> <span data-ttu-id="e24ff-121">Die Mitglieder der **sysadmin** -Rolle haben die Berechtigung zum Erstellen von Auftragsschritten, die keinen Proxy angeben, sondern stattdessen als das [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] -Agent-Dienstkonto ausgeführt werden, bei dem es sich um das Konto handelt, das zum Starten des [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] -Agents verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="e24ff-121">Members of the **sysadmin** role have permission to create job steps that do not specify a proxy, but instead run as the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent service account, which is the account that is used to start [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent.</span></span>  
  
## <a name="guidelines"></a><span data-ttu-id="e24ff-122">Richtlinien</span><span class="sxs-lookup"><span data-stu-id="e24ff-122">Guidelines</span></span>  
 <span data-ttu-id="e24ff-123">Befolgen Sie diese Richtlinien, um die Sicherheit Ihrer [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] -Agent-Implementierung zu verbessern:</span><span class="sxs-lookup"><span data-stu-id="e24ff-123">Follow these guidelines to improve the security of your [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent implementation:</span></span>  
  
-   <span data-ttu-id="e24ff-124">Erstellen Sie dedizierte Benutzerkonten speziell für Proxys, und verwenden Sie diese Proxybenutzerkonten nur zum Ausführen von Auftragsschritten.</span><span class="sxs-lookup"><span data-stu-id="e24ff-124">Create dedicated user accounts specifically for proxies, and only use these proxy user accounts for running job steps.</span></span>  
  
-   <span data-ttu-id="e24ff-125">Erteilen Sie die erforderlichen Berechtigungen lediglich den Proxybenutzerkonten.</span><span class="sxs-lookup"><span data-stu-id="e24ff-125">Only grant the necessary permissions to proxy user accounts.</span></span> <span data-ttu-id="e24ff-126">Erteilen Sie lediglich die Berechtigungen, die zum Ausführen der Auftragsschritte erforderlich sind, die einem bestimmten Proxykonto zugewiesen sind.</span><span class="sxs-lookup"><span data-stu-id="e24ff-126">Grant only those permissions actually required to run the job steps that are assigned to a given proxy account.</span></span>  
  
-   <span data-ttu-id="e24ff-127">Führen Sie den [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] -Agent-Dienst nicht unter einem Microsoft Windows-Konto aus, das Mitglied der Windows-Gruppe **Administratoren** ist.</span><span class="sxs-lookup"><span data-stu-id="e24ff-127">Do not run the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent service under a Microsoft Windows account that is a member of the Windows **Administrators** group.</span></span>  
  
-   <span data-ttu-id="e24ff-128">Proxys sind nur so sicher wie der [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] -Anmeldeinformationenspeicher.</span><span class="sxs-lookup"><span data-stu-id="e24ff-128">Proxies are only as secure as the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] credential store.</span></span>  
  
-   <span data-ttu-id="e24ff-129">Wenn Benutzerschreibvorgänge in das NT-Ereignisprotokoll schreiben können, können sie Warnungen über den [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] -Agent auslösen.</span><span class="sxs-lookup"><span data-stu-id="e24ff-129">If user write operations can write to the NT Event log, they can raise alerts via [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent.</span></span>  
  
-   <span data-ttu-id="e24ff-130">Geben Sie das NT-Adminkonto nicht als Dienst- oder Proxykonto an.</span><span class="sxs-lookup"><span data-stu-id="e24ff-130">Do not specify the NT Admin account as a service account or proxy account.</span></span>  
  
-   <span data-ttu-id="e24ff-131">Hinweis: [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] und der [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]-Agent können gegenseitig auf ihre Ressourcen zugreifen.</span><span class="sxs-lookup"><span data-stu-id="e24ff-131">Note that [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] and [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent have access to each other's assets.</span></span> <span data-ttu-id="e24ff-132">Die beiden Dienste verwenden einen einzelnen Prozessraum, und der [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] -Agent fungiert mit der Rolle "sysadmin" auf dem [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] -Dienst.</span><span class="sxs-lookup"><span data-stu-id="e24ff-132">The two services share a single process space and [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent is a sysadmin on the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] service.</span></span>  
  
-   <span data-ttu-id="e24ff-133">Wenn für ein TSX ein MSX eingetragen wird, erhält die MSX-Rolle "sysadmins" die vollständige Kontrolle über die TSX-Instanz von [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="e24ff-133">When a TSX enlists with an MSX, the MSX sysadmins gets total control over the TSX instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span>  
  
-   <span data-ttu-id="e24ff-134">ACE ist eine Erweiterung und kann sich nicht selbst aufrufen.</span><span class="sxs-lookup"><span data-stu-id="e24ff-134">ACE is an extension and cannot invoke itself.</span></span> <span data-ttu-id="e24ff-135">ACE wird von der „Chainer ScenarioEngine.exe“ (auch als bekannt als „Microsoft.SqlServer.Chainer.Setup.exe“) oder einem anderen Hostprozess aufgerufen.</span><span class="sxs-lookup"><span data-stu-id="e24ff-135">ACE is invoked by Chainer ScenarioEngine.exe - also known as Microsoft.SqlServer.Chainer.Setup.exe - or it can be invoked by another host process.</span></span>  
  
-   <span data-ttu-id="e24ff-136">ACE hängt von den folgenden Konfigurations-DLL-Elementen ab, die sich im Besitz von SSDP befinden, da diese DLL-APIs von ACE aufgerufen werden:</span><span class="sxs-lookup"><span data-stu-id="e24ff-136">ACE depends on the following configuration DLL's owned by SSDP, because those API's of DLL's are called by ACE:</span></span>  
  
    -   <span data-ttu-id="e24ff-137">**SCO:** Microsoft.SqlServer.Configuration.Sco.dll, einschließlich neuer SCO-Überprüfungen für virtuelle Konten</span><span class="sxs-lookup"><span data-stu-id="e24ff-137">**SCO** - Microsoft.SqlServer.Configuration.Sco.dll, including new SCO validations for virtual accounts</span></span>  
  
    -   <span data-ttu-id="e24ff-138">**Cluster:** Microsoft.SqlServer.Configuration.Cluster.dll</span><span class="sxs-lookup"><span data-stu-id="e24ff-138">**Cluster** - Microsoft.SqlServer.Configuration.Cluster.dll</span></span>  
  
    -   <span data-ttu-id="e24ff-139">**SFC:** Microsoft.SqlServer.Configuration.SqlConfigBase.dll</span><span class="sxs-lookup"><span data-stu-id="e24ff-139">**SFC** - Microsoft.SqlServer.Configuration.SqlConfigBase.dll</span></span>  
  
    -   <span data-ttu-id="e24ff-140">**Erweiterung:** Microsoft.SqlServer.Configuration.ConfigExtension.dll</span><span class="sxs-lookup"><span data-stu-id="e24ff-140">**Extension** - Microsoft.SqlServer.Configuration.ConfigExtension.dll</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="e24ff-141">Weitere Informationen</span><span class="sxs-lookup"><span data-stu-id="e24ff-141">See Also</span></span>  
 <span data-ttu-id="e24ff-142">[Vordefinierte Rollen](../../reporting-services/security/role-definitions-predefined-roles.md) </span><span class="sxs-lookup"><span data-stu-id="e24ff-142">[Predefined Roles](../../reporting-services/security/role-definitions-predefined-roles.md) </span></span>  
 <span data-ttu-id="e24ff-143">[sp_addrolemember &#40;Transact-SQL-&#41;](/sql/relational-databases/system-stored-procedures/sp-addrolemember-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="e24ff-143">[sp_addrolemember &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addrolemember-transact-sql) </span></span>  
 <span data-ttu-id="e24ff-144">[sp_droprolemember &#40;Transact-SQL-&#41;](/sql/relational-databases/system-stored-procedures/sp-droprolemember-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="e24ff-144">[sp_droprolemember &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-droprolemember-transact-sql) </span></span>  
 [<span data-ttu-id="e24ff-145">Sicherheitscenter für SQL Server-Datenbank-Engine und Azure SQL-Datenbank</span><span class="sxs-lookup"><span data-stu-id="e24ff-145">Security Center for SQL Server Database Engine and Azure SQL Database</span></span>](../../relational-databases/security/security-center-for-sql-server-database-engine-and-azure-sql-database.md)  
  
  
