---
title: Handhaben mehrerer Auftragsschritte | Microsoft-Dokumentation
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: ssms
ms.topic: conceptual
helpviewer_keywords:
- job steps [SQL Server Agent]
- ordering job steps [SQL Server]
- multiple job steps
- SQL Server Agent jobs, job steps
- control of flow for jobs [SQL Server]
ms.assetid: 7aba19ff-72b3-45f6-8e54-23f4988d63a8
author: stevestein
ms.author: sstein
ms.openlocfilehash: fef0fb69b5bfd028977276d8efabc333a21e0feb
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 08/04/2020
ms.locfileid: "87608205"
---
# <a name="handle-multiple-job-steps"></a><span data-ttu-id="9ae98-102">Handhaben mehrerer Auftragsschritte</span><span class="sxs-lookup"><span data-stu-id="9ae98-102">Handle Multiple Job Steps</span></span>
  <span data-ttu-id="9ae98-103">Wenn Ihr Auftrag aus mehr als einem Auftragsschritt besteht, müssen Sie die Reihenfolge angeben, in der die Auftragsschritte ausgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="9ae98-103">If your job has more than one job step, you must specify the order in which the job steps run.</span></span> <span data-ttu-id="9ae98-104">Dies wird *Ablaufsteuerung*\*\* genannt.</span><span class="sxs-lookup"><span data-stu-id="9ae98-104">This is called *control of flow\*\*.*</span></span> <span data-ttu-id="9ae98-105">Sie können jederzeit neue Auftragsschritte hinzufügen und den Ablauf der Auftragsschritte neu ordnen. Die Änderungen werden bei der nächsten Ausführung des Auftrags wirksam.</span><span class="sxs-lookup"><span data-stu-id="9ae98-105">You can add new job steps and rearrange the flow of job steps at any time; the changes take effect the next time the job is run.</span></span> <span data-ttu-id="9ae98-106">In dieser Abbildung ist die Ablaufsteuerung eines Auftrags für die Datenbanksicherung dargestellt.</span><span class="sxs-lookup"><span data-stu-id="9ae98-106">This illustration shows the control of flow for a database backup job.</span></span>  
  
 <span data-ttu-id="9ae98-107">![Ablaufsteuerung bei den Schritten eines SQL Server-Agent-Auftrags](../../database-engine/media/dbflow01.gif "Ablaufsteuerung bei den Schritten eines SQL Server-Agent-Auftrags")</span><span class="sxs-lookup"><span data-stu-id="9ae98-107">![SQL Server Agent job steps control of flow](../../database-engine/media/dbflow01.gif "SQL Server Agent job steps control of flow")</span></span>  
  
 <span data-ttu-id="9ae98-108">Der erste Schritt besteht in der Datenbanksicherung.</span><span class="sxs-lookup"><span data-stu-id="9ae98-108">The first step is Backup Database.</span></span> <span data-ttu-id="9ae98-109">Wenn dieser Schritt einen Fehler erzeugt, wird vom [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] -Agent ein Fehler an den Ausführenden berichtet, der als Empfänger der Benachrichtigung definiert ist.</span><span class="sxs-lookup"><span data-stu-id="9ae98-109">If this step fails, [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent reports failure to the operator who is defined to receive notification.</span></span> <span data-ttu-id="9ae98-110">Wenn der Schritt zur Datenbanksicherung erfolgreich ist, wird vom Auftrag der nächste Schritt ausgeführt, das "Bereinigen" der Kundendaten.</span><span class="sxs-lookup"><span data-stu-id="9ae98-110">If the Backup Database step succeeds, the job proceeds to the next step, "Scrub" Customer Data.</span></span> <span data-ttu-id="9ae98-111">Wenn dieser Schritt einen Fehler erzeugt, wird vom [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] -Agent der Ablauf mit der Datenbankwiederherstellung fortgesetzt.</span><span class="sxs-lookup"><span data-stu-id="9ae98-111">If this step fails, [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Agent skips forward to Restore Database.</span></span> <span data-ttu-id="9ae98-112">Wenn die Bereinigung der Benutzerdaten erfolgreich ist, wird der Auftrag mit dem nächsten Schritt fortgesetzt, beispielsweise Aktualisieren der Statistik und so weiter, bis der letzte Schritt entweder einen Erfolg oder einen Fehler des Berichts zum Ergebnis hat.</span><span class="sxs-lookup"><span data-stu-id="9ae98-112">If "Scrub" Customer Data succeeds, the job proceeds to the next step, Update Statistics, and so on, until the final step either results in Report Success or Report Failure.</span></span>  
  
 <span data-ttu-id="9ae98-113">Sie definieren eine Ablaufsteuerungsaktion für die erfolgreiche oder fehlgeschlagene Ausführung einzelner Auftragsschritte.</span><span class="sxs-lookup"><span data-stu-id="9ae98-113">You define a control-of-flow action for the success and failure of each job step.</span></span> <span data-ttu-id="9ae98-114">Sie müssen eine Aktion angeben, die durchgeführt werden soll, wenn ein Auftragsschritt erfolgreich ausgeführt wird, und eine Aktion für den Fall, dass ein Auftragsschritt einen Fehler erzeugt.</span><span class="sxs-lookup"><span data-stu-id="9ae98-114">You must specify an action to be taken when a job step succeeds and an action to be taken when a job step fails.</span></span> <span data-ttu-id="9ae98-115">Sie können zudem die Anzahl der Wiederholungsversuche und der Intervalle zwischen diesen Versuchen bei fehlgeschlagenen Auftragsschritten definieren.</span><span class="sxs-lookup"><span data-stu-id="9ae98-115">You can also define the number of retry attempts for failed job steps and the interval between the retry attempts.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="9ae98-116">Wenn Sie einen oder mehrere Schritte über die grafische Benutzeroberfläche (Graphical User Interface, GUI) des [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] -Agents aus einem Auftrag mit mehreren Schritten löschen, entfernt die GUI alle Auftragsschritte und fügt die verbleibenden Schritte mit den richtigen Verweisen bei Erfolg oder bei Fehler wieder hinzu.</span><span class="sxs-lookup"><span data-stu-id="9ae98-116">When you use the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent graphical user interface (GUI) and delete one or more steps from a multistep job, the GUI removes all job steps and then adds the remaining steps back with the correct on-success or on-failure references.</span></span> <span data-ttu-id="9ae98-117">Angenommen, ein Auftrag besteht aus fünf Schritten, und der erste Schritt ist so konfiguriert, dass er bei erfolgreichem Abschluss zu Schritt 4 springt.</span><span class="sxs-lookup"><span data-stu-id="9ae98-117">For example, suppose you have a job with five steps, and the first step is configured to jump to step 4 if it completes successfully.</span></span> <span data-ttu-id="9ae98-118">Wenn Sie Schritt 3 löschen, entfernt die GUI alle Schritte für diesen Auftrag und fügt die verbleibenden Schritte (1, 2, 4 und 5) mit den korrigierten Verweisen wieder hinzu.</span><span class="sxs-lookup"><span data-stu-id="9ae98-118">If you delete step 3, the GUI removes all steps for this job and adds the remaining four steps (1, 2, 4, and 5) with corrected references.</span></span> <span data-ttu-id="9ae98-119">In diesem Fall wird der Verweis in Schritt 1 neu konfiguriert, damit der Vorgang bei erfolgreichem Abschluss von Schritt 1 mit Schritt 3 fortgesetzt wird.</span><span class="sxs-lookup"><span data-stu-id="9ae98-119">In this case, the reference in step 1 would be reconfigured to jump to step 3 if step 1 completes successfully.</span></span>  
  
 <span data-ttu-id="9ae98-120">Auftragsschritte müssen eigenständig sein.</span><span class="sxs-lookup"><span data-stu-id="9ae98-120">Job steps must be self-contained.</span></span> <span data-ttu-id="9ae98-121">Ein Auftrag kann keine booleschen Werte, Daten oder numerischen Werte zwischen den Auftragsschritten übergeben.</span><span class="sxs-lookup"><span data-stu-id="9ae98-121">That is, a job cannot pass Boolean values, data, or numeric values between job steps.</span></span> <span data-ttu-id="9ae98-122">Sie können allerdings Werte von einem [!INCLUDE[tsql](../../includes/tsql-md.md)] -Auftragsschritt zu einem anderen mithilfe von dauerhaften Tabellen oder globalen temporären Tabellen übergeben.</span><span class="sxs-lookup"><span data-stu-id="9ae98-122">You can, however, pass values from one [!INCLUDE[tsql](../../includes/tsql-md.md)] job step to another by using permanent tables or global temporary tables.</span></span> <span data-ttu-id="9ae98-123">Sie können Werte von Auftragsschritten, die Programme von einem Auftragsschritt zum nächsten ausführen, mithilfe von Dateien übergeben.</span><span class="sxs-lookup"><span data-stu-id="9ae98-123">You can pass values from job steps that run executable programs from one job step to another job step by using files.</span></span> <span data-ttu-id="9ae98-124">Von einer Datei, die von einem Auftragsschritt ausgeführt wird, kann beispielsweise in eine Datei geschrieben werden, und von einer Datei, die von einem nachfolgenden Auftragsschritt ausgeführt wird, kann die Datei gelesen werden.</span><span class="sxs-lookup"><span data-stu-id="9ae98-124">For example, the executable run by one job step writes a file, and the executable run by a subsequent job step reads the file.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="9ae98-125">Sollten Sie Auftragsschritte erstellen, die sich in einer Schleife gegenseitig aufrufen (auf Auftragsschritt 1 folgt Auftragsschritt 2, dann kehrt Auftragsschritt 2 zu Auftragsschritt 1 zurück), wird eine Warnmeldung angezeigt, wenn der Auftrag mithilfe von [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)]erstellt wird.</span><span class="sxs-lookup"><span data-stu-id="9ae98-125">If you create looping job steps (job step 1 is followed by job step 2, then job step 2 returns to job step 1), a warning message appears when the job is created using [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)].</span></span>  
  
 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="9ae98-126">Agent zeichnet die Informationen von Aufträgen und Auftragsschritten im Auftragsverlauf auf.</span><span class="sxs-lookup"><span data-stu-id="9ae98-126">Agent records job and job step information in the job history.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="9ae98-127">Weitere Informationen</span><span class="sxs-lookup"><span data-stu-id="9ae98-127">See Also</span></span>  
 <span data-ttu-id="9ae98-128">[sp_add_job &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-add-job-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="9ae98-128">[sp_add_job &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-add-job-transact-sql) </span></span>  
 <span data-ttu-id="9ae98-129">[dbo.sysJobHistory &#40;Transact-SQL-&#41;](/sql/relational-databases/system-tables/dbo-sysjobhistory-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="9ae98-129">[dbo.sysjobhistory &#40;Transact-SQL&#41;](/sql/relational-databases/system-tables/dbo-sysjobhistory-transact-sql) </span></span>  
 <span data-ttu-id="9ae98-130">[dbo.sysAufträge &#40;Transact-SQL-&#41;](/sql/relational-databases/system-tables/dbo-sysjobs-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="9ae98-130">[dbo.sysjobs &#40;Transact-SQL&#41;](/sql/relational-databases/system-tables/dbo-sysjobs-transact-sql) </span></span>  
 <span data-ttu-id="9ae98-131">[dbo.sysAuftrags Schritte &#40;Transact-SQL-&#41;](/sql/relational-databases/system-tables/dbo-sysjobsteps-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="9ae98-131">[dbo.sysjobsteps &#40;Transact-SQL&#41;](/sql/relational-databases/system-tables/dbo-sysjobsteps-transact-sql) </span></span>  
 <span data-ttu-id="9ae98-132">[Implementieren von Aufträgen](implement-jobs.md) </span><span class="sxs-lookup"><span data-stu-id="9ae98-132">[Implement Jobs](implement-jobs.md) </span></span>  
 [<span data-ttu-id="9ae98-133">Verwalten von Auftragsschritten</span><span class="sxs-lookup"><span data-stu-id="9ae98-133">Manage Job Steps</span></span>](manage-job-steps.md)  
  
  
