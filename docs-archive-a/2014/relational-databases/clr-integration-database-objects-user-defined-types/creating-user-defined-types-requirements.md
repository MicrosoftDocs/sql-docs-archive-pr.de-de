---
title: Anforderungen an den benutzerdefinierten Typ | Microsoft-Dokumentation
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: clr
ms.topic: reference
helpviewer_keywords:
- UDTs [CLR integration], requirements
- serialization
- Native serialization format [CLR integration]
- attributes [CLR integration]
- XML serialization [CLR integration]
- user-defined types [CLR integration], requirements
- user-defined serialization [CLR integration]
- user-defined types [CLR integration], Native serialization
- UDTs [CLR integration], Native serialization
ms.assetid: bedc3372-50eb-40f2-bcf2-d6db6a63b7e6
author: rothja
ms.author: jroth
ms.openlocfilehash: d4e692a4523829713cd95daf62374f84a74b6584
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 08/04/2020
ms.locfileid: "87609918"
---
# <a name="user-defined-type-requirements"></a><span data-ttu-id="ae067-102">Anforderungen für den benutzerdefinierten Typ</span><span class="sxs-lookup"><span data-stu-id="ae067-102">User-Defined Type Requirements</span></span>
  <span data-ttu-id="ae067-103">Beim Erstellen eines benutzerdefinierten Typs (User-Defined Type, UDT), der in installiert werden soll, müssen Sie einige wichtige Entwurfsentscheidungen treffen [!INCLUDE[msCoName](../../includes/msconame-md.md)] [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="ae067-103">You must make several important design decisions when creating a user-defined type (UDT) to be installed in [!INCLUDE[msCoName](../../includes/msconame-md.md)][!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="ae067-104">Für die meisten UDTs wird das Erstellen als Struktur empfohlen, obwohl auch das Erstellen als Klasse möglich ist.</span><span class="sxs-lookup"><span data-stu-id="ae067-104">For most UDTs, creating the UDT as a structure is recommended, although creating it as a class is also an option.</span></span> <span data-ttu-id="ae067-105">Die UDT-Definition muss den Spezifikationen für das Erstellen von UDTs entsprechen, um mit [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] registriert werden zu können.</span><span class="sxs-lookup"><span data-stu-id="ae067-105">The UDT definition must conform to the specifications for creating UDTs in order for it to be registered with [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span>  
  
## <a name="requirements-for-implementing-udts"></a><span data-ttu-id="ae067-106">Anforderungen für das Implementieren von UDTs</span><span class="sxs-lookup"><span data-stu-id="ae067-106">Requirements for Implementing UDTs</span></span>  
 <span data-ttu-id="ae067-107">Um in [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] ausgeführt zu werden, muss der UDT die folgenden Anforderungen in der UDT-Definition implementieren:</span><span class="sxs-lookup"><span data-stu-id="ae067-107">To run in [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], your UDT must implement the following requirements in the UDT definition:</span></span>  
  
 <span data-ttu-id="ae067-108">Der UDT muss das `Microsoft.SqlServer.Server.SqlUserDefinedTypeAttribute` angeben.</span><span class="sxs-lookup"><span data-stu-id="ae067-108">The UDT must specify the `Microsoft.SqlServer.Server.SqlUserDefinedTypeAttribute`.</span></span> <span data-ttu-id="ae067-109">Die Verwendung des `System.SerializableAttribute`-Schlüsselworts ist optional, wird aber empfohlen.</span><span class="sxs-lookup"><span data-stu-id="ae067-109">The use of the `System.SerializableAttribute` is optional, but recommended.</span></span>  
  
-   <span data-ttu-id="ae067-110">Der UDT muss die `System.Data.SqlTypes.INullable`-Schnittstelle in der Klasse oder Struktur implementieren, indem er eine öffentliche `static` (`Shared` in [!INCLUDE[msCoName](../../includes/msconame-md.md)] Visual Basic) `Null`-Methode erstellt.</span><span class="sxs-lookup"><span data-stu-id="ae067-110">The UDT must implement the `System.Data.SqlTypes.INullable` interface in the class or structure by creating a public `static` (`Shared` in [!INCLUDE[msCoName](../../includes/msconame-md.md)] Visual Basic) `Null` method.</span></span> [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="ae067-111">erkennt standardmäßig NULL-Werte.</span><span class="sxs-lookup"><span data-stu-id="ae067-111">is null-aware by default.</span></span> <span data-ttu-id="ae067-112">Dies ist notwendig für Code, der im UDT ausgeführt wird, um in der Lage zu sein, einen NULL-Wert zu erkennen.</span><span class="sxs-lookup"><span data-stu-id="ae067-112">This is necessary for code executing in the UDT to be able to recognize a null value.</span></span>  
  
-   <span data-ttu-id="ae067-113">Der UDT muss eine öffentliche `static` (oder `Shared`) `Parse`-Methode enthalten, die Analysen unterstützt, sowie eine öffentliche `ToString`-Methode für das Konvertieren in eine Zeichenfolgendarstellung des Objekts.</span><span class="sxs-lookup"><span data-stu-id="ae067-113">The UDT must contain a public `static` (or `Shared`) `Parse` method that supports parsing from, and a public `ToString` method for converting to a string representation of the object.</span></span>  
  
-   <span data-ttu-id="ae067-114">Ein UDT mit benutzerdefiniertem Serialisierungsformat muss die `System.Data.IBinarySerialize`-Schnittstelle implementieren und eine `Read`- sowie eine `Write`-Methode bereitstellen.</span><span class="sxs-lookup"><span data-stu-id="ae067-114">A UDT with a user-defined serialization format must implement the `System.Data.IBinarySerialize` interface and provide a `Read` and a `Write` method.</span></span>  
  
-   <span data-ttu-id="ae067-115">Der UDT muss `System.Xml.Serialization.IXmlSerializable` implementieren. Andernfalls müssen alle öffentlichen Felder und Eigenschaften Typen entsprechen, die durch XML serialisierbar sind oder das `XmlIgnore`-Attribut erhalten, wenn das Überschreiben einer Standardserialisierung erforderlich ist.</span><span class="sxs-lookup"><span data-stu-id="ae067-115">The UDT must implement `System.Xml.Serialization.IXmlSerializable`, or all public fields and properties must be of types that are XML serializable or decorated with the `XmlIgnore` attribute if overriding standard serialization is required.</span></span>  
  
-   <span data-ttu-id="ae067-116">Es darf nur eine Serialisierung eines UDT-Objekts geben.</span><span class="sxs-lookup"><span data-stu-id="ae067-116">There must be only one serialization of a UDT object.</span></span> <span data-ttu-id="ae067-117">Die Überprüfung schlägt fehl, wenn die Serialisierungs- oder Deserialisierungsroutinen mehr als eine Darstellung eines bestimmten Objekts erkennen.</span><span class="sxs-lookup"><span data-stu-id="ae067-117">Validation fails if the serialize or deserialize routines recognize more than one representation of a particular object.</span></span>  
  
-   <span data-ttu-id="ae067-118">`SqlUserDefinedTypeAttribute.IsByteOrdered` muss `true` sein, um Daten in Bytereihenfolge zu vergleichen.</span><span class="sxs-lookup"><span data-stu-id="ae067-118">`SqlUserDefinedTypeAttribute.IsByteOrdered` must be `true` to compare data in byte order.</span></span> <span data-ttu-id="ae067-119">Wenn die IComparable-Schnittstelle nicht implementiert ist und `SqlUserDefinedTypeAttribute.IsByteOrdered` den Wert `false` hat, schlagen Vergleiche in Bytereihenfolge fehl.</span><span class="sxs-lookup"><span data-stu-id="ae067-119">If the IComparable interface is not implemented and `SqlUserDefinedTypeAttribute.IsByteOrdered` is `false`, byte order comparisons will fail.</span></span>  
  
-   <span data-ttu-id="ae067-120">Ein in einer Klasse definierter UDT muss über einen öffentlichen Konstruktor verfügen, der keine Argumente verwendet.</span><span class="sxs-lookup"><span data-stu-id="ae067-120">A UDT defined in a class must have a public constructor that takes no arguments.</span></span> <span data-ttu-id="ae067-121">Sie können optional zusätzliche überladene Klassenkonstruktoren erstellen.</span><span class="sxs-lookup"><span data-stu-id="ae067-121">You can optionally create additional overloaded class constructors.</span></span>  
  
-   <span data-ttu-id="ae067-122">Der UDT muss Datenelemente als öffentliche Felder oder Eigenschaftenprozeduren verfügbar machen.</span><span class="sxs-lookup"><span data-stu-id="ae067-122">The UDT must expose data elements as public fields or property procedures.</span></span>  
  
-   <span data-ttu-id="ae067-123">Öffentliche Namen dürfen nicht länger als 128 Zeichen sein, und Sie müssen den [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Benennungs Regeln für Bezeichner entsprechen, wie in [Daten Bank bezeichnerdaten](../databases/database-identifiers.md)definiert.</span><span class="sxs-lookup"><span data-stu-id="ae067-123">Public names cannot be longer than 128 characters, and must conform to the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] naming rules for identifiers as defined in [Database Identifiers](../databases/database-identifiers.md).</span></span>  
  
-   <span data-ttu-id="ae067-124">`sql_variant`-Spalten können keine Instanzen eines UDTs enthalten.</span><span class="sxs-lookup"><span data-stu-id="ae067-124">`sql_variant` columns cannot contain instances of a UDT.</span></span>  
  
-   <span data-ttu-id="ae067-125">Auf vererbte Member kann nicht von [!INCLUDE[tsql](../../includes/tsql-md.md)] aus zugegriffen werden, da das [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]-Typsystem die Vererbungshierarchie zwischen UDTs nicht kennt.</span><span class="sxs-lookup"><span data-stu-id="ae067-125">Inherited members are not accessible from [!INCLUDE[tsql](../../includes/tsql-md.md)] because the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] type system is not aware of the inheritance hierarchy among UDTs.</span></span> <span data-ttu-id="ae067-126">Sie können Vererbung allerdings verwenden, wenn Sie Klassen strukturieren, und Sie können diese Methoden in der verwalteten Codeimplementierung des Typs aufrufen.</span><span class="sxs-lookup"><span data-stu-id="ae067-126">However, you can use inheritance when you structure your classes and you can call such methods in the managed code implementation of the type.</span></span>  
  
-   <span data-ttu-id="ae067-127">Mit Ausnahme des Klassenkonstruktors können Member nicht überladen werden.</span><span class="sxs-lookup"><span data-stu-id="ae067-127">Members cannot be overloaded, except for the class constructor.</span></span> <span data-ttu-id="ae067-128">Wenn Sie eine überladene Methode erstellen, wird kein Fehler ausgelöst, wenn Sie die Assembly registrieren oder den Typ in [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] erstellen</span><span class="sxs-lookup"><span data-stu-id="ae067-128">If you do create an overloaded method, no error is raised when you register the assembly or create the type in [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="ae067-129">Erkennung der überladenen Methode tritt zur Laufzeit auf, nicht beim Erstellen des Typs.</span><span class="sxs-lookup"><span data-stu-id="ae067-129">Detection of the overloaded method occurs at run time, not when the type is created.</span></span> <span data-ttu-id="ae067-130">Überladene Methoden können in der Klasse vorhanden sein, solange sie nie aufgerufen werden.</span><span class="sxs-lookup"><span data-stu-id="ae067-130">Overloaded methods can exist in the class as long as they are never invoked.</span></span> <span data-ttu-id="ae067-131">Sobald Sie eine überladene Methode aufrufen, wird ein Fehler ausgelöst.</span><span class="sxs-lookup"><span data-stu-id="ae067-131">Once you invoke the overloaded method, an error is raised.</span></span>  
  
-   <span data-ttu-id="ae067-132">Alle `static`- oder `Shared`-Member müssen als Konstanten oder als schreibgeschützt deklariert werden.</span><span class="sxs-lookup"><span data-stu-id="ae067-132">Any `static` (or `Shared`) members must be declared as constants or as read-only.</span></span> <span data-ttu-id="ae067-133">Statische Member können nicht änderbar sein.</span><span class="sxs-lookup"><span data-stu-id="ae067-133">Static members cannot be mutable.</span></span>  
  
-   <span data-ttu-id="ae067-134">Wenn das `SqlUserDefinedTypeAttribute.MaxByteSize`-Feld auf -1 festgelegt wurde, kann die serialisierte UDT so groß wir die Größenbeschränkung für große Objekte (LOB, Large Object) sein (zurzeit 2 GB).</span><span class="sxs-lookup"><span data-stu-id="ae067-134">If the `SqlUserDefinedTypeAttribute.MaxByteSize` field is set to -1, the serialized UDT can be as large as the large object (LOB) size limit (currently 2 GB).</span></span> <span data-ttu-id="ae067-135">Die Größe des UDTs kann den im `MaxByteSized`-Feld angegebenen Wert nicht überschreiten.</span><span class="sxs-lookup"><span data-stu-id="ae067-135">The size of the UDT cannot exceed the value specified in the `MaxByteSized` field.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="ae067-136">Obwohl sie vom Server zum Durchführen von Vergleichen nicht verwendet wird, können Sie optional die `System.IComparable`-Schnittstelle implementieren, die eine einzelne Methode, nämlich `CompareTo`, bereitstellt</span><span class="sxs-lookup"><span data-stu-id="ae067-136">Although it is not used by the server for performing comparisons, you can optionally implement the `System.IComparable` interface, which exposes a single method, `CompareTo`.</span></span> <span data-ttu-id="ae067-137">Diese Methode wird auf Clientseite in Situationen verwendet, in denen UDT-Werte präzise verglichen oder geordnet werden sollen.</span><span class="sxs-lookup"><span data-stu-id="ae067-137">This is used on the client side in situations in which it is desirable to accurately compare or order UDT values.</span></span>  
  
## <a name="native-serialization"></a><span data-ttu-id="ae067-138">Systemeigene Serialisierung</span><span class="sxs-lookup"><span data-stu-id="ae067-138">Native Serialization</span></span>  
 <span data-ttu-id="ae067-139">Die Auswahl der richtigen Serialisierungsattribute für den UDT hängt vom Typ des UDTs ab, den Sie erstellen möchten.</span><span class="sxs-lookup"><span data-stu-id="ae067-139">Choosing the right serialization attributes for your UDT depends on the type of UDT you are trying to create.</span></span> <span data-ttu-id="ae067-140">Für das `Native`-Serialisierungsformat wird eine sehr einfache Struktur verwendet, die es [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] ermöglicht, eine effiziente systemeigene Darstellung des UDTs auf dem Datenträger zu speichern.</span><span class="sxs-lookup"><span data-stu-id="ae067-140">The `Native` serialization format utilizes a very simple structure that enables [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] to store an efficient native representation of the UDT on disk.</span></span> <span data-ttu-id="ae067-141">Das `Native`-Format wird empfohlen, wenn der UDT einfach ist und nur Felder der folgenden Typen enthält:</span><span class="sxs-lookup"><span data-stu-id="ae067-141">The `Native` format is recommended if the UDT is simple and only contains fields of the following types:</span></span>  
  
 <span data-ttu-id="ae067-142">**bool**, **Byte**, **SByte**, **Short**, **UShort**, **int**, **uint**, **Long**, **ulong**, **float**, **Double**, **SqlByte**, **SqlInt16**, **SqlInt32**, **SqlInt64**, **SqlDateTime**, **SqlSingle**, **SqlDouble**, **SqlMoney**, **SqlBoolean**</span><span class="sxs-lookup"><span data-stu-id="ae067-142">**bool**, **byte**, **sbyte**, **short**, **ushort**, **int**, **uint**, **long**, **ulong**, **float**, **double**, **SqlByte**, **SqlInt16**, **SqlInt32**, **SqlInt64**, **SqlDateTime**, **SqlSingle**, **SqlDouble**, **SqlMoney**, **SqlBoolean**</span></span>  
  
 <span data-ttu-id="ae067-143">Werttypen, die aus Feldern der oben genannten Typen bestehen, sind gute Kandidaten für `Native` das Format, z `structs` . b. in Visual c# (oder `Structures` in Visual Basic).</span><span class="sxs-lookup"><span data-stu-id="ae067-143">Value types that are composed of fields of the above types are good candidates for `Native` format, such as `structs` in Visual C#, (or `Structures` as they are known in Visual Basic).</span></span> <span data-ttu-id="ae067-144">Ein UDT, der mit dem `Native`-Serialisierungsformat angegeben wurde, kann z. B. ein Feld eines anderen UDTs enthalten, das auch mit dem `Native`-Format angegeben wurde.</span><span class="sxs-lookup"><span data-stu-id="ae067-144">For example, a UDT specified with the `Native` serialization format may contain a field of another UDT that was also specified with the `Native` format.</span></span> <span data-ttu-id="ae067-145">Wenn die UDT-Definition komplexer ist und Datentypen enthält, die nicht aus der Liste oben stammen, müssen Sie stattdessen das `UserDefined`-Serialisierungsformat angeben.</span><span class="sxs-lookup"><span data-stu-id="ae067-145">If the UDT definition is more complex and contains data types not on the above list, you must specify the `UserDefined` serialization format instead.</span></span>  
  
 <span data-ttu-id="ae067-146">Für das `Native`-Format müssen die folgenden Anforderungen erfüllt sein:</span><span class="sxs-lookup"><span data-stu-id="ae067-146">The `Native` format has the following requirements:</span></span>  
  
-   <span data-ttu-id="ae067-147">Der Typ darf für `Microsoft.SqlServer.Server.SqlUserDefinedTypeAttribute.MaxByteSize` keinen Wert angeben.</span><span class="sxs-lookup"><span data-stu-id="ae067-147">The type must not specify a value for `Microsoft.SqlServer.Server.SqlUserDefinedTypeAttribute.MaxByteSize`.</span></span>  
  
-   <span data-ttu-id="ae067-148">Alle Felder müssen serialisierbar sein.</span><span class="sxs-lookup"><span data-stu-id="ae067-148">All fields must be serializable.</span></span>  
  
-   <span data-ttu-id="ae067-149">`System.Runtime.InteropServices.StructLayoutAttribute` muss als `StructLayout.LayoutKindSequential` angegeben werden, wenn der UDT in einer Klasse und nicht in einer Struktur definiert wird.</span><span class="sxs-lookup"><span data-stu-id="ae067-149">The `System.Runtime.InteropServices.StructLayoutAttribute` must be specified as `StructLayout.LayoutKindSequential` if the UDT is defined in a class and not a structure.</span></span> <span data-ttu-id="ae067-150">Dieses Attribut steuert das physische Layout der Datenfelder und wird verwendet, um zu erzwingen, dass die Elemente in der Reihenfolge angeordnet werden, in der sie erscheinen.</span><span class="sxs-lookup"><span data-stu-id="ae067-150">This attribute controls the physical layout of the data fields and is used to force the members to be laid out in the order in which they appear.</span></span> [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="ae067-151">bestimmt anhand dieses Attributs die Feldreihenfolge für UDTs mit mehreren Werten.</span><span class="sxs-lookup"><span data-stu-id="ae067-151">uses this attribute to determine the field order for UDTs with multiple values.</span></span>  
  
 <span data-ttu-id="ae067-152">Ein Beispiel für einen UDT, der mit `Native` der Serialisierung definiert wird, finden Sie unter Point UDT beim [Codieren von benutzerdefinierten Typen](creating-user-defined-types-coding.md).</span><span class="sxs-lookup"><span data-stu-id="ae067-152">For an example of a UDT defined with `Native` serialization, see the Point UDT in [Coding User-Defined Types](creating-user-defined-types-coding.md).</span></span>  
  
## <a name="userdefined-serialization"></a><span data-ttu-id="ae067-153">UserDefined-Serialisierung</span><span class="sxs-lookup"><span data-stu-id="ae067-153">UserDefined Serialization</span></span>  
 <span data-ttu-id="ae067-154">Die `UserDefined`-Formateinstellung für das `Microsoft.SqlServer.Server.SqlUserDefinedTypeAttribute`-Attribut gibt dem Entwickler volle Kontrolle über das Binärformat.</span><span class="sxs-lookup"><span data-stu-id="ae067-154">The `UserDefined` format setting for the `Microsoft.SqlServer.Server.SqlUserDefinedTypeAttribute` attribute gives the developer full control over the binary format.</span></span> <span data-ttu-id="ae067-155">Wenn Sie die `Format`-Attributeigenschaft als `UserDefined` angeben, müssen Sie im Code wie folgt vorgehen:</span><span class="sxs-lookup"><span data-stu-id="ae067-155">When specifying the `Format` attribute property as `UserDefined`, you must do the following in your code:</span></span>  
  
-   <span data-ttu-id="ae067-156">Geben Sie die optionale `IsByteOrdered`-Attributeigenschaft an.</span><span class="sxs-lookup"><span data-stu-id="ae067-156">Specify the optional `IsByteOrdered` attribute property.</span></span> <span data-ttu-id="ae067-157">Standardwert: `false`.</span><span class="sxs-lookup"><span data-stu-id="ae067-157">The default value is `false`.</span></span>  
  
-   <span data-ttu-id="ae067-158">Geben Sie die `MaxByteSize`-Eigenschaft von `Microsoft.SqlServer.Server.SqlUserDefinedTypeAttribute` an.</span><span class="sxs-lookup"><span data-stu-id="ae067-158">Specify the `MaxByteSize` property of the `Microsoft.SqlServer.Server.SqlUserDefinedTypeAttribute`.</span></span>  
  
-   <span data-ttu-id="ae067-159">Schreiben Sie Code, um die `Read`- und die `Write`-Methode für den UDT zu implementieren, indem Sie die `System.Data.Sql.IBinarySerialize`-Schnittstelle implementieren.</span><span class="sxs-lookup"><span data-stu-id="ae067-159">Write code to implement `Read` and `Write` methods for the UDT by implementing the `System.Data.Sql.IBinarySerialize` interface.</span></span>  
  
 <span data-ttu-id="ae067-160">Ein Beispiel für einen UDT, der mit `UserDefined` der Serialisierung definiert wird, finden Sie im Currency UDT unter [Programmieren benutzerdefinierter Typen](creating-user-defined-types-coding.md).</span><span class="sxs-lookup"><span data-stu-id="ae067-160">For an example of a UDT defined with `UserDefined` serialization, see the Currency UDT in [Coding User-Defined Types](creating-user-defined-types-coding.md).</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="ae067-161">Für UDT-Felder muss die systemeigene Serialisierung verwendet werden, oder die Felder müssen erhalten bleiben, um indiziert zu werden.</span><span class="sxs-lookup"><span data-stu-id="ae067-161">UDT fields must use native serialization or be persisted in order to be indexed.</span></span>  
  
## <a name="serialization-attributes"></a><span data-ttu-id="ae067-162">Serialisierungsattribute</span><span class="sxs-lookup"><span data-stu-id="ae067-162">Serialization Attributes</span></span>  
 <span data-ttu-id="ae067-163">Attribute bestimmen, wie die Serialisierung verwendet wird, um die Speicherdarstellung von UDTs zu erstellen und um UDTs durch Werte an den Client zu übertragen.</span><span class="sxs-lookup"><span data-stu-id="ae067-163">Attributes determine how serialization is used to construct the storage representation of UDTs and to transmit UDTs by value to the client.</span></span> <span data-ttu-id="ae067-164">Beim Erstellen des UDTs ist es erforderlich, das `Microsoft.SqlServer.Server.SqlUserDefinedTypeAttribute` anzugeben.</span><span class="sxs-lookup"><span data-stu-id="ae067-164">You are required to specify the `Microsoft.SqlServer.Server.SqlUserDefinedTypeAttribute` when creating the UDT.</span></span> <span data-ttu-id="ae067-165">Das `Microsoft.SqlServer.Server.SqlUserDefinedTypeAttribute`-Attribut gibt an, dass die Klasse ein UDT ist, und gibt den Speicher für den UDT an.</span><span class="sxs-lookup"><span data-stu-id="ae067-165">The `Microsoft.SqlServer.Server.SqlUserDefinedTypeAttribute` attribute indicates that the class is a UDT and specifies the storage for the UDT.</span></span> <span data-ttu-id="ae067-166">Sie können das `Serializable`-Attribut optional angeben, obwohl [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] dieses nicht erfordert.</span><span class="sxs-lookup"><span data-stu-id="ae067-166">You can optionally specify the `Serializable` attribute, although [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] does not require this.</span></span>  
  
 <span data-ttu-id="ae067-167">Das `Microsoft.SqlServer.Server.SqlUserDefinedTypeAttribute` verfügt über folgende Eigenschaften.</span><span class="sxs-lookup"><span data-stu-id="ae067-167">The `Microsoft.SqlServer.Server.SqlUserDefinedTypeAttribute` has the following properties.</span></span>  
  
 `Format`  
 <span data-ttu-id="ae067-168">Gibt das Serialisierungsformat an, das je nach den Datentypen des UDTs `Native` oder `UserDefined` sein kann.</span><span class="sxs-lookup"><span data-stu-id="ae067-168">Specifies the serialization format, which can be `Native` or `UserDefined`, depending on the data types of the UDT.</span></span>  
  
 `IsByteOrdered`  
 <span data-ttu-id="ae067-169">Ein `Boolean`-Wert, der bestimmt, wie [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] binäre Vergleiche für den UDT durchführt.</span><span class="sxs-lookup"><span data-stu-id="ae067-169">A `Boolean` value that determines how [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] performs binary comparisons on the UDT.</span></span>  
  
 `IsFixedLength`  
 <span data-ttu-id="ae067-170">Gibt an, ob alle Instanzen dieses UDTs dieselbe Länge haben.</span><span class="sxs-lookup"><span data-stu-id="ae067-170">Indicates whether all instances of this UDT are the same length.</span></span>  
  
 `MaxByteSize`  
 <span data-ttu-id="ae067-171">Die maximale Größe der Instanz in Byte.</span><span class="sxs-lookup"><span data-stu-id="ae067-171">The maximum size of the instance, in bytes.</span></span> <span data-ttu-id="ae067-172">Sie müssen die `MaxByteSize` mit dem `UserDefined`-Serialisierungsformat angeben.</span><span class="sxs-lookup"><span data-stu-id="ae067-172">You must specify `MaxByteSize` with the `UserDefined` serialization format.</span></span> <span data-ttu-id="ae067-173">Bei einem UDT, für den benutzerdefinierte Serialisierung festgelegt ist, bezieht sich `MaxByteSize` auf die Gesamtgröße des UDTs in der vom Benutzer festgelegten serialisierten Form.</span><span class="sxs-lookup"><span data-stu-id="ae067-173">For a UDT with user-defined serialization specified, `MaxByteSize` refers to the total size of the UDT in its serialized form as defined by the user.</span></span> <span data-ttu-id="ae067-174">Der Wert von `MaxByteSize` muss zwischen 1 und 8000 liegen oder auf -1 festgelegt werden, um anzugeben, dass der UDT größer als 8000 Byte ist (die Gesamtgröße kann die maximale LOB-Größe nicht übersteigen).</span><span class="sxs-lookup"><span data-stu-id="ae067-174">The value of `MaxByteSize` must be in the range of 1 to 8000, or set to -1 to indicate that the UDT is greater than 8000 bytes (the total size cannot exceed the maximum LOB size).</span></span> <span data-ttu-id="ae067-175">Angenommen, für einen UDT ist eine Zeichenfolge von 10 Zeichen (`System.Char`) festgelegt.</span><span class="sxs-lookup"><span data-stu-id="ae067-175">Consider a UDT with a property of a string of 10 characters (`System.Char`).</span></span> <span data-ttu-id="ae067-176">Wenn der UDT anhand eines BinaryWriter serialisiert wird, beträgt die Gesamtgröße der serialisierten Zeichenfolge 22 Byte: 2 Byte pro Unicode-UTF-16-Zeichen, multipliziert mit der maximalen Anzahl von Zeichen, plus 2 Kontrollzeichen, die beim Serialisieren eines binären Datenstroms zusätzlich anfallen.</span><span class="sxs-lookup"><span data-stu-id="ae067-176">When the UDT is serialized by using a BinaryWriter, the total size of the serialized string is 22 bytes: 2 bytes per Unicode UTF-16 character, multiplied by the maximum number of characters, plus 2 control bytes of overhead incurred from serializing a binary stream.</span></span> <span data-ttu-id="ae067-177">Bei der Ermittlung des `MaxByteSize`-Werts muss daher die Gesamtgröße des serialisierten UDTs berücksichtigt werden: die Größe der ins Binärformat serialisierten Daten plus die bei der Serialisierung anfallenden Daten.</span><span class="sxs-lookup"><span data-stu-id="ae067-177">Therefore, when determining the value of `MaxByteSize`, the total size of the serialized UDT must be considered: the size of the data serialized in binary form plus the overhead incurred by serialization.</span></span>  
  
 `ValidationMethodName`  
 <span data-ttu-id="ae067-178">Der Name der Methode, mit der Instanzen des UDTs überprüft werden.</span><span class="sxs-lookup"><span data-stu-id="ae067-178">The name of the method used to validate instances of the UDT.</span></span>  
  
### <a name="setting-isbyteordered"></a><span data-ttu-id="ae067-179">Einstellung 'IsByteOrdered'</span><span class="sxs-lookup"><span data-stu-id="ae067-179">Setting IsByteOrdered</span></span>  
 <span data-ttu-id="ae067-180">Wenn die `Microsoft.SqlServer.Server.SqlUserDefinedTypeAttribute.IsByteOrdered`-Eigenschaft auf `true` festgelegt wird, gewährleisten Sie damit, dass die serialisierten Binärdaten für eine semantische Sortierung der Informationen verwendet werden können.</span><span class="sxs-lookup"><span data-stu-id="ae067-180">When the `Microsoft.SqlServer.Server.SqlUserDefinedTypeAttribute.IsByteOrdered` property is set to `true`, you are in effect guaranteeing that the serialized binary data can be used for semantic ordering of the information.</span></span> <span data-ttu-id="ae067-181">So kann jede Instanz eines UDT-Objekts mit Bytereihenfolge nur eine einzige serialisierte Darstellung haben.</span><span class="sxs-lookup"><span data-stu-id="ae067-181">Thus, each instance of a byte-ordered UDT object can only have one serialized representation.</span></span> <span data-ttu-id="ae067-182">Die Ausführung eines Vergleichsvorgangs für die serialisierten Bytes in [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] sollte zu denselben Resultaten führen wie der entsprechende Vergleichsvorgang für verwalteten Code.</span><span class="sxs-lookup"><span data-stu-id="ae067-182">When a comparison operation is performed in [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] on the serialized bytes, its results should be the same as if the same comparison operation had taken place in managed code.</span></span> <span data-ttu-id="ae067-183">Die folgenden Funktionen werden ebenfalls unterstützt, wenn `IsByteOrdered` auf `true` festgelegt ist:</span><span class="sxs-lookup"><span data-stu-id="ae067-183">The following features are also supported when `IsByteOrdered` is set to `true`:</span></span>  
  
-   <span data-ttu-id="ae067-184">Die Fähigkeit zum Erstellen von Indizes für Spalten dieses Typs</span><span class="sxs-lookup"><span data-stu-id="ae067-184">The ability to create indexes on columns of this type.</span></span>  
  
-   <span data-ttu-id="ae067-185">Die Fähigkeit, für Spalten dieses Typs Primär- und Fremdschlüssel sowie die Einschränkungen CHECK und UNIQUE zu erstellen</span><span class="sxs-lookup"><span data-stu-id="ae067-185">The ability to create primary and foreign keys as well as CHECK and UNIQUE constraints on columns of this type.</span></span>  
  
-   <span data-ttu-id="ae067-186">Die Fähigkeit, [!INCLUDE[tsql](../../includes/tsql-md.md)]-ORDER BY-, GROUP BY- und PARTITION BY-Klauseln zu verwenden.</span><span class="sxs-lookup"><span data-stu-id="ae067-186">The ability to use [!INCLUDE[tsql](../../includes/tsql-md.md)] ORDER BY, GROUP BY, and PARTITION BY clauses.</span></span> <span data-ttu-id="ae067-187">In diesen Fällen wird die binäre Darstellung des Typs verwendet, um die Reihenfolge zu bestimmen</span><span class="sxs-lookup"><span data-stu-id="ae067-187">In these cases, the binary representation of the type is used to determine the order.</span></span>  
  
-   <span data-ttu-id="ae067-188">Die Fähigkeit, Vergleichsoperatoren in [!INCLUDE[tsql](../../includes/tsql-md.md)]-Anweisungen zu verwenden</span><span class="sxs-lookup"><span data-stu-id="ae067-188">The ability to use comparison operators in [!INCLUDE[tsql](../../includes/tsql-md.md)] statements.</span></span>  
  
-   <span data-ttu-id="ae067-189">Die Fähigkeit, berechnete Spalten dieses Typs persistent zu speichern</span><span class="sxs-lookup"><span data-stu-id="ae067-189">The ability to persist computed columns of this type.</span></span>  
  
 <span data-ttu-id="ae067-190">Beachten Sie, dass sowohl das `Native`-Serialisierungsformat als auch das `UserDefined`-Serialisierungsformat die folgenden Vergleichsoperatoren unterstützen, wenn `IsByteOrdered` auf `true` festgelegt ist:</span><span class="sxs-lookup"><span data-stu-id="ae067-190">Note that both the `Native` and `UserDefined` serialization formats support the following comparison operators when `IsByteOrdered` is set to `true`:</span></span>  
  
-   <span data-ttu-id="ae067-191">Gleich (=)</span><span class="sxs-lookup"><span data-stu-id="ae067-191">Equal to (=)</span></span>  
  
-   <span data-ttu-id="ae067-192">Ungleich (!=)</span><span class="sxs-lookup"><span data-stu-id="ae067-192">Not equal to (!=)</span></span>  
  
-   <span data-ttu-id="ae067-193">Größer als (>)</span><span class="sxs-lookup"><span data-stu-id="ae067-193">Greater than (>)</span></span>  
  
-   <span data-ttu-id="ae067-194">Kleiner als (\<)</span><span class="sxs-lookup"><span data-stu-id="ae067-194">Less than (\<)</span></span>  
  
-   <span data-ttu-id="ae067-195">Größer als oder gleich (>=)</span><span class="sxs-lookup"><span data-stu-id="ae067-195">Greater than or equal to (>=)</span></span>  
  
-   <span data-ttu-id="ae067-196">Kleiner oder gleich (<=)</span><span class="sxs-lookup"><span data-stu-id="ae067-196">Less than or equal to (<=)</span></span>  
  
### <a name="implementing-nullability"></a><span data-ttu-id="ae067-197">Implementieren von NULL-Zulässigkeit</span><span class="sxs-lookup"><span data-stu-id="ae067-197">Implementing Nullability</span></span>  
 <span data-ttu-id="ae067-198">Zusätzlich zum ordnungsgemäßen Angeben der Attribute für die Assemblys muss die Klasse auch NULL-Zulässigkeit unterstützen.</span><span class="sxs-lookup"><span data-stu-id="ae067-198">In addition to specifying the attributes for your assemblies correctly, your class must also support nullability.</span></span> <span data-ttu-id="ae067-199">UDTs, die in [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] geladen werden, erkennen Nullwerte, aber damit der UDT einen Nullwert erkennt, muss die Klasse die `INullable`-Schnittstelle implementieren.</span><span class="sxs-lookup"><span data-stu-id="ae067-199">UDTs loaded into [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] are null-aware, but in order for the UDT to recognize a null value, the class must implement the `INullable` interface.</span></span> <span data-ttu-id="ae067-200">Weitere Informationen und ein Beispiel für die Implementierung der NULL-Zulässigkeit in einem UDT finden Sie unter Programmieren von [benutzerdefinierten Typen](creating-user-defined-types-coding.md).</span><span class="sxs-lookup"><span data-stu-id="ae067-200">For more information and an example of how to implement nullability in a UDT, see [Coding User-Defined Types](creating-user-defined-types-coding.md).</span></span>  
  
### <a name="string-conversions"></a><span data-ttu-id="ae067-201">Zeichenfolgenkonvertierungen</span><span class="sxs-lookup"><span data-stu-id="ae067-201">String Conversions</span></span>  
 <span data-ttu-id="ae067-202">Zum Unterstützen der Zeichenfolgenkonvertierung in und aus UDTs müssen Sie in der Klasse eine `Parse`-Methode und eine `ToString`-Methode angeben.</span><span class="sxs-lookup"><span data-stu-id="ae067-202">To support string conversion to and from the UDT, you must provide a `Parse` method and a `ToString` method in your class.</span></span> <span data-ttu-id="ae067-203">Die `Parse`-Methode lässt das Konvertieren einer Zeichenfolge in einen UDT zu.</span><span class="sxs-lookup"><span data-stu-id="ae067-203">The `Parse` method allows a string to be converted into a UDT.</span></span> <span data-ttu-id="ae067-204">Die Zeichenfolge muss als `static` (oder `Shared` in Visual Basic) deklariert werden und einen Parameter vom Typ `System.Data.SqlTypes.SqlString` verwenden.</span><span class="sxs-lookup"><span data-stu-id="ae067-204">It must be declared as `static` (or `Shared` in Visual Basic), and take a parameter of type `System.Data.SqlTypes.SqlString`.</span></span> <span data-ttu-id="ae067-205">Weitere Informationen und ein Beispiel für die Implementierung der `Parse` -Methode und der- `ToString` Methode finden Sie unter [Programmieren benutzerdefinierter Typen](creating-user-defined-types-coding.md).</span><span class="sxs-lookup"><span data-stu-id="ae067-205">For more information and an example of how to implement the `Parse` and `ToString` methods, see [Coding User-Defined Types](creating-user-defined-types-coding.md).</span></span>  
  
## <a name="xml-serialization"></a><span data-ttu-id="ae067-206">XML-Serialisierung</span><span class="sxs-lookup"><span data-stu-id="ae067-206">XML Serialization</span></span>  
 <span data-ttu-id="ae067-207">UDTs müssen die Konvertierung in und aus `xml`-Daten unterstützen, indem sie dem Vertrag für die XML-Serialisierung entsprechen.</span><span class="sxs-lookup"><span data-stu-id="ae067-207">UDTs must support conversion to and from the `xml` data type by conforming to the contract for XML serialization.</span></span> <span data-ttu-id="ae067-208">Der `System.Xml.Serialization`-Namespace enthält Klassen, die zum Serialisieren von Objekten in Dokumente oder Streams im XML-Format verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="ae067-208">The `System.Xml.Serialization` namespace contains classes that are used to serialize objects into XML format documents or streams.</span></span> <span data-ttu-id="ae067-209">Sie können die `xml`-Serialisierung mithilfe der `IXmlSerializable`-Schnittstelle implementieren, die das benutzerdefinierte Formatieren für die XML-Serialisierung und -Deserialisierung bereitstellt.</span><span class="sxs-lookup"><span data-stu-id="ae067-209">You can choose to implement `xml` serialization by using the `IXmlSerializable` interface, which provides custom formatting for XML serialization and deserialization.</span></span>  
  
 <span data-ttu-id="ae067-210">Zusätzlich zum Durchführen expliziter Konvertierungen von UDT in `xml` ermöglicht die XML-Serialisierung Folgendes:</span><span class="sxs-lookup"><span data-stu-id="ae067-210">In addition to performing explicit conversions from UDT to `xml`, XML serialization enables you to:</span></span>  
  
-   <span data-ttu-id="ae067-211">Verwenden von `Xquery` für Werte von UDT-Instanzen nach der Konvertierung in den `xml`-Datentyp.</span><span class="sxs-lookup"><span data-stu-id="ae067-211">Use `Xquery` over values of UDT instances after conversion to the `xml` data type.</span></span>  
  
-   <span data-ttu-id="ae067-212">Verwenden von UDTs in parametrisierten Abfragen und Webmethoden mit systemeigenen XML-Webdiensten in [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="ae067-212">Use UDTs in parameterized queries and Web methods with Native XML Web Services in [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span>  
  
-   <span data-ttu-id="ae067-213">Verwenden von UDTs, um ein Massenladen von XML-Daten durchzuführen.</span><span class="sxs-lookup"><span data-stu-id="ae067-213">Use UDTs to receive a bulk load of XML data.</span></span>  
  
-   <span data-ttu-id="ae067-214">Serialisieren von DataSets, die Tabellen mit UDT-Spalten enthalten.</span><span class="sxs-lookup"><span data-stu-id="ae067-214">Serialize DataSets that contain tables with UDT columns.</span></span>  
  
 <span data-ttu-id="ae067-215">UDTs werden nicht in FOR XML-Abfragen serialisiert.</span><span class="sxs-lookup"><span data-stu-id="ae067-215">UDTs are not serialized in FOR XML queries.</span></span> <span data-ttu-id="ae067-216">Um eine FOR XML-Abfrage auszuführen, die die XML-Serialisierung von UDTs anzeigt, konvertieren Sie die einzelnen UDT-Spalten explizit in den `xml`-Datentyp in der SELECT-Anweisung.</span><span class="sxs-lookup"><span data-stu-id="ae067-216">To execute a FOR XML query that displays the XML serialization of UDTs, explicitly convert each UDT column to the `xml` data type in the SELECT statement.</span></span> <span data-ttu-id="ae067-217">Sie können die Spalten auch explizit in `varbinary`, `varchar` oder `nvarchar` konvertieren.</span><span class="sxs-lookup"><span data-stu-id="ae067-217">You can also explicitly convert the columns to `varbinary`, `varchar`, or `nvarchar`.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="ae067-218">Weitere Informationen</span><span class="sxs-lookup"><span data-stu-id="ae067-218">See Also</span></span>  
 [<span data-ttu-id="ae067-219">Erstellen eines benutzerdefinierten Typs</span><span class="sxs-lookup"><span data-stu-id="ae067-219">Creating a User-Defined Type</span></span>](creating-user-defined-types.md)  
  
  
