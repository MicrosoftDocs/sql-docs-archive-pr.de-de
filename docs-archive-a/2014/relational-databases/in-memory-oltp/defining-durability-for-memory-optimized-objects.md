---
title: Definieren von Dauerhaftigkeit für speicheroptimierte Objekte | Microsoft-Dokumentation
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: in-memory-oltp
ms.topic: conceptual
ms.assetid: 0fe85fbf-8e8d-4983-96fd-d04b3c7d6d65
author: CarlRabeler
ms.author: carlrab
ms.openlocfilehash: 325f50a74ea75270dd62fc3564200c59255dc6cb
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 08/04/2020
ms.locfileid: "87615377"
---
# <a name="defining-durability-for-memory-optimized-objects"></a><span data-ttu-id="5bbae-102">Definieren von Dauerhaftigkeit für speicheroptimierte Objekte</span><span class="sxs-lookup"><span data-stu-id="5bbae-102">Defining Durability for Memory-Optimized Objects</span></span>
  <span data-ttu-id="5bbae-103">In-Memory OLTP gewährleistet vollständige Atomarität, Konsistenz, Isolation und Dauerhaftigkeit (ACID-Eigenschaften).</span><span class="sxs-lookup"><span data-stu-id="5bbae-103">In-Memory OLTP guarantees full atomicity, consistency, isolation, and full durability (ACID) properties.</span></span> <span data-ttu-id="5bbae-104">Dauerhaftigkeit im Kontext von [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] und speicheroptimierten Tabellen bietet folgende Garantien:</span><span class="sxs-lookup"><span data-stu-id="5bbae-104">Durability in the context of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] and memory-optimized tables provides following guarantees:</span></span>  
  
 <span data-ttu-id="5bbae-105">Dauerhaftigkeit von Transaktionen</span><span class="sxs-lookup"><span data-stu-id="5bbae-105">Transactional Durability</span></span>  
 <span data-ttu-id="5bbae-106">Wenn Sie ein Commit für eine vollständig dauerhafte Transaktion ausführen, die DDL- oder DML-Änderungen an einer speicheroptimierten Tabelle vorgenommen hat, werden die Änderungen, die an einer dauerhaften speicheroptimierten Tabelle vorgenommen wurden, dauerhaft gespeichert.</span><span class="sxs-lookup"><span data-stu-id="5bbae-106">When you commit a fully durable transaction that made (DDL or DML) changes to a memory-optimized table, the changes made to a durable memory-optimized table are permanent.</span></span>  
  
 <span data-ttu-id="5bbae-107">Wenn Sie für eine verzögert dauerhafte Transaktion ein Commit in einer speicheroptimierte Tabelle ausführen, wird die Transaktion erst dauerhaft, nachdem das Transaktionsprotokoll im Arbeitsspeicher auf dem Datenträger gespeichert wurde.</span><span class="sxs-lookup"><span data-stu-id="5bbae-107">When you commit a delayed durable transaction to a memory-optimized table, the transaction becomes durable only after the in-memory transaction log is saved to disk.</span></span>  
  
 <span data-ttu-id="5bbae-108">Dauerhaftigkeit bei Neustarts</span><span class="sxs-lookup"><span data-stu-id="5bbae-108">Restart Durability</span></span>  
 <span data-ttu-id="5bbae-109">Wenn [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] nach einem Systemabsturz oder einem geplanten Herunterfahren neu gestartet wird, werden die speicheroptimierten Tabellen erneut instanziiert, um den Status der Tabellen vor dem Herunterfahren oder Systemabsturz wiederherzustellen.</span><span class="sxs-lookup"><span data-stu-id="5bbae-109">When [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] restarts after a crash or planned shutdown, the memory-optimized durable tables are reinstantiated to restore them to the state before the shutdown or crash.</span></span>  
  
 <span data-ttu-id="5bbae-110">Dauerhaftigkeit bei Medienfehlern</span><span class="sxs-lookup"><span data-stu-id="5bbae-110">Media Failure Durability</span></span>  
 <span data-ttu-id="5bbae-111">Wenn sich auf einem fehlerhaften oder beschädigten Datenträger eine oder mehrere persistente Kopien von dauerhaften speicheroptimierten Objekten befinden, werden durch die Sicherungs- und Wiederherstellungsfunktion von [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] speicheroptimierte Tabellen auf dem neuen Medium wiederhergestellt.</span><span class="sxs-lookup"><span data-stu-id="5bbae-111">If a failed or corrupt disk contains one or more persisted copies of durable memory-optimized objects, the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] backup and restore feature restores memory-optimized tables on the new media.</span></span>  
  
 <span data-ttu-id="5bbae-112">Es gibt zwei Dauerhaftigkeitsoptionen für speicheroptimierte Tabellen:</span><span class="sxs-lookup"><span data-stu-id="5bbae-112">There are two durability options for memory-optimized tables:</span></span>  
  
 <span data-ttu-id="5bbae-113">SCHEMA_ONLY (nichtdauerhafte Tabelle)</span><span class="sxs-lookup"><span data-stu-id="5bbae-113">SCHEMA_ONLY (non-durable table)</span></span>  
 <span data-ttu-id="5bbae-114">Diese Option stellt die Dauerhaftigkeit des Tabellenschemas einschließlich Indizes sicher.</span><span class="sxs-lookup"><span data-stu-id="5bbae-114">This option ensures durability of the table schema, including indexes.</span></span> <span data-ttu-id="5bbae-115">Wenn [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] neu gestartet wird, wird die nichtdauerhafte Tabelle neu erstellt, aber ohne Daten gestartet.</span><span class="sxs-lookup"><span data-stu-id="5bbae-115">When [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] is restarted, the non-durable table is recreated, but starts with no data.</span></span> <span data-ttu-id="5bbae-116">(Dies steht im Gegensatz zu einer Tabelle in tempdb, bei der sowohl die Tabelle als auch die Daten beim Neustart verloren gehen.) Ein typisches Szenario zum Erstellen einer nichtdauerhaften Tabelle besteht darin, kurzlebige Daten wie eine Stagingtabelle für einen ETL-Vorgang zu speichern.</span><span class="sxs-lookup"><span data-stu-id="5bbae-116">(This is unlike a table in tempdb, where both the table and its data are lost upon restart.) A typical scenario for creating a non-durable table is to store transient data, such as a staging table for an ETL process.</span></span> <span data-ttu-id="5bbae-117">Durch SCHEMA_ONLY-Dauerhaftigkeit werden Transaktionsprotokollierung und -prüfpunkt vermieden, was zu einer erheblichen Reduzierung von E/A-Vorgängen führen kann.</span><span class="sxs-lookup"><span data-stu-id="5bbae-117">A SCHEMA_ONLY durability avoids both transaction logging and checkpoint, which can significantly reduce I/O operations.</span></span>  
  
 <span data-ttu-id="5bbae-118">SCHEMA_AND_DATA (dauerhafte Tabelle)</span><span class="sxs-lookup"><span data-stu-id="5bbae-118">SCHEMA_AND_DATA (durable table)</span></span>  
 <span data-ttu-id="5bbae-119">Diese Option gewährleistet Dauerhaftigkeit für Schema und Daten.</span><span class="sxs-lookup"><span data-stu-id="5bbae-119">This option provides durability of both schema and data.</span></span> <span data-ttu-id="5bbae-120">Der Grad der Datendauerhaftigkeit ist abhängig davon, ob Sie ein Commit für eine Transaktion mit vollständiger oder verzögerter Dauerhaftigkeit ausführen.</span><span class="sxs-lookup"><span data-stu-id="5bbae-120">The level of data durability depends on whether you commit a transaction as fully durable or with delayed durability.</span></span> <span data-ttu-id="5bbae-121">Vollständig dauerhafte Transaktionen bieten die gleiche Dauerhaftigkeitsgarantie für Daten und Schemas – ähnlich einer datenträgerbasierten Tabelle.</span><span class="sxs-lookup"><span data-stu-id="5bbae-121">Fully durable transactions provide the same durability guarantee for data and schema, similar to a disk-based table.</span></span> <span data-ttu-id="5bbae-122">Verzögerte Dauerhaftigkeit verbessert die Leistung, kann aber im Falle eines Serverabsturzes oder Failovers zu Datenverlusten führen.</span><span class="sxs-lookup"><span data-stu-id="5bbae-122">Delayed durability will improve performance but can potentially result in data loss in case of a server crash or fail over.</span></span> <span data-ttu-id="5bbae-123">(Weitere Informationen zur verzögerten Dauerhaftigkeit finden Sie unter [Steuern der Transaktionsdauerhaftigkeit](../logs/control-transaction-durability.md).)</span><span class="sxs-lookup"><span data-stu-id="5bbae-123">(For more information about delayed durability, see [Control Transaction Durability](../logs/control-transaction-durability.md).)</span></span>  
  
 <span data-ttu-id="5bbae-124">Das Schema der speicheroptimierten Tabelle wird – ähnlich datenträgerbasierten Tabellen – in der primären Dateigruppe einer Datenbank dauerhaft gespeichert.</span><span class="sxs-lookup"><span data-stu-id="5bbae-124">The schema of the memory-optimized table is persisted, similar to disk-based tables, in the primary file group of a database.</span></span>  
  
 <span data-ttu-id="5bbae-125">Daten in dauerhaften speicheroptimierten Tabellen werden in Daten-/Änderungsdateipaaren gespeichert.</span><span class="sxs-lookup"><span data-stu-id="5bbae-125">Data in durable memory-optimized tables is saved in data and delta file pairs.</span></span>  
  
 <span data-ttu-id="5bbae-126">Die in speicheroptimierten Tabellen definierten Indizes werden nur in Metadaten, aber nicht im Speicher beibehalten.</span><span class="sxs-lookup"><span data-stu-id="5bbae-126">The indexes defined in memory-optimized tables persist only in metadata, not in storage.</span></span> <span data-ttu-id="5bbae-127">Indexstrukturen werden während des Ladevorgangs speicheroptimierter Tabellen generiert.</span><span class="sxs-lookup"><span data-stu-id="5bbae-127">Index structures are generated as part of loading memory-optimized tables.</span></span>  
  
 <span data-ttu-id="5bbae-128">Zeilen werden entweder explizit durch eine DELETE-Anweisung oder indirekt durch eine UPDATE-Anweisung gelöscht.</span><span class="sxs-lookup"><span data-stu-id="5bbae-128">Rows are deleted either explicitly by a DELETE statement or indirectly by an UPDATE statement.</span></span> <span data-ttu-id="5bbae-129">Ein UPDATE-Vorgang setzt sich aus einer Löschung und einer Einfügung zusammen.</span><span class="sxs-lookup"><span data-stu-id="5bbae-129">An UPDATE operation is executed as a delete followed by an insert.</span></span> <span data-ttu-id="5bbae-130">Wenn eine Zeile gelöscht wird, wird keine Änderung an einer Datendatei vorgenommen. An die entsprechende Änderungsdatei wird jedoch eine neue Zeile angefügt, die die gelöschte Zeile identifiziert.</span><span class="sxs-lookup"><span data-stu-id="5bbae-130">When a row is deleted, no change is made to a data file but a new row, identifying the deleted row, is appended to the corresponding delta file.</span></span>  
  
 <span data-ttu-id="5bbae-131">Während der Wiederherstellung liest die In-Memory-OLTP-Engine Daten- und Änderungsdateien zum Laden in den physischen Speicher.</span><span class="sxs-lookup"><span data-stu-id="5bbae-131">During recovery or restore operations, the In-Memory OLTP engine reads data and delta files for loading into physical memory.</span></span> <span data-ttu-id="5bbae-132">Die Ladezeit wird bestimmt durch:</span><span class="sxs-lookup"><span data-stu-id="5bbae-132">The load time is determined by:</span></span>  
  
-   <span data-ttu-id="5bbae-133">Die zu ladende Datenmenge.</span><span class="sxs-lookup"><span data-stu-id="5bbae-133">The amount of data to load.</span></span>  
  
-   <span data-ttu-id="5bbae-134">Sequenzielle E/A-Bandbreite.</span><span class="sxs-lookup"><span data-stu-id="5bbae-134">Sequential I/O bandwidth.</span></span>  
  
-   <span data-ttu-id="5bbae-135">Grad der Parallelität, bestimmt anhand der Anzahl der Dateicontainer und Prozessorkerne.</span><span class="sxs-lookup"><span data-stu-id="5bbae-135">Degree of parallelism, determined by number of file containers and processor cores.</span></span>  
  
-   <span data-ttu-id="5bbae-136">Die Anzahl von Protokolldatensätzen im aktiven Teil des Protokolls, die wiederholt werden müssen.</span><span class="sxs-lookup"><span data-stu-id="5bbae-136">The amount of log records in the active portion of the log that need to be redone.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="5bbae-137">Weitere Informationen</span><span class="sxs-lookup"><span data-stu-id="5bbae-137">See Also</span></span>  
 [<span data-ttu-id="5bbae-138">Erstellen und Verwalten von Speicher für speicheroptimierte Objekte</span><span class="sxs-lookup"><span data-stu-id="5bbae-138">Creating and Managing Storage for Memory-Optimized Objects</span></span>](creating-and-managing-storage-for-memory-optimized-objects.md)  
  
  
