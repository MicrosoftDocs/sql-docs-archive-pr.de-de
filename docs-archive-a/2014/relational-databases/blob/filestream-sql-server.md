---
title: FILESTREAM (SQL Server) | Microsoft-Dokumentation
ms.custom: ''
ms.date: 06/14/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: filestream
ms.topic: conceptual
helpviewer_keywords:
- FILESTREAM [SQL Server]
- FILESTREAM [SQL Server], about
- FILESTREAM [SQL Server], overview
ms.assetid: 9a5a8166-bcbe-4680-916c-26276253eafa
author: MikeRayMSFT
ms.author: mikeray
ms.openlocfilehash: 971f45fd69f381a8997bb2f8f08444f4d9c107c4
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 08/04/2020
ms.locfileid: "87723942"
---
# <a name="filestream-sql-server"></a><span data-ttu-id="73b19-102">FILESTREAM (SQL Server)</span><span class="sxs-lookup"><span data-stu-id="73b19-102">FILESTREAM (SQL Server)</span></span>
  <span data-ttu-id="73b19-103">FILESTREAM ermöglicht es [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]-basierten Anwendungen, nicht strukturierte Daten wie beispielsweise Dokumente und Bilder im Dateisystem zu speichern.</span><span class="sxs-lookup"><span data-stu-id="73b19-103">FILESTREAM enables [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]-based applications to store unstructured data, such as documents and images, on the file system.</span></span> <span data-ttu-id="73b19-104">Anwendungen können die umfassenden Streaming-APIs und die Leistung des Dateisystems nutzen und dabei die Transaktionskonsistenz zwischen den nicht strukturierten Daten und den entsprechenden strukturierten Daten erhalten.</span><span class="sxs-lookup"><span data-stu-id="73b19-104">Applications can leverage the rich streaming APIs and performance of the file system and at the same time maintain transactional consistency between the unstructured data and corresponding structured data.</span></span>  
  
 <span data-ttu-id="73b19-105">FileStream integriert [!INCLUDE[ssDEnoversion](../../includes/ssdenoversion-md.md)] in ein NTFS-Dateisystem, indem `varbinary(max)` Binary Large Object (BLOB)-Daten als Dateien im Dateisystem gespeichert werden.</span><span class="sxs-lookup"><span data-stu-id="73b19-105">FILESTREAM integrates the [!INCLUDE[ssDEnoversion](../../includes/ssdenoversion-md.md)] with an NTFS file system by storing `varbinary(max)` binary large object (BLOB) data as files on the file system.</span></span> [!INCLUDE[tsql](../../includes/tsql-md.md)] <span data-ttu-id="73b19-106">-Anweisungen können FILESTREAM-Daten eingefügt, aktualisiert, abgefragt, gesucht und gesichert werden.</span><span class="sxs-lookup"><span data-stu-id="73b19-106">statements can insert, update, query, search, and back up FILESTREAM data.</span></span> <span data-ttu-id="73b19-107">Die Win32-Dateisystemschnittstellen stellen Streamingzugriff auf die Daten bereit.</span><span class="sxs-lookup"><span data-stu-id="73b19-107">Win32 file system interfaces provide streaming access to the data.</span></span>  
  
 <span data-ttu-id="73b19-108">FILESTREAM verwendet den NT-Systemcache zum Zwischenspeichern von Dateidaten.</span><span class="sxs-lookup"><span data-stu-id="73b19-108">FILESTREAM uses the NT system cache for caching file data.</span></span> <span data-ttu-id="73b19-109">Dies wirkt allen negativen Auswirkungen entgegen, die FILESTREAM-Daten auf die [!INCLUDE[ssDE](../../includes/ssde-md.md)] -Leistung haben könnten.</span><span class="sxs-lookup"><span data-stu-id="73b19-109">This helps reduce any effect that FILESTREAM data might have on [!INCLUDE[ssDE](../../includes/ssde-md.md)] performance.</span></span> <span data-ttu-id="73b19-110">Der [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] -Pufferpool wird nicht verwendet, deshalb steht dieser Arbeitsspeicher für die Abfragebearbeitung zur Verfügung.</span><span class="sxs-lookup"><span data-stu-id="73b19-110">The [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] buffer pool is not used; therefore, this memory is available for query processing.</span></span>  
  
 <span data-ttu-id="73b19-111">FILESTREAM wird bei der Installation oder beim Upgrade von [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]nicht automatisch aktiviert.</span><span class="sxs-lookup"><span data-stu-id="73b19-111">FILESTREAM is not automatically enabled when you install or upgrade [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="73b19-112">Sie müssen FILESTREAM mit dem SQL Server-Konfigurations-Manager und [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)]aktivieren.</span><span class="sxs-lookup"><span data-stu-id="73b19-112">You must enable FILESTREAM by using SQL Server Configuration Manager and [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)].</span></span> <span data-ttu-id="73b19-113">Um FILESTREAM zu verwenden, müssen Sie eine Datenbank mit einer bestimmten Dateigruppe erstellen bzw. ändern, sodass sie diese Dateigruppe enthält.</span><span class="sxs-lookup"><span data-stu-id="73b19-113">To use FILESTREAM, you must create or modify a database to contain a special type of filegroup.</span></span> <span data-ttu-id="73b19-114">Erstellen bzw. ändern Sie dann eine Tabelle, sodass diese eine `varbinary(max)`-Spalte mit dem FILESTREAM-Attribut enthält.</span><span class="sxs-lookup"><span data-stu-id="73b19-114">Then, create or modify a table so that it contains a `varbinary(max)` column with the FILESTREAM attribute.</span></span> <span data-ttu-id="73b19-115">Anschließend können Sie [!INCLUDE[tsql](../../includes/tsql-md.md)] und Win32 zur Verwaltung der FILESTREAM-Daten verwenden.</span><span class="sxs-lookup"><span data-stu-id="73b19-115">After you complete these tasks, you can use [!INCLUDE[tsql](../../includes/tsql-md.md)] and Win32 to manage the FILESTREAM data.</span></span>  
  
 <span data-ttu-id="73b19-116">Weitere Informationen zum Installieren und Verwenden von FILESTREAM finden Sie in der Liste [Verwandte Aufgaben](#reltasks).</span><span class="sxs-lookup"><span data-stu-id="73b19-116">For more information about installing and using FILESTREAM, see the list of [Related Tasks](#reltasks).</span></span>  
  
##  <a name="when-to-use-filestream"></a><a name="whentouse"></a><span data-ttu-id="73b19-117">Verwendungszwecke von FILESTREAM</span><span class="sxs-lookup"><span data-stu-id="73b19-117">When to Use FILESTREAM</span></span>  
 <span data-ttu-id="73b19-118">In [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] kann es sich bei BLOBs um Standarddaten des Typs `varbinary(max)` handeln, die in Tabellen gespeichert werden, oder um FILESTREAM-Objekte des Typs `varbinary(max)`, deren Daten im Dateisystem gespeichert werden.</span><span class="sxs-lookup"><span data-stu-id="73b19-118">In [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], BLOBs can be standard `varbinary(max)` data that stores the data in tables, or FILESTREAM `varbinary(max)` objects that store the data in the file system.</span></span> <span data-ttu-id="73b19-119">Größe und Verwendung der Daten bestimmen, ob Sie sie in einer Datenbank oder im Dateisystem speichern sollten.</span><span class="sxs-lookup"><span data-stu-id="73b19-119">The size and use of the data determines whether you should use database storage or file system storage.</span></span> <span data-ttu-id="73b19-120">Wenn die folgenden Bedingungen zutreffen, sollten Sie die Verwendung von FILESTREAM in Betracht ziehen:</span><span class="sxs-lookup"><span data-stu-id="73b19-120">If the following conditions are true, you should consider using FILESTREAM:</span></span>  
  
-   <span data-ttu-id="73b19-121">Die Objekte, die gespeichert werden, sind im Durchschnitt größer als 1 MB.</span><span class="sxs-lookup"><span data-stu-id="73b19-121">Objects that are being stored are, on average, larger than 1 MB.</span></span>  
  
-   <span data-ttu-id="73b19-122">Schneller Lesezugriff ist wichtig.</span><span class="sxs-lookup"><span data-stu-id="73b19-122">Fast read access is important.</span></span>  
  
-   <span data-ttu-id="73b19-123">Sie entwickeln Anwendungen, die eine mittlere Ebene für die Anwendungslogik nutzen.</span><span class="sxs-lookup"><span data-stu-id="73b19-123">You are developing applications that use a middle tier for application logic.</span></span>  
  
 <span data-ttu-id="73b19-124">Bei kleineren Objekte ist die Streamingleistung oft besser, wenn `varbinary(max)`-BLOBs in der Datenbank gespeichert werden.</span><span class="sxs-lookup"><span data-stu-id="73b19-124">For smaller objects, storing `varbinary(max)` BLOBs in the database often provides better streaming performance.</span></span>  
  
  
##  <a name="filestream-storage"></a><a name="storage"></a><span data-ttu-id="73b19-125">FILESTREAM-Speicher</span><span class="sxs-lookup"><span data-stu-id="73b19-125">FILESTREAM Storage</span></span>  
 <span data-ttu-id="73b19-126">Die FILESTREAM-Speicherung wird als `varbinary(max)`-Spalte implementiert, deren Daten als BLOBs im Dateisystem gespeichert werden.</span><span class="sxs-lookup"><span data-stu-id="73b19-126">FILESTREAM storage is implemented as a `varbinary(max)` column in which the data is stored as BLOBs in the file system.</span></span> <span data-ttu-id="73b19-127">Die Größe der BLOBs wird nur durch die Volumegröße des Dateisystems beschränkt.</span><span class="sxs-lookup"><span data-stu-id="73b19-127">The sizes of the BLOBs are limited only by the volume size of the file system.</span></span> <span data-ttu-id="73b19-128">Die für `varbinary(max)` definierte Standarddateigrößenbeschränkung von 2 GB gilt nicht für BLOBs, die im Dateisystem gespeichert werden.</span><span class="sxs-lookup"><span data-stu-id="73b19-128">The standard `varbinary(max)` limitation of 2-GB file sizes does not apply to BLOBs that are stored in the file system.</span></span>  
  
 <span data-ttu-id="73b19-129">Um anzugeben, dass die Daten einer Spalte im Dateisystem gespeichert werden sollten, geben Sie das FILESTREAM-Attribut für eine `varbinary(max)`-Spalte an.</span><span class="sxs-lookup"><span data-stu-id="73b19-129">To specify that a column should store data on the file system, specify the FILESTREAM attribute on a `varbinary(max)` column.</span></span> <span data-ttu-id="73b19-130">Dies bewirkt, dass [!INCLUDE[ssDE](../../includes/ssde-md.md)] alle Daten der betreffenden Spalte im Dateisystem, aber nicht in der Datenbankdatei speichert.</span><span class="sxs-lookup"><span data-stu-id="73b19-130">This causes the [!INCLUDE[ssDE](../../includes/ssde-md.md)] to store all data for that column on the file system, but not in the database file.</span></span>  
  
 <span data-ttu-id="73b19-131">FILESTREAM-Daten müssen in FILESTREAM-Dateigruppen gespeichert werden.</span><span class="sxs-lookup"><span data-stu-id="73b19-131">FILESTREAM data must be stored in FILESTREAM filegroups.</span></span> <span data-ttu-id="73b19-132">Eine FILESTREAM-Dateigruppe ist eine besondere Dateigruppe, die Dateisystemverzeichnisse statt der Dateien selbst enthält.</span><span class="sxs-lookup"><span data-stu-id="73b19-132">A FILESTREAM filegroup is a special filegroup that contains file system directories instead of the files themselves.</span></span> <span data-ttu-id="73b19-133">Diese Dateisystemverzeichnisse werden als *Datencontainer*bezeichnet.</span><span class="sxs-lookup"><span data-stu-id="73b19-133">These file system directories are called *data containers*.</span></span> <span data-ttu-id="73b19-134">Datencontainer bilden die Schnittstelle zwischen der [!INCLUDE[ssDE](../../includes/ssde-md.md)] -Speicherung und der Dateisystemspeicherung.</span><span class="sxs-lookup"><span data-stu-id="73b19-134">Data containers are the interface between [!INCLUDE[ssDE](../../includes/ssde-md.md)] storage and file system storage.</span></span>  
  
 <span data-ttu-id="73b19-135">Bei Verwendung von FILESTREAM sind die folgenden Punkte zu beachten:</span><span class="sxs-lookup"><span data-stu-id="73b19-135">When you use FILESTREAM storage, consider the following:</span></span>  
  
-   <span data-ttu-id="73b19-136">Wenn eine Tabelle eine FILESTREAM-Spalte enthält, muss jede Zeile über eine eindeutige Zeilen-ID, die nicht NULL ist, verfügen.</span><span class="sxs-lookup"><span data-stu-id="73b19-136">When a table contains a FILESTREAM column, each row must have a nonnull unique row ID.</span></span>  
  
-   <span data-ttu-id="73b19-137">Einer FILESTREAM-Dateigruppe können mehrere Datencontainer hinzugefügt werden.</span><span class="sxs-lookup"><span data-stu-id="73b19-137">Multiple data containers can be added to a FILESTREAM filegroup.</span></span>  
  
-   <span data-ttu-id="73b19-138">FILESTREAM-Datencontainer können nicht geschachtelt werden.</span><span class="sxs-lookup"><span data-stu-id="73b19-138">FILESTREAM data containers cannot be nested.</span></span>  
  
-   <span data-ttu-id="73b19-139">Wenn Sie Failoverclustering verwenden, müssen sich die FILESTREAM-Dateigruppen auf freigegebenen Datenträgerressourcen befinden.</span><span class="sxs-lookup"><span data-stu-id="73b19-139">When you are using failover clustering, the FILESTREAM filegroups must be on shared disk resources.</span></span>  
  
-   <span data-ttu-id="73b19-140">FILESTREAM-Dateigruppen können auf komprimierten Volumes erstellt werden.</span><span class="sxs-lookup"><span data-stu-id="73b19-140">FILESTREAM filegroups can be on compressed volumes.</span></span>  
  
### <a name="integrated-management"></a><span data-ttu-id="73b19-141">Integrierte Verwaltung</span><span class="sxs-lookup"><span data-stu-id="73b19-141">Integrated Management</span></span>  
 <span data-ttu-id="73b19-142">Weil FILESTREAM als `varbinary(max)`-Spalte implementiert und direkt in [!INCLUDE[ssDE](../../includes/ssde-md.md)] integriert ist, können die [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]-Verwaltungstools und -Funktionen für FILESTREAM-Daten eingesetzt werden, ohne in irgendeiner Weise geändert werden zu müssen.</span><span class="sxs-lookup"><span data-stu-id="73b19-142">Because FILESTREAM is implemented as a `varbinary(max)` column and integrated directly into the [!INCLUDE[ssDE](../../includes/ssde-md.md)], most [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] management tools and functions work without modification for FILESTREAM data.</span></span> <span data-ttu-id="73b19-143">Beispielsweise können Sie alle Sicherungs- und Wiederherstellungsmodelle mit FILESTREAM-Daten verwenden, und die FILESTREAM-Daten werden zusammen mit den strukturierten Daten in der Datenbank gesichert.</span><span class="sxs-lookup"><span data-stu-id="73b19-143">For example, you can use all backup and recovery models with FILESTREAM data, and the FILESTREAM data is backed up with the structured data in the database.</span></span> <span data-ttu-id="73b19-144">Wenn Sie die FILESTREAM-Daten nicht zusammen mit relationalen Daten sichern möchten, können Sie eine Teilsicherung durchführen, um die FILESTREAM-Dateigruppen auszuschließen.</span><span class="sxs-lookup"><span data-stu-id="73b19-144">If you do not want to back up FILESTREAM data with relational data, you can use a partial backup to exclude FILESTREAM filegroups.</span></span>  

  
### <a name="integrated-security"></a><span data-ttu-id="73b19-145">Integrierte Sicherheit</span><span class="sxs-lookup"><span data-stu-id="73b19-145">Integrated Security</span></span>  
 <span data-ttu-id="73b19-146">In [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]werden FILESTREAM-Daten wie alle anderen Daten geschützt: indem Berechtigungen auf der Tabellen- oder Spaltenebene gewährt werden.</span><span class="sxs-lookup"><span data-stu-id="73b19-146">In [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], FILESTREAM data is secured just like other data is secured: by granting permissions at the table or column levels.</span></span> <span data-ttu-id="73b19-147">Wenn ein Benutzer über Berechtigungen zum Öffnen der FILESTREAM-Spalte einer Tabelle verfügt, dann er die zugehörigen Dateien öffnen.</span><span class="sxs-lookup"><span data-stu-id="73b19-147">If a user has permission to the FILESTREAM column in a table, the user can open the associated files.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="73b19-148">FILESTREAM-Daten können nicht verschlüsselt werden.</span><span class="sxs-lookup"><span data-stu-id="73b19-148">Encryption is not supported on FILESTREAM data.</span></span>  
  
 <span data-ttu-id="73b19-149">Nur das Konto, unter dem das [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]-Dienstkonto ausgeführt wird, erhält NTFS-Berechtigungen für den FILESTREAM-Container.</span><span class="sxs-lookup"><span data-stu-id="73b19-149">Only the account under which the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] service account runs is granted NTFS permissions to the FILESTREAM container.</span></span> <span data-ttu-id="73b19-150">Wir empfehlen, dass keinem anderen Konto Berechtigungen für den Datencontainer gewährt werden.</span><span class="sxs-lookup"><span data-stu-id="73b19-150">We recommend that no other account be granted permissions on the data container.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="73b19-151">SQL-Anmeldungen funktionieren nicht mit FILESTREAM-Containern.</span><span class="sxs-lookup"><span data-stu-id="73b19-151">SQL logins will not work with FILESTREAM containers.</span></span> <span data-ttu-id="73b19-152">Nur NTFS-Authentifizierung funktioniert mit FILESTREAM-Containern.</span><span class="sxs-lookup"><span data-stu-id="73b19-152">Only NTFS authentication will work with FILESTREAM containers.</span></span>  
  
##  <a name="accessing-blob-data-with-transact-sql-and-file-system-streaming-access"></a><a name="dual"></a> <span data-ttu-id="73b19-153">Zugreifen auf BLOB-Daten mit Transact-SQL und Dateisystem-Streamingzugriff</span><span class="sxs-lookup"><span data-stu-id="73b19-153">Accessing BLOB Data with Transact-SQL and File System Streaming Access</span></span>  
 <span data-ttu-id="73b19-154">Nachdem Daten in einer FILESTREAM-Spalte gespeichert wurden, können Sie über [!INCLUDE[tsql](../../includes/tsql-md.md)] -Transaktionen oder mithilfe von Win32-APIs auf die Dateien zugreifen.</span><span class="sxs-lookup"><span data-stu-id="73b19-154">After you store data in a FILESTREAM column, you can access the files by using [!INCLUDE[tsql](../../includes/tsql-md.md)] transactions or by using Win32 APIs.</span></span>  
  
### <a name="transact-sql-access"></a><span data-ttu-id="73b19-155">Zugriff über Transact-SQL</span><span class="sxs-lookup"><span data-stu-id="73b19-155">Transact-SQL Access</span></span>  
 <span data-ttu-id="73b19-156">Mit [!INCLUDE[tsql](../../includes/tsql-md.md)]können Sie FILESTREAM-Daten einfügen, aktualisieren und löschen:</span><span class="sxs-lookup"><span data-stu-id="73b19-156">By using [!INCLUDE[tsql](../../includes/tsql-md.md)], you can insert, update, and delete FILESTREAM data:</span></span>  
  
-   <span data-ttu-id="73b19-157">Mit einem Einfügevorgang können Sie ein FILESTREAM-Feld vorab mit einem Nullwert, einem leeren Wert oder relativ kurzen Inlinedaten füllen.</span><span class="sxs-lookup"><span data-stu-id="73b19-157">You can use an insert operation to prepopulate a FILESTREAM field with a null value, empty value, or relatively short inline data.</span></span> <span data-ttu-id="73b19-158">Große Datenmengen lassen sich jedoch effizienter in eine Datei streamen, wenn Win32-Schnittstellen verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="73b19-158">However, a large amount of data is more efficiently streamed into a file that uses Win32 interfaces.</span></span>  
  
-   <span data-ttu-id="73b19-159">Wenn Sie ein FILESTREAM-Feld aktualisieren, ändern Sie die zugrunde liegenden BLOB-Daten im Dateisystem.</span><span class="sxs-lookup"><span data-stu-id="73b19-159">When you update a FILESTREAM field, you modify the underlying BLOB data in the file system.</span></span> <span data-ttu-id="73b19-160">Wenn ein FILESTREAM-Feld auf NULL festgelegt wird, werden die dem Feld zugeordneten BLOB-Daten gelöscht.</span><span class="sxs-lookup"><span data-stu-id="73b19-160">When a FILESTREAM field is set to NULL, the BLOB data associated with the field is deleted.</span></span> <span data-ttu-id="73b19-161">Ein segmentiertes Update in [!INCLUDE[tsql](../../includes/tsql-md.md)] , das als UPDATE **.** Write() implementiert wird, kann nicht zur Ausführung von partiellen Updates der Daten eingesetzt werden.</span><span class="sxs-lookup"><span data-stu-id="73b19-161">You cannot use a [!INCLUDE[tsql](../../includes/tsql-md.md)] chunked update, implemented as UPDATE **.** Write(), to perform partial updates to the data.</span></span>  
  
-   <span data-ttu-id="73b19-162">Wenn Sie eine Zeile löschen oder eine Tabelle, die FILESTREAM-Daten enthält, löschen oder abschneiden, löschen Sie auch die zugrunde liegenden BLOB-Daten im Dateisystem.</span><span class="sxs-lookup"><span data-stu-id="73b19-162">When you delete a row or delete or truncate a table that contains FILESTREAM data, you delete the underlying BLOB data in the file system.</span></span>  
  
### <a name="file-system-streaming-access"></a><span data-ttu-id="73b19-163">Dateisystem-Streamingzugriff</span><span class="sxs-lookup"><span data-stu-id="73b19-163">File System Streaming Access</span></span>  
 <span data-ttu-id="73b19-164">Die Win32-Streamingunterstützung funktioniert im Kontext von [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] -Transaktionen.</span><span class="sxs-lookup"><span data-stu-id="73b19-164">The Win32 streaming support works in the context of a [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] transaction.</span></span> <span data-ttu-id="73b19-165">Im Rahmen einer Transaktion können Sie mithilfe von FILESTREAM-Funktionen, einen logischen UNC-Pfad für eine Datei ermitteln.</span><span class="sxs-lookup"><span data-stu-id="73b19-165">Within a transaction, you can use FILESTREAM functions to obtain a logical UNC file system path of a file.</span></span> <span data-ttu-id="73b19-166">Sie verwenden dann die OpenSqlFilestream-API, um ein Dateihandle abzurufen.</span><span class="sxs-lookup"><span data-stu-id="73b19-166">You then use the OpenSqlFilestream API to obtain a file handle.</span></span> <span data-ttu-id="73b19-167">Dieses Handle kann dann von Win32-Dateistreamingschnittstellen, wie ReadFile() und WriteFile(), verwendet werden, um über das Dateisystem auf die Datei zuzugreifen und diese zu aktualisieren.</span><span class="sxs-lookup"><span data-stu-id="73b19-167">This handle can then be used by Win32 file streaming interfaces, such as ReadFile() and WriteFile(), to access and update the file by way of the file system.</span></span>  
  
 <span data-ttu-id="73b19-168">Weil Dateivorgänge transaktionsgebunden sind, können Sie FILESTREAM-Dateien nicht über das Dateisystem löschen oder umbenennen.</span><span class="sxs-lookup"><span data-stu-id="73b19-168">Because file operations are transactional, you cannot delete or rename FILESTREAM files through the file system.</span></span>  
  
 <span data-ttu-id="73b19-169">**Anweisungsmodell**</span><span class="sxs-lookup"><span data-stu-id="73b19-169">**Statement Model**</span></span>  
  
 <span data-ttu-id="73b19-170">Der FILESTREAM Dateisystemzugriff modelliert eine [!INCLUDE[tsql](../../includes/tsql-md.md)] -Anweisung, indem die Datei geöffnet und geschlossen wird.</span><span class="sxs-lookup"><span data-stu-id="73b19-170">The FILESTREAM file system access models a [!INCLUDE[tsql](../../includes/tsql-md.md)] statement by using file open and close.</span></span> <span data-ttu-id="73b19-171">Die Anweisung beginnt, wenn ein Dateihandle geöffnet wird, und endet, wenn das Handle geschlossen wird.</span><span class="sxs-lookup"><span data-stu-id="73b19-171">The statement starts when a file handle is opened and ends when the handle is closed.</span></span> <span data-ttu-id="73b19-172">Wenn beispielsweise ein Handle zum Schreiben geschlossen wird, dann wird ein möglicherweise für die Tabelle registrierter AFTER-Trigger so ausgelöst, als wäre eine UPDATE-Anweisung abgeschlossen worden.</span><span class="sxs-lookup"><span data-stu-id="73b19-172">For example, when a write handle is closed, any possible AFTER trigger that is registered on the table fires as if an UPDATE statement is completed.</span></span>  
  
 <span data-ttu-id="73b19-173">**Storage Namespace**</span><span class="sxs-lookup"><span data-stu-id="73b19-173">**Storage Namespace**</span></span>  
  
 <span data-ttu-id="73b19-174">Bei FILESTREAM wird der BLOB-physische Dateisystemnamespace für BLOB von [!INCLUDE[ssDE](../../includes/ssde-md.md)] gesteuert.</span><span class="sxs-lookup"><span data-stu-id="73b19-174">In FILESTREAM, the [!INCLUDE[ssDE](../../includes/ssde-md.md)] controls the BLOB physical file system namespace.</span></span> <span data-ttu-id="73b19-175">Eine neue intrinsische Funktion namens [PathName](/sql/relational-databases/system-functions/pathname-transact-sql)liefert den logischen UNC-Pfads des BLOBs, das mit jeder einzelnen FILESTREAM-Zelle der Tabelle verknüpft ist.</span><span class="sxs-lookup"><span data-stu-id="73b19-175">A new intrinsic function, [PathName](/sql/relational-databases/system-functions/pathname-transact-sql), provides the logical UNC path of the BLOB that corresponds to each FILESTREAM cell in the table.</span></span> <span data-ttu-id="73b19-176">Die Anwendung verwendet diesen logischen Pfad, um das Win32-Handle zu erhalten und die BLOB-Daten mithilfe der gewöhnlichen Win32-Dateisystemschnittstellen zu bearbeiten.</span><span class="sxs-lookup"><span data-stu-id="73b19-176">The application uses this logical path to obtain the Win32 handle and operate on the BLOB data by using regular Win32 file system interfaces.</span></span> <span data-ttu-id="73b19-177">Die Funktion gibt NULL zurück, wenn der Wert der FILESTREAM-Spalte gleich NULL ist.</span><span class="sxs-lookup"><span data-stu-id="73b19-177">The function returns NULL if the value of the FILESTREAM column is NULL.</span></span>  
  
 <span data-ttu-id="73b19-178">**Transaktiver Dateisystemzugriff**</span><span class="sxs-lookup"><span data-stu-id="73b19-178">**Transacted File System Access**</span></span>  
  
 <span data-ttu-id="73b19-179">Die neue systeminterne Funktion [GET_FILESTREAM_TRANSACTION_CONTEXT ()](/sql/t-sql/functions/get-filestream-transaction-context-transact-sql)gibt das Token zurück, das die aktuelle Transaktion darstellt, mit der die Sitzung verknüpft ist.</span><span class="sxs-lookup"><span data-stu-id="73b19-179">A new intrinsic function, [GET_FILESTREAM_TRANSACTION_CONTEXT()](/sql/t-sql/functions/get-filestream-transaction-context-transact-sql), provides the token that represents the current transaction that the session is associated with.</span></span> <span data-ttu-id="73b19-180">Die Transaktion muss bereits gestartet, aber noch nicht abgebrochen oder eingetragen worden sein.</span><span class="sxs-lookup"><span data-stu-id="73b19-180">The transaction must have been started and not yet aborted or committed.</span></span> <span data-ttu-id="73b19-181">Durch den Bezug eines Tokens bindet die Anwendung die FILESTREAM-Dateisystem-Streamingvorgänge an eine gestartete Transaktion.</span><span class="sxs-lookup"><span data-stu-id="73b19-181">By obtaining a token, the application binds the FILESTREAM file system streaming operations with a started transaction.</span></span> <span data-ttu-id="73b19-182">Die Funktion gibt NULL zurück, wenn keine explizit gestartete Transaktion vorliegt.</span><span class="sxs-lookup"><span data-stu-id="73b19-182">The function returns NULL in case of no explicitly started transaction.</span></span>  
  
 <span data-ttu-id="73b19-183">Alle Dateihandles müssen geschlossen werden, bevor die Transaktion abgebrochen oder eingetragen wird.</span><span class="sxs-lookup"><span data-stu-id="73b19-183">All file handles must be closed before the transaction commits or aborts.</span></span> <span data-ttu-id="73b19-184">Wenn ein Handle nach Abschluss einer Transaktion geöffnet bleibt, verursachen weitere Lesevorgänge unter Verwendung des Handles einen Fehler. Weitere Schreibvorgänge unter Verwendung des Handles werden zwar ausgeführt, aber die Daten werden nicht auf den Datenträger geschrieben.</span><span class="sxs-lookup"><span data-stu-id="73b19-184">If a handle is left open beyond the transaction scope, additional reads against the handle will cause a failure; additional writes against the handle will succeed, but the actual data will not be written to disk.</span></span> <span data-ttu-id="73b19-185">Wenn die Datenbank oder die [!INCLUDE[ssDE](../../includes/ssde-md.md)] -Instanz geschlossen wird, werden alle geöffneten Handles ungültig.</span><span class="sxs-lookup"><span data-stu-id="73b19-185">Similarly, if the database or instance of the [!INCLUDE[ssDE](../../includes/ssde-md.md)] shuts down, all open handles are invalidated.</span></span>  
  
 <span data-ttu-id="73b19-186">**Dauerhaftigkeit von Transaktionen**</span><span class="sxs-lookup"><span data-stu-id="73b19-186">**Transactional Durability**</span></span>  
  
 <span data-ttu-id="73b19-187">Bei Verwendung von FILESTREAM wird beim Eintragen einer Transaktion von [!INCLUDE[ssDE](../../includes/ssde-md.md)] die Dauerhaftigkeit von Transaktionen für FILESTREAM-BLOB-Daten sichergestellt, die über einen Streamingzugriff auf das Dateisystem geändert werden.</span><span class="sxs-lookup"><span data-stu-id="73b19-187">With FILESTREAM, upon transaction commit, the [!INCLUDE[ssDE](../../includes/ssde-md.md)] ensures transaction durability for FILESTREAM BLOB data that is modified from the file system streaming access.</span></span>  
  
 <span data-ttu-id="73b19-188">**Isolationssemantik**</span><span class="sxs-lookup"><span data-stu-id="73b19-188">**Isolation Semantics**</span></span>  
  
 <span data-ttu-id="73b19-189">Die Isolationssemantik wird durch die [!INCLUDE[ssDE](../../includes/ssde-md.md)] Transaktionsisolationsstufen bestimmt.</span><span class="sxs-lookup"><span data-stu-id="73b19-189">The isolation semantics are governed by [!INCLUDE[ssDE](../../includes/ssde-md.md)] transaction isolation levels.</span></span> <span data-ttu-id="73b19-190">Für den [!INCLUDE[tsql](../../includes/tsql-md.md)] - und den Dateisystemzugriff wird nur die Read Committed-Isolationsstufe unterstützt.</span><span class="sxs-lookup"><span data-stu-id="73b19-190">Read-committed isolation level is supported for [!INCLUDE[tsql](../../includes/tsql-md.md)] and file system access.</span></span> <span data-ttu-id="73b19-191">Wiederholbare Lesevorgänge und auch serialisierbare sowie Momentaufnahmeisolationen werden unterstützt.</span><span class="sxs-lookup"><span data-stu-id="73b19-191">Repeatable read operations, and also serializable and snapshot isolations, are supported.</span></span> <span data-ttu-id="73b19-192">Das Lesen von geänderten Daten, für die kein Commit ausgeführt wurde, wird nicht unterstützt.</span><span class="sxs-lookup"><span data-stu-id="73b19-192">Dirty read is not supported.</span></span>  
  
 <span data-ttu-id="73b19-193">Bei Dateisystemzugriffvorgängen zum Öffnen von Dateien wird auf keine Sperren gewartet.</span><span class="sxs-lookup"><span data-stu-id="73b19-193">The file system access open operations do not wait for any locks.</span></span> <span data-ttu-id="73b19-194">Stattdessen schlagen die Öffnungsvorgänge sofort fehl, wenn wegen der Transaktionsisolation nicht auf die Daten zugegriffen werden kann.</span><span class="sxs-lookup"><span data-stu-id="73b19-194">Instead, the open operations fail immediately if they cannot access the data because of transaction isolation.</span></span> <span data-ttu-id="73b19-195">Die Streaming-API-Aufrufe schlagen mit dem Ergebnis ERROR_SHARING_VIOLATION fehl, wenn der Öffnungsvorgang wegen einer Isolationsverletzung nicht fortgesetzt werden kann.</span><span class="sxs-lookup"><span data-stu-id="73b19-195">The streaming API calls fail with ERROR_SHARING_VIOLATION if the open operation cannot continue because of isolation violation.</span></span>  
  
 <span data-ttu-id="73b19-196">Damit Teilaktualisierungen durchgeführt werden können, kann die Anwendung einen Dateisystembefehl (FSCTL_SQL_FILESTREAM_FETCH_OLD_CONTENT) ausgeben, um den alten Inhalt in die Datei zu laden, auf die das geöffnete Handle verweist.</span><span class="sxs-lookup"><span data-stu-id="73b19-196">To allow for partial updates to be made, the application can issue a device FS control (FSCTL_SQL_FILESTREAM_FETCH_OLD_CONTENT) to fetch the old content into the file that the opened handle references.</span></span> <span data-ttu-id="73b19-197">Daraufhin kopiert der Server den alten Inhalt.</span><span class="sxs-lookup"><span data-stu-id="73b19-197">This will trigger a server-side old content copy.</span></span> <span data-ttu-id="73b19-198">Um das Leistungsverhalten der Anwendung zu verbessern und zu vermeiden, dass bei der Arbeit mit sehr großen Dateien Wartezeitüberschreitungen auftreten, wird die Verwendung asynchroner E/A empfohlen.</span><span class="sxs-lookup"><span data-stu-id="73b19-198">For better application performance and to avoid running into potential time-outs when you are working with very large files, we recommend that you use asynchronous I/O.</span></span>  
  
 <span data-ttu-id="73b19-199">Wenn der FSCTL-Befehl ausgegeben wird, nachdem in die durch das Handle bezeichnete Datei geschrieben wurde, dann werden die Daten des letzten Schreibvorgangs persistent gespeichert, alle zuvor geschriebenen Daten gehen verloren.</span><span class="sxs-lookup"><span data-stu-id="73b19-199">If the FSCTL is issued after the handle has been written to, the last write operation will persist, and prior writes that were made to the handle are lost.</span></span>  
  
 <span data-ttu-id="73b19-200">**Dateisystem-APIs und unterstützte Isolationsstufen**</span><span class="sxs-lookup"><span data-stu-id="73b19-200">**File System APIs and Supported Isolation Levels**</span></span>  
  
 <span data-ttu-id="73b19-201">Wenn eine Dateisystem-API aufgrund einer Isolationsverletzung eine Datei nicht öffnen kann, wird eine ERROR_SHARING_VIOLATION-Ausnahme zurückgegeben.</span><span class="sxs-lookup"><span data-stu-id="73b19-201">When a file system API cannot open a file because of an isolation violation, an ERROR_SHARING_VIOLATION exception is returned.</span></span> <span data-ttu-id="73b19-202">Diese Isolationsverletzung tritt auf, wenn zwei Transaktionen versuchen, auf dieselbe Datei zuzugreifen.</span><span class="sxs-lookup"><span data-stu-id="73b19-202">This isolation violation occurs when two transactions try to access the same file.</span></span> <span data-ttu-id="73b19-203">Das Ergebnis des Zugriffsvorgangs ist von dem Modus abhängig, in dem die Datei geöffnet wurde, und von der Version [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] , in der die Transaktion ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="73b19-203">The outcome of the access operation depends on the mode the file was opened in and the version of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] that the transaction is running on.</span></span> <span data-ttu-id="73b19-204">In der folgenden sind die möglichen Ergebnisse für zwei Transaktionen aufgeführt, die auf dieselbe Datei zugreifen.</span><span class="sxs-lookup"><span data-stu-id="73b19-204">The following table outlines the possibly outcomes for two transactions that are accessing the same file.</span></span>  
  
|<span data-ttu-id="73b19-205">Transaktion 1</span><span class="sxs-lookup"><span data-stu-id="73b19-205">Transaction 1</span></span>|<span data-ttu-id="73b19-206">Transaktion 2</span><span class="sxs-lookup"><span data-stu-id="73b19-206">Transaction 2</span></span>|<span data-ttu-id="73b19-207">Ergebnis unter SQL Server 2008</span><span class="sxs-lookup"><span data-stu-id="73b19-207">Outcome on SQL Server 2008</span></span>|<span data-ttu-id="73b19-208">Ergebnis unter SQL Server 2008 R2 und höheren Versionen</span><span class="sxs-lookup"><span data-stu-id="73b19-208">Outcome on SQL Server 2008 R2 and later versions</span></span>|  
|-------------------|-------------------|--------------------------------|------------------------------------------------------|  
|<span data-ttu-id="73b19-209">Geöffnet zum Lesen.</span><span class="sxs-lookup"><span data-stu-id="73b19-209">Open for read.</span></span>|<span data-ttu-id="73b19-210">Geöffnet zum Lesen.</span><span class="sxs-lookup"><span data-stu-id="73b19-210">Open for read.</span></span>|<span data-ttu-id="73b19-211">Beide erfolgreich.</span><span class="sxs-lookup"><span data-stu-id="73b19-211">Both succeed.</span></span>|<span data-ttu-id="73b19-212">Beide erfolgreich.</span><span class="sxs-lookup"><span data-stu-id="73b19-212">Both succeed.</span></span>|  
|<span data-ttu-id="73b19-213">Geöffnet zum Lesen.</span><span class="sxs-lookup"><span data-stu-id="73b19-213">Open for read.</span></span>|<span data-ttu-id="73b19-214">Geöffnet zum Schreiben.</span><span class="sxs-lookup"><span data-stu-id="73b19-214">Open for write.</span></span>|<span data-ttu-id="73b19-215">Beide erfolgreich.</span><span class="sxs-lookup"><span data-stu-id="73b19-215">Both succeed.</span></span> <span data-ttu-id="73b19-216">Schreibvorgänge unter Transaktion 2 haben keine Auswirkungen auf in Transaktion 1 ausgeführte Lesevorgänge.</span><span class="sxs-lookup"><span data-stu-id="73b19-216">Write operations under transaction 2 do not affect read operations performed in transaction 1.</span></span>|<span data-ttu-id="73b19-217">Beide erfolgreich.</span><span class="sxs-lookup"><span data-stu-id="73b19-217">Both succeed.</span></span> <span data-ttu-id="73b19-218">Schreibvorgänge unter Transaktion 2 haben keine Auswirkungen auf in Transaktion 1 ausgeführte Lesevorgänge.</span><span class="sxs-lookup"><span data-stu-id="73b19-218">Write operations under transaction 2 do not affect read operations performed in transaction 1.</span></span>|  
|<span data-ttu-id="73b19-219">Geöffnet zum Schreiben.</span><span class="sxs-lookup"><span data-stu-id="73b19-219">Open for write.</span></span>|<span data-ttu-id="73b19-220">Geöffnet zum Lesen.</span><span class="sxs-lookup"><span data-stu-id="73b19-220">Open for read.</span></span>|<span data-ttu-id="73b19-221">Das Öffnen für Transaktion 2 schlägt mit einer ERROR_SHARING_VIOLATION-Ausnahme fehl.</span><span class="sxs-lookup"><span data-stu-id="73b19-221">Open for transaction 2 fails with an ERROR_SHARING_VIOLATION exception.</span></span>|<span data-ttu-id="73b19-222">Beide erfolgreich.</span><span class="sxs-lookup"><span data-stu-id="73b19-222">Both succeed.</span></span>|  
|<span data-ttu-id="73b19-223">Geöffnet zum Schreiben.</span><span class="sxs-lookup"><span data-stu-id="73b19-223">Open for write.</span></span>|<span data-ttu-id="73b19-224">Geöffnet zum Schreiben.</span><span class="sxs-lookup"><span data-stu-id="73b19-224">Open for write.</span></span>|<span data-ttu-id="73b19-225">Das Öffnen für Transaktion 2 schlägt mit einer ERROR_SHARING_VIOLATION-Ausnahme fehl.</span><span class="sxs-lookup"><span data-stu-id="73b19-225">Open for transaction 2 fails with an ERROR_SHARING_VIOLATION exception.</span></span>|<span data-ttu-id="73b19-226">Das Öffnen für Transaktion 2 schlägt mit einer ERROR_SHARING_VIOLATION-Ausnahme fehl.</span><span class="sxs-lookup"><span data-stu-id="73b19-226">Open for transaction 2 fails with an ERROR_SHARING_VIOLATION exception.</span></span>|  
|<span data-ttu-id="73b19-227">Geöffnet zum Lesen.</span><span class="sxs-lookup"><span data-stu-id="73b19-227">Open for read.</span></span>|<span data-ttu-id="73b19-228">Geöffnet für SELECT.</span><span class="sxs-lookup"><span data-stu-id="73b19-228">Open for SELECT.</span></span>|<span data-ttu-id="73b19-229">Beide erfolgreich.</span><span class="sxs-lookup"><span data-stu-id="73b19-229">Both succeed.</span></span>|<span data-ttu-id="73b19-230">Beide erfolgreich.</span><span class="sxs-lookup"><span data-stu-id="73b19-230">Both succeed.</span></span>|  
|<span data-ttu-id="73b19-231">Geöffnet zum Lesen.</span><span class="sxs-lookup"><span data-stu-id="73b19-231">Open for read.</span></span>|<span data-ttu-id="73b19-232">Geöffnet für UPDATE oder DELETE.</span><span class="sxs-lookup"><span data-stu-id="73b19-232">Open for UPDATE or DELETE.</span></span>|<span data-ttu-id="73b19-233">Beide erfolgreich.</span><span class="sxs-lookup"><span data-stu-id="73b19-233">Both succeed.</span></span> <span data-ttu-id="73b19-234">Schreibvorgänge unter Transaktion 2 haben keine Auswirkungen auf in Transaktion 1 ausgeführte Lesevorgänge.</span><span class="sxs-lookup"><span data-stu-id="73b19-234">Write operations under transaction 2 do not affect read operations performed in transaction 1.</span></span>|<span data-ttu-id="73b19-235">Beide erfolgreich.</span><span class="sxs-lookup"><span data-stu-id="73b19-235">Both succeed.</span></span> <span data-ttu-id="73b19-236">Schreibvorgänge unter Transaktion 2 haben keine Auswirkungen auf in Transaktion 1 ausgeführte Lesevorgänge.</span><span class="sxs-lookup"><span data-stu-id="73b19-236">Write operations under transaction 2 do not affect read operations performed in transaction 1.</span></span>|  
|<span data-ttu-id="73b19-237">Geöffnet zum Schreiben.</span><span class="sxs-lookup"><span data-stu-id="73b19-237">Open for write.</span></span>|<span data-ttu-id="73b19-238">Geöffnet für SELECT.</span><span class="sxs-lookup"><span data-stu-id="73b19-238">open for SELECT.</span></span>|<span data-ttu-id="73b19-239">Transaktion 2 ist blockiert, bis Transaktion 1 einen Commit für die Transaktion ausführt, die Transaktion beendet oder bei der Transaktionssperre ein Timeout auftritt.</span><span class="sxs-lookup"><span data-stu-id="73b19-239">Transaction 2 blocks until transaction 1 commits or ends the transaction, or the transaction lock times out.</span></span>|<span data-ttu-id="73b19-240">Beide erfolgreich.</span><span class="sxs-lookup"><span data-stu-id="73b19-240">Both succeed.</span></span>|  
|<span data-ttu-id="73b19-241">Geöffnet zum Schreiben.</span><span class="sxs-lookup"><span data-stu-id="73b19-241">Open for write.</span></span>|<span data-ttu-id="73b19-242">Geöffnet für UPDATE oder DELETE.</span><span class="sxs-lookup"><span data-stu-id="73b19-242">Open for UPDATE or DELETE.</span></span>|<span data-ttu-id="73b19-243">Transaktion 2 ist blockiert, bis Transaktion 1 einen Commit für die Transaktion ausführt, die Transaktion beendet oder bei der Transaktionssperre ein Timeout auftritt.</span><span class="sxs-lookup"><span data-stu-id="73b19-243">Transaction 2 blocks until transaction 1 commits or ends the transaction, or the transaction lock times out.</span></span>|<span data-ttu-id="73b19-244">Transaktion 2 ist blockiert, bis Transaktion 1 einen Commit für die Transaktion ausführt, die Transaktion beendet oder bei der Transaktionssperre ein Timeout auftritt.</span><span class="sxs-lookup"><span data-stu-id="73b19-244">Transaction 2 blocks until transaction 1 commits or ends the transaction, or the transaction lock times out.</span></span>|  
|<span data-ttu-id="73b19-245">Geöffnet für SELECT.</span><span class="sxs-lookup"><span data-stu-id="73b19-245">Open for SELECT.</span></span>|<span data-ttu-id="73b19-246">Geöffnet zum Lesen.</span><span class="sxs-lookup"><span data-stu-id="73b19-246">Open for read.</span></span>|<span data-ttu-id="73b19-247">Beide erfolgreich.</span><span class="sxs-lookup"><span data-stu-id="73b19-247">Both succeed.</span></span>|<span data-ttu-id="73b19-248">Beide erfolgreich.</span><span class="sxs-lookup"><span data-stu-id="73b19-248">Both succeed.</span></span>|  
|<span data-ttu-id="73b19-249">Geöffnet für SELECT.</span><span class="sxs-lookup"><span data-stu-id="73b19-249">Open for SELECT.</span></span>|<span data-ttu-id="73b19-250">Geöffnet zum Schreiben.</span><span class="sxs-lookup"><span data-stu-id="73b19-250">Open for write.</span></span>|<span data-ttu-id="73b19-251">Beide erfolgreich.</span><span class="sxs-lookup"><span data-stu-id="73b19-251">Both succeed.</span></span> <span data-ttu-id="73b19-252">Schreibvorgänge unter Transaktion 2 haben keine Auswirkungen auf Transaktion 1.</span><span class="sxs-lookup"><span data-stu-id="73b19-252">Write operations under transaction 2 do not affect transaction 1.</span></span>|<span data-ttu-id="73b19-253">Beide erfolgreich.</span><span class="sxs-lookup"><span data-stu-id="73b19-253">Both succeed.</span></span> <span data-ttu-id="73b19-254">Schreibvorgänge unter Transaktion 2 haben keine Auswirkungen auf Transaktion 1.</span><span class="sxs-lookup"><span data-stu-id="73b19-254">Write operations under transaction 2 do not affect transaction 1.</span></span>|  
|<span data-ttu-id="73b19-255">Geöffnet für UPDATE oder DELETE.</span><span class="sxs-lookup"><span data-stu-id="73b19-255">Open for UPDATE or DELETE.</span></span>|<span data-ttu-id="73b19-256">Geöffnet zum Lesen.</span><span class="sxs-lookup"><span data-stu-id="73b19-256">Open for read.</span></span>|<span data-ttu-id="73b19-257">Der Öffnungsvorgang unter Transaktion 2 schlägt mit einer ERROR_SHARING_VIOLATION-Ausnahme fehl.</span><span class="sxs-lookup"><span data-stu-id="73b19-257">The open operation on transaction 2 fails with an ERROR_SHARING_VIOLATION exception.</span></span>|<span data-ttu-id="73b19-258">Beide erfolgreich.</span><span class="sxs-lookup"><span data-stu-id="73b19-258">Both succeed.</span></span>|  
|<span data-ttu-id="73b19-259">Geöffnet für UPDATE oder DELETE.</span><span class="sxs-lookup"><span data-stu-id="73b19-259">Open for UPDATE or DELETE.</span></span>|<span data-ttu-id="73b19-260">Geöffnet zum Schreiben.</span><span class="sxs-lookup"><span data-stu-id="73b19-260">Open for write.</span></span>|<span data-ttu-id="73b19-261">Der Öffnungsvorgang unter Transaktion 2 schlägt mit einer ERROR_SHARING_VIOLATION-Ausnahme fehl.</span><span class="sxs-lookup"><span data-stu-id="73b19-261">The open operation on transaction 2 fails with an ERROR_SHARING_VIOLATION exception.</span></span>|<span data-ttu-id="73b19-262">Der Öffnungsvorgang unter Transaktion 2 schlägt mit einer ERROR_SHARING_VIOLATION-Ausnahme fehl.</span><span class="sxs-lookup"><span data-stu-id="73b19-262">The open operation on transaction 2 fails with an ERROR_SHARING_VIOLATION exception.</span></span>|  
|<span data-ttu-id="73b19-263">Geöffnet für SELECT mit wiederholbarem Lesen.</span><span class="sxs-lookup"><span data-stu-id="73b19-263">Open for SELECT with repeatable read.</span></span>|<span data-ttu-id="73b19-264">Geöffnet zum Lesen.</span><span class="sxs-lookup"><span data-stu-id="73b19-264">Open for read.</span></span>|<span data-ttu-id="73b19-265">Beide erfolgreich.</span><span class="sxs-lookup"><span data-stu-id="73b19-265">Both succeed.</span></span>|<span data-ttu-id="73b19-266">Beide erfolgreich.</span><span class="sxs-lookup"><span data-stu-id="73b19-266">Both succeed.</span></span>|  
|<span data-ttu-id="73b19-267">Geöffnet für SELECT mit wiederholbarem Lesen.</span><span class="sxs-lookup"><span data-stu-id="73b19-267">Open for SELECT with repeatable read.</span></span>|<span data-ttu-id="73b19-268">Geöffnet zum Schreiben.</span><span class="sxs-lookup"><span data-stu-id="73b19-268">Open for write.</span></span>|<span data-ttu-id="73b19-269">Der Öffnungsvorgang unter Transaktion 2 schlägt mit einer ERROR_SHARING_VIOLATION-Ausnahme fehl.</span><span class="sxs-lookup"><span data-stu-id="73b19-269">The open operation on transaction 2 fails with an ERROR_SHARING_VIOLATION exception.</span></span>|<span data-ttu-id="73b19-270">Der Öffnungsvorgang unter Transaktion 2 schlägt mit einer ERROR_SHARING_VIOLATION-Ausnahme fehl.</span><span class="sxs-lookup"><span data-stu-id="73b19-270">The open operation on transaction 2 fails with an ERROR_SHARING_VIOLATION exception.</span></span>|  
  
 <span data-ttu-id="73b19-271">**Direktes Schreiben von Remoteclients**</span><span class="sxs-lookup"><span data-stu-id="73b19-271">**Write-Through from Remote Clients**</span></span>  
  
 <span data-ttu-id="73b19-272">Der Remotedateisystemzugriff auf FILESTREAM-Daten wird über das SMB (Server Message-Block)-Protokoll ermöglicht.</span><span class="sxs-lookup"><span data-stu-id="73b19-272">Remote file system access to FILESTREAM data is enabled over the Server Message Block (SMB) protocol.</span></span> <span data-ttu-id="73b19-273">Wenn der Client remote ist, werden Schreibvorgänge nicht auf der Clientseite zwischengespeichert.</span><span class="sxs-lookup"><span data-stu-id="73b19-273">If the client is remote, no write operations are cached by the client side.</span></span> <span data-ttu-id="73b19-274">Die Schreibvorgänge werden immer an den Server gesendet.</span><span class="sxs-lookup"><span data-stu-id="73b19-274">The write operations will always be sent to the server.</span></span> <span data-ttu-id="73b19-275">Die Daten können auf der Serverseite zwischengespeichert werden.</span><span class="sxs-lookup"><span data-stu-id="73b19-275">The data can be cached on the server side.</span></span> <span data-ttu-id="73b19-276">Es wird empfohlen, dass Anwendungen, die auf Remoteclients ausgeführt werden, kleine Schreibvorgänge konsolidieren, sodass weniger Schreibvorgänge mit größeren Datenmengen durchgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="73b19-276">We recommend that applications that are running on remote clients consolidate small write operations to make fewer write operations using larger data size.</span></span>  
  
 <span data-ttu-id="73b19-277">Die Erstellung von Speicherabbildern (E/A mit Speicherabbildern) mit einem FILESTREAM-Handle wird nicht unterstützt.</span><span class="sxs-lookup"><span data-stu-id="73b19-277">Creating memory mapped views (memory mapped I/O) by using a FILESTREAM handle is not supported.</span></span> <span data-ttu-id="73b19-278">Wenn Speicherabbilder für FILESTREAM-Daten verwendet werden, kann [!INCLUDE[ssDE](../../includes/ssde-md.md)] weder die Konsistenz und Dauerhaftigkeit der Daten noch die Datenbankintegrität garantieren.</span><span class="sxs-lookup"><span data-stu-id="73b19-278">If memory mapping is used for FILESTREAM data, the [!INCLUDE[ssDE](../../includes/ssde-md.md)] cannot guarantee consistency and durability of the data or the integrity of the database.</span></span>  
  
##  <a name="related-tasks"></a><a name="reltasks"></a> <span data-ttu-id="73b19-279">Verwandte Aufgaben</span><span class="sxs-lookup"><span data-stu-id="73b19-279">Related Tasks</span></span>  
 [<span data-ttu-id="73b19-280">Aktivieren und Konfigurieren von FILESTREAM</span><span class="sxs-lookup"><span data-stu-id="73b19-280">Enable and Configure FILESTREAM</span></span>](enable-and-configure-filestream.md)  
  [<span data-ttu-id="73b19-281">Erstellen einer FILESTREAM-aktivierten Datenbank</span><span class="sxs-lookup"><span data-stu-id="73b19-281">Create a FILESTREAM-Enabled Database</span></span>](create-a-filestream-enabled-database.md)  
  [<span data-ttu-id="73b19-282">Erstellen einer Tabelle zum Speichern von FILESTREAM-Daten</span><span class="sxs-lookup"><span data-stu-id="73b19-282">Create a Table for Storing FILESTREAM Data</span></span>](create-a-table-for-storing-filestream-data.md)  
  [<span data-ttu-id="73b19-283">Zugreifen auf FILESTREAM-Daten mit Transact-SQL</span><span class="sxs-lookup"><span data-stu-id="73b19-283">Access FILESTREAM Data with Transact-SQL</span></span>](access-filestream-data-with-transact-sql.md)  
  [<span data-ttu-id="73b19-284">Erstellen von Clientanwendungen für FILESTREAM-Daten</span><span class="sxs-lookup"><span data-stu-id="73b19-284">Create Client Applications for FILESTREAM Data</span></span>](create-client-applications-for-filestream-data.md)  
  [<span data-ttu-id="73b19-285">ZUgreifen auf FILESTREAM-Daten mit OpenSqlFilestream</span><span class="sxs-lookup"><span data-stu-id="73b19-285">Access FILESTREAM Data with OpenSqlFilestream</span></span>](access-filestream-data-with-opensqlfilestream.md)  
  [<span data-ttu-id="73b19-286">Vornehmen von Teilupdates an FILESTREAM-Daten</span><span class="sxs-lookup"><span data-stu-id="73b19-286">Make Partial Updates to FILESTREAM Data</span></span>](make-partial-updates-to-filestream-data.md)  
  [<span data-ttu-id="73b19-287">Vermeiden von Konflikten mit Datenbankvorgängen in FILESTREAM-Anwendungen</span><span class="sxs-lookup"><span data-stu-id="73b19-287">Avoid Conflicts with Database Operations in FILESTREAM Applications</span></span>](avoid-conflicts-with-database-operations-in-filestream-applications.md)  
  [<span data-ttu-id="73b19-288">Verschieben einer FILESTREAM-aktivierten Datenbank</span><span class="sxs-lookup"><span data-stu-id="73b19-288">Move a FILESTREAM-Enabled Database</span></span>](move-a-filestream-enabled-database.md)  
  [<span data-ttu-id="73b19-289">Einrichten von FILESTREAM auf einem Failovercluster</span><span class="sxs-lookup"><span data-stu-id="73b19-289">Set Up FILESTREAM on a Failover Cluster</span></span>](set-up-filestream-on-a-failover-cluster.md)  
  [<span data-ttu-id="73b19-290">Konfigurieren einer Firewall für FILESTREAM-Zugriff</span><span class="sxs-lookup"><span data-stu-id="73b19-290">Configure a Firewall for FILESTREAM Access</span></span>](configure-a-firewall-for-filestream-access.md)  
  
##  <a name="related-content"></a><a name="relcontent"></a> <span data-ttu-id="73b19-291">Verwandte Inhalte</span><span class="sxs-lookup"><span data-stu-id="73b19-291">Related Content</span></span>  
 [<span data-ttu-id="73b19-292">FILESTREAM-Kompatibilität mit anderen SQL Server-Funktionen</span><span class="sxs-lookup"><span data-stu-id="73b19-292">FILESTREAM Compatibility with Other SQL Server Features</span></span>](filestream-compatibility-with-other-sql-server-features.md)  
  
