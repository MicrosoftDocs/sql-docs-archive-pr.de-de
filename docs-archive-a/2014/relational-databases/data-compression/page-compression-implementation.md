---
title: Implementierung von Seitenkomprimierung | Microsoft-Dokumentation
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: performance
ms.topic: conceptual
helpviewer_keywords:
- page compression [Database Engine]
- compression [SQL Server], page
ms.assetid: 78c83277-1dbb-4e07-95bd-47b14d2b5cd4
author: MikeRayMSFT
ms.author: mikeray
ms.openlocfilehash: e6edba79d1548d68e60f406d370abd5354a62fcb
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 08/04/2020
ms.locfileid: "87620996"
---
# <a name="page-compression-implementation"></a><span data-ttu-id="66e82-102">Implementierung von Seitenkomprimierung</span><span class="sxs-lookup"><span data-stu-id="66e82-102">Page Compression Implementation</span></span>
  <span data-ttu-id="66e82-103">In diesem Thema wird zusammengefasst, wie [!INCLUDE[ssDE](../../includes/ssde-md.md)] Seitenkomprimierung implementiert.</span><span class="sxs-lookup"><span data-stu-id="66e82-103">This topic summarizes how the [!INCLUDE[ssDE](../../includes/ssde-md.md)] implements page compression.</span></span> <span data-ttu-id="66e82-104">Diese Zusammenfassung enthält grundlegende Informationen, die Ihnen bei der Planung des Speicherplatzes helfen, den Sie für Ihre Daten benötigten.</span><span class="sxs-lookup"><span data-stu-id="66e82-104">This summary provides basic information to help you plan the storage space that you need for your data.</span></span>  
  
 <span data-ttu-id="66e82-105">Die Seitenkomprimierung ist für Tabellen, Tabellenpartitionen, Indizes und Indexpartitionen ähnlich.</span><span class="sxs-lookup"><span data-stu-id="66e82-105">Page compression is similar for tables, table partitions, indexes, and index partitions.</span></span> <span data-ttu-id="66e82-106">Die folgende Beschreibung der Seitenkomprimierung für eine Tabelle gilt gleichermaßen für die Seitenkomprimierung aller Objekttypen.</span><span class="sxs-lookup"><span data-stu-id="66e82-106">The following description of page compression for a table applies equally to page compression for all object types.</span></span> <span data-ttu-id="66e82-107">In den folgenden Beispielen werden Zeichenfolgen komprimiert, jedoch werden dieselben Prinzipien von der Präfix- und Wörterbuchkomprimierung auch auf andere Datentypen angewendet.</span><span class="sxs-lookup"><span data-stu-id="66e82-107">The following examples compress character strings, but both prefix and dictionary compression apply the same principles to other data types.</span></span>  
  
 <span data-ttu-id="66e82-108">Das Komprimieren der Blattebene von Tabellen und Indizes mit der Seitenkomprimierung besteht aus drei Vorgängen, die in der folgenden Reihenfolge ausgeführt werden:</span><span class="sxs-lookup"><span data-stu-id="66e82-108">Compressing the leaf level of tables and indexes with page compression consists of three operations in the following order:</span></span>  
  
1.  <span data-ttu-id="66e82-109">Zeilenkomprimierung</span><span class="sxs-lookup"><span data-stu-id="66e82-109">Row compression</span></span>  
  
2.  <span data-ttu-id="66e82-110">Präfixkomprimierung</span><span class="sxs-lookup"><span data-stu-id="66e82-110">Prefix compression</span></span>  
  
3.  <span data-ttu-id="66e82-111">Wörterbuchkomprimierung</span><span class="sxs-lookup"><span data-stu-id="66e82-111">Dictionary compression</span></span>  
  
 <span data-ttu-id="66e82-112">Wenn Sie Seitenkomprimierung verwenden, werden Seiten auf Nichtblattebene von Indizes lediglich mit der Zeilenkomprimierung komprimiert.</span><span class="sxs-lookup"><span data-stu-id="66e82-112">When you use page compression, non-leaf-level pages of indexes are compressed by using only row compression.</span></span> <span data-ttu-id="66e82-113">Weitere Informationen zur Zeilenkomprimierung finden Sie unter [Row Compression Implementation](../data-compression/row-compression-implementation.md).</span><span class="sxs-lookup"><span data-stu-id="66e82-113">For more information about row compression, see [Row Compression Implementation](../data-compression/row-compression-implementation.md).</span></span>  
  
## <a name="prefix-compression"></a><span data-ttu-id="66e82-114">Präfixkomprimierung</span><span class="sxs-lookup"><span data-stu-id="66e82-114">Prefix Compression</span></span>  
 <span data-ttu-id="66e82-115">Für jede Seite, die komprimiert wird, verwendet die Präfixkomprimierung die folgenden Schritte:</span><span class="sxs-lookup"><span data-stu-id="66e82-115">For each page that is being compressed, prefix compression uses the following steps:</span></span>  
  
1.  <span data-ttu-id="66e82-116">Für jede Spalte wird ein Wert identifiziert, mit dem der Speicherplatz für die Werte in jeder Spalte verringert werden kann.</span><span class="sxs-lookup"><span data-stu-id="66e82-116">For each column, a value is identified that can be used to reduce the storage space for the values in each column.</span></span>  
  
2.  <span data-ttu-id="66e82-117">Es wird eine Zeile, die die Präfixwerte für jede Spalte darstellt, erstellt und in der CI-Struktur (Compression Information) gespeichert, die unmittelbar auf den Seitenkopf folgt.</span><span class="sxs-lookup"><span data-stu-id="66e82-117">A row that represents the prefix values for each column is created and stored in the compression information (CI) structure that immediately follows the page header.</span></span>  
  
3.  <span data-ttu-id="66e82-118">Die wiederholten Präfixwerte in der Spalte werden von einem Verweis auf das entsprechende Präfix ersetzt.</span><span class="sxs-lookup"><span data-stu-id="66e82-118">The repeated prefix values in the column are replaced by a reference to the corresponding prefix.</span></span> <span data-ttu-id="66e82-119">Wenn der Wert in einer Zeile nicht genau mit dem ausgewählten Präfixwert übereinstimmt, kann immer noch eine Teilübereinstimmung angezeigt werden.</span><span class="sxs-lookup"><span data-stu-id="66e82-119">If the value in a row does not exactly match the selected prefix value, a partial match can still be indicated.</span></span>  
  
 <span data-ttu-id="66e82-120">Die folgende Abbildung zeigt eine Beispielseite einer Tabelle vor der Präfixkomprimierung.</span><span class="sxs-lookup"><span data-stu-id="66e82-120">The following illustration shows a sample page of a table before prefix compression.</span></span>  
  
 <span data-ttu-id="66e82-121">![Seite vor der Präfixkomprimierung](../media/skt-tblcompression1c.gif "Seite vor der Präfixkomprimierung")</span><span class="sxs-lookup"><span data-stu-id="66e82-121">![Page before prefix compression](../media/skt-tblcompression1c.gif "Page before prefix compression")</span></span>  
  
 <span data-ttu-id="66e82-122">Die folgende Abbildung zeigt dieselbe Seite nach der Präfixkomprimierung.</span><span class="sxs-lookup"><span data-stu-id="66e82-122">The following illustration shows the same page after prefix compression.</span></span> <span data-ttu-id="66e82-123">Das Präfix wird in die Kopfzeile verschoben, und die Spaltenwerte werden in Verweise auf das Präfix geändert.</span><span class="sxs-lookup"><span data-stu-id="66e82-123">The prefix is moved to the header, and the column values are changed to references to the prefix.</span></span>  
  
 <span data-ttu-id="66e82-124">![Seite nach der Präfixkomprimierung](../media/tblcompression2.gif "Seite nach der Präfixkomprimierung")</span><span class="sxs-lookup"><span data-stu-id="66e82-124">![Page after prefix compression](../media/tblcompression2.gif "Page after prefix compression")</span></span>  
  
 <span data-ttu-id="66e82-125">Der Wert 4b in der ersten Spalte der ersten Zeile zeigt an, dass die ersten vier Zeichen des Präfixes (aaab) sowie das Zeichen b für diese Zeile vorhanden sind.</span><span class="sxs-lookup"><span data-stu-id="66e82-125">In the first column of the first row, the value 4b indicates that the first four characters of the prefix (aaab) are present for that row, and also the character b.</span></span> <span data-ttu-id="66e82-126">Daraus resultiert der Wert aaabb, welcher der ursprüngliche Wert ist.</span><span class="sxs-lookup"><span data-stu-id="66e82-126">This makes the resultant value aaabb, which is the original value.</span></span>  
  
## <a name="dictionary-compression"></a><span data-ttu-id="66e82-127">Wörterbuchkomprimierung</span><span class="sxs-lookup"><span data-stu-id="66e82-127">Dictionary Compression</span></span>  
 <span data-ttu-id="66e82-128">Nach dem Abschluss der Präfixkomprimierung wird die Wörterbuchkomprimierung angewendet.</span><span class="sxs-lookup"><span data-stu-id="66e82-128">After prefix compression has been completed, dictionary compression is applied.</span></span> <span data-ttu-id="66e82-129">Die Wörterbuchkomprimierung sucht nach wiederholten Werten auf der Seite und speichert diese im CI-Bereich.</span><span class="sxs-lookup"><span data-stu-id="66e82-129">Dictionary compression searches for repeated values anywhere on the page, and stores them in the CI area.</span></span> <span data-ttu-id="66e82-130">Im Gegensatz zur Präfixkomprimierung ist die Wörterbuchkomprimierung nicht auf eine Spalte beschränkt.</span><span class="sxs-lookup"><span data-stu-id="66e82-130">Unlike prefix compression, dictionary compression is not restricted to one column.</span></span> <span data-ttu-id="66e82-131">Die Wörterbuchkomprimierung kann wiederholte Werte ersetzen, die an einer beliebigen Stelle auf einer Seite auftreten.</span><span class="sxs-lookup"><span data-stu-id="66e82-131">Dictionary compression can replace repeated values that occur anywhere on a page.</span></span> <span data-ttu-id="66e82-132">Die folgende Abbildung zeigt dieselbe Seite nach der Wörterbuchkomprimierung.</span><span class="sxs-lookup"><span data-stu-id="66e82-132">The following illustration shows the same page after dictionary compression.</span></span>  
  
 <span data-ttu-id="66e82-133">![Seite nach der Wörterbuchkomprimierung](../media/tblcompression3.gif "Seite nach der Wörterbuchkomprimierung")</span><span class="sxs-lookup"><span data-stu-id="66e82-133">![Page after dictionary compression](../media/tblcompression3.gif "Page after dictionary compression")</span></span>  
  
 <span data-ttu-id="66e82-134">Beachten Sie, dass auf den Wert 4b von anderen Spalten der Seite verwiesen wurde.</span><span class="sxs-lookup"><span data-stu-id="66e82-134">Note that the value 4b has been referenced from different columns of the page.</span></span>  
  
## <a name="when-page-compression-occurs"></a><span data-ttu-id="66e82-135">Wenn Seitenkomprimierung auftritt</span><span class="sxs-lookup"><span data-stu-id="66e82-135">When Page Compression Occurs</span></span>  
 <span data-ttu-id="66e82-136">Wenn eine neue Tabelle mit Seitenkomprimierung erstellt wird, tritt keine Komprimierung auf.</span><span class="sxs-lookup"><span data-stu-id="66e82-136">When a new table is created that has page compression, no compression occurs.</span></span> <span data-ttu-id="66e82-137">Die Metadaten für die Tabelle geben jedoch an, dass Seitenkomprimierung verwendet werden sollte.</span><span class="sxs-lookup"><span data-stu-id="66e82-137">However, the metadata for the table indicates that page compression should be used.</span></span> <span data-ttu-id="66e82-138">Wenn Sie auf der ersten Datenseite Daten hinzufügen, wird Zeilenkomprimierung auf die Daten angewendet.</span><span class="sxs-lookup"><span data-stu-id="66e82-138">As data is added to the first data page, data is row-compressed.</span></span> <span data-ttu-id="66e82-139">Da die Seite nicht voll ist, werden mit der Seitenkomprimierung keine Vorteile erzielt.</span><span class="sxs-lookup"><span data-stu-id="66e82-139">Because the page is not full, no benefit is gained from page compression.</span></span> <span data-ttu-id="66e82-140">Wenn die Seite voll ist, löst die nächste Zeile, die hinzugefügt wird, den Seitenkomprimierungsvorgang aus.</span><span class="sxs-lookup"><span data-stu-id="66e82-140">When the page is full, the next row to be added initiates the page compression operation.</span></span> <span data-ttu-id="66e82-141">Die gesamte Seite wird überprüft. Jede Spalte wird für die Präfixkomprimierung bewertet, und anschließend werden alle Spalten für die Wörterbuchkomprimierung bewertet.</span><span class="sxs-lookup"><span data-stu-id="66e82-141">The whole page is reviewed; each column is evaluated for prefix compression, and then all columns are evaluated for dictionary compression.</span></span> <span data-ttu-id="66e82-142">Wenn die Seitenkomprimierung auf der Seite ausreichend Platz für eine weitere Zeile geschaffen hat, wird die Zeile hinzugefügt. Auf die Daten wird Zeilen- und Seitenkomprimierung angewendet.</span><span class="sxs-lookup"><span data-stu-id="66e82-142">If page compression has created enough room on the page for an additional row, the row is added, and the data is both row- and page-compressed.</span></span> <span data-ttu-id="66e82-143">Wenn der durch Seitenkomprimierung erzielte Platzgewinn abzüglich des für die CI-Struktur benötigten Platzes unbedeutend ist, wird für diese Seite keine Seitenkomprimierung verwendet.</span><span class="sxs-lookup"><span data-stu-id="66e82-143">If the space gained by page compression minus the space that is required for the CI structure is not significant, page compression is not used for that page.</span></span> <span data-ttu-id="66e82-144">Wenn zukünftige Zeilen nicht mehr auf diese neue Seite passen, wird der Tabelle eine neue Seite hinzugefügt.</span><span class="sxs-lookup"><span data-stu-id="66e82-144">Future rows either fit onto the new page or, if they do not fit, a new page is added to the table.</span></span> <span data-ttu-id="66e82-145">Wie bei der ersten Seite wird auf diese neue Seite keine Seitenkomprimierung angewendet.</span><span class="sxs-lookup"><span data-stu-id="66e82-145">Similar to the first page, the new page is not at first page-compressed.</span></span>  
  
 <span data-ttu-id="66e82-146">Wenn auf eine vorhandene Tabelle, die Daten enthält, Seitenkomprimierung angewendet wird, wird jede Seite neu erstellt und bewertet.</span><span class="sxs-lookup"><span data-stu-id="66e82-146">When an existing table that contains data is converted to page compression, each page is rebuilt and evaluated.</span></span> <span data-ttu-id="66e82-147">Das Neuerstellen aller Seiten hat die Neuerstellung der Tabelle, des Indexes oder der Partition zur Folge.</span><span class="sxs-lookup"><span data-stu-id="66e82-147">Rebuilding all the pages causes the rebuilding of the table, index, or partition.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="66e82-148">Weitere Informationen</span><span class="sxs-lookup"><span data-stu-id="66e82-148">See Also</span></span>  
 <span data-ttu-id="66e82-149">[Datenkomprimierung](data-compression.md) </span><span class="sxs-lookup"><span data-stu-id="66e82-149">[Data Compression](data-compression.md) </span></span>  
 [<span data-ttu-id="66e82-150">Implementierung von Zeilenkomprimierung</span><span class="sxs-lookup"><span data-stu-id="66e82-150">Row Compression Implementation</span></span>](row-compression-implementation.md)  
  
  
