---
title: Verwenden von WQL mit dem WMI-Anbieter für Server Ereignisse | Microsoft-Dokumentation
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: wmi
ms.topic: reference
helpviewer_keywords:
- queries [WMI]
- query language [WMI]
- WMI Query Language [WMI]
- WQL [WMI]
- WMI Provider for Server Events, WQL
ms.assetid: 58b67426-1e66-4445-8e2c-03182e94c4be
author: CarlRabeler
ms.author: carlrab
ms.openlocfilehash: df2bbf5c6031781494695f95116441fde34bf4f5
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 08/04/2020
ms.locfileid: "87617838"
---
# <a name="using-wql-with-the-wmi-provider-for-server-events"></a><span data-ttu-id="c6488-102">Verwenden von WQL mit dem WMI-Anbieter für Serverereignisse</span><span class="sxs-lookup"><span data-stu-id="c6488-102">Using WQL with the WMI Provider for Server Events</span></span>
  <span data-ttu-id="c6488-103">Verwaltungsanwendungen greifen über den WMI-Anbieter für Serverereignisse auf [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] zu, indem sie WQL-Anweisungen (WMI Query Language) ausgeben.</span><span class="sxs-lookup"><span data-stu-id="c6488-103">Management applications access [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] events using the WMI Provider for Server Events by issuing WMI Query Language (WQL) statements.</span></span> <span data-ttu-id="c6488-104">WQL ist eine vereinfachte Teilmenge von Structured Query Language (SQL) mit einigen WMI-spezifischen Erweiterungen.</span><span class="sxs-lookup"><span data-stu-id="c6488-104">WQL is a simplified subset of structured query language (SQL), with some WMI-specific extensions.</span></span> <span data-ttu-id="c6488-105">Unter Verwendung von WQL ruft eine Anwendung einen Ereignistyp aus einer spezifischen Instanz von , einer Datenbank oder einem Datenbankobjekt ab. Das einzige zurzeit unterstützte Objekt ist queue.</span><span class="sxs-lookup"><span data-stu-id="c6488-105">In using WQL, an application retrieves an event type against a specific instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], a database, or a database object (the only object currently supported is queue).</span></span> <span data-ttu-id="c6488-106">Der WMI-Anbieter für Server Ereignisse übersetzt die Abfrage in eine Ereignis Benachrichtigung, die in der Zieldatenbank für Ereignis Benachrichtigungen mit Daten Bankbereich oder Objektbereich oder in der **Master** Datenbank für Ereignis Benachrichtigungen auf Server Ebene erstellt wird.</span><span class="sxs-lookup"><span data-stu-id="c6488-106">The WMI Provider for Server Events translates the query into an event notification that is created in the target database for database-scoped or object-scoped event notifications, or in the **master** database for server-scoped event notifications.</span></span>  
  
 <span data-ttu-id="c6488-107">Betrachten Sie beispielsweise folgende WQL-Abfrage:</span><span class="sxs-lookup"><span data-stu-id="c6488-107">For example, consider the following WQL query:</span></span>  
  
```  
SELECT * FROM DDL_DATABASE_LEVEL_EVENTS WHERE DatabaseName = 'AdventureWorks'  
```  
  
 <span data-ttu-id="c6488-108">Ausgehend von dieser Abfrage versucht der WMI-Anbieter, ein Äquivalent dieser Ereignisbenachrichtigung auf dem Zielserver zu produzieren:</span><span class="sxs-lookup"><span data-stu-id="c6488-108">From this query, the WMI Provider tries to produce the equivalent of this event notification on the target server:</span></span>  
  
```  
USE AdventureWorks ;  
GO  
  
CREATE EVENT NOTIFICATION SQLWEP_76CF38C1_18BB_42DD_A7DC_C8820155B0E9  
    ON DATABASE  
    WITH FAN_IN  
    FOR DDL_DATABASE_LEVEL_EVENTS  
    TO SERVICE   
        'SQL/Notifications/ProcessWMIEventProviderNotification/v1.0',  
        'A7E5521A-1CA6-4741-865D-826F804E5135';  
GO  
```  
  
 <span data-ttu-id="c6488-109">Das Argument in der `FROM`-Klausel der WQL-Abfrage (`DDL_DATABASE_LEVEL_EVENTS`) kann ein beliebiges gültiges Ereignis sein, für das eine Ereignisbenachrichtigung erstellt werden kann.</span><span class="sxs-lookup"><span data-stu-id="c6488-109">The argument in the `FROM` clause of the WQL query (`DDL_DATABASE_LEVEL_EVENTS`) can be any valid event upon which an event notification can be created.</span></span> <span data-ttu-id="c6488-110">Für die Argumente in den Klauseln `SELECT` und `WHERE` können beliebige Ereigniseigenschaften angegeben werden, die mit einem Ereignis oder dessen übergeordnetem Ereignis verbunden sind.</span><span class="sxs-lookup"><span data-stu-id="c6488-110">The arguments in the `SELECT` and `WHERE` clauses can specify any event property associated with an event or its parent event.</span></span> <span data-ttu-id="c6488-111">Eine Liste der gültigen Ereignisse und Ereignis Eigenschaften finden Sie unter [Ereignis Benachrichtigungen (Datenbank-Engine)](https://technet.microsoft.com/library/ms182602.aspx).</span><span class="sxs-lookup"><span data-stu-id="c6488-111">For a list of valid events and event properties, see [Event Notifications (Database Engine)](https://technet.microsoft.com/library/ms182602.aspx).</span></span>  
  
 <span data-ttu-id="c6488-112">Die folgende WQL-Syntax wird explizit vom WMI-Anbieter für Serverereignisse unterstützt.</span><span class="sxs-lookup"><span data-stu-id="c6488-112">The following WQL syntax is supported explicitly by the WMI Provider for Server Events.</span></span> <span data-ttu-id="c6488-113">Zusätzliche WQL-Syntaxelemente können angegeben werden; sie sind jedoch nicht anbieterspezifisch für diesen Anbieter, sondern werden stattdessen vom WMI-Hostdienst analysiert.</span><span class="sxs-lookup"><span data-stu-id="c6488-113">Additional WQL syntax may be specified, but it is not specific to this provider and is parsed instead by the WMI host service.</span></span> <span data-ttu-id="c6488-114">Weitere Informationen zur WMI Query Language finden Sie in der WQL-Dokumentation im Microsoft Developer Network (MSDN).</span><span class="sxs-lookup"><span data-stu-id="c6488-114">For more information about the WMI Query Language, see the WQL documentation on the Microsoft Developer Network (MSDN).</span></span>  
  
## <a name="syntax"></a><span data-ttu-id="c6488-115">Syntax</span><span class="sxs-lookup"><span data-stu-id="c6488-115">Syntax</span></span>  
  
```  
  
SELECT { event_property [ ,...n ] | * }  
FROM event_type   
WHERE where_condition  
```  
  
## <a name="arguments"></a><span data-ttu-id="c6488-116">Argumente</span><span class="sxs-lookup"><span data-stu-id="c6488-116">Arguments</span></span>  
 <span data-ttu-id="c6488-117">*event_property*</span><span class="sxs-lookup"><span data-stu-id="c6488-117">*event_property*</span></span>  
 <span data-ttu-id="c6488-118">Eine Ereigniseigenschaft.</span><span class="sxs-lookup"><span data-stu-id="c6488-118">Is a property of an event.</span></span> <span data-ttu-id="c6488-119">Beispiele hierfür sind `PostTime`, `SPID` und `LoginName`.</span><span class="sxs-lookup"><span data-stu-id="c6488-119">Examples include `PostTime`, `SPID`, and `LoginName`.</span></span> <span data-ttu-id="c6488-120">Suchen Sie jedes in den [Klassen und Eigenschaften des WMI-Anbieters für Server Ereignisse](wmi-provider-for-server-events-classes-and-properties.md) aufgeführte Ereignis, um zu bestimmen, welche Eigenschaften es enthält.</span><span class="sxs-lookup"><span data-stu-id="c6488-120">Look up each event listed in [WMI Provider for Server Events Classes and Properties](wmi-provider-for-server-events-classes-and-properties.md) to determine which properties it holds.</span></span> <span data-ttu-id="c6488-121">Beispielsweise enthält das DDL_DATABASE_LEVEL_EVENTS-Ereignis die Eigenschaften `DatabaseName` und `UserName`.</span><span class="sxs-lookup"><span data-stu-id="c6488-121">For example, the DDL_DATABASE_LEVEL_EVENTS event holds the `DatabaseName` and `UserName` properties.</span></span> <span data-ttu-id="c6488-122">Es erbt außerdem die Eigenschaften `SQLInstance`, `LoginName`, `PostTime``SPID` und `ComputerName` von den jeweils übergeordneten Ereignissen.</span><span class="sxs-lookup"><span data-stu-id="c6488-122">It also inherits the `SQLInstance`, `LoginName`, `PostTime`, `SPID`, and `ComputerName` properties from its parent events.</span></span>  
  
 <span data-ttu-id="c6488-123">**,** *... n*</span><span class="sxs-lookup"><span data-stu-id="c6488-123">**,** *...n*</span></span>  
 <span data-ttu-id="c6488-124">Gibt an, dass *event_property* mehrmals abgefragt werden können, getrennt durch Kommas.</span><span class="sxs-lookup"><span data-stu-id="c6488-124">Indicates that *event_property* can be queried multiple times, separated by commas.</span></span>  
  
 \*  
 <span data-ttu-id="c6488-125">Gibt an, dass alle einem Ereignis zugeordneten Eigenschaften abgefragt werden.</span><span class="sxs-lookup"><span data-stu-id="c6488-125">Specifies that all properties associated with an event are queried.</span></span>  
  
 <span data-ttu-id="c6488-126">*event_type*</span><span class="sxs-lookup"><span data-stu-id="c6488-126">*event_type*</span></span>  
 <span data-ttu-id="c6488-127">Jedes Ereignis, für das eine Ereignisbenachrichtigung erstellt werden kann.</span><span class="sxs-lookup"><span data-stu-id="c6488-127">Is any event against which an event notification can be created.</span></span> <span data-ttu-id="c6488-128">Eine Liste der verfügbaren Ereignisse finden Sie unter [Klassen und Eigenschaften für den WMI-Anbieter für Server Ereignisse](https://technet.microsoft.com/library/ms186449.aspx).</span><span class="sxs-lookup"><span data-stu-id="c6488-128">For a list of available events, see [WMI Provider for Server Events Classes and Properties](https://technet.microsoft.com/library/ms186449.aspx).</span></span> <span data-ttu-id="c6488-129">Beachten Sie, dass *Ereignistyp* Namen denselben *event_type*  |  *event_group* entsprechen, die angegeben werden können, wenn Sie eine Ereignis Benachrichtigung mithilfe von CREATE Event Notification manuell erstellen.</span><span class="sxs-lookup"><span data-stu-id="c6488-129">Note that *event type* names correspond to the same *event_type* | *event_group* that can be specified when you manually create an event notification by using CREATE EVENT NOTIFICATION.</span></span> <span data-ttu-id="c6488-130">Beispiele für *Ereignistyp* sind CREATE_TABLE, LOCK_DEADLOCK, DDL_USER_EVENTS und TRC_DATABASE.</span><span class="sxs-lookup"><span data-stu-id="c6488-130">Examples of *event type* include CREATE_TABLE, LOCK_DEADLOCK, DDL_USER_EVENTS, and TRC_DATABASE.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="c6488-131">Bestimmte gespeicherte Systemprozeduren, die DDL-ähnliche Vorgänge ausführen, können auch Ereignisbenachrichtigungen auslösen.</span><span class="sxs-lookup"><span data-stu-id="c6488-131">Certain system stored procedures that perform DDL-like operations can also fire event notifications.</span></span> <span data-ttu-id="c6488-132">Testen Sie die Ereignisbenachrichtigungen, um ihre Reaktion auf gespeicherte Systemprozeduren, die ausgeführt werden, zu bestimmen.</span><span class="sxs-lookup"><span data-stu-id="c6488-132">Test your event notifications to determine their responses to system stored procedures that are run.</span></span> <span data-ttu-id="c6488-133">Beispielsweise lösen die CREATE TYPE-Anweisung und die gespeicherte Prozedur **sp_addtype** eine Ereignis Benachrichtigung aus, die für ein CREATE_TYPE-Ereignis erstellt wird.</span><span class="sxs-lookup"><span data-stu-id="c6488-133">For example, the CREATE TYPE statement and **sp_addtype** stored procedure will both fire an event notification that is created on a CREATE_TYPE event.</span></span> <span data-ttu-id="c6488-134">Allerdings werden von der gespeicherten Prozedur **sp_rename** keine Ereignis Benachrichtigungen ausgelöst.</span><span class="sxs-lookup"><span data-stu-id="c6488-134">However, the **sp_rename** stored procedure does not fire any event notifications.</span></span> <span data-ttu-id="c6488-135">Weitere Informationen finden Sie unter[DDL-Ereignisse](../triggers/ddl-events.md).</span><span class="sxs-lookup"><span data-stu-id="c6488-135">For more information, see[DDL Events](../triggers/ddl-events.md).</span></span>  
  
 <span data-ttu-id="c6488-136">*where_condition*</span><span class="sxs-lookup"><span data-stu-id="c6488-136">*where_condition*</span></span>  
 <span data-ttu-id="c6488-137">Ein WHERE-Klausel-Abfrage Prädikat, das aus *event_property* Namen und logischen Operatoren und Vergleichs Operatoren besteht.</span><span class="sxs-lookup"><span data-stu-id="c6488-137">Is a WHERE clause query predicate made up of *event_property* names and logical and comparison operators.</span></span> <span data-ttu-id="c6488-138">Der- *where_condition* bestimmt den Bereich, in dem die entsprechende Ereignis Benachrichtigung in der Zieldatenbank registriert wird.</span><span class="sxs-lookup"><span data-stu-id="c6488-138">The *where_condition* determines the scope in which the corresponding event notification is registered in the target database.</span></span> <span data-ttu-id="c6488-139">Sie kann auch als Filter fungieren, um auf ein bestimmtes Schema oder Objekt zu abzielen, von dem event_type abgefragt werden soll *.*</span><span class="sxs-lookup"><span data-stu-id="c6488-139">It can also act as a filter to target a particular schema or object from which to query *event_type.*</span></span> <span data-ttu-id="c6488-140">Weitere Informationen finden Sie im Abschnitt mit den Hinweisen weiter unten in diesem Thema.</span><span class="sxs-lookup"><span data-stu-id="c6488-140">For more information, see the Remarks section later in this topic.</span></span>  
  
 <span data-ttu-id="c6488-141">Nur der `=`-Operand kann zusammen mit `DatabaseName`, `SchemaName` und `ObjectName` verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="c6488-141">Only the `=` operand can be used together with `DatabaseName`, `SchemaName`, and `ObjectName`.</span></span> <span data-ttu-id="c6488-142">Andere Ausdrücke können nicht mit diesen Ereigniseigenschaften verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="c6488-142">Other expressions cannot be used with these event properties.</span></span>  
  
## <a name="remarks"></a><span data-ttu-id="c6488-143">Bemerkungen</span><span class="sxs-lookup"><span data-stu-id="c6488-143">Remarks</span></span>  
 <span data-ttu-id="c6488-144">Die *where_condition* der Syntax des WMI-Anbieters für Server Ereignisse bestimmt Folgendes:</span><span class="sxs-lookup"><span data-stu-id="c6488-144">The *where_condition* of the WMI Provider for Server Events syntax determines the following:</span></span>  
  
-   <span data-ttu-id="c6488-145">Der Bereich, in dem der Anbieter versucht, die angegebene *event_type*abzurufen: Serverebene, Datenbankebene oder Objektebene (das einzige derzeit unterstützte Objekt ist Queue).</span><span class="sxs-lookup"><span data-stu-id="c6488-145">The scope by which the provider tries to retrieve the specified *event_type*: the server level, database level, or object level (the only object currently supported is queue).</span></span> <span data-ttu-id="c6488-146">Letztlich bestimmt dieser Bereich den Typ der in der Zieldatenbank erstellten Ereignisbenachrichtigung.</span><span class="sxs-lookup"><span data-stu-id="c6488-146">Ultimately, this scope determines the type of event notification created in the target database.</span></span> <span data-ttu-id="c6488-147">Dieser Prozess wird Ereignisbenachrichtigungsregistrierung genannt.</span><span class="sxs-lookup"><span data-stu-id="c6488-147">This process called event notification registration.</span></span>  
  
-   <span data-ttu-id="c6488-148">Die Datenbank, das Schema und das Objekt, auf der/dem registriert werden soll.</span><span class="sxs-lookup"><span data-stu-id="c6488-148">The database, schema, and object, where appropriate, on which to register.</span></span>  
  
 <span data-ttu-id="c6488-149">Der WMI-Anbieter für Serverereignisse verwendet einen Algorithmus, der von unten nach oben arbeitet und die erstbestmögliche Lösung benutzt, um den engstmöglichen Gültigkeitsbereich für das zugrunde liegende EVENT NOTIFICATION-Argument anzuwenden.</span><span class="sxs-lookup"><span data-stu-id="c6488-149">The WMI Provider for Server Events uses a bottom-up, first-fit algorithm to produce the narrowest possible scope for the underlying EVENT NOTIFICATION.</span></span> <span data-ttu-id="c6488-150">Der Algorithmus versucht, die interne Aktivität auf dem Server und bezüglich des Netzwerkverkehrs zwischen der Instanz von [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] und dem WMI-Hostprozess zu reduzieren.</span><span class="sxs-lookup"><span data-stu-id="c6488-150">The algorithm tries to minimize internal activity on the server and network traffic between the instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] and the WMI host process.</span></span> <span data-ttu-id="c6488-151">Der Anbieter überprüft das in der from-Klausel angegebene *event_type* und die Bedingungen in der WHERE-Klausel und versucht, die zugrunde liegende Ereignis Benachrichtigung mit dem engsten Gültigkeitsbereich zu registrieren.</span><span class="sxs-lookup"><span data-stu-id="c6488-151">The provider examines the *event_type* specified in the FROM clause and the conditions in the WHERE clause, and tries to register the underlying EVENT NOTIFICATION with the narrowest possible scope.</span></span> <span data-ttu-id="c6488-152">Wenn der Anbieter sich nicht im engsten Gültigkeitsbereich registrieren kann, versucht er eine Registrierung in höheren Gültigkeitsbereichen, bis schließlich eine Registrierung erfolgreich ist.</span><span class="sxs-lookup"><span data-stu-id="c6488-152">If the provider cannot register at the narrowest scope, it tries to register at successively higher scopes until a registration finally succeeds.</span></span> <span data-ttu-id="c6488-153">Wenn der höchste Bereich auf Serverebene erreicht ist und keine Registrierung zustande kam, wird dem Consumer ein Fehler zurückgegeben.</span><span class="sxs-lookup"><span data-stu-id="c6488-153">If it reaches the highest scope the server-level) and fails, it returns an error to the consumer.</span></span>  
  
 <span data-ttu-id="c6488-154">Wenn beispielsweise DatabaseName =**'** AdventureWorks **'** in der WHERE-Klausel angegeben ist, versucht der Anbieter, eine Ereignis Benachrichtigung in der Datenbank zu registrieren [!INCLUDE[ssSampleDBobject](../../includes/sssampledbobject-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="c6488-154">For example, if DatabaseName=**'** AdventureWorks **'** is specified in the WHERE clause, the provider tries to register an event notification in the [!INCLUDE[ssSampleDBobject](../../includes/sssampledbobject-md.md)] database.</span></span> <span data-ttu-id="c6488-155">Wenn die [!INCLUDE[ssSampleDBobject](../../includes/sssampledbobject-md.md)]-Datenbank vorhanden ist und der aufrufende Client über die erforderlichen Berechtigungen zum Erstellen einer Ereignisbenachrichtigung in [!INCLUDE[ssSampleDBobject](../../includes/sssampledbobject-md.md)]verfügt, ist die Registrierung erfolgreich.</span><span class="sxs-lookup"><span data-stu-id="c6488-155">If the [!INCLUDE[ssSampleDBobject](../../includes/sssampledbobject-md.md)] database exists and the calling client has the required permissions to create an event notification in [!INCLUDE[ssSampleDBobject](../../includes/sssampledbobject-md.md)], the registration is successful.</span></span> <span data-ttu-id="c6488-156">Andernfalls wird versucht, die Ereignisbenachrichtigung auf Serverebene zu registrieren.</span><span class="sxs-lookup"><span data-stu-id="c6488-156">Otherwise, an attempt is made to register the event notification at the server level.</span></span> <span data-ttu-id="c6488-157">Die Registrierung ist erfolgreich, wenn der WMI-Client die erforderlichen Berechtigungen hat.</span><span class="sxs-lookup"><span data-stu-id="c6488-157">The registration succeeds if the WMI client has the required permissions.</span></span> <span data-ttu-id="c6488-158">In diesem Szenario werden Ereignisse jedoch so lange nicht an den Client zurückgegeben, bis die [!INCLUDE[ssSampleDBobject](../../includes/sssampledbobject-md.md)]-Datenbank erstellt wurde.</span><span class="sxs-lookup"><span data-stu-id="c6488-158">However, under this scenario, events are not returned to the client until the [!INCLUDE[ssSampleDBobject](../../includes/sssampledbobject-md.md)] database has been created.</span></span>  
  
 <span data-ttu-id="c6488-159">Der *where_condition* kann auch als Filter fungieren, um die Abfrage zusätzlich auf eine bestimmte Datenbank, ein bestimmtes Schema oder ein bestimmtes Objekt zu beschränken.</span><span class="sxs-lookup"><span data-stu-id="c6488-159">The *where_condition* can also act as a filter to additionally limit the query to a specific database, schema, or object.</span></span> <span data-ttu-id="c6488-160">Betrachten Sie beispielsweise folgende WQL-Abfrage:</span><span class="sxs-lookup"><span data-stu-id="c6488-160">For example, consider the following WQL query:</span></span>  
  
```  
SELECT * FROM ALTER_TABLE   
WHERE DatabaseName = 'AdventureWorks' AND SchemaName = 'Sales'   
    AND ObjectType='Table' AND ObjectName = 'SalesOrderDetail'  
```  
  
 <span data-ttu-id="c6488-161">Abhängig vom Ergebnis des Registrierungsprozesses kann diese WQL-Abfrage entweder auf Datenbank- oder auf Serverebene registriert werden.</span><span class="sxs-lookup"><span data-stu-id="c6488-161">Depending on the outcome of the registration process, this WQL query may be registered either at the database or server level.</span></span> <span data-ttu-id="c6488-162">Auch wenn sie auf Serverebene registriert ist, filtert der Anbieter schließlich alle `ALTER_TABLE`-Ereignisse, die nicht auf die `AdventureWorks.Sales.SalesOrderDetail`-Tabelle zutreffen.</span><span class="sxs-lookup"><span data-stu-id="c6488-162">However, even if it is registered at the server level, the provider ultimately filters any `ALTER_TABLE` events that do not apply to the `AdventureWorks.Sales.SalesOrderDetail` table.</span></span> <span data-ttu-id="c6488-163">Mit anderen Worten gibt der Anbieter nur die Eigenschaften der `ALTER_TABLE`-Ereignisse zurück, die in dieser Tabelle vorkommen.</span><span class="sxs-lookup"><span data-stu-id="c6488-163">In other words, the provider returns only the properties of the `ALTER_TABLE` events that occur on that specific table.</span></span>  
  
 <span data-ttu-id="c6488-164">Wird ein zusammengesetzter Ausdruck wie beispielsweise `DatabaseName='AW1'`OR`DatabaseName='AW2'` angegeben, wird versucht, statt zwei Ereignisbenachrichtigungen nur eine einzige Ereignisbenachrichtigung im Servergültigkeitsbereich zu registrieren.</span><span class="sxs-lookup"><span data-stu-id="c6488-164">If a compound expression such as `DatabaseName='AW1'` OR `DatabaseName='AW2'` is specified, an attempt is made to register a single event notification at the server scope instead of two separate event notifications.</span></span> <span data-ttu-id="c6488-165">Die Registrierung ist erfolgreich, wenn der aufrufende Client die erforderlichen Berechtigungen hat.</span><span class="sxs-lookup"><span data-stu-id="c6488-165">The registration succeeds if the calling client has permissions.</span></span>  
  
 <span data-ttu-id="c6488-166">Wenn `SchemaName='X' AND ObjectType='Y' AND ObjectName='Z'` alle in der-Klausel angegeben sind `WHERE` , wird versucht, die Ereignis Benachrichtigung direkt für ein Objekt `Z` im Schema zu registrieren `X` .</span><span class="sxs-lookup"><span data-stu-id="c6488-166">If `SchemaName='X' AND ObjectType='Y' AND ObjectName='Z'` are all specified in the `WHERE` clause, an attempt is made to register the event notification directly on object `Z` in schema `X`.</span></span> <span data-ttu-id="c6488-167">Die Registrierung ist erfolgreich, wenn der Client die erforderlichen Berechtigungen hat.</span><span class="sxs-lookup"><span data-stu-id="c6488-167">The registration succeeds if the client has permissions.</span></span> <span data-ttu-id="c6488-168">Beachten Sie, dass Ereignisse auf Objektebene derzeit nur für Warteschlangen und nur für die QUEUE_ACTIVATION *event_type*unterstützt werden.</span><span class="sxs-lookup"><span data-stu-id="c6488-168">Note that currently, object-level events are supported only on queues, and only for the QUEUE_ACTIVATION *event_type*.</span></span>  
  
 <span data-ttu-id="c6488-169">Beachten Sie, dass nicht bei allen Ereignissen ein bestimmter Gültigkeitsbereich abgefragt werden kann.</span><span class="sxs-lookup"><span data-stu-id="c6488-169">Note that not all events can be queried at any particular scope.</span></span> <span data-ttu-id="c6488-170">Beispielsweise können die WQL-Abfrage für ein Ablaufverfolgungsereignis wie Lock_Deadlock oder eine Ablaufverfolgungsereignisgruppe wie TRC_LOCKS nur auf Serverebene registriert werden.</span><span class="sxs-lookup"><span data-stu-id="c6488-170">For example, a WQL query on a trace event such as Lock_Deadlock, or a trace event group such as TRC_LOCKS, can only be registered at the server level.</span></span> <span data-ttu-id="c6488-171">Auch das CREATE_ENDPOINT-Ereignis und das DDL_ENDPOINT_EVENTS-Ereignis können nur auf Serverebene registriert werden.</span><span class="sxs-lookup"><span data-stu-id="c6488-171">Similarly, the CREATE_ENDPOINT event and the DDL_ENDPOINT_EVENTS event group can also be registered only at the server level.</span></span> <span data-ttu-id="c6488-172">Weitere Informationen zum entsprechenden Bereich für das Registrieren von Ereignissen finden Sie unter [Entwerfen von Ereignis Benachrichtigungen](https://technet.microsoft.com/library/ms175854\(v=sql.105\).aspx).</span><span class="sxs-lookup"><span data-stu-id="c6488-172">For more information about the appropriate scope for registering events, see [Designing Event Notifications](https://technet.microsoft.com/library/ms175854\(v=sql.105\).aspx).</span></span> <span data-ttu-id="c6488-173">Der Versuch, eine WQL-Abfrage zu registrieren, deren *event_type* nur auf Serverebene registriert werden kann, erfolgt immer auf Serverebene.</span><span class="sxs-lookup"><span data-stu-id="c6488-173">An attempt to register a WQL query whose *event_type* can only be registered at the server level is always made at the server level.</span></span> <span data-ttu-id="c6488-174">Die Registrierung ist erfolgreich, wenn der WMI-Client die erforderlichen Berechtigungen hat.</span><span class="sxs-lookup"><span data-stu-id="c6488-174">Registration succeeds if the WMI client has permissions.</span></span> <span data-ttu-id="c6488-175">Andernfalls wird an den Client ein Fehler zurückgegeben.</span><span class="sxs-lookup"><span data-stu-id="c6488-175">Otherwise, an error is returned to the client.</span></span> <span data-ttu-id="c6488-176">In bestimmten Fällen können Sie, abhängig von den Eigenschaften des Ereignisses, die WHERE-Klausel jedoch trotzdem als Filter für serverbasierte Ereignisse verwenden.</span><span class="sxs-lookup"><span data-stu-id="c6488-176">In some cases, however, you can still use the WHERE clause as a filter for server-level events based on the properties that correspond to the event.</span></span> <span data-ttu-id="c6488-177">Beispielsweise weisen zahlreiche Ablaufverfolgungsereignisse eine `DatabaseName`-Eigenschaft auf, die in der WHERE-Klausel als Filter verwendet werden kann.</span><span class="sxs-lookup"><span data-stu-id="c6488-177">For example, many trace events have a `DatabaseName` property that can be used in the WHERE clause as a filter.</span></span>  
  
 <span data-ttu-id="c6488-178">Ereignis Benachrichtigungen im Server Bereich werden in der **Master** -Datenbank erstellt und können mithilfe der [sys. server_event_notifications](/sql/relational-databases/system-catalog-views/sys-server-event-notifications-transact-sql) -Katalog Sicht für Metadaten abgefragt werden.</span><span class="sxs-lookup"><span data-stu-id="c6488-178">Server-scoped event notifications are created in the **master** database and can be queried for metadata by using the [sys.server_event_notifications](/sql/relational-databases/system-catalog-views/sys-server-event-notifications-transact-sql) catalog view.</span></span>  
  
 <span data-ttu-id="c6488-179">Ereignis Benachrichtigungen mit Daten Bankbereich oder Objektbereich werden in der angegebenen Datenbank erstellt und können mithilfe der [sys. event_notifications](/sql/relational-databases/system-catalog-views/sys-event-notifications-transact-sql) -Katalog Sicht für Metadaten abgefragt werden.</span><span class="sxs-lookup"><span data-stu-id="c6488-179">Database-scoped or object-scoped event notifications are created in the specified database and can be queried for metadata by using the [sys.event_notifications](/sql/relational-databases/system-catalog-views/sys-event-notifications-transact-sql) catalog view.</span></span> <span data-ttu-id="c6488-180">(Sie müssen der Katalogsicht den entsprechenden Datenbanknamen als Präfix hinzufügen.)</span><span class="sxs-lookup"><span data-stu-id="c6488-180">(You must prefix the catalog view with the corresponding database name.)</span></span>  
  
## <a name="examples"></a><span data-ttu-id="c6488-181">Beispiele</span><span class="sxs-lookup"><span data-stu-id="c6488-181">Examples</span></span>  
  
### <a name="a-querying-for-events-at-the-server-scope"></a><span data-ttu-id="c6488-182">A.</span><span class="sxs-lookup"><span data-stu-id="c6488-182">A.</span></span> <span data-ttu-id="c6488-183">Abfragen von Ereignissen im Serverbereich</span><span class="sxs-lookup"><span data-stu-id="c6488-183">Querying for events at the server scope</span></span>  
 <span data-ttu-id="c6488-184">Die folgende WQL-Abfrage ruft alle Ereigniseigenschaften für alle `SERVER_MEMORY_CHANGE`-Ablaufverfolgungsereignisse ab, die in der Instanz von [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] auftreten.</span><span class="sxs-lookup"><span data-stu-id="c6488-184">The following WQL query retrieves all event properties for any `SERVER_MEMORY_CHANGE` trace event that occurs on the instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span>  
  
```  
SELECT * FROM SERVER_MEMORY_CHANGE  
```  
  
### <a name="b-querying-for-events-at-the-database-scope"></a><span data-ttu-id="c6488-185">B.</span><span class="sxs-lookup"><span data-stu-id="c6488-185">B.</span></span> <span data-ttu-id="c6488-186">Abfragen von Ereignissen im Datenbankbereich</span><span class="sxs-lookup"><span data-stu-id="c6488-186">Querying for events at the database scope</span></span>  
 <span data-ttu-id="c6488-187">Die folgende WQL-Abfrage ruft bestimmte Ereigniseigenschaften für alle Ereignisse ab, die in der `AdventureWorks`-Datenbank auftreten und in der `DDL_DATABASE_LEVEL_EVENTS`-Ereignisgruppe existieren.</span><span class="sxs-lookup"><span data-stu-id="c6488-187">The following WQL query retrieves specific event properties for any event that occurs in the `AdventureWorks` database and exists under the `DDL_DATABASE_LEVEL_EVENTS` event group.</span></span>  
  
```  
SELECT SPID, SQLInstance, DatabaseName FROM DDL_DATABASE_LEVEL_EVENTS   
WHERE DatabaseName = 'AdventureWorks'   
```  
  
### <a name="c-querying-for-events-at-the-database-scope-filtering-by-schema-and-object"></a><span data-ttu-id="c6488-188">C.</span><span class="sxs-lookup"><span data-stu-id="c6488-188">C.</span></span> <span data-ttu-id="c6488-189">Abfragen von Ereignissen im Datenbankbereich mit Filtern nach Schema und Objekt</span><span class="sxs-lookup"><span data-stu-id="c6488-189">Querying for events at the database scope, filtering by schema and object</span></span>  
 <span data-ttu-id="c6488-190">Die folgende Abfrage ruft alle Ereigniseigenschaften für alle `ALTER_TABLE`-Ereignisse ab, die in der Tabelle `AdventureWorks.Sales.SalesOrderDetail` auftreten.</span><span class="sxs-lookup"><span data-stu-id="c6488-190">The following query retrieves all event properties for any `ALTER_TABLE` event that occurs on table `AdventureWorks.Sales.SalesOrderDetail`.</span></span>  
  
```  
SELECT * FROM ALTER_TABLE   
WHERE DatabaseName = 'AdventureWorks' AND SchemaName = 'Sales'   
    AND ObjectType='Table' AND ObjectName = 'SalesOrderDetail'  
```  
  
## <a name="see-also"></a><span data-ttu-id="c6488-191">Weitere Informationen</span><span class="sxs-lookup"><span data-stu-id="c6488-191">See Also</span></span>  
 <span data-ttu-id="c6488-192">[Konzepte des WMI-Anbieters für Server Ereignisse](https://technet.microsoft.com/library/ms180560.aspx) </span><span class="sxs-lookup"><span data-stu-id="c6488-192">[WMI Provider for Server Events Concepts](https://technet.microsoft.com/library/ms180560.aspx) </span></span>  
 [<span data-ttu-id="c6488-193">Ereignisbenachrichtigung (Datenbank-Engine)</span><span class="sxs-lookup"><span data-stu-id="c6488-193">Event Notifications (Database Engine)</span></span>](https://technet.microsoft.com/library/ms182602.aspx)  
  
  
