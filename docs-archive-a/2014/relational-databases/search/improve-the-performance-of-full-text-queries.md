---
title: Verbessern der Leistung von Volltextabfragen | Microsoft-Dokumentation
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: search
ms.topic: conceptual
ms.assetid: 0658dc74-25eb-4486-bbd6-e85c1f92c272
author: MikeRayMSFT
ms.author: mikeray
ms.openlocfilehash: a1437f710725df5c87d31f6a80939a5d7869b412
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 08/04/2020
ms.locfileid: "87717740"
---
# <a name="improve-the-performance-of-full-text-queries"></a><span data-ttu-id="09f9c-102">Verbessern der Leistung von Volltextabfragen</span><span class="sxs-lookup"><span data-stu-id="09f9c-102">Improve the Performance of Full-Text Queries</span></span>
  <span data-ttu-id="09f9c-103">Die folgenden Empfehlungen sollen Ihnen dabei helfen, die Leistung von Volltextabfragen zu erhöhen.</span><span class="sxs-lookup"><span data-stu-id="09f9c-103">The following is a list of recommendations that will help to improve the performance of full-text queries.</span></span>  
  
 <span data-ttu-id="09f9c-104">Die Leistung bei Volltextabfragen wird auch von den Hardwareressourcen wie Arbeitsspeicher, Datenträgergeschwindigkeit, CPU-Geschwindigkeit und Computerarchitektur beeinflusst.</span><span class="sxs-lookup"><span data-stu-id="09f9c-104">The performance of full-text queries is also influenced by hardware resources, such as memory, disk speed, CPU speed, and machine architecture.</span></span>  
  
-   <span data-ttu-id="09f9c-105">Defragmentieren Sie den Index der Basistabelle mithilfe von [ALTER INDEX REORGANIZE](/sql/t-sql/statements/alter-index-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="09f9c-105">Defragment the index of the base table by using [ALTER INDEX REORGANIZE](/sql/t-sql/statements/alter-index-transact-sql).</span></span>  
  
-   <span data-ttu-id="09f9c-106">Organisieren Sie den Volltextkatalog mithilfe von [ALTER FULLTEXT CATALOG REORGANIZE](/sql/t-sql/statements/alter-fulltext-catalog-transact-sql)neu.</span><span class="sxs-lookup"><span data-stu-id="09f9c-106">Reorganize the full-text catalog by using [ALTER FULLTEXT CATALOG REORGANIZE](/sql/t-sql/statements/alter-fulltext-catalog-transact-sql).</span></span> <span data-ttu-id="09f9c-107">Stellen Sie sicher, dass dies vor dem Leistungstest erfolgt, da das Ausführen dieser Anweisung zu einer Masterzusammenführung der Volltextindizes im Katalog führt.</span><span class="sxs-lookup"><span data-stu-id="09f9c-107">Make sure that you do this before performance testing because running this statement causes a master merge of the full-text indexes in that catalog.</span></span>  
  
-   <span data-ttu-id="09f9c-108">Beschränken Sie die Auswahl von Volltextschlüsselspalten auf eine kleine Spalte.</span><span class="sxs-lookup"><span data-stu-id="09f9c-108">Restrict your choice of full-text key columns to a small column.</span></span> <span data-ttu-id="09f9c-109">Es wird zwar eine 900-Byte-Spalte unterstützt, aber es ist ratsam, in einem Volltextindex eine kleinere Schlüsselspalte zu verwenden.</span><span class="sxs-lookup"><span data-stu-id="09f9c-109">Although a 900-byte column is supported, we recommend using a smaller key column in a full-text index.</span></span> <span data-ttu-id="09f9c-110">`int` und `bigint` bieten die beste Leistung.</span><span class="sxs-lookup"><span data-stu-id="09f9c-110">`int` and `bigint` provide the best performance.</span></span>  
  
-   <span data-ttu-id="09f9c-111">Durch die Verwendung eines Volltextschlüssels mit ganzen Zahlen können Sie einen Join mit der Zuordnungstabelle **docid** vermeiden.</span><span class="sxs-lookup"><span data-stu-id="09f9c-111">Using an integer full-text key avoids a join with the **docid** mapping table.</span></span> <span data-ttu-id="09f9c-112">Deshalb verbessert ein ganzzahliger Volltextschlüssel die Abfrageleistung erheblich und optimiert außerdem die Durchforstungsleistung.</span><span class="sxs-lookup"><span data-stu-id="09f9c-112">Therefore, an integer full-text key improves query performance by an order of magnitude and improves crawl performance.</span></span> <span data-ttu-id="09f9c-113">Es können sich weitere Leistungsvorteile ergeben, wenn der Volltextschlüssel auch der Schlüssel des gruppierten Index ist.</span><span class="sxs-lookup"><span data-stu-id="09f9c-113">Additional performance benefits might result if the full-text key is also the clustered index key.</span></span>  
  
-   <span data-ttu-id="09f9c-114">Fassen Sie mehrere [CONTAINS](/sql/t-sql/queries/contains-transact-sql) -Prädikate zu einem CONTAINS-Prädikat zusammen.</span><span class="sxs-lookup"><span data-stu-id="09f9c-114">Combine multiple [CONTAINS](/sql/t-sql/queries/contains-transact-sql) predicates into one CONTAINS predicate.</span></span> <span data-ttu-id="09f9c-115">Sie können in [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] eine Liste von Spalten in der CONTAINS-Abfrage angeben.</span><span class="sxs-lookup"><span data-stu-id="09f9c-115">In [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] you can specify a list of columns in the CONTAINS query.</span></span>  
  
-   <span data-ttu-id="09f9c-116">Verwenden Sie [CONTAINSTABLE](/sql/relational-databases/system-functions/containstable-transact-sql) oder [FREETEXTTABLE](/sql/relational-databases/system-functions/freetexttable-transact-sql) statt CONTAINS bzw. FREETEXT, wenn Sie nur Volltextschlüssel- oder Ranginformationen benötigen.</span><span class="sxs-lookup"><span data-stu-id="09f9c-116">If you only require full-text key or rank information, use [CONTAINSTABLE](/sql/relational-databases/system-functions/containstable-transact-sql) or [FREETEXTTABLE](/sql/relational-databases/system-functions/freetexttable-transact-sql) instead of CONTAINS or FREETEXT, respectively.</span></span>  
  
-   <span data-ttu-id="09f9c-117">Verwenden Sie den *top_n_by_rank* -Parameter der Funktionen FREETEXTTABLE und CONTAINSTABLE, um die Ergebnisse einzuschränken und die Leistung zu erhöhen.</span><span class="sxs-lookup"><span data-stu-id="09f9c-117">To limit results and increase performance, use the *top_n_by_rank* parameter of the FREETEXTTABLE and CONTAINSTABLE functions.</span></span> <span data-ttu-id="09f9c-118">Mit*top_n_by_rank* können Sie nur die relevantesten Treffer aufrufen.</span><span class="sxs-lookup"><span data-stu-id="09f9c-118">*top_n_by_rank* allows you to recall only the most relevant hits.</span></span> <span data-ttu-id="09f9c-119">Verwenden Sie diesen Parameter nur, wenn es beim vorliegenden Geschäftsmodell nicht erforderlich ist, alle möglichen Ergebnisse zurückzugeben (d.h., es wird kein *Gesamtrückruf*benötigt).</span><span class="sxs-lookup"><span data-stu-id="09f9c-119">Use this parameter only if your business scenario does not require recalling all possible hits (that is, it does not require *total recall*).</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="09f9c-120">Gesamtrückrufe werden i d. R. in juristischen Szenarios verlangt. In anderen Geschäftsszenarios, z. B. für das E-Business, sind Leistungsaspekte meist vorrangig.</span><span class="sxs-lookup"><span data-stu-id="09f9c-120">Total recall is typically necessary for legal scenarios but might be less important than performance for business scenarios such as an e-business.</span></span>  
  
-   <span data-ttu-id="09f9c-121">Prüfen Sie den Volltextabfrageplan, um sicherzustellen, dass der entsprechende Joinplan ausgewählt ist.</span><span class="sxs-lookup"><span data-stu-id="09f9c-121">Check the full-text query plan to make sure that the appropriate join plan is chosen.</span></span> <span data-ttu-id="09f9c-122">Verwenden Sie ggf. einen Joinhinweis oder einen Abfragehinweis.</span><span class="sxs-lookup"><span data-stu-id="09f9c-122">Use a join hint or query hint if you have to.</span></span> <span data-ttu-id="09f9c-123">Wenn ein Parameter in der Volltextabfrage verwendet wird, bestimmt der erste Wert dieses Parameters den Abfrageplan.</span><span class="sxs-lookup"><span data-stu-id="09f9c-123">If a parameter is used in the full-text query, the first-time value of the parameter determines the query plan.</span></span> <span data-ttu-id="09f9c-124">Sie können den OPTIMIZE FOR- [Abfragehinweis](/sql/t-sql/queries/hints-transact-sql-query) verwenden, um die Abfrage zu zwingen, einen von Ihnen ausgewählten Wert zu kompilieren.</span><span class="sxs-lookup"><span data-stu-id="09f9c-124">You can use the OPTIMIZE FOR [query hint](/sql/t-sql/queries/hints-transact-sql-query) to force the query to compile with the value you want.</span></span> <span data-ttu-id="09f9c-125">Dadurch wird ein deterministischer Abfrageplan und bessere Leistung erzielt.</span><span class="sxs-lookup"><span data-stu-id="09f9c-125">This helps achieve a deterministic query plan and better performance.</span></span>  
  
-   <span data-ttu-id="09f9c-126">Zu viele Volltextindexfragmente im Volltextindex können zu einer beträchtlichen Verringerung der Abfrageleistung führen.</span><span class="sxs-lookup"><span data-stu-id="09f9c-126">Too many full-text index fragments in the full-text index, can lead to substantial degradation in query performance.</span></span> <span data-ttu-id="09f9c-127">Um die Anzahl der Fragmente zu reduzieren, organisieren Sie den Volltextkatalog neu, indem Sie die Option REORGANIZE der [ALTER FULLTEXT CATALOG](/sql/t-sql/statements/alter-fulltext-catalog-transact-sql)[!INCLUDE[tsql](../../includes/tsql-md.md)] -Anweisung verwenden.</span><span class="sxs-lookup"><span data-stu-id="09f9c-127">To reduce the number of fragments, reorganize the full-text catalog by using the REORGANIZE option of the [ALTER FULLTEXT CATALOG](/sql/t-sql/statements/alter-fulltext-catalog-transact-sql)[!INCLUDE[tsql](../../includes/tsql-md.md)] statement.</span></span> <span data-ttu-id="09f9c-128">Diese Anweisung führt im Wesentlichen alle Fragmente zu einem einzelnen großen Fragment zusammen und entfernt alle veralteten Einträge aus dem Volltextindex.</span><span class="sxs-lookup"><span data-stu-id="09f9c-128">This statement essentially merges all the fragments into a single larger fragment and removes all obsolete entries from the full-text index.</span></span>  
  
-   <span data-ttu-id="09f9c-129">Bei der Volltextsuche in  können die unter CONTAINSTABLE (AND, OR) angegebenen logischen Operatoren entweder als SQL-Joins oder innerhalb der Streaming-Tabellenwertfunktionen (STVF) der Volltextausführung implementiert werden.</span><span class="sxs-lookup"><span data-stu-id="09f9c-129">In  full-text search, logical operators specified in CONTAINSTABLE (AND, OR) can be implemented either as SQL joins or inside the full-text execution streaming table-valued functions (STVF).</span></span> <span data-ttu-id="09f9c-130">Normalerweise werden Abfragen, die nur über einen Typ von logischen Operatoren verfügen, ausschließlich über die Volltextausführung implementiert, während Abfragen mit gemischten logischen Operatoren auch SQL-Joins aufweisen.</span><span class="sxs-lookup"><span data-stu-id="09f9c-130">Typically, queries with only one type of logical operators are implemented purely by full-text execution, whereas queries that mix logical operators also possess SQL joins.</span></span> <span data-ttu-id="09f9c-131">Bei der Implementierung eines logischen Operators innerhalb der Volltextausführung STVF werden einige spezielle Indexeigenschaften verwendet, die gegenüber SQL-Joins Geschwindigkeitsvorteile aufweisen.</span><span class="sxs-lookup"><span data-stu-id="09f9c-131">Implementation of a logical operator inside the full-text execution STVF uses some special index properties that make it much faster than SQL joins.</span></span> <span data-ttu-id="09f9c-132">Aus diesem Grund ist es ratsam, für Frames von Abfragen möglichst nur einen Typ von logischem Operator zu verwenden.</span><span class="sxs-lookup"><span data-stu-id="09f9c-132">For this reason, we recommend that, where possible, you frame queries using only a single type of logical operator.</span></span>  
  
-   <span data-ttu-id="09f9c-133">Bei Anwendungen, die Prädikate mit selektiver Beziehung enthalten, funktionieren Abfragen, die selektive relationale Prädikate und nicht selektive Volltextprädikate verwenden, ggf. am besten, wenn sie für die Verwendung des Abfrageoptimierers geschrieben werden.</span><span class="sxs-lookup"><span data-stu-id="09f9c-133">For applications that contain selective-relation predications, queries that use selective relational predicates and unselective full-text predicates might perform best when they are written to use the query optimizer.</span></span> <span data-ttu-id="09f9c-134">Dann kann der Abfrageoptimierer entscheiden, ob ein Prädikats- oder Bereichs-Pushdown verwendet werden kann, um einen effektiven Abfrageplan aufzustellen.</span><span class="sxs-lookup"><span data-stu-id="09f9c-134">This allows the query optimizer to decide whether it can exploit predicate or range pushdown to produce an effective query plan.</span></span> <span data-ttu-id="09f9c-135">Dieser Ansatz ist einfacher und häufig auch effizienter als das Indizieren von relationalen Daten als Volltextdaten.</span><span class="sxs-lookup"><span data-stu-id="09f9c-135">This approach is simpler and often more efficient than indexing relational data as full-text data.</span></span>  
  
## <a name="related-resources"></a><span data-ttu-id="09f9c-136">Zugehörige Ressourcen</span><span class="sxs-lookup"><span data-stu-id="09f9c-136">Related Resources</span></span>  
 [<span data-ttu-id="09f9c-137">SQL Server 2008-Volltextsuche: Internes und Erweiterungen</span><span class="sxs-lookup"><span data-stu-id="09f9c-137">SQL Server 2008 Full-Text Search: Internals and Enhancements</span></span>](https://go.microsoft.com/fwlink/?LinkId=129544)  
  
## <a name="see-also"></a><span data-ttu-id="09f9c-138">Weitere Informationen</span><span class="sxs-lookup"><span data-stu-id="09f9c-138">See Also</span></span>  
 <span data-ttu-id="09f9c-139">[sys.dm_fts_memory_buffers &#40;Transact-SQL&#41;](/sql/relational-databases/system-dynamic-management-views/sys-dm-fts-memory-buffers-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="09f9c-139">[sys.dm_fts_memory_buffers &#40;Transact-SQL&#41;](/sql/relational-databases/system-dynamic-management-views/sys-dm-fts-memory-buffers-transact-sql) </span></span>  
 [<span data-ttu-id="09f9c-140">sys.dm_fts_memory_pools &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="09f9c-140">sys.dm_fts_memory_pools &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-dynamic-management-views/sys-dm-fts-memory-pools-transact-sql)  
  
  
