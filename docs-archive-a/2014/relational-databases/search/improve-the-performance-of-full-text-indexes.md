---
title: Verbessern der Leistung von Volltextindizes | Microsoft-Dokumentation
ms.custom: ''
ms.date: 04/26/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: search
ms.topic: conceptual
helpviewer_keywords:
- performance [SQL Server], full-text search
- full-text queries [SQL Server], performance
- crawls [full-text search]
- full-text indexes [SQL Server], performance
- full-text search [SQL Server], performance
- batches [SQL Server], full-text search
ms.assetid: ef39ef1f-f0b7-4582-8e9c-31d4bd0ad35d
author: MikeRayMSFT
ms.author: mikeray
ms.openlocfilehash: 51b5913e9c3ce65faa5a1fddc5846cc7c94d149f
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 08/04/2020
ms.locfileid: "87717743"
---
# <a name="improve-the-performance-of-full-text-indexes"></a><span data-ttu-id="8a8e4-102">Verbessern der Leistung von Volltextindizes</span><span class="sxs-lookup"><span data-stu-id="8a8e4-102">Improve the Performance of Full-Text Indexes</span></span>
  <span data-ttu-id="8a8e4-103">Die Leistung für Volltextindizes und Volltextabfragen wird von den Hardwareressourcen wie Arbeitsspeicher, Datenträgergeschwindigkeit, CPU-Geschwindigkeit und Computerarchitektur beeinflusst.</span><span class="sxs-lookup"><span data-stu-id="8a8e4-103">Performance for full-text indexing and full-text queries is influenced by hardware resources, such as memory, disk speed, CPU speed, and machine architecture.</span></span>  
  
##  <a name="common-causes-of-performance-issues"></a><a name="causes"></a><span data-ttu-id="8a8e4-104">Häufige Ursachen für Leistungsprobleme</span><span class="sxs-lookup"><span data-stu-id="8a8e4-104">Common Causes of Performance Issues</span></span>  
 <span data-ttu-id="8a8e4-105">Der Hauptgrund für eine eingeschränkte Leistung beim Erstellen von Volltextindizes sind Einschränkungen bei den Hardwareressourcen:</span><span class="sxs-lookup"><span data-stu-id="8a8e4-105">The main cause for reduced full-text indexing performance is hardware-resource limits:</span></span>  
  
-   <span data-ttu-id="8a8e4-106">Wenn die CPU-Nutzung des Filterdaemon-Hostprozesses (fdhost.exe) oder des [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] -Prozesses (sqlservr.exe) fast 100 % beträgt, dann ist die CPU der Engpass.</span><span class="sxs-lookup"><span data-stu-id="8a8e4-106">If CPU usage by the filter daemon host process (fdhost.exe) or the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] process (sqlservr.exe) is close to 100 percent, the CPU is the bottleneck.</span></span>  
  
-   <span data-ttu-id="8a8e4-107">Wenn die durchschnittliche Warteschlangenlänge des Datenträgers zweimal so groß wie die Anzahl von Leseköpfen ist, dann besteht ein Engpass auf dem Datenträger.</span><span class="sxs-lookup"><span data-stu-id="8a8e4-107">If the average disk-waiting queue length is more than two times the number of disk heads, there is a bottleneck on the disk.</span></span> <span data-ttu-id="8a8e4-108">Die erste Problemumgehung ist das Erstellen von Volltextkatalogen, die getrennt von den [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] -Datenbankendateien und -protokollen sind.</span><span class="sxs-lookup"><span data-stu-id="8a8e4-108">The primary workaround is to create full-text catalogs that are separate from the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] database files and logs.</span></span> <span data-ttu-id="8a8e4-109">Platzieren Sie Protokolle, die Datenbankdateien und Volltextkataloge auf getrennten Datenträgern.</span><span class="sxs-lookup"><span data-stu-id="8a8e4-109">Put the logs, database files, and full-text catalogs on separate disks.</span></span> <span data-ttu-id="8a8e4-110">Kaufen Sie schnellere Datenträger, und verwenden Sie RAID, um die Indexleistung zu verbessern.</span><span class="sxs-lookup"><span data-stu-id="8a8e4-110">Buying faster disks and using RAID can also help improve indexing performance.</span></span>  
  
-   <span data-ttu-id="8a8e4-111">Wenn ein Mangel an physischem Speicher (3-GB-Grenze) besteht, kann ggf. der Arbeitsspeicher der Engpass sein.</span><span class="sxs-lookup"><span data-stu-id="8a8e4-111">If there is a shortage of physical memory (3-GB limit), memory might be the bottleneck.</span></span> <span data-ttu-id="8a8e4-112">Einschränkungen des physischen Arbeitsspeichers sind auf allen Systemen möglich, und auf 32-Bit-Systemen kann knapper virtueller Arbeitsspeicher die Volltextindizierung verlangsamen.</span><span class="sxs-lookup"><span data-stu-id="8a8e4-112">Physical memory limitations are possible on all systems, and on 32-bit systems, virtual memory pressure can slow down full-text indexing.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="8a8e4-113">Ab [!INCLUDE[ssKatmai](../../includes/sskatmai-md.md)] kann die Volltext-Engine den AWE-Speicher verwenden, weil die Volltext-Engine Teil von sqlservr.exe ist.</span><span class="sxs-lookup"><span data-stu-id="8a8e4-113">Beginning in [!INCLUDE[ssKatmai](../../includes/sskatmai-md.md)], the Full-Text Engine can use AWE memory because the Full-Text Engine is part of the sqlservr.exe.</span></span>  
  
 <span data-ttu-id="8a8e4-114">Wenn auf dem System keine Hardwareengpässe vorhanden sind, hängt die Indizierungsleistung der Volltextsuche vor allem von folgenden Faktoren ab:</span><span class="sxs-lookup"><span data-stu-id="8a8e4-114">If the system has no hardware bottlenecks, the indexing performance of full-text search mostly depends on the following:</span></span>  
  
-   <span data-ttu-id="8a8e4-115">Wie lange das Erstellen von Volltextbatches durch [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] dauert.</span><span class="sxs-lookup"><span data-stu-id="8a8e4-115">How long it takes [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] to create full-text batches.</span></span>  
  
-   <span data-ttu-id="8a8e4-116">Wie schnell der Filterdaemon diese Batches verarbeiten kann.</span><span class="sxs-lookup"><span data-stu-id="8a8e4-116">How quickly the filter daemon can consume those batches.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="8a8e4-117">Im Gegensatz zur vollständigen Auffüllung eignet sich die inkrementelle, manuelle und automatische Änderungsnachverfolgung der Auffüllung nicht zum Maximieren von Hardwareressourcen, um schnellere Geschwindigkeiten zu erzielen.</span><span class="sxs-lookup"><span data-stu-id="8a8e4-117">Unlike full population, incremental, manual, and auto change tracking population are not designed to maximize hardware resources to achieve faster speed.</span></span> <span data-ttu-id="8a8e4-118">Deshalb können diese Optimierungsvorschläge nicht die Leistung für Volltextindizes verbessern.</span><span class="sxs-lookup"><span data-stu-id="8a8e4-118">Therefore, these tuning suggestions may not enhance performance for full-text indexing.</span></span>  
  
 <span data-ttu-id="8a8e4-119">Nach dem Ende einer Auffüllung wird ein abschließender Mergeprozess ausgelöst, der die Indexfragmente zu einem Mastervolltextindex zusammenführt.</span><span class="sxs-lookup"><span data-stu-id="8a8e4-119">When a population has completed, a final merge process is triggered that merges the index fragments together into one master full-text index.</span></span> <span data-ttu-id="8a8e4-120">Dies ermöglicht eine verbesserte Abfrageleistung, da statt mehrerer Indexfragmente nur der Masterindex abgefragt werden muss. Zudem können bessere Bewertungsstatistiken zum Erstellen der Relevanzrangfolge verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="8a8e4-120">This results in improved query performance since only the master index needs to be queried rather than a number of index fragments, and better scoring statistics may be used for relevance ranking.</span></span> <span data-ttu-id="8a8e4-121">Beachten Sie, dass die Masterzusammenführung E/A-intensiv sein kann, da beim Zusammenführen der Indexfragmente umfangreiche Datenmengen geschrieben und gelesen werden müssen. Eingehende Abfragen werden dadurch jedoch nicht blockiert.</span><span class="sxs-lookup"><span data-stu-id="8a8e4-121">Note that the master merge can be I/O intensive, because large amounts of data must be written and read when index fragments are merged, though it does not block incoming queries.</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="8a8e4-122">Die Masterzusammenführung einer großen Datenmenge kann eine Transaktion mit langer Ausführungszeit erzeugen und das Abschneiden des Transaktionsprotokolls während des Prüfpunkts verzögern.</span><span class="sxs-lookup"><span data-stu-id="8a8e4-122">Master merging a large amount of data can create a long running transaction, delaying truncation of the transaction log during checkpoint.</span></span> <span data-ttu-id="8a8e4-123">In diesem Fall kann das Transaktionsprotokoll unter dem vollständigen Wiederherstellungsmodell erheblich anwachsen.</span><span class="sxs-lookup"><span data-stu-id="8a8e4-123">In this case, under the full recovery model, the transaction log might grow significantly.</span></span> <span data-ttu-id="8a8e4-124">Sie sollten sicherstellen, dass das Transaktionsprotokoll vor dem Reorganisieren eines großen Volltextindexes in einer Datenbank, die das vollständige Wiederherstellungsmodell verwendet, genügend Speicherplatz für eine Transaktion mit langer Laufzeit bietet.</span><span class="sxs-lookup"><span data-stu-id="8a8e4-124">As a best practice, before reorganizing a large full-text index in a database that uses the full recovery model, ensure that your transaction log contains sufficient space for a long-running transaction.</span></span> <span data-ttu-id="8a8e4-125">Weitere Informationen finden Sie unter [Verwalten der Größe der Transaktionsprotokolldatei](../logs/manage-the-size-of-the-transaction-log-file.md).</span><span class="sxs-lookup"><span data-stu-id="8a8e4-125">For more information, see [Manage the Size of the Transaction Log File](../logs/manage-the-size-of-the-transaction-log-file.md).</span></span>  
  
  
  
##  <a name="tuning-the-performance-of-full-text-indexes"></a><a name="tuning"></a><span data-ttu-id="8a8e4-126">Optimieren der Leistung von voll Text Indizes</span><span class="sxs-lookup"><span data-stu-id="8a8e4-126">Tuning the Performance of Full-Text Indexes</span></span>  
 <span data-ttu-id="8a8e4-127">Sie können die Leistung Ihrer Volltextindizes mit den folgenden bewährten Methoden maximieren:</span><span class="sxs-lookup"><span data-stu-id="8a8e4-127">To maximize the performance of your full-text indexes, implement the following best practices:</span></span>  
  
-   <span data-ttu-id="8a8e4-128">Um alle Prozessoren oder Kerne maximal zu verwenden, legen Sie [sp_configure](/sql/relational-databases/system-stored-procedures/sp-configure-transact-sql)' `max full-text crawl ranges` ' auf die Anzahl der CPUs im System fest.</span><span class="sxs-lookup"><span data-stu-id="8a8e4-128">To use all processors or cores to the maximum, set [sp_configure](/sql/relational-databases/system-stored-procedures/sp-configure-transact-sql)'`max full-text crawl ranges`' to the number of CPUs on the system.</span></span> <span data-ttu-id="8a8e4-129">Informationen zu dieser Konfigurationsoption finden Sie unter [Max. Bereich für Volltextdurchforstung (Serverkonfigurationsoption)](../../database-engine/configure-windows/max-full-text-crawl-range-server-configuration-option.md).</span><span class="sxs-lookup"><span data-stu-id="8a8e4-129">For information about this configuration option, see [max full-text crawl range Server Configuration Option](../../database-engine/configure-windows/max-full-text-crawl-range-server-configuration-option.md).</span></span>  
  
-   <span data-ttu-id="8a8e4-130">Stellen Sie sicher, dass die Basistabelle einen gruppierten Index besitzt.</span><span class="sxs-lookup"><span data-stu-id="8a8e4-130">Make sure that the base table has a clustered index.</span></span> <span data-ttu-id="8a8e4-131">Verwenden Sie einen ganzzahligen Datentyp für die erste Spalte des gruppierten Index.</span><span class="sxs-lookup"><span data-stu-id="8a8e4-131">Use an integer data type for the first column of the clustered index.</span></span> <span data-ttu-id="8a8e4-132">Vermeiden Sie das Verwenden von GUIDs in der ersten Spalte des gruppierten Index.</span><span class="sxs-lookup"><span data-stu-id="8a8e4-132">Avoid using GUIDs in the first column of the clustered index.</span></span> <span data-ttu-id="8a8e4-133">Eine Mehrbereichsauffüllung für einen gruppierten Index kann die höchste Auffüllungsgeschwindigkeit erzielen.</span><span class="sxs-lookup"><span data-stu-id="8a8e4-133">A multi-range population on a clustered index can produce the highest population speed.</span></span> <span data-ttu-id="8a8e4-134">Es ist ratsam, für die Spalte, die als Volltextschlüssel dient, einen ganzzahligen Datentyp zu verwenden.</span><span class="sxs-lookup"><span data-stu-id="8a8e4-134">We recommend that the column serving as the full-text key be an integer data type.</span></span>  
  
-   <span data-ttu-id="8a8e4-135">Aktualisieren Sie die Statistiken der Basistabelle mithilfe der [UPDATE STATISTICS](/sql/t-sql/statements/update-statistics-transact-sql) -Anweisung.</span><span class="sxs-lookup"><span data-stu-id="8a8e4-135">Update the statistics of the base table by using the [UPDATE STATISTICS](/sql/t-sql/statements/update-statistics-transact-sql) statement.</span></span> <span data-ttu-id="8a8e4-136">Noch wichtiger ist das Aktualisieren der Statistik für den gruppierten Index bzw. des Volltextschlüssels für eine vollständige Auffüllung.</span><span class="sxs-lookup"><span data-stu-id="8a8e4-136">More important, update the statistics on the clustered index or the full-text key for a full population.</span></span> <span data-ttu-id="8a8e4-137">Dies unterstützt eine Mehrbereichsauffüllung beim Erzeugen guter Partitionen in der Tabelle.</span><span class="sxs-lookup"><span data-stu-id="8a8e4-137">This helps a multi-range population to generate good partitions on the table.</span></span>  
  
-   <span data-ttu-id="8a8e4-138">Erstellen Sie einen zweiten Index in einer `timestamp`-Spalte, wenn Sie die Leistung der inkrementellen Auffüllung verbessern möchten.</span><span class="sxs-lookup"><span data-stu-id="8a8e4-138">Build a secondary index on a `timestamp` column if you want to improve the performance of incremental population.</span></span>  
  
-   <span data-ttu-id="8a8e4-139">Bevor Sie eine vollständige Auffüllung auf einem großen Multi-CPU-Computer ausführen, sollten Sie die Größe des Pufferpools vorübergehend einschränken, indem Sie den `max server memory`-Wert so festlegen, dass noch genug Speicher für den fdhost.exe-Prozess und die Betriebssystemprozesse verfügbar ist.</span><span class="sxs-lookup"><span data-stu-id="8a8e4-139">Before you perform a full population on a large multi-CPU computer, we recommend that you temporarily limit the size of the buffer pool by setting the `max server memory` value to leave enough memory for the fdhost.exe process and operating system use.</span></span> <span data-ttu-id="8a8e4-140">Weitere Informationen finden Sie unter "Schätzen der Arbeitsspeicheranforderungen des Filterdaemon-Hostprozesses (fdhost.exe)" weiter unten in diesem Thema.</span><span class="sxs-lookup"><span data-stu-id="8a8e4-140">For more information, see "Estimating the Memory Requirements of the Filter Daemon Host Process (fdhost.exe)," later in this topic.</span></span>  
  
  
  
##  <a name="troubleshooting-the-performance-of-full-populations"></a><a name="full"></a><span data-ttu-id="8a8e4-141">Problembehandlung bei vollständigen Auffüllungen</span><span class="sxs-lookup"><span data-stu-id="8a8e4-141">Troubleshooting the Performance of Full Populations</span></span>  
 <span data-ttu-id="8a8e4-142">Leistungsprobleme diagnostizieren Sie, indem Sie die Protokolle für den Volltextcrawl überprüfen.</span><span class="sxs-lookup"><span data-stu-id="8a8e4-142">To diagnose performance problems, look at the full-text crawl logs.</span></span> <span data-ttu-id="8a8e4-143">Informationen zu Durchforstungsprotokollen finden Sie unter [Auffüllen von Volltextindizes](../indexes/indexes.md).</span><span class="sxs-lookup"><span data-stu-id="8a8e4-143">For information about crawl logs, see [Populate Full-Text Indexes](../indexes/indexes.md).</span></span>  
  
 <span data-ttu-id="8a8e4-144">Es ist ratsam, bei der Problembehandlung die folgende Reihenfolge einzuhalten, falls die Leistung der vollständigen Auffüllungen nicht zufriedenstellend ist.</span><span class="sxs-lookup"><span data-stu-id="8a8e4-144">It is recommended that the following order of troubleshooting be followed if the performance of full populations is not satisfactory.</span></span>  
  
### <a name="physical-memory-usage"></a><span data-ttu-id="8a8e4-145">Verwendung des physischen Speichers</span><span class="sxs-lookup"><span data-stu-id="8a8e4-145">Physical Memory Usage</span></span>  
 <span data-ttu-id="8a8e4-146">Während einer Volltextauffüllung ist es möglich, dass fdhost.exe oder sqlservr.exe viel Arbeitsspeicher beansprucht oder nicht genügend Arbeitsspeicher vorhanden ist.</span><span class="sxs-lookup"><span data-stu-id="8a8e4-146">During a full-text population, it is possible for fdhost.exe or sqlservr.exe to run low on memory or to run out of memory.</span></span> <span data-ttu-id="8a8e4-147">Wenn das Protokoll der Volltextdurchforstung zeigt, dass fdhost.exe häufig neu gestartet oder dass Fehlercode 8007008 zurückgegeben wird, bedeutet dies, dass für einen der Prozesse kein Speicher mehr verfügbar ist.</span><span class="sxs-lookup"><span data-stu-id="8a8e4-147">If the full-text crawl log shows that fdhost.exe is being restarted often or that error code 8007008 is being returned it means one of these processes is running out of memory.</span></span> <span data-ttu-id="8a8e4-148">Wenn fdhost.exe Dumps erzeugt, insbesondere auf großen Multi-CPU-Computern, steht möglicherweise nicht genügend Arbeitsspeicher zur Verfügung.</span><span class="sxs-lookup"><span data-stu-id="8a8e4-148">If fdhost.exe is producing dumps, particularly on large, multi-CPU computers, it might be running out of memory.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="8a8e4-149">Informationen zu Arbeitsspeicherpuffern, die von einer Volltextdurchforstung verwendet werden, finden Sie unter [sys.dm_fts_memory_buffers &#40;Transact-SQL&#41;](/sql/relational-databases/system-dynamic-management-views/sys-dm-fts-memory-buffers-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="8a8e4-149">To obtain information about memory buffers used by a full-text crawl, see [sys.dm_fts_memory_buffers &#40;Transact-SQL&#41;](/sql/relational-databases/system-dynamic-management-views/sys-dm-fts-memory-buffers-transact-sql).</span></span>  
  
 <span data-ttu-id="8a8e4-150">Die folgenden Ursachen sind möglich:</span><span class="sxs-lookup"><span data-stu-id="8a8e4-150">The possible causes are as follows:</span></span>  
  
-   <span data-ttu-id="8a8e4-151">Wenn der physische Speicher, der während einer vollständigen Auffüllung verfügbar ist, 0 (null) ist, kann es sein, dass der [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] -Pufferpool den größten Teil des physischen Speichers des Systems belegt.</span><span class="sxs-lookup"><span data-stu-id="8a8e4-151">If amount of physical memory that is available during a full population is zero, the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] buffer pool might be consuming most of the physical memory on the system.</span></span>  
  
     <span data-ttu-id="8a8e4-152">Der Prozess "sqlservr.exe" versucht, den gesamten verfügbaren Speicher für den Pufferpool bis zum konfigurierten maximalen Serverarbeitsspeicher für sich zu beanspruchen.</span><span class="sxs-lookup"><span data-stu-id="8a8e4-152">The sqlservr.exe process tries to grab all available memory for the buffer pool, up to the configured maximum server memory.</span></span> <span data-ttu-id="8a8e4-153">Wenn die `max server memory`-Zuordnung zu groß ist, können Probleme aufgrund ungenügenden Arbeitsspeichers und Fehler bei der Zuordnung von gemeinsam genutzten Speicherbereich für den Prozess "fdhost.exe" auftreten.</span><span class="sxs-lookup"><span data-stu-id="8a8e4-153">If the `max server memory` allocation is too large, out-of-memory conditions and failure to allocate shared memory can occur for the fdhost.exe process.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="8a8e4-154">Während einer Volltextauffüllung können auf Multi-CPU-Computern Konflikte zwischen fdhost.exe oder sqlservr.exe um den Pufferpoolarbeitsspeicher auftreten.</span><span class="sxs-lookup"><span data-stu-id="8a8e4-154">During a full-text population on a multi-CPU computer, contention for the buffer pool memory can occur between fdhost.exe or sqlservr.exe.</span></span> <span data-ttu-id="8a8e4-155">Der daraus resultierende Mangel an gemeinsam genutztem Speicherbereich verursacht Batchwiederholungen, Arbeitsspeicherüberlastung und Dumps durch den Prozess "fdhost.exe".</span><span class="sxs-lookup"><span data-stu-id="8a8e4-155">The resulting lack of shared memory causes batch retries, memory thrashing, and dumps by the fdhost.exe process.</span></span>  
  
     <span data-ttu-id="8a8e4-156">Sie können dieses Problem beheben, indem Sie den Wert `max server memory` des [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]-Pufferpools entsprechend anpassen.</span><span class="sxs-lookup"><span data-stu-id="8a8e4-156">You can solve this problem by setting the `max server memory` value of the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] buffer pool appropriately.</span></span> <span data-ttu-id="8a8e4-157">Weitere Informationen finden Sie unter "Schätzen der Arbeitsspeicheranforderungen des Filterdaemon-Hostprozesses (fdhost.exe)" weiter unten in diesem Thema.</span><span class="sxs-lookup"><span data-stu-id="8a8e4-157">For more information, see "Estimating the Memory Requirements of the Filter Daemon Host Process (fdhost.exe)," later in this topic.</span></span> <span data-ttu-id="8a8e4-158">Möglicherweise ist es auch hilfreich, die verwendete Batchgröße für die Volltextindizierung zu reduzieren.</span><span class="sxs-lookup"><span data-stu-id="8a8e4-158">Reducing the batch size used for full-text indexing may also help.</span></span>  
  
-   <span data-ttu-id="8a8e4-159">Ein Auslagerungsproblem</span><span class="sxs-lookup"><span data-stu-id="8a8e4-159">A paging issue</span></span>  
  
     <span data-ttu-id="8a8e4-160">Eine zu kleine Auslagerungsdatei, z. B. wenn ein System über eine kleine Auslagerungsdatei mit eingeschränkter Vergrößerung verfügt, kann ebenfalls dazu führen, dass fdhost.exe oder sqlservr.exe nicht mehr auf genügend Arbeitsspeicher zugreifen können.</span><span class="sxs-lookup"><span data-stu-id="8a8e4-160">Insufficient page-file size, such as on a system that has a small page file with restricted growth, can also cause the fdhost.exe or sqlservr.exe to run out of memory.</span></span>  
  
     <span data-ttu-id="8a8e4-161">Wenn die Crawlprotokolle keine speicherbezogenen Fehler anzeigen, ist die Leistung wahrscheinlich aufgrund zu vieler Auslagerungen beeinträchtigt.</span><span class="sxs-lookup"><span data-stu-id="8a8e4-161">If the crawl logs do not indicate any memory-related failures, it is likely that performance is slow due to excessive paging.</span></span>  
  
  
  
### <a name="estimating-the-memory-requirements-of-the-filter-daemon-host-process-fdhostexe"></a><span data-ttu-id="8a8e4-162">Schätzen der Arbeitsspeicheranforderungen des Filterdaemon-Hostprozesses (fdhost.exe)</span><span class="sxs-lookup"><span data-stu-id="8a8e4-162">Estimating the Memory Requirements of the Filter Daemon Host Process (fdhost.exe)</span></span>  
 <span data-ttu-id="8a8e4-163">Der vom fdhost.exe-Prozess für eine Auffüllung benötigte Arbeitsspeicher hängt hauptsächlich von den verwendeten Volltext-Crawlbereichen, der Größe des Inbound Shared Memory (ISM) und der maximalen Anzahl von ISM-Instanzen ab.</span><span class="sxs-lookup"><span data-stu-id="8a8e4-163">The amount of memory required by the fdhost.exe process for a population depends mainly on the number of full-text crawl ranges it uses, the size of inbound shared memory (ISM), and the maximum number of ISM instances.</span></span>  
  
 <span data-ttu-id="8a8e4-164">Der vom Filterdaemonhost verwendete Arbeitsspeicher (in Bytes) kann mit der folgenden Formel ungefähr geschätzt werden:</span><span class="sxs-lookup"><span data-stu-id="8a8e4-164">The amount of memory (in bytes) consumed by the filter daemon host can be roughly estimated by using the following formula:</span></span>  
  
 <span data-ttu-id="8a8e4-165">*number_of_crawl_ranges* \` ism_size '*max_outstanding_isms* \* 2</span><span class="sxs-lookup"><span data-stu-id="8a8e4-165">*number_of_crawl_ranges* \`ism_size\`*max_outstanding_isms*\* 2</span></span>  
  
 <span data-ttu-id="8a8e4-166">Die Standardwerte der Variablen in der vorangehenden Formel lauten wie folgt:</span><span class="sxs-lookup"><span data-stu-id="8a8e4-166">The default values of the variables in the preceding formula are as follows:</span></span>  
  
|<span data-ttu-id="8a8e4-167">**Variable**</span><span class="sxs-lookup"><span data-stu-id="8a8e4-167">**Variable**</span></span>|<span data-ttu-id="8a8e4-168">**Standardwert**</span><span class="sxs-lookup"><span data-stu-id="8a8e4-168">**Default value**</span></span>|  
|------------------|-----------------------|  
|<span data-ttu-id="8a8e4-169">*number_of_crawl_ranges*</span><span class="sxs-lookup"><span data-stu-id="8a8e4-169">*number_of_crawl_ranges*</span></span>|<span data-ttu-id="8a8e4-170">Die Anzahl der CPUs</span><span class="sxs-lookup"><span data-stu-id="8a8e4-170">The number of CPUs</span></span>|  
|<span data-ttu-id="8a8e4-171">*ism_size*</span><span class="sxs-lookup"><span data-stu-id="8a8e4-171">*ism_size*</span></span>|<span data-ttu-id="8a8e4-172">1 MB für x86-Computer</span><span class="sxs-lookup"><span data-stu-id="8a8e4-172">1 MB for x86 computers</span></span><br /><br /> <span data-ttu-id="8a8e4-173">4 MB, 8 MB oder 16 MB für x64-Computer, abhängig vom gesamten physischen Arbeitsspeicher</span><span class="sxs-lookup"><span data-stu-id="8a8e4-173">4 MB, 8 MB, or 16MB for x64 computers, depending on the total physical memory</span></span>|  
|<span data-ttu-id="8a8e4-174">*max_outstanding_isms*</span><span class="sxs-lookup"><span data-stu-id="8a8e4-174">*max_outstanding_isms*</span></span>|<span data-ttu-id="8a8e4-175">25 für x86-Computer</span><span class="sxs-lookup"><span data-stu-id="8a8e4-175">25 for x86 computers</span></span><br /><br /> <span data-ttu-id="8a8e4-176">5 für x64-Computer</span><span class="sxs-lookup"><span data-stu-id="8a8e4-176">5 for x64 computers</span></span>|  
  
 <span data-ttu-id="8a8e4-177">Die folgende Tabelle enthält Richtlinien zum Schätzen der Arbeitsspeicheranforderungen von fdhost.exe.</span><span class="sxs-lookup"><span data-stu-id="8a8e4-177">The following table presents guidelines about how to estimate the memory requirements of fdhost.exe.</span></span> <span data-ttu-id="8a8e4-178">Die Formeln in dieser Tabelle verwenden die folgenden Werte:</span><span class="sxs-lookup"><span data-stu-id="8a8e4-178">The formulas in this table use the following values:</span></span>  
  
-   <span data-ttu-id="8a8e4-179">*F*, eine Schätzung des Arbeitsspeichers, den „fdhost.exe“ (in MB) benötigt.</span><span class="sxs-lookup"><span data-stu-id="8a8e4-179">*F*, which is an estimate of memory needed by fdhost.exe (in MB).</span></span>  
  
-   <span data-ttu-id="8a8e4-180">*T*, der gesamte physische Speicher, der für das System (in MB) verfügbar ist.</span><span class="sxs-lookup"><span data-stu-id="8a8e4-180">*T*, which is the total physical memory available on the system (in MB).</span></span>  
  
-   <span data-ttu-id="8a8e4-181">*M*, die optimale `max server memory` Einstellung.</span><span class="sxs-lookup"><span data-stu-id="8a8e4-181">*M*, which is the optimal `max server memory` setting.</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="8a8e4-182">Wichtige Informationen zu den Formeln finden Sie unten unter <sup>1</sup>, <sup>2</sup>und <sup>3</sup>.</span><span class="sxs-lookup"><span data-stu-id="8a8e4-182">For essential information about the formulas, see <sup>1</sup>, <sup>2</sup>, and <sup>3</sup>, below.</span></span>  
  
|<span data-ttu-id="8a8e4-183">Platform</span><span class="sxs-lookup"><span data-stu-id="8a8e4-183">Platform</span></span>|<span data-ttu-id="8a8e4-184">Schätzen der fdhost.exe Arbeitsspeicher Anforderungen in MB-*F*<sup>1</sup></span><span class="sxs-lookup"><span data-stu-id="8a8e4-184">Estimating fdhost.exe memory requirements in MB-*F*<sup>1</sup></span></span>|<span data-ttu-id="8a8e4-185">Formel zum Berechnen des maximalen Server Arbeitsspeichers-*M*<sup>2</sup></span><span class="sxs-lookup"><span data-stu-id="8a8e4-185">Formula for calculating max server memory-*M*<sup>2</sup></span></span>|  
|--------------|---------------------------------------------------------------------|---------------------------------------------------------------|  
|<span data-ttu-id="8a8e4-186">x86</span><span class="sxs-lookup"><span data-stu-id="8a8e4-186">x86</span></span>|<span data-ttu-id="8a8e4-187">_F_ **=** _Anzahl der_ Durchforstungs Bereiche **&#42;** 50</span><span class="sxs-lookup"><span data-stu-id="8a8e4-187">_F_ **=** _Number of crawl ranges_ **&#42;** 50</span></span>|<span data-ttu-id="8a8e4-188">_M_ **= minimal (** _T_ **,** 2000 \*\*)- *`F`* - \*\* 500</span><span class="sxs-lookup"><span data-stu-id="8a8e4-188">_M_ **=minimum(** _T_ **,** 2000 **)-*`F`*-** 500</span></span>|  
|<span data-ttu-id="8a8e4-189">x64</span><span class="sxs-lookup"><span data-stu-id="8a8e4-189">x64</span></span>|<span data-ttu-id="8a8e4-190">_F_ **=** _Anzahl der_ Durchforstungs Bereiche **&#42;** 10 **&#42;** 8</span><span class="sxs-lookup"><span data-stu-id="8a8e4-190">_F_ **=** _Number of crawl ranges_ **&#42;** 10 **&#42;** 8</span></span>|<span data-ttu-id="8a8e4-191">_M_ **=** _T_ **-** _F_ **-** 500</span><span class="sxs-lookup"><span data-stu-id="8a8e4-191">_M_ **=** _T_ **-** _F_ **-** 500</span></span>|  
  
 <span data-ttu-id="8a8e4-192"><sup>1</sup> wenn mehrere vollständige Auffüllungen ausgeführt werden, berechnen Sie die fdhost.exe Arbeitsspeicher Anforderungen separat, als *F1*, *F2*usw.</span><span class="sxs-lookup"><span data-stu-id="8a8e4-192"><sup>1</sup> If multiple full populations are in progress, calculate the fdhost.exe memory requirements of each separately, as *F1*, *F2*, and so forth.</span></span> <span data-ttu-id="8a8e4-193">Berechnen Sie anschließend *M* als _T_ **-** sigma **(** _F_i **)** .</span><span class="sxs-lookup"><span data-stu-id="8a8e4-193">Then calculate *M* as _T_**-** sigma **(**_F_i **)**.</span></span>  
  
 <span data-ttu-id="8a8e4-194"><sup>2</sup> 500 MB ist eine Schätzung des Arbeitsspeichers, der von anderen Prozessen im System benötigt wird.</span><span class="sxs-lookup"><span data-stu-id="8a8e4-194"><sup>2</sup> 500 MB is an estimate of the memory required by other processes in the system.</span></span> <span data-ttu-id="8a8e4-195">Wenn das System noch weitere Aufgaben durchführt, sollten Sie diesen Wert entsprechend erhöhen.</span><span class="sxs-lookup"><span data-stu-id="8a8e4-195">If the system is doing additional work, increase this value accordingly.</span></span>  
  
 <span data-ttu-id="8a8e4-196"><sup>3</sup> . für x64-Plattformen wird *ism_size* als 8 MB angenommen.</span><span class="sxs-lookup"><span data-stu-id="8a8e4-196"><sup>3</sup> .*ism_size* is assumed to be 8 MB for x64 platforms.</span></span>  
  
 <span data-ttu-id="8a8e4-197">**Beispiel: Schätzen der Arbeitsspeicheranforderungen von "fdhost.exe"**</span><span class="sxs-lookup"><span data-stu-id="8a8e4-197">**Example: Estimating the Memory Requirements of fdhost.exe**</span></span>  
  
 <span data-ttu-id="8a8e4-198">Dieses Beispiel gilt für einen AMD64-Computer mit 8 GB Arbeitsspeicher und 4 Dual Core-Prozessoren.</span><span class="sxs-lookup"><span data-stu-id="8a8e4-198">This example is for an AMD64 computer that has 8GM of RAM and 4 dual core processors.</span></span> <span data-ttu-id="8a8e4-199">Die erste Berechnung schätzt den Speicher, der von „fdhost.exe“ benötigt wird: *F*.</span><span class="sxs-lookup"><span data-stu-id="8a8e4-199">The first calculation estimates of memory needed by fdhost.exe-*F*.</span></span> <span data-ttu-id="8a8e4-200">Die Anzahl der Durchforstungsbereiche beträgt `8`.</span><span class="sxs-lookup"><span data-stu-id="8a8e4-200">The number of crawl ranges is `8`.</span></span>  
  
 `F = 8*10*8=640`  
  
 <span data-ttu-id="8a8e4-201">Die nächste Berechnung erhält den optimalen Wert für `max server memory` - *M*.</span><span class="sxs-lookup"><span data-stu-id="8a8e4-201">The next calculation obtains the optimal value for `max server memory`-*M*.</span></span> <span data-ttu-id="8a8e4-202">*T*Der gesamte auf diesem System verfügbare physische Arbeitsspeicher in MB-*T*-ist `8192` .</span><span class="sxs-lookup"><span data-stu-id="8a8e4-202">*T*he total physical memory available on this system in MB-*T*-is `8192`.</span></span>  
  
 `M = 8192-640-500=7052`  
  
 <span data-ttu-id="8a8e4-203">**Beispiel: Festlegen des maximalen Serverarbeitsspeichers**</span><span class="sxs-lookup"><span data-stu-id="8a8e4-203">**Example: Setting max server memory**</span></span>  
  
 <span data-ttu-id="8a8e4-204">In diesem Beispiel werden die Anweisungen [sp_configure](/sql/relational-databases/system-stored-procedures/sp-configure-transact-sql) und [RECONFIGURE](/sql/t-sql/language-elements/reconfigure-transact-sql) verwendet, um [!INCLUDE[tsql](../../../includes/tsql-md.md)] `max server memory` auf den Wert festzulegen, der im vorherigen Beispiel für *M* berechnet wurde `7052` :</span><span class="sxs-lookup"><span data-stu-id="8a8e4-204">This example uses the [sp_configure](/sql/relational-databases/system-stored-procedures/sp-configure-transact-sql) and [RECONFIGURE](/sql/t-sql/language-elements/reconfigure-transact-sql)[!INCLUDE[tsql](../../../includes/tsql-md.md)] statements to set `max server memory` to the value calculated for *M* in the preceding example, `7052`:</span></span>  
  
```  
USE master;  
GO  
EXEC sp_configure 'max server memory', 7052;  
GO  
RECONFIGURE;  
GO  
```  
  
 <span data-ttu-id="8a8e4-205">**So legen Sie die Konfigurationsoption "max server memory" fest**</span><span class="sxs-lookup"><span data-stu-id="8a8e4-205">**To set the max server memory configuration option**</span></span>  
  
-   [<span data-ttu-id="8a8e4-206">Serverkonfigurationsoptionen für den Serverarbeitsspeicher</span><span class="sxs-lookup"><span data-stu-id="8a8e4-206">Server Memory Server Configuration Options</span></span>](../../database-engine/configure-windows/server-memory-server-configuration-options.md)  
  
  
  
### <a name="factors-that-can-reduce-cpu-consumption"></a><span data-ttu-id="8a8e4-207">Faktoren, die den CPU-Verbrauch reduzieren können</span><span class="sxs-lookup"><span data-stu-id="8a8e4-207">Factors that Can Reduce CPU Consumption</span></span>  
 <span data-ttu-id="8a8e4-208">Es ist wahrscheinlich, dass die Leistung von vollständigen Auffüllungen nicht optimal ist, wenn der mittlere CPU-Verbrauch weniger als 30 Prozent beträgt.</span><span class="sxs-lookup"><span data-stu-id="8a8e4-208">We expect that the performance of full populations is not optimal when the average CPU consumption is lower than about 30 percent.</span></span> <span data-ttu-id="8a8e4-209">In diesem Abschnitt werden einige Faktoren behandelt, die sich auf den CPU-Verbrauch auswirken.</span><span class="sxs-lookup"><span data-stu-id="8a8e4-209">This section discusses some factors that affect CPU consumption.</span></span>  
  
-   <span data-ttu-id="8a8e4-210">Langes Warten auf Seiten</span><span class="sxs-lookup"><span data-stu-id="8a8e4-210">High wait for pages</span></span>  
  
     <span data-ttu-id="8a8e4-211">Um herauszufinden, ob die Wartezeit für Seiten hoch ist, führen Sie die folgende [!INCLUDE[tsql](../../../includes/tsql-md.md)] -Anweisung aus:</span><span class="sxs-lookup"><span data-stu-id="8a8e4-211">To find out whether a page wait time is high, execute the following [!INCLUDE[tsql](../../../includes/tsql-md.md)] statement:</span></span>  
  
    ```  
    Execute SELECT TOP 10 * FROM sys.dm_os_wait_stats ORDER BY wait_time_ms DESC;  
    ```  
  
     <span data-ttu-id="8a8e4-212">In der folgenden Tabelle sind die relevanten Wartetypen aufgeführt.</span><span class="sxs-lookup"><span data-stu-id="8a8e4-212">The following table describes the wait types of interest here.</span></span>  
  
    |<span data-ttu-id="8a8e4-213">Wartetyp</span><span class="sxs-lookup"><span data-stu-id="8a8e4-213">Wait type</span></span>|<span data-ttu-id="8a8e4-214">BESCHREIBUNG</span><span class="sxs-lookup"><span data-stu-id="8a8e4-214">Description</span></span>|<span data-ttu-id="8a8e4-215">Mögliche Lösung</span><span class="sxs-lookup"><span data-stu-id="8a8e4-215">Possible resolution</span></span>|  
    |---------------|-----------------|-------------------------|  
    |<span data-ttu-id="8a8e4-216">PAGEIO_LATCH_SH (_EX oder _UP)</span><span class="sxs-lookup"><span data-stu-id="8a8e4-216">PAGEIO_LATCH_SH (_EX or _UP)</span></span>|<span data-ttu-id="8a8e4-217">Dies kann auf einen E/A-Engpass hinweisen. In diesem Fall ist normalerweise auch eine hohe durchschnittliche Warteschlangenlänge des Datenträgers zu erkennen.</span><span class="sxs-lookup"><span data-stu-id="8a8e4-217">This could indicate an IO bottleneck, in which case you would typically also see a high average disk-queue length.</span></span>|<span data-ttu-id="8a8e4-218">Sie können den E/A-Engpass ggf. reduzieren, indem Sie den Volltextindex in eine andere Dateigruppe auf einem anderen Datenträger verschieben.</span><span class="sxs-lookup"><span data-stu-id="8a8e4-218">Moving the full-text index to a different filegroup on a different disk could help reduce the IO bottleneck.</span></span>|  
    |<span data-ttu-id="8a8e4-219">PAGELATCH_EX (oder _UP)</span><span class="sxs-lookup"><span data-stu-id="8a8e4-219">PAGELATCH_EX (or _UP)</span></span>|<span data-ttu-id="8a8e4-220">Dies kann auf eine hohe Zahl von Konflikten zwischen Threads hinweisen, die versuchen, in dieselbe Datenbankdatei zu schreiben.</span><span class="sxs-lookup"><span data-stu-id="8a8e4-220">This could indicate a lot of contention among threads that are trying to write to the same database file.</span></span>|<span data-ttu-id="8a8e4-221">Diese Konflikte können ggf. verringert werden, indem Sie Dateien der Dateigruppe hinzufügen, auf der sich der Volltextindex befindet.</span><span class="sxs-lookup"><span data-stu-id="8a8e4-221">Adding files to the filegroup on which the fulltext index resides could help alleviate such contention.</span></span>|  
  
     <span data-ttu-id="8a8e4-222">Weitere Informationen finden Sie unter [sys.dm_os_wait_stats &#40;Transact-SQL&#41;](/sql/relational-databases/system-dynamic-management-views/sys-dm-os-wait-stats-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="8a8e4-222">For more information, see [sys.dm_os_wait_stats &#40;Transact-SQL&#41;](/sql/relational-databases/system-dynamic-management-views/sys-dm-os-wait-stats-transact-sql).</span></span>  
  
-   <span data-ttu-id="8a8e4-223">Ineffizienzen beim Durchsuchen der Basistabelle</span><span class="sxs-lookup"><span data-stu-id="8a8e4-223">Inefficiencies in scanning the base table</span></span>  
  
     <span data-ttu-id="8a8e4-224">Eine vollständige Auffüllung durchsucht die Basistabelle, um Batches zu erzeugen.</span><span class="sxs-lookup"><span data-stu-id="8a8e4-224">A full population scans the base table to produce batches.</span></span> <span data-ttu-id="8a8e4-225">Dieses Durchsuchen der Tabelle kann in den folgenden Szenarios ineffizient sein:</span><span class="sxs-lookup"><span data-stu-id="8a8e4-225">This table scanning could be inefficient in the following scenarios:</span></span>  
  
    -   <span data-ttu-id="8a8e4-226">Wenn die Basistabelle über einen hohen Prozentsatz an Außerhalb-Spalten (out-of-row) verfügt, für die eine Volltextindizierung durchgeführt wird, kann das Durchsuchen der Basistabelle zum Erzeugen von Batches den Engpass bewirken.</span><span class="sxs-lookup"><span data-stu-id="8a8e4-226">If the base table has a high percentage of out-of-row columns that are being full-text indexed, scanning the base table to produce batches might be the bottleneck.</span></span> <span data-ttu-id="8a8e4-227">In diesem Fall kann es helfen, die kleineren Daten mithilfe von `varchar(max)` oder `nvarchar(max)` in die Zeilen zu verschieben.</span><span class="sxs-lookup"><span data-stu-id="8a8e4-227">In this case, moving the smaller data in-row using `varchar(max)` or `nvarchar(max)` might help.</span></span>  
  
    -   <span data-ttu-id="8a8e4-228">Wenn die Basistabelle stark fragmentiert ist, kann das Durchsuchen ggf. ineffizient sein.</span><span class="sxs-lookup"><span data-stu-id="8a8e4-228">If the base table is very fragmented, scanning might be inefficient.</span></span> <span data-ttu-id="8a8e4-229">Informationen zur Berechnung von Außerhalb-Spalten-Daten und zur Indexfragmentierung finden Sie unter [sys.dm_db_partition_stats &#40;Transact-SQL&#41;](/sql/relational-databases/system-dynamic-management-views/sys-dm-db-partition-stats-transact-sql) und [sys.dm_db_index_physical_stats &#40;Transact-SQL&#41;](/sql/relational-databases/system-dynamic-management-views/sys-dm-db-index-physical-stats-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="8a8e4-229">For information about computing out-of-row data and index fragmentation, see [sys.dm_db_partition_stats &#40;Transact-SQL&#41;](/sql/relational-databases/system-dynamic-management-views/sys-dm-db-partition-stats-transact-sql) and [sys.dm_db_index_physical_stats &#40;Transact-SQL&#41;](/sql/relational-databases/system-dynamic-management-views/sys-dm-db-index-physical-stats-transact-sql).</span></span>  
  
         <span data-ttu-id="8a8e4-230">Um die Fragmentierung zu reduzieren, können Sie den gruppierten Index neu organisieren oder neu erstellen.</span><span class="sxs-lookup"><span data-stu-id="8a8e4-230">To reduce fragmentation, you can reorganize or rebuild the clustered index.</span></span> <span data-ttu-id="8a8e4-231">Weitere Informationen finden Sie unter [Neuorganisieren und Neuerstellen von Indizes](../indexes/reorganize-and-rebuild-indexes.md).</span><span class="sxs-lookup"><span data-stu-id="8a8e4-231">For more information, see [Reorganize and Rebuild Indexes](../indexes/reorganize-and-rebuild-indexes.md).</span></span>  
  
  
  
##  <a name="troubleshooting-slow-indexing-performance-due-to-filters"></a><a name="filters"></a><span data-ttu-id="8a8e4-232">Problembehandlung bei langsamer Indizierungs Leistung aufgrund von Filtern</span><span class="sxs-lookup"><span data-stu-id="8a8e4-232">Troubleshooting Slow Indexing Performance Due to Filters</span></span>  
 <span data-ttu-id="8a8e4-233">Beim Auffüllen eines Volltextindexes werden von der Volltext-Engine zwei Arten von Filtern verwendet: Multithread-Filter und Filter mit einem einzigen Thread.</span><span class="sxs-lookup"><span data-stu-id="8a8e4-233">When populating a full-text index, the Full-Text Engine uses two types of filters: multithreaded and single-threaded.</span></span> <span data-ttu-id="8a8e4-234">Einige Dokumente, wie z. B. [!INCLUDE[msCoName](../../includes/msconame-md.md)] Word-Dokumente, werden mit einem Multithreadfilter gefiltert.</span><span class="sxs-lookup"><span data-stu-id="8a8e4-234">Some documents, such as [!INCLUDE[msCoName](../../includes/msconame-md.md)] Word documents, are filtered using a multithreaded filter.</span></span> <span data-ttu-id="8a8e4-235">Andere Dokumente, wie z. B. Adobe Acrobat PDF-Dokumente (Portable Document Format), werden hingegen mit einem Filter mit einem einzigen Thread gefiltert.</span><span class="sxs-lookup"><span data-stu-id="8a8e4-235">Other documents, such as Adobe Acrobat Portable Document Format (PDF) documents, are filtered using a single-threaded filter.</span></span>  
  
 <span data-ttu-id="8a8e4-236">Aus Sicherheitsgründen werden Filter mit Filterdaemon-Hostprozessen geladen.</span><span class="sxs-lookup"><span data-stu-id="8a8e4-236">For security reasons, filters are loaded by filter daemon host processes.</span></span> <span data-ttu-id="8a8e4-237">Eine Serverinstanz verwendet einen Multithreadprozess für alle Multithreadfilter und einen Singlethreadprozess für alle Filter mit einem einzigen Thread.</span><span class="sxs-lookup"><span data-stu-id="8a8e4-237">A server instance uses a multithreaded process for all multithreaded filters and a single-threaded process for all single-threaded filters.</span></span> <span data-ttu-id="8a8e4-238">Wenn in einem Dokument, für das ein Multithreadfilter verwendet wird, ein Dokument eingebettet ist, für das ein Filter mit einem einzigen Thread verwendet wird, startet die Volltext-Engine einen Singlethreadprozess für das eingebettete Dokument.</span><span class="sxs-lookup"><span data-stu-id="8a8e4-238">When a document that uses a multithreaded filter contains an embedded document that uses a single-threaded filter, the Full-Text Engine launches a single-threaded process for the embedded document.</span></span> <span data-ttu-id="8a8e4-239">Beispiel: Bei einem Word-Dokument, das ein PDF-Dokument enthält, verwendet die Volltext-Engine einen Multithreadprozess für den Inhalt des Word-Dokuments und einen Singlethreadprozess für den Inhalt des PDF-Dokuments.</span><span class="sxs-lookup"><span data-stu-id="8a8e4-239">For example, on encountering a Word document that contains a PDF document, the Full-Text Engine uses the multithreaded process for the Word content and launches a single-threaded process for the PDF content.</span></span> <span data-ttu-id="8a8e4-240">Ein Filter mit einem einzigen Thread funktioniert in dieser Umgebung jedoch möglicherweise nicht ordnungsgemäß und kann die Stabilität des Filterprozesses gefährden.</span><span class="sxs-lookup"><span data-stu-id="8a8e4-240">A single-threaded filter might not work well in this environment, however, and could destabilize the filtering process.</span></span> <span data-ttu-id="8a8e4-241">Unter bestimmten Umständen mit vielen eingebetteten Dokumenten kann dies zum Absturz des Filterprozesses führen.</span><span class="sxs-lookup"><span data-stu-id="8a8e4-241">In certain circumstances where such embedding is common, destabilization might lead to filtering-process crashes.</span></span> <span data-ttu-id="8a8e4-242">In diesem Fall verbindet die Volltext-Engine alle Dokumente, bei denen Fehler auftraten (z. B. ein Word-Dokument mit eingebettetem PDF-Inhalt), erneut mit dem Singlethread-Filterprozess.</span><span class="sxs-lookup"><span data-stu-id="8a8e4-242">When this occurs, the Full-Text Engine re-routes any failed document (for example, a Word document that contains embedded PDF content) to the single-threaded filtering process.</span></span> <span data-ttu-id="8a8e4-243">Kommt dies häufig vor, hat das eine Leistungsminderung des Volltextindizierungsprozesses zur Folge.</span><span class="sxs-lookup"><span data-stu-id="8a8e4-243">If re-routing occurs frequently, it results in performance degradation of the full-text indexing process.</span></span>  
  
 <span data-ttu-id="8a8e4-244">Sie müssen den Filter für das Containerdokument (hier das Word-Dokument) als Filter mit einem einzigen Thread kennzeichnen, um dieses Problem zu umgehen.</span><span class="sxs-lookup"><span data-stu-id="8a8e4-244">To work around this problem, mark the filter for the container document (Word in this case) as a single-threaded filter.</span></span> <span data-ttu-id="8a8e4-245">Sie können den Filterregistrierungswert ändern, um einen gegebenen Filter als Filter mit einem einzigen Thread zu kennzeichnen.</span><span class="sxs-lookup"><span data-stu-id="8a8e4-245">You can change the filter registry value to mark a given filter as a single-threaded filter.</span></span> <span data-ttu-id="8a8e4-246">Um einen Filter als Filter mit einem einzigen Thread zu kennzeichnen, müssen Sie den Registrierungs Wert **ThreadingModel** für den Filter auf festlegen `Apartment Threaded` .</span><span class="sxs-lookup"><span data-stu-id="8a8e4-246">To mark a filter as a single-threaded filter, you need to set the **ThreadingModel** registry value for the filter to `Apartment Threaded`.</span></span> <span data-ttu-id="8a8e4-247">Informationen zu Singlethreadapartments finden Sie im Whitepaper [Understanding and Using COM Threading Models](https://go.microsoft.com/fwlink/?LinkId=209159)(Grundlegendes zur Verwendung von COM-Threadingmodellen).</span><span class="sxs-lookup"><span data-stu-id="8a8e4-247">For information about single-threaded apartments, see the white paper [Understanding and Using COM Threading Models](https://go.microsoft.com/fwlink/?LinkId=209159).</span></span>  
  
  
  
## <a name="see-also"></a><span data-ttu-id="8a8e4-248">Weitere Informationen</span><span class="sxs-lookup"><span data-stu-id="8a8e4-248">See Also</span></span>  
 <span data-ttu-id="8a8e4-249">[Serverkonfigurationsoptionen für den Serverarbeitsspeicher](../../database-engine/configure-windows/server-memory-server-configuration-options.md) </span><span class="sxs-lookup"><span data-stu-id="8a8e4-249">[Server Memory Server Configuration Options](../../database-engine/configure-windows/server-memory-server-configuration-options.md) </span></span>  
 <span data-ttu-id="8a8e4-250">[Max. Bereich für Volltextdurchforstung (Serverkonfigurationsoption)](../../database-engine/configure-windows/max-full-text-crawl-range-server-configuration-option.md) </span><span class="sxs-lookup"><span data-stu-id="8a8e4-250">[max full-text crawl range Server Configuration Option](../../database-engine/configure-windows/max-full-text-crawl-range-server-configuration-option.md) </span></span>  
 <span data-ttu-id="8a8e4-251">[Auffüllen von Volltextindizes](populate-full-text-indexes.md) </span><span class="sxs-lookup"><span data-stu-id="8a8e4-251">[Populate Full-Text Indexes](populate-full-text-indexes.md) </span></span>  
 <span data-ttu-id="8a8e4-252">[Erstellen und Verwalten von Volltextindizes](create-and-manage-full-text-indexes.md) </span><span class="sxs-lookup"><span data-stu-id="8a8e4-252">[Create and Manage Full-Text Indexes](create-and-manage-full-text-indexes.md) </span></span>  
 <span data-ttu-id="8a8e4-253">[sys.dm_fts_memory_buffers &#40;Transact-SQL&#41;](/sql/relational-databases/system-dynamic-management-views/sys-dm-fts-memory-buffers-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="8a8e4-253">[sys.dm_fts_memory_buffers &#40;Transact-SQL&#41;](/sql/relational-databases/system-dynamic-management-views/sys-dm-fts-memory-buffers-transact-sql) </span></span>  
 <span data-ttu-id="8a8e4-254">[sys.dm_fts_memory_pools &#40;Transact-SQL&#41;](/sql/relational-databases/system-dynamic-management-views/sys-dm-fts-memory-pools-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="8a8e4-254">[sys.dm_fts_memory_pools &#40;Transact-SQL&#41;](/sql/relational-databases/system-dynamic-management-views/sys-dm-fts-memory-pools-transact-sql) </span></span>  
 [<span data-ttu-id="8a8e4-255">Behandeln von Problemen mit der Volltextindizierung</span><span class="sxs-lookup"><span data-stu-id="8a8e4-255">Troubleshoot Full-Text Indexing</span></span>](troubleshoot-full-text-indexing.md)  
  
  
