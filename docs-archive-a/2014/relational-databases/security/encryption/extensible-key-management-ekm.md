---
title: Erweiterbare Schlüsselverwaltung (EKM) | Microsoft-Dokumentation
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: security
ms.topic: conceptual
helpviewer_keywords:
- Key Management
- Extensible Key Management
- EKM, described
ms.assetid: 9bfaf500-2d1e-4c02-b041-b8761a9e695b
author: jaszymas
ms.author: jaszymas
ms.openlocfilehash: 4fc9b002b57f8118494709f8fe27a8b19ce28d8e
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 08/04/2020
ms.locfileid: "87700935"
---
# <a name="extensible-key-management-ekm"></a><span data-ttu-id="42552-102">Erweiterbare Schlüsselverwaltung (Extensible Key Management, EKM)</span><span class="sxs-lookup"><span data-stu-id="42552-102">Extensible Key Management (EKM)</span></span>
  [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] <span data-ttu-id="42552-103">stellt Funktionen zur Datenverschlüsselung zusammen mit der *erweiterbaren Schlüsselverwaltung* (Extensible Key Management, EKM) bereit. Dabei wird der Anbieter *Microsoft Cryptographic API* (MSCAPI) zur Verschlüsselung und Schlüsselgenerierung verwendet.</span><span class="sxs-lookup"><span data-stu-id="42552-103">provides data encryption capabilities together with *Extensible Key Management* (EKM), using the *Microsoft Cryptographic API* (MSCAPI) provider for encryption and key generation.</span></span> <span data-ttu-id="42552-104">Verschlüsselungsschlüssel für die Daten- und Schlüsselverschlüsselung werden in temporären Schlüsselcontainern erstellt und müssen vom Anbieter exportiert werden, bevor sie in der Datenbank gespeichert werden.</span><span class="sxs-lookup"><span data-stu-id="42552-104">Encryption keys for data and key encryption are created in transient key containers, and they must be exported from a provider before they are stored in the database.</span></span> <span data-ttu-id="42552-105">Dieser Ansatz ermöglicht eine Schlüsselverwaltung mit einer Verschlüsselungsschlüsselhierarchie und Schlüsselsicherung durch [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="42552-105">This approach enables key management that includes an encryption key hierarchy and key backup, to be handled by [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span></span>  
  
 <span data-ttu-id="42552-106">Da die Einhaltung behördlicher Bestimmungen und der Datenschutz immer wichtiger werden, nutzen Organisationen die Verschlüsselung als Lösung für eine "tiefgreifende Verteidigung".</span><span class="sxs-lookup"><span data-stu-id="42552-106">With the growing demand for regulatory compliance and concern for data privacy, organizations are taking advantage of encryption as a way to provide a "defense in depth" solution.</span></span> <span data-ttu-id="42552-107">Dieser Lösungsansatz ist jedoch häufig mit den Verwaltungstools für die Datenbankverschlüsselung alleine nicht durchführbar.</span><span class="sxs-lookup"><span data-stu-id="42552-107">This approach is often impractical using only database encryption management tools.</span></span> <span data-ttu-id="42552-108">Hardwarehersteller bieten Produkte an, die die Schlüsselverwaltung in Unternehmen mittels *Hardwaresicherheitsmodulen* (HSM) umsetzen.</span><span class="sxs-lookup"><span data-stu-id="42552-108">Hardware vendors provide products that address enterprise key management by using *Hardware Security Modules* (HSM).</span></span> <span data-ttu-id="42552-109">HSM-Geräte speichern die Verschlüsselungsschlüssel auf Hardware- oder Softwaremodulen.</span><span class="sxs-lookup"><span data-stu-id="42552-109">HSM devices store encryption keys on hardware or software modules.</span></span> <span data-ttu-id="42552-110">Dies ist eine sicherere Lösung, da die Verschlüsselungsschlüssel von den Verschlüsselungsdaten getrennt werden.</span><span class="sxs-lookup"><span data-stu-id="42552-110">This is a more secure solution because the encryption keys do not reside with encryption data.</span></span>  
  
 <span data-ttu-id="42552-111">Etliche Anbieter liefern Hardwaresicherheitsmodule für die Schlüsselverwaltung und die Verschlüsselungsbeschleunigung.</span><span class="sxs-lookup"><span data-stu-id="42552-111">A number of vendors offer HSM for both key management and encryption acceleration.</span></span> <span data-ttu-id="42552-112">HSM-Geräte verwenden Hardwareschnittstellen, bei denen ein Serverprozess als Mittler zwischen einer Anwendung und einem HSM fungiert.</span><span class="sxs-lookup"><span data-stu-id="42552-112">HSM devices use hardware interfaces with a server process as an intermediary between an application and an HSM.</span></span> <span data-ttu-id="42552-113">Darüber hinaus implementieren die Hersteller MSCAPI-Anbieter mit ihren Modulen, wobei es sich um Hardware oder Software handeln kann.</span><span class="sxs-lookup"><span data-stu-id="42552-113">Vendors also implement MSCAPI providers over their modules, which might be hardware or software.</span></span> <span data-ttu-id="42552-114">MSCAPI bietet jedoch häufig nur einen Teil der Funktionen an, die von einem HSM bereitgestellt werden.</span><span class="sxs-lookup"><span data-stu-id="42552-114">MSCAPI often offers only a subset of the functionality that is offered by an HSM.</span></span> <span data-ttu-id="42552-115">Die Hersteller können außerdem Verwaltungssoftware für Hardwaresicherheitsmodule, Schlüsselkonfiguration und Schlüsselzugriff bereitstellen.</span><span class="sxs-lookup"><span data-stu-id="42552-115">Vendors can also provide management software for HSM, key configuration, and key access.</span></span>  
  
 <span data-ttu-id="42552-116">Die HSM-Implementierungen unterscheiden sich zwischen den Herstellern, und für die Verwendung mit [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] ist eine gemeinsame Schnittstelle erforderlich.</span><span class="sxs-lookup"><span data-stu-id="42552-116">HSM implementations vary from vendor to vendor, and to use them with [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] requires a common interface.</span></span> <span data-ttu-id="42552-117">Diese Schnittstelle wird zwar von der MSCAPI bereitgestellt, sie unterstützt allerdings nur einen Teil der HSM-Funktionen.</span><span class="sxs-lookup"><span data-stu-id="42552-117">Although the MSCAPI provides this interface, it supports only a subset of the HSM features.</span></span> <span data-ttu-id="42552-118">Darüber hinaus gibt es noch weitere Einschränkungen: Symmetrische Schlüssel können beispielsweise nicht durch das System selbst persistent gemacht werden, und es fehlt eine sitzungsgerichtete Unterstützung.</span><span class="sxs-lookup"><span data-stu-id="42552-118">It also has other limitations, such as the inability to natively persist symmetric keys, and a lack of session-oriented support.</span></span>  
  
 <span data-ttu-id="42552-119">Durch die erweiterbare Schlüsselverwaltung in [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] können EKM-/HSM-Drittanbieter ihre Module bei [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]registrieren.</span><span class="sxs-lookup"><span data-stu-id="42552-119">The [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Extensible Key Management enables third-party EKM/HSM vendors to register their modules in [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="42552-120">Nach der Registrierung können [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] -Benutzer die auf den EKM-Modulen gespeicherten Verschlüsselungsschlüssel verwenden.</span><span class="sxs-lookup"><span data-stu-id="42552-120">When registered, [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] users can use the encryption keys stored on EKM modules.</span></span> <span data-ttu-id="42552-121">Auf diese Weise kann [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] die von diesen Modulen unterstützten erweiterten Verschlüsselungsfunktionen wie die Massenverschlüsselung und -entschlüsselung und Schlüsselverwaltungsfunktionen wie die Schlüsselablaufzeit und die Schlüsselrotation nutzen.</span><span class="sxs-lookup"><span data-stu-id="42552-121">This enables [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] to access the advanced encryption features these modules support such as bulk encryption and decryption, and key management functions such as key aging and key rotation.</span></span>  
  
 <span data-ttu-id="42552-122">Beim Ausführen von [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] in einer Azure-VM können von [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Schlüssel verwendet werden, die im [Azure-Schlüsseltresor](https://go.microsoft.com/fwlink/?LinkId=521401)gespeichert sind.</span><span class="sxs-lookup"><span data-stu-id="42552-122">When running [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] in an Azure VM, [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] can use keys stored in the [Azure Key Vault](https://go.microsoft.com/fwlink/?LinkId=521401).</span></span> <span data-ttu-id="42552-123">Weitere Informationen finden Sie im Thema [Erweiterbare Schlüsselverwaltung mit Azure Key Vault &#40;SQL Server&#41;](extensible-key-management-using-azure-key-vault-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="42552-123">For more information, see [Extensible Key Management Using Azure Key Vault &#40;SQL Server&#41;](extensible-key-management-using-azure-key-vault-sql-server.md).</span></span>  
  
## <a name="ekm-configuration"></a><span data-ttu-id="42552-124">EKM-Konfiguration</span><span class="sxs-lookup"><span data-stu-id="42552-124">EKM Configuration</span></span>  
 <span data-ttu-id="42552-125">Die erweiterbare Schlüsselverwaltung wird nicht in jeder Edition von [!INCLUDE[msCoName](../../../includes/msconame-md.md)][!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="42552-125">Extensible Key Management is not available in every edition of [!INCLUDE[msCoName](../../../includes/msconame-md.md)][!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="42552-126">Eine Liste der Funktionen, die von den Editionen von [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]unterstützt werden, finden Sie unter [Features Supported by the Editions of SQL Server 2014](../../../getting-started/features-supported-by-the-editions-of-sql-server-2014.md).</span><span class="sxs-lookup"><span data-stu-id="42552-126">For a list of features that are supported by the editions of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)], see [Features Supported by the Editions of SQL Server 2014](../../../getting-started/features-supported-by-the-editions-of-sql-server-2014.md).</span></span>  
  
 <span data-ttu-id="42552-127">Standardmäßig ist die EKM deaktiviert.</span><span class="sxs-lookup"><span data-stu-id="42552-127">By default, Extensible Key Management is off.</span></span> <span data-ttu-id="42552-128">Wenn Sie die Funktion aktivieren möchten, verwenden Sie wie im folgenden Beispiel dargestellt den sp_configure-Befehl, der über folgende Option und folgenden Wert verfügt:</span><span class="sxs-lookup"><span data-stu-id="42552-128">To enable this feature, use the sp_configure command that has the following option and value, as in the following example:</span></span>  
  
```  
sp_configure 'show advanced', 1  
GO  
RECONFIGURE  
GO  
sp_configure 'EKM provider enabled', 1  
GO  
RECONFIGURE  
GO  
```  
  
> [!NOTE]  
>  <span data-ttu-id="42552-129">Wenn Sie den sp_configure-Befehl für diese Option in [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] -Editionen verwenden, die EKM nicht unterstützen, wird ein Fehler angezeigt.</span><span class="sxs-lookup"><span data-stu-id="42552-129">If you use the sp_configure command for this option on editions of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] that do not support EKM, you will receive an error.</span></span>  
  
 <span data-ttu-id="42552-130">Wenn Sie die Funktion deaktivieren möchten, legen Sie den Wert auf **0**fest.</span><span class="sxs-lookup"><span data-stu-id="42552-130">To disable the feature, set the value to **0**.</span></span> <span data-ttu-id="42552-131">Weitere Informationen zum Festlegen von Serveroptionen finden Sie unter [sp_configure &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-configure-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="42552-131">For more information about how to set server options, see [sp_configure &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-configure-transact-sql).</span></span>  
  
## <a name="how-to-use-ekm"></a><span data-ttu-id="42552-132">So verwenden Sie die erweiterbare Schlüsselverwaltung</span><span class="sxs-lookup"><span data-stu-id="42552-132">How to Use EKM</span></span>  
 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] <span data-ttu-id="42552-133">Extensible Key Management ermöglicht es, dass die Verschlüsselungsschlüssel, die die Datenbankdateien schützen, auf einem separaten Medium wie einer Smartcard, einem USB-Gerät oder einem EKM-/HSM-Modul gespeichert werden können.</span><span class="sxs-lookup"><span data-stu-id="42552-133">Extensible Key Management enables the encryption keys that protect the database files to be stored in an off-box device such as a smartcard, USB device, or EKM/HSM module.</span></span> <span data-ttu-id="42552-134">Hiermit wird auch der Schutz von Daten durch Datenbankadministratoren ermöglicht (mit Ausnahme von Mitgliedern der sysadmin-Gruppe).</span><span class="sxs-lookup"><span data-stu-id="42552-134">This also enables data protection from database administrators (except members of the sysadmin group).</span></span> <span data-ttu-id="42552-135">Daten können mit Verschlüsselungsschlüsseln verschlüsselt werden, auf die nur der Datenbankbenutzer auf dem externen EKM/HSM-Modul Zugriff hat.</span><span class="sxs-lookup"><span data-stu-id="42552-135">Data can be encrypted by using encryption keys that only the database user has access to on the external EKM/HSM module.</span></span>  
  
 <span data-ttu-id="42552-136">EKM hat außerdem folgende Vorzüge:</span><span class="sxs-lookup"><span data-stu-id="42552-136">Extensible Key Management also provides the following benefits:</span></span>  
  
-   <span data-ttu-id="42552-137">Zusätzliche Autorisierungsprüfung (ermöglicht die Aufgabentrennung)</span><span class="sxs-lookup"><span data-stu-id="42552-137">Additional authorization check (enabling separation of duties).</span></span>  
  
-   <span data-ttu-id="42552-138">Bessere Leistung bei der hardwarebasierten Verschlüsselung und Entschlüsselung</span><span class="sxs-lookup"><span data-stu-id="42552-138">Higher performance for hardware-based encryption/decryption.</span></span>  
  
-   <span data-ttu-id="42552-139">Externe Generierung von Verschlüsselungsschlüsseln</span><span class="sxs-lookup"><span data-stu-id="42552-139">External encryption key generation.</span></span>  
  
-   <span data-ttu-id="42552-140">Externe Speicherung von Verschlüsselungsschlüsseln (physische Trennung von Daten und Schlüsseln)</span><span class="sxs-lookup"><span data-stu-id="42552-140">External encryption key storage (physical separation of data and keys).</span></span>  
  
-   <span data-ttu-id="42552-141">Abruf der Verschlüsselungsschlüssel</span><span class="sxs-lookup"><span data-stu-id="42552-141">Encryption key retrieval.</span></span>  
  
-   <span data-ttu-id="42552-142">Extern gesteuerte Laufzeit der Verschlüsselungsschlüssel (ermöglicht die Rotation der Verschlüsselungsschlüssel)</span><span class="sxs-lookup"><span data-stu-id="42552-142">External encryption key retention (enables encryption key rotation).</span></span>  
  
-   <span data-ttu-id="42552-143">Leichtere Wiederherstellung der Verschlüsselungsschlüssel</span><span class="sxs-lookup"><span data-stu-id="42552-143">Easier encryption key recovery.</span></span>  
  
-   <span data-ttu-id="42552-144">Kontrollierbare Verteilung der Verschlüsselungsschlüssel</span><span class="sxs-lookup"><span data-stu-id="42552-144">Manageable encryption key distribution.</span></span>  
  
-   <span data-ttu-id="42552-145">Sichere Beseitigung der Verschlüsselungsschlüssel</span><span class="sxs-lookup"><span data-stu-id="42552-145">Secure encryption key disposal.</span></span>  
  
 <span data-ttu-id="42552-146">Sie können die erweiterbare Schlüsselverwaltung für eine Kombination aus Benutzername und Kennwort oder andere Methoden verwenden, die vom EKM-Treiber definiert werden.</span><span class="sxs-lookup"><span data-stu-id="42552-146">You can use Extensible Key Management for a username and password combination or other methods defined by the EKM driver.</span></span>  
  
> [!CAUTION]  
>  <span data-ttu-id="42552-147">Für die Problembehandlung benötigt der technische Support von [!INCLUDE[msCoName](../../../includes/msconame-md.md)] eventuell den Verschlüsselungsschlüssel des EKM-Anbieters.</span><span class="sxs-lookup"><span data-stu-id="42552-147">For troubleshooting, [!INCLUDE[msCoName](../../../includes/msconame-md.md)] technical support might require the encryption key from the EKM provider.</span></span> <span data-ttu-id="42552-148">Außerdem kann es sein, dass Sie für die Lösung eines Problems auf Tools und Prozesse des Herstellers zugreifen müssen.</span><span class="sxs-lookup"><span data-stu-id="42552-148">You might also need to access vendor tools or processes to help resolve an issue.</span></span>  
  
### <a name="authentication-with-an-ekm-device"></a><span data-ttu-id="42552-149">Authentifizierung bei EKM-Geräten</span><span class="sxs-lookup"><span data-stu-id="42552-149">Authentication with an EKM Device</span></span>  
 <span data-ttu-id="42552-150">EKM-Module können mehrere Arten der Authentifizierung unterstützen.</span><span class="sxs-lookup"><span data-stu-id="42552-150">An EKM module can support more than one type of authentication.</span></span> <span data-ttu-id="42552-151">Jeder Anbieter macht nur eine Art der Authentifizierung für [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]verfügbar. Wenn das Modul zum Beispiel die Standardauthentifizierung oder andere Authentifizierungstypen unterstützt, wird nur eine der beiden Arten bereitgestellt.</span><span class="sxs-lookup"><span data-stu-id="42552-151">Each provider exposes only one type of authentication to [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)], that is if the module supports Basic or Other authentication types, it exposes one or the other, but not both.</span></span>  
  
#### <a name="ekm-device-specific-basic-authentication-using-usernamepassword"></a><span data-ttu-id="42552-152">EKM-gerätespezifische Standardauthentifizierung mit einer Benutzername-/Kennwortkombination</span><span class="sxs-lookup"><span data-stu-id="42552-152">EKM Device-Specific Basic Authentication Using username/password</span></span>  
 <span data-ttu-id="42552-153">Bei den EKM-Modulen, die die Standardauthentifizierung mit einem *Benutzername/Kennwort*-Paar unterstützen, stellt [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] eine transparente Authentifizierung über Anmeldeinformationen bereit.</span><span class="sxs-lookup"><span data-stu-id="42552-153">For those EKM modules that support Basic authentication using a *username/password* pair, [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] provides transparent authentication using credentials.</span></span> <span data-ttu-id="42552-154">Weitere Informationen über Anmeldenamen finden Sie unter [Anmeldeinformationen &#40;Datenbank-Engine&#41;](../authentication-access/credentials-database-engine.md).</span><span class="sxs-lookup"><span data-stu-id="42552-154">For more information about credentials, see [Credentials &#40;Database Engine&#41;](../authentication-access/credentials-database-engine.md).</span></span>  
  
 <span data-ttu-id="42552-155">Sie können für einen EKM-Anbieter einen Identitätsnachweis (Anmeldeinformationen) erstellen und diesen einem Anmeldenamen (sowohl für Windows- als auch für [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]-Konten) zuordnen, sodass der Zugriff auf ein EKM-Modul über eine einzelne Anmeldung möglich ist.</span><span class="sxs-lookup"><span data-stu-id="42552-155">A credential can be created for an EKM provider and mapped to a login (both Windows and [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] accounts) to access an EKM module on per-login basis.</span></span> <span data-ttu-id="42552-156">Das *Identify* -Feld im Identitätsnachweis enthält den Benutzernamen und das *secret* -Feld ein Kennwort für die Verbindung mit einem EKM-Modul.</span><span class="sxs-lookup"><span data-stu-id="42552-156">The *Identify* field of the credential contains the username; the *secret* field contains a password to connect to an EKM module.</span></span>  
  
 <span data-ttu-id="42552-157">Falls für einen EKM-Anbieter kein mit einem Anmeldenamen verknüpfter Identitätsnachweis vorliegt, werden die dem [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] -Dienstkonto zugeordneten Anmeldeinformationen verwendet.</span><span class="sxs-lookup"><span data-stu-id="42552-157">If there is no login mapped credential for the EKM provider, the credential mapped to the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] service account is used.</span></span>  
  
 <span data-ttu-id="42552-158">Einem Anmeldenamen können mehrere Anmeldeinformationen zugeordnet werden, solange sie für unterschiedliche EKM-Anbieter verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="42552-158">A login can have multiple credentials mapped to it, as long as they are used for distinctive EKM providers.</span></span> <span data-ttu-id="42552-159">Pro EKM-Anbieter und Anmeldung darf es jedoch nur einen zugeordneten Identitätsnachweis geben.</span><span class="sxs-lookup"><span data-stu-id="42552-159">There must be only one mapped credential per EKM provider per login.</span></span> <span data-ttu-id="42552-160">Die gleichen Anmeldeinformationen können jedoch auch anderen Anmeldenamen zugeordnet werden.</span><span class="sxs-lookup"><span data-stu-id="42552-160">The same credential can be mapped to other logins.</span></span>  
  
#### <a name="other-types-of-ekm-device-specific-authentication"></a><span data-ttu-id="42552-161">Andere Arten der EKM-gerätespezifischen Authentifizierung</span><span class="sxs-lookup"><span data-stu-id="42552-161">Other Types of EKM Device-Specific Authentication</span></span>  
 <span data-ttu-id="42552-162">Bei EKM-Modulen, die eine andere Authentifizierung als die Windows-Authentifizierung oder die Kombination aus *Benutzername und Kennwort* verwenden, muss die Authentifizierung unabhängig von [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]erfolgen.</span><span class="sxs-lookup"><span data-stu-id="42552-162">For EKM modules that have authentication other than Windows or *user/password* combinations, authentication must be performed independently from [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span></span>  
  
### <a name="encryption-and-decryption-by-an-ekm-device"></a><span data-ttu-id="42552-163">Verschlüsselung und Entschlüsselung durch ein EKM-Gerät</span><span class="sxs-lookup"><span data-stu-id="42552-163">Encryption and Decryption by an EKM Device</span></span>  
 <span data-ttu-id="42552-164">Sie können die folgenden Funktionen verwenden, um Daten mithilfe von symmetrischen und asymmetrischen Schlüsseln zu verschlüsseln und zu entschlüsseln:</span><span class="sxs-lookup"><span data-stu-id="42552-164">You can use the following functions and features to encrypt and decrypt data by using symmetric and asymmetric keys:</span></span>  
  
|<span data-ttu-id="42552-165">Funktion</span><span class="sxs-lookup"><span data-stu-id="42552-165">Function or feature</span></span>|<span data-ttu-id="42552-166">Verweis</span><span class="sxs-lookup"><span data-stu-id="42552-166">Reference</span></span>|  
|-------------------------|---------------|  
|<span data-ttu-id="42552-167">Verschlüsselung mit symmetrischen Schlüsseln</span><span class="sxs-lookup"><span data-stu-id="42552-167">Symmetric key encryption</span></span>|[<span data-ttu-id="42552-168">CREATE SYMMETRIC KEY &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="42552-168">CREATE SYMMETRIC KEY &#40;Transact-SQL&#41;</span></span>](/sql/t-sql/statements/create-symmetric-key-transact-sql)|  
|<span data-ttu-id="42552-169">Verschlüsselung mit asymmetrischen Schlüsseln</span><span class="sxs-lookup"><span data-stu-id="42552-169">Asymmetric Key encryption</span></span>|[<span data-ttu-id="42552-170">CREATE ASYMMETRIC KEY &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="42552-170">CREATE ASYMMETRIC KEY &#40;Transact-SQL&#41;</span></span>](/sql/t-sql/statements/create-asymmetric-key-transact-sql)|  
|<span data-ttu-id="42552-171">EncryptByKey(key_guid, 'cleartext', ...)</span><span class="sxs-lookup"><span data-stu-id="42552-171">EncryptByKey(key_guid, 'cleartext', ...)</span></span>|[<span data-ttu-id="42552-172">ENCRYPTBYKEY &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="42552-172">ENCRYPTBYKEY &#40;Transact-SQL&#41;</span></span>](/sql/t-sql/functions/encryptbykey-transact-sql)|  
|<span data-ttu-id="42552-173">DecryptByKey(ciphertext, ...)</span><span class="sxs-lookup"><span data-stu-id="42552-173">DecryptByKey(ciphertext, ...)</span></span>|[<span data-ttu-id="42552-174">DECRYPTBYKEY &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="42552-174">DECRYPTBYKEY &#40;Transact-SQL&#41;</span></span>](/sql/t-sql/functions/decryptbykey-transact-sql)|  
|<span data-ttu-id="42552-175">EncryptByAsmKey(key_guid, 'Klartext')</span><span class="sxs-lookup"><span data-stu-id="42552-175">EncryptByAsmKey(key_guid, 'cleartext')</span></span>|[<span data-ttu-id="42552-176">ENCRYPTBYASYMKEY &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="42552-176">ENCRYPTBYASYMKEY &#40;Transact-SQL&#41;</span></span>](/sql/t-sql/functions/encryptbyasymkey-transact-sql)|  
|<span data-ttu-id="42552-177">DecryptByAsmKey(ciphertext)</span><span class="sxs-lookup"><span data-stu-id="42552-177">DecryptByAsmKey(ciphertext)</span></span>|[<span data-ttu-id="42552-178">DECRYPTBYASYMKEY &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="42552-178">DECRYPTBYASYMKEY &#40;Transact-SQL&#41;</span></span>](/sql/t-sql/functions/decryptbyasymkey-transact-sql)|  
  
#### <a name="database-keys-encryption-by-ekm-keys"></a><span data-ttu-id="42552-179">Datenbankschlüsselverschlüsselung mit EKM-Schlüsseln</span><span class="sxs-lookup"><span data-stu-id="42552-179">Database Keys Encryption by EKM Keys</span></span>  
 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] <span data-ttu-id="42552-180">kann mithilfe von EKM-Schlüsseln andere Schlüssel in einer Datenbank verschlüsseln.</span><span class="sxs-lookup"><span data-stu-id="42552-180">can use EKM keys to encrypt other keys in a database.</span></span> <span data-ttu-id="42552-181">Sie können sowohl symmetrische als auch asymmetrische Schlüssel auf einem EKM-Gerät erstellen und verwenden.</span><span class="sxs-lookup"><span data-stu-id="42552-181">You can create and use both symmetric and asymmetric keys on an EKM device.</span></span> <span data-ttu-id="42552-182">Sie können systemeigene (nicht-EKM) symmetrische Schlüssel mit asymmetrischen EKM-Schlüsseln verschlüsseln.</span><span class="sxs-lookup"><span data-stu-id="42552-182">You can encrypt native (non-EKM) symmetric keys with EKM asymmetric keys.</span></span>  
  
 <span data-ttu-id="42552-183">Im folgenden Beispiel wird ein symmetrischer Datenbankschlüssel erstellt und mit einem Schlüssel auf einem EKM-Modul verschlüsselt.</span><span class="sxs-lookup"><span data-stu-id="42552-183">The following example creates a database symmetric key and encrypts it using a key on an EKM module.</span></span>  
  
```  
CREATE SYMMETRIC KEY Key1  
WITH ALGORITHM = AES_256  
ENCRYPTION BY EKM_AKey1;  
GO  
--Open database key  
OPEN SYMMETRIC KEY Key1  
DECRYPTION BY EKM_AKey1  
```  
  
 <span data-ttu-id="42552-184">Weitere Informationen zu Datenbank- und Serverschlüsseln in [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] finden Sie unter [Verschlüsselungsschlüssel für SQL Server und Datenbank &#40;Datenbank-Engine&#41;](sql-server-and-database-encryption-keys-database-engine.md).</span><span class="sxs-lookup"><span data-stu-id="42552-184">For more information about Database and Server Keys in [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)], see [SQL Server and Database Encryption Keys &#40;Database Engine&#41;](sql-server-and-database-encryption-keys-database-engine.md).</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="42552-185">EKM-Schlüssel können nicht mit anderen EKM-Schlüsseln verschlüsselt werden.</span><span class="sxs-lookup"><span data-stu-id="42552-185">You cannot encrypt one EKM key with another EKM key.</span></span>  
>   
>  [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] <span data-ttu-id="42552-186">unterstützt keine Signierungsmodule mit den asymmetrischen Schlüsseln, die vom EKM-Anbieter generiert werden.</span><span class="sxs-lookup"><span data-stu-id="42552-186">does not support signing modules with asymmetric keys generated from EKM provider.</span></span>  
  
## <a name="related-tasks"></a><span data-ttu-id="42552-187">Related Tasks</span><span class="sxs-lookup"><span data-stu-id="42552-187">Related Tasks</span></span>  
 [<span data-ttu-id="42552-188">EKM provider enabled (Serverkonfigurationsoption)</span><span class="sxs-lookup"><span data-stu-id="42552-188">EKM provider enabled Server Configuration Option</span></span>](../../../database-engine/configure-windows/ekm-provider-enabled-server-configuration-option.md)  
  
 [<span data-ttu-id="42552-189">Aktivieren von TDE mit EKM</span><span class="sxs-lookup"><span data-stu-id="42552-189">Enable TDE Using EKM</span></span>](enable-tde-on-sql-server-using-ekm.md)  
  
 [<span data-ttu-id="42552-190">Erweiterbare Schlüsselverwaltung mit Azure Key Vault &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="42552-190">Extensible Key Management Using Azure Key Vault &#40;SQL Server&#41;</span></span>](extensible-key-management-using-azure-key-vault-sql-server.md)  
  
## <a name="see-also"></a><span data-ttu-id="42552-191">Weitere Informationen</span><span class="sxs-lookup"><span data-stu-id="42552-191">See Also</span></span>  
 <span data-ttu-id="42552-192">[CREATE CRYPTOGRAPHIC PROVIDER &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-cryptographic-provider-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="42552-192">[CREATE CRYPTOGRAPHIC PROVIDER &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-cryptographic-provider-transact-sql) </span></span>  
 <span data-ttu-id="42552-193">[DROP CRYPTOGRAPHIC PROVIDER &#40;Transact-SQL&#41;](/sql/t-sql/statements/drop-cryptographic-provider-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="42552-193">[DROP CRYPTOGRAPHIC PROVIDER &#40;Transact-SQL&#41;](/sql/t-sql/statements/drop-cryptographic-provider-transact-sql) </span></span>  
 <span data-ttu-id="42552-194">[ALTER CRYPTOGRAPHIC PROVIDER &#40;Transact-SQL&#41;](/sql/t-sql/statements/alter-cryptographic-provider-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="42552-194">[ALTER CRYPTOGRAPHIC PROVIDER &#40;Transact-SQL&#41;](/sql/t-sql/statements/alter-cryptographic-provider-transact-sql) </span></span>  
 <span data-ttu-id="42552-195">[sys.cryptographic_providers &#40;Transact-SQL&#41;](/sql/relational-databases/system-catalog-views/sys-cryptographic-providers-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="42552-195">[sys.cryptographic_providers &#40;Transact-SQL&#41;](/sql/relational-databases/system-catalog-views/sys-cryptographic-providers-transact-sql) </span></span>  
 <span data-ttu-id="42552-196">[sys.dm_cryptographic_provider_sessions &#40;Transact-SQL&#41;](/sql/relational-databases/system-dynamic-management-views/sys-dm-cryptographic-provider-sessions-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="42552-196">[sys.dm_cryptographic_provider_sessions &#40;Transact-SQL&#41;](/sql/relational-databases/system-dynamic-management-views/sys-dm-cryptographic-provider-sessions-transact-sql) </span></span>  
 <span data-ttu-id="42552-197">[sys.dm_cryptographic_provider_properties &#40;Transact-SQL&#41;](/sql/relational-databases/system-dynamic-management-views/sys-dm-cryptographic-provider-properties-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="42552-197">[sys.dm_cryptographic_provider_properties &#40;Transact-SQL&#41;](/sql/relational-databases/system-dynamic-management-views/sys-dm-cryptographic-provider-properties-transact-sql) </span></span>  
 <span data-ttu-id="42552-198">[sys.dm_cryptographic_provider_algorithms &#40;Transact-SQL&#41;](/sql/relational-databases/system-dynamic-management-views/sys-dm-cryptographic-provider-algorithms-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="42552-198">[sys.dm_cryptographic_provider_algorithms &#40;Transact-SQL&#41;](/sql/relational-databases/system-dynamic-management-views/sys-dm-cryptographic-provider-algorithms-transact-sql) </span></span>  
 <span data-ttu-id="42552-199">[sys.dm_cryptographic_provider_keys &#40;Transact-SQL&#41;](/sql/relational-databases/system-dynamic-management-views/sys-dm-cryptographic-provider-keys-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="42552-199">[sys.dm_cryptographic_provider_keys &#40;Transact-SQL&#41;](/sql/relational-databases/system-dynamic-management-views/sys-dm-cryptographic-provider-keys-transact-sql) </span></span>  
 <span data-ttu-id="42552-200">[sys.credentials &#40;Transact-SQL&#41;](/sql/relational-databases/system-catalog-views/sys-credentials-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="42552-200">[sys.credentials &#40;Transact-SQL&#41;](/sql/relational-databases/system-catalog-views/sys-credentials-transact-sql) </span></span>  
 <span data-ttu-id="42552-201">[CREATE CREDENTIAL &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-credential-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="42552-201">[CREATE CREDENTIAL &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-credential-transact-sql) </span></span>  
 <span data-ttu-id="42552-202">[ALTER LOGIN &#40;Transact-SQL&#41;](/sql/t-sql/statements/alter-login-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="42552-202">[ALTER LOGIN &#40;Transact-SQL&#41;](/sql/t-sql/statements/alter-login-transact-sql) </span></span>  
 <span data-ttu-id="42552-203">[CREATE ASYMMETRIC KEY &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-asymmetric-key-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="42552-203">[CREATE ASYMMETRIC KEY &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-asymmetric-key-transact-sql) </span></span>  
 <span data-ttu-id="42552-204">[ALTER ASYMMETRIC KEY &#40;Transact-SQL&#41;](/sql/t-sql/statements/alter-asymmetric-key-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="42552-204">[ALTER ASYMMETRIC KEY &#40;Transact-SQL&#41;](/sql/t-sql/statements/alter-asymmetric-key-transact-sql) </span></span>  
 <span data-ttu-id="42552-205">[DROP ASYMMETRIC KEY &#40;Transact-SQL&#41;](/sql/t-sql/statements/drop-asymmetric-key-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="42552-205">[DROP ASYMMETRIC KEY &#40;Transact-SQL&#41;](/sql/t-sql/statements/drop-asymmetric-key-transact-sql) </span></span>  
 <span data-ttu-id="42552-206">[CREATE SYMMETRIC KEY &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-symmetric-key-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="42552-206">[CREATE SYMMETRIC KEY &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-symmetric-key-transact-sql) </span></span>  
 <span data-ttu-id="42552-207">[ALTER SYMMETRIC KEY &#40;Transact-SQL&#41;](/sql/t-sql/statements/alter-symmetric-key-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="42552-207">[ALTER SYMMETRIC KEY &#40;Transact-SQL&#41;](/sql/t-sql/statements/alter-symmetric-key-transact-sql) </span></span>  
 <span data-ttu-id="42552-208">[DROP SYMMETRIC KEY &#40;Transact-SQL&#41;](/sql/t-sql/statements/drop-symmetric-key-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="42552-208">[DROP SYMMETRIC KEY &#40;Transact-SQL&#41;](/sql/t-sql/statements/drop-symmetric-key-transact-sql) </span></span>  
 <span data-ttu-id="42552-209">[OPEN SYMMETRIC KEY &#40;Transact-SQL&#41;](/sql/t-sql/statements/open-symmetric-key-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="42552-209">[OPEN SYMMETRIC KEY &#40;Transact-SQL&#41;](/sql/t-sql/statements/open-symmetric-key-transact-sql) </span></span>  
 <span data-ttu-id="42552-210">[Sichern und Wiederherstellen von Reporting Services-Verschlüsselungsschlüsseln](../../../reporting-services/install-windows/ssrs-encryption-keys-back-up-and-restore-encryption-keys.md) </span><span class="sxs-lookup"><span data-stu-id="42552-210">[Back Up and Restore Reporting Services Encryption Keys](../../../reporting-services/install-windows/ssrs-encryption-keys-back-up-and-restore-encryption-keys.md) </span></span>  
 <span data-ttu-id="42552-211">[Löschen und erneutes Erstellen von Verschlüsselungsschlüsseln &#40;SSRS-Konfigurations-Manager&#41;](../../../reporting-services/install-windows/ssrs-encryption-keys-delete-and-re-create-encryption-keys.md) </span><span class="sxs-lookup"><span data-stu-id="42552-211">[Delete and Re-create Encryption Keys  &#40;SSRS Configuration Manager&#41;](../../../reporting-services/install-windows/ssrs-encryption-keys-delete-and-re-create-encryption-keys.md) </span></span>  
 <span data-ttu-id="42552-212">[Hinzufügen und Entfernen von Verschlüsselungsschlüsseln für die Bereitstellung für horizontales Skalieren &#40;SSRS-Konfigurations-Manager&#41;](../../../reporting-services/install-windows/add-and-remove-encryption-keys-for-scale-out-deployment.md) </span><span class="sxs-lookup"><span data-stu-id="42552-212">[Add and Remove Encryption Keys for Scale-Out Deployment &#40;SSRS Configuration Manager&#41;](../../../reporting-services/install-windows/add-and-remove-encryption-keys-for-scale-out-deployment.md) </span></span>  
 <span data-ttu-id="42552-213">[Sichern des Diensthauptschlüssels](service-master-key.md) </span><span class="sxs-lookup"><span data-stu-id="42552-213">[Back Up the Service Master Key](service-master-key.md) </span></span>  
 <span data-ttu-id="42552-214">[Wiederherstellen des Diensthauptschlüssels](restore-the-service-master-key.md) </span><span class="sxs-lookup"><span data-stu-id="42552-214">[Restore the Service Master Key](restore-the-service-master-key.md) </span></span>  
 <span data-ttu-id="42552-215">[Erstellen eines Datenbank-Hauptschlüssels](create-a-database-master-key.md) </span><span class="sxs-lookup"><span data-stu-id="42552-215">[Create a Database Master Key](create-a-database-master-key.md) </span></span>  
 <span data-ttu-id="42552-216">[Sichern eines Datenbank-Hauptschlüssels](back-up-a-database-master-key.md) </span><span class="sxs-lookup"><span data-stu-id="42552-216">[Back Up a Database Master Key](back-up-a-database-master-key.md) </span></span>  
 <span data-ttu-id="42552-217">[Wiederherstellen eines Datenbank-Hauptschlüssels](restore-a-database-master-key.md) </span><span class="sxs-lookup"><span data-stu-id="42552-217">[Restore a Database Master Key](restore-a-database-master-key.md) </span></span>  
 [<span data-ttu-id="42552-218">Erstellen identischer symmetrischer Schlüssel auf zwei Servern</span><span class="sxs-lookup"><span data-stu-id="42552-218">Create Identical Symmetric Keys on Two Servers</span></span>](create-identical-symmetric-keys-on-two-servers.md)  
  
  
