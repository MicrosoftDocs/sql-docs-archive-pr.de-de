---
title: SQL Server Audit (Datenbank-Engine) | Microsoft-Dokumentation
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: security
ms.topic: conceptual
f1_keywords:
- audit
helpviewer_keywords:
- SQL Server Audit
- audits [SQL Server], SQL Server Audit
ms.assetid: 0c1fca2e-f22b-4fe8-806f-c87806664f00
author: VanMSFT
ms.author: vanto
ms.openlocfilehash: 2f4f291e5dc4aaa8a240757713cc65bd2a6a8230
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 08/04/2020
ms.locfileid: "87609774"
---
# <a name="sql-server-audit-database-engine"></a><span data-ttu-id="7523f-102">SQL Server Audit (Datenbank-Engine)</span><span class="sxs-lookup"><span data-stu-id="7523f-102">SQL Server Audit (Database Engine)</span></span>
  <span data-ttu-id="7523f-103">Die *Überwachung* einer Instanz von [!INCLUDE[ssDEnoversion](../../../includes/ssdenoversion-md.md)] oder einer einzelnen Datenbank umfasst die Nachverfolgung und Protokollierung von Ereignissen, die in [!INCLUDE[ssDE](../../../includes/ssde-md.md)] auftreten.</span><span class="sxs-lookup"><span data-stu-id="7523f-103">*Auditing* an instance of the [!INCLUDE[ssDEnoversion](../../../includes/ssdenoversion-md.md)] or an individual database involves tracking and logging events that occur on the [!INCLUDE[ssDE](../../../includes/ssde-md.md)].</span></span> <span data-ttu-id="7523f-104">Mithilfe von [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Audit können Serverüberwachungen erstellt werden, die Serverüberwachungsspezifikationen für Ereignisse auf Serverebene sowie Datenbank-Überwachungsspezifikationen für Ereignisse auf Datenbankebene beinhalten können.</span><span class="sxs-lookup"><span data-stu-id="7523f-104">[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] audit lets you create server audits, which can contain server audit specifications for server level events, and database audit specifications for database level events.</span></span> <span data-ttu-id="7523f-105">Überwachte Ereignisse können in die Ereignisprotokolle oder Überwachungsdateien geschrieben werden.</span><span class="sxs-lookup"><span data-stu-id="7523f-105">Audited events can be written to the event logs or to audit files.</span></span>  
  
 <span data-ttu-id="7523f-106">Es gibt mehrere Überwachungsebenen für [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)], die von gesetzlichen oder standardspezifischen Anforderungen für die Installation abhängig sind.</span><span class="sxs-lookup"><span data-stu-id="7523f-106">There are several levels of auditing for [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)], depending on government or standards requirements for your installation.</span></span> [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] <span data-ttu-id="7523f-107">Audit enthält die Tools und Prozesse, die Sie zum Aktivieren, Speichern und Anzeigen von Überwachungen auf verschiedenen Server- und Datenbankobjekten benötigen.</span><span class="sxs-lookup"><span data-stu-id="7523f-107">Audit provides the tools and processes you must have to enable, store, and view audits on various server and database objects.</span></span>  
  
 <span data-ttu-id="7523f-108">Bei Servern können Sie Überwachungsaktionsgruppen instanzweise aufzeichnen, bei Datenbanken entweder Überwachungsaktionsgruppen oder Überwachungsaktionen jeweils pro Datenbank.</span><span class="sxs-lookup"><span data-stu-id="7523f-108">You can record server audit action groups per-instance, and either database audit action groups or database audit actions per database.</span></span> <span data-ttu-id="7523f-109">Das Überwachungsereignis tritt jedes Mal auf, wenn die überwachbare Aktion erkannt wird.</span><span class="sxs-lookup"><span data-stu-id="7523f-109">The audit event will occur every time that the auditable action is encountered.</span></span>  
  
 <span data-ttu-id="7523f-110">Alle Editionen von [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] unterstützen Überwachungen auf Serverebene.</span><span class="sxs-lookup"><span data-stu-id="7523f-110">All editions of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] support server level audits.</span></span> <span data-ttu-id="7523f-111">Die Überwachung auf Datenbankebene ist auf die Editionen Enterprise, Developer und Evaluation beschränkt.</span><span class="sxs-lookup"><span data-stu-id="7523f-111">Database level auditing is limited to Enterprise, Developer, and Evaluation editions.</span></span> <span data-ttu-id="7523f-112">Weitere Informationen finden Sie unter [Features Supported by the Editions of SQL Server 2014](../../../getting-started/features-supported-by-the-editions-of-sql-server-2014.md).</span><span class="sxs-lookup"><span data-stu-id="7523f-112">For more information, see [Features Supported by the Editions of SQL Server 2014](../../../getting-started/features-supported-by-the-editions-of-sql-server-2014.md).</span></span>  
  
## <a name="sql-server-audit-components"></a><span data-ttu-id="7523f-113">SQL Server Audit-Komponenten</span><span class="sxs-lookup"><span data-stu-id="7523f-113">SQL Server Audit Components</span></span>  
 <span data-ttu-id="7523f-114">Eine *Überwachung* besteht aus mehreren Elementen, die in einem einzelnen Paket für eine bestimmte Gruppe von Server- oder Datenbankaktionen zusammengefasst werden.</span><span class="sxs-lookup"><span data-stu-id="7523f-114">An *audit* is the combination of several elements into a single package for a specific group of server actions or database actions.</span></span> <span data-ttu-id="7523f-115">Die Komponenten von [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Audit geben zusammen eine Ausgabe aus, die als Überwachung bezeichnet wird, ebenso wie durch die Kombination von Berichtsdefinitionen mit Grafiken und Datenelementen ein Bericht erstellt wird.</span><span class="sxs-lookup"><span data-stu-id="7523f-115">The components of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] audit combine to produce an output that is called an audit, just as a report definition combined with graphics and data elements produces a report.</span></span>  
  
 <span data-ttu-id="7523f-116">Die[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] -Überwachung verwendet *erweiterte Ereignisse* , um eine Überwachung zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="7523f-116">[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] audit uses *Extended Events* to help create an audit.</span></span> <span data-ttu-id="7523f-117">Weitere Informationen zu erweiterten Ereignissen finden Sie unter [erweiterte Ereignisse](../../extended-events/extended-events.md).</span><span class="sxs-lookup"><span data-stu-id="7523f-117">For more information about Extended Events, see [Extended Events](../../extended-events/extended-events.md).</span></span>  
  
### <a name="sql-server-audit"></a><span data-ttu-id="7523f-118">SQL Server Audit</span><span class="sxs-lookup"><span data-stu-id="7523f-118">SQL Server Audit</span></span>  
 <span data-ttu-id="7523f-119">Das *SQL Server Audit* -Objekt listet eine einzelne Instanz an Aktionen oder Aktionsgruppen auf Server- oder Datenbankebene auf, die überwacht werden soll.</span><span class="sxs-lookup"><span data-stu-id="7523f-119">The *SQL Server Audit* object collects a single instance of server or database-level actions and groups of actions to monitor.</span></span> <span data-ttu-id="7523f-120">Die Überwachung wird auf [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] -Instanzebene ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="7523f-120">The audit is at the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] instance level.</span></span> <span data-ttu-id="7523f-121">Es können mehrere Überwachungen pro [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] -Instanz vorliegen.</span><span class="sxs-lookup"><span data-stu-id="7523f-121">You can have multiple audits per [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] instance.</span></span>  
  
 <span data-ttu-id="7523f-122">Wenn Sie eine Überwachung definieren, geben Sie den Speicherort für die Ausgabe der Ergebnisse an.</span><span class="sxs-lookup"><span data-stu-id="7523f-122">When you define an audit, you specify the location for the output of the results.</span></span> <span data-ttu-id="7523f-123">Dies ist das Überwachungsziel.</span><span class="sxs-lookup"><span data-stu-id="7523f-123">This is the audit destination.</span></span> <span data-ttu-id="7523f-124">Die Überwachung wird in einem *disabled* Zustand erstellt und überwacht Aktionen nicht automatisch.</span><span class="sxs-lookup"><span data-stu-id="7523f-124">The audit is created in a *disabled* state, and does not automatically audit any actions.</span></span> <span data-ttu-id="7523f-125">Nachdem die Überwachung aktiviert wurde, empfängt das Überwachungsziel Daten von der Überwachung.</span><span class="sxs-lookup"><span data-stu-id="7523f-125">After the audit is enabled, the audit destination receives data from the audit.</span></span>  
  
### <a name="server-audit-specification"></a><span data-ttu-id="7523f-126">Serverüberwachungsspezifikation</span><span class="sxs-lookup"><span data-stu-id="7523f-126">Server Audit Specification</span></span>  
 <span data-ttu-id="7523f-127">Das *Serverüberwachungsspezifikation* -Objekt gehört zu einer Überwachung.</span><span class="sxs-lookup"><span data-stu-id="7523f-127">The *Server Audit Specification* object belongs to an audit.</span></span> <span data-ttu-id="7523f-128">Sie können eine Serverüberwachungsspezifikation pro Überwachung erstellen, da beide im [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] -Instanzbereich erstellt werden.</span><span class="sxs-lookup"><span data-stu-id="7523f-128">You can create one server audit specification per audit, because both are created at the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] instance scope.</span></span>  
  
 <span data-ttu-id="7523f-129">Die Serverüberwachungsspezifikation listet viele Aktionsgruppen auf Serverebene auf, die von erweiterten Ereignissen ausgelöst werden.</span><span class="sxs-lookup"><span data-stu-id="7523f-129">The server audit specification collects many server-level action groups raised by the Extended Events feature.</span></span> <span data-ttu-id="7523f-130">Sie können *Überwachungsaktionsgruppen* in eine Serverüberwachungsspezifikation einschließen.</span><span class="sxs-lookup"><span data-stu-id="7523f-130">You can include *audit action groups* in a server audit specification.</span></span> <span data-ttu-id="7523f-131">Überwachungsaktionsgruppen sind vorab definierte Gruppen von Aktionen, bei denen es sich um unteilbare Ereignisse handelt, die in [!INCLUDE[ssDE](../../../includes/ssde-md.md)]stattfinden.</span><span class="sxs-lookup"><span data-stu-id="7523f-131">Audit action groups are predefined groups of actions, which are atomic events occurring in the [!INCLUDE[ssDE](../../../includes/ssde-md.md)].</span></span> <span data-ttu-id="7523f-132">Diese Aktionen werden an die Überwachung gesendet, die sie im Ziel aufzeichnet.</span><span class="sxs-lookup"><span data-stu-id="7523f-132">These actions are sent to the audit, which records them in the target.</span></span>  
  
 <span data-ttu-id="7523f-133">Überwachungsaktionsgruppen auf Datenbankebene und Überwachungsaktionen werden im Thema [SQL Server Audit-Aktionsgruppen und -Aktionen](sql-server-audit-action-groups-and-actions.md)beschrieben.</span><span class="sxs-lookup"><span data-stu-id="7523f-133">Server-level audit action groups are described in the topic [SQL Server Audit Action Groups and Actions](sql-server-audit-action-groups-and-actions.md).</span></span>  
  
### <a name="database-audit-specification"></a><span data-ttu-id="7523f-134">Datenbank-Überwachungsspezifikation</span><span class="sxs-lookup"><span data-stu-id="7523f-134">Database Audit Specification</span></span>  
 <span data-ttu-id="7523f-135">Das *Datenbank-Überwachungsspezifikation* -Objekt gehört ebenfalls zu [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Audit.</span><span class="sxs-lookup"><span data-stu-id="7523f-135">The *Database Audit Specification* object also belongs to a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] audit.</span></span> <span data-ttu-id="7523f-136">Sie können eine Datenbank-Überwachungsspezifikation pro [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] -Datenbank und pro Überwachung erstellen.</span><span class="sxs-lookup"><span data-stu-id="7523f-136">You can create one database audit specification per [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] database per audit.</span></span>  
  
 <span data-ttu-id="7523f-137">Die Datenbank-Überwachungsspezifikation listet viele Überwachungsaktionen auf Datenbankebene auf, die von erweiterten Ereignissen ausgelöst werden.</span><span class="sxs-lookup"><span data-stu-id="7523f-137">The database audit specification collects database-level audit actions raised by the Extended Events feature.</span></span> <span data-ttu-id="7523f-138">Sie können einer Datenbank-Überwachungsspezifikation Überwachungsaktionsgruppen oder Überwachungsereignisse hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="7523f-138">You can add either audit action groups or audit events to a database audit specification.</span></span> <span data-ttu-id="7523f-139">*Überwachungsereignisse* sind die unteilbaren Aktionen, die von der [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]-Engine überwacht werden können.</span><span class="sxs-lookup"><span data-stu-id="7523f-139">*Audit events* are the atomic actions that can be audited by the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] engine.</span></span> <span data-ttu-id="7523f-140">*Überwachungsaktionsgruppen* sind vorab definierte Aktionsgruppen.</span><span class="sxs-lookup"><span data-stu-id="7523f-140">*Audit action groups* are predefined groups of actions.</span></span> <span data-ttu-id="7523f-141">Beide befinden sich im [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] -Datenbankbereich.</span><span class="sxs-lookup"><span data-stu-id="7523f-141">Both are at the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] database scope.</span></span> <span data-ttu-id="7523f-142">Diese Aktionen werden an die Überwachung gesendet, die sie im Ziel aufzeichnet.</span><span class="sxs-lookup"><span data-stu-id="7523f-142">These actions are sent to the audit, which records them in the target.</span></span> <span data-ttu-id="7523f-143">Beziehen Sie in einer Benutzerdatenbank-Überwachungsspezifikation keine Objekte mit Serverbereich ein, wie Systemsichten.</span><span class="sxs-lookup"><span data-stu-id="7523f-143">Do not include server-scoped objects, such as the system views, in a user database audit specification.</span></span>  
  
 <span data-ttu-id="7523f-144">Überwachungsaktionsgruppen auf Datenbankebene und Überwachungsaktionen werden im Thema [SQL Server Audit-Aktionsgruppen und -Aktionen](sql-server-audit-action-groups-and-actions.md)beschrieben.</span><span class="sxs-lookup"><span data-stu-id="7523f-144">Database-level audit action groups and audit actions are described in the topic [SQL Server Audit Action Groups and Actions](sql-server-audit-action-groups-and-actions.md).</span></span>  
  
### <a name="target"></a><span data-ttu-id="7523f-145">Ziel</span><span class="sxs-lookup"><span data-stu-id="7523f-145">Target</span></span>  
 <span data-ttu-id="7523f-146">Die Ergebnisse einer Überwachung werden an ein Ziel gesendet, wobei es sich um eine Datei, das Windows-Sicherheitsereignisprotokoll oder das Windows-Anwendungsereignisprotokoll handelt.</span><span class="sxs-lookup"><span data-stu-id="7523f-146">The results of an audit are sent to a target, which can be a file, the Windows Security event log, or the Windows Application event log.</span></span> <span data-ttu-id="7523f-147">Protokolle müssen regelmäßig überprüft und archiviert werden, um sicherzustellen, dass das Ziel über ausreichend Platz verfügt, um zusätzliche Datensätze anzulegen.</span><span class="sxs-lookup"><span data-stu-id="7523f-147">Logs must be reviewed and archived periodically to make sure that the target has sufficient space to write additional records.</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="7523f-148">Jeder authentifizierte Benutzer kann das Windows-Anwendungsereignisprotokoll lesen und Datensätze darin schreiben.</span><span class="sxs-lookup"><span data-stu-id="7523f-148">Any authenticated user can read and write to the Windows Application event log.</span></span> <span data-ttu-id="7523f-149">Für das Anwendungsereignisprotokoll sind niedrigere Berechtigungen als für das Windows-Sicherheitsereignisprotokoll erforderlich, daher ist es jedoch auch weniger sicher als das Windows-Sicherheitsereignisprotokoll.</span><span class="sxs-lookup"><span data-stu-id="7523f-149">The Application event log requires lower permissions than the Windows Security event log and is less secure than the Windows Security event log.</span></span>  
  
 <span data-ttu-id="7523f-150">Wenn Sie einen Datensatz im Windows-Sicherheitsprotokoll schreiben möchten, muss das [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] -Dienstkonto der Richtlinie **Generieren von Sicherheitsüberwachungen** hinzugefügt werden.</span><span class="sxs-lookup"><span data-stu-id="7523f-150">Writing to the Windows Security log requires the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] service account to be added to the **Generate security audits** policy.</span></span> <span data-ttu-id="7523f-151">Standardmäßig sind das lokale System, der lokale Dienst und der Netzwerkdienst ein Teil dieser Richtlinie.</span><span class="sxs-lookup"><span data-stu-id="7523f-151">By default, the Local System, Local Service, and Network Service are part of this policy.</span></span> <span data-ttu-id="7523f-152">Diese Einstellung kann mit dem Sicherheitsrichtlinien-Snap-In (secpol.msc) konfiguriert werden.</span><span class="sxs-lookup"><span data-stu-id="7523f-152">This setting can be configured by using the security policy snap-in (secpol.msc).</span></span> <span data-ttu-id="7523f-153">Darüber hinaus muss die Sicherheitsrichtlinie **Objektzugriffsversuche überwachen** sowohl für **Erfolg** als auch für **Fehler**aktiviert sein.</span><span class="sxs-lookup"><span data-stu-id="7523f-153">Additionally, the **Audit object access** security policy must be enabled for both **Success** and **Failure**.</span></span> <span data-ttu-id="7523f-154">Diese Einstellung kann mit dem Sicherheitsrichtlinien-Snap-In (secpol.msc) konfiguriert werden.</span><span class="sxs-lookup"><span data-stu-id="7523f-154">This setting can be configured by using the security policy snap-in (secpol.msc).</span></span> <span data-ttu-id="7523f-155">In [!INCLUDE[wiprlhext](../../../includes/wiprlhext-md.md)] oder Windows Server 2008 können Sie die präzisetere Richtlinie zur **Anwendungs Generierung** über die Befehlszeile mit dem Überwachungs Richtlinien Programm () festlegen `AuditPol.exe)` .</span><span class="sxs-lookup"><span data-stu-id="7523f-155">In [!INCLUDE[wiprlhext](../../../includes/wiprlhext-md.md)] or Windows Server 2008, you can set the more granular **application generated** policy from the command line by using the audit policy program (`AuditPol.exe)`.</span></span> <span data-ttu-id="7523f-156">Weitere Informationen zu den Schritten zum Aktivieren des Schreibens in das Windows-Sicherheitsprotokoll finden Sie unter [Schreiben von SQL-Serverüberwachungsereignissen in das Sicherheitsprotokoll](write-sql-server-audit-events-to-the-security-log.md).</span><span class="sxs-lookup"><span data-stu-id="7523f-156">For more information about the steps to enable writing to the Windows Security log, see [Write SQL Server Audit Events to the Security Log](write-sql-server-audit-events-to-the-security-log.md).</span></span> <span data-ttu-id="7523f-157">Weitere Informationen über das Programm Auditpol.exe finden Sie im Knowledge Base-Artikel 921469, [How to use Group Policy to configure detailed security auditing](https://support.microsoft.com/kb/921469/)(in englischer Sprache).</span><span class="sxs-lookup"><span data-stu-id="7523f-157">For more information about the Auditpol.exe program, see Knowledge Base article 921469, [How to use Group Policy to configure detailed security auditing](https://support.microsoft.com/kb/921469/).</span></span> <span data-ttu-id="7523f-158">Die Windows-Ereignisprotokolle gelten global für das Windows-Betriebssystem.</span><span class="sxs-lookup"><span data-stu-id="7523f-158">The Windows event logs are global to the Windows operating system.</span></span> <span data-ttu-id="7523f-159">Weitere Informationen zu den Windows-Ereignisprotokollen finden Sie unter [Ereignisanzeige (Übersicht)](https://go.microsoft.com/fwlink/?LinkId=101455).</span><span class="sxs-lookup"><span data-stu-id="7523f-159">For more information about the Windows event logs, see [Event Viewer Overview](https://go.microsoft.com/fwlink/?LinkId=101455).</span></span> <span data-ttu-id="7523f-160">Wenn Sie präzisere Berechtigungen für die Überwachung benötigen, verwenden Sie das Binärdateiziel.</span><span class="sxs-lookup"><span data-stu-id="7523f-160">If you need more precise permissions on the audit, use the binary file target.</span></span>  
  
 <span data-ttu-id="7523f-161">Um beim Speichern von Überwachungsinformationen in eine Datei Manipulationen zu verhindern, können Sie den Zugriff auf deren Speicherort auf folgende Weise einschränken:</span><span class="sxs-lookup"><span data-stu-id="7523f-161">When you are saving audit information to a file, to help prevent tampering, you can restrict access to the file location in the following ways:</span></span>  
  
-   <span data-ttu-id="7523f-162">Das [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] -Dienstkonto muss über Lese- und Schreibberechtigungen verfügen.</span><span class="sxs-lookup"><span data-stu-id="7523f-162">The [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Service Account must have both Read and Write permission.</span></span>  
  
-   <span data-ttu-id="7523f-163">Für Überwachungsadministratoren sind in der Regel Lese- und Schreibberechtigungen erforderlich.</span><span class="sxs-lookup"><span data-stu-id="7523f-163">Audit Administrators typically require Read and Write permission.</span></span> <span data-ttu-id="7523f-164">Dabei wird angenommen, dass Überwachungsadministratoren Windows-Konten für die Verwaltung von Überwachungsdateien (u. a. das Kopieren der Dateien auf andere Freigaben und das Erstellen von Sicherungen) darstellen.</span><span class="sxs-lookup"><span data-stu-id="7523f-164">This assumes that the Audit Administrators are Windows accounts for administration of audit files, such as: copying them to different shares, backing them up, and so on.</span></span>  
  
-   <span data-ttu-id="7523f-165">Für das Lesen von Überwachungsdateien autorisierte Überwachungsleser müssen über eine Leseberechtigung verfügen.</span><span class="sxs-lookup"><span data-stu-id="7523f-165">Audit Readers that are authorized to read audit files must have Read permission.</span></span>  
  
 <span data-ttu-id="7523f-166">Selbst wenn [!INCLUDE[ssDE](../../../includes/ssde-md.md)] Daten in eine Datei schreibt, können andere Windows-Benutzer mit entsprechender Berechtigung die Überwachungsdatei lesen.</span><span class="sxs-lookup"><span data-stu-id="7523f-166">Even when the [!INCLUDE[ssDE](../../../includes/ssde-md.md)] is writing to a file, other Windows users can read the audit file if they have permission.</span></span> <span data-ttu-id="7523f-167">[!INCLUDE[ssDE](../../../includes/ssde-md.md)] lässt eine exklusive Sperre, die Lesevorgänge verhindert, nicht zu.</span><span class="sxs-lookup"><span data-stu-id="7523f-167">The [!INCLUDE[ssDE](../../../includes/ssde-md.md)] does not take an exclusive lock that prevents read operations.</span></span>  
  
 <span data-ttu-id="7523f-168">Da [!INCLUDE[ssDE](../../../includes/ssde-md.md)] auf die Datei zugreifen kann, können [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] -Anmeldungen mit CONTROL SERVER-Berechtigungen über [!INCLUDE[ssDE](../../../includes/ssde-md.md)] auf Überwachungsdateien zugreifen.</span><span class="sxs-lookup"><span data-stu-id="7523f-168">Because the [!INCLUDE[ssDE](../../../includes/ssde-md.md)] can access the file, [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] logins that have CONTROL SERVER permission can use the [!INCLUDE[ssDE](../../../includes/ssde-md.md)] to access the audit files.</span></span> <span data-ttu-id="7523f-169">Um alle Benutzer aufzuzeichnen, die die Überwachungsdatei lesen, definieren Sie eine Überwachung in master.sys.fn_get_audit_file.</span><span class="sxs-lookup"><span data-stu-id="7523f-169">To record any user that is reading the audit file, define an audit on master.sys.fn_get_audit_file.</span></span> <span data-ttu-id="7523f-170">Dadurch werden die Anmeldenamen von Benutzern mit CONTROL SERVER-Berechtigung aufgezeichnet, die über [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]auf die Überwachungsdatei zugegriffen haben.</span><span class="sxs-lookup"><span data-stu-id="7523f-170">This records the logins with CONTROL SERVER permission that have accessed the audit file through [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span></span>  
  
 <span data-ttu-id="7523f-171">Wenn ein Überwachungsadministrator die Datei an einen anderen Ort kopiert (zur Archivierung usw.), sollten die ACLs am neuen Ort auf die folgenden Berechtigungen beschränkt werden:</span><span class="sxs-lookup"><span data-stu-id="7523f-171">If an Audit Administrator copies the file to a different location (for archive purposes, and so on), the ACLs on the new location should be reduced to the following permissions:</span></span>  
  
-   <span data-ttu-id="7523f-172">Überwachungsadministrator – Lesen/Schreiben</span><span class="sxs-lookup"><span data-stu-id="7523f-172">Audit Administrator - Read / Write</span></span>  
  
-   <span data-ttu-id="7523f-173">Überwachungsleser – Lesen</span><span class="sxs-lookup"><span data-stu-id="7523f-173">Audit Reader - Read</span></span>  
  
 <span data-ttu-id="7523f-174">Es wird empfohlen, Überwachungsberichte auf einer separaten Instanz von [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]zu erstellen, z.B. einer Instanz von [!INCLUDE[ssExpress](../../../includes/ssexpress-md.md)], auf die nur Überwachungsadministratoren und -leser Zugriff haben.</span><span class="sxs-lookup"><span data-stu-id="7523f-174">We recommend that you generate audit reports from a separate instance of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)], such as an instance of [!INCLUDE[ssExpress](../../../includes/ssexpress-md.md)], to which only Audit Administrators or Audit Readers have access.</span></span> <span data-ttu-id="7523f-175">Durch Verwenden einer separaten Instanz von [!INCLUDE[ssDE](../../../includes/ssde-md.md)] zur Berichterstellung können Sie dazu beitragen, unautorisierte Benutzer am Zugriff auf die Überwachungsdatei zu hindern.</span><span class="sxs-lookup"><span data-stu-id="7523f-175">By using a separate instance of the [!INCLUDE[ssDE](../../../includes/ssde-md.md)] for reporting, you can help prevent unauthorized users from obtaining access to the audit record.</span></span>  
  
 <span data-ttu-id="7523f-176">Zusätzlichen Schutz gegen unautorisierten Zugriff erhalten Sie, indem Sie den Ordner mit der Überwachungsdatei mit der Windows-BitLocker-Laufwerksverschlüsselung oder dem verschlüsselnden Dateisystem von Windows verschlüsseln.</span><span class="sxs-lookup"><span data-stu-id="7523f-176">You can offer additional protection against unauthorized access by encrypting the folder in which the audit file is stored by using Windows BitLocker Drive Encryption or Windows Encrypting File System.</span></span>  
  
 <span data-ttu-id="7523f-177">Weitere Informationen zu den Überwachungsdatensätzen, die in das Ziel geschrieben werden, finden Sie unter [SQL Server Audit-Datensätze](sql-server-audit-records.md).</span><span class="sxs-lookup"><span data-stu-id="7523f-177">For more information about the audit records that are written to the target, see [SQL Server Audit Records](sql-server-audit-records.md).</span></span>  
  
## <a name="overview-of-using-sql-server-audit"></a><span data-ttu-id="7523f-178">Übersicht über die Verwendung von SQL Server Audit</span><span class="sxs-lookup"><span data-stu-id="7523f-178">Overview of Using SQL Server Audit</span></span>  
 <span data-ttu-id="7523f-179">Sie können [!INCLUDE[ssManStudioFull](../../../includes/ssmanstudiofull-md.md)] oder [!INCLUDE[tsql](../../../includes/tsql-md.md)] verwenden, um eine Überwachung zu definieren.</span><span class="sxs-lookup"><span data-stu-id="7523f-179">You can use [!INCLUDE[ssManStudioFull](../../../includes/ssmanstudiofull-md.md)] or [!INCLUDE[tsql](../../../includes/tsql-md.md)] to define an audit.</span></span> <span data-ttu-id="7523f-180">Nachdem die Überwachung erstellt und aktiviert wurde, empfängt das Ziel die Einträge.</span><span class="sxs-lookup"><span data-stu-id="7523f-180">After the audit is created and enabled, the target will receive entries.</span></span>  
  
 <span data-ttu-id="7523f-181">Sie können die Windows-Ereignisprotokolle mit dem Windows-Hilfsprogramm **Ereignisanzeige** lesen.</span><span class="sxs-lookup"><span data-stu-id="7523f-181">You can read the Windows event logs by using the **Event Viewer** utility in Windows.</span></span> <span data-ttu-id="7523f-182">Bei Dateizielen können Sie zum Lesen der Zieldatei entweder den **Protokolldatei-Viewer** in [!INCLUDE[ssManStudioFull](../../../includes/ssmanstudiofull-md.md)] oder die [fn_get_audit_file](/sql/relational-databases/system-functions/sys-fn-get-audit-file-transact-sql) -Funktion verwenden.</span><span class="sxs-lookup"><span data-stu-id="7523f-182">For file targets, you can use either the **Log File Viewer** in [!INCLUDE[ssManStudioFull](../../../includes/ssmanstudiofull-md.md)] or the [fn_get_audit_file](/sql/relational-databases/system-functions/sys-fn-get-audit-file-transact-sql) function to read the target file.</span></span>  
  
 <span data-ttu-id="7523f-183">Im Allgemeinen wird eine Überwachung folgendermaßen erstellt und verwendet:</span><span class="sxs-lookup"><span data-stu-id="7523f-183">The general process for creating and using an audit is as follows.</span></span>  
  
1.  <span data-ttu-id="7523f-184">Erstellen Sie eine Überwachung, und definieren Sie das Ziel.</span><span class="sxs-lookup"><span data-stu-id="7523f-184">Create an audit and define the target.</span></span>  
  
2.  <span data-ttu-id="7523f-185">Erstellen Sie eine Serverüberwachungsspezifikation oder eine Datenbank-Überwachungsspezifikation, die der Überwachung zugeordnet wird.</span><span class="sxs-lookup"><span data-stu-id="7523f-185">Create either a server audit specification or database audit specification that maps to the audit.</span></span> <span data-ttu-id="7523f-186">Aktivieren Sie die Überwachungsspezifikation.</span><span class="sxs-lookup"><span data-stu-id="7523f-186">Enable the audit specification.</span></span>  
  
3.  <span data-ttu-id="7523f-187">Aktivieren Sie die Überwachung.</span><span class="sxs-lookup"><span data-stu-id="7523f-187">Enable the audit.</span></span>  
  
4.  <span data-ttu-id="7523f-188">Lesen Sie die Überwachungsereignisse mit der Windows- **Ereignisanzeige**, dem **Protokolldatei-Viewer**oder der fn_get_audit_file-Funktion.</span><span class="sxs-lookup"><span data-stu-id="7523f-188">Read the audit events by using the Windows **Event Viewer**, **Log File Viewe**r, or the fn_get_audit_file function.</span></span>  
  
 <span data-ttu-id="7523f-189">Weitere Informationen zur Überwachung finden Sie unter [Erstellen einer Serverüberwachung und einer Serverüberwachungsspezifikation](create-a-server-audit-and-server-audit-specification.md) sowie [Erstellen einer Server- und Datenbank-Überwachungsspezifikation](create-a-server-audit-and-database-audit-specification.md).</span><span class="sxs-lookup"><span data-stu-id="7523f-189">For more information, see [Create a Server Audit and Server Audit Specification](create-a-server-audit-and-server-audit-specification.md) and [Create a Server Audit and Database Audit Specification](create-a-server-audit-and-database-audit-specification.md).</span></span>  
  
## <a name="considerations"></a><span data-ttu-id="7523f-190">Überlegungen</span><span class="sxs-lookup"><span data-stu-id="7523f-190">Considerations</span></span>  
 <span data-ttu-id="7523f-191">Wenn während der Überwachungseinleitung ein Fehler auftritt, wird der Server nicht gestartet.</span><span class="sxs-lookup"><span data-stu-id="7523f-191">In the case of a failure during audit initiation, the server will not start.</span></span> <span data-ttu-id="7523f-192">In diesem Fall kann der Server gestartet werden, indem Sie in die Befehlszeile die Option **-f** eingeben.</span><span class="sxs-lookup"><span data-stu-id="7523f-192">In this case, the server can be started by using the **-f** option at the command line.</span></span>  
  
 <span data-ttu-id="7523f-193">Wenn aufgrund eines Überwachungsfehlers der Server heruntergefahren wird oder nicht startet, da für die Überwachung ON_FAILURE=SHUTDOWN festgelegt wurde, wird das Ereignis MSG_AUDIT_FORCED_SHUTDOWN in das Protokoll geschrieben.</span><span class="sxs-lookup"><span data-stu-id="7523f-193">When an audit failure causes the server to shut down or not to start because ON_FAILURE=SHUTDOWN is specified for the audit, the MSG_AUDIT_FORCED_SHUTDOWN event will be written to the log.</span></span> <span data-ttu-id="7523f-194">Da der Server schon beim ersten Auftreten dieser Einstellung heruntergefahren wird, wird das Ereignis nur einmal im Protokoll aufgezeichnet.</span><span class="sxs-lookup"><span data-stu-id="7523f-194">Because the shutdown will occur on the first encounter of this setting, the event will be written one time.</span></span> <span data-ttu-id="7523f-195">Das Ereignis wird erst nach der Fehlermeldung für die Überwachung, die das Herunterfahren verursacht, geschrieben.</span><span class="sxs-lookup"><span data-stu-id="7523f-195">This event is written after the failure message for the audit causing the shutdown.</span></span> <span data-ttu-id="7523f-196">Ein Administrator kann ein durch eine Überwachung verursachtes Herunterfahren umgehen, indem er [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] mit dem Flag **-m** im Einzelbenutzermodus startet.</span><span class="sxs-lookup"><span data-stu-id="7523f-196">An administrator can bypass audit-induced shutdowns by starting [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] in Single User mode using the **-m** flag.</span></span> <span data-ttu-id="7523f-197">Wenn Sie sich im Einzelbenutzermodus anmelden, wird jede Überwachung herabgestuft, für die festgelegt wurde, dass ON_FAILURE=SHUTDOWN in dieser Sitzung als ON_FAILURE=CONTINUE ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="7523f-197">If you start in Single User mode, you will downgrade any audit where ON_FAILURE=SHUTDOWN is specified to run in that session as ON_FAILURE=CONTINUE.</span></span> <span data-ttu-id="7523f-198">Wenn [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] mit dem Flag **-m** gestartet wird, wird die Meldung MSG_AUDIT_SHUTDOWN_BYPASSED im Fehlerprotokoll aufgezeichnet.</span><span class="sxs-lookup"><span data-stu-id="7523f-198">When [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] is started by using the **-m** flag, the MSG_AUDIT_SHUTDOWN_BYPASSED message will be written to the error log.</span></span>  
  
 <span data-ttu-id="7523f-199">Weitere Informationen zu Dienststartoptionen finden Sie unter [Startoptionen für den Datenbank-Engine-Dienst](../../../database-engine/configure-windows/database-engine-service-startup-options.md).</span><span class="sxs-lookup"><span data-stu-id="7523f-199">For more information about service startup options, see [Database Engine Service Startup Options](../../../database-engine/configure-windows/database-engine-service-startup-options.md).</span></span>  
  
### <a name="attaching-a-database-with-an-audit-defined"></a><span data-ttu-id="7523f-200">Anfügen einer Datenbank mit einer definierten Überwachung</span><span class="sxs-lookup"><span data-stu-id="7523f-200">Attaching a Database with an Audit Defined</span></span>  
 <span data-ttu-id="7523f-201">Wenn Sie eine Datenbank anfügen, für die eine Überwachungsspezifikation festgelegt wurde und die eine GUID bestimmt, die sich nicht auf dem Server befindet, entsteht eine *verwaiste* Überwachungsspezifikation.</span><span class="sxs-lookup"><span data-stu-id="7523f-201">Attaching a database that has an audit specification and specifies a GUID that does not exist on the server will cause an *orphaned* audit specification.</span></span> <span data-ttu-id="7523f-202">Da eine Überwachung mit einer entsprechenden GUID nicht auf der Serverinstanz vorliegt, werden keine Überwachungsereignisse aufgezeichnet.</span><span class="sxs-lookup"><span data-stu-id="7523f-202">Because an audit with a matching GUID does not exist on the server instance, no audit events will be recorded.</span></span> <span data-ttu-id="7523f-203">Verwenden Sie den Befehl ALTER DATABASE AUDIT SPECIFICATION, um die verwaiste Überwachungsspezifikation mit einer vorhandenen Serverüberwachung zu verbinden und somit den Fehler zu beheben.</span><span class="sxs-lookup"><span data-stu-id="7523f-203">To correct this situation, use the ALTER DATABASE AUDIT SPECIFICATION command to connect the orphaned audit specification to an existing server audit.</span></span> <span data-ttu-id="7523f-204">Oder verwenden Sie den Befehl CREATE SERVER AUDIT, um eine neue Serverüberwachung mit der angegebenen GUID zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="7523f-204">Or, use the CREATE SERVER AUDIT command to create a new server audit with the specified GUID.</span></span>  
  
 <span data-ttu-id="7523f-205">Sie können eine Datenbank, für die eine Überwachungsspezifikation angegeben wurde, an eine andere Edition von [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] anfügen, die [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Audit nicht unterstützt, z. B. [!INCLUDE[ssExpress](../../../includes/ssexpress-md.md)] . Überwachungsereignisse werden jedoch nicht aufgezeichnet.</span><span class="sxs-lookup"><span data-stu-id="7523f-205">You can attach a database that has an audit specification defined on it to another edition of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] that does not support [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] audit, such as [!INCLUDE[ssExpress](../../../includes/ssexpress-md.md)] but it will not record audit events.</span></span>  
  
### <a name="database-mirroring-and-sql-server-audit"></a><span data-ttu-id="7523f-206">Datenbankspiegelung und SQL Server Audit</span><span class="sxs-lookup"><span data-stu-id="7523f-206">Database Mirroring and SQL Server Audit</span></span>  
 <span data-ttu-id="7523f-207">Eine Datenbank, für die eine Datenbank-Überwachungsspezifikation definiert wurde und für die Datenbankspiegelung verwendet wird, enthält die Datenbank-Überwachungsspezifikation.</span><span class="sxs-lookup"><span data-stu-id="7523f-207">A database that has a database audit specification defined and that uses database mirroring will include the database audit specification.</span></span> <span data-ttu-id="7523f-208">Die folgenden Elemente müssen konfiguriert werden, damit sie auf der gespiegelten SQL-Instanz ordnungsgemäß arbeitet:</span><span class="sxs-lookup"><span data-stu-id="7523f-208">To work correctly on the mirrored SQL instance, the following items must be configured:</span></span>  
  
-   <span data-ttu-id="7523f-209">Der Spiegelserver muss über eine Überwachung mit der gleichen GUID verfügen, damit die Datenbank-Überwachungsspezifikation Überwachungsdatensätze schreiben kann.</span><span class="sxs-lookup"><span data-stu-id="7523f-209">The mirror server must have an audit with the same GUID to enable the database audit specification to write audit records.</span></span> <span data-ttu-id="7523f-210">Dies kann mit dem Befehl create Audit with GUID konfiguriert werden `=` \* \<GUID from source Server Audit*> .</span><span class="sxs-lookup"><span data-stu-id="7523f-210">This can be configured by using the command CREATE AUDIT WITH GUID`=`\*\<GUID from source Server Audit*>.</span></span>  
  
-   <span data-ttu-id="7523f-211">Bei Binärdateizielen muss das Dienstkonto des Spiegelservers über die erforderlichen Berechtigungen für den Speicherort verfügen, an den der Überwachungspfad geschrieben wird.</span><span class="sxs-lookup"><span data-stu-id="7523f-211">For binary file targets, the mirror server service account must have appropriate permissions to the location where the audit trail is being written.</span></span>  
  
-   <span data-ttu-id="7523f-212">Bei Windows-Ereignisprotokollzielen muss die Sicherheitsrichtlinie für den Computer, auf dem sich der Spiegelserver befindet, den Dienstkontozugriff auf das Sicherheits- oder Anwendungsereignisprotokoll zulassen.</span><span class="sxs-lookup"><span data-stu-id="7523f-212">For Windows event log targets, the security policy on the computer where the mirror server is located must allow for service account access to the security or application event log.</span></span>  
  
### <a name="auditing-administrators"></a><span data-ttu-id="7523f-213">Überwachen von Administratoren</span><span class="sxs-lookup"><span data-stu-id="7523f-213">Auditing Administrators</span></span>  
 <span data-ttu-id="7523f-214">Mitglieder der `sysadmin` Fixed-Server Rolle werden in jeder Datenbank als **dbo** -Benutzer identifiziert.</span><span class="sxs-lookup"><span data-stu-id="7523f-214">Members of the `sysadmin` fixed server role are identified as the **dbo** user in each database.</span></span> <span data-ttu-id="7523f-215">Um die Aktionen der Administratoren zu überwachen, verfolgen Sie also die Aktionen des **dbo** -Benutzers.</span><span class="sxs-lookup"><span data-stu-id="7523f-215">To audit actions of the administrators, audit the actions of the **dbo** user.</span></span>  
  
## <a name="creating-and-managing-audits-with-transact-sql"></a><span data-ttu-id="7523f-216">Erstellen und Verwalten von Überwachungen mit Transact-SQL</span><span class="sxs-lookup"><span data-stu-id="7523f-216">Creating and Managing Audits with Transact-SQL</span></span>  
 <span data-ttu-id="7523f-217">Sie können DDL-Anweisungen, dynamische Verwaltungssichten und -funktionen sowie Katalogsichten verwenden, um alle Aspekte von [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Audit zu implementieren.</span><span class="sxs-lookup"><span data-stu-id="7523f-217">You can use DDL statements, dynamic management views and functions, and catalog views to implement all aspects of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Audit.</span></span>  
  
### <a name="data-definition-language-statements"></a><span data-ttu-id="7523f-218">DDL-Anweisungen (Data Definition Language, Datendefinitionssprache)</span><span class="sxs-lookup"><span data-stu-id="7523f-218">Data Definition Language Statements</span></span>  
 <span data-ttu-id="7523f-219">Sie können die folgenden DDL-Anweisungen zum Erstellen, Ändern und Löschen von Überwachungsspezifikationen verwenden:</span><span class="sxs-lookup"><span data-stu-id="7523f-219">You can use the following DDL statements to create, alter, and drop audit specifications:</span></span>  
  
|||  
|-|-|  
|[<span data-ttu-id="7523f-220">ALTER AUTHORIZATION</span><span class="sxs-lookup"><span data-stu-id="7523f-220">ALTER AUTHORIZATION</span></span>](/sql/t-sql/statements/alter-authorization-transact-sql)|[<span data-ttu-id="7523f-221">CREATE SERVER AUDIT</span><span class="sxs-lookup"><span data-stu-id="7523f-221">CREATE SERVER AUDIT</span></span>](/sql/t-sql/statements/create-server-audit-transact-sql)|  
|[<span data-ttu-id="7523f-222">ALTER DATABASE AUDIT SPECIFICATION</span><span class="sxs-lookup"><span data-stu-id="7523f-222">ALTER DATABASE AUDIT SPECIFICATION</span></span>](/sql/t-sql/statements/alter-database-audit-specification-transact-sql)|[<span data-ttu-id="7523f-223">CREATE SERVER AUDIT SPECIFICATION</span><span class="sxs-lookup"><span data-stu-id="7523f-223">CREATE SERVER AUDIT SPECIFICATION</span></span>](/sql/t-sql/statements/create-server-audit-specification-transact-sql)|  
|[<span data-ttu-id="7523f-224">ALTER SERVER AUDIT</span><span class="sxs-lookup"><span data-stu-id="7523f-224">ALTER SERVER AUDIT</span></span>](/sql/t-sql/statements/alter-server-audit-specification-transact-sql)|[<span data-ttu-id="7523f-225">DROP DATABASE AUDIT SPECIFICATION</span><span class="sxs-lookup"><span data-stu-id="7523f-225">DROP DATABASE AUDIT SPECIFICATION</span></span>](/sql/t-sql/statements/drop-database-encryption-key-transact-sql)|  
|[<span data-ttu-id="7523f-226">ALTER SERVER AUDIT SPECIFICATION</span><span class="sxs-lookup"><span data-stu-id="7523f-226">ALTER SERVER AUDIT SPECIFICATION</span></span>](/sql/t-sql/statements/alter-server-audit-transact-sql)|[<span data-ttu-id="7523f-227">DROP SERVER AUDIT</span><span class="sxs-lookup"><span data-stu-id="7523f-227">DROP SERVER AUDIT</span></span>](/sql/t-sql/statements/drop-server-audit-transact-sql)|  
|[<span data-ttu-id="7523f-228">CREATE DATABASE AUDIT SPECIFICATION</span><span class="sxs-lookup"><span data-stu-id="7523f-228">CREATE DATABASE AUDIT SPECIFICATION</span></span>](/sql/t-sql/statements/create-database-audit-specification-transact-sql)|[<span data-ttu-id="7523f-229">DROP SERVER AUDIT SPECIFICATION</span><span class="sxs-lookup"><span data-stu-id="7523f-229">DROP SERVER AUDIT SPECIFICATION</span></span>](/sql/t-sql/statements/drop-server-audit-specification-transact-sql)|  
  
### <a name="dynamic-views-and-functions"></a><span data-ttu-id="7523f-230">Dynamische Sichten und Funktionen</span><span class="sxs-lookup"><span data-stu-id="7523f-230">Dynamic Views and Functions</span></span>  
 <span data-ttu-id="7523f-231">In der folgenden Tabelle werden die dynamischen Sichten und Funktion aufgelistet, die Sie für eine [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] -Überwachung verwenden können.</span><span class="sxs-lookup"><span data-stu-id="7523f-231">The following table lists the dynamic views and function that you can use for [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Auditing.</span></span>  
  
|<span data-ttu-id="7523f-232">Dynamische Sichten und Funktionen</span><span class="sxs-lookup"><span data-stu-id="7523f-232">Dynamic views and functions</span></span>|<span data-ttu-id="7523f-233">BESCHREIBUNG</span><span class="sxs-lookup"><span data-stu-id="7523f-233">Description</span></span>|  
|---------------------------------|-----------------|  
|[<span data-ttu-id="7523f-234">sys.dm_audit_actions</span><span class="sxs-lookup"><span data-stu-id="7523f-234">sys.dm_audit_actions</span></span>](/sql/relational-databases/system-dynamic-management-views/sys-dm-audit-actions-transact-sql)|<span data-ttu-id="7523f-235">Gibt eine Zeile für jede Überwachungsaktion zurück, die im Überwachungsprotokoll festgehalten werden kann, und für jede Überwachungsaktionsgruppe, die als Teil von [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Audit konfiguriert werden kann.</span><span class="sxs-lookup"><span data-stu-id="7523f-235">Returns a row for every audit action that can be reported in the audit log and every audit action group that can be configured as part of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Audit.</span></span>|  
|[<span data-ttu-id="7523f-236">sys.dm_server_audit_status</span><span class="sxs-lookup"><span data-stu-id="7523f-236">sys.dm_server_audit_status</span></span>](/sql/relational-databases/system-dynamic-management-views/sys-dm-server-audit-status-transact-sql)|<span data-ttu-id="7523f-237">Stellt Informationen über den aktuellen Status der Überwachung bereit.</span><span class="sxs-lookup"><span data-stu-id="7523f-237">Provides information about the current state of the audit.</span></span>|  
|[<span data-ttu-id="7523f-238">sys.dm_audit_class_type_map</span><span class="sxs-lookup"><span data-stu-id="7523f-238">sys.dm_audit_class_type_map</span></span>](/sql/relational-databases/system-dynamic-management-views/sys-dm-audit-class-type-map-transact-sql)|<span data-ttu-id="7523f-239">Gibt eine Tabelle zurück, die das Feld class_type im Überwachungsprotokoll dem Feld class_desc in sys.dm_audit_actions zuordnet.</span><span class="sxs-lookup"><span data-stu-id="7523f-239">Returns a table that maps the class_type field in the audit log to the class_desc field in sys.dm_audit_actions.</span></span>|  
|[<span data-ttu-id="7523f-240">fn_get_audit_file</span><span class="sxs-lookup"><span data-stu-id="7523f-240">fn_get_audit_file</span></span>](/sql/relational-databases/system-functions/sys-fn-get-audit-file-transact-sql)|<span data-ttu-id="7523f-241">Gibt Informationen von einer Überwachungsdatei zurück, die von einer Serverüberwachung erstellt wurde.</span><span class="sxs-lookup"><span data-stu-id="7523f-241">Returns information from an audit file created by a server audit.</span></span>|  
  
### <a name="catalog-views"></a><span data-ttu-id="7523f-242">Katalogsichten</span><span class="sxs-lookup"><span data-stu-id="7523f-242">Catalog Views</span></span>  
 <span data-ttu-id="7523f-243">In der folgenden Tabelle werden die Katalogsichten aufgeführt, die Sie für die [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] -Überwachung verwenden können.</span><span class="sxs-lookup"><span data-stu-id="7523f-243">The following table lists the catalog views that you can use for [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] auditing.</span></span>  
  
|<span data-ttu-id="7523f-244">Katalogansichten</span><span class="sxs-lookup"><span data-stu-id="7523f-244">Catalog views</span></span>|<span data-ttu-id="7523f-245">BESCHREIBUNG</span><span class="sxs-lookup"><span data-stu-id="7523f-245">Description</span></span>|  
|-------------------|-----------------|  
|[<span data-ttu-id="7523f-246">sys.database_audit_specifications</span><span class="sxs-lookup"><span data-stu-id="7523f-246">sys.database_ audit_specifications</span></span>](/sql/relational-databases/system-catalog-views/sys-database-audit-specifications-transact-sql)|<span data-ttu-id="7523f-247">Enthält Informationen über die Datenbanküberwachungsspezifikationen in einer [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] -Überwachung auf einer Serverinstanz.</span><span class="sxs-lookup"><span data-stu-id="7523f-247">Contains information about the database audit specifications in a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] audit on a server instance.</span></span>|  
|[<span data-ttu-id="7523f-248">sys.database_audit_specification_details</span><span class="sxs-lookup"><span data-stu-id="7523f-248">sys.database_audit_specification_details</span></span>](/sql/relational-databases/system-catalog-views/sys-database-audit-specification-details-transact-sql)|<span data-ttu-id="7523f-249">Enthält Informationen über die Datenbank-Überwachungsspezifikationen in einer [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] -Überwachung auf einer Serverinstanz für alle Datenbanken.</span><span class="sxs-lookup"><span data-stu-id="7523f-249">Contains information about the database audit specifications in a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] audit on a server instance for all databases.</span></span>|  
|[<span data-ttu-id="7523f-250">sys.server_audits</span><span class="sxs-lookup"><span data-stu-id="7523f-250">sys.server_audits</span></span>](/sql/relational-databases/system-catalog-views/sys-server-audits-transact-sql)|<span data-ttu-id="7523f-251">Enthält eine Zeile für jede [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] -Überwachung in einer Serverinstanz.</span><span class="sxs-lookup"><span data-stu-id="7523f-251">Contains one row for each [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] audit in a server instance.</span></span>|  
|[<span data-ttu-id="7523f-252">sys.server_audit_specifications</span><span class="sxs-lookup"><span data-stu-id="7523f-252">sys.server_audit_specifications</span></span>](/sql/relational-databases/system-catalog-views/sys-server-audit-specifications-transact-sql)|<span data-ttu-id="7523f-253">Enthält Informationen über die Serverüberwachungsspezifikationen in einer [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] -Überwachung auf einer Serverinstanz.</span><span class="sxs-lookup"><span data-stu-id="7523f-253">Contains information about the server audit specifications in a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] audit on a server instance.</span></span>|  
|[<span data-ttu-id="7523f-254">sys.server_audit_specifications_details</span><span class="sxs-lookup"><span data-stu-id="7523f-254">sys.server_audit_specifications_details</span></span>](/sql/relational-databases/system-catalog-views/sys-server-audit-specification-details-transact-sql)|<span data-ttu-id="7523f-255">Enthält Informationen über Details der Serverüberwachungsspezifikation (Aktionen) in einer [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] -Überwachung auf einer Serverinstanz.</span><span class="sxs-lookup"><span data-stu-id="7523f-255">Contains information about the server audit specification details (actions) in a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] audit on a server instance.</span></span>|  
|[<span data-ttu-id="7523f-256">sys.server_file_audits</span><span class="sxs-lookup"><span data-stu-id="7523f-256">sys.server_file_audits</span></span>](/sql/relational-databases/system-catalog-views/sys-server-file-audits-transact-sql)|<span data-ttu-id="7523f-257">Enthält erweiterte Informationen über den Dateiüberwachungstyp in einer [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] -Überwachung auf einer Serverinstanz.</span><span class="sxs-lookup"><span data-stu-id="7523f-257">Contains stores extended information about the file audit type in a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] audit on a server instance.</span></span>|  
  
## <a name="permissions"></a><span data-ttu-id="7523f-258">Berechtigungen</span><span class="sxs-lookup"><span data-stu-id="7523f-258">Permissions</span></span>  
 <span data-ttu-id="7523f-259">Jede Funktion und jeder Befehl für [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Audit hat eigene Berechtigungsanforderungen.</span><span class="sxs-lookup"><span data-stu-id="7523f-259">Each feature and command for [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Audit has individual permission requirements.</span></span>  
  
 <span data-ttu-id="7523f-260">Um eine Serverüberwachung oder eine Serverüberwachungsspezifikation zu erstellen, zu ändern oder zu löschen, muss für Serverüberwachungsprinzipale die Berechtigung ALTER ANY SERVER AUDIT oder CONTROL SERVER festgelegt werden.</span><span class="sxs-lookup"><span data-stu-id="7523f-260">To create, alter, or drop a Server Audit or Server Audit Specification, server principals require the ALTER ANY SERVER AUDIT or the CONTROL SERVER permission.</span></span> <span data-ttu-id="7523f-261">Um eine Datenbank-Überwachungsspezifikation zu erstellen, zu ändern oder zu löschen, muss für Datenbankprinzipale die Berechtigung ALTER ANY DATABASE AUDIT, ALTER oder CONTROL in der Datenbank festgelegt werden.</span><span class="sxs-lookup"><span data-stu-id="7523f-261">To create, alter, or drop a Database Audit Specification, database principals require the ALTER ANY DATABASE AUDIT permission or the ALTER or CONTROL permission on the database.</span></span> <span data-ttu-id="7523f-262">Zusätzlich benötigen Prinzipale die Berechtigung zum Herstellen einer Verbindung mit der Datenbank bzw. die Berechtigung ALTER ANY SERVER AUDIT oder CONTROL SERVER.</span><span class="sxs-lookup"><span data-stu-id="7523f-262">In addition, principals must have permission to connect to the database, or ALTER ANY SERVER AUDIT or CONTROL SERVER permissions.</span></span>  
  
 <span data-ttu-id="7523f-263">Falls nicht anders angegeben, muss ein Prinzipal zum Anzeigen der Katalogsichten über eine der folgenden Berechtigungen verfügen:</span><span class="sxs-lookup"><span data-stu-id="7523f-263">Unless otherwise specified, viewing catalog views requires a principal to have one of the following:</span></span>  
  
-   <span data-ttu-id="7523f-264">Mitgliedschaft in der festen Server Rolle sysadmin.</span><span class="sxs-lookup"><span data-stu-id="7523f-264">Membership in the sysadmin fixed server role.</span></span>  
  
-   <span data-ttu-id="7523f-265">Die CONTROL SERVER-Berechtigung</span><span class="sxs-lookup"><span data-stu-id="7523f-265">The CONTROL SERVER permission.</span></span>  
  
-   <span data-ttu-id="7523f-266">Die VIEW SERVER STATE-Berechtigung</span><span class="sxs-lookup"><span data-stu-id="7523f-266">The VIEW SERVER STATE permission.</span></span>  
  
-   <span data-ttu-id="7523f-267">Die ALTER ANY AUDIT-Berechtigung</span><span class="sxs-lookup"><span data-stu-id="7523f-267">The ALTER ANY AUDIT permission.</span></span>  
  
-   <span data-ttu-id="7523f-268">Die View Audit State-Berechtigung (gewährt nur dem Prinzipal Zugriff auf die Katalog Sicht sys. server_audits).</span><span class="sxs-lookup"><span data-stu-id="7523f-268">The VIEW AUDIT STATE permission (gives only the principal access to the sys.server_audits catalog view).</span></span>  
  
 <span data-ttu-id="7523f-269">Ein Prinzipal muss über die Berechtigung VIEW SERVER STATE oder ALTER ANY AUDIT verfügen, um die dynamischen Verwaltungssichten zu verwenden.</span><span class="sxs-lookup"><span data-stu-id="7523f-269">A principal must have the VIEW SERVER STATE or ALTER ANY AUDIT permission to use the Dynamic Management Views.</span></span>  
  
 <span data-ttu-id="7523f-270">Weitere Informationen über das Gewähren von Rechten und Berechtigungen finden Sie unter [GRANT &#40;Transact-SQL&#41;](/sql/t-sql/statements/grant-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="7523f-270">For more information about how to grant rights and permissions, see [GRANT &#40;Transact-SQL&#41;](/sql/t-sql/statements/grant-transact-sql).</span></span>  
  
> [!CAUTION]  
>  <span data-ttu-id="7523f-271">Prinzipale in der Rolle sysadmin können die Überwachungskomponenten manipulieren; Prinzipale in der Rolle db_owner können Überwachungsspezifikationen in einer Datenbank bearbeiten.</span><span class="sxs-lookup"><span data-stu-id="7523f-271">Principals in the sysadmin role can tamper with any audit component and those in the db_owner role can tamper with audit specifications in a database.</span></span> <span data-ttu-id="7523f-272">Die[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] -Überwachung überprüft, dass bei der Anmeldung, bei der eine Überwachungsspezifikation erstellt oder geändert wird, mindestens die Berechtigung ALTER ANY DATABASE AUDIT vorliegt.</span><span class="sxs-lookup"><span data-stu-id="7523f-272">[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Audit will validate that a logon that creates or alters an audit specification has at least the ALTER ANY DATABASE AUDIT permission.</span></span> <span data-ttu-id="7523f-273">Es wird jedoch keine Überprüfung durchgeführt, wenn Sie eine Datenbank anfügen.</span><span class="sxs-lookup"><span data-stu-id="7523f-273">However, it does no validation when you attach a database.</span></span> <span data-ttu-id="7523f-274">Gehen Sie davon aus, dass alle Datenbank-Überwachungsspezifikationen nur so vertrauenswürdig sind wie die Prinzipale in der Rolle sysadmin oder db_owner.</span><span class="sxs-lookup"><span data-stu-id="7523f-274">You should assume all Database Audit Specifications are only as trustworthy as those principals in the sysadmin or db_owner role.</span></span>  
  
## <a name="related-tasks"></a><span data-ttu-id="7523f-275">Related Tasks</span><span class="sxs-lookup"><span data-stu-id="7523f-275">Related Tasks</span></span>  
 [<span data-ttu-id="7523f-276">Erstellen einer Serverüberwachung und einer Serverüberwachungsspezifikation</span><span class="sxs-lookup"><span data-stu-id="7523f-276">Create a Server Audit and Server Audit Specification</span></span>](create-a-server-audit-and-server-audit-specification.md)  
  
 [<span data-ttu-id="7523f-277">Erstellen einer Server- und Datenbank-Überwachungsspezifikation</span><span class="sxs-lookup"><span data-stu-id="7523f-277">Create a Server Audit and Database Audit Specification</span></span>](create-a-server-audit-and-database-audit-specification.md)  
  
 [<span data-ttu-id="7523f-278">Anzeigen eines SQL Server-Überwachungsprotokolls</span><span class="sxs-lookup"><span data-stu-id="7523f-278">View a SQL Server Audit Log</span></span>](view-a-sql-server-audit-log.md)  
  
 [<span data-ttu-id="7523f-279">Schreiben von SQL-Serverüberwachungsereignissen in das Sicherheitsprotokoll</span><span class="sxs-lookup"><span data-stu-id="7523f-279">Write SQL Server Audit Events to the Security Log</span></span>](write-sql-server-audit-events-to-the-security-log.md)  
  
## <a name="topics-closely-related-to-auditing"></a><span data-ttu-id="7523f-280">Themen zu Überwachung</span><span class="sxs-lookup"><span data-stu-id="7523f-280">Topics Closely Related to Auditing</span></span>  
 [<span data-ttu-id="7523f-281">Servereigenschaften &#40;Seite „Sicherheit“&#41;</span><span class="sxs-lookup"><span data-stu-id="7523f-281">Server Properties &#40;Security Page&#41;</span></span>](../../../database-engine/configure-windows/server-properties-security-page.md)  
 <span data-ttu-id="7523f-282">Erklärt, wie die Anmeldeüberwachung für [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]aktiviert wird.</span><span class="sxs-lookup"><span data-stu-id="7523f-282">Explains how to turn on login auditing for [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="7523f-283">Die Überwachungsdatensätze werden im Windows-Anwendungsprotokoll gespeichert.</span><span class="sxs-lookup"><span data-stu-id="7523f-283">The audit records are stored in the Windows application log.</span></span>  
  
 [<span data-ttu-id="7523f-284">C2-Überwachungsmodus (Serverkonfigurationsoption)</span><span class="sxs-lookup"><span data-stu-id="7523f-284">c2 audit mode Server Configuration Option</span></span>](../../../database-engine/configure-windows/c2-audit-mode-server-configuration-option.md)  
 <span data-ttu-id="7523f-285">Erläutert den C2-Sicherheitskompatibilitäts-Überwachungsmodus in [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="7523f-285">Explains the C2 security compliance auditing mode in [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span></span>  
  
 [<span data-ttu-id="7523f-286">Sicherheitsüberwachung-Ereigniskategorie &#40;SQL Server Profiler&#41;</span><span class="sxs-lookup"><span data-stu-id="7523f-286">Security Audit Event Category &#40;SQL Server Profiler&#41;</span></span>](../../../relational-databases/event-classes/security-audit-event-category-sql-server-profiler.md)  
 <span data-ttu-id="7523f-287">Erklärt die Überwachungsereignisse, die Sie in [!INCLUDE[ssSqlProfiler](../../../includes/sssqlprofiler-md.md)]verwenden können.</span><span class="sxs-lookup"><span data-stu-id="7523f-287">Explains the audit events you can use in [!INCLUDE[ssSqlProfiler](../../../includes/sssqlprofiler-md.md)].</span></span> <span data-ttu-id="7523f-288">Weitere Informationen finden Sie unter [SQL Server Profiler](../../../tools/sql-server-profiler/sql-server-profiler.md).</span><span class="sxs-lookup"><span data-stu-id="7523f-288">For more information, see [SQL Server Profiler](../../../tools/sql-server-profiler/sql-server-profiler.md).</span></span>  
  
 [<span data-ttu-id="7523f-289">SQL-Ablaufverfolgung</span><span class="sxs-lookup"><span data-stu-id="7523f-289">SQL Trace</span></span>](../../sql-trace/sql-trace.md)  
 <span data-ttu-id="7523f-290">Erläutert, wie Sie die SQL-Ablaufverfolgung aus Ihren Anwendungen heraus verwenden können, um Ablaufverfolgungen manuell statt mit dem [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Profiler zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="7523f-290">Explains how SQL Trace can be used from within your own applications to create traces manually, instead of using [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Profiler.</span></span>  
  
 [<span data-ttu-id="7523f-291">DDL-Trigger</span><span class="sxs-lookup"><span data-stu-id="7523f-291">DDL Triggers</span></span>](../../triggers/ddl-triggers.md)  
 <span data-ttu-id="7523f-292">Erklärt, wie Sie DDL-Trigger (Data Definition Language) zum Nachverfolgen von Änderungen an den Datenbanken verwenden können.</span><span class="sxs-lookup"><span data-stu-id="7523f-292">Explains how you can use Data Definition Language (DDL) triggers to track changes to your databases.</span></span>  
  
 [<span data-ttu-id="7523f-293">Microsoft TechNet: SQL Server TechCenter: SQL Server 2005, Sicherheit und Schutz</span><span class="sxs-lookup"><span data-stu-id="7523f-293">Microsoft TechNet: SQL Server TechCenter: SQL Server 2005 Security and Protection</span></span>](https://go.microsoft.com/fwlink/?LinkId=101152)  
 <span data-ttu-id="7523f-294">Stellt aktuelle Informationen zur [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] -Sicherheit bereit.</span><span class="sxs-lookup"><span data-stu-id="7523f-294">Provides up-to-date information about [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] security.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="7523f-295">Weitere Informationen</span><span class="sxs-lookup"><span data-stu-id="7523f-295">See Also</span></span>  
 <span data-ttu-id="7523f-296">[SQL Server Überwachung-Aktionsgruppen und -Aktionen](sql-server-audit-action-groups-and-actions.md) </span><span class="sxs-lookup"><span data-stu-id="7523f-296">[SQL Server Audit Action Groups and Actions](sql-server-audit-action-groups-and-actions.md) </span></span>  
 [<span data-ttu-id="7523f-297">SQL Server-Überwachungsdatensätze</span><span class="sxs-lookup"><span data-stu-id="7523f-297">SQL Server Audit Records</span></span>](sql-server-audit-records.md)  
  
  
