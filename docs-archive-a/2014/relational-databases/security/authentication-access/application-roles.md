---
title: Anwendungsrollen | Microsoft-Dokumentation
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: security
ms.topic: conceptual
helpviewer_keywords:
- application roles [SQL Server], about application roles
- principals [SQL Server], application roles
- credentials [SQL Server], roles
- application roles [SQL Server]
- roles [SQL Server], application
- permissions [SQL Server], roles
- users [SQL Server], application roles
- authentication [SQL Server], roles
- groups [SQL Server], roles
ms.assetid: dca18b8a-ca03-4b7f-9a46-8474d5b66f76
author: VanMSFT
ms.author: vanto
ms.openlocfilehash: f2fcc7b1e333bb42a00675da5bb9fd559d1c34f1
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 08/04/2020
ms.locfileid: "87609771"
---
# <a name="application-roles"></a><span data-ttu-id="f09ba-102">Anwendungsrollen</span><span class="sxs-lookup"><span data-stu-id="f09ba-102">Application Roles</span></span>
  <span data-ttu-id="f09ba-103">Eine Anwendungsrolle ist ein Datenbankprinzipal, mit dem eine Anwendung mit eigenen Berechtigungen ausgeführt werden kann.</span><span class="sxs-lookup"><span data-stu-id="f09ba-103">An application role is a database principal that enables an application to run with its own, user-like permissions.</span></span> <span data-ttu-id="f09ba-104">Sie können Anwendungsrollen verwenden, um den Zugriff auf bestimmte Daten nur den Benutzern zu ermöglichen, die über eine bestimmte Anwendung eine Verbindung herstellen.</span><span class="sxs-lookup"><span data-stu-id="f09ba-104">You can use application roles to enable access to specific data to only those users who connect through a particular application.</span></span> <span data-ttu-id="f09ba-105">Im Gegensatz zu Datenbankrollen enthalten Anwendungsrollen keine Mitglieder und sind standardmäßig inaktiv.</span><span class="sxs-lookup"><span data-stu-id="f09ba-105">Unlike database roles, application roles contain no members and are inactive by default.</span></span> <span data-ttu-id="f09ba-106">Anwendungsrollen können in beiden Authentifizierungsmodi verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="f09ba-106">Application roles work with both authentication modes.</span></span> <span data-ttu-id="f09ba-107">Anwendungsrollen werden mit **sp_setapprole**aktiviert, wofür ein Kennwort erforderlich ist.</span><span class="sxs-lookup"><span data-stu-id="f09ba-107">Application roles are enabled by using **sp_setapprole**, which requires a password.</span></span> <span data-ttu-id="f09ba-108">Da es sich bei Anwendungsrollen um einen Prinzipal auf Datenbankebene handelt, können sie auf andere Datenbanken nur über die Berechtigungen zugreifen, die in diesen Datenbanken dem Konto **guest**erteilt wurden.</span><span class="sxs-lookup"><span data-stu-id="f09ba-108">Because application roles are a database-level principal, they can access other databases only through permissions granted in those databases to **guest**.</span></span> <span data-ttu-id="f09ba-109">Anwendungsrollen anderer Datenbanken können daher auf keine Datenbank zugreifen, in der **guest** deaktiviert wurde.</span><span class="sxs-lookup"><span data-stu-id="f09ba-109">Therefore, any database in which **guest** has been disabled will be inaccessible to application roles in other databases.</span></span>  
  
 <span data-ttu-id="f09ba-110">In [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]können Anwendungsrollen nicht auf Metadaten auf Serverebene zugreifen, da sie nicht mit einem Prinzipal auf Serverebene verbunden sind.</span><span class="sxs-lookup"><span data-stu-id="f09ba-110">In [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)], application roles cannot access server-level metadata because they are not associated with a server-level principal.</span></span> <span data-ttu-id="f09ba-111">Sie können diese Einschränkung deaktivieren und dabei den Anwendungsrollen den Zugriff auf Metadaten auf Serverebene ermöglichen, indem Sie das globale Flag 4616 festlegen.</span><span class="sxs-lookup"><span data-stu-id="f09ba-111">To disable this restriction and thereby allow application roles to access server-level metadata, set the global flag 4616.</span></span> <span data-ttu-id="f09ba-112">Weitere Informationen finden Sie unter [Ablaufverfolgungsflags &#40;Transact-SQL&#41;](/sql/t-sql/database-console-commands/dbcc-traceon-trace-flags-transact-sql) und [DBCC TRACEON &#40;Transact-SQL&#41;](/sql/t-sql/database-console-commands/dbcc-traceon-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="f09ba-112">For more information, see [Trace Flags &#40;Transact-SQL&#41;](/sql/t-sql/database-console-commands/dbcc-traceon-trace-flags-transact-sql) and [DBCC TRACEON &#40;Transact-SQL&#41;](/sql/t-sql/database-console-commands/dbcc-traceon-transact-sql).</span></span>  
  
## <a name="connecting-with-an-application-role"></a><span data-ttu-id="f09ba-113">Herstellen einer Verbindung mit einer Anwendungsrolle</span><span class="sxs-lookup"><span data-stu-id="f09ba-113">Connecting with an Application Role</span></span>  
 <span data-ttu-id="f09ba-114">Der Prozess, in dem eine Anwendungsrolle den Sicherheitskontext wechselt, besteht aus den folgenden Schritten:</span><span class="sxs-lookup"><span data-stu-id="f09ba-114">The following steps make up the process by which an application role switches security contexts:</span></span>  
  
1.  <span data-ttu-id="f09ba-115">Ein Benutzer führt eine Clientanwendung aus.</span><span class="sxs-lookup"><span data-stu-id="f09ba-115">A user executes a client application.</span></span>  
  
2.  <span data-ttu-id="f09ba-116">Die Clientanwendung stellt eine Verbindung mit einer Instanz von [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] als Benutzer her.</span><span class="sxs-lookup"><span data-stu-id="f09ba-116">The client application connects to an instance of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] as the user.</span></span>  
  
3.  <span data-ttu-id="f09ba-117">Die Anwendung führt dann die gespeicherte Prozedur **sp_setapprole** mit einem Kennwort aus, das nur der Anwendung bekannt ist.</span><span class="sxs-lookup"><span data-stu-id="f09ba-117">The application then executes the **sp_setapprole** stored procedure with a password known only to the application.</span></span>  
  
4.  <span data-ttu-id="f09ba-118">Wenn der Name und das Kennwort der Anwendung gültig sind, wird die Anwendungsrolle aktiviert.</span><span class="sxs-lookup"><span data-stu-id="f09ba-118">If the application role name and password are valid, the application role is enabled.</span></span>  
  
5.  <span data-ttu-id="f09ba-119">An diesem Punkt verliert die Verbindung die Berechtigungen des Benutzers und nimmt die Berechtigungen der Anwendungsrolle an.</span><span class="sxs-lookup"><span data-stu-id="f09ba-119">At this point the connection loses the permissions of the user and assumes the permissions of the application role.</span></span>  
  
 <span data-ttu-id="f09ba-120">Die über die Anwendungsrolle erhaltenen Berechtigungen bleiben für die Dauer der Verbindung wirksam.</span><span class="sxs-lookup"><span data-stu-id="f09ba-120">The permissions acquired through the application role remain in effect for the duration of the connection.</span></span>  
  
 <span data-ttu-id="f09ba-121">In früheren Versionen von [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]bestand die einzige Möglichkeit für einen Benutzer, seinen ursprünglichen Sicherheitskontext nach dem Starten einer Anwendungsrolle zurückzuerhalten, darin, die Verbindung mit [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]zu trennen und erneut eine Verbindung herzustellen.</span><span class="sxs-lookup"><span data-stu-id="f09ba-121">In earlier versions of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)], the only way for a user to reacquire its original security context after starting an application role is to disconnect and reconnect to [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="f09ba-122">Seit [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)]besitzt **sp_setapprole** eine Option, die ein Cookie erstellt.</span><span class="sxs-lookup"><span data-stu-id="f09ba-122">Beginning with [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)], **sp_setapprole** has an option that creates a cookie.</span></span> <span data-ttu-id="f09ba-123">Das Cookie enthält die vor der Aktivierung der Anwendungsrolle gültigen Kontextinformationen.</span><span class="sxs-lookup"><span data-stu-id="f09ba-123">The cookie contains context information before the application role is enabled.</span></span> <span data-ttu-id="f09ba-124">Das Cookie kann von **sp_unsetapprole** zum Wiederherstellen des ursprünglichen Kontexts der Sitzung verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="f09ba-124">The cookie can be used by **sp_unsetapprole** to revert the session to its original context.</span></span> <span data-ttu-id="f09ba-125">Weitere Informationen über diese neue Option sowie ein Beispiel finden Sie unter [sp_setapprole &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-setapprole-transact-sql)erteilt wurden.</span><span class="sxs-lookup"><span data-stu-id="f09ba-125">For information about this new option and an example, see [sp_setapprole &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-setapprole-transact-sql).</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="f09ba-126">Die **encrypt** -Option von ODBC wird von **SqlClient**nicht unterstützt.</span><span class="sxs-lookup"><span data-stu-id="f09ba-126">The ODBC **encrypt** option is not supported by **SqlClient**.</span></span> <span data-ttu-id="f09ba-127">Wenn Sie vertrauliche Informationen über das Netzwerk übertragen, sollten Sie zum Verschlüsseln des Kanals SSL (Secure Sockets Layer) oder IPSec verwenden.</span><span class="sxs-lookup"><span data-stu-id="f09ba-127">When you are transmitting confidential information over a network, use Secure Sockets Layer (SSL) or IPsec to encrypt the channel.</span></span> <span data-ttu-id="f09ba-128">Wenn Sie Anmeldeinformationen innerhalb der Clientanwendung persistent speichern müssen, verschlüsseln Sie diese mit den CryptoAPI-Funktionen.</span><span class="sxs-lookup"><span data-stu-id="f09ba-128">If you must persist credentials in the client application, encrypt the credentials by using the crypto API functions.</span></span> <span data-ttu-id="f09ba-129">In [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)] und höheren Versionen wird der *password* -Parameter als unidirektionaler Hash gespeichert.</span><span class="sxs-lookup"><span data-stu-id="f09ba-129">In [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)] and later versions, the parameter *password* is stored as a one-way hash.</span></span>  
  
## <a name="related-tasks"></a><span data-ttu-id="f09ba-130">Related Tasks</span><span class="sxs-lookup"><span data-stu-id="f09ba-130">Related Tasks</span></span>  
  
|||  
|-|-|  
|<span data-ttu-id="f09ba-131">Erstellen einer Anwendungsrolle.</span><span class="sxs-lookup"><span data-stu-id="f09ba-131">Create an application role.</span></span>|<span data-ttu-id="f09ba-132">[Erstellen einer Anwendungsrolle](create-an-application-role.md) und [CREATE APPLICATION ROLE &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-application-role-transact-sql)</span><span class="sxs-lookup"><span data-stu-id="f09ba-132">[Create an Application Role](create-an-application-role.md) and [CREATE APPLICATION ROLE &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-application-role-transact-sql)</span></span>|  
|<span data-ttu-id="f09ba-133">Ändern einer Anwendungsrolle.</span><span class="sxs-lookup"><span data-stu-id="f09ba-133">Alter an application role.</span></span>|[<span data-ttu-id="f09ba-134">ALTER APPLICATION ROLE &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="f09ba-134">ALTER APPLICATION ROLE &#40;Transact-SQL&#41;</span></span>](/sql/t-sql/statements/alter-application-role-transact-sql)|  
|<span data-ttu-id="f09ba-135">Löschen einer Anwendungsrolle.</span><span class="sxs-lookup"><span data-stu-id="f09ba-135">Delete an application role.</span></span>|[<span data-ttu-id="f09ba-136">DROP APPLICATION ROLE &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="f09ba-136">DROP APPLICATION ROLE &#40;Transact-SQL&#41;</span></span>](/sql/t-sql/statements/drop-application-role-transact-sql)|  
|<span data-ttu-id="f09ba-137">Verwenden einer Anwendungsrolle.</span><span class="sxs-lookup"><span data-stu-id="f09ba-137">Using an application role.</span></span>|[<span data-ttu-id="f09ba-138">sp_setapprole &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="f09ba-138">sp_setapprole &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-stored-procedures/sp-setapprole-transact-sql)|  
  
## <a name="see-also"></a><span data-ttu-id="f09ba-139">Weitere Informationen</span><span class="sxs-lookup"><span data-stu-id="f09ba-139">See Also</span></span>  
 [<span data-ttu-id="f09ba-140">Sichern von SQL Server</span><span class="sxs-lookup"><span data-stu-id="f09ba-140">Securing SQL Server</span></span>](../securing-sql-server.md)  
  
  
