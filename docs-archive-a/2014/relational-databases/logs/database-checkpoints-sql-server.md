---
title: Datenbankprüfpunkte (SQL Server) | Microsoft-Dokumentation
ms.custom: ''
ms.date: 10/13/2015
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: supportability
ms.topic: conceptual
helpviewer_keywords:
- automatic checkpoints
- transaction logs [SQL Server], checkpoints
- logs [SQL Server], active
- pages [SQL Server], dirty
- MinLSN
- checkpoints [SQL Server]
- pages [SQL Server], flushing
- dirty pages
- transaction logs [SQL Server], active logs
- recovery interval option [SQL Server]
- buffer cache [SQL Server]
- logs [SQL Server], checkpoints
- Minimum Recovery LSN
- flushing pages
- active logs
ms.assetid: 98a80238-7409-4708-8a7d-5defd9957185
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: 5776d4a23223637c50ac40098fa44342d5cd94a9
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 08/04/2020
ms.locfileid: "87616542"
---
# <a name="database-checkpoints-sql-server"></a><span data-ttu-id="7ec42-102">Datenbankprüfpunkte (SQL Server)</span><span class="sxs-lookup"><span data-stu-id="7ec42-102">Database Checkpoints (SQL Server)</span></span>
  <span data-ttu-id="7ec42-103">Dieses Thema bietet eine Übersicht über [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] -Datenbankprüfpunkte.</span><span class="sxs-lookup"><span data-stu-id="7ec42-103">This topic provides an overview of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] database checkpoints.</span></span> <span data-ttu-id="7ec42-104">Ein *Prüfpunkt* erstellt einen bekannten fehlerfreien Punkt, von dem aus [!INCLUDE[ssDEnoversion](../../includes/ssdenoversion-md.md)] Änderungen übernehmen kann, die im Protokoll während der Wiederherstellung nach einem unerwarteten Herunterfahren oder einem Absturz enthalten sind.</span><span class="sxs-lookup"><span data-stu-id="7ec42-104">A *checkpoint* creates a known good point from which the [!INCLUDE[ssDEnoversion](../../includes/ssdenoversion-md.md)] can start applying changes contained in the log during recovery after an unexpected shutdown or crash.</span></span>  
  
  
##  <a name="overview-of-checkpoints"></a><a name="Overview"></a><span data-ttu-id="7ec42-105">Übersicht über Prüfpunkte</span><span class="sxs-lookup"><span data-stu-id="7ec42-105">Overview of Checkpoints</span></span>  
 <span data-ttu-id="7ec42-106">Aus Leistungsgründen führt [!INCLUDE[ssDE](../../includes/ssde-md.md)] Änderungen an Datenbankseiten im Arbeitsspeicher aus (im Puffercache) und schreibt diese Seiten nicht nach jeder Änderung auf den Datenträger.</span><span class="sxs-lookup"><span data-stu-id="7ec42-106">For performance reasons, the [!INCLUDE[ssDE](../../includes/ssde-md.md)] performs modifications to database pages in memory-in the buffer cache-and does not write these pages to disk after every change.</span></span> <span data-ttu-id="7ec42-107">Vielmehr gibt [!INCLUDE[ssDE](../../includes/ssde-md.md)] in regelmäßigen Abständen einen Prüfpunkt auf jeder Datenbank aus.</span><span class="sxs-lookup"><span data-stu-id="7ec42-107">Rather, the [!INCLUDE[ssDE](../../includes/ssde-md.md)] periodically issues a checkpoint on each database.</span></span> <span data-ttu-id="7ec42-108">Ein *Prüfpunkt* schreibt die aktuellen, speicherintern geänderten Seiten (auch bekannt als *modifizierte Seiten*) sowie Transaktionsprotokollinformationen vom Arbeitsspeicher auf den Datenträger und erfasst auch Informationen zum Transaktionsprotokoll.</span><span class="sxs-lookup"><span data-stu-id="7ec42-108">A *checkpoint* writes the current in-memory modified pages (known as *dirty pages*) and transaction log information from memory to disk and, also, records information about the transaction log.</span></span>  
  
 <span data-ttu-id="7ec42-109">[!INCLUDE[ssDE](../../includes/ssde-md.md)] unterstützt mehrere Typen von Prüfpunkten. Dazu gehören "automatisch", "indirekt", "manuell" und "intern".</span><span class="sxs-lookup"><span data-stu-id="7ec42-109">The [!INCLUDE[ssDE](../../includes/ssde-md.md)] supports several types of checkpoints: automatic, indirect, manual, and internal.</span></span> <span data-ttu-id="7ec42-110">In der folgenden Tabelle werden die Prüfpunkttypen zusammengefasst.</span><span class="sxs-lookup"><span data-stu-id="7ec42-110">The following table summarizes the types of checkpoints.</span></span>  
  
|<span data-ttu-id="7ec42-111">Name</span><span class="sxs-lookup"><span data-stu-id="7ec42-111">Name</span></span>|[!INCLUDE[tsql](../../includes/tsql-md.md)] <span data-ttu-id="7ec42-112">-Schnittstelle</span><span class="sxs-lookup"><span data-stu-id="7ec42-112">Interface</span></span>|<span data-ttu-id="7ec42-113">BESCHREIBUNG</span><span class="sxs-lookup"><span data-stu-id="7ec42-113">Description</span></span>|  
|----------|----------------------------------|-----------------|  
|<span data-ttu-id="7ec42-114">Automatic</span><span class="sxs-lookup"><span data-stu-id="7ec42-114">Automatic</span></span>|<span data-ttu-id="7ec42-115">Exec sp_configure **' `recovery interval` ', ' *`seconds`* '**</span><span class="sxs-lookup"><span data-stu-id="7ec42-115">EXEC sp_configure **'`recovery interval`','*`seconds`*'**</span></span>|<span data-ttu-id="7ec42-116">Wird automatisch im Hintergrund ausgegeben, um das obere Zeit Limit zu erreichen, das von der `recovery interval` Server Konfigurationsoption vorgeschlagen wird.</span><span class="sxs-lookup"><span data-stu-id="7ec42-116">Issued automatically in the background to meet the upper time limit suggested by the `recovery interval` server configuration option.</span></span> <span data-ttu-id="7ec42-117">Automatische Prüfpunkte werden vollständig ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="7ec42-117">Automatic checkpoints run to completion.</span></span>  <span data-ttu-id="7ec42-118">Automatische Prüfpunkte werden auf Basis der Anzahl an ausstehenden Schreibvorgängen gedrosselt. Zudem hängt die Drosselung auch davon ab, ob [!INCLUDE[ssDE](../../includes/ssde-md.md)] eine Erhöhung der Schreiblatenz auf über 20 Millisekunden erkennt.</span><span class="sxs-lookup"><span data-stu-id="7ec42-118">Automatic checkpoints are throttled based on the number of outstanding writes and whether the [!INCLUDE[ssDE](../../includes/ssde-md.md)] detects an increase in write latency above 20 milliseconds.</span></span><br /><br /> <span data-ttu-id="7ec42-119">Weitere Informationen finden Sie unter [Configure the recovery interval Server Configuration Option](../../database-engine/configure-windows/configure-the-recovery-interval-server-configuration-option.md).</span><span class="sxs-lookup"><span data-stu-id="7ec42-119">For more information, see [Configure the recovery interval Server Configuration Option](../../database-engine/configure-windows/configure-the-recovery-interval-server-configuration-option.md).</span></span>|  
|<span data-ttu-id="7ec42-120">Indirekt</span><span class="sxs-lookup"><span data-stu-id="7ec42-120">Indirect</span></span>|<span data-ttu-id="7ec42-121">Datenbank ändern... Festlegen TARGET_RECOVERY_TIME **=** _target_recovery_time_ {Sekunden &#124; Minuten}</span><span class="sxs-lookup"><span data-stu-id="7ec42-121">ALTER DATABASE ... SET TARGET_RECOVERY_TIME **=**_target_recovery_time_ { SECONDS &#124; MINUTES }</span></span>|<span data-ttu-id="7ec42-122">Wird im Hintergrund ausgegeben, um eine benutzerdefinierte Zielwiederherstellungszeit für eine bestimmte Datenbank zu erfüllen.</span><span class="sxs-lookup"><span data-stu-id="7ec42-122">Issued in the background to meet a user-specified target recovery time for a given database.</span></span> <span data-ttu-id="7ec42-123">Die standardmäßige Zielwiederherstellungszeit ist 0. Sie löst die Verwendung der Heuristik für automatische Prüfpunkte auf der Datenbank aus.</span><span class="sxs-lookup"><span data-stu-id="7ec42-123">The default target recovery time is 0, which causes automatic checkpoint heuristics to be used on the database.</span></span> <span data-ttu-id="7ec42-124">Wenn Sie ALTER DATABASE verwendet haben, um TARGET_RECOVERY_TIME auf >0 festzulegen, wird dieser Wert anstelle des Wiederherstellungsintervalls verwendet, das für die Serverinstanz angegeben wurde.</span><span class="sxs-lookup"><span data-stu-id="7ec42-124">If you have used ALTER DATABASE to set TARGET_RECOVERY_TIME to >0, this value is used, rather than the recovery interval specified for the server instance.</span></span><br /><br /> <span data-ttu-id="7ec42-125">Weitere Informationen finden Sie unter [Ändern der Zielwiederherstellungszeit einer Datenbank &#40;SQL Server&#41;](change-the-target-recovery-time-of-a-database-sql-server.md)konfiguriert wird.</span><span class="sxs-lookup"><span data-stu-id="7ec42-125">For more information, see [Change the Target Recovery Time of a Database &#40;SQL Server&#41;](change-the-target-recovery-time-of-a-database-sql-server.md).</span></span>|  
|<span data-ttu-id="7ec42-126">Manuell</span><span class="sxs-lookup"><span data-stu-id="7ec42-126">Manual</span></span>|<span data-ttu-id="7ec42-127">CHECKPOINT [ *checkpoint_duration* ]</span><span class="sxs-lookup"><span data-stu-id="7ec42-127">CHECKPOINT [ *checkpoint_duration* ]</span></span>|<span data-ttu-id="7ec42-128">Wird ausgegeben, wenn Sie einen [!INCLUDE[tsql](../../includes/tsql-md.md)] -CHECKPOINT-Befehl ausführen.</span><span class="sxs-lookup"><span data-stu-id="7ec42-128">Issued when you execute a [!INCLUDE[tsql](../../includes/tsql-md.md)] CHECKPOINT command.</span></span> <span data-ttu-id="7ec42-129">Der manuelle Prüfpunkt tritt in der aktuellen Datenbank für die Verbindung auf.</span><span class="sxs-lookup"><span data-stu-id="7ec42-129">The manual checkpoint occurs in the current database for your connection.</span></span> <span data-ttu-id="7ec42-130">Standardmäßig werden manuelle Prüfpunkte vollständig ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="7ec42-130">By default, manual checkpoints run to completion.</span></span> <span data-ttu-id="7ec42-131">Das Drosseln erfolgt auf die gleiche Weise wie für automatische Prüfpunkte.</span><span class="sxs-lookup"><span data-stu-id="7ec42-131">Throttling works the same way as for automatic checkpoints.</span></span>  <span data-ttu-id="7ec42-132">Optional gibt der *checkpoint_duration* -Parameter die Anforderung an, welchen Zeitraum in Sekunden ein Prüfpunkt benötigen darf, bis er abgeschlossen ist.</span><span class="sxs-lookup"><span data-stu-id="7ec42-132">Optionally, the *checkpoint_duration* parameter specifies a requested amount of time, in seconds, for the checkpoint to complete.</span></span><br /><br /> <span data-ttu-id="7ec42-133">Weitere Informationen finden Sie unter [CHECKPOINT &#40;Transact-SQL&#41;](/sql/t-sql/language-elements/checkpoint-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="7ec42-133">For more information, see [CHECKPOINT &#40;Transact-SQL&#41;](/sql/t-sql/language-elements/checkpoint-transact-sql).</span></span>|  
|<span data-ttu-id="7ec42-134">Intern</span><span class="sxs-lookup"><span data-stu-id="7ec42-134">Internal</span></span>|<span data-ttu-id="7ec42-135">Keine.</span><span class="sxs-lookup"><span data-stu-id="7ec42-135">None.</span></span>|<span data-ttu-id="7ec42-136">Wird von verschiedenen Servervorgängen wie Sicherung und Erstellung einer Datenbank-Momentaufnahme ausgegeben. So wird gewährleistet, dass Datenträgerabbilder dem aktuellen Protokollstatus entsprechen.</span><span class="sxs-lookup"><span data-stu-id="7ec42-136">Issued by various server operations such as backup and database-snapshot creation to guarantee that disk images match the current state of the log.</span></span>|  
  
> [!NOTE]  
>  <span data-ttu-id="7ec42-137">Die erweiterte Einrichtungsoption `-k`[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] ermöglicht Datenbankadministratoren, das Prüfpunkt-E/A-Verhalten auf Basis des Durchsatzes des E/A-Teilsystems für einige Typen von Prüfpunkten zu drosseln.</span><span class="sxs-lookup"><span data-stu-id="7ec42-137">The `-k`[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] advanced setup option enables a database administrator to throttle checkpoint I/O behavior based on the throughput of the I/O subsystem for some types of checkpoints.</span></span> <span data-ttu-id="7ec42-138">Die `-k` Setup Option gilt für automatische Prüfpunkte sowie für andere, nicht gedrosselt manuelle und interne Prüfpunkte.</span><span class="sxs-lookup"><span data-stu-id="7ec42-138">The `-k` setup option applies to automatic checkpoints and any otherwise unthrottled manual and internal checkpoints.</span></span>  
  
 <span data-ttu-id="7ec42-139">Für automatische, manuelle und interne Prüfpunkte muss nur für Änderungen, die nach dem letzten Prüfpunkt erfolgt sind, während der Datenbankwiederherstellung ein Rollforward ausgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="7ec42-139">For automatic, manual, and internal checkpoints, only modifications made after the latest checkpoint need to be rolled forward during database recovery.</span></span> <span data-ttu-id="7ec42-140">Dadurch verringert sich die Zeit, die zur Wiederherstellung einer Datenbank erforderlich ist.</span><span class="sxs-lookup"><span data-stu-id="7ec42-140">This reduces the time required to recover a database.</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="7ec42-141">Lang andauernde Transaktionen ohne Commit erhöhen die Wiederherstellungszeit für alle Typen von Prüfpunkten.</span><span class="sxs-lookup"><span data-stu-id="7ec42-141">Long-running uncommitted transactions increase recovery time for all types of checkpoints.</span></span>  
  
  
  
###  <a name="interaction-of-the-target_recovery_time-and-recovery-interval-options"></a><a name="InteractionBwnSettings"></a> <span data-ttu-id="7ec42-142">Interaktion der Optionen "TTARGET_RECOVERY_TIME" und "Wiederherstellungsintervall"</span><span class="sxs-lookup"><span data-stu-id="7ec42-142">Interaction of the TARGET_RECOVERY_TIME and 'recovery interval' Options</span></span>  
 <span data-ttu-id="7ec42-143">In der folgenden Tabelle wird die Interaktion zwischen der serverweiten \*\*sp_configure- `recovery interval` \*\* Einstellung und der datenbankspezifischen Alter Database... TARGET_RECOVERY_TIME Einstellung.</span><span class="sxs-lookup"><span data-stu-id="7ec42-143">The following table summarizes the interaction between the server-wide **sp_configure'`recovery interval`'** setting and the database-specific ALTER DATABASE ... TARGET_RECOVERY_TIME setting.</span></span>  
  
|<span data-ttu-id="7ec42-144">Zielwiederherstellungszeit</span><span class="sxs-lookup"><span data-stu-id="7ec42-144">TARGET_RECOVERY_TIME</span></span>|<span data-ttu-id="7ec42-145">'Wiederherstellungsintervall'</span><span class="sxs-lookup"><span data-stu-id="7ec42-145">'recovery interval'</span></span>|<span data-ttu-id="7ec42-146">Verwendeter Prüfpunkttyp</span><span class="sxs-lookup"><span data-stu-id="7ec42-146">Type of Checkpoint Used</span></span>|  
|----------------------------|-------------------------|-----------------------------|  
|<span data-ttu-id="7ec42-147">0</span><span class="sxs-lookup"><span data-stu-id="7ec42-147">0</span></span>|<span data-ttu-id="7ec42-148">0</span><span class="sxs-lookup"><span data-stu-id="7ec42-148">0</span></span>|<span data-ttu-id="7ec42-149">Automatische Prüfpunkte, deren Zielwiederherstellungsintervall 1 Minute beträgt.</span><span class="sxs-lookup"><span data-stu-id="7ec42-149">automatic checkpoints whose target recovery interval is 1 minute.</span></span>|  
|<span data-ttu-id="7ec42-150">0</span><span class="sxs-lookup"><span data-stu-id="7ec42-150">0</span></span>|<span data-ttu-id="7ec42-151">>0</span><span class="sxs-lookup"><span data-stu-id="7ec42-151">>0</span></span>|<span data-ttu-id="7ec42-152">Automatische Prüfpunkte, deren Zielwiederherstellungsintervall anhand der benutzerdefinierten Einstellung der Option **sp_configure recovery interval** angegeben wurde.</span><span class="sxs-lookup"><span data-stu-id="7ec42-152">Automatic checkpoints whose target recovery interval is specified by the user defined setting of the **sp_configurerecovery interval** option.</span></span>|  
|<span data-ttu-id="7ec42-153">>0</span><span class="sxs-lookup"><span data-stu-id="7ec42-153">>0</span></span>|<span data-ttu-id="7ec42-154">Nicht zutreffend</span><span class="sxs-lookup"><span data-stu-id="7ec42-154">Not applicable.</span></span>|<span data-ttu-id="7ec42-155">Indirekte Prüfpunkte, deren Zielwiederherstellungszeit anhand der TARGET_RECOVERY_TIME-Einstellung definiert ist (in Sekunden ausgedrückt).</span><span class="sxs-lookup"><span data-stu-id="7ec42-155">Indirect checkpoints whose target recovery time is determined by the TARGET_RECOVERY_TIME setting, expressed in seconds.</span></span>|  
  
###  <a name="automatic-checkpoints"></a><a name="AutomaticChkpt"></a><span data-ttu-id="7ec42-156">Automatische Prüfpunkte</span><span class="sxs-lookup"><span data-stu-id="7ec42-156">Automatic Checkpoints</span></span>  
 <span data-ttu-id="7ec42-157">Ein automatischer Prüfpunkt tritt jedes Mal auf, wenn die Anzahl der Protokolldaten Sätze die Anzahl der [!INCLUDE[ssDE](../../includes/ssde-md.md)] in der `recovery interval` Server Konfigurationsoption angegebenen Zeit erreicht.</span><span class="sxs-lookup"><span data-stu-id="7ec42-157">An automatic checkpoint occurs each time that  the number of log records reaches the number the [!INCLUDE[ssDE](../../includes/ssde-md.md)] estimates it can process during the time specified in the `recovery interval` server configuration option.</span></span> <span data-ttu-id="7ec42-158">In jeder Datenbank ohne benutzerdefinierte Zielwiederherstellungszeit generiert [!INCLUDE[ssDE](../../includes/ssde-md.md)] automatische Prüfpunkte.</span><span class="sxs-lookup"><span data-stu-id="7ec42-158">In every database without a user-defined target recovery time, the [!INCLUDE[ssDE](../../includes/ssde-md.md)] generates automatic checkpoints.</span></span> <span data-ttu-id="7ec42-159">Die Häufigkeit automatischer Prüfpunkte hängt von der `recovery interval` erweiterten Server Konfigurationsoption ab, die die maximale Zeit angibt, die eine bestimmte Serverinstanz zum Wiederherstellen einer Datenbank während eines Systemneustarts verwenden soll.</span><span class="sxs-lookup"><span data-stu-id="7ec42-159">The frequency of automatic checkpoints depends on the `recovery interval` advanced server configuration option, which specifies the maximum time that a given server instance should use to recover a database during a system restart.</span></span> <span data-ttu-id="7ec42-160">[!INCLUDE[ssDE](../../includes/ssde-md.md)] schätzt die maximale Anzahl an Protokolldatensätzen, die innerhalb des Wiederherstellungsintervalls verarbeitet werden können.</span><span class="sxs-lookup"><span data-stu-id="7ec42-160">The [!INCLUDE[ssDE](../../includes/ssde-md.md)] estimates the maximum number of log records it can process within the recovery interval.</span></span> <span data-ttu-id="7ec42-161">Erreicht eine Datenbank, die automatische Prüfpunkte verwendet, diese maximale Anzahl an Protokolldatensätzen, gibt [!INCLUDE[ssDE](../../includes/ssde-md.md)] einen Prüfpunkt auf der Datenbank aus.</span><span class="sxs-lookup"><span data-stu-id="7ec42-161">When a database that is using automatic checkpoints reaches this maximum number of log records, the [!INCLUDE[ssDE](../../includes/ssde-md.md)] issues an checkpoint on the database.</span></span> <span data-ttu-id="7ec42-162">Das Zeitintervall zwischen automatischen Prüfpunkten kann stark variieren.</span><span class="sxs-lookup"><span data-stu-id="7ec42-162">The time interval between automatic checkpoints can be highly variable.</span></span> <span data-ttu-id="7ec42-163">Bei einer Datenbank mit einer beträchtlichen Transaktionsarbeitsauslastung treten häufiger Prüfpunkte auf als bei einer Datenbank für hauptsächlich schreibgeschützte Vorgänge.</span><span class="sxs-lookup"><span data-stu-id="7ec42-163">A database with a substantial transaction workload will have more frequent checkpoints than a database that is used primarily for read-only operations.</span></span>  
  
 <span data-ttu-id="7ec42-164">Im Fall des einfachen Wiederherstellungsmodells wird ein automatischer Prüfpunkt auch in die Warteschlange aufgenommen, wenn das Protokoll zu 70 Prozent gefüllt ist.</span><span class="sxs-lookup"><span data-stu-id="7ec42-164">Also, under the simple recovery model, an automatic checkpoint is also queued if the log becomes 70 percent full.</span></span>  
  
 <span data-ttu-id="7ec42-165">Unter dem einfachen Wiederherstellungsmodell wird der ungenutzte Abschnitt des Transaktionsprotokolls durch einen automatischen Prüfpunkt abgeschnitten, sofern nicht gewisse Faktoren die Protokollkürzung verzögern.</span><span class="sxs-lookup"><span data-stu-id="7ec42-165">Under the simple recovery model, unless some factor is delaying log truncation, an automatic checkpoint truncates the unused section of the transaction log.</span></span> <span data-ttu-id="7ec42-166">Im Gegensatz dazu lösen automatische Prüfpunkte im Fall des vollständigen und massenprotokollierten Wiederherstellungsmodells keine Protokollkürzung aus, sobald eine Protokollsicherungskette eingerichtet wurde.</span><span class="sxs-lookup"><span data-stu-id="7ec42-166">In contrast, under the full and bulk-logged recovery models, once a log backup chain has been established, automatic checkpoints do not cause log truncation.</span></span> <span data-ttu-id="7ec42-167">Weitere Informationen finden Sie unter [Das Transaktionsprotokoll &#40;SQL Server&#41;](the-transaction-log-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="7ec42-167">For more information, see [The Transaction Log &#40;SQL Server&#41;](the-transaction-log-sql-server.md).</span></span>  
  
 <span data-ttu-id="7ec42-168">Nach einem Systemabsturz hängt die Zeitdauer, die für die Wiederherstellung einer bestimmten Datenbank erforderlich ist, stark vom zufälligen E/A-Volumen zur Wiederherstellung der zum Zeitpunkt des Absturzes modifizierten Seiten ab.</span><span class="sxs-lookup"><span data-stu-id="7ec42-168">After a system crash, the length of time required to recover a given database is largely dependent on the amount of random I/O needed to redo pages that were dirty at the time of the crash.</span></span> <span data-ttu-id="7ec42-169">Dies bedeutet, dass die `recovery interval` Einstellung unzuverlässig ist.</span><span class="sxs-lookup"><span data-stu-id="7ec42-169">This means that the `recovery interval` setting is unreliable.</span></span> <span data-ttu-id="7ec42-170">Sie ermöglicht keine genaue Bestimmung der Wiederherstellungsdauer.</span><span class="sxs-lookup"><span data-stu-id="7ec42-170">It cannot determine an accurate recovery duration.</span></span> <span data-ttu-id="7ec42-171">Zudem erhöht sich die allgemeine E/A-Aktivität für Daten erheblich und eher unvorhersehbar, wenn ein automatischer Prüfpunkt ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="7ec42-171">Furthermore, when an automatic checkpoint is in progress, the general I/O activity for data increases significantly and quite unpredictably.</span></span>  
  
  
####  <a name="impact-of-recovery-interval-on-recovery-performance"></a><a name="PerformanceImpact"></a><span data-ttu-id="7ec42-172">Auswirkung des Wiederherstellungs Intervalls auf die Wiederherstellungs Leistung</span><span class="sxs-lookup"><span data-stu-id="7ec42-172">Impact of Recovery Interval on Recovery Performance</span></span>  
 <span data-ttu-id="7ec42-173">Bei einem OLTP-System (Online Transaction Processing, Online Transaktionsverarbeitung), das kurze Transaktionen verwendet, `recovery interval` ist der primäre Faktor zum Bestimmen der Wiederherstellungs</span><span class="sxs-lookup"><span data-stu-id="7ec42-173">For an online transaction processing (OLTP) system using short transactions, `recovery interval` is the primary factor determining recovery time.</span></span> <span data-ttu-id="7ec42-174">Die Option wirkt sich jedoch `recovery interval` nicht auf die Zeit aus, die zum rückgängig einer Transaktion mit langer Laufzeit erforderlich ist.</span><span class="sxs-lookup"><span data-stu-id="7ec42-174">However, the `recovery interval` option does not affect the time required to undo a long-running transaction.</span></span> <span data-ttu-id="7ec42-175">Die Wiederherstellung einer Datenbank mit einer Transaktion mit langer Laufzeit kann deutlich länger dauern als die in der `recovery interval` Option angegebene.</span><span class="sxs-lookup"><span data-stu-id="7ec42-175">Recovery of a database with a long-running transaction can take much longer than the specified in the `recovery interval` option.</span></span> <span data-ttu-id="7ec42-176">Wenn z. b. eine lang ausgeführte Transaktion zwei Stunden dauert, um Updates durchzuführen, bevor die Serverinstanz deaktiviert wurde, dauert die tatsächliche Wiederherstellung erheblich länger als der `recovery interval` Wert für die Wiederherstellung der langen Transaktion.</span><span class="sxs-lookup"><span data-stu-id="7ec42-176">For example, if a long-running transaction took two hours to perform updates before the server instance became disabled, the actual recovery takes considerably longer than the `recovery interval` value to recover the long transaction.</span></span> <span data-ttu-id="7ec42-177">Weitere Informationen zu den Auswirkungen einer Transaktion mit langer Ausführungszeit auf die Wiederherstellungsdauer finden Sie unter [Das Transaktionsprotokoll &#40;SQL Server&#41;](the-transaction-log-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="7ec42-177">For more information about the impact of a long running transaction on recovery time, see [The Transaction Log &#40;SQL Server&#41;](the-transaction-log-sql-server.md).</span></span>  
  
 <span data-ttu-id="7ec42-178">In der Regel gewährleisten die Standardwerte eine optimale Wiederherstellungsleistung.</span><span class="sxs-lookup"><span data-stu-id="7ec42-178">Typically, the default values provides optimal recovery performance.</span></span> <span data-ttu-id="7ec42-179">Durch Ändern des Wiederherstellungsintervalls kann sich jedoch die Leistung in folgenden Fällen verbessern:</span><span class="sxs-lookup"><span data-stu-id="7ec42-179">However, changing the recovery interval might improve performance in the following circumstances:</span></span>  
  
-   <span data-ttu-id="7ec42-180">Die Wiederherstellung dauert routinemäßig bedeutend länger als 1 Minute, wenn kein Rollback für Transaktionen mit langer Laufzeit ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="7ec42-180">If recovery routinely takes significantly longer than 1 minute when long-running transactions are not being rolled back.</span></span>  
  
-   <span data-ttu-id="7ec42-181">Sie stellen fest, dass häufige Prüfpunkte die Datenbankleistung beeinträchtigen.</span><span class="sxs-lookup"><span data-stu-id="7ec42-181">If you notice that frequent checkpoints are impairing performance on a database.</span></span>  
  
 <span data-ttu-id="7ec42-182">Wenn Sie die Einstellung `recovery interval` erhöhen möchten, empfehlen wir eine schrittweise Erhöhung des entsprechenden Werts. Werten Sie zudem die Auswirkungen der jeweiligen stufenweisen Erhöhung auf die Wiederherstellungsleistung aus.</span><span class="sxs-lookup"><span data-stu-id="7ec42-182">If you decide to increase the `recovery interval` setting, we recommend increasing it gradually by small increments and evaluating the effect of each incremental increase on recovery performance.</span></span> <span data-ttu-id="7ec42-183">Diese Vorgehensweise ist wichtig, da die `recovery interval` Einstellung für die Daten Bank Wiederherstellung so oft wie länger dauert.</span><span class="sxs-lookup"><span data-stu-id="7ec42-183">This approach is important because as the `recovery interval` setting increases, database recovery takes that many times longer to complete.</span></span> <span data-ttu-id="7ec42-184">Wenn Sie z `recovery interval` . b. 10 ändern, dauert die Wiederherstellung ungefähr zehnmal länger, als wenn `recovery interval` auf 0 (null) festgelegt ist.</span><span class="sxs-lookup"><span data-stu-id="7ec42-184">For example, if you change `recovery interval` 10, recovery takes approximately 10 times longer to complete than when `recovery interval` is set to zero.</span></span>  
  
  
###  <a name="indirect-checkpoints"></a><a name="IndirectChkpt"></a><span data-ttu-id="7ec42-185">Indirekte Prüfpunkte</span><span class="sxs-lookup"><span data-stu-id="7ec42-185">Indirect Checkpoints</span></span>  
 <span data-ttu-id="7ec42-186">Indirekte Prüfpunkte (neu in [!INCLUDE[ssSQL11](../../includes/sssql11-md.md)]) stellen auf Datenbankebene eine konfigurierbare Alternative zu automatischen Prüfpunkten dar.</span><span class="sxs-lookup"><span data-stu-id="7ec42-186">Indirect checkpoints, new in [!INCLUDE[ssSQL11](../../includes/sssql11-md.md)], provide a configurable database-level alternative to automatic checkpoints.</span></span> <span data-ttu-id="7ec42-187">Im Fall eines Systemabsturzes ermöglichen indirekte Prüfpunkte eine potenziell schnellere und besser vorhersehbare Wiederherstellungszeit als automatische Prüfpunkte.</span><span class="sxs-lookup"><span data-stu-id="7ec42-187">In the event of a system crash, indirect checkpoints provide potentially faster, more predictable recovery time than automatic checkpoints.</span></span> <span data-ttu-id="7ec42-188">Indirekte Prüfpunkte bieten folgende Vorteile:</span><span class="sxs-lookup"><span data-stu-id="7ec42-188">Indirect checkpoints offer the following advantages:</span></span>  
  
-   <span data-ttu-id="7ec42-189">Im Fall einer Arbeitsauslastung für Onlinetransaktionen bei einer Datenbank, die für indirekte Prüfpunkte konfiguriert ist, kann eine Verringerung der Leistung auftreten.</span><span class="sxs-lookup"><span data-stu-id="7ec42-189">An online transactional workload on a database that is configured for indirect checkpoints could experience performance degradation.</span></span> <span data-ttu-id="7ec42-190">Indirekte Prüfpunkte stellen sicher, dass die Anzahl der modifizierten Seiten unter einem bestimmten Schwellenwert liegt, sodass die Datenbankwiederherstellung innerhalb der Zielwiederherstellungszeit abgeschlossen wird.</span><span class="sxs-lookup"><span data-stu-id="7ec42-190">Indirect checkpoints make sure that the number of dirty pages are below a certain threshold so that the database recovery completes within the target recovery time.</span></span> <span data-ttu-id="7ec42-191">Die Konfigurationsoption „Wiederherstellungsintervall“ ermittelt die Wiederherstellungszeit über die Anzahl der Transaktionen. Im Gegensatz dazu greifen indirekte Prüfpunkte auf die Anzahl der modifizierten Seiten zurück.</span><span class="sxs-lookup"><span data-stu-id="7ec42-191">The recovery interval configuration option uses the number of transactions to determine the recovery time as opposed to indirect checkpoints which makes use of number of dirty pages.</span></span> <span data-ttu-id="7ec42-192">Wenn für eine Datenbank, die eine große Anzahl von DML-Vorgängen empfängt, indirekte Prüfpunkte aktiviert sind, können beim Schreiben im Hintergrund leere modifizierte Puffer aggressiv auf den Datenträger geleert werden. Dadurch wird sichergestellt, dass der Zeitaufwand für die Wiederherstellung innerhalb der Zielwiederherstellungszeit der Datenbank liegt.</span><span class="sxs-lookup"><span data-stu-id="7ec42-192">When indirect checkpoints are enabled on a database receiving a large number of DML operations, the background writer can start aggressively flushing dirty buffers to disk to ensure that the time required to perform recovery is within the target recovery time set of the database.</span></span> <span data-ttu-id="7ec42-193">Dies kann auf bestimmten Systemen zusätzliche E/A-Aktivitäten verursachen, die zu einem Leistungsengpass beitragen können, wenn das Datenträgersubsystem über oder nahe dem E/A-Schwellenwert arbeitet.</span><span class="sxs-lookup"><span data-stu-id="7ec42-193">This can cause additional I/O activity on certain systems which can contribute to a performance bottleneck if the disk subsystem is operating above or nearing the I/O threshold.</span></span>  
  
-   <span data-ttu-id="7ec42-194">Indirekte Prüfpunkte ermöglichen Ihnen eine zuverlässige Kontrolle der Datenbankwiederherstellungszeit, indem die Kosten für das zufällige E/A-Volumen während des REDO-Vorgangs berücksichtigt werden.</span><span class="sxs-lookup"><span data-stu-id="7ec42-194">Indirect checkpoints enable you to reliably control database recovery time by factoring in the cost of random I/O during REDO.</span></span> <span data-ttu-id="7ec42-195">Dadurch überschreitet eine Serverinstanz nicht den Obergrenzwert der Wiederherstellungszeiten für eine bestimmte Datenbank, sofern eine Transaktion mit langer Laufzeit keine übermäßig langen UNDO-Vorgänge verursacht.</span><span class="sxs-lookup"><span data-stu-id="7ec42-195">This enables a server instance to stay within an upper-bound on recovery times for a given database (except when a long-running transaction causes excessive UNDO times).</span></span>  
  
-   <span data-ttu-id="7ec42-196">Indirekte Prüfpunkte reduzieren prüfpunktbezogene E/A-Spitzen, indem modifizierte Seiten im Hintergrund kontinuierlich auf den Datenträger geschrieben werden.</span><span class="sxs-lookup"><span data-stu-id="7ec42-196">Indirect checkpoints reduce checkpoint-related I/O spiking by continually writing dirty pages to disk in the background.</span></span>  
  
 <span data-ttu-id="7ec42-197">Im Fall einer Arbeitsauslastung für Onlinetransaktionen bei einer Datenbank, die für indirekte Prüfpunkte konfiguriert ist, kann jedoch eine Verringerung der Leistung auftreten.</span><span class="sxs-lookup"><span data-stu-id="7ec42-197">However, an online transactional workload on a database that is configured for indirect checkpoints could experience performance degradation.</span></span> <span data-ttu-id="7ec42-198">Dies ist darauf zurückzuführen, dass der Hintergrundschreiber, der von indirekten Prüfpunkten verwendet wird, manchmal die Gesamtarbeitsauslastung zum Schreiben für eine Serverinstanz erhöht.</span><span class="sxs-lookup"><span data-stu-id="7ec42-198">This is because the background writer used by indirect checkpoint sometimes increases the total write load for a server instance.</span></span>  
  
  
###  <a name="internal-checkpoints"></a><a name="EventsCausingChkpt"></a><span data-ttu-id="7ec42-199">Interne Prüfpunkte</span><span class="sxs-lookup"><span data-stu-id="7ec42-199">Internal Checkpoints</span></span>  
 <span data-ttu-id="7ec42-200">Interne Prüfpunkte werden von verschiedenen Serverkomponenten generiert, um so gewährleisten zu können, dass Datenträgerabbilder dem aktuellen Protokollstatus entsprechen.</span><span class="sxs-lookup"><span data-stu-id="7ec42-200">Internal Checkpoints are generated by various server components to guarantee that disk images match the current state of the log.</span></span> <span data-ttu-id="7ec42-201">Interne Prüfpunkte werden als Antwort auf die folgenden Ereignisse erstellt:</span><span class="sxs-lookup"><span data-stu-id="7ec42-201">Internal checkpoint are generated in response to the following events:</span></span>  
  
-   <span data-ttu-id="7ec42-202">Datenbankdateien wurden mit ALTER DATABASE hinzugefügt oder entfernt.</span><span class="sxs-lookup"><span data-stu-id="7ec42-202">Database files have been added or removed by using ALTER DATABASE.</span></span>  
  
-   <span data-ttu-id="7ec42-203">Eine vollständige Datenbanksicherung wird ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="7ec42-203">A database backup is taken.</span></span>  
  
-   <span data-ttu-id="7ec42-204">Eine Datenbank-Momentaufnahme wird erstellt, entweder explizit oder intern für DBCC CHECK.</span><span class="sxs-lookup"><span data-stu-id="7ec42-204">A database snapshot is created, whether explicitly or internally for DBCC CHECK.</span></span>  
  
-   <span data-ttu-id="7ec42-205">Eine Aktivität wird ausgeführt, für die das Herunterfahren einer Datenbank erforderlich ist.</span><span class="sxs-lookup"><span data-stu-id="7ec42-205">An activity requiring a database shutdown is performed.</span></span> <span data-ttu-id="7ec42-206">Beispielsweise besitzt AUTO_CLOSE den Status ON, und die letzte Benutzerverbindung mit der Datenbank wird geschlossen, oder eine Änderung einer Datenbankoption wird vorgenommen, für die ein Neustart der Datenbank erforderlich ist.</span><span class="sxs-lookup"><span data-stu-id="7ec42-206">For example, AUTO_CLOSE is ON and the last user connection to the database is closed, or a database option change is made that requires a restart of the database.</span></span>  
  
-   <span data-ttu-id="7ec42-207">Eine [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] -Instanz wird beendet, indem der Dienst [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] (MSSQLSERVER) beendet wird.</span><span class="sxs-lookup"><span data-stu-id="7ec42-207">An instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] is stopped by stopping the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] (MSSQLSERVER) service .</span></span> <span data-ttu-id="7ec42-208">Durch jede der Aktionen wird ein Prüfpunkt in jeder Datenbank der Instanz von [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]ausgelöst.</span><span class="sxs-lookup"><span data-stu-id="7ec42-208">Either action  causes a checkpoint in each database in the instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span>  
  
-   <span data-ttu-id="7ec42-209">Aktivieren des Offlinemodus einer [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] -Failoverclusterinstanz (FCI).</span><span class="sxs-lookup"><span data-stu-id="7ec42-209">Bringing a [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] failover cluster instance (FCI) offline.</span></span>  
  
  
##  <a name="related-tasks"></a><a name="RelatedTasks"></a> <span data-ttu-id="7ec42-210">Verwandte Aufgaben</span><span class="sxs-lookup"><span data-stu-id="7ec42-210">Related Tasks</span></span>  
 <span data-ttu-id="7ec42-211">**So ändern Sie das Wiederherstellungsintervall auf einer Serverinstanz**</span><span class="sxs-lookup"><span data-stu-id="7ec42-211">**To change the recovery interval on a server instance**</span></span>  
  
-   [<span data-ttu-id="7ec42-212">Konfigurieren des Wiederherstellungsintervalls (Serverkonfigurationsoption)</span><span class="sxs-lookup"><span data-stu-id="7ec42-212">Configure the recovery interval Server Configuration Option</span></span>](../../database-engine/configure-windows/configure-the-recovery-interval-server-configuration-option.md)  
  
 <span data-ttu-id="7ec42-213">**So konfigurieren Sie indirekte Prüfpunkte auf einer Datenbank**</span><span class="sxs-lookup"><span data-stu-id="7ec42-213">**To configure indirect checkpoints on a database**</span></span>  
  
-   [<span data-ttu-id="7ec42-214">Ändern der Zielwiederherstellungszeit einer Datenbank &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="7ec42-214">Change the Target Recovery Time of a Database &#40;SQL Server&#41;</span></span>](change-the-target-recovery-time-of-a-database-sql-server.md)  
  
 <span data-ttu-id="7ec42-215">**So geben Sie einen manuellen Prüfpunkt auf einer Datenbank aus**</span><span class="sxs-lookup"><span data-stu-id="7ec42-215">**To issue a manual checkpoint on a database**</span></span>  
  
-   [<span data-ttu-id="7ec42-216">CHECKPOINT &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="7ec42-216">CHECKPOINT &#40;Transact-SQL&#41;</span></span>](/sql/t-sql/language-elements/checkpoint-transact-sql)  
  
  
##  <a name="related-content"></a><a name="RelatedContent"></a> <span data-ttu-id="7ec42-217">Verwandte Inhalte</span><span class="sxs-lookup"><span data-stu-id="7ec42-217">Related Content</span></span>  
  
-   <span data-ttu-id="7ec42-218">[Physische Architektur des Transaktionsprotokolls](https://technet.microsoft.com/library/ms179355.aspx) (in der [!INCLUDE[ssKilimanjaro](../../includes/sskilimanjaro-md.md)] -Onlinedokumentation)</span><span class="sxs-lookup"><span data-stu-id="7ec42-218">[Transaction Log Physical Architecture](https://technet.microsoft.com/library/ms179355.aspx) (in [!INCLUDE[ssKilimanjaro](../../includes/sskilimanjaro-md.md)] Books Oline)</span></span>  
  
  
## <a name="see-also"></a><span data-ttu-id="7ec42-219">Weitere Informationen</span><span class="sxs-lookup"><span data-stu-id="7ec42-219">See Also</span></span>  
 [<span data-ttu-id="7ec42-220">Das Transaktionsprotokoll &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="7ec42-220">The Transaction Log &#40;SQL Server&#41;</span></span>](the-transaction-log-sql-server.md)  
  
  
