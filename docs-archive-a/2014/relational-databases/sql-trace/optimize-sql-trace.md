---
title: Optimieren der SQL-Ablaufverfolgung | Microsoft Dokumentation
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: ''
ms.topic: conceptual
helpviewer_keywords:
- time [SQL Server], traces
- SQL Trace, performance
- traces [SQL Server], performance
- performance [SQL Server], trace
ms.assetid: 50944218-925f-4576-aec8-4379846d7681
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: 831875218423bdb9106d7d84995af1e788da44db
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 08/04/2020
ms.locfileid: "87609040"
---
# <a name="optimize-sql-trace"></a><span data-ttu-id="9f730-102">Optimieren der SQL-Ablaufverfolgung</span><span class="sxs-lookup"><span data-stu-id="9f730-102">Optimize SQL Trace</span></span>
  <span data-ttu-id="9f730-103">Obwohl die SQL-Ablaufverfolgung die Leistung beansprucht, weil Systemressourcen zum Sammeln von Daten verwendet werden, können diese Leistungseinbußen begrenzt werden.</span><span class="sxs-lookup"><span data-stu-id="9f730-103">Although running SQL Trace incurs a performance cost because it uses system resources to gather data, you can do many things to minimize it.</span></span> <span data-ttu-id="9f730-104">Zum Minimieren der Leistungseinbuße durch eine Ablaufverfolgung gibt es folgende Möglichkeiten:</span><span class="sxs-lookup"><span data-stu-id="9f730-104">To minimize the performance cost incurred by a trace, try the following:</span></span>  
  
-   <span data-ttu-id="9f730-105">Sie können auch die Eingabeaufforderung verwenden, um Ablaufverfolgungen auszuführen.</span><span class="sxs-lookup"><span data-stu-id="9f730-105">Consider using the command prompt to run traces.</span></span> <span data-ttu-id="9f730-106">Das Verwenden einer grafischen Benutzeroberfläche beeinträchtigt die Leistung.</span><span class="sxs-lookup"><span data-stu-id="9f730-106">Using a graphical user interface hinders performance.</span></span> <span data-ttu-id="9f730-107">Weitere Informationen finden Sie unter [sp_trace_create &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-trace-create-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="9f730-107">For more information, see [sp_trace_create &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-trace-create-transact-sql).</span></span>  
  
-   <span data-ttu-id="9f730-108">Vermeiden Sie das Einbeziehen von Ereignissen, die häufig auftreten.</span><span class="sxs-lookup"><span data-stu-id="9f730-108">Avoid including events that occur frequently.</span></span> <span data-ttu-id="9f730-109">Schränken Sie die Ablaufverfolgung mithilfe spezifischer Klassen und Filter ein.</span><span class="sxs-lookup"><span data-stu-id="9f730-109">If possible, narrow your trace by means of specific event classes and filters.</span></span> <span data-ttu-id="9f730-110">Durch weniger gesammelte Ablaufverfolgungsereignisse werden weniger Systemressourcen für die Unterstützung der Ablaufverfolgung benötigt.</span><span class="sxs-lookup"><span data-stu-id="9f730-110">If fewer trace events are gathered, fewer system resources are required to support tracing.</span></span>  
  
-   <span data-ttu-id="9f730-111">Fokussieren Sie die Ablaufverfolgung auf das Sammeln derjenigen Ereignisse, die relevante Daten liefern.</span><span class="sxs-lookup"><span data-stu-id="9f730-111">Focus the trace to collect only events that provide relevant data.</span></span> <span data-ttu-id="9f730-112">Wenn Sie beispielsweise eine Ablaufverfolgung zum Identifizieren von Deadlocks ausführen, beziehen Sie die **Lock:Deadlock** -Ereignisklasse ein, nicht aber **Lock:Acquired** .</span><span class="sxs-lookup"><span data-stu-id="9f730-112">For example, if your trace is to identify deadlocks, include the **Lock:Deadlock** event class, but not the **Lock:Acquired** event class.</span></span> <span data-ttu-id="9f730-113">Wenn Sie beide Ereignisklassen einbeziehen, muss von der Ablaufverfolgung auf jede angeforderte Sperre reagiert werden, was die Ausführungskosten verdoppelt.</span><span class="sxs-lookup"><span data-stu-id="9f730-113">If you include both event classes, the trace has to respond to every lock that is acquired, and your execution cost is doubled.</span></span>  
  
-   <span data-ttu-id="9f730-114">Vermeiden Sie das Sammeln doppelter Daten.</span><span class="sxs-lookup"><span data-stu-id="9f730-114">Avoid collecting duplicate data.</span></span> <span data-ttu-id="9f730-115">Wenn Sie beispielsweise **SQL:BatchStarted** und **SQL:BatchCompleted**sammeln, können Sie die Größe des Ergebnissatzes durch das ausschließliche Sammeln von Textdaten für die **SQL:BatchStarted** -Ereignisklasse minimieren.</span><span class="sxs-lookup"><span data-stu-id="9f730-115">For example, if you collect **SQL:BatchStarted** and the **SQL:BatchCompleted**, you can minimize the size of the results set by collecting text data for the **SQL:BatchStarted** event class only.</span></span>  
  
-   <span data-ttu-id="9f730-116">Verwenden Sie in der Ablaufverfolgungsdefinition Filter.</span><span class="sxs-lookup"><span data-stu-id="9f730-116">Use filters in the trace definition.</span></span> <span data-ttu-id="9f730-117">Wenn Sie beispielsweise wissen, dass ein bestimmter Benutzer eine langsame Ausführung während Ad-hoc-Abfragen berichtet, erstellen Sie einen Filter für **LoginName**.</span><span class="sxs-lookup"><span data-stu-id="9f730-117">For example, if you know that a certain user is reporting slow performance during ad hoc queries, create a filter on **LoginName**.</span></span> <span data-ttu-id="9f730-118">Richten Sie den Filter so ein, dass nur Ereignisse einbezogen werden, in denen **LoginName** mit dem Benutzernamen übereinstimmt.</span><span class="sxs-lookup"><span data-stu-id="9f730-118">Set the filter to include only events where the **LoginName** matches that user name.</span></span>  
  
 <span data-ttu-id="9f730-119">Wenn Sie eine Ablaufverfolgung für Ereignisse ausführen müssen, die signifikante Auswirkungen auf die Leistung haben, können Sie mithilfe einer der folgenden Methoden den Leistungsverlust auf dem Server begrenzen:</span><span class="sxs-lookup"><span data-stu-id="9f730-119">If you need to run a trace for events that create a significant impact on performance, consider limiting the performance impact on the server by using one of the following methods:</span></span>  
  
-   <span data-ttu-id="9f730-120">Führen Sie Ablaufverfolgungen für kürzere Zeitspannen durch.</span><span class="sxs-lookup"><span data-stu-id="9f730-120">Run traces for shorter periods of time.</span></span> <span data-ttu-id="9f730-121">Sie können die Dauer der Ausführung einer Ablaufverfolgung steuern, indem Sie eine Beendigungszeit aktivieren.</span><span class="sxs-lookup"><span data-stu-id="9f730-121">You can control the length of time that a trace runs by enabling a stop time.</span></span> <span data-ttu-id="9f730-122">Dies ist besonders wichtig, wenn Sie nicht die Ereignisklassen begrenzen oder ein Ereignis filtern können.</span><span class="sxs-lookup"><span data-stu-id="9f730-122">This is especially important if you cannot limit the event classes or filter an event.</span></span> <span data-ttu-id="9f730-123">Durch das Aktivieren einer Beendigungszeit wird sichergestellt, dass der Leistungsverlust nicht unbegrenzt andauert.</span><span class="sxs-lookup"><span data-stu-id="9f730-123">Enabling a stop time ensures that the performance incurred does not last indefinitely.</span></span>  
  
-   <span data-ttu-id="9f730-124">Begrenzen Sie die Größe der Ablaufverfolgungsergebnisse.</span><span class="sxs-lookup"><span data-stu-id="9f730-124">Limit the size of the trace results.</span></span> <span data-ttu-id="9f730-125">Sie können die Größe der Ablaufverfolgungsergebnisse auf eine maximale Dateigröße beschränken.</span><span class="sxs-lookup"><span data-stu-id="9f730-125">You can limit the size of the trace results to a maximum file size.</span></span> <span data-ttu-id="9f730-126">Durch diese Strategie wird sichergestellt, dass die Leistungseinbußen stoppen, wenn die Dateigrößengrenze erreicht wird (wenn kein Dateirollover aktiviert ist).</span><span class="sxs-lookup"><span data-stu-id="9f730-126">This strategy ensures that the performance cost stops when the file-size limit is reached (if file rollover is not enabled).</span></span>  
  
-   <span data-ttu-id="9f730-127">Schränken Sie die Anzahl der zurückgegebenen Ereignisse ein.</span><span class="sxs-lookup"><span data-stu-id="9f730-127">Limit the number of events returned.</span></span> <span data-ttu-id="9f730-128">Mithilfe von [!INCLUDE[ssSqlProfiler](../../../includes/sssqlprofiler-md.md)] können Sie die Anzahl der zurückgegebenen Ereignisse begrenzen, indem Sie die Ablaufverfolgung in einer Tabelle speichern und die maximale Zeilenanzahl festlegen.</span><span class="sxs-lookup"><span data-stu-id="9f730-128">With [!INCLUDE[ssSqlProfiler](../../../includes/sssqlprofiler-md.md)] you can limit the number of events returned by saving the trace to a table and setting the maximum number of rows.</span></span> <span data-ttu-id="9f730-129">Die Ablaufverfolgungsergebnisse werden weiterhin zum [!INCLUDE[ssSqlProfiler](../../../includes/sssqlprofiler-md.md)] -Bildschirm zurückgegeben, nachdem die maximale Zeilenanzahl erreicht wurde, aber die Kosten für das Aufzeichnen der Ergebnisse in einer Tabelle sind ausgeschaltet.</span><span class="sxs-lookup"><span data-stu-id="9f730-129">Trace results are still returned to the [!INCLUDE[ssSqlProfiler](../../../includes/sssqlprofiler-md.md)] screen after the maximum number of rows has been reached, but the cost of recording the results to a table is eliminated.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="9f730-130">Weitere Informationen</span><span class="sxs-lookup"><span data-stu-id="9f730-130">See Also</span></span>  
 [<span data-ttu-id="9f730-131">Filtern einer Ablaufverfolgung</span><span class="sxs-lookup"><span data-stu-id="9f730-131">Filter a Trace</span></span>](../sql-trace/filter-a-trace.md)  
  
  
