---
title: Erstellen von indizierten Sichten | Microsoft-Dokumentation
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: table-view-index
ms.topic: conceptual
helpviewer_keywords:
- indexed views [SQL Server], creating
- clustered indexes, views
- CREATE INDEX statement
- large_value_types_out_of_row option
- indexed views [SQL Server]
- views [SQL Server], indexed views
ms.assetid: f86dd29f-52dd-44a9-91ac-1eb305c1ca8d
author: stevestein
ms.author: sstein
ms.openlocfilehash: d33ff37caca04f46edd6ad92d0686713829bb270
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 08/04/2020
ms.locfileid: "87608470"
---
# <a name="create-indexed-views"></a><span data-ttu-id="e0626-102">Erstellen von indizierten Sichten</span><span class="sxs-lookup"><span data-stu-id="e0626-102">Create Indexed Views</span></span>
  <span data-ttu-id="e0626-103">In diesem Thema wird beschrieben, wie eine indizierte Sicht in [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] mithilfe von [!INCLUDE[tsql](../../includes/tsql-md.md)]erstellt wird.</span><span class="sxs-lookup"><span data-stu-id="e0626-103">This topic describes how to create an indexed view in [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] by using [!INCLUDE[tsql](../../includes/tsql-md.md)].</span></span> <span data-ttu-id="e0626-104">Der erste Index, der für eine Sicht erstellt wird, muss ein eindeutiger gruppierter Index sein.</span><span class="sxs-lookup"><span data-stu-id="e0626-104">The first index created on a view must be a unique clustered index.</span></span> <span data-ttu-id="e0626-105">Nachdem der eindeutige gruppierte Index erstellt wurde, können Sie weitere nicht gruppierte Indizes erstellen.</span><span class="sxs-lookup"><span data-stu-id="e0626-105">After the unique clustered index has been created, you can create more nonclustered indexes.</span></span> <span data-ttu-id="e0626-106">Das Erstellen eines eindeutigen gruppierten Indexes für eine Sicht verbessert die Abfrageleistung, da die Sicht wie eine Tabelle mit einem gruppierten Index in der Datenbank gespeichert wird.</span><span class="sxs-lookup"><span data-stu-id="e0626-106">Creating a unique clustered index on a view improves query performance because the view is stored in the database in the same way a table with a clustered index is stored.</span></span> <span data-ttu-id="e0626-107">Der Abfrageoptimierer kann indizierte Sichten verwenden, um die Abfrageausführung zu beschleunigen.</span><span class="sxs-lookup"><span data-stu-id="e0626-107">The query optimizer may use indexed views to speed up the query execution.</span></span> <span data-ttu-id="e0626-108">Es ist nicht erforderlich, dass in der Abfrage auf die jeweilige Sicht verwiesen wird, damit der Optimierer diese Sicht als Ersatz berücksichtigt.</span><span class="sxs-lookup"><span data-stu-id="e0626-108">The view does not have to be referenced in the query for the optimizer to consider that view for a substitution.</span></span>  
  
  
  
##  <a name="before-you-begin"></a><a name="BeforeYouBegin"></a> <span data-ttu-id="e0626-109">Vorbereitungen</span><span class="sxs-lookup"><span data-stu-id="e0626-109">Before You Begin</span></span>  
 <span data-ttu-id="e0626-110">Die folgenden Schritte sind zum Erstellen einer indizierten Sicht erforderlich und wichtig für eine erfolgreiche Implementierung der indizierten Sicht:</span><span class="sxs-lookup"><span data-stu-id="e0626-110">The following steps are required to create an indexed view and are critical to the successful implementation of the indexed view:</span></span>  
  
1.  <span data-ttu-id="e0626-111">Stellen Sie sicher, dass die SET-Optionen für alle vorhandenen Tabellen korrekt sind, auf die in der Sicht verwiesen wird.</span><span class="sxs-lookup"><span data-stu-id="e0626-111">Verify the SET options are correct for all existing tables that will be referenced in the view.</span></span>  
  
2.  <span data-ttu-id="e0626-112">Stellen Sie sicher, dass die SET-Optionen für die Sitzung richtig festgelegt sind, bevor Sie Tabellen und die Sicht erstellen.</span><span class="sxs-lookup"><span data-stu-id="e0626-112">Verify that the SET options for the session are set correctly before you create any tables and the view.</span></span>  
  
3.  <span data-ttu-id="e0626-113">Stellen Sie sicher, dass die Sichtdefinition deterministisch ist.</span><span class="sxs-lookup"><span data-stu-id="e0626-113">Verify that the view definition is deterministic.</span></span>  
  
4.  <span data-ttu-id="e0626-114">Erstellen Sie die Sicht mithilfe der Option WITH SCHEMABINDING.</span><span class="sxs-lookup"><span data-stu-id="e0626-114">Create the view by using the WITH SCHEMABINDING option.</span></span>  
  
5.  <span data-ttu-id="e0626-115">Erstellen Sie den eindeutigen gruppierten Index für die Sicht.</span><span class="sxs-lookup"><span data-stu-id="e0626-115">Create the unique clustered index on the view.</span></span>  
  
###  <a name="required-set-options-for-indexed-views"></a><a name="Restrictions"></a> <span data-ttu-id="e0626-116">Erforderliche SET-Optionen für indizierte Sichten</span><span class="sxs-lookup"><span data-stu-id="e0626-116">Required SET Options for Indexed Views</span></span>  
 <span data-ttu-id="e0626-117">Das Auswerten desselben Ausdrucks kann im [!INCLUDE[ssDE](../../includes/ssde-md.md)] zu unterschiedlichen Ergebnissen führen, wenn bei der Ausführung der Abfrage unterschiedliche SET-Optionen aktiviert sind.</span><span class="sxs-lookup"><span data-stu-id="e0626-117">Evaluating the same expression can produce different results in the [!INCLUDE[ssDE](../../includes/ssde-md.md)] when different SET options are active when the query is executed.</span></span> <span data-ttu-id="e0626-118">Wenn die SET-Option CONCAT_NULL_YIELDS_NULL auf ON festgelegt ist, gibt beispielsweise der Ausdruck **'** abc **'** + NULL den Wert NULL zurück.</span><span class="sxs-lookup"><span data-stu-id="e0626-118">For example, after the SET option CONCAT_NULL_YIELDS_NULL is set to ON, the expression **'** abc **'** + NULL returns the value NULL.</span></span> <span data-ttu-id="e0626-119">Wenn die Option CONCAT_NULL_YIEDS_NULL allerdings auf OFF festgelegt ist, ergibt derselbe Ausdruck **'** abc **'**.</span><span class="sxs-lookup"><span data-stu-id="e0626-119">However, after CONCAT_NULL_YIEDS_NULL is set to OFF, the same expression produces **'** abc **'**.</span></span>  
  
 <span data-ttu-id="e0626-120">Um sicherzustellen, dass die Sichten ordnungsgemäß verwaltet werden können und konsistente Ergebnisse zurückgeben, sind für indizierte Sichten feste Werte für mehrere SET-Optionen erforderlich.</span><span class="sxs-lookup"><span data-stu-id="e0626-120">To make sure that the views can be maintained correctly and return consistent results, indexed views require fixed values for several SET options.</span></span> <span data-ttu-id="e0626-121">Die SET-Optionen in der folgenden Tabelle müssen auf die Werte festgelegt werden, die in der Spalte "Requirements **dvalue** " angezeigt werden, wenn die folgenden Bedingungen eintreten:</span><span class="sxs-lookup"><span data-stu-id="e0626-121">The SET options in the following table must be set to the values shown in the **RequiredValue** column whenever the following conditions occur:</span></span>  
  
-   <span data-ttu-id="e0626-122">Die Sicht und nachfolgende Indizes für die Sicht werden erstellt.</span><span class="sxs-lookup"><span data-stu-id="e0626-122">The view and subsequent indexes on the view are created.</span></span>  
  
-   <span data-ttu-id="e0626-123">Die Basistabellen, auf die beim Erstellen der Tabelle in der Sicht verwiesen wird.</span><span class="sxs-lookup"><span data-stu-id="e0626-123">The base tables referenced in the view at the time the table is created.</span></span>  
  
-   <span data-ttu-id="e0626-124">Für eine Tabelle, die Teil der indizierten Sicht ist, wird ein Einfüge-, Update- oder Löschvorgang durchgeführt.</span><span class="sxs-lookup"><span data-stu-id="e0626-124">There is any insert, update, or delete operation performed on any table that participates in the indexed view.</span></span> <span data-ttu-id="e0626-125">Dazu gehören Vorgänge wie Massenkopieren, Replikation und verteilte Abfragen.</span><span class="sxs-lookup"><span data-stu-id="e0626-125">This requirement includes operations such as bulk copy, replication, and distributed queries.</span></span>  
  
-   <span data-ttu-id="e0626-126">Die indizierte Sicht wird vom Abfrageoptimierer verwendet, um den Abfrageplan zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="e0626-126">The indexed view is used by the query optimizer to produce the query plan.</span></span>  
  
    |<span data-ttu-id="e0626-127">SET-Optionen</span><span class="sxs-lookup"><span data-stu-id="e0626-127">SET options</span></span>|<span data-ttu-id="e0626-128">Erforderlicher Wert</span><span class="sxs-lookup"><span data-stu-id="e0626-128">Required value</span></span>|<span data-ttu-id="e0626-129">Standardserverwert</span><span class="sxs-lookup"><span data-stu-id="e0626-129">Default server value</span></span>|<span data-ttu-id="e0626-130">Standard</span><span class="sxs-lookup"><span data-stu-id="e0626-130">Default</span></span><br /><br /> <span data-ttu-id="e0626-131">OLE DB- und ODBC-Wert</span><span class="sxs-lookup"><span data-stu-id="e0626-131">OLE DB and ODBC value</span></span>|<span data-ttu-id="e0626-132">Standard</span><span class="sxs-lookup"><span data-stu-id="e0626-132">Default</span></span><br /><br /> <span data-ttu-id="e0626-133">DB-Library-Wert</span><span class="sxs-lookup"><span data-stu-id="e0626-133">DB-Library value</span></span>|  
    |-----------------|--------------------|--------------------------|---------------------------------------|-----------------------------------|  
    |<span data-ttu-id="e0626-134">ANSI_NULLS</span><span class="sxs-lookup"><span data-stu-id="e0626-134">ANSI_NULLS</span></span>|<span data-ttu-id="e0626-135">EIN</span><span class="sxs-lookup"><span data-stu-id="e0626-135">ON</span></span>|<span data-ttu-id="e0626-136">EIN</span><span class="sxs-lookup"><span data-stu-id="e0626-136">ON</span></span>|<span data-ttu-id="e0626-137">EIN</span><span class="sxs-lookup"><span data-stu-id="e0626-137">ON</span></span>|<span data-ttu-id="e0626-138">OFF</span><span class="sxs-lookup"><span data-stu-id="e0626-138">OFF</span></span>|  
    |<span data-ttu-id="e0626-139">ANSI_PADDING</span><span class="sxs-lookup"><span data-stu-id="e0626-139">ANSI_PADDING</span></span>|<span data-ttu-id="e0626-140">EIN</span><span class="sxs-lookup"><span data-stu-id="e0626-140">ON</span></span>|<span data-ttu-id="e0626-141">EIN</span><span class="sxs-lookup"><span data-stu-id="e0626-141">ON</span></span>|<span data-ttu-id="e0626-142">EIN</span><span class="sxs-lookup"><span data-stu-id="e0626-142">ON</span></span>|<span data-ttu-id="e0626-143">OFF</span><span class="sxs-lookup"><span data-stu-id="e0626-143">OFF</span></span>|  
    |<span data-ttu-id="e0626-144">ANSI_WARNINGS\*</span><span class="sxs-lookup"><span data-stu-id="e0626-144">ANSI_WARNINGS\*</span></span>|<span data-ttu-id="e0626-145">EIN</span><span class="sxs-lookup"><span data-stu-id="e0626-145">ON</span></span>|<span data-ttu-id="e0626-146">EIN</span><span class="sxs-lookup"><span data-stu-id="e0626-146">ON</span></span>|<span data-ttu-id="e0626-147">EIN</span><span class="sxs-lookup"><span data-stu-id="e0626-147">ON</span></span>|<span data-ttu-id="e0626-148">OFF</span><span class="sxs-lookup"><span data-stu-id="e0626-148">OFF</span></span>|  
    |<span data-ttu-id="e0626-149">ARITHABORT</span><span class="sxs-lookup"><span data-stu-id="e0626-149">ARITHABORT</span></span>|<span data-ttu-id="e0626-150">EIN</span><span class="sxs-lookup"><span data-stu-id="e0626-150">ON</span></span>|<span data-ttu-id="e0626-151">EIN</span><span class="sxs-lookup"><span data-stu-id="e0626-151">ON</span></span>|<span data-ttu-id="e0626-152">OFF</span><span class="sxs-lookup"><span data-stu-id="e0626-152">OFF</span></span>|<span data-ttu-id="e0626-153">OFF</span><span class="sxs-lookup"><span data-stu-id="e0626-153">OFF</span></span>|  
    |<span data-ttu-id="e0626-154">CONCAT_NULL_YIELDS_NULL</span><span class="sxs-lookup"><span data-stu-id="e0626-154">CONCAT_NULL_YIELDS_NULL</span></span>|<span data-ttu-id="e0626-155">EIN</span><span class="sxs-lookup"><span data-stu-id="e0626-155">ON</span></span>|<span data-ttu-id="e0626-156">EIN</span><span class="sxs-lookup"><span data-stu-id="e0626-156">ON</span></span>|<span data-ttu-id="e0626-157">EIN</span><span class="sxs-lookup"><span data-stu-id="e0626-157">ON</span></span>|<span data-ttu-id="e0626-158">OFF</span><span class="sxs-lookup"><span data-stu-id="e0626-158">OFF</span></span>|  
    |<span data-ttu-id="e0626-159">NUMERIC_ROUNDABORT</span><span class="sxs-lookup"><span data-stu-id="e0626-159">NUMERIC_ROUNDABORT</span></span>|<span data-ttu-id="e0626-160">OFF</span><span class="sxs-lookup"><span data-stu-id="e0626-160">OFF</span></span>|<span data-ttu-id="e0626-161">OFF</span><span class="sxs-lookup"><span data-stu-id="e0626-161">OFF</span></span>|<span data-ttu-id="e0626-162">OFF</span><span class="sxs-lookup"><span data-stu-id="e0626-162">OFF</span></span>|<span data-ttu-id="e0626-163">OFF</span><span class="sxs-lookup"><span data-stu-id="e0626-163">OFF</span></span>|  
    |<span data-ttu-id="e0626-164">QUOTED_IDENTIFIER</span><span class="sxs-lookup"><span data-stu-id="e0626-164">QUOTED_IDENTIFIER</span></span>|<span data-ttu-id="e0626-165">EIN</span><span class="sxs-lookup"><span data-stu-id="e0626-165">ON</span></span>|<span data-ttu-id="e0626-166">EIN</span><span class="sxs-lookup"><span data-stu-id="e0626-166">ON</span></span>|<span data-ttu-id="e0626-167">EIN</span><span class="sxs-lookup"><span data-stu-id="e0626-167">ON</span></span>|<span data-ttu-id="e0626-168">OFF</span><span class="sxs-lookup"><span data-stu-id="e0626-168">OFF</span></span>|  
  
     <span data-ttu-id="e0626-169">\*Wenn Sie ANSI_WARNINGS auf ON festlegen, wird ARITHABORT implizit auf ON festgelegt.</span><span class="sxs-lookup"><span data-stu-id="e0626-169">\*Setting ANSI_WARNINGS to ON implicitly sets ARITHABORT to ON.</span></span>  
  
 <span data-ttu-id="e0626-170">Wenn Sie eine OLE DB- oder ODBC-Serververbindung verwenden, müssen Sie nur den Wert der ARITHABORT-Einstellung ändern.</span><span class="sxs-lookup"><span data-stu-id="e0626-170">If you are using an OLE DB or ODBC server connection, the only value that must be modified is the ARITHABORT setting.</span></span> <span data-ttu-id="e0626-171">Alle DB-Library-Werte müssen entweder auf Serverebene mithilfe von **sp_configure** oder über die Anwendung mithilfe des SET-Befehls ordnungsgemäß festgelegt werden.</span><span class="sxs-lookup"><span data-stu-id="e0626-171">All DB-Library values must be set correctly either at the server level by using **sp_configure** or from the application by using the SET command.</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="e0626-172">Es wird dringend empfohlen, die Benutzeroption ARITHABORT serverweit auf ON festzulegen, sobald in einer Datenbank auf dem Server die erste indizierte Sicht oder der erste Index für eine berechnete Spalte erstellt wird.</span><span class="sxs-lookup"><span data-stu-id="e0626-172">We strongly recommend that you set the ARITHABORT user option to ON server-wide as soon as the first indexed view or index on a computed column is created in any database on the server.</span></span>  
  
### <a name="deterministic-views"></a><span data-ttu-id="e0626-173">Deterministische Sichten</span><span class="sxs-lookup"><span data-stu-id="e0626-173">Deterministic Views</span></span>  
 <span data-ttu-id="e0626-174">Die Definition einer indizierten Sicht muss deterministisch sein.</span><span class="sxs-lookup"><span data-stu-id="e0626-174">The definition of an indexed view must be deterministic.</span></span> <span data-ttu-id="e0626-175">Eine Sicht ist deterministisch, wenn alle Ausdrücke in der Auswahlliste sowie die WHERE-Klausel und die GROUP BY-Klausel deterministisch sind.</span><span class="sxs-lookup"><span data-stu-id="e0626-175">A view is deterministic if all expressions in the select list, as well as the WHERE and GROUP BY clauses, are deterministic.</span></span> <span data-ttu-id="e0626-176">Deterministische Ausdrücke geben stets dasselbe Ergebnis zurück, wenn sie mit einer bestimmten Gruppe von Eingabewerten ausgewertet werden.</span><span class="sxs-lookup"><span data-stu-id="e0626-176">Deterministic expressions always return the same result any time they are evaluated with a specific set of input values.</span></span> <span data-ttu-id="e0626-177">Nur deterministische Funktionen können Teil von deterministischen Ausdrücken sein.</span><span class="sxs-lookup"><span data-stu-id="e0626-177">Only deterministic functions can participate in deterministic expressions.</span></span> <span data-ttu-id="e0626-178">Beispielsweise ist die DATEADD-Funktion deterministisch, weil sie für eine bestimmte Gruppe von Argumentwerten stets dasselbe Ergebnis für die drei Parameter zurückgibt.</span><span class="sxs-lookup"><span data-stu-id="e0626-178">For example, the DATEADD function is deterministic because it always returns the same result for any given set of argument values for its three parameters.</span></span> <span data-ttu-id="e0626-179">GETDATE ist nicht deterministisch, da diese Funktion immer mit demselben Argument aufgerufen wird, der zurückgegebene Wert jedoch bei jeder Ausführung unterschiedlich ist.</span><span class="sxs-lookup"><span data-stu-id="e0626-179">GETDATE is not deterministic because it is always invoked with the same argument, but the value it returns changes each time it is executed.</span></span>  
  
 <span data-ttu-id="e0626-180">Um zu bestimmen, ob eine Sichtspalte deterministisch ist, verwenden Sie die **IsDeterministic** -Eigenschaft der [COLUMNPROPERTY](/sql/t-sql/functions/columnproperty-transact-sql) -Funktion.</span><span class="sxs-lookup"><span data-stu-id="e0626-180">To determine whether a view column is deterministic, use the **IsDeterministic** property of the [COLUMNPROPERTY](/sql/t-sql/functions/columnproperty-transact-sql) function.</span></span> <span data-ttu-id="e0626-181">Mithilfe der **IsPrecise** -Eigenschaft der COLUMNPROPERTY-Funktion können Sie bestimmen, ob eine deterministische Spalte in einer Sicht mit Schemabindung präzise ist.</span><span class="sxs-lookup"><span data-stu-id="e0626-181">To determine if a deterministic column in a view with schema binding is precise, use the **IsPrecise** property of the COLUMNPROPERTY function.</span></span> <span data-ttu-id="e0626-182">COLUMNPROPERTY gibt den Wert 1 für TRUE, den Wert 0 für FALSE und NULL für ungültige Eingaben zurück.</span><span class="sxs-lookup"><span data-stu-id="e0626-182">COLUMNPROPERTY returns 1 if TRUE, 0 if FALSE, and NULL for input that is not valid.</span></span> <span data-ttu-id="e0626-183">Dies bedeutet, dass die Spalte nicht deterministisch oder nicht präzise ist.</span><span class="sxs-lookup"><span data-stu-id="e0626-183">This means the column is not deterministic or not precise.</span></span>  
  
 <span data-ttu-id="e0626-184">Auch wenn ein Ausdruck deterministisch ist, kann das exakte Ergebnis von der Prozessorarchitektur oder der Version des Microcodes abhängen, wenn dieser Ausdruck float-Ausdrücke enthält.</span><span class="sxs-lookup"><span data-stu-id="e0626-184">Even if an expression is deterministic, if it contains float expressions, the exact result may depend on the processor architecture or version of microcode.</span></span> <span data-ttu-id="e0626-185">Um die Datenintegrität sicherzustellen, können solche Ausdrücke nur als Nichtschlüsselspalten von indizierten Sichten verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="e0626-185">To ensure data integrity, such expressions can participate only as non-key columns of indexed views.</span></span> <span data-ttu-id="e0626-186">Deterministische Ausdrücke, die keine float-Ausdrücke enthalten, werden als präzise bezeichnet.</span><span class="sxs-lookup"><span data-stu-id="e0626-186">Deterministic expressions that do not contain float expressions are called precise.</span></span> <span data-ttu-id="e0626-187">Nur präzise deterministische Ausdrücke können in indizierten Sichten Teile von Schlüsselspalten und von WHERE-Klauseln oder GROUP BY-Klauseln sein.</span><span class="sxs-lookup"><span data-stu-id="e0626-187">Only precise deterministic expressions can participate in key columns and in WHERE or GROUP BY clauses of indexed views.</span></span>  
  
### <a name="additional-requirements"></a><span data-ttu-id="e0626-188">Zusätzliche Anforderungen</span><span class="sxs-lookup"><span data-stu-id="e0626-188">Additional Requirements</span></span>  
 <span data-ttu-id="e0626-189">Zusätzlich zu den Anforderungen bzgl. SET-Optionen und deterministischen Funktionen müssen die folgenden Anforderungen erfüllt werden:</span><span class="sxs-lookup"><span data-stu-id="e0626-189">In addition to the SET options and deterministic function requirements, the following requirements must be met:</span></span>  
  
-   <span data-ttu-id="e0626-190">Der Benutzer, der die CREATE INDEX-Anweisung ausführt, muss der Besitzer der Sicht sein.</span><span class="sxs-lookup"><span data-stu-id="e0626-190">The user that executes CREATE INDEX must be the owner of the view.</span></span>  
  
-   <span data-ttu-id="e0626-191">Wenn Sie den Index erstellen, muss die Option IGNORE_DUP_KEY auf OFF (Standardeinstellung) festgelegt sein.</span><span class="sxs-lookup"><span data-stu-id="e0626-191">When you create the index, the IGNORE_DUP_KEY option must be set to OFF (the default setting).</span></span>  
  
-   <span data-ttu-id="e0626-192">Auf Tabellen muss in der Sichtdefinition mit dem zweiteiligen Namen _Schema_ **.** _Tabellenname_ verwiesen werden.</span><span class="sxs-lookup"><span data-stu-id="e0626-192">Tables must be referenced by two-part names, _schema_**.**_tablename_ in the view definition.</span></span>  
  
-   <span data-ttu-id="e0626-193">Benutzerdefinierte Funktionen, auf die in der Sicht verwiesen wird, müssen mit der Option WITH SCHEMABINDING erstellt werden.</span><span class="sxs-lookup"><span data-stu-id="e0626-193">User-defined functions referenced in the view must be created by using the WITH SCHEMABINDING option.</span></span>  
  
-   <span data-ttu-id="e0626-194">Auf benutzerdefinierte Funktionen, auf die in der Sicht verwiesen wird, muss durch zweiteilige Namen, _Schema_, verwiesen werden **.** - _Funktion_.</span><span class="sxs-lookup"><span data-stu-id="e0626-194">Any user-defined functions referenced in the view must be referenced by two-part names, _schema_**.**_function_.</span></span>  
  
-   <span data-ttu-id="e0626-195">Die Datenzugriffseigenschaft einer benutzerdefinierten Funktion muss NO SQL lauten, und die Eigenschaft für den externen Zugriff muss NO lauten.</span><span class="sxs-lookup"><span data-stu-id="e0626-195">The data access property of a user-defined function must be NO SQL, and external access property must be NO.</span></span>  
  
-   <span data-ttu-id="e0626-196">CLR-Funktionen (Common Language Runtime) können in der SELECT-Liste der Sicht angezeigt werden, können aber nicht Teil der Definition des gruppierten Indexschlüssels sein.</span><span class="sxs-lookup"><span data-stu-id="e0626-196">Common language runtime (CLR) functions can appear in the select list of the view, but cannot be part of the definition of the clustered index key.</span></span> <span data-ttu-id="e0626-197">CLR-Funktionen können nicht in der WHERE-Klausel der Sicht oder in der ON-Klausel einer JOIN-Operation in der Sicht auftreten.</span><span class="sxs-lookup"><span data-stu-id="e0626-197">CLR functions cannot appear in the WHERE clause of the view or the ON clause of a JOIN operation in the view.</span></span>  
  
-   <span data-ttu-id="e0626-198">Für CLR-Funktionen und -Methoden der CLR-benutzerdefinierten Typen, die in der Sichtdefinition verwendet werden, müssen die in der folgenden Tabelle dargestellten Eigenschaften festgelegt werden.</span><span class="sxs-lookup"><span data-stu-id="e0626-198">CLR functions and methods of CLR user-defined types used in the view definition must have the properties set as shown in the following table.</span></span>  
  
    |<span data-ttu-id="e0626-199">Eigenschaft</span><span class="sxs-lookup"><span data-stu-id="e0626-199">Property</span></span>|<span data-ttu-id="e0626-200">Hinweis</span><span class="sxs-lookup"><span data-stu-id="e0626-200">Note</span></span>|  
    |--------------|----------|  
    |<span data-ttu-id="e0626-201">DETERMINISTIC = TRUE</span><span class="sxs-lookup"><span data-stu-id="e0626-201">DETERMINISTIC = TRUE</span></span>|<span data-ttu-id="e0626-202">Muss explizit als ein Attribut der Microsoft .NET Framework-Methode deklariert werden.</span><span class="sxs-lookup"><span data-stu-id="e0626-202">Must be declared explicitly as an attribute of the Microsoft .NET Framework method.</span></span>|  
    |<span data-ttu-id="e0626-203">PRECISE = TRUE</span><span class="sxs-lookup"><span data-stu-id="e0626-203">PRECISE = TRUE</span></span>|<span data-ttu-id="e0626-204">Muss explizit als ein Attribut der .NET Framework-Methode deklariert werden.</span><span class="sxs-lookup"><span data-stu-id="e0626-204">Must be declared explicitly as an attribute of the .NET Framework method.</span></span>|  
    |<span data-ttu-id="e0626-205">DATA ACCESS = NO SQL</span><span class="sxs-lookup"><span data-stu-id="e0626-205">DATA ACCESS = NO SQL</span></span>|<span data-ttu-id="e0626-206">Wird durch Festlegen des DataAccess-Attributs auf DataAccessKind.None und des SystemDataAccess-Attributs auf SystemDataAccessKind.None bestimmt.</span><span class="sxs-lookup"><span data-stu-id="e0626-206">Determined by setting DataAccess attribute to DataAccessKind.None and SystemDataAccess attribute to SystemDataAccessKind.None.</span></span>|  
    |<span data-ttu-id="e0626-207">EXTERNAL ACCESS = NO</span><span class="sxs-lookup"><span data-stu-id="e0626-207">EXTERNAL ACCESS = NO</span></span>|<span data-ttu-id="e0626-208">Diese Eigenschaft ist für CLR-Routinen standardmäßig auf NO festgelegt.</span><span class="sxs-lookup"><span data-stu-id="e0626-208">This property defaults to NO for CLR routines.</span></span>|  
  
-   <span data-ttu-id="e0626-209">Die Sicht muss mithilfe der Option WITH SCHEMABINDING erstellt werden.</span><span class="sxs-lookup"><span data-stu-id="e0626-209">The view must be created by using the WITH SCHEMABINDING option.</span></span>  
  
-   <span data-ttu-id="e0626-210">Die Sicht darf nur auf Basistabellen in derselben Datenbank wie die Sicht verweisen.</span><span class="sxs-lookup"><span data-stu-id="e0626-210">The view must reference only base tables that are in the same database as the view.</span></span> <span data-ttu-id="e0626-211">Die Sicht kann nicht auf andere Sichten verweisen.</span><span class="sxs-lookup"><span data-stu-id="e0626-211">The view cannot reference other views.</span></span>  
  
-   <span data-ttu-id="e0626-212">Die SELECT-Anweisung in der Sichtdefinition darf die folgenden Transact-SQL-Elemente nicht enthalten:</span><span class="sxs-lookup"><span data-stu-id="e0626-212">The SELECT statement in the view definition must not contain the following Transact-SQL elements:</span></span>  
  
    ||||  
    |-|-|-|  
    |<span data-ttu-id="e0626-213">COUNT</span><span class="sxs-lookup"><span data-stu-id="e0626-213">COUNT</span></span>|<span data-ttu-id="e0626-214">ROWSET-Funktionen (OPENDATASOURCE, OPENQUERY, OPENROWSET UND OPENXML)</span><span class="sxs-lookup"><span data-stu-id="e0626-214">ROWSET functions (OPENDATASOURCE, OPENQUERY, OPENROWSET, AND OPENXML)</span></span>|<span data-ttu-id="e0626-215">OUTER-Joins (LEFT, RIGHT oder FULL)</span><span class="sxs-lookup"><span data-stu-id="e0626-215">OUTER joins (LEFT, RIGHT, or FULL)</span></span>|  
    |<span data-ttu-id="e0626-216">Abgeleitete Tabelle (durch Angabe einer SELECT-Anweisung in der FROM-Klausel definiert)</span><span class="sxs-lookup"><span data-stu-id="e0626-216">Derived table (defined by specifying a SELECT statement in the FROM clause)</span></span>|<span data-ttu-id="e0626-217">Selbstjoins</span><span class="sxs-lookup"><span data-stu-id="e0626-217">Self-joins</span></span>|<span data-ttu-id="e0626-218">Durch Angeben von Spalten mit SELECT \* oder SELECT *Tabellenname*.\*</span><span class="sxs-lookup"><span data-stu-id="e0626-218">Specifying columns by using SELECT \* or SELECT *table_name*.\*</span></span>|  
    |<span data-ttu-id="e0626-219">DISTINCT</span><span class="sxs-lookup"><span data-stu-id="e0626-219">DISTINCT</span></span>|<span data-ttu-id="e0626-220">STDEV, STDEVP, VAR, VARP oder AVG</span><span class="sxs-lookup"><span data-stu-id="e0626-220">STDEV, STDEVP, VAR, VARP, or AVG</span></span>|<span data-ttu-id="e0626-221">Allgemeine Tabellenausdrücke (CTE, Common Table Expression)</span><span class="sxs-lookup"><span data-stu-id="e0626-221">Common table expression (CTE)</span></span>|  
    |<span data-ttu-id="e0626-222">`float`\*-,-,-,-,- `text` `ntext` oder- `image` `XML` `filestream` Spalten</span><span class="sxs-lookup"><span data-stu-id="e0626-222">`float`\*, `text`, `ntext`, `image`, `XML`, or `filestream` columns</span></span>|<span data-ttu-id="e0626-223">Unterabfrage</span><span class="sxs-lookup"><span data-stu-id="e0626-223">Subquery</span></span>|<span data-ttu-id="e0626-224">Die OVER-Klausel, die Fensterrang- oder Fensteraggregatfunktionen enthält.</span><span class="sxs-lookup"><span data-stu-id="e0626-224">OVER clause, which includes ranking or aggregate window functions</span></span>|  
    |<span data-ttu-id="e0626-225">Volltextprädikate (CONTAIN, FREETEXT)</span><span class="sxs-lookup"><span data-stu-id="e0626-225">Full-text predicates (CONTAIN, FREETEXT)</span></span>|<span data-ttu-id="e0626-226">Eine SUM-Funktion, die auf einen Ausdruck verweist, der NULL zulässt.</span><span class="sxs-lookup"><span data-stu-id="e0626-226">SUM function that references a nullable expression</span></span>|<span data-ttu-id="e0626-227">ORDER BY</span><span class="sxs-lookup"><span data-stu-id="e0626-227">ORDER BY</span></span>|  
    |<span data-ttu-id="e0626-228">CLR-benutzerdefinierte Aggregatfunktion</span><span class="sxs-lookup"><span data-stu-id="e0626-228">CLR user-defined aggregate function</span></span>|<span data-ttu-id="e0626-229">TOP</span><span class="sxs-lookup"><span data-stu-id="e0626-229">TOP</span></span>|<span data-ttu-id="e0626-230">Die Operatoren CUBE, ROLLUP oder GROUPING SETS</span><span class="sxs-lookup"><span data-stu-id="e0626-230">CUBE, ROLLUP, or GROUPING SETS operators</span></span>|  
    |<span data-ttu-id="e0626-231">MIN, MAX</span><span class="sxs-lookup"><span data-stu-id="e0626-231">MIN, MAX</span></span>|<span data-ttu-id="e0626-232">Die Operatoren UNION, EXCEPT oder INTERSECT</span><span class="sxs-lookup"><span data-stu-id="e0626-232">UNION, EXCEPT, or INTERSECT operators</span></span>|<span data-ttu-id="e0626-233">TABLESAMPLE</span><span class="sxs-lookup"><span data-stu-id="e0626-233">TABLESAMPLE</span></span>|  
    |<span data-ttu-id="e0626-234">Tabellenvariablen</span><span class="sxs-lookup"><span data-stu-id="e0626-234">Table variables</span></span>|<span data-ttu-id="e0626-235">OUTER APPLY oder CROSS APPLY</span><span class="sxs-lookup"><span data-stu-id="e0626-235">OUTER APPLY or CROSS APPLY</span></span>|<span data-ttu-id="e0626-236">PIVOT, UNPIVOT</span><span class="sxs-lookup"><span data-stu-id="e0626-236">PIVOT, UNPIVOT</span></span>|  
    |<span data-ttu-id="e0626-237">Spaltensätze mit geringer Dichte</span><span class="sxs-lookup"><span data-stu-id="e0626-237">Sparse column sets</span></span>|<span data-ttu-id="e0626-238">Tabellenwertfunktionen mit Inlinefunktionen oder Funktionen mit mehreren Anweisungen</span><span class="sxs-lookup"><span data-stu-id="e0626-238">Inline or multi-statement table-valued functions</span></span>|<span data-ttu-id="e0626-239">OFFSET</span><span class="sxs-lookup"><span data-stu-id="e0626-239">OFFSET</span></span>|  
    |<span data-ttu-id="e0626-240">CHECKSUM_AGG</span><span class="sxs-lookup"><span data-stu-id="e0626-240">CHECKSUM_AGG</span></span>|||  
  
     <span data-ttu-id="e0626-241">\*Die indizierte Sicht kann `float` Spalten enthalten. Allerdings können solche Spalten nicht im Schlüssel des gruppierten Indexes enthalten sein.</span><span class="sxs-lookup"><span data-stu-id="e0626-241">\*The indexed view can contain `float` columns; however, such columns cannot be included in the clustered index key.</span></span>  
  
-   <span data-ttu-id="e0626-242">Wenn GROUP BY vorhanden ist, muss die VIEW-Definition COUNT_BIG(\*) enthalten, während HAVING nicht enthalten sein darf.</span><span class="sxs-lookup"><span data-stu-id="e0626-242">If GROUP BY is present, the VIEW definition must contain COUNT_BIG(\*) and must not contain HAVING.</span></span> <span data-ttu-id="e0626-243">Diese GROUP BY-Einschränkungen gelten nur für die indizierte Sichtdefinition.</span><span class="sxs-lookup"><span data-stu-id="e0626-243">These GROUP BY restrictions are applicable only to the indexed view definition.</span></span> <span data-ttu-id="e0626-244">Im Ausführungsplan einer Abfrage kann eine indizierte Sicht auch dann verwendet werden, wenn sie diese GROUP BY-Einschränkungen nicht erfüllt.</span><span class="sxs-lookup"><span data-stu-id="e0626-244">A query can use an indexed view in its execution plan even if it does not satisfy these GROUP BY restrictions.</span></span>  
  
-   <span data-ttu-id="e0626-245">Wenn die Sichtdefinition eine GROUP BY-Klausel enthält, kann der Schlüssel des eindeutigen gruppierten Index nur auf die Spalten verweisen, die in der GROUP BY-Klausel angegeben sind.</span><span class="sxs-lookup"><span data-stu-id="e0626-245">If the view definition contains a GROUP BY clause, the key of the unique clustered index can reference only the columns specified in the GROUP BY clause.</span></span>  
  
###  <a name="recommendations"></a><a name="Recommendations"></a> <span data-ttu-id="e0626-246">Empfehlungen</span><span class="sxs-lookup"><span data-stu-id="e0626-246">Recommendations</span></span>  
 <span data-ttu-id="e0626-247">Wenn Sie in indizierten Sichten auf `datetime`- und `smalldatetime`-Zeichenfolgenliterale verweisen, wird empfohlen, das Literal mithilfe eines deterministischen Datenformats explizit in den gewünschten Datentyp zu konvertieren.</span><span class="sxs-lookup"><span data-stu-id="e0626-247">When you refer to `datetime` and `smalldatetime` string literals in indexed views, we recommend that you explicitly convert the literal to the date type you want by using a deterministic date format style.</span></span> <span data-ttu-id="e0626-248">Eine Liste der deterministischen Datenformatstile finden Sie unter [CAST und CONVERT &#40;Transact-SQL&#41;](/sql/t-sql/functions/cast-and-convert-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="e0626-248">For a list of the date format styles that are deterministic, see [CAST and CONVERT &#40;Transact-SQL&#41;](/sql/t-sql/functions/cast-and-convert-transact-sql).</span></span> <span data-ttu-id="e0626-249">Ausdrücke, die eine implizite Konvertierung von Zeichenfolgen in `datetime` oder `smalldatetime` umfassen, werden als nicht deterministisch angesehen.</span><span class="sxs-lookup"><span data-stu-id="e0626-249">Expressions that involve implicit conversion of character strings to `datetime` or `smalldatetime` are considered nondeterministic.</span></span> <span data-ttu-id="e0626-250">Der Grund hierfür ist, dass die Ergebnisse von den LANGUAGE- und DATEFORMAT-Einstellungen der Serversitzung abhängen.</span><span class="sxs-lookup"><span data-stu-id="e0626-250">This is because the results depend on the LANGUAGE and DATEFORMAT settings of the server session.</span></span> <span data-ttu-id="e0626-251">Die Ergebnisse des Ausdrucks `CONVERT (datetime, '30 listopad 1996', 113)` hängen beispielsweise von der LANGUAGE-Einstellung ab, da die Zeichenfolge '`listopad`' für verschiedene Monate in verschiedenen Sprachen steht.</span><span class="sxs-lookup"><span data-stu-id="e0626-251">For example, the results of the expression `CONVERT (datetime, '30 listopad 1996', 113)` depend on the LANGUAGE setting because the string '`listopad`' means different months in different languages.</span></span> <span data-ttu-id="e0626-252">In ähnlicher Weise interpretiert `DATEADD(mm,3,'2000-12-01')`in dem Ausdruck [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] die Zeichenfolge `'2000-12-01'` basierend auf der DATEFORMAT-Einstellung.</span><span class="sxs-lookup"><span data-stu-id="e0626-252">Similarly, in the expression `DATEADD(mm,3,'2000-12-01')`, [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] interprets the string `'2000-12-01'` based on the DATEFORMAT setting.</span></span>  
  
 <span data-ttu-id="e0626-253">Die implizierte Konvertierung von Nicht-Unicode-Zeichendaten zwischen Sortierungen wird auch als nicht deterministisch angesehen.</span><span class="sxs-lookup"><span data-stu-id="e0626-253">Implicit conversion of non-Unicode character data between collations is also considered nondeterministic.</span></span>  
  
###  <a name="considerations"></a><a name="Considerations"></a> <span data-ttu-id="e0626-254">Weitere Überlegungen</span><span class="sxs-lookup"><span data-stu-id="e0626-254">Considerations</span></span>  
 <span data-ttu-id="e0626-255">Die Einstellung der Option **large_value_types_out_of_row** der Spalten in einer indizierten Sicht wird von der Einstellung für die entsprechende Spalte in der Basistabelle vererbt.</span><span class="sxs-lookup"><span data-stu-id="e0626-255">The setting of the **large_value_types_out_of_row** option of columns in an indexed view is inherited from the setting of the corresponding column in the base table.</span></span> <span data-ttu-id="e0626-256">Dieser Wert wird mithilfe von [sp_tableoption](/sql/relational-databases/system-stored-procedures/sp-tableoption-transact-sql)festgelegt.</span><span class="sxs-lookup"><span data-stu-id="e0626-256">This value is set by using [sp_tableoption](/sql/relational-databases/system-stored-procedures/sp-tableoption-transact-sql).</span></span> <span data-ttu-id="e0626-257">Die Standardeinstellung für Spalten, die auf Grundlage von Ausdrücken erstellt werden, ist 0.</span><span class="sxs-lookup"><span data-stu-id="e0626-257">The default setting for columns formed from expressions is 0.</span></span> <span data-ttu-id="e0626-258">Das bedeutet, dass umfangreiche Werte innerhalb der Zeile gespeichert werden.</span><span class="sxs-lookup"><span data-stu-id="e0626-258">This means that large value types are stored in-row.</span></span>  
  
 <span data-ttu-id="e0626-259">Indizierte Sichten können für eine partitionierte Tabelle erstellt werden und selbst partitioniert werden.</span><span class="sxs-lookup"><span data-stu-id="e0626-259">Indexed views can be created on a partitioned table, and can themselves be partitioned.</span></span>  
  
 <span data-ttu-id="e0626-260">Wenn Sie verhindern möchten, dass [!INCLUDE[ssDE](../../includes/ssde-md.md)] indizierte Sichten verwendet, schließen Sie den OPTION (EXPAND VIEWS)-Hinweis in die Abfrage ein.</span><span class="sxs-lookup"><span data-stu-id="e0626-260">To prevent the [!INCLUDE[ssDE](../../includes/ssde-md.md)] from using indexed views, include the OPTION (EXPAND VIEWS) hint on the query.</span></span> <span data-ttu-id="e0626-261">Außerdem kann der Optimierer die Indizes für die Sichten nicht verwenden, wenn eine der aufgeführten Optionen falsch festgelegt ist.</span><span class="sxs-lookup"><span data-stu-id="e0626-261">Also, if any of the listed options are incorrectly set, this will prevent the optimizer from using the indexes on the views.</span></span> <span data-ttu-id="e0626-262">Weitere Informationen zum OPTION (EXPAND VIEWS)-Hinweis finden Sie unter [SELECT &#40;Transact-SQL&#41;](/sql/t-sql/queries/select-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="e0626-262">For more information about the OPTION (EXPAND VIEWS) hint, see [SELECT &#40;Transact-SQL&#41;](/sql/t-sql/queries/select-transact-sql).</span></span>  
  
 <span data-ttu-id="e0626-263">Wenn eine Sicht gelöscht wird, werden alle Indizes für diese Sicht gelöscht.</span><span class="sxs-lookup"><span data-stu-id="e0626-263">All indexes on a view are dropped when the view is dropped.</span></span> <span data-ttu-id="e0626-264">Wird der gruppierte Index einer Sicht gelöscht, werden alle nicht gruppierten Indizes und alle automatisch erstellten Statistiken der Sicht gelöscht.</span><span class="sxs-lookup"><span data-stu-id="e0626-264">All nonclustered indexes and auto-created statistics on the view are dropped when the clustered index is dropped.</span></span> <span data-ttu-id="e0626-265">Vom Benutzer erstellte Statistiken zur Sicht werden beibehalten.</span><span class="sxs-lookup"><span data-stu-id="e0626-265">User-created statistics on the view are maintained.</span></span> <span data-ttu-id="e0626-266">Nicht gruppierte Indizes können einzeln gelöscht werden.</span><span class="sxs-lookup"><span data-stu-id="e0626-266">Nonclustered indexes can be individually dropped.</span></span> <span data-ttu-id="e0626-267">Durch das Löschen des gruppierten Index der Sicht wird das gespeicherte Resultset entfernt, und der Optimierer verarbeitet die Sicht von nun an wieder wie eine Standardsicht.</span><span class="sxs-lookup"><span data-stu-id="e0626-267">Dropping the clustered index on the view removes the stored result set, and the optimizer returns to processing the view like a standard view.</span></span>  
  
 <span data-ttu-id="e0626-268">Indizes für Tabellen und Sichten können deaktiviert werden.</span><span class="sxs-lookup"><span data-stu-id="e0626-268">Indexes on tables and views can be disabled.</span></span> <span data-ttu-id="e0626-269">Wenn ein gruppierter Index für eine Tabelle deaktiviert wird, werden Indizes für die den Tabellen zugeordneten Sichten auch deaktiviert.</span><span class="sxs-lookup"><span data-stu-id="e0626-269">When a clustered index on a table is disabled, indexes on views associated with the table are also disabled.</span></span>  
  
###  <a name="security"></a><a name="Security"></a> <span data-ttu-id="e0626-270">Sicherheit</span><span class="sxs-lookup"><span data-stu-id="e0626-270">Security</span></span>  
  
####  <a name="permissions"></a><a name="Permissions"></a> <span data-ttu-id="e0626-271">Berechtigungen</span><span class="sxs-lookup"><span data-stu-id="e0626-271">Permissions</span></span>  
 <span data-ttu-id="e0626-272">Erfordert die CREATE VIEW-Berechtigung in der Datenbank und die ALTER-Berechtigung für das Schema, in dem die Sicht erstellt wird.</span><span class="sxs-lookup"><span data-stu-id="e0626-272">Requires CREATE VIEW permission in the database and ALTER permission on the schema in which the view is being created.</span></span>  
  
##  <a name="using-transact-sql"></a><a name="TsqlProcedure"></a> <span data-ttu-id="e0626-273">Verwenden von Transact-SQL</span><span class="sxs-lookup"><span data-stu-id="e0626-273">Using Transact-SQL</span></span>  
  
#### <a name="to-create-an-indexed-view"></a><span data-ttu-id="e0626-274">So erstellen Sie eine indizierte Sicht</span><span class="sxs-lookup"><span data-stu-id="e0626-274">To create an indexed view</span></span>  
  
1.  <span data-ttu-id="e0626-275">Stellen Sie im **Objekt-Explorer** eine Verbindung mit einer [!INCLUDE[ssDE](../../includes/ssde-md.md)]-Instanz her.</span><span class="sxs-lookup"><span data-stu-id="e0626-275">In **Object Explorer**, connect to an instance of [!INCLUDE[ssDE](../../includes/ssde-md.md)].</span></span>  
  
2.  <span data-ttu-id="e0626-276">Klicken Sie in der Standardleiste auf **Neue Abfrage**.</span><span class="sxs-lookup"><span data-stu-id="e0626-276">On the Standard bar, click **New Query**.</span></span>  
  
3.  <span data-ttu-id="e0626-277">Kopieren Sie das folgende Beispiel, fügen Sie es in das Abfragefenster ein, und klicken Sie auf **Ausführen**.</span><span class="sxs-lookup"><span data-stu-id="e0626-277">Copy and paste the following example into the query window and click **Execute**.</span></span> <span data-ttu-id="e0626-278">Im Beispiel werden eine Sicht und ein Index für diese Sicht erstellt.</span><span class="sxs-lookup"><span data-stu-id="e0626-278">The example creates a view and an index on that view.</span></span> <span data-ttu-id="e0626-279">Dies beinhaltet zwei Abfragen, in denen die indizierte Sicht verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="e0626-279">Two queries are included that use the indexed view.</span></span>  
  
    ```  
    USE AdventureWorks2012;  
    GO  
    --Set the options to support indexed views.  
    SET NUMERIC_ROUNDABORT OFF;  
    SET ANSI_PADDING, ANSI_WARNINGS, CONCAT_NULL_YIELDS_NULL, ARITHABORT,  
        QUOTED_IDENTIFIER, ANSI_NULLS ON;  
    GO  
    --Create view with schemabinding.  
    IF OBJECT_ID ('Sales.vOrders', 'view') IS NOT NULL  
    DROP VIEW Sales.vOrders ;  
    GO  
    CREATE VIEW Sales.vOrders  
    WITH SCHEMABINDING  
    AS  
        SELECT SUM(UnitPrice*OrderQty*(1.00-UnitPriceDiscount)) AS Revenue,  
            OrderDate, ProductID, COUNT_BIG(*) AS COUNT  
        FROM Sales.SalesOrderDetail AS od, Sales.SalesOrderHeader AS o  
        WHERE od.SalesOrderID = o.SalesOrderID  
        GROUP BY OrderDate, ProductID;  
    GO  
    --Create an index on the view.  
    CREATE UNIQUE CLUSTERED INDEX IDX_V1   
        ON Sales.vOrders (OrderDate, ProductID);  
    GO  
    --This query can use the indexed view even though the view is   
    --not specified in the FROM clause.  
    SELECT SUM(UnitPrice*OrderQty*(1.00-UnitPriceDiscount)) AS Rev,   
        OrderDate, ProductID  
    FROM Sales.SalesOrderDetail AS od  
        JOIN Sales.SalesOrderHeader AS o ON od.SalesOrderID=o.SalesOrderID  
            AND ProductID BETWEEN 700 and 800  
            AND OrderDate >= CONVERT(datetime,'05/01/2002',101)  
    GROUP BY OrderDate, ProductID  
    ORDER BY Rev DESC;  
    GO  
    --This query can use the above indexed view.  
    SELECT  OrderDate, SUM(UnitPrice*OrderQty*(1.00-UnitPriceDiscount)) AS Rev  
    FROM Sales.SalesOrderDetail AS od  
        JOIN Sales.SalesOrderHeader AS o ON od.SalesOrderID=o.SalesOrderID  
            AND DATEPART(mm,OrderDate)= 3  
            AND DATEPART(yy,OrderDate) = 2002  
    GROUP BY OrderDate  
    ORDER BY OrderDate ASC;  
    GO  
    ```  
  
 <span data-ttu-id="e0626-280">Weitere Informationen finden Sie unter [CREATE VIEW &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-view-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="e0626-280">For more information, see [CREATE VIEW &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-view-transact-sql).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="e0626-281">Weitere Informationen</span><span class="sxs-lookup"><span data-stu-id="e0626-281">See Also</span></span>  
 <span data-ttu-id="e0626-282">[CREATE INDEX &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-index-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="e0626-282">[CREATE INDEX &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-index-transact-sql) </span></span>  
 <span data-ttu-id="e0626-283">[SET ANSI_NULLS &#40;Transact-SQL&#41;](/sql/t-sql/statements/set-ansi-nulls-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="e0626-283">[SET ANSI_NULLS &#40;Transact-SQL&#41;](/sql/t-sql/statements/set-ansi-nulls-transact-sql) </span></span>  
 <span data-ttu-id="e0626-284">[SET ANSI_PADDING &#40;Transact-SQL&#41;](/sql/t-sql/statements/set-ansi-padding-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="e0626-284">[SET ANSI_PADDING &#40;Transact-SQL&#41;](/sql/t-sql/statements/set-ansi-padding-transact-sql) </span></span>  
 <span data-ttu-id="e0626-285">[SET ANSI_WARNINGS &#40;Transact-SQL&#41;](/sql/t-sql/statements/set-ansi-warnings-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="e0626-285">[SET ANSI_WARNINGS &#40;Transact-SQL&#41;](/sql/t-sql/statements/set-ansi-warnings-transact-sql) </span></span>  
 <span data-ttu-id="e0626-286">[SET ARITHABORT &#40;Transact-SQL&#41;](/sql/t-sql/statements/set-arithabort-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="e0626-286">[SET ARITHABORT &#40;Transact-SQL&#41;](/sql/t-sql/statements/set-arithabort-transact-sql) </span></span>  
 <span data-ttu-id="e0626-287">[SET CONCAT_NULL_YIELDS_NULL &#40;Transact-SQL&#41;](/sql/t-sql/statements/set-concat-null-yields-null-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="e0626-287">[SET CONCAT_NULL_YIELDS_NULL &#40;Transact-SQL&#41;](/sql/t-sql/statements/set-concat-null-yields-null-transact-sql) </span></span>  
 <span data-ttu-id="e0626-288">[SET NUMERIC_ROUNDABORT &#40;Transact-SQL&#41;](/sql/t-sql/statements/set-numeric-roundabort-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="e0626-288">[SET NUMERIC_ROUNDABORT &#40;Transact-SQL&#41;](/sql/t-sql/statements/set-numeric-roundabort-transact-sql) </span></span>  
 [<span data-ttu-id="e0626-289">SET QUOTED_IDENTIFIER &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="e0626-289">SET QUOTED_IDENTIFIER &#40;Transact-SQL&#41;</span></span>](/sql/t-sql/statements/set-quoted-identifier-transact-sql)  
  
  
