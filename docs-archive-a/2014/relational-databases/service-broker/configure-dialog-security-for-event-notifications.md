---
title: Konfigurieren der Dialogsicherheit für Ereignisbenachrichtigungen | Microsoft-Dokumentation
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: security
ms.topic: conceptual
helpviewer_keywords:
- event notifications [SQL Server], security
ms.assetid: 12afbc84-2d2a-4452-935e-e1c70e8c53c1
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: d83bfe63c3a9b24c2be8d08916dd2384c59edc93
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 08/04/2020
ms.locfileid: "87620775"
---
# <a name="configure-dialog-security-for-event-notifications"></a><span data-ttu-id="bd11a-102">Konfigurieren der Dialogsicherheit für Ereignisbenachrichtigungen</span><span class="sxs-lookup"><span data-stu-id="bd11a-102">Configure Dialog Security for Event Notifications</span></span>
  [!INCLUDE[ssSB](../../includes/sssb-md.md)] <span data-ttu-id="bd11a-103">-Dialogsicherheit sollte für Ereignisbenachrichtigungen konfiguriert werden, die Meldungen an einen Service Broker auf einem Remoteserver senden.</span><span class="sxs-lookup"><span data-stu-id="bd11a-103">dialog security should be configured for event notifications that send messages to a service broker on a remote server.</span></span> <span data-ttu-id="bd11a-104">Die Dialogsicherheit muss entsprechend dem Modell für die vollständige Sicherheit von [!INCLUDE[ssSB](../../includes/sssb-md.md)] -Dialogen manuell konfiguriert werden.</span><span class="sxs-lookup"><span data-stu-id="bd11a-104">Dialog security must be manually configured according to the [!INCLUDE[ssSB](../../includes/sssb-md.md)] dialog full-security model.</span></span> <span data-ttu-id="bd11a-105">Das Modell für vollständige Sicherheit ermöglicht die Ver- und Entschlüsselung von Nachrichten, die an und von Remoteservern gesendet werden.</span><span class="sxs-lookup"><span data-stu-id="bd11a-105">The full-security model enables encryption and decryption of messages that are sent to and from remote servers.</span></span> <span data-ttu-id="bd11a-106">Obwohl Ereignisbenachrichtigungen nur in eine Richtung gesendet werden, werden andere Nachrichten, z. B. Fehlermeldungen, auch in die Gegenrichtung zurückgegeben.</span><span class="sxs-lookup"><span data-stu-id="bd11a-106">Although event notifications are sent in one direction, other messages, such as errors, are also returned in the opposite direction.</span></span>  
  
## <a name="configuring-dialog-security-for-event-notifications"></a><span data-ttu-id="bd11a-107">Konfigurieren der Dialogsicherheit für Ereignisbenachrichtigungen</span><span class="sxs-lookup"><span data-stu-id="bd11a-107">Configuring Dialog Security for Event Notifications</span></span>  
 <span data-ttu-id="bd11a-108">Der zum Implementieren der Dialogsicherheit für die Ereignisbenachrichtigung erforderliche Vorgang wird in den folgenden Schritten beschrieben.</span><span class="sxs-lookup"><span data-stu-id="bd11a-108">The process required to implement dialog security for event notification is described in the following steps.</span></span> <span data-ttu-id="bd11a-109">Diese Schritte schließen Aktionen ein, die sowohl auf dem Quellserver als auch auf dem Zielserver ausgeführt werden müssen.</span><span class="sxs-lookup"><span data-stu-id="bd11a-109">These steps include actions to take on both the source server and the target server.</span></span> <span data-ttu-id="bd11a-110">Der Quellserver ist der Server, auf dem die Ereignisbenachrichtigung erstellt wird.</span><span class="sxs-lookup"><span data-stu-id="bd11a-110">The source server is the server on which the event notification is being created.</span></span> <span data-ttu-id="bd11a-111">Der Zielserver ist der Server, der die Ereignisbenachrichtigungsmitteilung empfängt.</span><span class="sxs-lookup"><span data-stu-id="bd11a-111">The target server is the server that receives the event notification message.</span></span> <span data-ttu-id="bd11a-112">Sie müssen die Aktionen in den einzelnen Schritten sowohl für den Quellserver als auch für den Zielserver abschließen, bevor Sie den Vorgang mit dem nächsten Schritt fortsetzen.</span><span class="sxs-lookup"><span data-stu-id="bd11a-112">You must complete the actions in each step for both the source server and the target server before you continue to the next step.</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="bd11a-113">Alle Zertifikate müssen mit einem gültigen Start- und Ablaufdatum erstellt werden.</span><span class="sxs-lookup"><span data-stu-id="bd11a-113">All certificates must be created with valid start and expiration dates.</span></span>  
  
 <span data-ttu-id="bd11a-114">**Schritt 1: Richten Sie eine TCP-Portnummer und einen Zieldienstnamen ein.**</span><span class="sxs-lookup"><span data-stu-id="bd11a-114">**Step 1: Establish a TCP port number and target service name.**</span></span>  
  
 <span data-ttu-id="bd11a-115">Richten Sie den TCP-Port ein, auf dem sowohl der Quellserver als auch der Zielserver Nachrichten empfangen.</span><span class="sxs-lookup"><span data-stu-id="bd11a-115">Establish the TCP port on which both the source server and the target server will receive messages.</span></span> <span data-ttu-id="bd11a-116">Sie müssen auch den Namen des Zielservers bestimmen.</span><span class="sxs-lookup"><span data-stu-id="bd11a-116">You must also determine the name of the target service.</span></span>  
  
 <span data-ttu-id="bd11a-117">**Schritt 2: Konfigurieren Sie die Verschlüsselung und die Freigabe von Zertifikaten für die Authentifizierung auf Datenbankebene.**</span><span class="sxs-lookup"><span data-stu-id="bd11a-117">**Step 2: Configure encryption and certificate sharing for database-level authentication.**</span></span>  
  
 <span data-ttu-id="bd11a-118">Führen Sie die folgenden Aktionen sowohl auf dem Quell- als auch auf dem Zielserver aus.</span><span class="sxs-lookup"><span data-stu-id="bd11a-118">Complete the following actions on both the source and target servers.</span></span>  
  
|<span data-ttu-id="bd11a-119">Quellserver</span><span class="sxs-lookup"><span data-stu-id="bd11a-119">Source server</span></span>|<span data-ttu-id="bd11a-120">Zielserver</span><span class="sxs-lookup"><span data-stu-id="bd11a-120">Target server</span></span>|  
|-------------------|-------------------|  
|<span data-ttu-id="bd11a-121">Wählen Sie die Datenbank aus bzw. erstellen Sie eine Datenbank, in der die Ereignisbenachrichtigung und der Hauptschlüssel gespeichert werden sollen.</span><span class="sxs-lookup"><span data-stu-id="bd11a-121">Choose or create a database to hold the event notification and master key.</span></span>|<span data-ttu-id="bd11a-122">Wählen Sie die Datenbank aus bzw. erstellen Sie eine Datenbank, in der der Hauptschlüssel gespeichert werden soll.</span><span class="sxs-lookup"><span data-stu-id="bd11a-122">Choose or create a database to hold the master key.</span></span>|  
|<span data-ttu-id="bd11a-123">Wenn für die Quelldatenbank kein Hauptschlüssel vorhanden ist, müssen Sie [einen Hauptschlüssel erstellen](/sql/t-sql/statements/create-master-key-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="bd11a-123">If no master key exists for the source database, [create a master key](/sql/t-sql/statements/create-master-key-transact-sql).</span></span> <span data-ttu-id="bd11a-124">Ein Hauptschlüssel muss sowohl in der Quelldatenbank als auch in der Zieldatenbank vorhanden sein, um das jeweilige Zertifikat zu sichern.</span><span class="sxs-lookup"><span data-stu-id="bd11a-124">A master key is required on both the source and target databases to help secure their respective certificates.</span></span>|<span data-ttu-id="bd11a-125">Wenn für die Zieldatenbank kein Hauptschlüssel vorhanden ist, müssen Sie einen Hauptschlüssel erstellen.</span><span class="sxs-lookup"><span data-stu-id="bd11a-125">If no master key exists for the target database, create a master key.</span></span>|  
|<span data-ttu-id="bd11a-126">[Erstellen Sie einen Anmeldenamen](/sql/t-sql/statements/create-login-transact-sql) und einen entsprechenden [Benutzer](/sql/t-sql/statements/create-user-transact-sql) für die Quelldatenbank.</span><span class="sxs-lookup"><span data-stu-id="bd11a-126">[Create a login](/sql/t-sql/statements/create-login-transact-sql) and a corresponding [user](/sql/t-sql/statements/create-user-transact-sql) for the source database.</span></span>|<span data-ttu-id="bd11a-127">Erstellen Sie einen Anmeldenamen und einen entsprechenden Benutzer für die Zieldatenbank.</span><span class="sxs-lookup"><span data-stu-id="bd11a-127">Create a login and a corresponding user for the target database.</span></span>|  
|<span data-ttu-id="bd11a-128">[Erstellen Sie ein Zertifikat](/sql/t-sql/statements/create-certificate-transact-sql) , dessen Besitzer der Benutzer der Quelldatenbank ist.</span><span class="sxs-lookup"><span data-stu-id="bd11a-128">[Create a certificate](/sql/t-sql/statements/create-certificate-transact-sql) that is owned by the user of the source database.</span></span>|<span data-ttu-id="bd11a-129">Erstellen Sie ein Zertifikat, dessen Besitzer der Benutzer der Zieldatenbank ist.</span><span class="sxs-lookup"><span data-stu-id="bd11a-129">Create a certificate that is owned by the user of the target database.</span></span>|  
|<span data-ttu-id="bd11a-130">[Sichern Sie das Zertifikat](/sql/t-sql/statements/backup-certificate-transact-sql) in einer Datei, auf die der Zielserver zugreifen kann.</span><span class="sxs-lookup"><span data-stu-id="bd11a-130">[Back up the certificate](/sql/t-sql/statements/backup-certificate-transact-sql) to a file that can be accessed by the target server.</span></span>|<span data-ttu-id="bd11a-131">Sichern Sie das Zertifikat in einer Datei, auf die der Quellserver zugreifen kann.</span><span class="sxs-lookup"><span data-stu-id="bd11a-131">Back up the certificate to a file that can be accessed by the source server.</span></span>|  
|<span data-ttu-id="bd11a-132">[Erstellen Sie einen Benutzer](/sql/t-sql/statements/create-user-transact-sql), indem Sie den Benutzer der Zieldatenbank sowie WITHOUT LOGIN angeben.</span><span class="sxs-lookup"><span data-stu-id="bd11a-132">[Create a user](/sql/t-sql/statements/create-user-transact-sql), specifying the user of the target database, and WITHOUT LOGIN.</span></span> <span data-ttu-id="bd11a-133">Dieser Benutzer ist später der Besitzer des Zieldatenbankzertifikats, das aus der Sicherungsdatei erstellt wird.</span><span class="sxs-lookup"><span data-stu-id="bd11a-133">This user will own the target database certificate to be created from the backup file.</span></span> <span data-ttu-id="bd11a-134">Eine Zuordnung des Benutzers zu einem Anmeldenamen ist nicht erforderlich, da dieser Benutzer nur das in Schritt 3 erstellte Zieldatenbankzertifikat besitzen soll.</span><span class="sxs-lookup"><span data-stu-id="bd11a-134">The user does not have to be mapped to a login, because the only purpose of this user is to own the target database certificate created in step 3 that follows.</span></span>|<span data-ttu-id="bd11a-135">Erstellen Sie einen Benutzer, indem Sie den Benutzer der Quelldatenbank sowie WITHOUT LOGIN angeben.</span><span class="sxs-lookup"><span data-stu-id="bd11a-135">Create a user, specifying the user of the source database, and WITHOUT LOGIN.</span></span> <span data-ttu-id="bd11a-136">Dieser Benutzer ist später der Besitzer des Quelldatenbankzertifikats, das aus der Sicherungsdatei erstellt wird.</span><span class="sxs-lookup"><span data-stu-id="bd11a-136">This user will own the source database certificate to be created from the backup file.</span></span> <span data-ttu-id="bd11a-137">Eine Zuordnung des Benutzers zu einem Anmeldenamen ist nicht erforderlich, da dieser Benutzer nur das in Schritt 3 erstellte Quelldatenbankzertifikat besitzen soll.</span><span class="sxs-lookup"><span data-stu-id="bd11a-137">The user does not have to be mapped to a login, because the only purpose of this user is to own the source database certificate created in step 3 that follows.</span></span>|  
  
 <span data-ttu-id="bd11a-138">**Schritt 3: Geben Sie die Zertifikate frei, und erteilen Sie Berechtigungen für die Authentifizierung auf Datenbankebene.**</span><span class="sxs-lookup"><span data-stu-id="bd11a-138">**Step 3: Share certificates and grant permissions for database-level authentication.**</span></span>  
  
 <span data-ttu-id="bd11a-139">Führen Sie die folgenden Aktionen sowohl auf dem Quell- als auch auf dem Zielserver aus.</span><span class="sxs-lookup"><span data-stu-id="bd11a-139">Complete the following actions on both the source and target servers.</span></span>  
  
|<span data-ttu-id="bd11a-140">Quellserver</span><span class="sxs-lookup"><span data-stu-id="bd11a-140">Source server</span></span>|<span data-ttu-id="bd11a-141">Zielserver</span><span class="sxs-lookup"><span data-stu-id="bd11a-141">Target server</span></span>|  
|-------------------|-------------------|  
|<span data-ttu-id="bd11a-142">[Erstellen Sie ein Zertifikat](/sql/t-sql/statements/create-certificate-transact-sql) aus der Sicherungsdatei des Zielzertifikats, und geben Sie dabei den Benutzer der Zieldatenbank als Besitzer an.</span><span class="sxs-lookup"><span data-stu-id="bd11a-142">[Create a certificate](/sql/t-sql/statements/create-certificate-transact-sql) from the backup file of the target certificate, specifying the target database user as the owner.</span></span>|<span data-ttu-id="bd11a-143">Erstellen Sie ein Zertifikat aus der Sicherungsdatei des Quellzertifikats, und geben Sie dabei den Benutzer der Quelldatenbank als Besitzer an.</span><span class="sxs-lookup"><span data-stu-id="bd11a-143">Create a certificate from the backup file of the source certificate, specifying the source database user as the owner.</span></span>|  
|<span data-ttu-id="bd11a-144">[Erteilen Sie dem Benutzer der Quelldatenbank die Berechtigung](/sql/t-sql/statements/grant-transact-sql) zum Erstellen der Ereignisbenachrichtigung.</span><span class="sxs-lookup"><span data-stu-id="bd11a-144">[Grant permission](/sql/t-sql/statements/grant-transact-sql) to create the event notification to the source database user.</span></span> <span data-ttu-id="bd11a-145">Weitere Informationen zu dieser Berechtigung finden Sie unter [CREATE EVENT NOTIFICATION &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-event-notification-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="bd11a-145">For more information about this permission, see [CREATE EVENT NOTIFICATION &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-event-notification-transact-sql).</span></span>|<span data-ttu-id="bd11a-146">Erteilen Sie dem Benutzer der Zieldatenbank die REFERENCES-Berechtigung für den mit dem [!INCLUDE[ssSB](../../includes/sssb-md.md)] bestehenden Ereignisbenachrichtigungsvertrag: `https://schemas.microsoft.com/SQL/Notifications/PostEventNotification`.</span><span class="sxs-lookup"><span data-stu-id="bd11a-146">Grant REFERENCES permission to the target database user on the existing event notifications [!INCLUDE[ssSB](../../includes/sssb-md.md)] contract: `https://schemas.microsoft.com/SQL/Notifications/PostEventNotification`.</span></span>|  
|<span data-ttu-id="bd11a-147">[Erstellen Sie eine Remotedienstbindung](/sql/t-sql/statements/create-remote-service-binding-transact-sql) zum Zieldienst, und geben Sie die Anmeldeinformationen des Zieldatenbankbenutzers an.</span><span class="sxs-lookup"><span data-stu-id="bd11a-147">[Create a remote service binding](/sql/t-sql/statements/create-remote-service-binding-transact-sql) to the target service and specify the credentials of the target database user.</span></span> <span data-ttu-id="bd11a-148">Durch die Remotedienstbindung ist sichergestellt, dass die an den Zielserver gesendeten Nachrichten mit dem öffentlichen Schlüssel des Zertifikats, dessen Besitzer der Quelldatenbankbenutzer ist, authentifiziert werden.</span><span class="sxs-lookup"><span data-stu-id="bd11a-148">The remote service binding guarantees that the public key in the certificate owned by the source database user will authenticate messages that are sent to the target server.</span></span>|<span data-ttu-id="bd11a-149">[Erteilen Sie dem Zieldatenbankbenutzer](/sql/t-sql/statements/grant-transact-sql) die Berechtigungen CREATE QUEUE, CREATE SERVICE und CREATE SCHEMA.</span><span class="sxs-lookup"><span data-stu-id="bd11a-149">[Grant](/sql/t-sql/statements/grant-transact-sql) CREATE QUEUE, CREATE SERVICE, and CREATE SCHEMA permissions to the target database user.</span></span>|  
||<span data-ttu-id="bd11a-150">Wenn Sie als Zieldatenbankbenutzer noch keine Verbindung mit der Datenbank hergestellt haben, stellen Sie nun die Verbindung her.</span><span class="sxs-lookup"><span data-stu-id="bd11a-150">If not already connected to the database as the target database user, do so now.</span></span>|  
||<span data-ttu-id="bd11a-151">[Erstellen Sie eine Warteschlange](/sql/t-sql/statements/create-queue-transact-sql) für den Empfang der Ereignisbenachrichtigungen, und [erstellen Sie einen Dienst](/sql/t-sql/statements/create-service-transact-sql) für die Übermittlung der Nachrichten.</span><span class="sxs-lookup"><span data-stu-id="bd11a-151">[Create a queue](/sql/t-sql/statements/create-queue-transact-sql) to receive the event notification messages and [create a service](/sql/t-sql/statements/create-service-transact-sql) to deliver the messages.</span></span>|  
||<span data-ttu-id="bd11a-152">[Erteilen Sie dem Quelldatenbankbenutzer die SEND-Berechtigung](/sql/t-sql/statements/grant-transact-sql) für den Zieldienst.</span><span class="sxs-lookup"><span data-stu-id="bd11a-152">[Grant SEND permission](/sql/t-sql/statements/grant-transact-sql) on the target service to the source database user.</span></span>|  
|<span data-ttu-id="bd11a-153">Stellen Sie dem Zielserver den Service Broker-Bezeichner der Quelldatenbank zur Verfügung.</span><span class="sxs-lookup"><span data-stu-id="bd11a-153">Provide the service broker identifier of the source database to the target server.</span></span> <span data-ttu-id="bd11a-154">Dieser Bezeichner kann durch Abfragen der **service_broker_guid** -Spalte der [sys.databases](/sql/relational-databases/system-catalog-views/sys-databases-transact-sql) -Katalogsicht abgerufen werden.</span><span class="sxs-lookup"><span data-stu-id="bd11a-154">This identifier can be obtained by querying the **service_broker_guid** column of the [sys.databases](/sql/relational-databases/system-catalog-views/sys-databases-transact-sql) catalog view.</span></span> <span data-ttu-id="bd11a-155">Verwenden Sie für eine Ereignisbenachrichtigung auf Serverebene den Service Broker-Bezeichner von **msdb**.</span><span class="sxs-lookup"><span data-stu-id="bd11a-155">For a server-level event notification, use the service broker identifier of **msdb**.</span></span>|<span data-ttu-id="bd11a-156">Stellen Sie dem Quellserver den Service Broker-Bezeichner der Zieldatenbank zur Verfügung.</span><span class="sxs-lookup"><span data-stu-id="bd11a-156">Provide the service broker identifier of the target database to the source server.</span></span>|  
  
 <span data-ttu-id="bd11a-157">**Schritt 4: Erstellen Sie Routen, und richten Sie die Authentifizierung auf Serverebene ein.**</span><span class="sxs-lookup"><span data-stu-id="bd11a-157">**Step 4: Create routes and set up server-level authentication.**</span></span>  
  
 <span data-ttu-id="bd11a-158">Führen Sie die folgenden Aktionen sowohl auf dem Quell- als auch auf dem Zielserver aus.</span><span class="sxs-lookup"><span data-stu-id="bd11a-158">Complete the following actions on both the source and target servers.</span></span>  
  
|<span data-ttu-id="bd11a-159">Quellserver</span><span class="sxs-lookup"><span data-stu-id="bd11a-159">Source server</span></span>|<span data-ttu-id="bd11a-160">Zielserver</span><span class="sxs-lookup"><span data-stu-id="bd11a-160">Target server</span></span>|  
|-------------------|-------------------|  
|<span data-ttu-id="bd11a-161">[Erstellen Sie eine Route](/sql/t-sql/statements/create-route-transact-sql) zum Zieldienst, und geben Sie den Service Broker-Bezeichner der Zieldatenbank und die zu verwendende TCP-Portnummer an.</span><span class="sxs-lookup"><span data-stu-id="bd11a-161">[Create a route](/sql/t-sql/statements/create-route-transact-sql) to the target service, and specify the service broker identifier of the target database and the agreed-upon TCP port number.</span></span>|<span data-ttu-id="bd11a-162">Erstellen Sie eine Route zum Quelldienst, und geben Sie den Service Broker-Bezeichner der Quelldatenbank und die zu verwendende TCP-Portnummer an.</span><span class="sxs-lookup"><span data-stu-id="bd11a-162">Create a route to the source service, and specify the service broker identifier of the source database and the agreed-upon TCP port number.</span></span> <span data-ttu-id="bd11a-163">Geben Sie den Quelldienst mithilfe des folgenden bereitgestellten Dienstes an: `https://schemas.microsoft.com/SQL/Notifications/EventNotificationService`.</span><span class="sxs-lookup"><span data-stu-id="bd11a-163">To specify the source service, use the following supplied service: `https://schemas.microsoft.com/SQL/Notifications/EventNotificationService`.</span></span>|  
|<span data-ttu-id="bd11a-164">Wechseln Sie zur **master** -Datenbank, um die Authentifizierung auf Serverebene zu konfigurieren.</span><span class="sxs-lookup"><span data-stu-id="bd11a-164">Switch to the **master** database to configure server-level authentication.</span></span>|<span data-ttu-id="bd11a-165">Wechseln Sie zur **master** -Datenbank, um die Authentifizierung auf Serverebene zu konfigurieren.</span><span class="sxs-lookup"><span data-stu-id="bd11a-165">Switch to the **master** database to configure server-level authentication.</span></span>|  
|<span data-ttu-id="bd11a-166">Wenn für die **master** -Datenbank kein Hauptschlüssel vorhanden ist, müssen Sie [einen Hauptschlüssel erstellen](/sql/t-sql/statements/create-master-key-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="bd11a-166">If no master key exists for the **master** database, [create a master key](/sql/t-sql/statements/create-master-key-transact-sql).</span></span>|<span data-ttu-id="bd11a-167">Wenn für die **master** -Datenbank kein Hauptschlüssel vorhanden ist, müssen Sie einen Hauptschlüssel erstellen.</span><span class="sxs-lookup"><span data-stu-id="bd11a-167">If no master key exists for the **master** database, create a master key.</span></span>|  
|<span data-ttu-id="bd11a-168">[Erstellen Sie ein Zertifikat](/sql/t-sql/statements/create-certificate-transact-sql) , mit dem die Datenbank authentifiziert wird.</span><span class="sxs-lookup"><span data-stu-id="bd11a-168">[Create a certificate](/sql/t-sql/statements/create-certificate-transact-sql) that authenticates the database.</span></span>|<span data-ttu-id="bd11a-169">Erstellen Sie ein Zertifikat, mit dem die Datenbank authentifiziert wird.</span><span class="sxs-lookup"><span data-stu-id="bd11a-169">Create a certificate that authenticates the database.</span></span>|  
|<span data-ttu-id="bd11a-170">[Sichern Sie das Zertifikat](/sql/t-sql/statements/backup-certificate-transact-sql) in einer Datei, auf die der Zielserver zugreifen kann.</span><span class="sxs-lookup"><span data-stu-id="bd11a-170">[Back up the certificate](/sql/t-sql/statements/backup-certificate-transact-sql) to a file that can be accessed by the target server.</span></span>|<span data-ttu-id="bd11a-171">Sichern Sie das Zertifikat in einer Datei, auf die der Quellserver zugreifen kann.</span><span class="sxs-lookup"><span data-stu-id="bd11a-171">Back up the certificate to a file that can be accessed by the source server.</span></span>|  
|<span data-ttu-id="bd11a-172">[Erstellen Sie einen Endpunkt](/sql/t-sql/statements/create-endpoint-transact-sql), und geben Sie die zu verwendende TCP-Portnummer, FOR SERVICE_BROKER (AUTHENTICATION = CERTIFICATE *Name des Zertifikats*) und den Namen des Authentifizierungszertifikats an.</span><span class="sxs-lookup"><span data-stu-id="bd11a-172">[Create an endpoint](/sql/t-sql/statements/create-endpoint-transact-sql), and specify the agreed-upon TCP port number, FOR SERVICE_BROKER (AUTHENTICATION = CERTIFICATE *certificate_name*), and the name of the authenticating certificate.</span></span>|<span data-ttu-id="bd11a-173">Erstellen Sie einen Endpunkt, und geben Sie die zu verwendende TCP-Portnummer, FOR SERVICE_BROKER (AUTHENTICATION = CERTIFICATE *Name des Zertifikats*) und den Namen des Authentifizierungszertifikats an.</span><span class="sxs-lookup"><span data-stu-id="bd11a-173">Create an endpoint, and specify the agreed-upon TCP port number, FOR SERVICE_BROKER (AUTHENTICATION = CERTIFICATE *certificate_name*), and the name of the authenticating certificate.</span></span>|  
|<span data-ttu-id="bd11a-174">[Erstellen Sie eine Anmeldung](/sql/t-sql/statements/create-login-transact-sql), und geben Sie den Anmeldenamen des Zielservers an.</span><span class="sxs-lookup"><span data-stu-id="bd11a-174">[Create a login](/sql/t-sql/statements/create-login-transact-sql), and specify the login of the target server.</span></span>|<span data-ttu-id="bd11a-175">Erstellen Sie eine Anmeldung, und geben Sie den Anmeldenamen des Quellservers an.</span><span class="sxs-lookup"><span data-stu-id="bd11a-175">Create a login, and specify the login of the source server.</span></span>|  
|<span data-ttu-id="bd11a-176">[Erteilen Sie dem Zielauthentifikator-Anmeldenamen die CONNECT-Berechtigung](/sql/t-sql/statements/grant-transact-sql) für den Endpunkt.</span><span class="sxs-lookup"><span data-stu-id="bd11a-176">[Grant CONNECT permission](/sql/t-sql/statements/grant-transact-sql) on the endpoint to the target authenticator login.</span></span>|<span data-ttu-id="bd11a-177">Erteilen Sie dem Quellauthentifikator-Anmeldenamen die CONNECT-Berechtigung für den Endpunkt.</span><span class="sxs-lookup"><span data-stu-id="bd11a-177">Grant CONNECT permission on the endpoint to the source authenticator login.</span></span>|  
|<span data-ttu-id="bd11a-178">[Erstellen Sie einen Benutzer](/sql/t-sql/statements/create-user-transact-sql), und geben Sie den Zielauthentifikator-Anmeldenamen an.</span><span class="sxs-lookup"><span data-stu-id="bd11a-178">[Create a user](/sql/t-sql/statements/create-user-transact-sql), and specify the target authenticator login.</span></span>|<span data-ttu-id="bd11a-179">Erstellen Sie einen Benutzer, und geben Sie den Quellauthentifikator-Anmeldenamen an.</span><span class="sxs-lookup"><span data-stu-id="bd11a-179">Create a user, and specify the source authenticator login.</span></span>|  
  
 <span data-ttu-id="bd11a-180">**Schritt 5: Geben Sie die Zertifikate für die Authentifizierung auf Serverebene frei, und erstellen Sie die Ereignisbenachrichtigung.**</span><span class="sxs-lookup"><span data-stu-id="bd11a-180">**Step 5: Share certificates for server-level authentication and create the event notification.**</span></span>  
  
 <span data-ttu-id="bd11a-181">Führen Sie die folgenden Aktionen sowohl auf dem Quell- als auch auf dem Zielserver aus.</span><span class="sxs-lookup"><span data-stu-id="bd11a-181">Complete the following actions on both the source and target servers.</span></span>  
  
|<span data-ttu-id="bd11a-182">Quellserver</span><span class="sxs-lookup"><span data-stu-id="bd11a-182">Source server</span></span>|<span data-ttu-id="bd11a-183">Zielserver</span><span class="sxs-lookup"><span data-stu-id="bd11a-183">Target server</span></span>|  
|-------------------|-------------------|  
|<span data-ttu-id="bd11a-184">[Erstellen Sie ein Zertifikat](/sql/t-sql/statements/create-certificate-transact-sql) aus der Sicherungsdatei des Zielzertifikats, und geben Sie dabei den Zielauthentifikatorbenutzer als Besitzer an.</span><span class="sxs-lookup"><span data-stu-id="bd11a-184">[Create a certificate](/sql/t-sql/statements/create-certificate-transact-sql) from the backup file of the target certificate, specifying the target authenticator user as the owner.</span></span>|<span data-ttu-id="bd11a-185">Erstellen Sie ein Zertifikat aus der Sicherungsdatei des Quellzertifikats, und geben Sie dabei den Quellauthentifikatorbenutzer als Besitzer an.</span><span class="sxs-lookup"><span data-stu-id="bd11a-185">Create a certificate from the backup file of the source certificate, specifying the source authenticator user as the owner.</span></span>|  
|<span data-ttu-id="bd11a-186">Wechseln Sie zu der Quelldatenbank, auf der die Ereignisbenachrichtigung erstellt werden soll. Wenn Sie als Quelldatenbankbenutzer noch keine Verbindung mit der Datenbank hergestellt haben, stellen Sie nun die Verbindung her.</span><span class="sxs-lookup"><span data-stu-id="bd11a-186">Switch to the source database on which to create the event notification, and if you are not already connected as the source database user, do so now.</span></span>|<span data-ttu-id="bd11a-187">Wechseln Sie zur Zieldatenbank, um Ereignisbenachrichtigungen zu empfangen.</span><span class="sxs-lookup"><span data-stu-id="bd11a-187">Switch to the target database to receive event notification messages.</span></span>|  
|<span data-ttu-id="bd11a-188">[Erstellen Sie die Ereignisbenachrichtigung](/sql/t-sql/statements/create-event-notification-transact-sql), und geben Sie den Broker-Dienst und den Bezeichner der Zieldatenbank an.</span><span class="sxs-lookup"><span data-stu-id="bd11a-188">[Create the event notification](/sql/t-sql/statements/create-event-notification-transact-sql), and specify the broker service and identifier of the target database.</span></span>||  
  
## <a name="see-also"></a><span data-ttu-id="bd11a-189">Weitere Informationen</span><span class="sxs-lookup"><span data-stu-id="bd11a-189">See Also</span></span>  
 <span data-ttu-id="bd11a-190">[GRANT &#40;Transact-SQL&#41;](/sql/t-sql/statements/grant-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="bd11a-190">[GRANT &#40;Transact-SQL&#41;](/sql/t-sql/statements/grant-transact-sql) </span></span>  
 <span data-ttu-id="bd11a-191">[BACKUP CERTIFICATE &#40;Transact-SQL&#41;](/sql/t-sql/statements/backup-certificate-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="bd11a-191">[BACKUP CERTIFICATE &#40;Transact-SQL&#41;](/sql/t-sql/statements/backup-certificate-transact-sql) </span></span>  
 <span data-ttu-id="bd11a-192">[sys.databases &#40;Transact-SQL&#41;](/sql/relational-databases/system-catalog-views/sys-databases-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="bd11a-192">[sys.databases &#40;Transact-SQL&#41;](/sql/relational-databases/system-catalog-views/sys-databases-transact-sql) </span></span>  
 <span data-ttu-id="bd11a-193">[Verschlüsselungshierarchie](../security/encryption/encryption-hierarchy.md) </span><span class="sxs-lookup"><span data-stu-id="bd11a-193">[Encryption Hierarchy](../security/encryption/encryption-hierarchy.md) </span></span>  
 <span data-ttu-id="bd11a-194">[Implementieren von Ereignisbenachrichtigungen](event-notifications.md) </span><span class="sxs-lookup"><span data-stu-id="bd11a-194">[Implement Event Notifications](event-notifications.md) </span></span>  
 <span data-ttu-id="bd11a-195">[CREATE MASTER KEY &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-master-key-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="bd11a-195">[CREATE MASTER KEY &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-master-key-transact-sql) </span></span>  
 <span data-ttu-id="bd11a-196">[CREATE LOGIN &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-login-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="bd11a-196">[CREATE LOGIN &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-login-transact-sql) </span></span>  
 <span data-ttu-id="bd11a-197">[CREATE USER &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-user-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="bd11a-197">[CREATE USER &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-user-transact-sql) </span></span>  
 <span data-ttu-id="bd11a-198">[CREATE CERTIFICATE &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-certificate-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="bd11a-198">[CREATE CERTIFICATE &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-certificate-transact-sql) </span></span>  
 <span data-ttu-id="bd11a-199">[CREATE REMOTE SERVICE BINDING &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-remote-service-binding-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="bd11a-199">[CREATE REMOTE SERVICE BINDING &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-remote-service-binding-transact-sql) </span></span>  
 <span data-ttu-id="bd11a-200">[GRANT &#40;Transact-SQL&#41;](/sql/t-sql/statements/grant-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="bd11a-200">[GRANT &#40;Transact-SQL&#41;](/sql/t-sql/statements/grant-transact-sql) </span></span>  
 <span data-ttu-id="bd11a-201">[CREATE ROUTE &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-route-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="bd11a-201">[CREATE ROUTE &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-route-transact-sql) </span></span>  
 <span data-ttu-id="bd11a-202">[CREATE QUEUE &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-queue-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="bd11a-202">[CREATE QUEUE &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-queue-transact-sql) </span></span>  
 <span data-ttu-id="bd11a-203">[CREATE SERVICE &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-service-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="bd11a-203">[CREATE SERVICE &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-service-transact-sql) </span></span>  
 <span data-ttu-id="bd11a-204">[CREATE ENDPOINT &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-endpoint-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="bd11a-204">[CREATE ENDPOINT &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-endpoint-transact-sql) </span></span>  
 [<span data-ttu-id="bd11a-205">CREATE EVENT NOTIFICATION &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="bd11a-205">CREATE EVENT NOTIFICATION &#40;Transact-SQL&#41;</span></span>](/sql/t-sql/statements/create-event-notification-transact-sql)  
  
  
