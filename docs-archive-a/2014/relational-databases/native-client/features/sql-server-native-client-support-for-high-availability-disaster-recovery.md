---
title: SQL Server Native Client Unterstützung für hohe Verfügbarkeit, Notfall Wiederherstellung | Microsoft-Dokumentation
ms.custom: ''
ms.date: 08/31/2016
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: native-client
ms.topic: reference
ms.assetid: 2b06186b-4090-4728-b96b-90d6ebd9f66f
author: rothja
ms.author: jroth
ms.openlocfilehash: 43c835d5c0e1c064387aee7fb0db65f577c3aa26
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 08/04/2020
ms.locfileid: "87621479"
---
# <a name="sql-server-native-client-support-for-high-availability-disaster-recovery"></a><span data-ttu-id="a0567-102">SQL Server Native Client-Unterstützung für hohe Verfügbarkeit, Notfallwiederherstellung</span><span class="sxs-lookup"><span data-stu-id="a0567-102">SQL Server Native Client Support for High Availability, Disaster Recovery</span></span>
  <span data-ttu-id="a0567-103">In diesem Thema wird die (in [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] eingeführte) [!INCLUDE[ssSQL11](../../../includes/sssql11-md.md)]Native Client-Unterstützung für [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)]erläutert.</span><span class="sxs-lookup"><span data-stu-id="a0567-103">This topic discusses [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Native Client support (added in [!INCLUDE[ssSQL11](../../../includes/sssql11-md.md)]) for [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)].</span></span> <span data-ttu-id="a0567-104">Weitere Informationen zu [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] finden Sie unter [Verfügbarkeitsgruppenlistener, Clientkonnektivität und Anwendungsfailover &#40;SQL Server&#41;](../../../database-engine/listeners-client-connectivity-application-failover.md), [Erstellung und Konfiguration von Verfügbarkeitsgruppen &#40;SQL Server&#41;](../../../database-engine/availability-groups/windows/creation-and-configuration-of-availability-groups-sql-server.md), [Failoverclustering und AlwaysOn-Verfügbarkeitsgruppen &#40;SQL Server&#41;](../../../database-engine/availability-groups/windows/failover-clustering-and-always-on-availability-groups-sql-server.md) und [Aktive sekundäre Replikate: Lesbare sekundäre Replikate (AlwaysOn-Verfügbarkeitsgruppen)](../../../database-engine/availability-groups/windows/active-secondaries-readable-secondary-replicas-always-on-availability-groups.md).</span><span class="sxs-lookup"><span data-stu-id="a0567-104">For more information about [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)], see [Availability Group Listeners, Client Connectivity, and Application Failover &#40;SQL Server&#41;](../../../database-engine/listeners-client-connectivity-application-failover.md), [Creation and Configuration of Availability Groups &#40;SQL Server&#41;](../../../database-engine/availability-groups/windows/creation-and-configuration-of-availability-groups-sql-server.md), [Failover Clustering and AlwaysOn Availability Groups &#40;SQL Server&#41;](../../../database-engine/availability-groups/windows/failover-clustering-and-always-on-availability-groups-sql-server.md), and [Active Secondaries: Readable Secondary Replicas (AlwaysOn Availability Groups)](../../../database-engine/availability-groups/windows/active-secondaries-readable-secondary-replicas-always-on-availability-groups.md).</span></span>  
  
 <span data-ttu-id="a0567-105">Sie können den Verfügbarkeitsgruppenlistener einer bestimmten Verfügbarkeitsgruppe in der Verbindungszeichenfolge angeben.</span><span class="sxs-lookup"><span data-stu-id="a0567-105">You can specify the availability group listener of a given availability group in the connection string.</span></span> <span data-ttu-id="a0567-106">Wenn eine [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Native Client-Anwendung mit einer Datenbank in einer Verfügbarkeitsgruppe verbunden ist, die ein Failover ausführt, wird die ursprüngliche Verbindung unterbrochen, und die Anwendung muss eine neue Verbindung öffnen, um die Arbeit nach dem Failover fortzusetzen.</span><span class="sxs-lookup"><span data-stu-id="a0567-106">If a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Native Client application is connected to a database in an availability group that fails over, the original connection is broken, and the application must open a new connection to continue work after the failover.</span></span>  
  
 <span data-ttu-id="a0567-107">Wenn Sie keine Verbindung mit einem Verfügbarkeitsgruppenlistener herstellen, und wenn mehrere IP-Adressen einem Hostnamen zugeordnet sind, durchläuft [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Native Client alle dem DNS-Eintrag zugeordneten IP-Adressen sequenziell.</span><span class="sxs-lookup"><span data-stu-id="a0567-107">If you are not connecting to an availability group listener, and if multiple IP addresses are associated with a hostname, [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Native Client will iterate sequentially through all IP addresses associated with DNS entry.</span></span> <span data-ttu-id="a0567-108">Dies kann zeitaufwändig sein, wenn die erste vom DNS-Server zurückgegebene IP-Adresse an keine Netzwerkschnittstellenkarte (NIC) gebunden ist.</span><span class="sxs-lookup"><span data-stu-id="a0567-108">This can be time consuming if the first IP address returned by DNS server is not bound to any network interface card (NIC).</span></span> <span data-ttu-id="a0567-109">Wenn eine Verbindung mit einem Verfügbarkeitsgruppenlistener hergestellt wird, versucht [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Native Client, Verbindungen mit allen IP-Adressen parallel herzustellen. Wenn ein Verbindungsversuch erfolgreich ist, verwirft der Treiber alle ausstehenden Verbindungsversuche.</span><span class="sxs-lookup"><span data-stu-id="a0567-109">When connecting to an availability group listener, [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Native Client attempts to establish connections to all IP addresses in parallel and if a connection attempt succeeds, the driver will discard any pending connection attempts.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="a0567-110">Das Erhöhen des Verbindungstimeouts sowie die Implementierung von Verbindungswiederholungslogik erhöhen die Wahrscheinlichkeit, dass eine Anwendung eine Verbindung zu einer Verfügbarkeitsgruppe herstellt.</span><span class="sxs-lookup"><span data-stu-id="a0567-110">Increasing connection timeout and implementing connection retry logic will increase the probability that an application will connect to an availability group.</span></span> <span data-ttu-id="a0567-111">Da zudem eine Verbindung aufgrund eines Verfügbarkeitsgruppenfailovers fehlschlagen kann, empfiehlt sich die Implementierung von Verbindungswiederholungslogik, wodurch im Fall einer fehlgeschlagenen Verbindung bis zur erneuten Verbindung Wiederholungsversuche erfolgen.</span><span class="sxs-lookup"><span data-stu-id="a0567-111">Also, because a connection can fail because of an availability group failover, you should implement connection retry logic, retrying a failed connection until it reconnects.</span></span>  
  
## <a name="connecting-with-multisubnetfailover"></a><span data-ttu-id="a0567-112">Verbinden mit MultiSubnetFailover</span><span class="sxs-lookup"><span data-stu-id="a0567-112">Connecting With MultiSubnetFailover</span></span>  
 <span data-ttu-id="a0567-113">Geben Sie immer `MultiSubnetFailover=Yes` an, wenn Sie eine Verbindung mit einem SQL Server 2012-Verfügbarkeitsgruppenlistener oder einer SQL Server 2012-Failoverclusterinstanz herstellen.</span><span class="sxs-lookup"><span data-stu-id="a0567-113">Always specify `MultiSubnetFailover=Yes` when connecting to a SQL Server 2012 availability group listener or SQL Server 2012 Failover Cluster Instance.</span></span> <span data-ttu-id="a0567-114">`MultiSubnetFailover` aktiviert schnelleres Failover für alle Verfügbarkeitsgruppen und die Failoverclusterinstanz in SQL Server 2012 und reduziert die Failoverzeit für einzelne und Multisubnetz-AlwaysOn-Topologien erheblich.</span><span class="sxs-lookup"><span data-stu-id="a0567-114">`MultiSubnetFailover` enables faster failover for all Availability Groups and failover cluster instance in SQL Server 2012 and will significantly reduce failover time for single and multi-subnet AlwaysOn topologies.</span></span> <span data-ttu-id="a0567-115">Während eines Multisubnetzfailovers versucht der Client Verbindungen parallel.</span><span class="sxs-lookup"><span data-stu-id="a0567-115">During a multi-subnet failover, the client will attempt connections in parallel.</span></span> <span data-ttu-id="a0567-116">Während eines Subnetzfailovers wird der TCP-Verbindungsversuch vom [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] -Native Client aggressiv wiederholt.</span><span class="sxs-lookup"><span data-stu-id="a0567-116">During a subnet failover, [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Native Client will aggressively retry the TCP connection.</span></span>  
  
 <span data-ttu-id="a0567-117">Die `MultiSubnetFailover`-Verbindungseigenschaft gibt an, dass die Anwendung in einer Verfügbarkeitsgruppe oder einer Failoverclusterinstanz bereitgestellt wird und [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Native Client versucht, eine Verbindung mit der Datenbank auf der primären [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]-Instanz herzustellen, indem mit allen IP-Adressen der Verfügbarkeitsgruppe Verbindungsversuche unternommen werden.</span><span class="sxs-lookup"><span data-stu-id="a0567-117">The `MultiSubnetFailover` connection property indicates that the application is being deployed in an availability group or Failover Cluster Instance, and that [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Native Client will try to connect to the database on the primary [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] instance by trying to connect to all the IP addresses.</span></span> <span data-ttu-id="a0567-118">Wenn `MultiSubnetFailover=Yes` für eine Verbindung angegeben wird, wiederholt der Client TCP-Verbindungsversuche schneller als die standardmäßigen TCP-Neuübertragungs Intervalle des Betriebssystems.</span><span class="sxs-lookup"><span data-stu-id="a0567-118">When `MultiSubnetFailover=Yes` is specified for a connection, the client retries TCP connection attempts faster than the operating system's default TCP retransmit intervals.</span></span> <span data-ttu-id="a0567-119">Auf diese Weise kann die Verbindung nach einem Failover einer AlwaysOn-Verfügbarkeitsgruppe oder einer AlwaysOn-Failoverclusterinstanz schneller wiederhergestellt werden. Diese Einstellung gilt sowohl für Einzelsubnetz- als auch Multisubnetz-Verfügbarkeitsgruppen und -Failoverclusterinstanzen.</span><span class="sxs-lookup"><span data-stu-id="a0567-119">This enables faster reconnection after failover of either an AlwaysOn Availability Group or an AlwaysOn Failover Cluster Instance, and is applicable to both single- and multi-subnet Availability Groups and Failover Cluster Instances.</span></span>  
  
 <span data-ttu-id="a0567-120">Weitere Informationen zu Verbindungszeichenfolgeschlüsselwörtern finden Sie unter [Using Connection String Keywords with SQL Server Native Client](../applications/using-connection-string-keywords-with-sql-server-native-client.md).</span><span class="sxs-lookup"><span data-stu-id="a0567-120">For more information about connection string keywords, see [Using Connection String Keywords with SQL Server Native Client](../applications/using-connection-string-keywords-with-sql-server-native-client.md).</span></span>  
  
 <span data-ttu-id="a0567-121">Das Angeben von `MultiSubnetFailover=Yes` für ein anderes Verbindungsziel als einen Verfügbarkeitsgruppenlistener oder eine Failoverclusterinstanz kann die Leistung beeinträchtigen und wird nicht unterstützt.</span><span class="sxs-lookup"><span data-stu-id="a0567-121">Specifying `MultiSubnetFailover=Yes` when connecting to something other than an availability group listener or Failover Cluster Instance may result in a negative performance impact, and is not supported.</span></span>  
  
 <span data-ttu-id="a0567-122">Befolgen Sie beim Herstellen einer Verbindung mit einem Server in einer Verfügbarkeitsgruppe oder einer Failoverclusterinstanz die folgenden Richtlinien:</span><span class="sxs-lookup"><span data-stu-id="a0567-122">Use the following guidelines to connect to a server in an availability group or Failover Cluster Instance:</span></span>  
  
-   <span data-ttu-id="a0567-123">Verwenden Sie die `MultiSubnetFailover`-Verbindungseigenschaft, wenn Sie eine Verbindung mit einem Einzelsubnetz oder Multisubnetz herstellen. Dadurch wird die Leistung für beide verbessert.</span><span class="sxs-lookup"><span data-stu-id="a0567-123">Use the `MultiSubnetFailover` connection property when connecting to a single subnet or multi-subnet; it will improve performance for both.</span></span>  
  
-   <span data-ttu-id="a0567-124">Um eine Verbindung mit einer Verfügbarkeitsgruppe herzustellen, geben Sie in der Verbindungszeichenfolge den Verfügbarkeitsgruppenlistener der Verfügbarkeitsgruppe als Server an.</span><span class="sxs-lookup"><span data-stu-id="a0567-124">To connect to an availability group, specify the availability group listener of the availability group as the server in your connection string.</span></span>  
  
-   <span data-ttu-id="a0567-125">Ein Verbindungsversuch mit einer mit mehr als 64 IP-Adressen konfigurierten [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] -Instanz verursacht einen Verbindungsfehler.</span><span class="sxs-lookup"><span data-stu-id="a0567-125">Connecting to a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] instance configured with more than 64 IP addresses will cause a connection failure.</span></span>  
  
-   <span data-ttu-id="a0567-126">Das Verhalten einer Anwendung, die die `MultiSubnetFailover`-Verbindungseigenschaft verwendet, wird nicht vom Authentifizierungstyp beeinflusst: [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]-Authentifizierung, Kerberos-Authentifizierung oder Windows-Authentifizierung.</span><span class="sxs-lookup"><span data-stu-id="a0567-126">Behavior of an application that uses the `MultiSubnetFailover` connection property is not affected based on the type of authentication: [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Authentication, Kerberos Authentication, or Windows Authentication.</span></span>  
  
-   <span data-ttu-id="a0567-127">Sie können den Wert von `loginTimeout` erhöhen, um die Failoverzeit zu berücksichtigen und Wiederholungsversuche für Anwendungsverbindungen zu reduzieren.</span><span class="sxs-lookup"><span data-stu-id="a0567-127">You can increase the value of `loginTimeout` to accommodate for failover time and reduce application connection retry attempts.</span></span>  
  
-   <span data-ttu-id="a0567-128">Verteilte Transaktionen werden nicht unterstützt.</span><span class="sxs-lookup"><span data-stu-id="a0567-128">Distributed transactions are not supported.</span></span>  
  
 <span data-ttu-id="a0567-129">Wenn das schreibgeschützte Routing nicht aktiviert ist, scheitert das Herstellen der Verbindung mit einem sekundären Replikatspeicherort in einer Verfügbarkeitsgruppe in den folgenden Situationen:</span><span class="sxs-lookup"><span data-stu-id="a0567-129">If read-only routing is not in effect, connecting to a secondary replica location in an availability group will fail in the following situations:</span></span>  
  
1.  <span data-ttu-id="a0567-130">Wenn der sekundäre Replikatspeicherort nicht zum Akzeptieren von Verbindungen konfiguriert ist.</span><span class="sxs-lookup"><span data-stu-id="a0567-130">If the secondary replica location is not configured to accept connections.</span></span>  
  
2.  <span data-ttu-id="a0567-131">Wenn eine Anwendung `ApplicationIntent=ReadWrite` verwendet (weiter unten erläutert), und der sekundäre Replikatspeicherort für schreibgeschützten Zugriff konfiguriert ist.</span><span class="sxs-lookup"><span data-stu-id="a0567-131">If an application uses `ApplicationIntent=ReadWrite` (discussed below) and the secondary replica location is configured for read-only access.</span></span>  
  
 <span data-ttu-id="a0567-132">Es kann keine Verbindung hergestellt werden, wenn ein primäres Replikat so konfiguriert ist, dass schreibgeschützte Arbeitslasten abgelehnt werden, und die Verbindungszeichenfolge `ApplicationIntent=ReadOnly` enthält.</span><span class="sxs-lookup"><span data-stu-id="a0567-132">A connection will fail if a primary replica is configured to reject read-only workloads and the connection string contains `ApplicationIntent=ReadOnly`.</span></span>  
  
## <a name="upgrading-to-use-multi-subnet-clusters-from-database-mirroring"></a><span data-ttu-id="a0567-133">Aktualisieren zur Verwendung von Multisubnetzclustern aus Datenbankspiegelung</span><span class="sxs-lookup"><span data-stu-id="a0567-133">Upgrading to Use Multi-Subnet Clusters from Database Mirroring</span></span>  
 <span data-ttu-id="a0567-134">Ein Verbindungsfehler tritt auf, wenn die Verbindungsschlüsselwörter `MultiSubnetFailover` und `Failover_Partner` in der Verbindungszeichenfolge vorhanden sind.</span><span class="sxs-lookup"><span data-stu-id="a0567-134">A connection error will occur if the `MultiSubnetFailover` and `Failover_Partner` connection keywords are present in the connection string.</span></span> <span data-ttu-id="a0567-135">Es tritt auch ein Fehler auf, wenn `MultiSubnetFailover` verwendet wird und [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] eine Failoverpartnerantwort zurückgibt, die angibt, dass es Teil eines Datenbankspiegelungspaars ist.</span><span class="sxs-lookup"><span data-stu-id="a0567-135">An error will also occur if `MultiSubnetFailover` is used and the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] returns a failover partner response indicating it is part of a database mirroring pair.</span></span>  
  
 <span data-ttu-id="a0567-136">Wenn Sie eine [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Native Client-Anwendung aktualisieren, die derzeit Datenbankspiegelung in einem Multisubnetz-Szenario verwendet, müssen Sie die `Failover_Partner`-Verbindungseigenschaft entfernen und mit `MultiSubnetFailover`, festgelegt auf `Yes`, ersetzen, sowie den Servernamen in der Verbindungszeichenfolge mit einem Verfügbarkeitsgruppenlistener ersetzen.</span><span class="sxs-lookup"><span data-stu-id="a0567-136">If you upgrade a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Native Client application that currently uses database mirroring to a multi-subnet scenario, you should remove the `Failover_Partner` connection property and replace it with `MultiSubnetFailover` set to `Yes` and replace the server name in the connection string with an availability group listener.</span></span> <span data-ttu-id="a0567-137">Wenn eine Verbindungszeichenfolge `Failover_Partner` und `MultiSubnetFailover=Yes` verwendet, generiert der Treiber einen Fehler.</span><span class="sxs-lookup"><span data-stu-id="a0567-137">If a connection string uses `Failover_Partner` and `MultiSubnetFailover=Yes`, the driver will generate an error.</span></span> <span data-ttu-id="a0567-138">Wenn eine Verbindungszeichenfolge jedoch `Failover_Partner` und `MultiSubnetFailover=No` (oder `ApplicationIntent=ReadWrite`) verwendet, verwendet die Anwendung Datenbankspiegelung.</span><span class="sxs-lookup"><span data-stu-id="a0567-138">However, if a connection string uses `Failover_Partner` and `MultiSubnetFailover=No` (or `ApplicationIntent=ReadWrite`), the application will use database mirroring.</span></span>  
  
 <span data-ttu-id="a0567-139">Der Treiber gibt einen Fehler zurück, wenn die Datenbankspiegelung in der primären Datenbank in der Verfügbarkeitsgruppe verwendet wird, und wenn `MultiSubnetFailover=Yes` in der Verbindungszeichenfolge verwendet wird, die statt mit einem Verfügbarkeitsgruppenlistener eine Verbindung mit einer primären Datenbank herstellt.</span><span class="sxs-lookup"><span data-stu-id="a0567-139">The driver will return an error if database mirroring is used on the primary database in the availability group, and if `MultiSubnetFailover=Yes` is used in the connection string that connects to a primary database instead of to an availability group listener.</span></span>  
  
## <a name="specifying-application-intent"></a><span data-ttu-id="a0567-140">Angeben des Anwendungszwecks</span><span class="sxs-lookup"><span data-stu-id="a0567-140">Specifying Application Intent</span></span>  
 <span data-ttu-id="a0567-141">Im Fall von `ApplicationIntent=ReadOnly` fordert der Client eine Lesearbeitslast an, wenn eine Verbindung mit einer AlwaysOn-Datenbank hergestellt wird.</span><span class="sxs-lookup"><span data-stu-id="a0567-141">When `ApplicationIntent=ReadOnly`, the client requests a read workload when connecting to an AlwaysOn enabled database.</span></span> <span data-ttu-id="a0567-142">Der Server erzwingt den Versuch zur Verbindungszeit und während einer USE-Datenbankanweisung, aber nur für eine AlwaysOn-aktivierte Datenbank.</span><span class="sxs-lookup"><span data-stu-id="a0567-142">The server will enforce the intent at connection time and during a USE database statement but only to an Always On enabled database.</span></span>  
  
 <span data-ttu-id="a0567-143">Das `ApplicationIntent`-Schlüsselwort funktioniert nicht mit schreibgeschützten Legacy-Datenbanken.</span><span class="sxs-lookup"><span data-stu-id="a0567-143">The `ApplicationIntent` keyword does not work with legacy, read-only databases.</span></span>  
  
 <span data-ttu-id="a0567-144">Eine Datenbank kann Lesearbeitslasten auf der AlwaysOn-Zieldatenbank zulassen bzw. nicht zulassen.</span><span class="sxs-lookup"><span data-stu-id="a0567-144">A database can allow or disallow read workloads on the targeted AlwaysOn database.</span></span> <span data-ttu-id="a0567-145">(Dies erfolgt über die `ALLOW_CONNECTIONS`-Klausel der `PRIMARY_ROLE`-Anweisung und der `SECONDARY_ROLE`[!INCLUDE[tsql](../../../includes/tsql-md.md)]-Anweisung).</span><span class="sxs-lookup"><span data-stu-id="a0567-145">(This is done with the `ALLOW_CONNECTIONS` clause of the `PRIMARY_ROLE` and `SECONDARY_ROLE`[!INCLUDE[tsql](../../../includes/tsql-md.md)] statements.)</span></span>  
  
 <span data-ttu-id="a0567-146">Das `ApplicationIntent`-Schlüsselwort wird verwendet, um schreibgeschütztes Routing zu aktivieren.</span><span class="sxs-lookup"><span data-stu-id="a0567-146">The `ApplicationIntent` keyword is used to enable read-only routing.</span></span>  
  
## <a name="read-only-routing"></a><span data-ttu-id="a0567-147">Schreibgeschütztes Routing</span><span class="sxs-lookup"><span data-stu-id="a0567-147">Read-Only Routing</span></span>  
 <span data-ttu-id="a0567-148">Schreibgeschütztes Routing ist eine Funktion, die die Verfügbarkeit eines schreibgeschützten Replikats einer Datenbank sicherstellen kann.</span><span class="sxs-lookup"><span data-stu-id="a0567-148">Read-only routing is a feature that can ensure the availability of a read only replica of a database.</span></span> <span data-ttu-id="a0567-149">So aktivieren Sie schreibgeschütztes Routing:</span><span class="sxs-lookup"><span data-stu-id="a0567-149">To enable read-only routing:</span></span>  
  
1.  <span data-ttu-id="a0567-150">Sie müssen eine Verbindung zum Verfügbarkeitsgruppenlistener einer AlwaysOn-Verfügbarkeitsgruppe herstellen.</span><span class="sxs-lookup"><span data-stu-id="a0567-150">You must connect to an Always On Availability Group availability group listener.</span></span>  
  
2.  <span data-ttu-id="a0567-151">Das Schlüsselwort der `ApplicationIntent`-Verbindungszeichenfolge muss auf `ReadOnly` festgelegt werden.</span><span class="sxs-lookup"><span data-stu-id="a0567-151">The `ApplicationIntent` connection string keyword must be set to `ReadOnly`.</span></span>  
  
3.  <span data-ttu-id="a0567-152">Die Verfügbarkeitsgruppe muss vom Datenbankadministrator konfiguriert werden, um schreibgeschütztes Routing zu aktivieren.</span><span class="sxs-lookup"><span data-stu-id="a0567-152">The Availability Group must be configured by the database administrator to enable read-only routing.</span></span>  
  
 <span data-ttu-id="a0567-153">Möglicherweise werden bei mehreren Verbindungen mithilfe von schreibgeschütztem Routing nicht alle mit demselben schreibgeschützten Replikat verbunden.</span><span class="sxs-lookup"><span data-stu-id="a0567-153">It is possible that multiple connections using read-only routing will not all connect to the same read-only replica.</span></span> <span data-ttu-id="a0567-154">Änderungen in der Datenbanksynchronisierung oder Änderungen in der Routingkonfiguration des Servers können zu Clientverbindungen mit anderen schreibgeschützten Replikaten führen.</span><span class="sxs-lookup"><span data-stu-id="a0567-154">Changes in database synchronization or changes in the server's routing configuration can result in client connections to different read-only replicas.</span></span> <span data-ttu-id="a0567-155">Sie gewährleisten, dass alle schreibgeschützten Anforderungen Verbindungen mit demselben schreibgeschützten Replikat herstellen, indem Sie keinen Verfügbarkeitsgruppenlistener an das Schlüsselwort der `Server`-Verbindungszeichenfolge übermitteln.</span><span class="sxs-lookup"><span data-stu-id="a0567-155">To ensure that all read-only requests connect to the same read-only replica, do not pass an availability group listener to the `Server` connection string keyword.</span></span> <span data-ttu-id="a0567-156">Geben Sie stattdessen den Namen der schreibgeschützten Instanz an.</span><span class="sxs-lookup"><span data-stu-id="a0567-156">Instead, specify the name of the read-only instance.</span></span>  
  
 <span data-ttu-id="a0567-157">Schreibgeschütztes Routing dauert möglicherweise länger als das Herstellen einer primären Verbindung, da schreibgeschütztes Routing zuerst eine primäre Verbindung herstellt und dann nach der besten verfügbaren lesbaren Sekundärverbindung sucht.</span><span class="sxs-lookup"><span data-stu-id="a0567-157">Read-only routing may take longer than connecting to the primary because read only routing first connects to the primary and then looks for the best available readable secondary.</span></span> <span data-ttu-id="a0567-158">Deswegen sollten Sie das Anmeldetimeout vergrößern.</span><span class="sxs-lookup"><span data-stu-id="a0567-158">Because of this, you should increase your login timeout.</span></span>  
  
## <a name="odbc"></a><span data-ttu-id="a0567-159">ODBC</span><span class="sxs-lookup"><span data-stu-id="a0567-159">ODBC</span></span>  
 <span data-ttu-id="a0567-160">Zur Unterstützung von [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] wurden in [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Native Client zwei Schlüsselwörter für ODBC-Verbindungszeichenfolgen hinzugefügt:</span><span class="sxs-lookup"><span data-stu-id="a0567-160">Two ODBC connection string keywords were added to support [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] in [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Native Client:</span></span>  
  
-   `ApplicationIntent`  
  
-   `MultiSubnetFailover`  
  
 <span data-ttu-id="a0567-161">Weitere Informationen zu Schlüsselwörtern für ODBC-Verbindungszeichenfolgen in [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Native Client finden Sie unter [Verwenden von Schlüsselwörtern für Verbindungszeichenfolgen mit SQL Server Native Client](../applications/using-connection-string-keywords-with-sql-server-native-client.md).</span><span class="sxs-lookup"><span data-stu-id="a0567-161">For more information about ODBC connection string keywords in [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Native Client, see [Using Connection String Keywords with SQL Server Native Client](../applications/using-connection-string-keywords-with-sql-server-native-client.md).</span></span>  
  
 <span data-ttu-id="a0567-162">Die entsprechenden Verbindungseigenschaften sind:</span><span class="sxs-lookup"><span data-stu-id="a0567-162">The equivalent connection properties are:</span></span>  
  
-   `SQL_COPT_SS_APPLICATION_INTENT`  
  
-   `SQL_COPT_SS_MULTISUBNET_FAILOVER`  
  
 <span data-ttu-id="a0567-163">Weitere Informationen zu den ODBC-Verbindungseigenschaften in [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Native Client finden Sie unter [SQLSetConnectAttr](../../native-client-odbc-api/sqlsetconnectattr.md).</span><span class="sxs-lookup"><span data-stu-id="a0567-163">For more information about ODBC connection properties in [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Native Client, see [SQLSetConnectAttr](../../native-client-odbc-api/sqlsetconnectattr.md).</span></span>  
  
 <span data-ttu-id="a0567-164">Die Funktionalität des `ApplicationIntent`- und des `MultiSubnetFailover`-Schlüsselworts wird ab [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] im ODBC-Datenquellen-Administrator für DSNs verfügbar gemacht, die den [!INCLUDE[ssSQL11](../../../includes/sssql11-md.md)] Native Client-Treiber verwenden.</span><span class="sxs-lookup"><span data-stu-id="a0567-164">The functionality of the `ApplicationIntent` and `MultiSubnetFailover` keywords will be exposed in the ODBC Data Source Administrator for DSNs that use the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Native Client driver, beginning in [!INCLUDE[ssSQL11](../../../includes/sssql11-md.md)].</span></span>  
  
 <span data-ttu-id="a0567-165">Eine [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Native Client-ODBC-Anwendung kann eine von drei Funktionen verwenden, um die Verbindung herzustellen:</span><span class="sxs-lookup"><span data-stu-id="a0567-165">A [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Native Client ODBC application can use one of three functions to make the connection:</span></span>  
  
|<span data-ttu-id="a0567-166">Funktion</span><span class="sxs-lookup"><span data-stu-id="a0567-166">Function</span></span>|<span data-ttu-id="a0567-167">BESCHREIBUNG</span><span class="sxs-lookup"><span data-stu-id="a0567-167">Description</span></span>|  
|--------------|-----------------|  
|[<span data-ttu-id="a0567-168">SQLBrowseConnect</span><span class="sxs-lookup"><span data-stu-id="a0567-168">SQLBrowseConnect</span></span>](../../native-client-odbc-api/sqlbrowseconnect.md)|<span data-ttu-id="a0567-169">Die Liste der Server, die von `SQLBrowseConnect` zurückgegeben wird, schließt keine VNNs ein.</span><span class="sxs-lookup"><span data-stu-id="a0567-169">The list of servers returned by `SQLBrowseConnect` will not include VNNs.</span></span> <span data-ttu-id="a0567-170">Sie sehen nur eine Liste von Servern ohne Angabe, ob es sich bei dem Server um einen eigenständigen Server oder einen primären oder sekundären Server in einem WSFC-Cluster (Windows Server-Failoverclustering) handelt. der zwei oder mehr [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] -Instanzen enthält, die für [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)]aktiviert wurden.</span><span class="sxs-lookup"><span data-stu-id="a0567-170">You will only see a list of servers without any indication if the server is a standalone server, or a primary or secondary server in a Windows Server Failover Clustering (WSFC) cluster that contains two or more [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] instances that have been enabled for [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)].</span></span> <span data-ttu-id="a0567-171">Wenn Sie eine Verbindung mit einem Server herstellen, und es wird ein Fehler angezeigt, kann dies daran liegen, dass Sie eine Verbindung mit einem Server hergestellt haben und die Einstellung `ApplicationIntent` nicht mit der Serverkonfiguration kompatibel ist.</span><span class="sxs-lookup"><span data-stu-id="a0567-171">If you connect to a server and get a failure, it may be because you have connected to a server, and the `ApplicationIntent` setting is not compatible with the server configuration.</span></span><br /><br /> <span data-ttu-id="a0567-172">Da `SQLBrowseConnect` keine Server in einem WSFC-Cluster (Windows Server-Failoverclustering) erkennt, der zwei oder mehr [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]-Instanzen enthält, die für [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] aktiviert wurden, ignoriert `SQLBrowseConnect` das Schlüsselwort für die `MultiSubnetFailover`-Verbindungszeichenfolge.</span><span class="sxs-lookup"><span data-stu-id="a0567-172">Because `SQLBrowseConnect` does not recognize servers in a Windows Server Failover Clustering (WSFC) cluster that contains two or more [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] instances that have been enabled for [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)], `SQLBrowseConnect` ignores the `MultiSubnetFailover` connection string keyword.</span></span>|  
|[<span data-ttu-id="a0567-173">SQLConnect</span><span class="sxs-lookup"><span data-stu-id="a0567-173">SQLConnect</span></span>](../../native-client-odbc-api/sqlconnect.md)|<span data-ttu-id="a0567-174">`SQLConnect` unterstützt sowohl `ApplicationIntent` als auch `MultiSubnetFailover` über einen Datenquellennamen (DSN) oder Verbindungseigenschaften.</span><span class="sxs-lookup"><span data-stu-id="a0567-174">`SQLConnect` supports both `ApplicationIntent` and `MultiSubnetFailover` via a data source name (DSN) or connection properties.</span></span>|  
|[<span data-ttu-id="a0567-175">SQLDriverConnect</span><span class="sxs-lookup"><span data-stu-id="a0567-175">SQLDriverConnect</span></span>](../../native-client-odbc-api/sqldriverconnect.md)|<span data-ttu-id="a0567-176">`SQLDriverConnect` unterstützt `ApplicationIntent` und `MultiSubnetFailover` über Schlüsselwörter für Verbindungszeichenfolgen, Verbindungseigenschaften oder DSN.</span><span class="sxs-lookup"><span data-stu-id="a0567-176">`SQLDriverConnect` supports `ApplicationIntent` and `MultiSubnetFailover` via connection string keywords, connection properties, or DSN.</span></span>|  
  
## <a name="ole-db"></a><span data-ttu-id="a0567-177">OLE DB</span><span class="sxs-lookup"><span data-stu-id="a0567-177">OLE DB</span></span>  
 <span data-ttu-id="a0567-178">OLE DB im [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Native Client unterstützt das `MultiSubnetFailover`-Schlüsselwort nicht.</span><span class="sxs-lookup"><span data-stu-id="a0567-178">OLE DB in the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Native Client does not support the `MultiSubnetFailover` keyword.</span></span>  
  
 <span data-ttu-id="a0567-179">OLE DB im [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Native Client unterstützt Anwendungsabsicht.</span><span class="sxs-lookup"><span data-stu-id="a0567-179">OLE DB in the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Native Client will support application intent.</span></span> <span data-ttu-id="a0567-180">Die Anwendungsabsicht verhält sich für OLE DB-Anwendungen und ODBC-Anwendungen gleiche (siehe oben).</span><span class="sxs-lookup"><span data-stu-id="a0567-180">Application intent will behave the same for OLE DB applications as ODBC applications (see above).</span></span>  
  
 <span data-ttu-id="a0567-181">Zur Unterstützung von [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] wurde in [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Native Client ein Schlüsselwort für OLE-Verbindungszeichenfolgen hinzugefügt:</span><span class="sxs-lookup"><span data-stu-id="a0567-181">One OLE DB connection string keyword added to support [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] in [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Native Client:</span></span>  
  
-   `Application Intent`  
  
 <span data-ttu-id="a0567-182">Weitere Informationen zu Schlüsselwörtern für Verbindungszeichenfolgen in [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Native Client finden Sie unter [Verwenden von Schlüsselwörtern für Verbindungszeichenfolgen mit SQL Server Native Client](../applications/using-connection-string-keywords-with-sql-server-native-client.md).</span><span class="sxs-lookup"><span data-stu-id="a0567-182">For more information about connection string keywords in [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Native Client, see [Using Connection String Keywords with SQL Server Native Client](../applications/using-connection-string-keywords-with-sql-server-native-client.md).</span></span>  
  
 <span data-ttu-id="a0567-183">Die entsprechenden Verbindungseigenschaften sind:</span><span class="sxs-lookup"><span data-stu-id="a0567-183">The equivalent connection properties are:</span></span>  
  
-   `SSPROP_INIT_APPLICATIONINTENT`  
  
-   `DBPROP_INIT_PROVIDERSTRING`  
  
 <span data-ttu-id="a0567-184">Eine [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Native Client-OLE DB-Anwendung kann eine der folgenden Methoden zum Angeben der Anwendungsabsicht verwenden:</span><span class="sxs-lookup"><span data-stu-id="a0567-184">A [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Native Client OLE DB application can use one of the methods to specify application intent:</span></span>  
  
 `IDBInitialize::Initialize`  
 <span data-ttu-id="a0567-185">`IDBInitialize::Initialize` verwendet den zuvor konfigurierten Satz von Eigenschaften, um die Datenquelle zu initialisieren und das Datenquellenobjekt zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="a0567-185">`IDBInitialize::Initialize` uses the previously configured set of properties to initialize the data source and create the data source object.</span></span> <span data-ttu-id="a0567-186">Geben Sie die Anwendungsabsicht als Anbietereigenschaft oder als einen Teil der erweiterten Eigenschaftenzeichenfolge an.</span><span class="sxs-lookup"><span data-stu-id="a0567-186">Specify application intent as a provider property or as part of the extended properties string.</span></span>  
  
 `IDataInitialize::GetDataSource`  
 <span data-ttu-id="a0567-187">`IDataInitialize::GetDataSource` verwendet eine Eingabeverbindungszeichenfolge, die das `Application Intent`-Schlüsselwort enthalten kann.</span><span class="sxs-lookup"><span data-stu-id="a0567-187">`IDataInitialize::GetDataSource` takes an input connection string that can contain the `Application Intent` keyword.</span></span>  
  
 `IDBProperties::GetProperties`  
 <span data-ttu-id="a0567-188">`IDBProperties::GetProperties` ruft den Wert der Eigenschaft ab, die derzeit in der Datenquelle festgelegt wird.</span><span class="sxs-lookup"><span data-stu-id="a0567-188">`IDBProperties::GetProperties` retrieves the value of the property that is currently set on the data source.</span></span>  <span data-ttu-id="a0567-189">Sie können den `Application Intent`-Wert über die DBPROP_INIT_PROVIDERSTRING-Eigenschaft und die SSPROP_INIT_APPLICATIONINTENT-Eigenschaft abrufen.</span><span class="sxs-lookup"><span data-stu-id="a0567-189">You can retrieve the `Application Intent` value through the DBPROP_INIT_PROVIDERSTRING property and SSPROP_INIT_APPLICATIONINTENT property.</span></span>  
  
 `IDBProperties::SetProperties`  
 <span data-ttu-id="a0567-190">Um den `ApplicationIntent`-Eigenschaftswert festzulegen, rufen Sie `IDBProperties::SetProperties` auf, indem Sie die `SSPROP_INIT_APPLICATIONINTENT`-Eigenschaft mit dem Wert "`ReadWrite`" oder "`ReadOnly`" oder die `DBPROP_INIT_PROVIDERSTRING`-Eigenschaft mit dem Wert angeben, der "`ApplicationIntent=ReadOnly`" oder "`ApplicationIntent=ReadWrite`" enthält.</span><span class="sxs-lookup"><span data-stu-id="a0567-190">To set the `ApplicationIntent` property value, call `IDBProperties::SetProperties` passing in the `SSPROP_INIT_APPLICATIONINTENT` property with value "`ReadWrite`" or "`ReadOnly`" or `DBPROP_INIT_PROVIDERSTRING` property with value containing "`ApplicationIntent=ReadOnly`" or "`ApplicationIntent=ReadWrite`".</span></span>  
  
 <span data-ttu-id="a0567-191">Sie können die Anwendungsabsicht im Feld für die Eigenschaften der Anwendungsabsicht auf der Registerkarte Alle im Dialogfeld **Datenverknüpfungseigenschaften** angeben.</span><span class="sxs-lookup"><span data-stu-id="a0567-191">You can specify application intent in the Application Intent Properties field of the All tab in the **Data Link Properties** dialog box.</span></span>  
  
 <span data-ttu-id="a0567-192">Wenn implizite Verbindungen hergestellt werden, verwendet die implizite Verbindung die Einstellung der Anwendungsabsicht der übergeordneten Verbindung.</span><span class="sxs-lookup"><span data-stu-id="a0567-192">When implicit connections are established, the implicit connection will use the application intent setting of the parent connection.</span></span> <span data-ttu-id="a0567-193">Auf ähnliche Weise erben mehrere aus der gleichen Datenquelle erstellte Sitzungen die Einstellung für die Anwendungsabsicht der Datenquelle.</span><span class="sxs-lookup"><span data-stu-id="a0567-193">Similarly, multiple sessions created from the same data source will inherit the data source's application intent setting.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="a0567-194">Weitere Informationen</span><span class="sxs-lookup"><span data-stu-id="a0567-194">See Also</span></span>  
 <span data-ttu-id="a0567-195">[SQL Server Native Client-Funktionen](sql-server-native-client-features.md) </span><span class="sxs-lookup"><span data-stu-id="a0567-195">[SQL Server Native Client Features](sql-server-native-client-features.md) </span></span>  
 [<span data-ttu-id="a0567-196">Verwenden von Schlüsselwörtern für Verbindungszeichenfolgen mit SQL Server Native Client</span><span class="sxs-lookup"><span data-stu-id="a0567-196">Using Connection String Keywords with SQL Server Native Client</span></span>](../applications/using-connection-string-keywords-with-sql-server-native-client.md)  
  
  
