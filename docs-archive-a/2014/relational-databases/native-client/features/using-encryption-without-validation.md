---
title: Verwenden von Verschlüsselung ohne Überprüfung | Microsoft-Dokumentation
ms.custom: ''
ms.date: 03/06/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: native-client
ms.topic: reference
helpviewer_keywords:
- data access [SQL Server Native Client], encryption
- cryptography [SQL Server Native Client]
- SQLNCLI, encryption
- encryption [SQL Server Native Client]
- SQL Server Native Client, encryption
ms.assetid: f4c63206-80bb-4d31-84ae-ccfcd563effa
author: rothja
ms.author: jroth
ms.openlocfilehash: 0a6d2e8b3d696a92e3fa3e1b7de7604551d4f9ce
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 08/04/2020
ms.locfileid: "87609860"
---
# <a name="using-encryption-without-validation"></a><span data-ttu-id="adce0-102">Verwenden von Verschlüsselung ohne Überprüfung</span><span class="sxs-lookup"><span data-stu-id="adce0-102">Using Encryption Without Validation</span></span>
  [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] <span data-ttu-id="adce0-103">verschlüsselt stets Netzwerkpakete, die mit der Anmeldung verbunden sind.</span><span class="sxs-lookup"><span data-stu-id="adce0-103">always encrypts network packets associated with logging in.</span></span> <span data-ttu-id="adce0-104">Wenn auf dem Server beim Start kein Zertifikat bereitgestellt wird, erstellt [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] ein selbstsigniertes Zertifikat, mit dem Anmeldungspakete verschlüsselt werden.</span><span class="sxs-lookup"><span data-stu-id="adce0-104">If no certificate has been provisioned on the server when it starts up, [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] generates a self-signed certificate which is used to encrypt login packets.</span></span>  
  
 <span data-ttu-id="adce0-105">Anwendungen erfordern möglicherweise auch die Verschlüsselung des gesamten Netzwerkdatenverkehrs mit Verbindungszeichenfolgenschlüsselwörtern oder Verbindungseigenschaften.</span><span class="sxs-lookup"><span data-stu-id="adce0-105">Applications may also request encryption of all network traffic by using connection string keywords or connection properties.</span></span> <span data-ttu-id="adce0-106">Die Schlüsselwörter sind "verschlüsseln" für ODBC und OLE DB, wenn eine Anbieter Zeichenfolge mit **IDBInitialize:: Initialize**verwendet wird, oder "Use Encryption for Data" für ADO und OLE DB, wenn eine Initialisierungs Zeichenfolge mit " **IDataInitialize**" verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="adce0-106">The keywords are "Encrypt" for ODBC and OLE DB when using a provider string with **IDbInitialize::Initialize**, or "Use Encryption for Data" for ADO and OLE DB when using an initialization string with **IDataInitialize**.</span></span> <span data-ttu-id="adce0-107">Dies kann auch durch [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Configuration Manager mithilfe der Option **Protokoll Verschlüsselung erzwingen** konfiguriert werden.</span><span class="sxs-lookup"><span data-stu-id="adce0-107">This may also be configured by [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Configuration Manager using the **Force Protocol Encryption** option.</span></span> <span data-ttu-id="adce0-108">Standardmäßig ist für die Verschlüsselung des Netzwerkverkehrs für eine Verbindung die Bereitstellung eines Zertifikats auf dem Server erforderlich.</span><span class="sxs-lookup"><span data-stu-id="adce0-108">By default, encryption of all network traffic for a connection requires that a certificate be provisioned on the server.</span></span>  
  
 <span data-ttu-id="adce0-109">Weitere Informationen zu Schlüsselwörtern für Verbindungs Zeichenfolgen finden [Sie unter Verwenden von Schlüssel SQL Server Native Client Wörtern für Verbindungs Zeichenfolgen](../applications/using-connection-string-keywords-with-sql-server-native-client.md)</span><span class="sxs-lookup"><span data-stu-id="adce0-109">For information about connection string keywords, see [Using Connection String Keywords with SQL Server Native Client](../applications/using-connection-string-keywords-with-sql-server-native-client.md).</span></span>  
  
 <span data-ttu-id="adce0-110">Um die Verschlüsselung zu aktivieren, die verwendet werden soll, wenn kein Zertifikat auf dem Server bereitgestellt wurde, kann der [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]-Konfigurations-Manager zum Festlegen der Optionen **Protokollverschlüsselung erzwingen** und **Serverzertifikat vertrauen** verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="adce0-110">To enable encryption to be used when a certificate has not been provisioned on the server, [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Configuration Manager can be used to set both the **Force Protocol Encryption** and the **Trust Server Certificate** options.</span></span> <span data-ttu-id="adce0-111">In diesem Fall wird bei der Verschlüsselung ein selbstsigniertes Serverzertifikat ohne Überprüfung verwendet, wenn kein überprüfbares Zertifikat auf dem Server bereitgestellt wurde.</span><span class="sxs-lookup"><span data-stu-id="adce0-111">In this case, encryption will use a self-signed server certificate without validation if no verifiable certificate has been provisioned on the server.</span></span>  
  
 <span data-ttu-id="adce0-112">Anwendungen können auch das Schlüsselwort "TrustServerCertificate" oder das zugeordnete Verbindungsattribut verwenden, um sicherzustellen, dass eine Verschlüsselung durchgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="adce0-112">Applications may also use the "TrustServerCertificate" keyword or its associated connection attribute to guarantee that encryption takes place.</span></span> <span data-ttu-id="adce0-113">Anwendungseinstellungen senken nicht die vom [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Client-Konfigurations-Manager festgelegte Sicherheitsstufe, vielmehr stärken sie sie.</span><span class="sxs-lookup"><span data-stu-id="adce0-113">Application settings never reduce the level of security set by [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Client Configuration Manager, but may strengthen it.</span></span> <span data-ttu-id="adce0-114">Wenn beispielsweise **Protokollverschlüsselung erzwingen** nicht für den Client festgelegt ist, kann eine Anwendung die Verschlüsselung selbst anfordern.</span><span class="sxs-lookup"><span data-stu-id="adce0-114">For example, if **Force Protocol Encryption** is not set for the client, an application may request encryption itself.</span></span> <span data-ttu-id="adce0-115">Um die Verschlüsselung sicherzustellen, selbst wenn kein Serverzertifikat bereitgestellt wurde, kann eine Anwendung die Verschlüsselung und "TrustServerCertificate" anfordern.</span><span class="sxs-lookup"><span data-stu-id="adce0-115">To guarantee encryption even when a server certificate has not been provisioned, an application may request encryption and "TrustServerCertificate".</span></span> <span data-ttu-id="adce0-116">Wenn "TrustServerCertificate" nicht in der Clientkonfiguration aktiviert ist, ist dennoch die Bereitstellung eines Serverzertifikats erforderlich.</span><span class="sxs-lookup"><span data-stu-id="adce0-116">However, if "TrustServerCertificate" is not enabled in the client configuration, a provisioned server certificate is still required.</span></span> <span data-ttu-id="adce0-117">In der folgenden Tabelle werden alle Fälle beschrieben:</span><span class="sxs-lookup"><span data-stu-id="adce0-117">The following table describes all cases:</span></span>  
  
|<span data-ttu-id="adce0-118">Protokollverschlüsselung erzwingen - Clienteinstellung</span><span class="sxs-lookup"><span data-stu-id="adce0-118">Force Protocol Encryption client setting</span></span>|<span data-ttu-id="adce0-119">Dem Serverzertifikat vertrauen</span><span class="sxs-lookup"><span data-stu-id="adce0-119">Trust Server Certificate client setting</span></span>|<span data-ttu-id="adce0-120">Verbindungszeichenfolge-/Verbindungsattribut 'Verschlüsseln/Verschlüsselung für Daten verwenden'</span><span class="sxs-lookup"><span data-stu-id="adce0-120">Connection string/connection attribute Encrypt/Use Encryption for Data</span></span>|<span data-ttu-id="adce0-121">Verbindungszeichenfolge/Verbindungsattribut 'Dem Serverzertifikat vertrauen'</span><span class="sxs-lookup"><span data-stu-id="adce0-121">Connection string/connection attribute Trust Server Certificate</span></span>|<span data-ttu-id="adce0-122">Ergebnis</span><span class="sxs-lookup"><span data-stu-id="adce0-122">Result</span></span>|  
|----------------------------------------------|---------------------------------------------|------------------------------------------------------------------------------|----------------------------------------------------------------------|------------|  
|<span data-ttu-id="adce0-123">Nein</span><span class="sxs-lookup"><span data-stu-id="adce0-123">No</span></span>|<span data-ttu-id="adce0-124">–</span><span class="sxs-lookup"><span data-stu-id="adce0-124">N/A</span></span>|<span data-ttu-id="adce0-125">Nein (Standard)</span><span class="sxs-lookup"><span data-stu-id="adce0-125">No (default)</span></span>|<span data-ttu-id="adce0-126">Ignoriert</span><span class="sxs-lookup"><span data-stu-id="adce0-126">Ignored</span></span>|<span data-ttu-id="adce0-127">Keine Verschlüsselung.</span><span class="sxs-lookup"><span data-stu-id="adce0-127">No encryption occurs.</span></span>|  
|<span data-ttu-id="adce0-128">Nein</span><span class="sxs-lookup"><span data-stu-id="adce0-128">No</span></span>|<span data-ttu-id="adce0-129">–</span><span class="sxs-lookup"><span data-stu-id="adce0-129">N/A</span></span>|<span data-ttu-id="adce0-130">Ja</span><span class="sxs-lookup"><span data-stu-id="adce0-130">Yes</span></span>|<span data-ttu-id="adce0-131">Nein (Standard)</span><span class="sxs-lookup"><span data-stu-id="adce0-131">No (default)</span></span>|<span data-ttu-id="adce0-132">Eine Verschlüsselung findet nur statt, wenn ein überprüfbares Serverzertifikat vorliegt, anderenfalls schlägt der Verbindungsversuch fehl.</span><span class="sxs-lookup"><span data-stu-id="adce0-132">Encryption occurs only if there is a verifiable server certificate, otherwise the connection attempt fails.</span></span>|  
|<span data-ttu-id="adce0-133">Nein</span><span class="sxs-lookup"><span data-stu-id="adce0-133">No</span></span>|<span data-ttu-id="adce0-134">–</span><span class="sxs-lookup"><span data-stu-id="adce0-134">N/A</span></span>|<span data-ttu-id="adce0-135">Ja</span><span class="sxs-lookup"><span data-stu-id="adce0-135">Yes</span></span>|<span data-ttu-id="adce0-136">Ja</span><span class="sxs-lookup"><span data-stu-id="adce0-136">Yes</span></span>|<span data-ttu-id="adce0-137">Verschlüsselung wird immer durchgeführt, es wird jedoch z. B. ein selbstsigniertes Serverzertifikat verwendet.</span><span class="sxs-lookup"><span data-stu-id="adce0-137">Encryption always occurs, but may use a self-signed server certificate.</span></span>|  
|<span data-ttu-id="adce0-138">Ja</span><span class="sxs-lookup"><span data-stu-id="adce0-138">Yes</span></span>|<span data-ttu-id="adce0-139">Nein</span><span class="sxs-lookup"><span data-stu-id="adce0-139">No</span></span>|<span data-ttu-id="adce0-140">Ignoriert</span><span class="sxs-lookup"><span data-stu-id="adce0-140">Ignored</span></span>|<span data-ttu-id="adce0-141">Ignoriert</span><span class="sxs-lookup"><span data-stu-id="adce0-141">Ignored</span></span>|<span data-ttu-id="adce0-142">Eine Verschlüsselung findet nur statt, wenn ein überprüfbares Serverzertifikat vorliegt, anderenfalls schlägt der Verbindungsversuch fehl.</span><span class="sxs-lookup"><span data-stu-id="adce0-142">Encryption occurs only if there is a verifiable server certificate, otherwise the connection attempt fails.</span></span>|  
|<span data-ttu-id="adce0-143">Ja</span><span class="sxs-lookup"><span data-stu-id="adce0-143">Yes</span></span>|<span data-ttu-id="adce0-144">Ja</span><span class="sxs-lookup"><span data-stu-id="adce0-144">Yes</span></span>|<span data-ttu-id="adce0-145">Nein (Standard)</span><span class="sxs-lookup"><span data-stu-id="adce0-145">No (default)</span></span>|<span data-ttu-id="adce0-146">Ignoriert</span><span class="sxs-lookup"><span data-stu-id="adce0-146">Ignored</span></span>|<span data-ttu-id="adce0-147">Verschlüsselung wird immer durchgeführt, es wird jedoch z. B. ein selbstsigniertes Serverzertifikat verwendet.</span><span class="sxs-lookup"><span data-stu-id="adce0-147">Encryption always occurs, but may use a self-signed server certificate.</span></span>|  
|<span data-ttu-id="adce0-148">Ja</span><span class="sxs-lookup"><span data-stu-id="adce0-148">Yes</span></span>|<span data-ttu-id="adce0-149">Ja</span><span class="sxs-lookup"><span data-stu-id="adce0-149">Yes</span></span>|<span data-ttu-id="adce0-150">Ja</span><span class="sxs-lookup"><span data-stu-id="adce0-150">Yes</span></span>|<span data-ttu-id="adce0-151">Nein (Standard)</span><span class="sxs-lookup"><span data-stu-id="adce0-151">No (default)</span></span>|<span data-ttu-id="adce0-152">Eine Verschlüsselung findet nur statt, wenn ein überprüfbares Serverzertifikat vorliegt, anderenfalls schlägt der Verbindungsversuch fehl.</span><span class="sxs-lookup"><span data-stu-id="adce0-152">Encryption occurs only if there is a verifiable server certificate, otherwise the connection attempt fails.</span></span>|  
|<span data-ttu-id="adce0-153">Ja</span><span class="sxs-lookup"><span data-stu-id="adce0-153">Yes</span></span>|<span data-ttu-id="adce0-154">Ja</span><span class="sxs-lookup"><span data-stu-id="adce0-154">Yes</span></span>|<span data-ttu-id="adce0-155">Ja</span><span class="sxs-lookup"><span data-stu-id="adce0-155">Yes</span></span>|<span data-ttu-id="adce0-156">Ja</span><span class="sxs-lookup"><span data-stu-id="adce0-156">Yes</span></span>|<span data-ttu-id="adce0-157">Verschlüsselung wird immer durchgeführt, es kann jedoch ein selbstsigniertes Serverzertifikat verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="adce0-157">Encryption always occurs, but might use a self-signed server certificate.</span></span>|  
  
## <a name="sql-server-native-client-ole-db-provider"></a><span data-ttu-id="adce0-158">SQL Server Native Client OLE DB-Anbieter</span><span class="sxs-lookup"><span data-stu-id="adce0-158">SQL Server Native Client OLE DB Provider</span></span>  
 <span data-ttu-id="adce0-159">Der [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Native Client OLE DB-Anbieter unterstützt die Verschlüsselung ohne Überprüfung durch Hinzufügen der SSPROP_INIT_TRUST_SERVER_CERTIFICATE Datenquellen-Initialisierungs Eigenschaft, die im DBPROPSET_SQLSERVERDBINIT-Eigenschaften Satz implementiert ist.</span><span class="sxs-lookup"><span data-stu-id="adce0-159">The [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Native Client OLE DB provider supports encryption without validation through the addition of the SSPROP_INIT_TRUST_SERVER_CERTIFICATE data source initialization property, which is implemented in the DBPROPSET_SQLSERVERDBINIT property set.</span></span> <span data-ttu-id="adce0-160">Darüber hinaus wurde ein neues Verbindungszeichenfolgeschlüsselwort, „TrustServerCertificate“, hinzugefügt.</span><span class="sxs-lookup"><span data-stu-id="adce0-160">In addition, a new connection string keyword, "TrustServerCertificate", as been added.</span></span> <span data-ttu-id="adce0-161">Gültig sind die Werte YES oder NO, wobei NO die Standardeinstellung ist.</span><span class="sxs-lookup"><span data-stu-id="adce0-161">It accepts yes or no values; no is the default.</span></span> <span data-ttu-id="adce0-162">Wenn Dienstkomponenten verwendet werden, sind die Werte "true" und "false" gültig, wobei "false" die Standardeinstellung ist.</span><span class="sxs-lookup"><span data-stu-id="adce0-162">When using service components, it accepts true or false values; false is the default.</span></span>  
  
 <span data-ttu-id="adce0-163">Weitere Informationen zu Verbesserungen am DBPROPSET_SQLSERVERDBINIT-Eigenschaftensatz finden Sie unter [Initialisierungs- und Autorisierungseigenschaften](../../native-client-ole-db-data-source-objects/initialization-and-authorization-properties.md).</span><span class="sxs-lookup"><span data-stu-id="adce0-163">For more information about enhancements made to the DBPROPSET_SQLSERVERDBINIT property set, see [Initialization and Authorization Properties](../../native-client-ole-db-data-source-objects/initialization-and-authorization-properties.md).</span></span>  
  
## <a name="sql-server-native-client-odbc-driver"></a><span data-ttu-id="adce0-164">ODBC-Treiber für SQL Server Native Client</span><span class="sxs-lookup"><span data-stu-id="adce0-164">SQL Server Native Client ODBC Driver</span></span>  
 <span data-ttu-id="adce0-165">Der [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] ODBC-Treiber von Native Client unterstützt die Verschlüsselung ohne Überprüfung durch Ergänzungen der Funktionen [SQLSetConnectAttr](../../native-client-odbc-api/sqlsetconnectattr.md) und [SQLGetConnectAttr](../../native-client-odbc-api/sqlgetconnectattr.md) .</span><span class="sxs-lookup"><span data-stu-id="adce0-165">The [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Native Client ODBC driver supports encryption without validation through additions to the [SQLSetConnectAttr](../../native-client-odbc-api/sqlsetconnectattr.md) and [SQLGetConnectAttr](../../native-client-odbc-api/sqlgetconnectattr.md) functions.</span></span> <span data-ttu-id="adce0-166">SQL_COPT_SS_TRUST_SERVER_CERTIFICATE wurde hinzugefügt, um entweder SQL_TRUST_SERVER_CERTIFICATE_YES oder SQL_TRUST_SERVER_CERTIFICATE_NO anzunehmen, wobei SQL_TRUST_SERVER_CERTIFICATE_NO die Standardeinstellung ist.</span><span class="sxs-lookup"><span data-stu-id="adce0-166">SQL_COPT_SS_TRUST_SERVER_CERTIFICATE has been added to accept either SQL_TRUST_SERVER_CERTIFICATE_YES or SQL_TRUST_SERVER_CERTIFICATE_NO, with SQL_TRUST_SERVER_CERTIFICATE_NO being the default.</span></span> <span data-ttu-id="adce0-167">Darüber hinaus wurde ein neues Verbindungszeichenfolgeschlüsselwort, "TrustServerCertificate", hinzugefügt.</span><span class="sxs-lookup"><span data-stu-id="adce0-167">In addition, a new connection string keyword, "TrustServerCertificate", has been added.</span></span> <span data-ttu-id="adce0-168">Gültig sind die Werte "Ja" oder "Nein", wobei "Nein" die Standardeinstellung ist.</span><span class="sxs-lookup"><span data-stu-id="adce0-168">It accepts yes or no values; "no" is the default.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="adce0-169">Weitere Informationen</span><span class="sxs-lookup"><span data-stu-id="adce0-169">See Also</span></span>  
 [<span data-ttu-id="adce0-170">SQL Server Native Client-Funktionen</span><span class="sxs-lookup"><span data-stu-id="adce0-170">SQL Server Native Client Features</span></span>](sql-server-native-client-features.md)  
  
  
