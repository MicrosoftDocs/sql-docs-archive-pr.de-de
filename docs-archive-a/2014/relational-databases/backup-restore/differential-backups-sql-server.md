---
title: Differenzielle Sicherungen (SQL Server) | Microsoft-Dokumentation
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: backup-restore
ms.topic: conceptual
helpviewer_keywords:
- differential backups
- differential backups, about
ms.assetid: 123bb7af-1367-4bde-bfcb-76d36799b905
author: MikeRayMSFT
ms.author: mikeray
ms.openlocfilehash: 5c057e0d41cb46adef0ec1e01c3406190db900e4
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 08/04/2020
ms.locfileid: "87621523"
---
# <a name="differential-backups-sql-server"></a><span data-ttu-id="2a45b-102">Differenzielle Sicherungen (SQL Server)</span><span class="sxs-lookup"><span data-stu-id="2a45b-102">Differential Backups (SQL Server)</span></span>
  <span data-ttu-id="2a45b-103">Dieses Thema zu Sicherung und Wiederherstellung ist für alle [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] -Datenbanken relevant.</span><span class="sxs-lookup"><span data-stu-id="2a45b-103">This backup and restore topic is relevant for all [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] databases.</span></span>  
  
 <span data-ttu-id="2a45b-104">Diese Sicherung basiert auf der letzten vollständigen Datensicherung.</span><span class="sxs-lookup"><span data-stu-id="2a45b-104">A differential backup is based on the most recent, previous full data backup.</span></span> <span data-ttu-id="2a45b-105">Mit einer differenziellen Sicherung werden nur die Daten erfasst, die sich seit dieser vollständigen Sicherung geändert haben.</span><span class="sxs-lookup"><span data-stu-id="2a45b-105">A differential backup captures only the data that has changed since that full backup.</span></span> <span data-ttu-id="2a45b-106">Die vollständige Sicherung, auf der eine differenzielle Sicherung basiert wird, wird als *Basis* der differenziellen Sicherung bezeichnet.</span><span class="sxs-lookup"><span data-stu-id="2a45b-106">The full backup upon which a differential backup is based is known as the *base* of the differential.</span></span> <span data-ttu-id="2a45b-107">Vollständige Sicherungen, mit Ausnahme von Kopiesicherungen, können als Basis für eine Reihe differenzieller Sicherungen dienen, einschließlich Datenbanksicherungen, Teilsicherungen und Dateisicherungen.</span><span class="sxs-lookup"><span data-stu-id="2a45b-107">Full backups, except for copy-only backups, can serve as the base for a series of differential backups, including database backups, partial backups, and file backups.</span></span> <span data-ttu-id="2a45b-108">Die Basissicherung für eine differenzielle Dateisicherung kann in einer vollständigen Sicherung, einer Dateisicherung oder einer Teilsicherung enthalten sein.</span><span class="sxs-lookup"><span data-stu-id="2a45b-108">The base backup for a file differential backup can be contained within a full backup, a file backup, or a partial backup.</span></span>  
  
  
##  <a name="benefits"></a><a name="Benefits"></a> <span data-ttu-id="2a45b-109">Vorteile</span><span class="sxs-lookup"><span data-stu-id="2a45b-109">Benefits</span></span>  
  
-   <span data-ttu-id="2a45b-110">Die Erstellung einer differenziellen Sicherung kann im Vergleich zur Erstellung einer vollständigen Sicherung sehr schnell gehen.</span><span class="sxs-lookup"><span data-stu-id="2a45b-110">Creating a differential backups can be very fast compared to creating a full backup.</span></span> <span data-ttu-id="2a45b-111">Bei einer differenziellen Sicherung werden nur die seit der letzten vollständigen Sicherung auf Basis der differenziellen Sicherung geänderten Daten aufgezeichnet.</span><span class="sxs-lookup"><span data-stu-id="2a45b-111">A differential backup records only the data that has changed since the full backup upon the differential backup is based.</span></span> <span data-ttu-id="2a45b-112">Dadurch werden häufige Datensicherungen erleichtert, wodurch das Risiko des Datenverlusts verringert wird.</span><span class="sxs-lookup"><span data-stu-id="2a45b-112">This facilitates taking frequent data backups, which decrease the risk of data loss.</span></span> <span data-ttu-id="2a45b-113">Vor der Wiederherstellung einer differenziellen Sicherung muss jedoch die entsprechende Basis wiederhergestellt werden.</span><span class="sxs-lookup"><span data-stu-id="2a45b-113">However, before you restore a differential backup, you must restore its base.</span></span> <span data-ttu-id="2a45b-114">Daher sind bei der Wiederherstellung von einer differenziellen Sicherung mehr Schritte und mehr Zeit erforderlich als bei der Wiederherstellung von einer vollständigen Sicherung, da zwei Sicherungsdateien benötigt werden.</span><span class="sxs-lookup"><span data-stu-id="2a45b-114">Therefore restoring from a differential backup will necessarily take more steps and time than restoring from a full backup because two backup files are required.</span></span>  
  
-   <span data-ttu-id="2a45b-115">Differenzielle Datenbanksicherungen sind besonders dann hilfreich, wenn eine Teilmenge einer Datenbank häufiger geändert wird als die übrigen Daten der Datenbank.</span><span class="sxs-lookup"><span data-stu-id="2a45b-115">Differential database backups are especially useful if a subset of a database is modified more frequently than the rest of the database.</span></span> <span data-ttu-id="2a45b-116">In diesen Fällen ermöglichen differenzielle Datenbanksicherungen eine häufige Sicherung ohne den hohen Verwaltungsaufwand vollständiger Datenbanksicherungen.</span><span class="sxs-lookup"><span data-stu-id="2a45b-116">In these cases, differential database backups enable you back up frequently without the overhead of full database backups.</span></span>  
  
-   <span data-ttu-id="2a45b-117">Bei Verwendung des vollständigen Wiederherstellungsmodells kann mithilfe differenzieller Sicherungen die Anzahl der Protokollsicherungen reduziert werden, die wiederhergestellt werden müssen.</span><span class="sxs-lookup"><span data-stu-id="2a45b-117">Under the full recovery model, using differential backups can reduce the number of log backups that you have to restore.</span></span>  
  
##  <a name="overview-of-differential-backups"></a><a name="Overview"></a> <span data-ttu-id="2a45b-118">Übersicht über differenzielle Sicherungen</span><span class="sxs-lookup"><span data-stu-id="2a45b-118">Overview of Differential Backups</span></span>  
 <span data-ttu-id="2a45b-119">Bei einer differenziellen Sicherung wird der Status aller *Blöcke* (Sammlungen von acht physisch zusammenhängenden Seiten) erfasst, die sich zwischen dem Erstellungszeitpunkt der differenziellen Datenbank und dem Erstellungszeitpunkt der differenziellen Sicherung geändert hat.</span><span class="sxs-lookup"><span data-stu-id="2a45b-119">A differential backup captures the state of any *extents* (collections of eight physically contiguous pages) that have changed between when the differential base was created and the when differential backup is created.</span></span> <span data-ttu-id="2a45b-120">Das bedeutet, dass die Größe einer bestimmten differenziellen Sicherung von der Menge an Daten abhängt, die seit der Basissicherung geändert wurden.</span><span class="sxs-lookup"><span data-stu-id="2a45b-120">This means that the size of a given differential backup depends on the amount of data that has changed since the base.</span></span> <span data-ttu-id="2a45b-121">Grundsätzlich gilt: Je älter die Basis, desto größer die neue differenzielle Sicherung.</span><span class="sxs-lookup"><span data-stu-id="2a45b-121">Generally, the older a base is, the larger a new differential backup will be.</span></span> <span data-ttu-id="2a45b-122">In einer Reihe differenzieller Sicherungen enthält ein häufig aktualisierter Block möglicherweise bei jeder differenziellen Sicherung unterschiedliche Daten.</span><span class="sxs-lookup"><span data-stu-id="2a45b-122">In a series of differential backups, a frequently updated extent is likely to contain different data in each differential backup.</span></span>  
  
 <span data-ttu-id="2a45b-123">In der folgenden Abbildung wird die Funktionsweise einer differenziellen Sicherung veranschaulicht.</span><span class="sxs-lookup"><span data-stu-id="2a45b-123">The following illustration shows how a differential backup works.</span></span> <span data-ttu-id="2a45b-124">Die Abbildung zeigt 24 Datenblöcke, von denen sechs geändert wurden.</span><span class="sxs-lookup"><span data-stu-id="2a45b-124">The figure shows 24 data extents, 6 of which have changed.</span></span> <span data-ttu-id="2a45b-125">Die differenzielle Sicherung enthält nur diese sechs Datenblöcke.</span><span class="sxs-lookup"><span data-stu-id="2a45b-125">The differential backup contains only these 6 data extents.</span></span> <span data-ttu-id="2a45b-126">Der differenzielle Sicherungsvorgang basiert auf einer Bitmapseite, die für jeden Block ein Bit enthält.</span><span class="sxs-lookup"><span data-stu-id="2a45b-126">The differential backup operation relies on a bitmap page that contains a bit for every extent.</span></span> <span data-ttu-id="2a45b-127">Für jeden seit der Basissicherung aktualisierten Block wird das Bit in der Bitmap auf 1 festgelegt.</span><span class="sxs-lookup"><span data-stu-id="2a45b-127">For each extent updated since the base, the bit is set to 1 in the bitmap.</span></span>  
  
 <span data-ttu-id="2a45b-128">![Das differenzielle Bitmuster identifiziert geänderte Blöcke](../../database-engine/media/bnr-how-diff-backups-work.gif "Das differenzielle Bitmuster identifiziert geänderte Blöcke")</span><span class="sxs-lookup"><span data-stu-id="2a45b-128">![Differential bitmap identifies changed extents](../../database-engine/media/bnr-how-diff-backups-work.gif "Differential bitmap identifies changed extents")</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="2a45b-129">Durch eine Kopiesicherung erfolgt keine Aktualisierung des differenziellen Bitmusters.</span><span class="sxs-lookup"><span data-stu-id="2a45b-129">The differential bitmap is not updated by a copy-only backup.</span></span> <span data-ttu-id="2a45b-130">Daher hat eine Kopiesicherung keine Auswirkungen auf die nachfolgenden differenziellen Sicherungen.</span><span class="sxs-lookup"><span data-stu-id="2a45b-130">Therefore, a copy-only backup does not affect subsequent differential backups.</span></span>  
  
 <span data-ttu-id="2a45b-131">Eine differenzielle Sicherung wird relativ bald erstellt, nachdem die zugehörige Basis erheblich kleiner geworden ist als die differenzielle Basis.</span><span class="sxs-lookup"><span data-stu-id="2a45b-131">A differential backup that is taken fairly soon after its base is usually significantly smaller than the differential base.</span></span> <span data-ttu-id="2a45b-132">Hierdurch wird Speicherplatz gespart und der Zeitaufwand für die Sicherung reduziert.</span><span class="sxs-lookup"><span data-stu-id="2a45b-132">This saves storage space and backup time.</span></span> <span data-ttu-id="2a45b-133">Im Laufe der Zeit wird aufgrund der in der Datenbank vorgenommenen Änderungen der Unterschied zwischen der Datenbank und einer bestimmten differenziellen Basis jedoch immer größer.</span><span class="sxs-lookup"><span data-stu-id="2a45b-133">However, as a database changes over time, the difference between the database and a specific differential base increases.</span></span> <span data-ttu-id="2a45b-134">Je mehr Zeit zwischen einer differenziellen Sicherung und der zugehörigen Basis liegt, desto umfangreicher wird die differenzielle Sicherung ausfallen.</span><span class="sxs-lookup"><span data-stu-id="2a45b-134">The longer the time between a differential backup and its base, the larger the differential backup is likely to be.</span></span> <span data-ttu-id="2a45b-135">Dies bedeutet, dass letztendlich differenzielle Sicherungen nahezu die Größe der differenziellen Basis erreichen können.</span><span class="sxs-lookup"><span data-stu-id="2a45b-135">This means that the differential backups can eventually approach the differential base in size.</span></span> <span data-ttu-id="2a45b-136">Bei einer großen differenziellen Sicherung geht der Vorteil des schnelleren Sicherns und des geringeren Umfangs verloren.</span><span class="sxs-lookup"><span data-stu-id="2a45b-136">A large differential backup loses the advantages of a faster and smaller backup.</span></span>  
  
 <span data-ttu-id="2a45b-137">Mit zunehmender Größe der differenziellen Sicherungen kann das Wiederherstellen einer differenziellen Sicherung den Zeitaufwand zum Wiederherstellen einer Datenbank erheblich erhöhen.</span><span class="sxs-lookup"><span data-stu-id="2a45b-137">As the differential backups increase in size, restoring a differential backup can significantly increase the time that is required to restore a database.</span></span> <span data-ttu-id="2a45b-138">Daher sollten Sie in regelmäßigen Abständen neue vollständige Sicherungen ausführen, um eine neue differenzielle Basis für die Daten zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="2a45b-138">Therefore, we recommend that you take a new full backup at set intervals to establish a new differential base for the data.</span></span> <span data-ttu-id="2a45b-139">Sie können z. B. einmal wöchentlich eine vollständige Sicherung der gesamten Datenbank (also eine vollständige Datenbanksicherung) und während der Woche eine regelmäßige Serie von differenziellen Datenbanksicherungen ausführen.</span><span class="sxs-lookup"><span data-stu-id="2a45b-139">For example, you might take a weekly full backup of the whole database (that is, a full database backup) followed by a regular series of differential database backups during the week.</span></span>  
  
 <span data-ttu-id="2a45b-140">Beim Wiederherstellen müssen Sie die Basis wiederherstellen, bevor Sie eine differenzielle Sicherung wiederherstellen.</span><span class="sxs-lookup"><span data-stu-id="2a45b-140">At restore time, before you restore a differential backup, you must restore its base.</span></span> <span data-ttu-id="2a45b-141">Anschließend müssen Sie lediglich die letzte differenzielle Sicherung wiederherstellen, um die Datenbank auf den Stand dieser differenziellen Sicherung zu bringen.</span><span class="sxs-lookup"><span data-stu-id="2a45b-141">Then, restore only the most recent differential backup to bring the database forward to the time when that differential backup was created.</span></span> <span data-ttu-id="2a45b-142">Normalerweise stellen Sie die letzte vollständige Sicherung und anschließend die letzte differenzielle Sicherung, die auf dieser vollständigen Sicherung basiert, wieder her.</span><span class="sxs-lookup"><span data-stu-id="2a45b-142">Typically, you would restore the most recent full backup followed by the most recent differential backup that is based on that full backup.</span></span>  
  
## <a name="differential-backups-of-databases-with-memory-optimized-tables"></a><span data-ttu-id="2a45b-143">Differenzielle Sicherungen von Datenbanken mit speicheroptimierten Tabellen</span><span class="sxs-lookup"><span data-stu-id="2a45b-143">Differential Backups of Databases with Memory-Optimized Tables</span></span>  
 <span data-ttu-id="2a45b-144">Weitere Informationen zu differenziellen Sicherungen und Datenbanken mit speicheroptimierten Tabellen finden Sie unter [Sichern einer Datenbank mit speicheroptimierten Tabellen](../in-memory-oltp/memory-optimized-tables.md).</span><span class="sxs-lookup"><span data-stu-id="2a45b-144">For information about differential backups and databases with memory-optimized tables, see [Backing Up a Database with Memory-Optimized Tables](../in-memory-oltp/memory-optimized-tables.md).</span></span>  
  
##  <a name="differential-backups-of-read-only-databases"></a><a name="ReadOnlyDbs"></a> <span data-ttu-id="2a45b-145">Differenzielle Sicherungen schreibgeschützter Datenbanken</span><span class="sxs-lookup"><span data-stu-id="2a45b-145">Differential Backups of Read-Only Databases</span></span>  
 <span data-ttu-id="2a45b-146">Für schreibgeschützte Datenbanken sind separate vollständige Sicherungen einfacher zu verwalten als wenn sie zusammen mit differenziellen Sicherungen verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="2a45b-146">For read-only databases, full backups used alone are easier to manage than when they are used with differential backups.</span></span> <span data-ttu-id="2a45b-147">Wenn eine Datenbank schreibgeschützt ist, können mit Sicherungen und sonstigen Vorgängen die Metadaten in der Datei nicht geändert werden.</span><span class="sxs-lookup"><span data-stu-id="2a45b-147">When a database is read-only, backup and other operations cannot change the metadata that is contained in the file.</span></span> <span data-ttu-id="2a45b-148">Deshalb werden die für eine differenzielle Sicherung erforderlichen Metadaten, z.B. die Protokollfolgenummer (Log Sequence Number, LSN), mit der die differenzielle Sicherung beginnt (die Basis-LSN für eine differenzielle Sicherung), in der **master** -Datenbank gespeichert.</span><span class="sxs-lookup"><span data-stu-id="2a45b-148">Therefore, metadata that is required by a differential backup, such as the log sequence number at which the differential backup begins (the differential base LSN) is stored in the **master** database.</span></span> <span data-ttu-id="2a45b-149">Wenn die differenzielle Basis erstellt wird, während die Datenbank schreibgeschützt ist, zeigt das differenzielle Bitmuster mehr Änderungen an als tatsächlich seit der Basissicherung erfolgt sind.</span><span class="sxs-lookup"><span data-stu-id="2a45b-149">If the differential base is taken when the database is read-only, the differential bitmap indicates more changes than have actually occurred since the base backup.</span></span> <span data-ttu-id="2a45b-150">Die zusätzlichen Daten werden durch die Sicherung gelesen, jedoch nicht in die Sicherung geschrieben, da die in der **backupset** -Systemtabelle gespeicherte [differential_base_lsn](/sql/relational-databases/system-tables/backupset-transact-sql) verwendet wird, um zu ermitteln, ob die Daten seit der Basissicherung tatsächlich geändert wurden.</span><span class="sxs-lookup"><span data-stu-id="2a45b-150">The extra data is read by backup, but is not written to the backup, because the **differential_base_lsn** stored in the [backupset](/sql/relational-databases/system-tables/backupset-transact-sql) system table is used to determine whether the data has actually changed since the base.</span></span>  
  
 <span data-ttu-id="2a45b-151">Wenn eine schreibgeschützte Datenbank neu erstellt, wiederhergestellt oder getrennt und dann angefügt wird, gehen die Informationen zur differenziellen Basis verloren.</span><span class="sxs-lookup"><span data-stu-id="2a45b-151">When a read-only database is rebuilt, restored, or detached and attached, the differential-base information is lost.</span></span> <span data-ttu-id="2a45b-152">Dies passiert, da die **master** -Datenbank nicht mit der Benutzerdatenbank synchronisiert wird.</span><span class="sxs-lookup"><span data-stu-id="2a45b-152">This occurs because the **master** database is not synchronized with the user database.</span></span> <span data-ttu-id="2a45b-153">Mit [!INCLUDE[ssDEnoversion](../../includes/ssdenoversion-md.md)] kann dieses Problem nicht erkannt oder verhindert werden.</span><span class="sxs-lookup"><span data-stu-id="2a45b-153">The [!INCLUDE[ssDEnoversion](../../includes/ssdenoversion-md.md)] cannot detect or prevent this problem.</span></span> <span data-ttu-id="2a45b-154">Spätere differenzielle Sicherungen basieren nicht auf der letzten vollständigen Sicherung und können zu unerwarteten Ergebnissen führen.</span><span class="sxs-lookup"><span data-stu-id="2a45b-154">Any later differential backups are not based on the most recent full backup and could provide unexpected results.</span></span> <span data-ttu-id="2a45b-155">Zum Einrichten einer neuen differenziellen Basis wird empfohlen, eine vollständige Datenbanksicherung zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="2a45b-155">To establish a new differential base, we recommend that you create a full database backup.</span></span>  
  
### <a name="best-practices-for-using-differential-backups-with-a-read-only-database"></a><span data-ttu-id="2a45b-156">Bewährte Methoden für die Verwendung differenzieller Sicherungen mit einer schreibgeschützten Datenbank</span><span class="sxs-lookup"><span data-stu-id="2a45b-156">Best Practices for Using Differential Backups with a Read-Only Database</span></span>  
 <span data-ttu-id="2a45b-157">Wenn Sie eine vollständige Sicherung einer schreibgeschützten Datenbank erstellt haben und nachfolgend eine differenzielle Sicherung erstellen möchten, sichern Sie die **master** -Datenbank.</span><span class="sxs-lookup"><span data-stu-id="2a45b-157">After you create a full database backup of a read-only database, if you intend to create a subsequent differential backup, back up the **master** database.</span></span>  
  
 <span data-ttu-id="2a45b-158">Wenn die **master** -Datenbank verloren geht, stellen Sie sie wieder her, bevor Sie differenzielle Sicherungen einer Benutzerdatenbank wiederherstellen.</span><span class="sxs-lookup"><span data-stu-id="2a45b-158">If the **master** database is lost, restore it before you restore any differential backup of a user database.</span></span>  
  
 <span data-ttu-id="2a45b-159">Wenn Sie eine schreibgeschützte Datenbank, für die Sie später differenzielle Sicherungen verwenden möchten, trennen und anfügen, sollten Sie möglichst bald eine vollständige Datenbanksicherung der schreibgeschützten Datenbank und der **master** -Datenbank erstellen.</span><span class="sxs-lookup"><span data-stu-id="2a45b-159">If you detach and attach a read-only database for which you plan to later use differential backups, as soon as it is practical, take a full database backup of both the read-only database and of the **master** database.</span></span>  
  
##  <a name="related-tasks"></a><a name="RelatedTasks"></a> <span data-ttu-id="2a45b-160">Verwandte Aufgaben</span><span class="sxs-lookup"><span data-stu-id="2a45b-160">Related Tasks</span></span>  
  
-   [<span data-ttu-id="2a45b-161">Erstellen einer differenziellen Datenbanksicherung &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="2a45b-161">Create a Differential Database Backup &#40;SQL Server&#41;</span></span>](create-a-differential-database-backup-sql-server.md)  
  
-   [<span data-ttu-id="2a45b-162">Wiederherstellen einer differenziellen Datenbanksicherung &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="2a45b-162">Restore a Differential Database Backup &#40;SQL Server&#41;</span></span>](restore-a-differential-database-backup-sql-server.md)  
  
  
## <a name="see-also"></a><span data-ttu-id="2a45b-163">Weitere Informationen</span><span class="sxs-lookup"><span data-stu-id="2a45b-163">See Also</span></span>  
 <span data-ttu-id="2a45b-164">[Übersicht über Sicherungen &#40;SQL Server&#41;](backup-overview-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="2a45b-164">[Backup Overview &#40;SQL Server&#41;](backup-overview-sql-server.md) </span></span>  
 <span data-ttu-id="2a45b-165">[Vollständige Datenbanksicherungen &#40;SQL Server&#41;](full-database-backups-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="2a45b-165">[Full Database Backups &#40;SQL Server&#41;](full-database-backups-sql-server.md) </span></span>  
 <span data-ttu-id="2a45b-166">[Vollständige Datenbankwiederherstellungen &#40;vollständiges Wiederherstellungsmodell&#41;](complete-database-restores-full-recovery-model.md) </span><span class="sxs-lookup"><span data-stu-id="2a45b-166">[Complete Database Restores &#40;Full Recovery Model&#41;](complete-database-restores-full-recovery-model.md) </span></span>  
 <span data-ttu-id="2a45b-167">[Vollständige Datenbankwiederherstellungen &#40;einfaches Wiederherstellungsmodell&#41;](complete-database-restores-simple-recovery-model.md) </span><span class="sxs-lookup"><span data-stu-id="2a45b-167">[Complete Database Restores &#40;Simple Recovery Model&#41;](complete-database-restores-simple-recovery-model.md) </span></span>  
 [<span data-ttu-id="2a45b-168">Transaktionsprotokollsicherungen &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="2a45b-168">Transaction Log Backups &#40;SQL Server&#41;</span></span>](transaction-log-backups-sql-server.md)  
  
  
