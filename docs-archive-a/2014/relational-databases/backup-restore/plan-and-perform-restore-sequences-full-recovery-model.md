---
title: Planen und Ausführen von Wiederherstellungssequenzen (vollständiges Wiederherstellungsmodell) | Microsoft-Dokumentation
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: backup-restore
ms.topic: conceptual
helpviewer_keywords:
- restore sequences [SQL Server], planning for
- full recovery model [SQL Server], planning restore sequences
ms.assetid: 9cbefaf8-d2b6-41c9-83fc-b3807a841fe2
author: MikeRayMSFT
ms.author: mikeray
ms.openlocfilehash: 85558c0a6361837b5645b9fc38ad040254265d72
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 08/04/2020
ms.locfileid: "87620477"
---
# <a name="plan-and-perform-restore-sequences-full-recovery-model"></a><span data-ttu-id="67558-102">Planen und Ausführen von Wiederherstellungssequenzen (vollständiges Wiederherstellungsmodell)</span><span class="sxs-lookup"><span data-stu-id="67558-102">Plan and Perform Restore Sequences (Full Recovery Model)</span></span>
  <span data-ttu-id="67558-103">In diesem Thema wird erläutert, wie eine Wiederherstellungssequenz für eine [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] -Datenbank geplant und ausgeführt wird, für die normalerweise das vollständige Wiederherstellungsmodell verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="67558-103">This topic explains how to plan and perform a restore sequence for a [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] databases that ordinarily uses the full recovery model.</span></span> <span data-ttu-id="67558-104">Eine *Wiederherstellungssequenz* ist eine Sequenz einer oder mehrerer [RESTORE](/sql/t-sql/statements/restore-statements-transact-sql) -Anweisungen.</span><span class="sxs-lookup"><span data-stu-id="67558-104">A *restore sequence* is a sequence of one or more [RESTORE](/sql/t-sql/statements/restore-statements-transact-sql) statements.</span></span> <span data-ttu-id="67558-105">Normalerweise werden von einer Sequenz der Inhalt der Datenbank, Dateien und/oder Seiten, der bzw. die wiederhergestellt werden sollen, initialisiert (Datenkopierphase), und es wird ein Rollforward für protokollierte Transaktionen (Rollforwardphase) und ein Rollback für Transaktionen ohne Commit (Rollbackphase) ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="67558-105">Typically, a restore sequences initializes the contents of the database, files, and/or pages being restored (the data-copy phase), rolls forward logged transactions (the redo phase), and rolls back uncommitted transactions (the undo phase).</span></span>  
  
 <span data-ttu-id="67558-106">In einfachen Fällen sind für eine Wiederherstellungssequenz lediglich eine vollständige Datenbanksicherung, eine differenzielle Datenbanksicherung und mindestens eine Protokollsicherung erforderlich.</span><span class="sxs-lookup"><span data-stu-id="67558-106">In simple cases, a restore sequence requires only a full database backup, a differential database backup, and the subsequent log backups.</span></span> <span data-ttu-id="67558-107">In diesen Fällen ist das Erstellen einer ordnungsgemäßen Wiederherstellungssequenz einfach.</span><span class="sxs-lookup"><span data-stu-id="67558-107">In these cases, constructing a correct restore sequence is easy.</span></span> <span data-ttu-id="67558-108">Wenn Sie beispielsweise eine Datenbank auf den Punkt wiederherstellen möchten, bevor der Fehler aufgetreten ist, beginnen Sie damit, das Transaktionsprotokoll (das *Fragment* des Protokolls) zu sichern.</span><span class="sxs-lookup"><span data-stu-id="67558-108">For example, to restore a whole database to the point of a failure, start by backing up the active transaction log (the *tail* of the log).</span></span> <span data-ttu-id="67558-109">Stellen Sie anschließend die letzte vollständige Datenbanksicherung, die zuletzt erstellte differenzielle Sicherung (sofern vorhanden) sowie alle nachfolgenden Protokollsicherungen in der Reihenfolge, in der diese erstellt wurden, wieder her.</span><span class="sxs-lookup"><span data-stu-id="67558-109">Then, restore the most recent full database backup, the most recent differential backup (if any), and all subsequent log backups in the order in which they were taken.</span></span>  
  
 <span data-ttu-id="67558-110">In weniger einfachen Fällen kann das Erstellen einer ordnungsgemäßen Wiederherstellungssequenz ein komplexer Prozess sein.</span><span class="sxs-lookup"><span data-stu-id="67558-110">In more complex cases, constructing a correct restore sequence can be a complex process.</span></span> <span data-ttu-id="67558-111">Beispielsweise können für eine Wiederherstellungssequenz mehrere Dateisicherungen oder eine Wiederherstellung von Daten bis zu einem bestimmten Zeitpunkt erforderlich sein.</span><span class="sxs-lookup"><span data-stu-id="67558-111">For example, a restore sequence might require multiple file backups or restoring data to a specific point in time.</span></span> <span data-ttu-id="67558-112">In sehr komplexen Fällen muss möglicherweise ein verzweigter Wiederherstellungspfad durchlaufen werden, der mindestens eine Wiederherstellungsverzweigung umfasst.</span><span class="sxs-lookup"><span data-stu-id="67558-112">In very complex cases, you might even have to traverse a forked recovery path that spans one or more recovery forks.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="67558-113">Ein *Wiederherstellungspfad* ist die Sequenz von Daten- und Protokollsicherungen, mit denen eine Datenbank auf einen bestimmten Zeitpunkt (dem sogenannten Wiederherstellungspunkt) wiederhergestellt wird.</span><span class="sxs-lookup"><span data-stu-id="67558-113">A *recovery path* is the sequence of data and log backups that have brought a database to a particular point in time (known as a recovery point).</span></span> <span data-ttu-id="67558-114">Ein Wiederherstellungspfad besteht aus einer eindeutigen Menge bestimmter Transformationen, auf deren Grundlage die Datenbank über einen bestimmten Zeitraum entwickelt und gleichzeitig die Konsistenz der Datenbank sichergestellt wurde.</span><span class="sxs-lookup"><span data-stu-id="67558-114">A recovery path is a specific set of transformations that have evolved the database over time, yet have maintained the consistency of the database.</span></span> <span data-ttu-id="67558-115">Ein Wiederherstellungspfad stellt einen Bereich von LSNs dar, der von einem Startpunkt (LSN, GUID) zu einem Endpunkt (LSN, GUID) führt.</span><span class="sxs-lookup"><span data-stu-id="67558-115">A recovery path describes a range of LSNs from a start point (LSN,GUID) to an end point (LSN,GUID).</span></span> <span data-ttu-id="67558-116">Der Bereich von LSNs in einem Wiederherstellungspfad kann mindestens eine Wiederherstellungsverzweigung von Anfang bis zum Ende durchsuchen.</span><span class="sxs-lookup"><span data-stu-id="67558-116">The range of LSNs in a recovery path can traverse one or more recovery branches from start to end.</span></span>  
  
## <a name="to-plan-a-restore-sequence"></a><span data-ttu-id="67558-117">So planen Sie eine Wiederherstellungssequenz</span><span class="sxs-lookup"><span data-stu-id="67558-117">To Plan a Restore Sequence</span></span>  
 <span data-ttu-id="67558-118">Führen Sie die folgenden Schritte aus, bevor Sie eine Wiederherstellungssequenz starten:</span><span class="sxs-lookup"><span data-stu-id="67558-118">Before you start a restore sequence, follow these steps:</span></span>  
  
1.  <span data-ttu-id="67558-119">Erstellen Sie, wenn möglich, eine Sicherung des Protokollfragments der Datenbank.</span><span class="sxs-lookup"><span data-stu-id="67558-119">Create a tail-log backup of the database, if you can.</span></span> <span data-ttu-id="67558-120">Weitere Informationen finden Sie unter [Protokollfragmentsicherungen &#40;SQL Server&#41;](tail-log-backups-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="67558-120">For more information, see [Tail-Log Backups &#40;SQL Server&#41;](tail-log-backups-sql-server.md).</span></span>  
  
2.  <span data-ttu-id="67558-121">Bestimmen Sie den Zielwiederherstellungspunkt.</span><span class="sxs-lookup"><span data-stu-id="67558-121">Determine the target recovery point.</span></span>  
  
     <span data-ttu-id="67558-122">Der Zielwiederherstellungspunkt kann ein beliebiger Zeitpunkt bzw. eine beliebige Markierung innerhalb einer Transaktionsprotokollsicherung sein.</span><span class="sxs-lookup"><span data-stu-id="67558-122">The target recovery point can be any point in time or mark within a transaction log backup.</span></span> <span data-ttu-id="67558-123">Weitere Informationen finden Sie unter [Wiederherstellen einer SQL Server-Datenbank auf einen Zeitpunkt &#40;vollständiges Wiederherstellungsmodell&#41;](restore-a-sql-server-database-to-a-point-in-time-full-recovery-model.md) und [Wiederherstellen von verwandten Datenbanken mithilfe von markierten Transaktionen &#40;vollständiges Wiederherstellungsmodell&#41;](use-marked-transactions-to-recover-related-databases-consistently.md).</span><span class="sxs-lookup"><span data-stu-id="67558-123">For more information, see [Restore a SQL Server Database to a Point in Time &#40;Full Recovery Model&#41;](restore-a-sql-server-database-to-a-point-in-time-full-recovery-model.md) or [Use Marked Transactions to Recover Related Databases Consistently &#40;Full Recovery Model&#41;](use-marked-transactions-to-recover-related-databases-consistently.md).</span></span>  
  
3.  <span data-ttu-id="67558-124">Bestimmen Sie die Art der Wiederherstellung, die Sie ausführen möchten.</span><span class="sxs-lookup"><span data-stu-id="67558-124">Determine the type of restore you want to perform.</span></span> <span data-ttu-id="67558-125">Weitere Informationen finden Sie unter [Übersicht über Wiederherstellungsvorgänge &#40;SQL Server&#41;](restore-and-recovery-overview-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="67558-125">For more information, see [Restore and Recovery Overview &#40;SQL Server&#41;](restore-and-recovery-overview-sql-server.md).</span></span>  
  
4.  <span data-ttu-id="67558-126">Bestimmen Sie, welche Sicherungen erforderlich sind, und stellen Sie sicher, dass die erforderlichen Mediensätze und Sicherungsmedien verfügbar sind.</span><span class="sxs-lookup"><span data-stu-id="67558-126">Identify which backups you require and make sure that the necessary media sets and backup devices are available.</span></span> <span data-ttu-id="67558-127">Weitere Informationen finden Sie unter [Sicherungsmedien &#40;SQL Server&#41;](backup-devices-sql-server.md) und [Mediensätze, Medienfamilien und Sicherungssätze &#40;SQL Server&#41;](media-sets-media-families-and-backup-sets-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="67558-127">For more information, see [Backup Devices &#40;SQL Server&#41;](backup-devices-sql-server.md) and [Media Sets, Media Families, and Backup Sets &#40;SQL Server&#41;](media-sets-media-families-and-backup-sets-sql-server.md).</span></span>  
  
## <a name="to-perform-a-restore-sequence"></a><span data-ttu-id="67558-128">So führen Sie eine Wiederherstellungssequenz aus</span><span class="sxs-lookup"><span data-stu-id="67558-128">To Perform a Restore Sequence</span></span>  
 <span data-ttu-id="67558-129">Führen Sie die folgenden Schritte aus, um eine Wiederherstellungssequenz auszuführen:</span><span class="sxs-lookup"><span data-stu-id="67558-129">To perform a restore sequence, follow these steps:</span></span>  
  
1.  <span data-ttu-id="67558-130">Stellen Sie mindestens eine Datensicherung (z. B. eine Datenbanksicherung, eine Teilsicherung, eine oder mehrere Dateisicherungen) wieder her, um die Sequenz zu starten.</span><span class="sxs-lookup"><span data-stu-id="67558-130">To start the sequence, restore a one or more data backups, such as: a database backup, a partial backup, one or more file backups.</span></span>  
  
2.  <span data-ttu-id="67558-131">Stellen Sie optional die letzten differenziellen Sicherungen wieder her, die auf diesen vollständigen Sicherungen basieren.</span><span class="sxs-lookup"><span data-stu-id="67558-131">Optionally, restore the latest differential backups that are based on these full backups.</span></span>  
  
     <span data-ttu-id="67558-132">Bestimmen Sie für jede vollständige Sicherung, die Sie wiederherstellen möchten, ob diese Sicherung als Basis für differenzielle Sicherungen fungiert.</span><span class="sxs-lookup"><span data-stu-id="67558-132">For each full backup that you plan to restore, determine whether it is the base for any differential backups.</span></span> <span data-ttu-id="67558-133">Stellen Sie, wenn möglich, in diesem Fall die letzte differenzielle Sicherung wieder her.</span><span class="sxs-lookup"><span data-stu-id="67558-133">If so, restore most recent differential backup, if you can.</span></span> <span data-ttu-id="67558-134">Weitere Informationen finden Sie unter [Differenzielle Sicherungen &#40;SQL Server&#41;](differential-backups-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="67558-134">For more information, see [Differential Backups &#40;SQL Server&#41;](differential-backups-sql-server.md).</span></span>  
  
3.  <span data-ttu-id="67558-135">Führen Sie für die Datenbank einen Rollforward aus, indem Sie die Protokollsicherungen nacheinander bis zu der Sicherung mit dem Wiederherstellungspunkt wiederherstellen.</span><span class="sxs-lookup"><span data-stu-id="67558-135">Roll forward the database by restoring log backups in sequence, finishing with the backup that contains the recovery point.</span></span> <span data-ttu-id="67558-136">Ob alle Protokollsicherungen angewendet werden müssen, richtet sich danach, in welcher Protokollsicherung der Wiederherstellungspunkt enthalten ist:</span><span class="sxs-lookup"><span data-stu-id="67558-136">Whether you have to apply all the log backups depends on what log backup contains the target recovery point, as follows:</span></span>  
  
    -   <span data-ttu-id="67558-137">Wenn der Wiederherstellungspunkt der Zeitpunkt des Fehlers ist, müssen Sie alle Protokollsicherungen wiederherstellen, die seit der Wiederherstellung der letzten (vollständigen oder differenziellen) Datensicherung erstellt wurden.</span><span class="sxs-lookup"><span data-stu-id="67558-137">If the recovery point is the point of a failure, you must restore every log backup that was created since the last data (full or differential) backup you restored.</span></span> <span data-ttu-id="67558-138">Weitere Informationen finden Sie unter [Anwenden von Transaktionsprotokollsicherungen &#40;SQL Server&#41;](transaction-log-backups-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="67558-138">For more information, see [Apply Transaction Log Backups &#40;SQL Server&#41;](transaction-log-backups-sql-server.md).</span></span>  
  
    -   <span data-ttu-id="67558-139">Für eine Wiederherstellung bis zu einem bestimmten Zeitpunkt sind möglicherweise nicht die aktuellsten Protokollsicherungen erforderlich.</span><span class="sxs-lookup"><span data-stu-id="67558-139">For a point-in-time restore, you might not require the most recent log backups.</span></span> <span data-ttu-id="67558-140">Wenn Sie [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)]verwenden, stellt der Datenbankwiederherstellungsberater sicher, dass nur Sicherungen ausgewählt werden, die auf den angegebenen Zeitpunkt wiederhergestellt werden müssen.</span><span class="sxs-lookup"><span data-stu-id="67558-140">If you use [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)], the Database Recovery Advisor ensures that only backups that are required to restore to your specified point in time are selected.</span></span> <span data-ttu-id="67558-141">Die Sicherungen machen den empfohlenen Wiederherstellungsplan für Ihre Zeitpunktwiederherstellung aus.</span><span class="sxs-lookup"><span data-stu-id="67558-141">These backups make up the recommended restore plan for your point-in-time restore.</span></span> <span data-ttu-id="67558-142">Informationen finden Sie unter [Wiederherstellen einer SQL Server-Datenbank auf einen Zeitpunkt &#40;vollständiges Wiederherstellungsmodell&#41;](restore-a-sql-server-database-to-a-point-in-time-full-recovery-model.md).</span><span class="sxs-lookup"><span data-stu-id="67558-142">For more information, see [Restore a SQL Server Database to a Point in Time &#40;Full Recovery Model&#41;](restore-a-sql-server-database-to-a-point-in-time-full-recovery-model.md).</span></span>  
  
## <a name="restarting-a-restore-sequence"></a><span data-ttu-id="67558-143">Neustarten einer Wiederherstellungssequenz</span><span class="sxs-lookup"><span data-stu-id="67558-143">Restarting a Restore Sequence</span></span>  
 <span data-ttu-id="67558-144">Wenn im Rahmen einer Wiederherstellungssequenz ein Problem auftritt, können Sie die Wiederherstellungssequenz beenden und von Anfang an neu starten.</span><span class="sxs-lookup"><span data-stu-id="67558-144">If you encounter a problem with the outcome of a restore sequence, you can quit it and restart the restore sequence over from the start.</span></span> <span data-ttu-id="67558-145">Wenn Sie beispielsweise versehentlich zu viele Protokollsicherungen wiederhergestellt und den gewünschten Wiederherstellungspunkt überschritten haben, müssen Sie die Wiederherstellungssequenz neu starten und bis zu der Protokollsicherung wiederherstellen, die den Zielwiederherstellungspunkt enthält.</span><span class="sxs-lookup"><span data-stu-id="67558-145">For example, if you accidentally restore too many log backups and overshoot the intended recovery point, you must restart the restore sequence up to log backup that contains the target recovery point.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="67558-146">Weitere Informationen</span><span class="sxs-lookup"><span data-stu-id="67558-146">See Also</span></span>  
 <span data-ttu-id="67558-147">[Übersicht über Sicherungen &#40;SQL Server&#41;](backup-overview-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="67558-147">[Backup Overview &#40;SQL Server&#41;](backup-overview-sql-server.md) </span></span>  
 <span data-ttu-id="67558-148">[Übersicht über Wiederherstellungsvorgänge &#40;SQL Server&#41;](restore-and-recovery-overview-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="67558-148">[Restore and Recovery Overview &#40;SQL Server&#41;](restore-and-recovery-overview-sql-server.md) </span></span>  
 <span data-ttu-id="67558-149">[Vollständige Datenbankwiederherstellungen &#40;vollständiges Wiederherstellungsmodell&#41;](complete-database-restores-full-recovery-model.md) </span><span class="sxs-lookup"><span data-stu-id="67558-149">[Complete Database Restores &#40;Full Recovery Model&#41;](complete-database-restores-full-recovery-model.md) </span></span>  
 <span data-ttu-id="67558-150">[Onlinewiederherstellungen &#40;SQL Server&#41;](online-restore-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="67558-150">[Online Restore &#40;SQL Server&#41;](online-restore-sql-server.md) </span></span>  
 <span data-ttu-id="67558-151">[Dateiwiederherstellungen &#40;vollständiges Wiederherstellungsmodell&#41;](file-restores-full-recovery-model.md) </span><span class="sxs-lookup"><span data-stu-id="67558-151">[File Restores &#40;Full Recovery Model&#41;](file-restores-full-recovery-model.md) </span></span>  
 <span data-ttu-id="67558-152">[Wiederherstellung von Seiten &#40;SQL Server&#41;](restore-pages-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="67558-152">[Restore Pages &#40;SQL Server&#41;](restore-pages-sql-server.md) </span></span>  
 [<span data-ttu-id="67558-153">Schrittweise Wiederherstellungen &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="67558-153">Piecemeal Restores &#40;SQL Server&#41;</span></span>](piecemeal-restores-sql-server.md)  
  
  
