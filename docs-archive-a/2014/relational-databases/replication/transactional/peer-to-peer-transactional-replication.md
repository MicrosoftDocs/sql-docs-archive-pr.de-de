---
title: Peer-zu-Peer-Transaktionsreplikation | Microsoft-Dokumentation
ms.custom: ''
ms.date: 08/29/2016
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: replication
ms.topic: conceptual
helpviewer_keywords:
- bidirectional replication
- transactional replication, bidirectional replication
- bidirectional transactional replication
- transactional replication, peer-to-peer replication
- peer-to-peer transactional replication
ms.assetid: 23e7e8c1-002f-4e69-8c99-d63e4100de64
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: f61db9a8e7cecb107fd1b27fae966d133e043c8b
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 08/04/2020
ms.locfileid: "87618630"
---
# <a name="peer-to-peer-transactional-replication"></a><span data-ttu-id="18e84-102">Peer-zu-Peer-Transaktionsreplikation</span><span class="sxs-lookup"><span data-stu-id="18e84-102">Peer-to-Peer Transactional Replication</span></span>
  <span data-ttu-id="18e84-103">Peer-zu-Peer-Replikation bietet eine skalierbare Lösung mit hoher Verfügbarkeit, da Kopien der Daten auf mehreren Serverinstanzen verwaltet werden, die auch als *Knoten*bezeichnet werden.</span><span class="sxs-lookup"><span data-stu-id="18e84-103">Peer-to-peer replication provides a scale-out and high-availability solution by maintaining copies of data across multiple server instances, also referred to as *nodes*.</span></span> <span data-ttu-id="18e84-104">Auf der Grundlage der Transaktionsreplikation aufbauend, gibt die Peer-zu-Peer-Replikation transaktionskonsistente Änderungen fast in Echtzeit weiter.</span><span class="sxs-lookup"><span data-stu-id="18e84-104">Built on the foundation of transactional replication, peer-to-peer replication propagates transactionally consistent changes in near real-time.</span></span> <span data-ttu-id="18e84-105">Dies macht Anwendungen möglich, die skalierbare Lesevorgänge voraussetzen, weil die Leseanforderungen von Clients über mehrere Knoten verteilt werden können.</span><span class="sxs-lookup"><span data-stu-id="18e84-105">This enables applications that require scale-out of read operations to distribute the reads from clients across multiple nodes.</span></span> <span data-ttu-id="18e84-106">Da die Knoten die Daten fast in Echtzeit übernehmen, bietet die Peer-zu-Peer-Replikation Datenredundanz, die die Verfügbarkeit der Daten erhöht.</span><span class="sxs-lookup"><span data-stu-id="18e84-106">Because data is maintained across the nodes in near real-time, peer-to-peer replication provides data redundancy, which increases the availability of data.</span></span>  
  
 <span data-ttu-id="18e84-107">Betrachten Sie eine Webanwendung.</span><span class="sxs-lookup"><span data-stu-id="18e84-107">Consider a Web application.</span></span> <span data-ttu-id="18e84-108">Sie kann von Peer-zu-Peer-Replikation auf folgende Weise profitieren:</span><span class="sxs-lookup"><span data-stu-id="18e84-108">This can benefit from peer-to-peer replication in the following ways:</span></span>  
  
-   <span data-ttu-id="18e84-109">Katalogabfragen und andere Lesevorgänge werden über mehrere Knoten verteilt.</span><span class="sxs-lookup"><span data-stu-id="18e84-109">Catalog queries and other reads are spread across multiple nodes.</span></span> <span data-ttu-id="18e84-110">Dadurch bleibt die Leistung auch dann konsistent, wenn sich die Anzahl der Lesevorgänge erhöht.</span><span class="sxs-lookup"><span data-stu-id="18e84-110">This enables performance to remain consistent as reads increase.</span></span>  
  
-   <span data-ttu-id="18e84-111">Wenn einer der Knoten des Systems ausfällt, können auf der Anwendungsebene die Schreibvorgänge für diesen Konten an einen anderen Knoten umgeleitet werden.</span><span class="sxs-lookup"><span data-stu-id="18e84-111">If one of the nodes in the system fails, an application layer can redirect the writes for that node to another node.</span></span> <span data-ttu-id="18e84-112">Dadurch wird die Verfügbarkeit gewährleistet.</span><span class="sxs-lookup"><span data-stu-id="18e84-112">This maintains availability.</span></span>  
  
-   <span data-ttu-id="18e84-113">Muss ein Knoten gewartet oder das gesamte System aktualisiert werden, kann jeder Knoten einzeln offline geschaltet und wieder in das System eingefügt werden, ohne dass die Verfügbarkeit der Anwendung darunter leidet.</span><span class="sxs-lookup"><span data-stu-id="18e84-113">If a node requires maintenance or the whole system requires an upgrade, each node can be taken offline and added back to the system without affecting the availability of the application.</span></span>  
  
 <span data-ttu-id="18e84-114">Zwar ermöglicht die Peer-zu-Peer-Replikation die Skalierung von Lesevorgängen, doch bleibt die Schreibgeschwindigkeit in der Topologie ähnlich der für einen einzelnen Knoten.</span><span class="sxs-lookup"><span data-stu-id="18e84-114">Although peer-to-peer replication enables scaling out of read operations, write performance for the topology is like that for a single node.</span></span> <span data-ttu-id="18e84-115">Dies kommt daher, weil letztlich alle Einfügungen, Updates und Löschungen an alle Knoten weitergegeben werden.</span><span class="sxs-lookup"><span data-stu-id="18e84-115">This is because ultimately all inserts, updates, and deletes are propagated to all nodes.</span></span> <span data-ttu-id="18e84-116">Die Replikation erkennt, wenn eine Änderung auf einen bestimmten Knoten angewendet wurde, und verhindert, dass Änderungen die Knoten mehrmals durchlaufen.</span><span class="sxs-lookup"><span data-stu-id="18e84-116">Replication recognizes when a change has been applied to a given node and prevents changes from cycling through the nodes more than one time.</span></span> <span data-ttu-id="18e84-117">Wir raten aus den folgenden Gründen dringend, Schreibvorgänge für eine Zeile nur an einem Knoten auszuführen:</span><span class="sxs-lookup"><span data-stu-id="18e84-117">We strongly recommend that write operations for each row be performed at only node, for the following reasons:</span></span>  
  
-   <span data-ttu-id="18e84-118">Wird eine Zeile an mehr als einem Knoten geändert, kann es zu einem Konflikt kommen, oder das Update kann sogar verloren gehen, wenn die Zeile an andere Knoten übermittelt wird.</span><span class="sxs-lookup"><span data-stu-id="18e84-118">If a row is modified at more than one node, it can cause a conflict or even a lost update when the row is propagated to other nodes.</span></span>  
  
-   <span data-ttu-id="18e84-119">Bei der Replizierung von Änderungen verstreicht immer eine gewisse Latenzzeit.</span><span class="sxs-lookup"><span data-stu-id="18e84-119">There is always some latency involved when changes are replicated.</span></span> <span data-ttu-id="18e84-120">Bei Anwendungen, die sofort die neuesten Änderungen erkennen müssen, kann der dynamische Lastenausgleich über mehrere Knoten problematisch werden.</span><span class="sxs-lookup"><span data-stu-id="18e84-120">For applications that require the latest change to be seen immediately, dynamically load balancing the application across multiple nodes can be problematic.</span></span>  
  
 <span data-ttu-id="18e84-121">Die Peer-zu-Peer-Replikation schließt die Option ein, die Konflikterkennung für eine gesamte Peer-zu-Peer-Topologie zu aktivieren.</span><span class="sxs-lookup"><span data-stu-id="18e84-121">Peer-to-peer replication includes the option to enable conflict detection across a peer-to-peer topology.</span></span> <span data-ttu-id="18e84-122">Diese Option hilft, den Problemen vorzubeugen, die sich aus nicht erkannten Konflikten, einschließlich inkonsistentem Verhalten von Anwendungen und verlorenen Updates ergeben.</span><span class="sxs-lookup"><span data-stu-id="18e84-122">This option helps prevent the issues that are caused from undetected conflicts, including inconsistent application behavior and lost updates.</span></span> <span data-ttu-id="18e84-123">Standardmäßig wird, wenn diese Option aktiviert ist, eine konfliktverursachende Änderung als ein schwerwiegender Fehler betrachtet, der zu einem Fehler des Verteilungs-Agents führt.</span><span class="sxs-lookup"><span data-stu-id="18e84-123">By enabling this option, by default a conflicting change is treated as a critical error that causes the failure of the Distribution Agent.</span></span> <span data-ttu-id="18e84-124">Bei einem Konflikt verbleibt die Topologie so lange in einem inkonsistenten Zustand, bis der Konflikt manuell gelöst und die Datenkonsistenz in der Topologie wiederhergestellt wurde.</span><span class="sxs-lookup"><span data-stu-id="18e84-124">In the event of a conflict, the topology remains in an inconsistent state until the conflict is resolved manually and the data is made consistent across the topology.</span></span> <span data-ttu-id="18e84-125">Weitere Informationen finden Sie unter [Conflict Detection in Peer-to-Peer Replication](peer-to-peer-conflict-detection-in-peer-to-peer-replication.md).</span><span class="sxs-lookup"><span data-stu-id="18e84-125">For more information, see [Conflict Detection in Peer-to-Peer Replication](peer-to-peer-conflict-detection-in-peer-to-peer-replication.md).</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="18e84-126">Stellen Sie, um inkonsistente Daten zu vermeiden, in einer Peer-zu-Peer-Topologie sicher, dass keine Konflikte auftreten, auch wenn die Konflikterkennung aktiviert ist.</span><span class="sxs-lookup"><span data-stu-id="18e84-126">To avoid potential data inconsistency, make sure that you avoid conflicts in a peer-to-peer topology, even with conflict detection enabled.</span></span> <span data-ttu-id="18e84-127">Damit sichergestellt ist, dass Schreibvorgänge für eine bestimmte Zeile nur an einem Knoten durchgeführt werden, müssen Anwendungen, die auf Daten zugreifen und diese ändern, Einfügungen, Updates und Löschungen partitionieren.</span><span class="sxs-lookup"><span data-stu-id="18e84-127">To ensure that write operations for a particular row are performed at only one node, applications that access and change data must partition insert, update, and delete operations.</span></span> <span data-ttu-id="18e84-128">Diese Partitionierung gewährleistet, dass Änderungen an einer bestimmten Zeile, die von einem Knoten stammen, mit allen anderen Knoten in der Topologie synchronisiert werden, bevor die Zeile von einem anderen Knoten geändert wird.</span><span class="sxs-lookup"><span data-stu-id="18e84-128">This partitioning ensures that modifications to a given row originating at one node are synchronized with all other nodes in the topology before the row is modified by a different node.</span></span> <span data-ttu-id="18e84-129">Wenn eine Anwendung ausgereifte Fähigkeiten zur Konflikterkennung und -lösung erfordert, verwenden Sie die Mergereplikation.</span><span class="sxs-lookup"><span data-stu-id="18e84-129">If an application requires sophisticated conflict detection and resolution capabilities, use merge replication.</span></span> <span data-ttu-id="18e84-130">Weitere Informationen finden Sie unter [Mergereplikation](../merge/merge-replication.md) und [Erkennen und Beseitigen von Konflikten bei der Mergereplikation](../merge/advanced-merge-replication-conflict-detection-and-resolution.md).</span><span class="sxs-lookup"><span data-stu-id="18e84-130">For more information, see [Merge Replication](../merge/merge-replication.md) and [Detect and Resolve Merge Replication Conflicts](../merge/advanced-merge-replication-conflict-detection-and-resolution.md).</span></span>  
  
## <a name="peer-to-peer-topologies"></a><span data-ttu-id="18e84-131">Peer-zu-Peer-Topologien</span><span class="sxs-lookup"><span data-stu-id="18e84-131">Peer-to-Peer Topologies</span></span>  
 <span data-ttu-id="18e84-132">In folgenden Szenarien werden die typischen Verwendungsarten der Peer-zu-Peer-Replikation erläutert.</span><span class="sxs-lookup"><span data-stu-id="18e84-132">The following scenarios illustrate typical uses for peer-to-peer replication.</span></span>  
  
### <a name="topology-that-has-two-participating-databases"></a><span data-ttu-id="18e84-133">Topologie mit zwei teilnehmenden Datenbanken</span><span class="sxs-lookup"><span data-stu-id="18e84-133">Topology That Has Two Participating Databases</span></span>  
 <span data-ttu-id="18e84-134">![Peer-zu-Peer-Replikation, zwei Knoten](../media/repl-multinode-01.gif "Peer-zu-Peer-Replikation, zwei Knoten")</span><span class="sxs-lookup"><span data-stu-id="18e84-134">![Peer-to-peer replication, two nodes](../media/repl-multinode-01.gif "Peer-to-peer replication, two nodes")</span></span>  
  
 <span data-ttu-id="18e84-135">Die beiden oben stehenden Abbildungen zeigen jeweils zwei teilnehmende Datenbanken, bei denen der Benutzerverkehr über einen Anwendungsserver an die Datenbanken geleitet wird.</span><span class="sxs-lookup"><span data-stu-id="18e84-135">Both of the preceding illustrations show two participating databases, with user traffic directed to the databases through an application server.</span></span> <span data-ttu-id="18e84-136">Diese Konfiguration kann für eine Vielzahl von Anwendungen, von Websites bis zu Arbeitsgruppenanwendungen, verwendet werden, und bietet folgende Vorteile:</span><span class="sxs-lookup"><span data-stu-id="18e84-136">This configuration can be used for a variety of applications, from Web sites to workgroup applications, and provides the following benefits:</span></span>  
  
-   <span data-ttu-id="18e84-137">Verbesserte Leseleistung, da Lesevorgänge über zwei Server verteilt werden.</span><span class="sxs-lookup"><span data-stu-id="18e84-137">Improved read performance, because reads are spread out over two servers.</span></span>  
  
-   <span data-ttu-id="18e84-138">Höhere Verfügbarkeit bei Wartungserfordernissen oder bei Ausfällen an einem Knoten.</span><span class="sxs-lookup"><span data-stu-id="18e84-138">Higher availability if maintenance is required or in case of failure at one node.</span></span>  
  
 <span data-ttu-id="18e84-139">In beiden Abbildungen wird für die Leseaktivität ein Lastenausgleich zwischen den teilnehmenden Datenbanken ausgeführt, die Updates werden jedoch anders verarbeitet.</span><span class="sxs-lookup"><span data-stu-id="18e84-139">In both illustrations, read activity is load-balanced between the participating databases, but updates are handled differently:</span></span>  
  
-   <span data-ttu-id="18e84-140">Links werden Updates zwischen den zwei Servern partitioniert.</span><span class="sxs-lookup"><span data-stu-id="18e84-140">On the left, updates are partitioned between the two servers.</span></span> <span data-ttu-id="18e84-141">Falls die Datenbank einen Produktkatalog enthält, können Sie beispielsweise veranlassen, dass eine benutzerdefinierte Anwendung Updates für Produktnamen, die mit den Buchstaben A bis M beginnen, an Knoten **A** und Updates für Produktnamen, die mit den Buchstaben N bis Z beginnen, an Knoten **B** leitet. Updates werden dann auf dem jeweils anderen Knoten repliziert.</span><span class="sxs-lookup"><span data-stu-id="18e84-141">If the database contained a product catalog, you could, for example, have a custom application direct updates to node **A** for product names that start with A through M, and direct updates to node **B** for product names that start with N through Z. Updates are then replicated to the other node.</span></span>  
  
-   <span data-ttu-id="18e84-142">Auf der rechten Seite werden alle Updates an Knoten **B** geleitet. Von dort aus werden Updates auf Knoten **A** repliziert. Wenn **B** offline ist (z.B. aus Wartungsgründen), kann der Anwendungsserver sämtliche Aktivitäten an **B** leiten. Ist **B** wieder online, können Updates auf ihn geleitet werden, und der Anwendungsserver kann alle Updates zurück an **B** oder weiterhin an **A** leiten.</span><span class="sxs-lookup"><span data-stu-id="18e84-142">On the right, all updates are directed to node **B**. From there, updates are replicated to node **A**. If **B** is offline (for example, for maintenance), the application server can direct all activity to **A**. When **B** is back online, updates can flow to it, and the application server can move all updates back to **B** or keep directing them to **A**.</span></span>  
  
 <span data-ttu-id="18e84-143">Die Peer-zu-Peer-Replikation unterstützt beide Vorgehensweisen, aber das Beispiel für das zentrale Update auf der rechten Seite wird oft auch bei der standardmäßigen Transaktionsreplikation verwendet.</span><span class="sxs-lookup"><span data-stu-id="18e84-143">Peer-to-peer replication can support either approach, but the central update example on the right is also often used with standard transactional replication.</span></span>  
  
### <a name="topologies-that-have-three-or-more-participating-databases"></a><span data-ttu-id="18e84-144">Topologien mit drei oder mehr teilnehmenden Datenbanken</span><span class="sxs-lookup"><span data-stu-id="18e84-144">Topologies That Have Three or More Participating Databases</span></span>  
 <span data-ttu-id="18e84-145">![Peer-zu-Peer-Replikation an verteilte Standorte](../media/repl-multinode-02.gif "Peer-zu-Peer-Replikation an verteilte Standorte")</span><span class="sxs-lookup"><span data-stu-id="18e84-145">![Peer-to-peer replication to dispersed locations](../media/repl-multinode-02.gif "Peer-to-peer replication to dispersed locations")</span></span>  
  
 <span data-ttu-id="18e84-146">Die oben stehende Abbildung zeigt drei teilnehmende Datenbanken, die Daten für einen weltweiten Software-Support-Anbieter mit Niederlassungen in Los Angeles, London und Taipeh bereitstellen.</span><span class="sxs-lookup"><span data-stu-id="18e84-146">The preceding illustration shows three participating databases that provide data for a worldwide software support organization, with offices in Los Angeles, London, and Taipei.</span></span> <span data-ttu-id="18e84-147">Die Supportmitarbeiter in den jeweiligen Niederlassungen nehmen Kundenanrufe entgegen und geben Informationen zu sämtlichen Kundenanrufen ein und aktualisieren diese.</span><span class="sxs-lookup"><span data-stu-id="18e84-147">The support engineers at each office take customer calls and enter and update information about each customer call.</span></span> <span data-ttu-id="18e84-148">Der Zeitunterschied zwischen den Zeitzonen, in denen sich die drei Niederlassungen befinden, beträgt jeweils acht Stunden, sodass sich die Arbeitszeiten nicht überschneiden.</span><span class="sxs-lookup"><span data-stu-id="18e84-148">The time zones for the three offices are eight hours apart, so there is no overlap in the workday.</span></span> <span data-ttu-id="18e84-149">Wenn die Niederlassung in Taipeh schließt, beginnt der Arbeitstag in der Londoner Niederlassung.</span><span class="sxs-lookup"><span data-stu-id="18e84-149">As the Taipei office closes, the London office is opening for the day.</span></span> <span data-ttu-id="18e84-150">Wenn ein Anruf noch bearbeitet wird, wenn eine Niederlassung schließt, wird der Anruf an einen Mitarbeiter in der Niederlassung übertragen, die als nächste öffnet.</span><span class="sxs-lookup"><span data-stu-id="18e84-150">If a call is still in progress as one office is closing, the call is transferred to a representative at the next office to open.</span></span>  
  
 <span data-ttu-id="18e84-151">Jeder Standort verfügt über eine Datenbank und einen Anwendungsserver, mit deren Hilfe die Supportmitarbeiter Informationen zu den Kundenanrufen eingeben und aktualisieren können.</span><span class="sxs-lookup"><span data-stu-id="18e84-151">Each location has a database and an application server, which are used by the support engineers as they enter and update information about customer calls.</span></span> <span data-ttu-id="18e84-152">Die Topologie wird anhand der Uhrzeit partitioniert.</span><span class="sxs-lookup"><span data-stu-id="18e84-152">The topology is partitioned by time.</span></span> <span data-ttu-id="18e84-153">Updates finden nur auf dem Knoten statt, der zum gegebenen Zeitpunkt für die Geschäftstätigkeit geöffnet ist. Die Updates werden dann an die anderen teilnehmenden Datenbanken geleitet.</span><span class="sxs-lookup"><span data-stu-id="18e84-153">Therefore, updates occur only at the node that is currently open for business, and then the updates flow to the other participating databases.</span></span> <span data-ttu-id="18e84-154">Diese Topologie bietet folgende Vorteile:</span><span class="sxs-lookup"><span data-stu-id="18e84-154">This topology provides the following benefits:</span></span>  
  
-   <span data-ttu-id="18e84-155">Unabhängigkeit ohne Isolation: Jede Niederlassung kann Daten unabhängig von den anderen Niederlassungen einfügen, aktualisieren oder löschen. Jedoch können alle Niederlassungen die Daten nutzen, da sie auf allen anderen teilnehmenden Datenbanken repliziert werden.</span><span class="sxs-lookup"><span data-stu-id="18e84-155">Independence without isolation: Each office can insert, update, or delete data independently but can also share the data because it is replicated to all other participating databases.</span></span>  
  
-   <span data-ttu-id="18e84-156">Höhere Verfügbarkeit bei Ausfällen oder Wartungserfordernissen an einer oder mehreren der teilnehmenden Datenbanken.</span><span class="sxs-lookup"><span data-stu-id="18e84-156">Higher availability in case of failure or to allow maintenance at one or more of the participating databases.</span></span>  
  
     <span data-ttu-id="18e84-157">![Peer-zu-Peer-Replikation, drei und vier Knoten](../media/repl-multinode-04.gif "Peer-zu-Peer-Replikation, drei und vier Knoten")</span><span class="sxs-lookup"><span data-stu-id="18e84-157">![Peer-to-peer replication, three and four nodes](../media/repl-multinode-04.gif "Peer-to-peer replication, three and four nodes")</span></span>  
  
 <span data-ttu-id="18e84-158">Die oben stehende Abbildung zeigt, wie der drei Knoten umfassenden Topologie ein Knoten hinzugefügt wird.</span><span class="sxs-lookup"><span data-stu-id="18e84-158">The preceding illustration shows the addition of a node to the three-node topology.</span></span> <span data-ttu-id="18e84-159">Ein Knoten könnte in diesem Szenario aus folgenden Gründen hinzugefügt werden:</span><span class="sxs-lookup"><span data-stu-id="18e84-159">A node could be added in this scenario for the following reasons:</span></span>  
  
-   <span data-ttu-id="18e84-160">Da eine andere Niederlassung geöffnet ist.</span><span class="sxs-lookup"><span data-stu-id="18e84-160">Because another office is opened.</span></span>  
  
-   <span data-ttu-id="18e84-161">Um eine höhere Verfügbarkeit für Wartungszwecke oder eine höhere Fehlertoleranz beim Ausfall eines Datenträgers oder anderer schwerwiegender Fehler zu bieten.</span><span class="sxs-lookup"><span data-stu-id="18e84-161">To provide higher availability to support maintenance or increase fault tolerance if a disk failure or other major failure occurs.</span></span>  
  
 <span data-ttu-id="18e84-162">Beachten Sie, dass sowohl in der drei Knoten umfassenden als auch in der vier Knoten umfassenden Topologie sämtliche Datenbanken an alle anderen Datenbanken veröffentlichen und von diesen abonnieren.</span><span class="sxs-lookup"><span data-stu-id="18e84-162">Notice that in both the three- and four-node topologies, all databases publish and subscribe to all other databases.</span></span> <span data-ttu-id="18e84-163">Dadurch wird eine maximale Verfügbarkeit im Fall von Wartungserfordernissen oder beim Ausfall eines oder mehrerer Knoten erreicht.</span><span class="sxs-lookup"><span data-stu-id="18e84-163">This provides maximum availability in case of maintenance needs or failure of one or more nodes.</span></span> <span data-ttu-id="18e84-164">Da Knoten hinzugefügt werden, müssen Sie die Verfügbarkeits- und Skalierbarkeitserfordernisse gegenüber der Leistung und der Komplexität der Bereitstellung und der Verwaltung abgleichen.</span><span class="sxs-lookup"><span data-stu-id="18e84-164">As nodes are added, you must balance availability and scalability needs against performance and the complexity of deployment and administration.</span></span>  
  
## <a name="configuring-peer-to-peer-replication"></a><span data-ttu-id="18e84-165">Konfigurieren der Peer-zu-Peer-Replikation</span><span class="sxs-lookup"><span data-stu-id="18e84-165">Configuring Peer-to-Peer Replication</span></span>  
 <span data-ttu-id="18e84-166">Die Konfiguration der Peer-zu-Peer-Replikationstopologie ist der Konfiguration einer Reihe von standardmäßigen Transaktionsveröffentlichungen und -abonnements sehr ähnlich.</span><span class="sxs-lookup"><span data-stu-id="18e84-166">Configuring a peer-to-peer replication topology is very similar to configuring a series of standard transactional publications and subscriptions.</span></span> <span data-ttu-id="18e84-167">Die im folgenden Thema beschriebenen Schritte stellen die Konfiguration eines drei Knoten umfassenden Systems dar, das der auf der linken Seite in der oben stehenden Abbildung dargestellten Peer-zu-Peer-Topologie ähnelt.</span><span class="sxs-lookup"><span data-stu-id="18e84-167">The steps described in the following topics show the configuration of a three-node system, similar to the configuration shown on the left in the previous illustration that shows peer-to-peer topology.</span></span>  
  
## <a name="considerations-for-using-peer-to-peer-replication"></a><span data-ttu-id="18e84-168">Überlegungen für die Verwendung der Peer-zu-Peer-Replikation</span><span class="sxs-lookup"><span data-stu-id="18e84-168">Considerations for Using Peer-to-Peer Replication</span></span>  
 <span data-ttu-id="18e84-169">Dieser Abschnitt enthält Informationen und Richtlinien, die Sie beachten sollten, wenn Sie Peer-zu-Peer-Replikation verwenden.</span><span class="sxs-lookup"><span data-stu-id="18e84-169">This section provides information and guidelines to consider when you use peer-to-peer replication.</span></span>  
  
### <a name="general-considerations"></a><span data-ttu-id="18e84-170">Allgemeine Überlegungen</span><span class="sxs-lookup"><span data-stu-id="18e84-170">General Considerations</span></span>  
  
-   <span data-ttu-id="18e84-171">Die Peer-zu-Peer-Replikation ist nur in Enterprise-Versionen von [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]verfügbar.</span><span class="sxs-lookup"><span data-stu-id="18e84-171">Peer-to-peer replication is available only in Enterprise versions of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span></span>  
  
-   <span data-ttu-id="18e84-172">Alle an der Peer-zu-Peer-Replikation teilnehmenden Datenbanken sollten identische Schemas und Daten enthalten:</span><span class="sxs-lookup"><span data-stu-id="18e84-172">All databases that participate in peer-to-peer replication should contain identical schema and data:</span></span>  
  
    -   <span data-ttu-id="18e84-173">Objektnamen, das Objektschema und Veröffentlichungsnamen sollten identisch sein.</span><span class="sxs-lookup"><span data-stu-id="18e84-173">Object names, object schema, and publication names should be identical.</span></span>  
  
    -   <span data-ttu-id="18e84-174">Bei Veröffentlichungen müssen Schemaänderungen repliziert werden dürfen.</span><span class="sxs-lookup"><span data-stu-id="18e84-174">Publications must allow schema changes to be replicated.</span></span> <span data-ttu-id="18e84-175">(Dies entspricht der Einstellung **1** für die Veröffentlichungseigenschaft **replicate_ddl**, also der Standardeinstellung.) Weitere Informationen finden Sie unter [Vornehmen von Schemaänderungen in Veröffentlichungsdatenbanken](../publish/make-schema-changes-on-publication-databases.md).</span><span class="sxs-lookup"><span data-stu-id="18e84-175">(This is a setting of **1** for the publication property **replicate_ddl**, which is the default setting.) For more information, see [Make Schema Changes on Publication Databases](../publish/make-schema-changes-on-publication-databases.md).</span></span>  
  
    -   <span data-ttu-id="18e84-176">Zeilen- und Spaltenfilterung werden nicht unterstützt.</span><span class="sxs-lookup"><span data-stu-id="18e84-176">Row and column filtering are not supported.</span></span>  
  
-   <span data-ttu-id="18e84-177">Es wird empfohlen, dass jeder Knoten seine eigene Verteilungsdatenbank verwendet.</span><span class="sxs-lookup"><span data-stu-id="18e84-177">We recommend that each node use its own distribution database.</span></span> <span data-ttu-id="18e84-178">Hierdurch wird das Ausfallsrisiko auf mehrere Knoten verteilt.</span><span class="sxs-lookup"><span data-stu-id="18e84-178">This eliminates the potential of having a single point of failure.</span></span>  
  
-   <span data-ttu-id="18e84-179">Tabellen und andere Objekte können nicht in mehreren Peer-zu-Peer-Veröffentlichungen innerhalb einer Veröffentlichungsdatenbank eingeschlossen sein.</span><span class="sxs-lookup"><span data-stu-id="18e84-179">Tables and other objects cannot be included in multiple peer-to-peer publications in a single publication database.</span></span>  
  
-   <span data-ttu-id="18e84-180">Eine Veröffentlichung muss für die Peer-zu-Peer-Replikation aktiviert werden, bevor Abonnements erstellt werden können.</span><span class="sxs-lookup"><span data-stu-id="18e84-180">A publication must be enabled for peer-to-peer replication before any subscriptions are created.</span></span>  
  
-   <span data-ttu-id="18e84-181">Abonnements müssen mithilfe einer Sicherung oder mit der Option **'replication support only'** initialisiert werden.</span><span class="sxs-lookup"><span data-stu-id="18e84-181">Subscriptions must be initialized by using a backup or with the **'replication support only'** option.</span></span> <span data-ttu-id="18e84-182">Weitere Informationen finden Sie unter [Initialize a Transactional Subscription Without a Snapshot](../initialize-a-transactional-subscription-without-a-snapshot.md)initialisiert wird.</span><span class="sxs-lookup"><span data-stu-id="18e84-182">For more information, see [Initialize a Transactional Subscription Without a Snapshot](../initialize-a-transactional-subscription-without-a-snapshot.md).</span></span>  
  
-   <span data-ttu-id="18e84-183">Die Verwendung von Identitätsspalten wird nicht empfohlen.</span><span class="sxs-lookup"><span data-stu-id="18e84-183">We do not recommend the use of identity columns.</span></span> <span data-ttu-id="18e84-184">Bei der Verwendung von Identitäten müssen Sie die den Tabellen zugewiesenen Bereiche in jeder teilnehmenden Datenbank manuell verwalten.</span><span class="sxs-lookup"><span data-stu-id="18e84-184">When using identities, you must manually manage the ranges assigned to the tables at each participating database.</span></span> <span data-ttu-id="18e84-185">Weitere Informationen finden Sie im Abschnitt „Zuweisen von Bereichen für die manuelle Identitätsbereichsverwaltung“ im Thema [Replizieren von Identitätsspalten](../publish/replicate-identity-columns.md).</span><span class="sxs-lookup"><span data-stu-id="18e84-185">For more information, see the section "Assigning Ranges for Manual Identity Range Management" in [Replicate Identity Columns](../publish/replicate-identity-columns.md).</span></span>  
  
### <a name="feature-restrictions"></a><span data-ttu-id="18e84-186">Featureeinschränkungen</span><span class="sxs-lookup"><span data-stu-id="18e84-186">Feature Restrictions</span></span>  
 <span data-ttu-id="18e84-187">Peer-zu-Peer-Replikation unterstützt die zentralen Funktionen der Transaktionsreplikation, unterstützt jedoch nicht die folgenden Optionen:</span><span class="sxs-lookup"><span data-stu-id="18e84-187">Peer-to-peer replication supports the core features of transactional replication, but does not support the following options:</span></span>  
  
-   <span data-ttu-id="18e84-188">Initialisierung und erneute Initialisierung mit einer Momentaufnahme.</span><span class="sxs-lookup"><span data-stu-id="18e84-188">Initialization and reinitialization with a snapshot.</span></span>  
  
-   <span data-ttu-id="18e84-189">Zeilen- und Spaltenfilter.</span><span class="sxs-lookup"><span data-stu-id="18e84-189">Row and column filters.</span></span>  
  
-   <span data-ttu-id="18e84-190">Timestamp-Spalten.</span><span class="sxs-lookup"><span data-stu-id="18e84-190">Timestamp columns.</span></span>  
  
-   <span data-ttu-id="18e84-191">Nicht-[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] -Verleger und -Abonnenten.</span><span class="sxs-lookup"><span data-stu-id="18e84-191">Non-[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Publishers and Subscribers.</span></span>  
  
-   <span data-ttu-id="18e84-192">Abonnements mit sofortigem Update und mit verzögertem Update über eine Warteschlange.</span><span class="sxs-lookup"><span data-stu-id="18e84-192">Immediate updating and queued updating subscriptions.</span></span>  
  
-   <span data-ttu-id="18e84-193">Anonyme Abonnements.</span><span class="sxs-lookup"><span data-stu-id="18e84-193">Anonymous subscriptions.</span></span>  
  
-   <span data-ttu-id="18e84-194">Teilabonnements</span><span class="sxs-lookup"><span data-stu-id="18e84-194">Partial subscriptions.</span></span>  
  
-   <span data-ttu-id="18e84-195">Anfügbare Abonnements und transformierbare Abonnements.</span><span class="sxs-lookup"><span data-stu-id="18e84-195">Attachable subscriptions and transformable subscriptions.</span></span> <span data-ttu-id="18e84-196">(Beide Optionen wurden mit [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)]als veraltet markiert.)</span><span class="sxs-lookup"><span data-stu-id="18e84-196">(Both of these options were deprecated in [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)].)</span></span>  
  
-   <span data-ttu-id="18e84-197">Freigegebene Verteilungs-Agents.</span><span class="sxs-lookup"><span data-stu-id="18e84-197">Shared Distribution Agents.</span></span>  
  
-   <span data-ttu-id="18e84-198">Der Verteilungs-Agent-Parameter **-SubscriptionStreams** und der Protokolllese-Agent-Parameter **-MaxCmdsInTran**.</span><span class="sxs-lookup"><span data-stu-id="18e84-198">The Distribution Agent parameter **-SubscriptionStreams** and the Log Reader Agent parameter **-MaxCmdsInTran**.</span></span>  
  
-   <span data-ttu-id="18e84-199">Die Artikeleigenschaften \*\* \@ destination_owner\*\* und \*\* \@ destination_table\*\*.</span><span class="sxs-lookup"><span data-stu-id="18e84-199">The article properties **\@destination_owner** and **\@destination_table**.</span></span>  

-   <span data-ttu-id="18e84-200">Die Peer-zu-Peer-Transaktionsreplikation unterstützt keine Erstellung von unidirektionalen Transaktionsabonnements an eine Peer-zu-Peer-Veröffentlichung.</span><span class="sxs-lookup"><span data-stu-id="18e84-200">Peer-to-Peer transactional replication does not support creating a one-way transactional subscription to a Peer-to-Peer publication</span></span>
  
 <span data-ttu-id="18e84-201">Für folgende Eigenschaften gelten spezielle Bedingungen:</span><span class="sxs-lookup"><span data-stu-id="18e84-201">The following properties have special considerations:</span></span>  
  
-   <span data-ttu-id="18e84-202">Die \*\* \@ allow_initialize_from_backup\*\* für die Veröffentlichungs Eigenschaft erfordert den Wert `true` .</span><span class="sxs-lookup"><span data-stu-id="18e84-202">The publication property **\@allow_initialize_from_backup** requires a value of `true`.</span></span>  
  
-   <span data-ttu-id="18e84-203">Für die Artikel Eigenschaft \*\* \@ replicate_ddl\*\* ist der Wert erforderlich `true` . für \*\* \@ identityrangemanagementoption\*\* ist der Wert erforderlich `manual` . und der \*\* \@ Status\*\* erfordert, dass Option **24** festgelegt ist.</span><span class="sxs-lookup"><span data-stu-id="18e84-203">The article property **\@replicate_ddl** requires a value of `true`; **\@identityrangemanagementoption** requires a value of `manual`; and **\@status** requires that option **24** is set.</span></span>  
  
-   <span data-ttu-id="18e84-204">Der Wert für die Artikeleigenschaften \*\* \@ ins_cmd**, \*\* \@ del_cmd**und \*\* \@ upd_cmd\*\* kann nicht auf festgelegt werden `SQL` .</span><span class="sxs-lookup"><span data-stu-id="18e84-204">The value for article properties **\@ins_cmd**, **\@del_cmd**, and **\@upd_cmd** cannot be set to `SQL`.</span></span>  
  
-   <span data-ttu-id="18e84-205">Die Abonnement Eigenschaft \*\* \@ sync_type\*\* erfordert den Wert `none` oder `automatic` .</span><span class="sxs-lookup"><span data-stu-id="18e84-205">The subscription property **\@sync_type** requires a value of `none` or `automatic`.</span></span>  
  
### <a name="maintenance-considerations"></a><span data-ttu-id="18e84-206">Überlegungen in Bezug auf die Wartung</span><span class="sxs-lookup"><span data-stu-id="18e84-206">Maintenance Considerations</span></span>  
 <span data-ttu-id="18e84-207">Die folgenden Aktionen erfordern, dass das System in den inaktiven Status versetzt werden muss.</span><span class="sxs-lookup"><span data-stu-id="18e84-207">The following actions require the system to be quiesced.</span></span> <span data-ttu-id="18e84-208">Dazu müssen alle Aktivitäten an veröffentlichten Tabellen in allen Knoten beendet werden, und es muss sichergestellt werden, dass jeder Knoten alle Änderungen von allen anderen Knoten erhalten hat.</span><span class="sxs-lookup"><span data-stu-id="18e84-208">This means stopping activity on published tables at all nodes and making sure that each node has received all changes from all other nodes.</span></span>  
  
-   <span data-ttu-id="18e84-209">Hinzufügen eines [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)] Knotens zu einer vorhandenen Topologie</span><span class="sxs-lookup"><span data-stu-id="18e84-209">Adding a [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)] node to an existing topology</span></span>  
  
-   <span data-ttu-id="18e84-210">Hinzufügen eines Artikels zu einer vorhandenen Veröffentlichung</span><span class="sxs-lookup"><span data-stu-id="18e84-210">Adding an article to an existing publication</span></span>  
  
-   <span data-ttu-id="18e84-211">Vornehmen von Schemaänderungen</span><span class="sxs-lookup"><span data-stu-id="18e84-211">Making schema changes</span></span>  
  
-   <span data-ttu-id="18e84-212">Wiederherstellen eines Knotens von einer Sicherung</span><span class="sxs-lookup"><span data-stu-id="18e84-212">Restoring a node from a backup</span></span>  
  
 <span data-ttu-id="18e84-213">Weitere Informationen finden Sie unter [Versetzen einer Replikationstopologie in einen inaktiven Status &#40;Replikationsprogrammierung mit Transact-SQL&#41;](../administration/quiesce-a-replication-topology-replication-transact-sql-programming.md) und [Verwalten einer Peer-zu-Peer-Topologie &#40;Replikationsprogrammierung mit Transact-SQL&#41;](../administration/administer-a-peer-to-peer-topology-replication-transact-sql-programming.md).</span><span class="sxs-lookup"><span data-stu-id="18e84-213">For more information, see [Quiesce a Replication Topology &#40;Replication Transact-SQL Programming&#41;](../administration/quiesce-a-replication-topology-replication-transact-sql-programming.md) and [Administer a Peer-to-Peer Topology &#40;Replication Transact-SQL Programming&#41;](../administration/administer-a-peer-to-peer-topology-replication-transact-sql-programming.md).</span></span>  
  
-   <span data-ttu-id="18e84-214">Wenn Sie einer Peer-zu-Peer-Topologie einen neuen Knoten hinzufügen, sollte nur aus Sicherungen wiederhergestellt werden, die vor dem Hinzufügen des neuen Knoten erstellt wurden.</span><span class="sxs-lookup"><span data-stu-id="18e84-214">If you add a new node to a peer-to-peer topology, you should restore only from backups that were created after the new node was added.</span></span>  
  
-   <span data-ttu-id="18e84-215">In einer Peer-zu-Peer-Topologie können Abonnements nicht erneut initialisiert werden.</span><span class="sxs-lookup"><span data-stu-id="18e84-215">You cannot reinitialize subscriptions in a peer-to-peer topology.</span></span> <span data-ttu-id="18e84-216">Wenn Sie sicherstellen müssen, dass ein Knoten eine neue Kopie der Daten besitzt, stellen Sie an diesem Knoten eine Sicherung wieder her.</span><span class="sxs-lookup"><span data-stu-id="18e84-216">If you have to ensure that a node has a new copy of the data, restore a backup at the node.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="18e84-217">Weitere Informationen</span><span class="sxs-lookup"><span data-stu-id="18e84-217">See Also</span></span>  
 <span data-ttu-id="18e84-218">[Verwalten einer Peer-zu-Peer-Topologie &#40;Replikationsprogrammierung mit Transact-SQL&#41;](../administration/administer-a-peer-to-peer-topology-replication-transact-sql-programming.md) </span><span class="sxs-lookup"><span data-stu-id="18e84-218">[Administer a Peer-to-Peer Topology &#40;Replication Transact-SQL Programming&#41;](../administration/administer-a-peer-to-peer-topology-replication-transact-sql-programming.md) </span></span>  
 <span data-ttu-id="18e84-219">[Strategien zum Sichern und Wiederherstellen einer Momentaufnahme- und Transaktionsreplikation](../administration/strategies-for-backing-up-and-restoring-snapshot-and-transactional-replication.md) </span><span class="sxs-lookup"><span data-stu-id="18e84-219">[Strategies for Backing Up and Restoring Snapshot and Transactional Replication](../administration/strategies-for-backing-up-and-restoring-snapshot-and-transactional-replication.md) </span></span>  
 [<span data-ttu-id="18e84-220">Veröffentlichungstypen der Transaktionsreplikation</span><span class="sxs-lookup"><span data-stu-id="18e84-220">Publication Types for Transactional Replication</span></span>](transactional-replication.md)  
  
  
