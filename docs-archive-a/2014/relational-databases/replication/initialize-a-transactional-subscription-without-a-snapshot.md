---
title: Initialisieren eines Transaktionsabonnements ohne Momentaufnahme | Microsoft-Dokumentation
ms.custom: ''
ms.date: 03/07/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: replication
ms.topic: conceptual
helpviewer_keywords:
- transactional replication, initializing
- replication [SQL Server], initializing
- initializing subscriptions [SQL Server replication], without snapshots
ms.assetid: 75c8c1f8-60bc-44a8-944b-d18d1f6bda11
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: 88e240b75cdbb239548cfcb8e5d8df5eb2af2973
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 08/04/2020
ms.locfileid: "87609079"
---
# <a name="initialize-a-transactional-subscription-without-a-snapshot"></a><span data-ttu-id="f128b-102">Initialisieren eines Transaktionsabonnements ohne Momentaufnahme</span><span class="sxs-lookup"><span data-stu-id="f128b-102">Initialize a Transactional Subscription Without a Snapshot</span></span>
  <span data-ttu-id="f128b-103">Standardmäßig wird ein Abonnement für eine Transaktionsveröffentlichung mithilfe einer Momentaufnahme initialisiert, die vom Momentaufnahme-Agent generiert und vom Verteilungs-Agent angewendet wird.</span><span class="sxs-lookup"><span data-stu-id="f128b-103">By default, a subscription to a transactional publication is initialized with a snapshot, which is generated by the Snapshot Agent and applied by the Distribution Agent.</span></span> <span data-ttu-id="f128b-104">In einigen Szenarien, wenn z. B. große Anfangsdatasets eine Rolle spielen, ist es vorteilhafter, ein Abonnement mit einer anderen Methode zu initialisieren.</span><span class="sxs-lookup"><span data-stu-id="f128b-104">In some scenarios, such as those involving large initial datasets, it is preferable to initialize a subscription using another method.</span></span> <span data-ttu-id="f128b-105">Folgende weitere Methoden stehen zum Initialisieren eines Abonnements zur Verfügung:</span><span class="sxs-lookup"><span data-stu-id="f128b-105">Other methods of initializing a Subscriber include:</span></span>  
  
-   <span data-ttu-id="f128b-106">Angeben einer Sicherung.</span><span class="sxs-lookup"><span data-stu-id="f128b-106">Specifying a backup.</span></span> <span data-ttu-id="f128b-107">Stellen Sie die Sicherung auf dem Abonnenten her. Der Verteilungs-Agent kopiert dann alle erforderlichen Replikationsmetadaten und gespeicherten Prozeduren.</span><span class="sxs-lookup"><span data-stu-id="f128b-107">Restore the backup on the Subscriber, and then the Distribution Agent copies any required replication metadata and system procedures.</span></span> <span data-ttu-id="f128b-108">Mit der Initialisierung über eine Sicherung können Daten am schnellsten und bequemsten auf den Abonnenten übertragen werden. Das liegt daran, dass jede neuere Sicherung verwendet werden kann, die nach dem Aktivieren einer Veröffentlichung für das Initialisieren mit einer Sicherung vorgenommen wurde.</span><span class="sxs-lookup"><span data-stu-id="f128b-108">Initializing with a backup is the fastest way to deliver data to the Subscriber and is convenient, because any recent backup can be used if it was taken after the publication was enabled for initialization with a backup.</span></span>  
  
-   <span data-ttu-id="f128b-109">Kopieren eines Anfangsdatensatzes auf den Abonnenten mithilfe eines anderen Mechanismus, wie z. B. Anfügen einer Datenbank.</span><span class="sxs-lookup"><span data-stu-id="f128b-109">Copying an initial dataset to the Subscriber through another mechanism, such as attaching a database.</span></span> <span data-ttu-id="f128b-110">Stellen Sie sicher, dass die Daten und das Schema auf dem Abonnenten stimmen. Der Verteilungs-Agent kopiert dann alle erforderlichen Metadaten und gespeicherten Prozeduren.</span><span class="sxs-lookup"><span data-stu-id="f128b-110">You must ensure the correct data and schema are at the Subscriber, and then the Distribution Agent copies any required metadata and system procedures.</span></span>  
  
## <a name="initializing-a-subscription-with-a-backup"></a><span data-ttu-id="f128b-111">Initialisieren eines Abonnements mit einer Sicherung</span><span class="sxs-lookup"><span data-stu-id="f128b-111">Initializing a subscription with a backup</span></span>  
 <span data-ttu-id="f128b-112">Eine Sicherung enthält eine gesamte Datenbank. Deshalb enthält jede Abonnementdatenbank bei ihrer Initialisierung eine vollständige Kopie der Veröffentlichungsdatenbank.</span><span class="sxs-lookup"><span data-stu-id="f128b-112">A backup contains an entire database; therefore each subscription database will contain a complete copy of the publication database when it is initialized:</span></span>  
  
-   <span data-ttu-id="f128b-113">Die Sicherung enthält Tabellen, die nicht als Artikel für die Veröffentlichung angegeben sind.</span><span class="sxs-lookup"><span data-stu-id="f128b-113">The backup includes tables not specified as articles for the publication.</span></span>  
  
-   <span data-ttu-id="f128b-114">Die Sicherung enthält auch dann alle Daten, wenn Zeilen oder Spaltenfilter für eine Tabelle angegeben sind.</span><span class="sxs-lookup"><span data-stu-id="f128b-114">The backup includes all data, even if row or column filters are specified on a table.</span></span>  
  
 <span data-ttu-id="f128b-115">Es ist Aufgabe des Administrators oder der Anwendung, alle unerwünschten Objekte oder Daten nach der Wiederherstellung der Sicherung zu entfernen.</span><span class="sxs-lookup"><span data-stu-id="f128b-115">It is the responsibility of the administrator or application to remove any unwanted objects or data after the backup has been restored.</span></span> <span data-ttu-id="f128b-116">In folgenden Synchronisierungen werden Datenänderungen nur repliziert, wenn sie sich auf Tabellen beziehen, die als Artikel angeben sind, und die Änderungen allen von Ihnen angegebenen Filterkriterien entsprechen.</span><span class="sxs-lookup"><span data-stu-id="f128b-116">In subsequent synchronizations, data changes are only replicated if they apply to tables specified as articles, and the changes meet any filtering criteria you specified.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="f128b-117">Beim Wiederherstellen einer Sicherung müssen Sie sicherstellen, dass die Sicherung vom Verleger stammt, wenn der Abonnent automatisch synchronisiert werden soll.</span><span class="sxs-lookup"><span data-stu-id="f128b-117">When restoring a backup, you must ensure that the backup came from the Publisher if you want the Subscriber to automatically synchronize.</span></span> <span data-ttu-id="f128b-118">Die LNS-Werte (Log Sequence Number, Protokollfolgenummer) in der Sicherung (mit denen der Startpunkt für die Synchronisierung festgelegt wird) beziehen sich immer auf den speziellen Verleger.</span><span class="sxs-lookup"><span data-stu-id="f128b-118">The log sequence number (LSN) values in the backup (which are used to set the point at which to start synchronizing) are specific to the Publisher.</span></span>  
  
 <span data-ttu-id="f128b-119">**So initialisieren Sie ein Abonnement mit einer Sicherung**</span><span class="sxs-lookup"><span data-stu-id="f128b-119">**To initialize a subscription with a backup**</span></span>  
  
 <span data-ttu-id="f128b-120">Zum Initialisieren eines Abonnements mit einer Sicherung muss diese Option beim Erstellen einer Veröffentlichung zuerst aktiviert werden. Anschließend geben Sie Werte für eine Reihe von Optionen an, wenn Sie ein Abonnement erstellen.</span><span class="sxs-lookup"><span data-stu-id="f128b-120">To initialize a subscription with a backup, you first must enable the option when you create a publication, and then specify values for a number of options when you create a subscription.</span></span> <span data-ttu-id="f128b-121">Veröffentlichungen können über den Assistenten für neue Veröffentlichung oder programmgesteuert aktiviert werden.</span><span class="sxs-lookup"><span data-stu-id="f128b-121">Publications can be enabled through the New Publication Wizard or programmatically.</span></span> <span data-ttu-id="f128b-122">Die Werte, die für die Abonnementoptionen erforderlich sind, können jedoch nur programmgesteuert angegeben werden.</span><span class="sxs-lookup"><span data-stu-id="f128b-122">However, the values required for the subscription options can only be specified programmatically.</span></span>  
  
-   [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)]<span data-ttu-id="f128b-123">: [Aktivieren der Initialisierung mit einer Sicherung für Transaktionsveröffentlichungen &#40;SQL Server Management Studio&#41;](enable-initialization-with-backup-for-transactional-publications.md)</span><span class="sxs-lookup"><span data-stu-id="f128b-123">: [Enable Initialization with a Backup for Transactional Publications &#40;SQL Server Management Studio&#41;](enable-initialization-with-backup-for-transactional-publications.md)</span></span>  
  
-   <span data-ttu-id="f128b-124">Replikationsprogrammierung mit Transact-SQL: [Initialisieren eines Transaktionsabonnements von einer Sicherung &#40;Replikationsprogrammierung mit Transact-SQL&#41;](initialize-a-transactional-subscription-from-a-backup.md)</span><span class="sxs-lookup"><span data-stu-id="f128b-124">Replication Transact-SQL programming: [Initialize a Transactional Subscription from a Backup &#40;Replication Transact-SQL Programming&#41;](initialize-a-transactional-subscription-from-a-backup.md)</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="f128b-125">Wenn ein Abonnement ohne Verwendung einer Momentaufnahme initialisiert wird, muss das Konto, unter dem der SQL Server-Dienst auf dem Verleger ausgeführt wird, Schreibberechtigung für den Momentaufnahmeordner auf dem Verteiler besitzen.</span><span class="sxs-lookup"><span data-stu-id="f128b-125">If a subscription is initialized without using a snapshot, the account under which the SQL Server service runs at the Publisher must have write permissions on the snapshot folder at the Distributor.</span></span> <span data-ttu-id="f128b-126">Weitere Informationen zu Berechtigungen finden Sie unter [Replication Agent Security Model](security/replication-agent-security-model.md).</span><span class="sxs-lookup"><span data-stu-id="f128b-126">For more information about permissions, see [Replication Agent Security Model](security/replication-agent-security-model.md).</span></span>  
  
### <a name="ensuring-the-suitability-of-a-backup"></a><span data-ttu-id="f128b-127">Sicherstellen der Eignung einer Sicherung</span><span class="sxs-lookup"><span data-stu-id="f128b-127">Ensuring the suitability of a backup</span></span>  
 <span data-ttu-id="f128b-128">Eine Sicherung eignet sich zum Initialisieren eines Abonnenten, wenn alle Transaktionen, die nach dem Erstellen der Sicherung auftreten, auf dem Verteiler gespeichert werden.</span><span class="sxs-lookup"><span data-stu-id="f128b-128">A backup is suitable for initializing a Subscriber if all transactions that occur after the backup was taken are stored at the Distributor.</span></span> <span data-ttu-id="f128b-129">Die Replikation zeigt eine Fehlermeldung an, falls sich die Sicherung nicht eignet.</span><span class="sxs-lookup"><span data-stu-id="f128b-129">Replication will display an error message if the backup is not suitable.</span></span>  
  
 <span data-ttu-id="f128b-130">Beachten Sie die folgenden Richtlinien, um sicherzustellen, dass sich eine Sicherung eignet:</span><span class="sxs-lookup"><span data-stu-id="f128b-130">To help ensure that a backup is suitable for use, follow these guidelines:</span></span>  
  
-   <span data-ttu-id="f128b-131">Verwenden Sie die neueste verfügbare Sicherung. Falls die neueste Sicherung die maximalen Beibehaltungsdauer der Verteilung überschritten hat, erstellen Sie eine neue Sicherung, und führen Sie erst dann die Initialisierung mit einer Sicherung durch.</span><span class="sxs-lookup"><span data-stu-id="f128b-131">Use the latest backup available, and if the latest backup is older than the maximum distribution retention period, create a new backup before attempting to initialize a subscription with a backup.</span></span> <span data-ttu-id="f128b-132">Weitere Informationen zu Beibehaltungsdauer finden Sie unter [Subscription Expiration and Deactivation](subscription-expiration-and-deactivation.md).</span><span class="sxs-lookup"><span data-stu-id="f128b-132">For more information about retention period, see [Subscription Expiration and Deactivation](subscription-expiration-and-deactivation.md).</span></span>  
  
-   <span data-ttu-id="f128b-133">Der Replikationsauftrag Verteilungscleanup löscht Transaktionen, die älter als 72 Stunden sind, aus der Verteilungsdatenbank.</span><span class="sxs-lookup"><span data-stu-id="f128b-133">By default, the distribution cleanup job clears transactions older than 72 hours from the distribution database.</span></span> <span data-ttu-id="f128b-134">Der Cleanup basiert auf der für die Veröffentlichung festgelegten Beibehaltungsdauer.</span><span class="sxs-lookup"><span data-stu-id="f128b-134">Cleanup is based on the retention period set for the publication.</span></span> <span data-ttu-id="f128b-135">Wenn Sie eine Synchronisierung mit älteren Sicherungen ausführen, sollten Sie den Auftrag vorübergehend deaktivieren, bevor Sie die Sicherung wiederherstellen. Nachdem das Abonnement erfolgreich erstellt wurde, können Sie den Auftrag wieder aktivieren.</span><span class="sxs-lookup"><span data-stu-id="f128b-135">When synchronizing with older backups, consider temporarily disabling the job before the backup you would like to restore and re-enabling it after the subscription is successfully created.</span></span> <span data-ttu-id="f128b-136">Dadurch verhindern Sie, dass Transaktionen aus der Verteilungsdatenbank entfernt werden, die für eine erfolgreiche Synchronisierung aus der Sicherung erforderlich sind.</span><span class="sxs-lookup"><span data-stu-id="f128b-136">This prevents removal of transactions from the distribution database that might be needed to synchronize successfully from the backup.</span></span> <span data-ttu-id="f128b-137">Informationen zum Ausführen von Cleanupaufträgen finden Sie unter [Ausführen von Aufträgen zur Replikationswartung &#40;SQL Server Management Studio&#41;](administration/run-replication-maintenance-jobs-sql-server-management-studio.md).</span><span class="sxs-lookup"><span data-stu-id="f128b-137">For information about running cleanup jobs, see [Run Replication Maintenance Jobs &#40;SQL Server Management Studio&#41;](administration/run-replication-maintenance-jobs-sql-server-management-studio.md).</span></span>  
  
 <span data-ttu-id="f128b-138">In einigen Fällen müssen Sie Anpassungen nach dem Einrichten von Abonnements, die mit einer Sicherung initialisiert wurden, in der wiederhergestellten Abonnentendatenbank manuell ausführen.</span><span class="sxs-lookup"><span data-stu-id="f128b-138">In some cases you must manually perform customizations in the restored Subscriber database after setting up subscriptions that are initialized with a backup.</span></span> <span data-ttu-id="f128b-139">In der Regel sind manuelle Änderungen an der wiederhergestellten Abonnentendatenbank erforderlich, wenn die Definition der Veröffentlichung voraussichtlich dazu führt, dass sich der Inhalt der Abonnentendatenbank von dem Inhalt der Verlegerdatenbank unterscheidet.</span><span class="sxs-lookup"><span data-stu-id="f128b-139">In general, manual modifications at the restored Subscriber database are required if the Publication is defined in such a way that the Subscriber database content is expected to be different from the Publisher database content.</span></span>  
  
-   <span data-ttu-id="f128b-140">Indizierte Sichten in der wiederhergestellten Datenbank müssen in Tabellen konvertiert werden, wenn sie als Artikel vom Typ log-based indexed-view-to-table veröffentlicht werden.</span><span class="sxs-lookup"><span data-stu-id="f128b-140">Indexed-views at the restored database have to be converted to tables if they are published as log-based indexed-view-to-table articles</span></span>  
  
-   <span data-ttu-id="f128b-141">Abonnierte timestamp-Spalten in wiederhergestellten Datenbanken müssen in **binary(8)** -Spalten konvertiert werden: Kopieren Sie den Inhalt der Tabellen, die timestamp-Spalten enthalten, in neue Tabellen, die übereinstimmende Schemas, jedoch anstelle der timestamp-Spalten **binary(8)** -Spalten aufweisen. Löschen Sie die ursprünglichen Tabellen, und geben Sie den neuen Tabellen jeweils denselben Namen wie den ursprünglichen Tabellen.</span><span class="sxs-lookup"><span data-stu-id="f128b-141">Subscribed timestamp columns at the restored database must be converted to **binary(8)** columns: copy the content of the tables containing timestamp columns to new tables with matching schemas except having **binary(8)** columns in place of the timestamp columns, drop the original tables, and rename the new tables with the same names as the original tables.</span></span>  
  
## <a name="initializing-a-subscription-with-an-alternative-method"></a><span data-ttu-id="f128b-142">Initialisieren eines Abonnements mit einer alternativen Methode</span><span class="sxs-lookup"><span data-stu-id="f128b-142">Initializing a subscription with an alternative method</span></span>  
 <span data-ttu-id="f128b-143">Abonnements können mit jeder beliebigen Methode initialisiert werden, die das Kopieren des Veröffentlichungsdatenbankschemas und der Daten auf den Abonnenten zulässt, wie z. B. [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="f128b-143">It is possible to initialize a subscription using any method that allows you to copy the publication database schema and data to the Subscriber, such as [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)].</span></span> <span data-ttu-id="f128b-144">Wenn Sie zum Initialisieren des Abonnenten eine alternative Methode verwenden, werden Unterstützungsobjekte der Replikation auf den Abonnenten kopiert.</span><span class="sxs-lookup"><span data-stu-id="f128b-144">When you use an alternative method to initialize the Subscriber, replication support objects are copied to the Subscriber.</span></span>  
  
 <span data-ttu-id="f128b-145">Im Unterschied zur Sicherung muss durch Sie oder die Anwendung sichergestellt werden, dass die Daten und das Schema beim Hinzufügen des Abonnements ordnungsgemäß synchronisiert werden.</span><span class="sxs-lookup"><span data-stu-id="f128b-145">Unlike initializing with a backup, you or your application must ensure the data and schema are properly synchronized at the time you add the subscription.</span></span> <span data-ttu-id="f128b-146">Wenn es zwischen dem Zeitpunkt, zu dem die Daten und das Schema auf den Abonnenten kopiert wurden, und dem Zeitpunkt, zu dem das Abonnement hinzugefügt wird, beispielsweise auf dem Verleger zu einer Aktivität gekommen ist, kann es passieren, dass Änderungen, die sich aus dieser Aktivität ergeben, nicht auf den Abonnenten repliziert werden.</span><span class="sxs-lookup"><span data-stu-id="f128b-146">If, for example, there is activity on the Publisher between the time data and schema are copied to the Subscriber and the time at which the subscription is added, changes resulting from this activity might not be replicated to the Subscriber.</span></span>  
  
 <span data-ttu-id="f128b-147">Informationen zum Initialisieren eines Abonnements mit einer alternativen Methode finden Sie unter [Initialize a Subscription Manually](initialize-a-subscription-manually.md).</span><span class="sxs-lookup"><span data-stu-id="f128b-147">To initialize a subscription with an alternative method, see [Initialize a Subscription Manually](initialize-a-subscription-manually.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="f128b-148">Weitere Informationen</span><span class="sxs-lookup"><span data-stu-id="f128b-148">See Also</span></span>  
 [<span data-ttu-id="f128b-149">Initialisieren eines Abonnements</span><span class="sxs-lookup"><span data-stu-id="f128b-149">Initialize a Subscription</span></span>](initialize-a-subscription.md)  
  
  
