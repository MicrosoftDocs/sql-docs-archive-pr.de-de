---
title: Versetzen einer Replikationstopologie in einen inaktiven Status (Replikationsprogrammierung mit Transact-SQL) | Microsoft-Dokumentation
ms.custom: ''
ms.date: 03/08/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: replication
ms.topic: conceptual
dev_langs:
- TSQL
helpviewer_keywords:
- administering replication, quiescing
- quiesce [SQL Server replication]
- transactional replication, backup and restore
ms.assetid: 7626d575-9994-47be-b772-5b6f1b7ef7ca
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: f12f0fb8ee3a6118e03799d17836573fb5c733df
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 08/04/2020
ms.locfileid: "87721394"
---
# <a name="quiesce-a-replication-topology-replication-transact-sql-programming"></a><span data-ttu-id="12a6a-102">Versetzen einer Replikationstopologie in einen inaktiven Status (Replikationsprogrammierung mit Transact-SQL)</span><span class="sxs-lookup"><span data-stu-id="12a6a-102">Quiesce a Replication Topology (Replication Transact-SQL Programming)</span></span>
  <span data-ttu-id="12a6a-103"> Um das System *in einen inaktiven Status zu versetzen*, beenden Sie alle Aktivitäten in veröffentlichten Tabellen an allen Knoten, und stellen Sie sicher, dass jeder Knoten alle Änderungen aller anderen Knoten erhalten hat.</span><span class="sxs-lookup"><span data-stu-id="12a6a-103">*Quiescing* a system involves stopping activity on published tables at all nodes and ensuring that each node has received all changes from all other nodes.</span></span> <span data-ttu-id="12a6a-104">In diesem Thema wird erläutert, wie eine Replikationstopologie in einen inaktiven Status versetzt wird. Dies ist für eine Reihe von Verwaltungsaufgaben erforderlich. Zudem finden Sie hier Informationen dazu, wie Sie überprüfen können, ob ein Knoten alle Änderungen anderer Knoten erhalten hat.</span><span class="sxs-lookup"><span data-stu-id="12a6a-104">This topic explains how to quiesce a replication topology, which is required for a number of administrative tasks, and how to ensure that a node has received all changes from other nodes.</span></span>  
  
### <a name="to-quiesce-a-transactional-replication-topology-with-read-only-subscriptions"></a><span data-ttu-id="12a6a-105">So versetzen Sie eine Transaktionsreplikationstopologie mit schreibgeschützten Abonnements in einen inaktiven Status</span><span class="sxs-lookup"><span data-stu-id="12a6a-105">To quiesce a transactional replication topology with read-only subscriptions</span></span>  
  
1.  <span data-ttu-id="12a6a-106">Beenden Sie die Aktivitäten an allen veröffentlichten Tabellen auf dem Verleger.</span><span class="sxs-lookup"><span data-stu-id="12a6a-106">Stop activity on all published tables at the Publisher.</span></span>  
  
2.  <span data-ttu-id="12a6a-107">Führen Sie auf dem Verleger für die Veröffentlichungsdatenbank [sp_posttracertoken &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-posttracertoken-transact-sql) aus.</span><span class="sxs-lookup"><span data-stu-id="12a6a-107">At the Publisher on the publication database, execute [sp_posttracertoken &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-posttracertoken-transact-sql).</span></span>  
  
3.  <span data-ttu-id="12a6a-108">Führen Sie auf dem Verleger für die Veröffentlichungsdatenbank [sp_helptracertokenhistory](/sql/relational-databases/system-stored-procedures/sp-helptracertokenhistory-transact-sql)aus.</span><span class="sxs-lookup"><span data-stu-id="12a6a-108">At the Publisher on the publication database, execute [sp_helptracertokenhistory](/sql/relational-databases/system-stored-procedures/sp-helptracertokenhistory-transact-sql).</span></span>  
  
4.  <span data-ttu-id="12a6a-109">Stellen Sie sicher, dass jeder Abonnent das Überwachungstoken erhalten hat.</span><span class="sxs-lookup"><span data-stu-id="12a6a-109">Ensure that each Subscriber has received the tracer token.</span></span>  
  
### <a name="to-quiesce-a-transactional-replication-topology-with-updatable-subscriptions"></a><span data-ttu-id="12a6a-110">So versetzen Sie eine Transaktionsreplikationstopologie mit aktualisierbaren Abonnements in einen inaktiven Status</span><span class="sxs-lookup"><span data-stu-id="12a6a-110">To quiesce a transactional replication topology with updatable subscriptions</span></span>  
  
1.  <span data-ttu-id="12a6a-111">Beenden Sie die Aktivitäten an allen veröffentlichten Tabellen auf dem Verleger und auf allen Abonnenten.</span><span class="sxs-lookup"><span data-stu-id="12a6a-111">Stop activity on all published tables at the Publisher and all Subscribers.</span></span>  
  
2.  <span data-ttu-id="12a6a-112">Wenn Abonnenten Abonnements mit verzögertem Update über eine Warteschlange verwenden:</span><span class="sxs-lookup"><span data-stu-id="12a6a-112">If any Subscribers use queued updating subscriptions:</span></span>  
  
    1.  <span data-ttu-id="12a6a-113">Wenn der Warteschlangenlese-Agent nicht im fortlaufenden Modus ausgeführt wird, führen Sie den Agent aus.</span><span class="sxs-lookup"><span data-stu-id="12a6a-113">If the Queue Reader Agent is not running in continuous mode, run the agent.</span></span> <span data-ttu-id="12a6a-114">Weitere Informationen zum Ausführen von Agents finden Sie unter [Ausführbare Konzepte für die Programmierung von Replikations-Agents](../concepts/replication-agent-executables-concepts.md) oder [Starten und Beenden eines Replikations-Agents &#40;SQL Server Management Studio&#41;](../agents/start-and-stop-a-replication-agent-sql-server-management-studio.md).</span><span class="sxs-lookup"><span data-stu-id="12a6a-114">For more information about running agents, see [Replication Agent Executables Concepts](../concepts/replication-agent-executables-concepts.md) or [Start and Stop a Replication Agent &#40;SQL Server Management Studio&#41;](../agents/start-and-stop-a-replication-agent-sql-server-management-studio.md).</span></span>  
  
    2.  <span data-ttu-id="12a6a-115">Führen Sie auf jedem Abonnenten [sp_replqueuemonitor](/sql/relational-databases/system-stored-procedures/sp-replqueuemonitor-transact-sql) aus, um zu überprüfen, ob die Warteschlange leer ist.</span><span class="sxs-lookup"><span data-stu-id="12a6a-115">To verify that the queue is empty, execute [sp_replqueuemonitor](/sql/relational-databases/system-stored-procedures/sp-replqueuemonitor-transact-sql) at each Subscriber.</span></span>  
  
3.  <span data-ttu-id="12a6a-116">Führen Sie auf dem Verleger für die Veröffentlichungsdatenbank [sp_posttracertoken](/sql/relational-databases/system-stored-procedures/sp-posttracertoken-transact-sql)aus.</span><span class="sxs-lookup"><span data-stu-id="12a6a-116">At the Publisher on the publication database, execute [sp_posttracertoken](/sql/relational-databases/system-stored-procedures/sp-posttracertoken-transact-sql).</span></span>  
  
4.  <span data-ttu-id="12a6a-117">Führen Sie auf dem Verleger für die Veröffentlichungsdatenbank [sp_helptracertokenhistory](/sql/relational-databases/system-stored-procedures/sp-helptracertokenhistory-transact-sql)aus.</span><span class="sxs-lookup"><span data-stu-id="12a6a-117">At the Publisher on the publication database, execute [sp_helptracertokenhistory](/sql/relational-databases/system-stored-procedures/sp-helptracertokenhistory-transact-sql).</span></span>  
  
5.  <span data-ttu-id="12a6a-118">Stellen Sie sicher, dass jeder Abonnent das Überwachungstoken erhalten hat.</span><span class="sxs-lookup"><span data-stu-id="12a6a-118">Ensure that each Subscriber has received the tracer token.</span></span>  
  
### <a name="to-quiesce-a-peer-to-peer-transactional-replication-topology"></a><span data-ttu-id="12a6a-119">So versetzen Sie eine Peer-zu-Peer-Transaktionsreplikationstopologie in einen inaktiven Status</span><span class="sxs-lookup"><span data-stu-id="12a6a-119">To quiesce a peer-to-peer transactional replication topology</span></span>  
  
1.  <span data-ttu-id="12a6a-120">Beenden Sie die Aktivitäten an allen veröffentlichten Tabellen in allen Knoten.</span><span class="sxs-lookup"><span data-stu-id="12a6a-120">Stop activity on all published tables at all nodes.</span></span>  
  
2.  <span data-ttu-id="12a6a-121">Führen Sie für jede Veröffentlichungsdatenbank in der Topologie [sp_requestpeerresponse](/sql/relational-databases/system-stored-procedures/sp-requestpeerresponse-transact-sql) aus.</span><span class="sxs-lookup"><span data-stu-id="12a6a-121">Execute [sp_requestpeerresponse](/sql/relational-databases/system-stored-procedures/sp-requestpeerresponse-transact-sql) on each publication database in the topology.</span></span>  
  
3.  <span data-ttu-id="12a6a-122">Wenn der Protokolllese-Agent oder der Verteilungs-Agent nicht im fortlaufenden Modus ausgeführt wird, führen Sie den Agent aus.</span><span class="sxs-lookup"><span data-stu-id="12a6a-122">If the Log Reader Agent or Distribution Agent is not running in continuous mode, run the agent.</span></span> <span data-ttu-id="12a6a-123">Der Protokolllese-Agent muss vor dem Verteilungs-Agent gestartet werden.</span><span class="sxs-lookup"><span data-stu-id="12a6a-123">The Log Reader Agent must be started before the Distribution Agent.</span></span> <span data-ttu-id="12a6a-124">Weitere Informationen zum Ausführen von Agents finden Sie unter [Ausführbare Konzepte für die Programmierung von Replikations-Agents](../concepts/replication-agent-executables-concepts.md) oder [Starten und Beenden eines Replikations-Agents &#40;SQL Server Management Studio&#41;](../agents/start-and-stop-a-replication-agent-sql-server-management-studio.md).</span><span class="sxs-lookup"><span data-stu-id="12a6a-124">For more information about running agents, see [Replication Agent Executables Concepts](../concepts/replication-agent-executables-concepts.md) or [Start and Stop a Replication Agent &#40;SQL Server Management Studio&#41;](../agents/start-and-stop-a-replication-agent-sql-server-management-studio.md).</span></span>  
  
4.  <span data-ttu-id="12a6a-125">Führen Sie für jede Veröffentlichungsdatenbank in der Topologie [sp_helppeerresponses](/sql/relational-databases/system-stored-procedures/sp-helppeerresponses-transact-sql) aus.</span><span class="sxs-lookup"><span data-stu-id="12a6a-125">Execute [sp_helppeerresponses](/sql/relational-databases/system-stored-procedures/sp-helppeerresponses-transact-sql) on each publication database in the topology.</span></span> <span data-ttu-id="12a6a-126">Stellen Sie sicher, dass das Resultset Antworten von allen anderen Knoten enthält.</span><span class="sxs-lookup"><span data-stu-id="12a6a-126">Ensure that the result set contains responses from each of the other nodes.</span></span>  
  
### <a name="to-ensure-a-peer-to-peer-node-has-received-all-prior-changes"></a><span data-ttu-id="12a6a-127">So stellen Sie sicher, dass ein Peer-zu-Peer-Knoten alle vorherigen Änderungen erhalten hat</span><span class="sxs-lookup"><span data-stu-id="12a6a-127">To ensure a peer-to-peer node has received all prior changes</span></span>  
  
1.  <span data-ttu-id="12a6a-128">Führen Sie für die Veröffentlichungsdatenbank an dem überprüften Knoten [sp_requestpeerresponse](/sql/relational-databases/system-stored-procedures/sp-requestpeerresponse-transact-sql) aus.</span><span class="sxs-lookup"><span data-stu-id="12a6a-128">Execute [sp_requestpeerresponse](/sql/relational-databases/system-stored-procedures/sp-requestpeerresponse-transact-sql) on the publication database at the node you are checking.</span></span>  
  
2.  <span data-ttu-id="12a6a-129">Wenn der Protokolllese-Agent oder der Verteilungs-Agent nicht im fortlaufenden Modus ausgeführt wird, führen Sie den Agent aus.</span><span class="sxs-lookup"><span data-stu-id="12a6a-129">If the Log Reader Agent or Distribution Agent is not running in continuous mode, run the agent.</span></span> <span data-ttu-id="12a6a-130">Der Protokolllese-Agent muss vor dem Verteilungs-Agent gestartet werden.</span><span class="sxs-lookup"><span data-stu-id="12a6a-130">The Log Reader Agent must be started before the Distribution Agent.</span></span> <span data-ttu-id="12a6a-131">Weitere Informationen zum Ausführen von Agents finden Sie unter [Ausführbare Konzepte für die Programmierung von Replikations-Agents](../concepts/replication-agent-executables-concepts.md) oder [Starten und Beenden eines Replikations-Agents &#40;SQL Server Management Studio&#41;](../agents/start-and-stop-a-replication-agent-sql-server-management-studio.md).</span><span class="sxs-lookup"><span data-stu-id="12a6a-131">For more information about running agents, see [Replication Agent Executables Concepts](../concepts/replication-agent-executables-concepts.md) or [Start and Stop a Replication Agent &#40;SQL Server Management Studio&#41;](../agents/start-and-stop-a-replication-agent-sql-server-management-studio.md).</span></span>  
  
3.  <span data-ttu-id="12a6a-132">Führen Sie für die Veröffentlichungsdatenbank an dem überprüften Knoten [sp_helppeerresponses](/sql/relational-databases/system-stored-procedures/sp-helppeerresponses-transact-sql) aus.</span><span class="sxs-lookup"><span data-stu-id="12a6a-132">Execute [sp_helppeerresponses](/sql/relational-databases/system-stored-procedures/sp-helppeerresponses-transact-sql) on the publication database at the node you are checking.</span></span> <span data-ttu-id="12a6a-133">Stellen Sie sicher, dass das Resultset Antworten von allen anderen Knoten enthält.</span><span class="sxs-lookup"><span data-stu-id="12a6a-133">Ensure that the result set contains responses from each of the other nodes.</span></span>  
  
### <a name="to-quiesce-a-merge-replication-topology"></a><span data-ttu-id="12a6a-134">So versetzen Sie eine Mergereplikationstopologie in einen inaktiven Status</span><span class="sxs-lookup"><span data-stu-id="12a6a-134">To quiesce a merge replication topology</span></span>  
  
1.  <span data-ttu-id="12a6a-135">Beenden Sie die Aktivitäten an allen veröffentlichten Tabellen auf dem Verleger und auf allen Abonnenten.</span><span class="sxs-lookup"><span data-stu-id="12a6a-135">Stop activity on all published tables at the Publisher and at all Subscribers.</span></span>  
  
2.  <span data-ttu-id="12a6a-136">Führen Sie den Merge-Agent für jedes Abonnement zweimal aus: Synchronisieren Sie alle Abonnements einmal, und synchronisieren Sie dann jedes Abonnement ein zweites Mal.</span><span class="sxs-lookup"><span data-stu-id="12a6a-136">Run the Merge Agent for each subscription two times: synchronize all subscriptions once and then synchronize each subscription a second time.</span></span> <span data-ttu-id="12a6a-137">So kann sichergestellt werden, dass alle Änderungen auf allen Knoten repliziert werden.</span><span class="sxs-lookup"><span data-stu-id="12a6a-137">This ensures that all changes are replicated to all nodes.</span></span> <span data-ttu-id="12a6a-138">Weitere Informationen zum Ausführen von Agents finden Sie unter [Ausführbare Konzepte für die Programmierung von Replikations-Agents](../concepts/replication-agent-executables-concepts.md) oder [Starten und Beenden eines Replikations-Agents &#40;SQL Server Management Studio&#41;](../agents/start-and-stop-a-replication-agent-sql-server-management-studio.md).</span><span class="sxs-lookup"><span data-stu-id="12a6a-138">For more information about running agents, see [Replication Agent Executables Concepts](../concepts/replication-agent-executables-concepts.md) or [Start and Stop a Replication Agent &#40;SQL Server Management Studio&#41;](../agents/start-and-stop-a-replication-agent-sql-server-management-studio.md).</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="12a6a-139">Wenn während der Synchronisierung Konflikte auftreten, werden durch die Konfliktlösung angeforderte Änderungen möglicherweise nicht an alle Knoten weitergegeben, nachdem der Merge-Agent zweimal ausgeführt wurde.</span><span class="sxs-lookup"><span data-stu-id="12a6a-139">If conflicts occur during synchronization, it is possible that changes required by conflict resolution will not be propagated to all nodes after running the Merge Agent two times.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="12a6a-140">Weitere Informationen</span><span class="sxs-lookup"><span data-stu-id="12a6a-140">See Also</span></span>  
 <span data-ttu-id="12a6a-141">[Verwalten einer Peer-zu-Peer-Topologie &#40;Replikationsprogrammierung mit Transact-SQL&#41;](administer-a-peer-to-peer-topology-replication-transact-sql-programming.md) </span><span class="sxs-lookup"><span data-stu-id="12a6a-141">[Administer a Peer-to-Peer Topology &#40;Replication Transact-SQL Programming&#41;](administer-a-peer-to-peer-topology-replication-transact-sql-programming.md) </span></span>  
 [<span data-ttu-id="12a6a-142">Messen der Latenzzeit und Überprüfen der Verbindungen bei Transaktionsreplikationen</span><span class="sxs-lookup"><span data-stu-id="12a6a-142">Measure Latency and Validate Connections for Transactional Replication</span></span>](../monitor/measure-latency-and-validate-connections-for-transactional-replication.md)  
  
  
