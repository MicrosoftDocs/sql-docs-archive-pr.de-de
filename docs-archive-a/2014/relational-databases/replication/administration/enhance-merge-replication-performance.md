---
title: Verbessern der Leistung der Mergereplikation | Microsoft-Dokumentation
ms.custom: ''
ms.date: 03/08/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: replication
ms.topic: conceptual
helpviewer_keywords:
- publications [SQL Server replication], design and performance
- designing databases [SQL Server], replication performance
- Merge Agent, performance
- snapshots [SQL Server replication], performance considerations
- merge replication performance [SQL Server replication]
- subscriptions [SQL Server replication], performance considerations
- performance [SQL Server replication], merge replication
- agents [SQL Server replication], performance
ms.assetid: f929226f-b83d-4900-a07c-a62f64527c7f
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: 41dc258e9b45e9839ad142e73cb145999d02986c
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 08/04/2020
ms.locfileid: "87725561"
---
# <a name="enhance-merge-replication-performance"></a><span data-ttu-id="c517f-102">Verbessern der Leistung der Mergereplikation</span><span class="sxs-lookup"><span data-stu-id="c517f-102">Enhance Merge Replication Performance</span></span>
  <span data-ttu-id="c517f-103">Im Anschluss an die in [Verbessern der allgemeinen Replikationsleistung](enhance-general-replication-performance.md)beschriebenen Überlegungen zur allgemeinen Leistung sollten Sie sich Gedanken über die im Folgenden beschriebenen zusätzlichen Aspekte im Zusammenhang mit einer Mergereplikation machen.</span><span class="sxs-lookup"><span data-stu-id="c517f-103">After considering the general performance tips described in [Enhancing General Replication Performance](enhance-general-replication-performance.md), consider these additional areas specific to merge replication.</span></span>  
  
## <a name="database-design"></a><span data-ttu-id="c517f-104">Datenbankentwurf</span><span class="sxs-lookup"><span data-stu-id="c517f-104">Database Design</span></span>  
  
-   <span data-ttu-id="c517f-105">Indizieren Sie Spalten, die in Zeilenfiltern und Joinfiltern verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="c517f-105">Index columns used in row filters and join filters.</span></span>  
  
     <span data-ttu-id="c517f-106">Erstellen Sie beim Verwenden eines Zeilenfilters für einen veröffentlichten Artikel einen Index für jede Spalte, die in der WHERE-Klausel des Filters verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="c517f-106">When you use a row filter on a published article, create an index on each of the columns that is used in the filter's WHERE clause.</span></span> <span data-ttu-id="c517f-107">Ohne einen solchen Index muss [!INCLUDE[msCoName](../../../includes/msconame-md.md)] [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] jede einzelne Zeile in der Tabelle lesen, um zu bestimmen, ob die Zeile in die Partition aufgenommen werden soll oder nicht.</span><span class="sxs-lookup"><span data-stu-id="c517f-107">Without an index, [!INCLUDE[msCoName](../../../includes/msconame-md.md)] [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] has to read each row in the table to determine whether the row should be included in the partition.</span></span> <span data-ttu-id="c517f-108">Mit einem Index kann [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] hingegen schnell ermitteln, welche Zeilen aufzunehmen sind.</span><span class="sxs-lookup"><span data-stu-id="c517f-108">With an index, [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] can quickly locate which rows should be included.</span></span> <span data-ttu-id="c517f-109">Am schnellsten geht die Verarbeitung, wenn die Replikation die WHERE-Klausel des Filters vollständig allein aus dem Index auflösen kann.</span><span class="sxs-lookup"><span data-stu-id="c517f-109">The fastest processing takes place if replication can fully resolve the WHERE clause of the filter from the index alone.</span></span>  
  
     <span data-ttu-id="c517f-110">Außerdem sollten auch alle Spalten indiziert werden, die in Joinfiltern verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="c517f-110">Indexing all the columns used in join filters is also important.</span></span> <span data-ttu-id="c517f-111">Bei jeder Ausführung des Merge-Agents durchsucht dieser die Basistabelle, um festzustellen, welche Zeilen in einer übergeordneten Tabelle und welche Zeilen in verknüpften Tabellen in eine Partition aufzunehmen sind.</span><span class="sxs-lookup"><span data-stu-id="c517f-111">Each time the Merge Agent runs, it searches the base table to determine which rows in a parent table and which rows in related tables are included in a partition.</span></span> <span data-ttu-id="c517f-112">Durch Erstellen eines Indexes für die verknüpften Spalten wird verhindert, dass [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] jede Zeile in der Tabelle bei jeder Ausführung des Merge-Agents lesen muss.</span><span class="sxs-lookup"><span data-stu-id="c517f-112">Creating an index on the joined columns avoids having [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] read each row in the table every time the Merge Agent runs.</span></span>  
  
     <span data-ttu-id="c517f-113">Weitere Informationen zur Filterung finden Sie unter [Filtern von veröffentlichten Daten für die Mergereplikation](../merge/filter-published-data-for-merge-replication.md).</span><span class="sxs-lookup"><span data-stu-id="c517f-113">For more information on filtering, see [Filter Published Data for Merge Replication](../merge/filter-published-data-for-merge-replication.md).</span></span>  
  
-   <span data-ttu-id="c517f-114">Überlegen Sie, ob Sie Tabellen, die LOB-Datentypen (Large Object) enthalten, übernormalisieren sollten.</span><span class="sxs-lookup"><span data-stu-id="c517f-114">Consider overnormalizing tables that include Large Object (LOB) data types.</span></span>  
  
     <span data-ttu-id="c517f-115">Bei der Synchronisierung muss der Merge-Agent möglicherweise die gesamte Datenzeile von einem Verleger oder Abonnenten lesen und übertragen.</span><span class="sxs-lookup"><span data-stu-id="c517f-115">When synchronization occurs, the Merge Agent might need to read and transfer the entire data row from a Publisher or Subscriber.</span></span> <span data-ttu-id="c517f-116">Falls die Zeile Spalten enthält, die LOBs verwenden, kann dieser Vorgang eine zusätzliche Speicherbelegung erfordern und die Leistung beeinträchtigen, auch wenn diese Spalten gar nicht aktualisiert wurden.</span><span class="sxs-lookup"><span data-stu-id="c517f-116">If the row contains columns that use LOBs, this process can require additional memory allocation and negatively impact performance even though these columns may not have been updated.</span></span> <span data-ttu-id="c517f-117">Um die Wahrscheinlichkeit einer solchen Leistungsbeeinträchtigung zu verringern, sollten Sie LOB-Spalten in einer separaten Tabelle mit einer 1:1-Beziehung zu den restlichen Zeilendaten speichern.</span><span class="sxs-lookup"><span data-stu-id="c517f-117">To reduce the likelihood that this performance impact occurs, consider putting LOB columns in a separate table using a one-to-one relationship to the rest of the row data.</span></span> <span data-ttu-id="c517f-118">Die Datentypen `text`, `ntext` und `image` sind als veraltet markiert.</span><span class="sxs-lookup"><span data-stu-id="c517f-118">The data types `text`, `ntext`, and `image` are deprecated.</span></span> <span data-ttu-id="c517f-119">Wenn Sie LOBs verwenden, sollten Sie auf die Datentypen `varchar(max)`, `nvarchar(max)` und `varbinary(max)` zurückgreifen.</span><span class="sxs-lookup"><span data-stu-id="c517f-119">If you do include LOBs, we recommend that you use the data types `varchar(max)`, `nvarchar(max)`, `varbinary(max)`, respectively.</span></span>  
  
## <a name="publication-design"></a><span data-ttu-id="c517f-120">Veröffentlichungsentwurf</span><span class="sxs-lookup"><span data-stu-id="c517f-120">Publication Design</span></span>  
  
-   <span data-ttu-id="c517f-121">Verwenden Sie einen Veröffentlichungskompatibilitätsgrad von 90RTM ([!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)] oder eine höhere Version).</span><span class="sxs-lookup"><span data-stu-id="c517f-121">Use a publication compatibility level of 90RTM ([!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)] or a later version).</span></span>  
  
     <span data-ttu-id="c517f-122">Sofern nicht mindestens ein Abonnent eine andere Version als [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]verwendet, geben Sie an, dass die Veröffentlichung nur [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)] oder eine höhere Version unterstützen muss.</span><span class="sxs-lookup"><span data-stu-id="c517f-122">Unless one or more Subscribers use a different version of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)], specify that the publication must support only [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)] or a later version.</span></span> <span data-ttu-id="c517f-123">Auf diese Weise kommt die Veröffentlichung in den Genuss der neuen Funktionen und Leistungsoptimierungen.</span><span class="sxs-lookup"><span data-stu-id="c517f-123">This allows the publication to take advantage of new features and performance optimizations.</span></span>  
  
-   <span data-ttu-id="c517f-124">Verwenden Sie geeignete Einstellungen für die Beibehaltungsdauer der Veröffentlichung.</span><span class="sxs-lookup"><span data-stu-id="c517f-124">Use appropriate publication retention settings.</span></span>  
  
     <span data-ttu-id="c517f-125">Die Beibehaltungsdauer der Veröffentlichung (also die Zeit, nach deren Ablauf das Abonnement wieder synchronisiert werden muss) bestimmt, wie lange die Nachverfolgungsmetadaten gespeichert werden.</span><span class="sxs-lookup"><span data-stu-id="c517f-125">The publication retention period, which is the maximum amount of time before a subscription must be synchronized, determines how long tracking metadata is stored.</span></span> <span data-ttu-id="c517f-126">Ein hoher Wert kann sich negativ auf die Speicher- und Verarbeitungsleistung auswirken.</span><span class="sxs-lookup"><span data-stu-id="c517f-126">A high value can affect storage and processing performance.</span></span> <span data-ttu-id="c517f-127">Weitere Informationen zum Festlegen der Beibehaltungsdauer der Veröffentlichung finden Sie unter [Subscription Expiration and Deactivation](../subscription-expiration-and-deactivation.md).</span><span class="sxs-lookup"><span data-stu-id="c517f-127">For more information about setting the publication retention period, see [Subscription Expiration and Deactivation](../subscription-expiration-and-deactivation.md).</span></span>  
  
-   <span data-ttu-id="c517f-128">Verwenden Sie herunterladbare Artikel lediglich in Tabellen, die ausschließlich auf dem Verleger geändert werden.</span><span class="sxs-lookup"><span data-stu-id="c517f-128">Use download-only articles on those tables that are only changed at the Publisher.</span></span> <span data-ttu-id="c517f-129">Weitere Informationen finden Sie unter [Optimieren der Leistung der Mergereplikation durch nur herunterladbare Artikel](../merge/optimize-merge-replication-performance-with-download-only-articles.md).</span><span class="sxs-lookup"><span data-stu-id="c517f-129">For more information, see [Optimize Merge Replication Performance with Download-Only Articles](../merge/optimize-merge-replication-performance-with-download-only-articles.md).</span></span>  
  
### <a name="filter-design-and-use"></a><span data-ttu-id="c517f-130">Filterentwurf und -verwendung</span><span class="sxs-lookup"><span data-stu-id="c517f-130">Filter Design and Use</span></span>  
  
-   <span data-ttu-id="c517f-131">Gestalten Sie Zeilenfilterklauseln nicht zu komplex.</span><span class="sxs-lookup"><span data-stu-id="c517f-131">Limit the complexity of row filter clauses.</span></span>  
  
     <span data-ttu-id="c517f-132">Je weniger komplex die Filterkriterien sind, desto höher ist die Leistung des Merge-Agents beim Auswerten von Zeilenänderungen, die an Abonnenten gesendet werden sollen.</span><span class="sxs-lookup"><span data-stu-id="c517f-132">Limiting the complexity of the filtering criteria helps improve performance when the Merge Agent is evaluating row changes to send to Subscribers.</span></span> <span data-ttu-id="c517f-133">Vermeiden Sie untergeordnete SELECT-Anweisungen innerhalb von Mergezeilenfilter-Klauseln.</span><span class="sxs-lookup"><span data-stu-id="c517f-133">Avoid using sub-selects within merge row filter clauses.</span></span> <span data-ttu-id="c517f-134">Verwenden Sie stattdessen Joinfilter, die im Allgemeinen effizienter sind, wenn Daten in einer Tabelle auf der Basis der Zeilenfilterklausel in einer anderen Tabelle partitioniert werden sollen.</span><span class="sxs-lookup"><span data-stu-id="c517f-134">Instead, consider using join filters, which are generally more efficient when used to partition data in one table based on the row filter clause in another table.</span></span> <span data-ttu-id="c517f-135">Weitere Informationen zur Filterung finden Sie unter [Filtern von veröffentlichten Daten für die Mergereplikation](../merge/filter-published-data-for-merge-replication.md).</span><span class="sxs-lookup"><span data-stu-id="c517f-135">For more information about filtering, see [Filter Published Data for Merge Replication](../merge/filter-published-data-for-merge-replication.md).</span></span>  
  
-   <span data-ttu-id="c517f-136">Verwenden Sie vorausberechnete Partitionen mit parametrisierten Filtern (diese Funktion wird standardmäßig verwendet).</span><span class="sxs-lookup"><span data-stu-id="c517f-136">Use precomputed partitions with parameterized filters (this feature is used by default).</span></span> <span data-ttu-id="c517f-137">Weitere Informationen finden Sie unter [Optimieren Parametrisierter Filter-Leistung mit Vorausberechneten Partitionen ](../merge/parameterized-filters-optimize-for-precomputed-partitions.md).</span><span class="sxs-lookup"><span data-stu-id="c517f-137">For more information, see [Optimize Parameterized Filter Performance with Precomputed Partitions](../merge/parameterized-filters-optimize-for-precomputed-partitions.md).</span></span>  
  
     <span data-ttu-id="c517f-138">Vorausberechnete Partitionen setzen dem Filterverhalten bestimmte Grenzen.</span><span class="sxs-lookup"><span data-stu-id="c517f-138">Precomputed partitions impose a number of limits on filtering behavior.</span></span> <span data-ttu-id="c517f-139">Wenn Ihre Anwendung mit diesen Grenzen nicht zurecht kommt, legen Sie für die **keep_partition_changes** -Option **True**fest. Dies führt zu einer Leistungssteigerung.</span><span class="sxs-lookup"><span data-stu-id="c517f-139">If your application cannot adhere to these limitations, set the **keep_partition_changes** option to **True**, which provides a performance benefit.</span></span> <span data-ttu-id="c517f-140">Weitere Informationen zu parametrisierten Zeilenfiltern finden Sie unter [Parametrisierte Zeilenfilter](../merge/parameterized-filters-parameterized-row-filters.md).</span><span class="sxs-lookup"><span data-stu-id="c517f-140">For more information, see [Parameterized Row Filters](../merge/parameterized-filters-parameterized-row-filters.md).</span></span>  
  
-   <span data-ttu-id="c517f-141">Verwenden Sie bei Daten, die zwar gefiltert, nicht aber von mehreren Benutzer genutzt werden sollen, Partitionen, die sich nicht überlappen.</span><span class="sxs-lookup"><span data-stu-id="c517f-141">Use nonoverlapping partitions if data is filtered but not shared among users.</span></span>  
  
     <span data-ttu-id="c517f-142">Die Replikation kann die Leistung bei Daten optimieren, die sich nicht in mehreren Partitionen befinden bzw. an mehrere Abonnements gesendet werden.</span><span class="sxs-lookup"><span data-stu-id="c517f-142">Replication can optimize performance for data that is not shared between partitions or subscriptions.</span></span> <span data-ttu-id="c517f-143">Weitere Informationen zu parametrisierten Zeilenfiltern finden Sie unter [Parametrisierte Zeilenfilter](../merge/parameterized-filters-parameterized-row-filters.md).</span><span class="sxs-lookup"><span data-stu-id="c517f-143">For more information, see [Parameterized Row Filters](../merge/parameterized-filters-parameterized-row-filters.md).</span></span>  
  
-   <span data-ttu-id="c517f-144">Erstellen Sie keine komplexen Joinfilterhierarchien.</span><span class="sxs-lookup"><span data-stu-id="c517f-144">Do not create complex join filter hierarchies.</span></span>  
  
     <span data-ttu-id="c517f-145">Joinfilter mit fünf oder mehr Tabellen können die Leistung der Mergeverarbeitung deutlich beeinträchtigen.</span><span class="sxs-lookup"><span data-stu-id="c517f-145">Join filters with five or more tables can significantly impact performance during merge processing.</span></span> <span data-ttu-id="c517f-146">Sie sollten daher bei der Generierung von Joinfiltern mit fünf oder mehr Tabellen andere Lösungen in Betracht ziehen:</span><span class="sxs-lookup"><span data-stu-id="c517f-146">We recommend that if you are generating join filters of five or more tables that you consider other solutions:</span></span>  
  
    -   <span data-ttu-id="c517f-147">Vermeiden Sie das Filtern von Tabellen, bei denen es sich in erster Linie um Nachschlagetabellen, kleinere Tabellen und Tabellen handelt, die nicht geändert werden.</span><span class="sxs-lookup"><span data-stu-id="c517f-147">Avoid filtering tables that are primarily lookup tables, smaller tables, and tables that are not subject to change.</span></span> <span data-ttu-id="c517f-148">Nehmen Sie diese Tabellen vollständig in die Veröffentlichung auf.</span><span class="sxs-lookup"><span data-stu-id="c517f-148">Make those tables part of the publication in their entirety.</span></span> <span data-ttu-id="c517f-149">Joinfilter sollten nur zwischen Tabellen verwendet werden, die zwischen Abonnenten partitioniert werden müssen.</span><span class="sxs-lookup"><span data-stu-id="c517f-149">We recommend that you use join filters only between tables that must be partitioned among Subscribers.</span></span> <span data-ttu-id="c517f-150">Weitere Informationen finden Sie unter [Join Filters](../merge/join-filters.md).</span><span class="sxs-lookup"><span data-stu-id="c517f-150">For more information, see [Join Filters](../merge/join-filters.md).</span></span>  
  
    -   <span data-ttu-id="c517f-151">Überlegen Sie, ob es nicht möglich ist, den Datenbankentwurf zu denormalisieren oder eine Zuordnungstabelle zu verwenden, wenn ein Join viele Tabellen enthält.</span><span class="sxs-lookup"><span data-stu-id="c517f-151">Consider denormalizing the database design or using a mapping table if there are a large number of tables in a join.</span></span> <span data-ttu-id="c517f-152">Wenn ein Vertriebsmitarbeiter z. B. nur die Daten für seine eigenen Kunden benötigt, für die Zuordnung eines Kunden zu einem Vertriebsmitarbeiter aber sechs Joins notwendig sind, können Sie der Kundentabelle eine Spalte hinzufügen, aus der der jeweilige Vertriebsmitarbeiter hervorgeht.</span><span class="sxs-lookup"><span data-stu-id="c517f-152">For example, if a sales person needs only the data for her customers, but it requires six joins to associate a customer with a sales person, consider adding a column to the customer table that identifies the sales person.</span></span> <span data-ttu-id="c517f-153">Die Angaben zum Vertriebsmitarbeiter sind zwar redundant, der Aufwand der Denormalisierung der Tabellen wird aber möglicherweise durch die Leistungssteigerungen bei der Replikationspartitionierung wieder wettgemacht.</span><span class="sxs-lookup"><span data-stu-id="c517f-153">The sales person data is redundant, but the costs of denormalizing the tables somewhat might be outweighed by the performance benefits for replication partitioning.</span></span>  
  
    -   <span data-ttu-id="c517f-154">Entwerfen Sie Ihre Anwendung mit Sorgfalt, um die Leistung vorausberechneter Partitionen zu verbessern, wenn in Batches vieles Datenänderungen enthalten sind.</span><span class="sxs-lookup"><span data-stu-id="c517f-154">To improve the performance of precomputed partitions when batches contain lots of data changes, design your application with care.</span></span> <span data-ttu-id="c517f-155">Stellen Sie sicher, dass die Änderungen an der übergeordneten Tabelle in einem Joinfilter vor den entsprechenden Änderungen in den untergeordneten Tabellen vorgenommen werden.</span><span class="sxs-lookup"><span data-stu-id="c517f-155">Make sure that changes to data in the parent table in a join filter are made before corresponding changes in the child tables.</span></span>  
  
-   <span data-ttu-id="c517f-156">Legen Sie, wenn es die Logik zulässt, für die **join_unique_key** -Option **1** fest.</span><span class="sxs-lookup"><span data-stu-id="c517f-156">Set the **join_unique_key** option to **1** if logic allows.</span></span>  
  
     <span data-ttu-id="c517f-157">Mit dem Wert **1** geben Sie an, dass die Beziehung zwischen der untergeordneten und der übergeordneten Tabelle in einem Joinfilter 1:1 oder 1:n ist.</span><span class="sxs-lookup"><span data-stu-id="c517f-157">Setting this parameter to **1** indicates that the relationship between the child and parent tables in a join filter is one to one or one to many.</span></span> <span data-ttu-id="c517f-158">Legen Sie für diesen Parameter aber nur dann **1** fest, wenn die verknüpfte Spalte in der untergeordneten Tabelle eine Einschränkung besitzt, die die Eindeutigkeit sicherstellt.</span><span class="sxs-lookup"><span data-stu-id="c517f-158">Only set this parameter to **1** if you have a constraint on the joining column in the child table that guarantees uniqueness.</span></span> <span data-ttu-id="c517f-159">Wenn für den Parameter fälschlicherweise **1** festgelegt wird, kann es zu einer Nichtkonvergenz der Daten kommen.</span><span class="sxs-lookup"><span data-stu-id="c517f-159">If the parameter is set to **1** incorrectly, non-convergence of data can occur.</span></span> <span data-ttu-id="c517f-160">Weitere Informationen finden Sie unter [Join Filters](../merge/join-filters.md).</span><span class="sxs-lookup"><span data-stu-id="c517f-160">For more information, see [Join Filters](../merge/join-filters.md).</span></span>  
  
-   <span data-ttu-id="c517f-161">Vermeiden Sie bei Verwendung vorausberechneter Partitionen das Ausführen von Batches mit vielen Änderungen.</span><span class="sxs-lookup"><span data-stu-id="c517f-161">Avoid executing batches with lots of changes when you use precomputed partitions.</span></span>  
  
     <span data-ttu-id="c517f-162">Wenn der Merge-Agent ausgeführt wird, nachdem Sie einen Batch mit vielen Datenänderungen ausführen, wird der große Batch vom Agent in kleinere Batches unterteilt.</span><span class="sxs-lookup"><span data-stu-id="c517f-162">When the Merge Agent is run after you run a batch that contains lots of data changes, the agent tries to divide the large batch into smaller batches.</span></span> <span data-ttu-id="c517f-163">Während dieser Zeit werden andere Merge-Agent-Prozesse möglicherweise blockiert.</span><span class="sxs-lookup"><span data-stu-id="c517f-163">During this time, other Merge Agent processes may be blocked.</span></span> <span data-ttu-id="c517f-164">Reduzieren Sie die Anzahl der Änderungen in einem Batch, und führen Sie den Merge-Agent zwischen Batches aus.</span><span class="sxs-lookup"><span data-stu-id="c517f-164">Consider reducing the number of changes in a batch and run the Merge Agent between batches.</span></span> <span data-ttu-id="c517f-165">Wenn dies nicht möglich ist, erhöhen Sie den Wert von **generation_leveling_threshold** für die Veröffentlichung.</span><span class="sxs-lookup"><span data-stu-id="c517f-165">If this cannot be done, increase the value of **generation_leveling_threshold** for the publication.</span></span>  
  
## <a name="subscription-considerations"></a><span data-ttu-id="c517f-166">Überlegungen zu Abonnements</span><span class="sxs-lookup"><span data-stu-id="c517f-166">Subscription Considerations</span></span>  
  
-   <span data-ttu-id="c517f-167">Staffeln Sie die Zeitpläne für die Synchronisierung der Abonnements.</span><span class="sxs-lookup"><span data-stu-id="c517f-167">Stagger subscription synchronization schedules.</span></span>  
  
     <span data-ttu-id="c517f-168">Wenn viele Abonnenten eine Synchronisierung mit einem Verleger ausführen, sollten Sie die Zeitpläne so staffeln, dass die Merge-Agents zu unterschiedlichen Zeiten ausgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="c517f-168">If a large number of Subscribers synchronize with a Publisher, consider staggering the schedules so that Merge Agents run at different times.</span></span> <span data-ttu-id="c517f-169">Weitere Informationen finden Sie unter [Angeben von Synchronisierungszeitplänen](../specify-synchronization-schedules.md).</span><span class="sxs-lookup"><span data-stu-id="c517f-169">For more information, see [Specify Synchronization Schedules](../specify-synchronization-schedules.md).</span></span>  
  
## <a name="merge-agent-parameters"></a><span data-ttu-id="c517f-170">Merge-Agentparameter</span><span class="sxs-lookup"><span data-stu-id="c517f-170">Merge Agent Parameters</span></span>  
 <span data-ttu-id="c517f-171">Informationen zum Merge-Agent und seinen Parametern finden Sie unter [Replication Merge Agent](../agents/replication-merge-agent.md).</span><span class="sxs-lookup"><span data-stu-id="c517f-171">For information about the Merge Agent and its parameters, see [Replication Merge Agent](../agents/replication-merge-agent.md).</span></span>  
  
-   <span data-ttu-id="c517f-172">Aktualisieren Sie alle Abonnenten für Pullabonnements auf [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)] oder eine höhere Version.</span><span class="sxs-lookup"><span data-stu-id="c517f-172">Upgrade all Subscribers for pull subscriptions to [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)] or a later version.</span></span>  
  
     <span data-ttu-id="c517f-173">Beim Aktualisieren des Abonnenten auf [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)] oder eine höhere Version wird auch der Merge-Agent aktualisiert, der von den Abonnements auf diesem Abonnenten verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="c517f-173">Upgrading the Subscriber to [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)] or a later version upgrades the Merge Agent used by the subscriptions at that Subscriber.</span></span> <span data-ttu-id="c517f-174">Dieser Merge-Agent von [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)] oder einer höheren Version ist erforderlich, um die neuen Funktionen und Leistungsoptimierungsmöglichkeiten nutzen zu können.</span><span class="sxs-lookup"><span data-stu-id="c517f-174">To take advantage of many of the new features and performance optimizations, the Merge Agent from [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)] or a later version is required.</span></span>  
  
-   <span data-ttu-id="c517f-175">Wenn ein Abonnement über eine schnelle Verbindung synchronisiert wird sowie Änderungen vom Verleger und vom Abonnenten gesendet werden, verwenden Sie für den Merge-Agent den Parameter **-ParallelUploadDownload**.</span><span class="sxs-lookup"><span data-stu-id="c517f-175">If a subscription is synchronized over a fast connection and changes are sent from the Publisher and Subscriber, use the **-ParallelUploadDownload** parameter for the Merge Agent.</span></span>  
  
     <span data-ttu-id="c517f-176">Mit [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)] wurde ein neuer Parameter für den Merge-Agent eingeführt: **-ParallelUploadDownload**.</span><span class="sxs-lookup"><span data-stu-id="c517f-176">[!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)] introduced a new Merge Agent parameter: **-ParallelUploadDownload**.</span></span> <span data-ttu-id="c517f-177">Wenn Sie diesen Parameter verwenden, kann der Merge-Agent gleichzeitig sowohl die Änderungen, die auf den Verleger hochgeladen werden, als auch die Änderungen verarbeiten, die auf den Abonnenten heruntergeladen werden.</span><span class="sxs-lookup"><span data-stu-id="c517f-177">Setting this parameter allows the Merge Agent to process in parallel the changes uploaded to the Publisher and those downloaded to the Subscriber.</span></span> <span data-ttu-id="c517f-178">Dieses Verhalten erweist sich in Umgebungen mit hohem Volumen als nützlich, die eine hohe Netzwerkbandbreite besitzen.</span><span class="sxs-lookup"><span data-stu-id="c517f-178">This is useful in high volume environments with high network bandwidth.</span></span> <span data-ttu-id="c517f-179">Agentparameter können in den Agentprofilen und in der Befehlszeile angegeben werden.</span><span class="sxs-lookup"><span data-stu-id="c517f-179">Agent parameters can be specified in agent profiles and on the command line.</span></span> <span data-ttu-id="c517f-180">Weitere Informationen finden Sie unter</span><span class="sxs-lookup"><span data-stu-id="c517f-180">For more information, see:</span></span>  
  
    -   [<span data-ttu-id="c517f-181">Arbeiten mit Replikations-Agent-Profilen</span><span class="sxs-lookup"><span data-stu-id="c517f-181">Work with Replication Agent Profiles</span></span>](../agents/replication-agent-profiles.md)  
  
    -   [<span data-ttu-id="c517f-182">Anzeigen und Ändern von Befehlszeilenparametern des Replikations-Agents &#40;SQL Server Management Studio&#41;</span><span class="sxs-lookup"><span data-stu-id="c517f-182">View and Modify Replication Agent Command Prompt Parameters &#40;SQL Server Management Studio&#41;</span></span>](../agents/view-and-modify-replication-agent-command-prompt-parameters.md)  
  
    -   [<span data-ttu-id="c517f-183">Ausführbare Konzepte für die Programmierung von Replikations-Agent</span><span class="sxs-lookup"><span data-stu-id="c517f-183">Replication Agent Executables Concepts</span></span>](../concepts/replication-agent-executables-concepts.md)  
  
-   <span data-ttu-id="c517f-184">Möglicherweise ist es ratsam, den Wert des **-MakeGenerationInterval** -Parameters zu erhöhen, insbesondere dann, wenn die Synchronisierung mehr Uploads von Abonnenten als Downloads an Abonnenten beinhaltet.</span><span class="sxs-lookup"><span data-stu-id="c517f-184">Consider increasing the value of the **-MakeGenerationInterval** parameter, especially if synchronization involves more uploads from Subscribers than downloads to Subscribers.</span></span>  
  
-   <span data-ttu-id="c517f-185">Beim Synchronisieren von Datenzeilen mit einer umfangreichen Datenmenge, z. B. Zeilen mit LOB-Spalten, kann die Websynchronisierung eine zusätzliche Speicherbelegung erfordern und die Leistung beeinträchtigen.</span><span class="sxs-lookup"><span data-stu-id="c517f-185">When you synchronize data rows with a large amount of data, such as rows with LOB columns, Web synchronization can require additional memory allocation and hurt performance.</span></span> <span data-ttu-id="c517f-186">Diese Situation tritt ein, wenn der Merge-Agent eine XML-Nachricht generiert, die zu viele Datenzeilen mit großen Datenmengen enthält.</span><span class="sxs-lookup"><span data-stu-id="c517f-186">This occurs when the Merge Agent generates an XML message that contains too many data rows with large amounts of data.</span></span> <span data-ttu-id="c517f-187">Wenn der Merge-Agent zu viele Ressourcen während der Websynchronisierung verbraucht, verringern Sie die in einer einzelnen Nachricht gesendete Anzahl der Zeilen mithilfe einer der folgenden Möglichkeiten:</span><span class="sxs-lookup"><span data-stu-id="c517f-187">If the Merge Agent is consuming too many resources during Web synchronization, reduce the number of rows sent in a single message in one of the following ways:</span></span>  
  
    -   <span data-ttu-id="c517f-188">Verwenden Sie für den Merge-Agent das Agentprofil für langsame Links.</span><span class="sxs-lookup"><span data-stu-id="c517f-188">Use the slow link agent profile for the Merge Agent.</span></span> <span data-ttu-id="c517f-189">Weitere Informationen finden Sie unter [Replication Agent Profiles](../agents/replication-agent-profiles.md).</span><span class="sxs-lookup"><span data-stu-id="c517f-189">For more information, see [Replication Agent Profiles](../agents/replication-agent-profiles.md).</span></span>  
  
    -   <span data-ttu-id="c517f-190">Verringern Sie die **- DownloadGenerationsPerBatch** - und **- UploadGenerationsPerBatch** -Parameter für den Merge-Agent auf einen Wert von 10 oder weniger.</span><span class="sxs-lookup"><span data-stu-id="c517f-190">Decrease the **-DownloadGenerationsPerBatch** and **-UploadGenerationsPerBatch** parameters for the Merge Agent to a value of 10 or less.</span></span> <span data-ttu-id="c517f-191">Der Standardwert für diese Parameter beträgt 50.</span><span class="sxs-lookup"><span data-stu-id="c517f-191">The default value of these parameters is 50.</span></span>  
  
## <a name="snapshot-considerations"></a><span data-ttu-id="c517f-192">Überlegungen zu Momentaufnahmen</span><span class="sxs-lookup"><span data-stu-id="c517f-192">Snapshot Considerations</span></span>  
  
-   <span data-ttu-id="c517f-193">Erstellen Sie in großen Tabellen eine ROWGUIDCOL-Spalte, bevor Sie die Anfangsmomentaufnahme generieren.</span><span class="sxs-lookup"><span data-stu-id="c517f-193">Create a ROWGUIDCOL column on large tables prior to generating the initial snapshot.</span></span>  
  
     <span data-ttu-id="c517f-194">Bei der Mergereplikation benötigt jede veröffentlichte Tabelle eine ROWGUIDCOL-Spalte.</span><span class="sxs-lookup"><span data-stu-id="c517f-194">Merge replication requires that each published table have a ROWGUIDCOL column.</span></span> <span data-ttu-id="c517f-195">Falls keine ROWGUIDCOL-Spalte in der Tabelle enthalten ist, bevor der Momentaufnahme-Agent die Anfangsmomentaufnahmedateien erstellt, muss der Agent zunächst die ROWGUIDCOL-Spalte hinzufügen und auffüllen.</span><span class="sxs-lookup"><span data-stu-id="c517f-195">If a ROWGUIDCOL column does not exist in the table before the Snapshot Agent creates the initial snapshot files, the agent must first add and populate the ROWGUIDCOL column.</span></span> <span data-ttu-id="c517f-196">Im Sinne einer Leistungssteigerung bei der Generierung von Momentaufnahmen während der Mergereplikation sollten Sie daher vor dem Veröffentlichen für jede Tabelle eine ROWGUIDCOL-Spalte erstellen.</span><span class="sxs-lookup"><span data-stu-id="c517f-196">To gain a performance advantage when generating snapshots during merge replication, create the ROWGUIDCOL column on each table before publishing.</span></span> <span data-ttu-id="c517f-197">Die Spalte kann einen beliebigen Namen aufweisen (der Momentaufnahme-Agent verwendet standardmäßig**rowguid** ), muss jedoch die folgenden Datentypmerkmale besitzen:</span><span class="sxs-lookup"><span data-stu-id="c517f-197">The column can have any name (**rowguid** is used by the Snapshot Agent by default), but must have the following data type characteristics:</span></span>  
  
    -   <span data-ttu-id="c517f-198">Der Datentyp muss UNIQUEIDENTIFIER sein.</span><span class="sxs-lookup"><span data-stu-id="c517f-198">A data type of UNIQUEIDENTIFIER.</span></span>  
  
    -   <span data-ttu-id="c517f-199">Der Standardwert muss NEWSEQUENTIALID() oder NEWID() lauten.</span><span class="sxs-lookup"><span data-stu-id="c517f-199">A default of NEWSEQUENTIALID() or NEWID().</span></span> <span data-ttu-id="c517f-200">NEWSEQUENTIALID() ermöglicht eine höhere Leistung beim Ausführen und Nachverfolgen von Änderungen und wird daher empfohlen.</span><span class="sxs-lookup"><span data-stu-id="c517f-200">NEWSEQUENTIALID() is recommended because it can provide increased performance when making and tracking changes.</span></span>  
  
    -   <span data-ttu-id="c517f-201">Die ROWGUIDCOL-Eigenschaft muss festgelegt werden.</span><span class="sxs-lookup"><span data-stu-id="c517f-201">The ROWGUIDCOL property set.</span></span>  
  
    -   <span data-ttu-id="c517f-202">Die Spalte muss über einen eindeutigen Index verfügen.</span><span class="sxs-lookup"><span data-stu-id="c517f-202">A unique index on the column.</span></span>  
  
-   <span data-ttu-id="c517f-203">Generieren Sie vorab Momentaufnahmen, und/oder ermöglichen Sie es den Abonnenten, beim ersten Synchronisieren die Momentaufnahmegenerierung und -anwendung anzufordern.</span><span class="sxs-lookup"><span data-stu-id="c517f-203">Pre-generate snapshots and/or allow Subscribers to request snapshot generation and application the first time they synchronize.</span></span>  
  
     <span data-ttu-id="c517f-204">Verwenden Sie eine oder beide dieser Optionen, um Momentaufnahmen für Veröffentlichungen bereitzustellen, die parametrisierte Filter verwenden.</span><span class="sxs-lookup"><span data-stu-id="c517f-204">Use one or both of these options to provide snapshots for publications that use parameterized filters.</span></span> <span data-ttu-id="c517f-205">Wenn Sie keine dieser beiden Optionen angeben, werden die Abonnements mit einer Reihe von SELECT- und INSERT-Anweisungen statt mit dem **bcp** -Hilfsprogramm initialisiert, wodurch sich der Prozess deutlich verlangsamt.</span><span class="sxs-lookup"><span data-stu-id="c517f-205">If you do not specify one of these options, subscriptions are initialized using a series of SELECT and INSERT statements, rather than using the **bcp** utility; this process is much slower.</span></span> <span data-ttu-id="c517f-206">Weitere Informationen finden Sie unter [Snapshots for Merge Publications with Parameterized Filters](../snapshots-for-merge-publications-with-parameterized-filters.md).</span><span class="sxs-lookup"><span data-stu-id="c517f-206">For more information, see [Snapshots for Merge Publications with Parameterized Filters](../snapshots-for-merge-publications-with-parameterized-filters.md).</span></span>  
  
## <a name="maintenance-and-monitoring-considerations"></a><span data-ttu-id="c517f-207">Überlegungen zur Wartung und Überwachung</span><span class="sxs-lookup"><span data-stu-id="c517f-207">Maintenance and Monitoring Considerations</span></span>  
  
-   <span data-ttu-id="c517f-208">Indizieren Sie die Systemtabellen für die Mergereplikation von Zeit zu Zeit neu.</span><span class="sxs-lookup"><span data-stu-id="c517f-208">Occasionally re-index merge replication system tables.</span></span>  
  
     <span data-ttu-id="c517f-209">Als Teil der Wartung für die Mergereplikation überprüfen Sie gelegentlich die Vergrößerung der Systemtabellen, die mit der Mergereplikation verbunden sind: **MSmerge_contents**, **MSmerge_genhistory**, **MSmerge_tombstone**, **MSmerge_current_partition_mappings**und **MSmerge_past_partition_mappings**.</span><span class="sxs-lookup"><span data-stu-id="c517f-209">As part of maintenance for merge replication, occasionally check the growth of the system tables associated with merge replication: **MSmerge_contents**, **MSmerge_genhistory**, and **MSmerge_tombstone**, **MSmerge_current_partition_mappings**, and **MSmerge_past_partition_mappings**.</span></span> <span data-ttu-id="c517f-210">Führen Sie eine regelmäßige Neuindizierung dieser Tabellen durch.</span><span class="sxs-lookup"><span data-stu-id="c517f-210">Periodically re-index these tables.</span></span> <span data-ttu-id="c517f-211">Weitere Informationen finden Sie unter [Neuorganisieren und Neuerstellen von Indizes](../../indexes/reorganize-and-rebuild-indexes.md).</span><span class="sxs-lookup"><span data-stu-id="c517f-211">For more information, see [Reorganize and Rebuild Indexes](../../indexes/reorganize-and-rebuild-indexes.md).</span></span>  
  
-   <span data-ttu-id="c517f-212">Überwachen Sie mithilfe der Registerkarte **Synchronisierungsverlauf** im Replikationsmonitor die Synchronisierungsleistung.</span><span class="sxs-lookup"><span data-stu-id="c517f-212">Monitor synchronization performance using the **Synchronization History** tab in Replication Monitor.</span></span>  
  
     <span data-ttu-id="c517f-213">Bei Mergereplikationen zeigt der Replikationsmonitor auf der Registerkarte **Synchronisierungsverlauf** detaillierte Statistiken für alle Artikel an, die während einer Synchronisierung verarbeitet werden. So lässt sich diesen Statistiken z. B. die Länge der einzelnen Verarbeitungsphasen (Hochladen von Änderungen, Herunterladen von Änderungen usw.) entnehmen.</span><span class="sxs-lookup"><span data-stu-id="c517f-213">For merge replication, Replication Monitor displays detailed statistics in the **Synchronization History** tab for each article processed during synchronization, including the amount of time spent in each processing phase (uploading changes, downloading changes, and so on).</span></span> <span data-ttu-id="c517f-214">Auf diese Weise können Sie besser die Tabellen identifizieren, die zu einer Verlangsamung führen, und Sie können hier auch hervorragend Leistungsprobleme im Zusammenhang mit Mergeabonnements diagnostizieren.</span><span class="sxs-lookup"><span data-stu-id="c517f-214">It can help pinpoint specific tables that are causing slow downs and is the best place to troubleshoot performance issues with merge subscriptions.</span></span> <span data-ttu-id="c517f-215">Weitere Informationen zum Anzeigen detaillierten Statistiken finden Sie unter [View Information and Perform Tasks using Replication Monitor (Anzeigen von Informationen und Ausführen von Aufgaben mit dem Replikationsmonitor)](../monitor/view-information-and-perform-tasks-replication-monitor.md).</span><span class="sxs-lookup"><span data-stu-id="c517f-215">For more information on viewing detailed statistics, see [View Information and Perform Tasks using Replication Monitor](../monitor/view-information-and-perform-tasks-replication-monitor.md).</span></span>  
  
  
