---
title: Übermitteln einer Momentaufnahme über FTP | Microsoft-Dokumentation
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: replication
ms.topic: conceptual
helpviewer_keywords:
- snapshots [SQL Server replication], FTP snapshots
- FTP snapshots [SQL Server replication]
- snapshot replication [SQL Server], FTP
ms.assetid: 99872c4f-40ce-4405-8fd4-44052d3bd827
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: 2e6700e6989a5a7e32202a0710bc663978a136cf
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 08/04/2020
ms.locfileid: "87609817"
---
# <a name="deliver-a-snapshot-through-ftp"></a><span data-ttu-id="d4e59-102">Übermitteln einer Momentaufnahme über FTP</span><span class="sxs-lookup"><span data-stu-id="d4e59-102">Deliver a Snapshot Through FTP</span></span>
  <span data-ttu-id="d4e59-103">In diesem Thema wird beschrieben, wie in [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)] mithilfe von [!INCLUDE[ssManStudioFull](../../../includes/ssmanstudiofull-md.md)] oder [!INCLUDE[tsql](../../../includes/tsql-md.md)]eine Momentaufnahme über FTP bereitgestellt wird.</span><span class="sxs-lookup"><span data-stu-id="d4e59-103">This topic describes how to deliver a snapshot through FTP in [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)] by using [!INCLUDE[ssManStudioFull](../../../includes/ssmanstudiofull-md.md)] or [!INCLUDE[tsql](../../../includes/tsql-md.md)].</span></span>  
  
##  <a name="limitations-and-restrictions"></a><a name="Restrictions"></a> <span data-ttu-id="d4e59-104">Einschränkungen</span><span class="sxs-lookup"><span data-stu-id="d4e59-104">Limitations and Restrictions</span></span>  
  
-   <span data-ttu-id="d4e59-105">Der Momentaufnahme-Agent muss Schreibberechtigungen für das angegebene Verzeichnis und der Verteilungs-Agent oder Merge-Agent muss Leseberechtigungen besitzen.</span><span class="sxs-lookup"><span data-stu-id="d4e59-105">The Snapshot Agent must have write permissions for the directory you specify, and the Distribution Agent or Merge Agent must have read permissions.</span></span> <span data-ttu-id="d4e59-106">Bei Verwendung von Pullabonnements müssen Sie ein freigegebenes Verzeichnis als UNC-Pfad angeben, wie z.B. \\\ftpserver\home\snapshots.</span><span class="sxs-lookup"><span data-stu-id="d4e59-106">If pull subscriptions are used, you must specify a shared directory as a universal naming convention (UNC) path, such as \\\ftpserver\home\snapshots.</span></span> <span data-ttu-id="d4e59-107">Weitere Informationen finden Sie unter [Schützen des Momentaufnahmeordners](../security/secure-the-snapshot-folder.md).</span><span class="sxs-lookup"><span data-stu-id="d4e59-107">For more information, see [Secure the Snapshot Folder](../security/secure-the-snapshot-folder.md).</span></span>  
  
###  <a name="prerequisites"></a><a name="Prerequisites"></a> <span data-ttu-id="d4e59-108">Voraussetzungen</span><span class="sxs-lookup"><span data-stu-id="d4e59-108">Prerequisites</span></span>  
  
-   <span data-ttu-id="d4e59-109">Zum Übertragen von Momentaufnahmedateien über FTP (File Transfer Protocol) müssen Sie zuerst einen FTP-Server konfigurieren.</span><span class="sxs-lookup"><span data-stu-id="d4e59-109">To transfer snapshot files using File Transfer Protocol (FTP), you must first configure an FTP server.</span></span> <span data-ttu-id="d4e59-110">Weitere Informationen finden Sie in der Dokumentation zu den [!INCLUDE[msCoName](../../../includes/msconame-md.md)] Internetinformationsdiensten (IIS).</span><span class="sxs-lookup"><span data-stu-id="d4e59-110">For more information, see the [!INCLUDE[msCoName](../../../includes/msconame-md.md)] Internet Information Services (IIS) documentation.</span></span>  
  
###  <a name="security"></a><a name="Security"></a> <span data-ttu-id="d4e59-111">Sicherheit</span><span class="sxs-lookup"><span data-stu-id="d4e59-111">Security</span></span>  
 <span data-ttu-id="d4e59-112">Implementieren Sie ein virtuelles privates Netzwerk (VPN), wenn Sie FTP-Momentaufnahmeübermittlung über das Internet verwenden, um die Sicherheit zu verbessern.</span><span class="sxs-lookup"><span data-stu-id="d4e59-112">To help improve security, we recommend that you implement a virtual private network (VPN) when using FTP snapshot delivery over the Internet.</span></span> <span data-ttu-id="d4e59-113">Weitere Informationen finden Sie unter [Veröffentlichen von Daten über das Internet mithilfe von VPN](../publish-data-over-the-internet-using-vpn.md).</span><span class="sxs-lookup"><span data-stu-id="d4e59-113">For more information, see [Publish Data over the Internet Using VPN](../publish-data-over-the-internet-using-vpn.md).</span></span>  
  
 <span data-ttu-id="d4e59-114">Lassen Sie als bewährte Sicherheitsmethode keine anonymen Anmeldungen am FTP-Server zu.</span><span class="sxs-lookup"><span data-stu-id="d4e59-114">As a security best practice, do not allow anonymous logins to the FTP server.</span></span> <span data-ttu-id="d4e59-115">Der Momentaufnahme-Agent muss Schreibberechtigungen für das angegebene Verzeichnis und der Verteilungs-Agent oder Merge-Agent muss Leseberechtigungen besitzen.</span><span class="sxs-lookup"><span data-stu-id="d4e59-115">The Snapshot Agent must have write permissions for the directory you specify, and the Distribution Agent or Merge Agent must have read permissions.</span></span> <span data-ttu-id="d4e59-116">Bei Verwendung von Pullabonnements müssen Sie ein freigegebenes Verzeichnis als UNC-Pfad angeben, wie z.B. \\\ftpserver\home\snapshots.</span><span class="sxs-lookup"><span data-stu-id="d4e59-116">If pull subscriptions are used, you must specify a shared directory as a universal naming convention (UNC) path, such as \\\ftpserver\home\snapshots.</span></span> <span data-ttu-id="d4e59-117">Weitere Informationen finden Sie unter [Schützen des Momentaufnahmeordners](../security/secure-the-snapshot-folder.md).</span><span class="sxs-lookup"><span data-stu-id="d4e59-117">For more information, see [Secure the Snapshot Folder](../security/secure-the-snapshot-folder.md).</span></span>  
  
 <span data-ttu-id="d4e59-118">Die Benutzer sollten nach Möglichkeit während der Laufzeit zur Eingabe von Anmeldeinformationen aufgefordert werden.</span><span class="sxs-lookup"><span data-stu-id="d4e59-118">When possible, prompt users to enter their credentials at runtime.</span></span> <span data-ttu-id="d4e59-119">Wenn Anmeldeinformationen in einer Skriptdatei gespeichert werden, müssen Sie sicherstellen, dass die Datei geschützt ist.</span><span class="sxs-lookup"><span data-stu-id="d4e59-119">If you store credentials in a script file, you must secure the file.</span></span>  
  
##  <a name="using-sql-server-management-studio"></a><a name="SSMSProcedure"></a> <span data-ttu-id="d4e59-120">Verwenden von SQL Server Management Studio</span><span class="sxs-lookup"><span data-stu-id="d4e59-120">Using SQL Server Management Studio</span></span>  
 <span data-ttu-id="d4e59-121">Geben Sie nach dem Konfigurieren des FTP-Servers im Dialogfeld **Veröffentlichungseigenschaften \<Publication>** ein Verzeichnis und Sicherheitsinformationen für diesen Server an.</span><span class="sxs-lookup"><span data-stu-id="d4e59-121">After the FTP server is configured, specify directory and security information for this server in the **Publication Properties \<Publication>** dialog box.</span></span> <span data-ttu-id="d4e59-122">Weitere Informationen zum Zugreifen auf dieses Dialogfeld finden Sie unter [View and Modify Publication Properties](view-and-modify-publication-properties.md).</span><span class="sxs-lookup"><span data-stu-id="d4e59-122">For more information about accessing this dialog box, see [View and Modify Publication Properties](view-and-modify-publication-properties.md).</span></span>  
  
#### <a name="to-specify-ftp-information"></a><span data-ttu-id="d4e59-123">So geben Sie FTP-Informationen an</span><span class="sxs-lookup"><span data-stu-id="d4e59-123">To specify FTP information</span></span>  
  
1.  <span data-ttu-id="d4e59-124">Aktivieren Sie im Dialogfeld **Veröffentlichungseigenschaften – \<Publication>** die Option **Abonnenten das Herunterladen von Momentaufnahmedateien über FTP (File Transfer Protocol) ermöglichen** auf einer der folgenden Seiten:</span><span class="sxs-lookup"><span data-stu-id="d4e59-124">In the **Publication Properties - \<Publication>** dialog box, select **Allow Subscribers to download snapshot files using FTP** from one of the following pages:</span></span>   
    -   <span data-ttu-id="d4e59-125">Seite **FTP-Momentaufnahme** für Momentaufnahmen- und Transaktionsveröffentlichungen sowie Mergeveröffentlichungen für Verleger, auf denen niedrigere Versionen als [!INCLUDE[msCoName](../../../includes/msconame-md.md)] [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)] ausgeführt werden</span><span class="sxs-lookup"><span data-stu-id="d4e59-125">The **FTP Snapshot** page, for snapshot and transactional publications, and merge publications for Publishers running versions prior to [!INCLUDE[msCoName](../../../includes/msconame-md.md)] [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)].</span></span>    
    -   <span data-ttu-id="d4e59-126">Der Seite **FTP-Momentaufnahme und Internet** , für Mergeveröffentlichungen von Verlegern, auf denen [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)] oder höher ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="d4e59-126">The **FTP Snapshot and Internet** page, for merge publications from Publishers running [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)] or later.</span></span>    
2.  <span data-ttu-id="d4e59-127">Geben Sie Werte für **FTP-Servername**, **Portnummer**, **Pfad des FTP-Stammordners**, **Anmeldename**und **Kennwort**an.</span><span class="sxs-lookup"><span data-stu-id="d4e59-127">Specify values for **FTP server name**, **Port number**, **Path from the FTP root folder**, **Login**, and **Password**.</span></span>    
     <span data-ttu-id="d4e59-128">Wenn beispielsweise der FTP-Stammordner \\\ftpserver\home lautet und Momentaufnahmen in \\\ftpserver\home\snapshots gespeichert werden sollen, geben Sie \snapshots\ftp für die Eigenschaft **Pfad des FTP-Stammordners** an (von der Replikation wird beim Erstellen der Momentaufnahmedateien „ftp“ an den Pfad des Momentaufnahmeordners angehängt).</span><span class="sxs-lookup"><span data-stu-id="d4e59-128">For example, if the FTP server root is \\\ftpserver\home and you want snapshots to be stored at \\\ftpserver\home\snapshots, specify \snapshots\ftp for the property **Path from the FTP root folder** (replication appends 'ftp' to the snapshot folder path when it creates snapshot files).</span></span>    
3.  <span data-ttu-id="d4e59-129">Geben Sie an, dass der Momentaufnahme-Agent die Momentaufnahmedateien in das in Schritt 2 angegebene Verzeichnis schreiben soll.</span><span class="sxs-lookup"><span data-stu-id="d4e59-129">Specify that the Snapshot Agent should write the snapshot files to the directory specified in step 2.</span></span> <span data-ttu-id="d4e59-130">Wenn der Momentaufnahme-Agent beispielsweise die Momentaufnahmedateien in das Verzeichnis \\\ftpserver\home\snapshots\ftp schreiben soll, müssen Sie den Pfad \\\ftpserver\home\snapshots an einer von zwei Stellen angeben:</span><span class="sxs-lookup"><span data-stu-id="d4e59-130">For example, to have the Snapshot Agent write the snapshot files to \\\ftpserver\home\snapshots\ftp, you must specify the path \\\ftpserver\home\snapshots in one of two places:</span></span>    
    -   <span data-ttu-id="d4e59-131">Dem Standardspeicherort für Momentaufnahmen für den Verteiler, dem diese Veröffentlichung zugeordnet ist.</span><span class="sxs-lookup"><span data-stu-id="d4e59-131">The default snapshot location for the Distributor associated with this publication.</span></span>    
         <span data-ttu-id="d4e59-132">Weitere Informationen zum Angeben des standardmäßigen Momentaufnahme Speicher Orts finden Sie unter [angeben des standardmäßigen Momentaufnahme Speicher Orts](../snapshot-options.md#snapshot-folder-locations).</span><span class="sxs-lookup"><span data-stu-id="d4e59-132">For more information about specifying the default snapshot location, see [Specify the Default Snapshot Location](../snapshot-options.md#snapshot-folder-locations).</span></span>    
    -   <span data-ttu-id="d4e59-133">Einem alternativen Speicherort für den Momentaufnahmeordner für diese Veröffentlichung.</span><span class="sxs-lookup"><span data-stu-id="d4e59-133">An alternate snapshot folder location for this publication.</span></span> <span data-ttu-id="d4e59-134">Ein alternativer Speicherort ist erforderlich, wenn die Momentaufnahme komprimiert wird.</span><span class="sxs-lookup"><span data-stu-id="d4e59-134">An alternate location is required if the snapshot is compressed.</span></span>    
         <span data-ttu-id="d4e59-135">Geben Sie auf der Seite Momentaufnahme des Dialog Felds \*\*Veröffentlichungs Eigenschaften- \<Publication> \*\* den Pfad in das Textfeld **Dateien im folgenden Ordner** speichern ein.</span><span class="sxs-lookup"><span data-stu-id="d4e59-135">Enter the path in the **Put files in the following folder** textbox on the Snapshot page of the **Publication Properties - \<Publication>** dialog box.</span></span>   
4.  [!INCLUDE[clickOK](../../../includes/clickok-md.md)]  
  
##  <a name="using-transact-sql"></a><a name="TsqlProcedure"></a> <span data-ttu-id="d4e59-136">Verwenden von Transact-SQL</span><span class="sxs-lookup"><span data-stu-id="d4e59-136">Using Transact-SQL</span></span>  
 <span data-ttu-id="d4e59-137">Die Option, Momentaufnahmedateien auf einem FTP-Server verfügbar zu machen, und die entsprechenden FTP-Einstellungen können mithilfe gespeicherter Replikationsprozeduren programmgesteuert festgelegt und geändert werden.</span><span class="sxs-lookup"><span data-stu-id="d4e59-137">The option to make snapshot files available on an FTP server can be set and these FTP settings can be modified programmatically using replication stored procedures.</span></span> <span data-ttu-id="d4e59-138">Welche Prozedur verwendet wird, hängt vom Typ der Veröffentlichung ab.</span><span class="sxs-lookup"><span data-stu-id="d4e59-138">The procedure used depends on the type of publication.</span></span> <span data-ttu-id="d4e59-139">FTP-Momentaufnahmeübermittlung wird nur bei Pullabonnements verwendet.</span><span class="sxs-lookup"><span data-stu-id="d4e59-139">FTP snapshot delivery is only used with pull subscriptions.</span></span>  
  
#### <a name="to-enable-ftp-snapshot-delivery-for-a-snapshot-or-transactional-publication"></a><span data-ttu-id="d4e59-140">So aktivieren Sie die FTP-Momentaufnahmeübermittlung für eine Momentaufnahme- oder Transaktionsveröffentlichung</span><span class="sxs-lookup"><span data-stu-id="d4e59-140">To enable FTP snapshot delivery for a snapshot or transactional publication</span></span>  
  
1.  <span data-ttu-id="d4e59-141">Führen Sie auf dem Verleger für die Veröffentlichungsdatenbank [sp_addpublication](/sql/relational-databases/system-stored-procedures/sp-addpublication-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="d4e59-141">At the Publisher on the publication database, execute [sp_addpublication](/sql/relational-databases/system-stored-procedures/sp-addpublication-transact-sql).</span></span> <span data-ttu-id="d4e59-142">Geben Sie **@publication** , den Wert `true` für **@enabled_for_internet** und entsprechende Werte für die folgenden Parameter an:</span><span class="sxs-lookup"><span data-stu-id="d4e59-142">Specify **@publication**, a value of `true` for **@enabled_for_internet**, and appropriate values for the following parameters:</span></span>    
    -   <span data-ttu-id="d4e59-143">**@ftp_address**: die Adresse des FTP-Servers, der zum übermitteln der Momentaufnahme verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="d4e59-143">**@ftp_address** - the address of the FTP server used to deliver the snapshot.</span></span>    
    -   <span data-ttu-id="d4e59-144">(Optional) **@ftp_port** : der vom FTP-Server verwendete Port.</span><span class="sxs-lookup"><span data-stu-id="d4e59-144">(Optional) **@ftp_port** - the port used by the FTP server.</span></span>    
    -   <span data-ttu-id="d4e59-145">(Optional) **@ftp_subdirectory** : das Unterverzeichnis des FTP-Standardverzeichnisses, das einem FTP-Anmelde Namen zugewiesen ist.</span><span class="sxs-lookup"><span data-stu-id="d4e59-145">(Optional) **@ftp_subdirectory** - the subdirectory of the default FTP directory assigned to an FTP login.</span></span> <span data-ttu-id="d4e59-146">Wenn der FTP-Server Stamm z. b. \\ \ftpserver\home lautet und Momentaufnahmen unter \\ \ftpserver\home\snapshot gespeichert werden sollen, geben Sie **\snapshoz\ftp** für an **@ftp_subdirectory** (beim Erstellen von Momentaufnahme Dateien wird "FTP" an den Pfad des Momentaufnahme Ordners angehängt).</span><span class="sxs-lookup"><span data-stu-id="d4e59-146">For example, if the FTP server root is \\\ftpserver\home and you want snapshots to be stored at \\\ftpserver\home\snapshots, specify **\snapshots\ftp** for **@ftp_subdirectory** (replication appends 'ftp' to the snapshot folder path when it creates snapshot files).</span></span>    
    -   <span data-ttu-id="d4e59-147">(Optional) **@ftp_login** : ein Anmelde Konto, das beim Herstellen einer Verbindung mit dem FTP-Server verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="d4e59-147">(Optional) **@ftp_login** - a login account used when connecting to the FTP server.</span></span>    
    -   <span data-ttu-id="d4e59-148">(Optional) **@ftp_password** : das Kennwort für die FTP-Anmeldung.</span><span class="sxs-lookup"><span data-stu-id="d4e59-148">(Optional) **@ftp_password** - the password for the FTP login.</span></span>  
  
     <span data-ttu-id="d4e59-149">Dadurch wird eine Veröffentlichung erstellt, die FTP verwendet.</span><span class="sxs-lookup"><span data-stu-id="d4e59-149">This creates a publication that uses FTP.</span></span> <span data-ttu-id="d4e59-150">Weitere Informationen finden Sie unter [Create a Publication](create-a-publication.md).</span><span class="sxs-lookup"><span data-stu-id="d4e59-150">For more information, see [Create a Publication](create-a-publication.md).</span></span>  
  
#### <a name="to-enable-ftp-snapshot-delivery-for-a-merge-publication"></a><span data-ttu-id="d4e59-151">So aktivieren Sie die FTP-Momentaufnahmeübermittlung für eine Mergeveröffentlichung</span><span class="sxs-lookup"><span data-stu-id="d4e59-151">To enable FTP snapshot delivery for a merge publication</span></span>  
  
1.  <span data-ttu-id="d4e59-152">Führen Sie auf dem Verleger für die Veröffentlichungsdatenbank [sp_addmergepublication](/sql/relational-databases/system-stored-procedures/sp-addmergepublication-transact-sql)aus.</span><span class="sxs-lookup"><span data-stu-id="d4e59-152">At the Publisher on the publication database, execute [sp_addmergepublication](/sql/relational-databases/system-stored-procedures/sp-addmergepublication-transact-sql).</span></span> <span data-ttu-id="d4e59-153">Geben Sie **@publication** , den Wert `true` für **@enabled_for_internet** und entsprechende Werte für die folgenden Parameter an:</span><span class="sxs-lookup"><span data-stu-id="d4e59-153">Specify **@publication**, a value of `true` for **@enabled_for_internet** and appropriate values for the following parameters:</span></span>  
  
    -   <span data-ttu-id="d4e59-154">**@ftp_address**: die Adresse des FTP-Servers, der zum übermitteln der Momentaufnahme verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="d4e59-154">**@ftp_address** - the address of the FTP server used to deliver the snapshot.</span></span>    
    -   <span data-ttu-id="d4e59-155">(Optional) **@ftp_port** : der vom FTP-Server verwendete Port.</span><span class="sxs-lookup"><span data-stu-id="d4e59-155">(Optional) **@ftp_port** - the port used by the FTP server.</span></span>    
    -   <span data-ttu-id="d4e59-156">(Optional) **@ftp_subdirectory** : das Unterverzeichnis des FTP-Standardverzeichnisses, das einem FTP-Anmelde Namen zugewiesen ist.</span><span class="sxs-lookup"><span data-stu-id="d4e59-156">(Optional) **@ftp_subdirectory** - the subdirectory of the default FTP directory assigned to an FTP login.</span></span> <span data-ttu-id="d4e59-157">Wenn der FTP-Server Stamm z. b. \\ \ftpserver\home lautet und Momentaufnahmen unter \\ \ftpserver\home\snapshot gespeichert werden sollen, geben Sie **\snapshoz\ftp** für an **@ftp_subdirectory** (beim Erstellen von Momentaufnahme Dateien wird "FTP" an den Pfad des Momentaufnahme Ordners angehängt).</span><span class="sxs-lookup"><span data-stu-id="d4e59-157">For example, if the FTP server root is \\\ftpserver\home and you want snapshots to be stored at \\\ftpserver\home\snapshots, specify **\snapshots\ftp** for **@ftp_subdirectory** (replication appends 'ftp' to the snapshot folder path when it creates snapshot files).</span></span>    
    -   <span data-ttu-id="d4e59-158">(Optional) **@ftp_login** : ein Anmelde Konto, das beim Herstellen einer Verbindung mit dem FTP-Server verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="d4e59-158">(Optional) **@ftp_login** - a login account used when connecting to the FTP server.</span></span>    
    -   <span data-ttu-id="d4e59-159">(Optional) **@ftp_password** : das Kennwort für die FTP-Anmeldung.</span><span class="sxs-lookup"><span data-stu-id="d4e59-159">(Optional) **@ftp_password** - the password for the FTP login.</span></span>  
  
     <span data-ttu-id="d4e59-160">Dadurch wird eine Veröffentlichung erstellt, die FTP verwendet.</span><span class="sxs-lookup"><span data-stu-id="d4e59-160">This creates a publication that uses FTP.</span></span> <span data-ttu-id="d4e59-161">Weitere Informationen finden Sie unter [Create a Publication](create-a-publication.md).</span><span class="sxs-lookup"><span data-stu-id="d4e59-161">For more information, see [Create a Publication](create-a-publication.md).</span></span>  
  
#### <a name="to-create-a-pull-subscription-to-a-snapshot-or-transactional-publication-that-uses-ftp-snapshot-delivery"></a><span data-ttu-id="d4e59-162">So erstellen Sie ein Pullabonnement für eine Momentaufnahme- oder Transaktionsveröffentlichung, die FTP-Snapshotübermittlung verwendet</span><span class="sxs-lookup"><span data-stu-id="d4e59-162">To create a pull subscription to a snapshot or transactional publication that uses FTP snapshot delivery</span></span>  
  
1.  <span data-ttu-id="d4e59-163">Führen Sie auf dem Abonnenten für die Abonnementdatenbank [sp_addpullsubscription](/sql/relational-databases/system-stored-procedures/sp-addpullsubscription-transact-sql)aus.</span><span class="sxs-lookup"><span data-stu-id="d4e59-163">At the Subscriber on the subscription database, execute [sp_addpullsubscription](/sql/relational-databases/system-stored-procedures/sp-addpullsubscription-transact-sql).</span></span> <span data-ttu-id="d4e59-164">Geben Sie **@publisher** und an **@publication** .</span><span class="sxs-lookup"><span data-stu-id="d4e59-164">Specify **@publisher** and **@publication**.</span></span>  
  
    -   <span data-ttu-id="d4e59-165">Führen Sie auf dem Abonnenten für die Abonnementdatenbank [sp_addpullsubscription_agent](/sql/relational-databases/system-stored-procedures/sp-addpullsubscription-agent-transact-sql)aus.</span><span class="sxs-lookup"><span data-stu-id="d4e59-165">At the Subscriber on the subscription database, execute [sp_addpullsubscription_agent](/sql/relational-databases/system-stored-procedures/sp-addpullsubscription-agent-transact-sql).</span></span> <span data-ttu-id="d4e59-166">Geben Sie **@publisher** , **@publisher_db** , **@publication** , die [!INCLUDE[msCoName](../../../includes/msconame-md.md)] Windows-Anmelde Informationen, unter denen die Verteilungs-Agent auf dem Abonnenten ausgeführt wird, für **@job_login** und und den **@job_password** Wert für an `true` **@use_ftp** .</span><span class="sxs-lookup"><span data-stu-id="d4e59-166">Specify **@publisher**, **@publisher_db**, **@publication**, the [!INCLUDE[msCoName](../../../includes/msconame-md.md)] Windows credentials under which the Distribution Agent at the Subscriber runs for **@job_login** and **@job_password**, and a value of `true` for **@use_ftp**.</span></span>  
  
2.  <span data-ttu-id="d4e59-167">Führen Sie auf dem Verleger für die Veröffentlichungsdatenbank [sp_addsubscription](/sql/relational-databases/system-stored-procedures/sp-addsubscription-transact-sql) aus, um das Pullabonnement zu registrieren.</span><span class="sxs-lookup"><span data-stu-id="d4e59-167">At the Publisher on the publication database, execute [sp_addsubscription](/sql/relational-databases/system-stored-procedures/sp-addsubscription-transact-sql) to register the pull subscription.</span></span> <span data-ttu-id="d4e59-168">Weitere Informationen finden Sie unter [Create a Pull Subscription](../create-a-pull-subscription.md).</span><span class="sxs-lookup"><span data-stu-id="d4e59-168">For more information, see [Create a Pull Subscription](../create-a-pull-subscription.md).</span></span>  
  
#### <a name="to-create-a-pull-subscription-to-a-merge-publication-that-uses-ftp-snapshot-delivery"></a><span data-ttu-id="d4e59-169">So erstellen Sie ein Pullabonnement für eine Mergeveröffentlichung, die FTP-Momentaufnahmeübermittlung verwendet</span><span class="sxs-lookup"><span data-stu-id="d4e59-169">To create a pull subscription to a merge publication that uses FTP snapshot delivery</span></span>  
  
1.  <span data-ttu-id="d4e59-170">Führen Sie auf dem Abonnenten für die Abonnementdatenbank [sp_addmergepullsubscription](/sql/relational-databases/system-stored-procedures/sp-addmergepullsubscription-transact-sql)aus.</span><span class="sxs-lookup"><span data-stu-id="d4e59-170">At the Subscriber on the subscription database, execute [sp_addmergepullsubscription](/sql/relational-databases/system-stored-procedures/sp-addmergepullsubscription-transact-sql).</span></span> <span data-ttu-id="d4e59-171">Geben Sie **@publisher** und an **@publication** .</span><span class="sxs-lookup"><span data-stu-id="d4e59-171">Specify **@publisher** and **@publication**.</span></span>   
2.  <span data-ttu-id="d4e59-172">Führen Sie auf dem Abonnenten für die Abonnementdatenbank [sp_addmergepullsubscription_agent](/sql/relational-databases/system-stored-procedures/sp-addmergepullsubscription-agent-transact-sql)aus.</span><span class="sxs-lookup"><span data-stu-id="d4e59-172">At the Subscriber on the subscription database, execute [sp_addmergepullsubscription_agent](/sql/relational-databases/system-stored-procedures/sp-addmergepullsubscription-agent-transact-sql).</span></span> <span data-ttu-id="d4e59-173">Geben Sie **@publisher** , **@publisher_db** , **@publication** , die Windows-Anmelde Informationen, unter denen die Verteilungs-Agent auf dem Abonnenten ausgeführt wird, für **@job_login** und und den **@job_password** Wert für an `true` **@use_ftp** .</span><span class="sxs-lookup"><span data-stu-id="d4e59-173">Specify **@publisher**, **@publisher_db**, **@publication**, the Windows credentials under which the Distribution Agent at the Subscriber runs for **@job_login** and **@job_password**, and a value of `true` for **@use_ftp**.</span></span>    
3.  <span data-ttu-id="d4e59-174">Führen Sie auf dem Verleger für die Veröffentlichungsdatenbank [sp_addmergesubscription](/sql/relational-databases/system-stored-procedures/sp-addmergesubscription-transact-sql) aus, um das Pullabonnement zu registrieren.</span><span class="sxs-lookup"><span data-stu-id="d4e59-174">At the Publisher on the publication database, execute [sp_addmergesubscription](/sql/relational-databases/system-stored-procedures/sp-addmergesubscription-transact-sql) to register the pull subscription.</span></span> <span data-ttu-id="d4e59-175">Weitere Informationen finden Sie unter [Create a Pull Subscription](../create-a-pull-subscription.md).</span><span class="sxs-lookup"><span data-stu-id="d4e59-175">For more information, see [Create a Pull Subscription](../create-a-pull-subscription.md).</span></span>  
  
#### <a name="to-change-one-or-more-ftp-snapshot-delivery-settings-for-a-snapshot-or-transactional-publication"></a><span data-ttu-id="d4e59-176">So ändern Sie eine oder mehrere Einstellungen der FTP-Momentaufnahmeübermittlung für eine Momentaufnahme- oder Transaktionsveröffentlichung</span><span class="sxs-lookup"><span data-stu-id="d4e59-176">To change one or more FTP snapshot delivery settings for a snapshot or transactional publication</span></span>  
  
1.  <span data-ttu-id="d4e59-177">Führen Sie auf dem Verleger für die Veröffentlichungsdatenbank [sp_changepublication](/sql/relational-databases/system-stored-procedures/sp-changepublication-transact-sql)aus.</span><span class="sxs-lookup"><span data-stu-id="d4e59-177">At the Publisher on the publication database, execute [sp_changepublication](/sql/relational-databases/system-stored-procedures/sp-changepublication-transact-sql).</span></span> <span data-ttu-id="d4e59-178">Geben Sie einen der folgenden Werte für **@property** und einen neuen Wert für diese Einstellung für an **@value** :</span><span class="sxs-lookup"><span data-stu-id="d4e59-178">Specify one of the following values for **@property** and a new value of this setting for **@value**:</span></span>    
    -   <span data-ttu-id="d4e59-179">`ftp_address` &ndash; die Adresse des FTP-Servers, der für die Übermittlung der Momentaufnahme verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="d4e59-179">`ftp_address` - the address of the FTP server used to deliver the snapshot.</span></span>    
    -   <span data-ttu-id="d4e59-180">`ftp_port` &ndash; der vom FTP-Server verwendete Port.</span><span class="sxs-lookup"><span data-stu-id="d4e59-180">`ftp_port` - the port used by the FTP server.</span></span>    
    -   <span data-ttu-id="d4e59-181">`ftp_subdirectory` &ndash; das Unterverzeichnis des einer FTP-Anmeldung zugewiesenen Standard-FTP-Verzeichnisses.</span><span class="sxs-lookup"><span data-stu-id="d4e59-181">`ftp_subdirectory` - the subdirectory of the default FTP directory used for the FTP snapshot.</span></span>    
    -   <span data-ttu-id="d4e59-182">`ftp_login` &ndash; der Anmeldenamen, der zum Herstellen einer Verbindung mit dem FTP-Server verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="d4e59-182">`ftp_login` - a login used to connect to the FTP server.</span></span>    
    -   <span data-ttu-id="d4e59-183">`ftp_password` &ndash; das Kennwort für die FTP-Anmeldung.</span><span class="sxs-lookup"><span data-stu-id="d4e59-183">`ftp_password` - the password for the FTP login.</span></span>  
  
2.  <span data-ttu-id="d4e59-184">(Optional) Wiederholen Sie Schritt 1 für jede zu ändernde FTP-Einstellung.</span><span class="sxs-lookup"><span data-stu-id="d4e59-184">(Optional) Repeat step 1 for each FTP setting being changed.</span></span>    
3.  <span data-ttu-id="d4e59-185">(Optional) Führen Sie auf dem Verleger für die Veröffentlichungsdatenbank [sp_changepublication](/sql/relational-databases/system-stored-procedures/sp-changepublication-transact-sql) aus, um die FTP-Momentaufnahmeübermittlung zu deaktivieren.</span><span class="sxs-lookup"><span data-stu-id="d4e59-185">(Optional) To disable FTP snapshot delivery, execute [sp_changepublication](/sql/relational-databases/system-stored-procedures/sp-changepublication-transact-sql) at the Publisher on the publication database.</span></span> <span data-ttu-id="d4e59-186">Geben Sie den Wert `enabled_for_internet` für **@property** und den Wert `false` für an **@value** .</span><span class="sxs-lookup"><span data-stu-id="d4e59-186">Specify a value of `enabled_for_internet` for **@property** and a value of `false` for **@value**.</span></span>  
  
#### <a name="to-change-ftp-snapshot-delivery-settings-for-a-merge-publication"></a><span data-ttu-id="d4e59-187">So ändern Sie die Einstellungen der FTP-Momentaufnahmeübermittlung für eine Mergeveröffentlichung</span><span class="sxs-lookup"><span data-stu-id="d4e59-187">To change FTP snapshot delivery settings for a merge publication</span></span>  
  
1.  <span data-ttu-id="d4e59-188">Führen Sie auf dem Verleger für die Veröffentlichungsdatenbank [sp_changemergepublication](/sql/relational-databases/system-stored-procedures/sp-changemergepublication-transact-sql)aus.</span><span class="sxs-lookup"><span data-stu-id="d4e59-188">At the Publisher on the publication database, execute [sp_changemergepublication](/sql/relational-databases/system-stored-procedures/sp-changemergepublication-transact-sql).</span></span> <span data-ttu-id="d4e59-189">Geben Sie einen der folgenden Werte für **@property** und einen neuen Wert für diese Einstellung für an **@value** :</span><span class="sxs-lookup"><span data-stu-id="d4e59-189">Specify one of the following values for **@property** and a new value of this setting for **@value**:</span></span>  
  
    -   <span data-ttu-id="d4e59-190">`ftp_address` &ndash; die Adresse des FTP-Servers, der für die Übermittlung der Momentaufnahme verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="d4e59-190">`ftp_address` - the address of the FTP server used to deliver the snapshot.</span></span>    
    -   <span data-ttu-id="d4e59-191">`ftp_port` &ndash; der vom FTP-Server verwendete Port.</span><span class="sxs-lookup"><span data-stu-id="d4e59-191">`ftp_port` - the port used by the FTP server.</span></span>    
    -   <span data-ttu-id="d4e59-192">`ftp_subdirectory` &ndash; das Unterverzeichnis des einer FTP-Anmeldung zugewiesenen Standard-FTP-Verzeichnisses.</span><span class="sxs-lookup"><span data-stu-id="d4e59-192">`ftp_subdirectory` - the subdirectory of the default FTP directory used for the FTP snapshot.</span></span>   
    -   <span data-ttu-id="d4e59-193">`ftp_login` &ndash; der Anmeldenamen, der zum Herstellen einer Verbindung mit dem FTP-Server verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="d4e59-193">`ftp_login` - a login used to connect to the FTP server.</span></span>    
    -   <span data-ttu-id="d4e59-194">`ftp_password` &ndash; das Kennwort für die FTP-Anmeldung.</span><span class="sxs-lookup"><span data-stu-id="d4e59-194">`ftp_password` - the password for the FTP login.</span></span>    
2.  <span data-ttu-id="d4e59-195">(Optional) Wiederholen Sie Schritt 1 für jede zu ändernde FTP-Einstellung.</span><span class="sxs-lookup"><span data-stu-id="d4e59-195">(Optional) Repeat step 1 for each FTP setting being changed.</span></span>    
3.  <span data-ttu-id="d4e59-196">(Optional) Führen Sie auf dem Verleger für die Veröffentlichungsdatenbank [sp_changemergepublication](/sql/relational-databases/system-stored-procedures/sp-changemergepublication-transact-sql) aus, um die FTP-Momentaufnahmeübermittlung zu deaktivieren.</span><span class="sxs-lookup"><span data-stu-id="d4e59-196">(Optional) To disable FTP snapshot delivery, execute [sp_changemergepublication](/sql/relational-databases/system-stored-procedures/sp-changemergepublication-transact-sql) at the Publisher on the publication database.</span></span> <span data-ttu-id="d4e59-197">Geben Sie den Wert `enabled_for_internet` für **@property** und den Wert `false` für an **@value** .</span><span class="sxs-lookup"><span data-stu-id="d4e59-197">Specify a value of `enabled_for_internet` for **@property** and a value of `false` for **@value**.</span></span>  
  
###  <a name="examples-transact-sql"></a><a name="TsqlExample"></a> <span data-ttu-id="d4e59-198">Beispiele (Transact-SQL)</span><span class="sxs-lookup"><span data-stu-id="d4e59-198">Examples (Transact-SQL)</span></span>  
 <span data-ttu-id="d4e59-199">Im folgenden Beispiel wird eine Mergeveröffentlichung erstellt, die Abonnenten ermöglicht, über FTP auf die Momentaufnahmedaten zuzugreifen.</span><span class="sxs-lookup"><span data-stu-id="d4e59-199">The following example creates a merge publication that allows Subscribers to access the snapshot data using FTP.</span></span> <span data-ttu-id="d4e59-200">Beim Zugreifen auf die FTP-Freigabe sollte der Abonnent eine sichere VPN-Verbindung verwenden.</span><span class="sxs-lookup"><span data-stu-id="d4e59-200">The Subscriber should use a secure VPN connection when accessing the FTP share.</span></span> <span data-ttu-id="d4e59-201">**sqlcmd** -Skriptvariablen werden verwendet, um Anmelde- und Kennwortwerte anzugeben.</span><span class="sxs-lookup"><span data-stu-id="d4e59-201">**sqlcmd** scripting variables are used to supply login and password values.</span></span> <span data-ttu-id="d4e59-202">Weitere Informationen finden Sie unter [Verwenden von sqlcmd mit Skriptvariablen](../../scripting/sqlcmd-use-with-scripting-variables.md).</span><span class="sxs-lookup"><span data-stu-id="d4e59-202">For more information, see [Use sqlcmd with Scripting Variables](../../scripting/sqlcmd-use-with-scripting-variables.md).</span></span>  
  
 [!code-sql[HowTo#sp_createmergepub_ftp](../../../snippets/tsql/SQL15/replication/howto/tsql/createmergepubftp.sql#sp_createmergepub_ftp)]  
  
 <span data-ttu-id="d4e59-203">Im folgenden Beispiel wird ein Abonnement für eine Mergeveröffentlichung erstellt, bei dem der Abonnent die Momentaufnahme über FTP abruft.</span><span class="sxs-lookup"><span data-stu-id="d4e59-203">The following example creates a subscription to a merge publication, where the Subscriber obtains the snapshot using FTP.</span></span> <span data-ttu-id="d4e59-204">Beim Zugreifen auf die FTP-Freigabe sollte der Abonnent eine sichere VPN-Verbindung verwenden.</span><span class="sxs-lookup"><span data-stu-id="d4e59-204">The Subscriber should use a secure VPN connection when accessing the FTP share.</span></span> <span data-ttu-id="d4e59-205">**sqlcmd** -Skriptvariablen werden verwendet, um Anmelde- und Kennwortwerte anzugeben.</span><span class="sxs-lookup"><span data-stu-id="d4e59-205">**sqlcmd** scripting variables are used to supply login and password values.</span></span> <span data-ttu-id="d4e59-206">Weitere Informationen finden Sie unter [Verwenden von sqlcmd mit Skriptvariablen](../../scripting/sqlcmd-use-with-scripting-variables.md).</span><span class="sxs-lookup"><span data-stu-id="d4e59-206">For more information, see [Use sqlcmd with Scripting Variables](../../scripting/sqlcmd-use-with-scripting-variables.md).</span></span>  
  
 [!code-sql[HowTo#sp_createmergepullsub_ftp](../../../snippets/tsql/SQL15/replication/howto/tsql/createmergepullsubftp.sql#sp_createmergepullsub_ftp)]  
  
 [!code-sql[HowTo#sp_createmergepullsubagent_ftp](../../../snippets/tsql/SQL15/replication/howto/tsql/createmergepullsubftp.sql#sp_createmergepullsubagent_ftp)]  
  
## <a name="see-also"></a><span data-ttu-id="d4e59-207">Weitere Informationen</span><span class="sxs-lookup"><span data-stu-id="d4e59-207">See Also</span></span>  
 <span data-ttu-id="d4e59-208">[Replication System Stored Procedures Concepts](../concepts/replication-system-stored-procedures-concepts.md) </span><span class="sxs-lookup"><span data-stu-id="d4e59-208">[Replication System Stored Procedures Concepts](../concepts/replication-system-stored-procedures-concepts.md) </span></span>  
 <span data-ttu-id="d4e59-209">[Übertragen von Momentaufnahmen über FTP](../transfer-snapshots-through-ftp.md) </span><span class="sxs-lookup"><span data-stu-id="d4e59-209">[Transfer Snapshots Through FTP](../transfer-snapshots-through-ftp.md) </span></span>  
 <span data-ttu-id="d4e59-210">[Ändern von Veröffentlichungs- und Artikeleigenschaften](change-publication-and-article-properties.md) </span><span class="sxs-lookup"><span data-stu-id="d4e59-210">[Change Publication and Article Properties](change-publication-and-article-properties.md) </span></span>  
 [<span data-ttu-id="d4e59-211">Initialisieren eines Abonnements mit einer Momentaufnahme</span><span class="sxs-lookup"><span data-stu-id="d4e59-211">Initialize a Subscription with a Snapshot</span></span>](../initialize-a-subscription-with-a-snapshot.md)  
  
  
