---
title: Mergereplikation | Microsoft-Dokumentation
ms.custom: ''
ms.date: 03/06/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: replication
ms.topic: conceptual
helpviewer_keywords:
- merge replication [SQL Server replication], about merge replication
- merge replication [SQL Server replication]
ms.assetid: ff87c368-4c00-4e48-809d-ea752839551e
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: 7feef9e4debc228d1685c664c072139d60b56c22
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 08/04/2020
ms.locfileid: "87607689"
---
# <a name="merge-replication"></a><span data-ttu-id="7bcbf-102">Mergereplikation</span><span class="sxs-lookup"><span data-stu-id="7bcbf-102">Merge Replication</span></span>
  <span data-ttu-id="7bcbf-103">Die Mergereplikation beginnt in der Regel, wie die Transaktionsreplikation auch, mit einer Momentaufnahme der Veröffentlichungsdatenbankobjekte und -daten.</span><span class="sxs-lookup"><span data-stu-id="7bcbf-103">Merge replication, like transactional replication, typically starts with a snapshot of the publication database objects and data.</span></span> <span data-ttu-id="7bcbf-104">Spätere Daten- und Schemaänderungen, die auf dem Verleger und den Abonnenten vorgenommen werden, werden mit Triggern nachverfolgt.</span><span class="sxs-lookup"><span data-stu-id="7bcbf-104">Subsequent data changes and schema modifications made at the Publisher and Subscribers are tracked with triggers.</span></span> <span data-ttu-id="7bcbf-105">Ist eine Verbindung mit dem Netzwerk vorhanden, nimmt der Abonnent eine Synchronisierung mit dem Verleger vor und tauscht alle Zeilen aus, die sich seit der letzten Synchronisierung auf dem Verleger und dem Abonnenten geändert haben.</span><span class="sxs-lookup"><span data-stu-id="7bcbf-105">The Subscriber synchronizes with the Publisher when connected to the network and exchanges all rows that have changed between the Publisher and Subscriber since the last time synchronization occurred.</span></span>

 <span data-ttu-id="7bcbf-106">Die Mergereplikation wird typischerweise in Server-und-Client-Umgebungen verwendet.</span><span class="sxs-lookup"><span data-stu-id="7bcbf-106">Merge replication is typically used in server-to-client environments.</span></span> <span data-ttu-id="7bcbf-107">Ihre Verwendung empfiehlt sich in den folgenden Situationen:</span><span class="sxs-lookup"><span data-stu-id="7bcbf-107">Merge replication is appropriate in any of the following situations:</span></span>

-   <span data-ttu-id="7bcbf-108">Mehrere Abonnenten aktualisieren dieselben Daten zu verschiedenen Zeitpunkten und geben diese Änderungen an den Verleger und an andere Abonnenten weiter.</span><span class="sxs-lookup"><span data-stu-id="7bcbf-108">Multiple Subscribers might update the same data at various times and propagate those changes to the Publisher and to other Subscribers.</span></span>

-   <span data-ttu-id="7bcbf-109">Abonnenten müssen Daten empfangen, Änderungen offline vornehmen und Änderungen später mit dem Verleger und anderen Abonnenten synchronisieren.</span><span class="sxs-lookup"><span data-stu-id="7bcbf-109">Subscribers need to receive data, make changes offline, and later synchronize changes with the Publisher and other Subscribers.</span></span>

-   <span data-ttu-id="7bcbf-110">Jeder Abonnent benötigt eine andere Datenpartition.</span><span class="sxs-lookup"><span data-stu-id="7bcbf-110">Each Subscriber requires a different partition of data.</span></span>

-   <span data-ttu-id="7bcbf-111">Es kann zu Konflikten kommen, und Sie müssen in der Lage sein, die Konflikte zu erkennen und zu lösen.</span><span class="sxs-lookup"><span data-stu-id="7bcbf-111">Conflicts might occur and, when they do, you need the ability to detect and resolve them.</span></span>

-   <span data-ttu-id="7bcbf-112">Die Anwendung muss nicht auf die einzelnen Zwischenstufen von Datenänderungen, sondern nur auf das endgültige Ergebnis der Datenänderung zugreifen können.</span><span class="sxs-lookup"><span data-stu-id="7bcbf-112">The application requires net data change rather than access to intermediate data states.</span></span> <span data-ttu-id="7bcbf-113">Wenn sich eine Zeile auf dem Abonnenten z. B. fünfmal ändert, bevor sie mit einem Verleger synchronisiert wird, ändert sich die Zeile auf dem Verleger lediglich einmal und übernimmt so nur die endgültige Änderung (in diesem Fall also den fünften Wert).</span><span class="sxs-lookup"><span data-stu-id="7bcbf-113">For example, if a row changes five times at a Subscriber before it synchronizes with a Publisher, the row will change only once at the Publisher to reflect the net data change (that is, the fifth value).</span></span>

 <span data-ttu-id="7bcbf-114">Die Mergereplikation ermöglicht es verschiedenen Standorten, autonom zu arbeiten und die Updates zu einem späteren Zeitpunkt zu einem einzelnen, einheitlichen Ergebnis zusammenzuführen.</span><span class="sxs-lookup"><span data-stu-id="7bcbf-114">Merge replication allows various sites to work autonomously and later merge updates into a single, uniform result.</span></span> <span data-ttu-id="7bcbf-115">Da Updates auf mehr als einem Knoten ausgeführt werden, sind dieselben Daten möglicherweise vom Verleger und von mindestens einem Abonnenten aktualisiert worden.</span><span class="sxs-lookup"><span data-stu-id="7bcbf-115">Because updates are made at more than one node, the same data may have been updated by the Publisher and by more than one Subscriber.</span></span> <span data-ttu-id="7bcbf-116">Daher kann es beim Zusammenführen von Updates zu Konflikten kommen, für deren Lösung die Mergereplikation aber eine Reihe von Möglichkeiten bietet.</span><span class="sxs-lookup"><span data-stu-id="7bcbf-116">Therefore, conflicts can occur when updates are merged and merge replication provides a number of ways to handle conflicts.</span></span>

 <span data-ttu-id="7bcbf-117">Die Mergereplikation wird vom [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] -Momentaufnahme-Agent und dem Merge-Agent implementiert.</span><span class="sxs-lookup"><span data-stu-id="7bcbf-117">Merge replication is implemented by the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Snapshot Agent and Merge Agent.</span></span> <span data-ttu-id="7bcbf-118">Wenn die Veröffentlichung ungefiltert ist oder statische Filter verwendet, erstellt der Momentaufnahme-Agent eine einzelne Momentaufnahme.</span><span class="sxs-lookup"><span data-stu-id="7bcbf-118">If the publication is unfiltered or uses static filters, the Snapshot Agent creates a single snapshot.</span></span> <span data-ttu-id="7bcbf-119">Wenn die Veröffentlichung parametrisierte Filter verwendet, erstellt der Momentaufnahme-Agent eine Momentaufnahme für jede Datenpartition.</span><span class="sxs-lookup"><span data-stu-id="7bcbf-119">If the publication uses parameterized filters, the Snapshot Agent creates a snapshot for each partition of data.</span></span> <span data-ttu-id="7bcbf-120">Der Merge-Agent weist die Anfangsmomentaufnahmen den Abonnenten zu.</span><span class="sxs-lookup"><span data-stu-id="7bcbf-120">The Merge Agent applies the initial snapshots to the Subscribers.</span></span> <span data-ttu-id="7bcbf-121">Er führt außerdem inkrementelle Datenänderungen zusammen, die beim Verleger oder bei den Abonnenten ausgeführt wurden, nachdem die Anfangsmomentaufnahme erstellt wurde, und erkennt und löst Konflikte entsprechend den von Ihnen konfigurierten Regeln.</span><span class="sxs-lookup"><span data-stu-id="7bcbf-121">It also merges incremental data changes that occurred at the Publisher or Subscribers after the initial snapshot was created, and detects and resolves any conflicts according to rules you configure.</span></span>

 <span data-ttu-id="7bcbf-122">Damit Änderungen nachverfolgt werden können, müssen Mergereplikationen (und Transaktionsreplikationen) mit Abonnements mit verzögertem Update jede Zeile in jeder veröffentlichten Tabelle eindeutig identifizieren können.</span><span class="sxs-lookup"><span data-stu-id="7bcbf-122">To track changes, merge replication (and transactional replication with queued updating subscriptions) must be able to uniquely identify every row in every published table.</span></span> <span data-ttu-id="7bcbf-123">Bei der Mergereplikation wird jeder Tabelle die `rowguid`-Spalte hinzugefügt, es sei denn, die Tabelle verfügt bereits über eine Spalte vom Datentyp `uniqueidentifier` mit festgelegter `ROWGUIDCOL`-Eigenschaft (in dem Fall wird diese Spalte verwendet).</span><span class="sxs-lookup"><span data-stu-id="7bcbf-123">To accomplish this merge replication adds the column `rowguid` to every table, unless the table already has a column of data type `uniqueidentifier` with the `ROWGUIDCOL` property set (in which case this column is used).</span></span> <span data-ttu-id="7bcbf-124">Beim Löschen der Tabelle aus der Veröffentlichung wird auch die `rowguid`-Spalte entfernt. Wurde eine vorhandene Spalte zur Nachverfolgung verwendet, wird die Spalte nicht entfernt.</span><span class="sxs-lookup"><span data-stu-id="7bcbf-124">If the table is dropped from the publication, the `rowguid` column is removed; if an existing column was used for tracking, the column is not removed.</span></span> <span data-ttu-id="7bcbf-125">Ein Filter muss die von der Replikation verwendete `rowguidcol` nicht einschließen, um Zeilen zu identifizieren.</span><span class="sxs-lookup"><span data-stu-id="7bcbf-125">A filter must not include the `rowguidcol` used by replication to identify rows.</span></span> <span data-ttu-id="7bcbf-126">Die `newid()`-Funktion wird als der Standard für die Spalte `rowguid` bereitgestellt, Kunden können jedoch für jede Zeile nach Bedarf einen guid-Wert verwenden.</span><span class="sxs-lookup"><span data-stu-id="7bcbf-126">The `newid()` function is provided as a default for the `rowguid` column, however customers can provide a guid for each row if needed.</span></span> <span data-ttu-id="7bcbf-127">Verwenden Sie jedoch nicht den Wert 00000000-0000-0000-0000-000000000000.</span><span class="sxs-lookup"><span data-stu-id="7bcbf-127">However, do not provide value 00000000-0000-0000-0000-000000000000.</span></span>

 <span data-ttu-id="7bcbf-128">Im folgenden Diagramm werden die in der Mergereplikation verwendeten Komponenten dargestellt.</span><span class="sxs-lookup"><span data-stu-id="7bcbf-128">The following diagram shows the components used in merge replication.</span></span>

 <span data-ttu-id="7bcbf-129">![Komponenten und Datenfluss für Mergereplikation](../media/merge.gif "Komponenten und Datenfluss für Mergereplikation")</span><span class="sxs-lookup"><span data-stu-id="7bcbf-129">![Merge replication components and data flow](../media/merge.gif "Merge replication components and data flow")</span></span>


