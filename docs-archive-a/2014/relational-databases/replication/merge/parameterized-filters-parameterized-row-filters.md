---
title: Parametrisierte Zeilenfilter |Microsoft Dokumentation
ms.custom: ''
ms.date: 06/02/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: replication
ms.topic: conceptual
helpviewer_keywords:
- publications [SQL Server replication], dynamic filters
- merge replication [SQL Server replication], dynamic filters
- parameterized filters [SQL Server replication]
- filters [SQL Server replication], dynamic
- merge replication parameterized filters [SQL Server replication]
- publications [SQL Server replication], parameterized filters
- parameterized filters [SQL Server replication], about parameterized filters
- filters [SQL Server replication], parameterized
- dynamic filters [SQL Server replication]
ms.assetid: b48a6825-068f-47c8-afdc-c83540da4639
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: a293d5dfc6bfbdf66afb680f0604117e2cc02b2d
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 08/04/2020
ms.locfileid: "87608572"
---
# <a name="parameterized-row-filters"></a><span data-ttu-id="2365b-102">Parameterized Row Filters</span><span class="sxs-lookup"><span data-stu-id="2365b-102">Parameterized Row Filters</span></span>
  <span data-ttu-id="2365b-103">Mit parametrisierten Zeilenfiltern können verschiedene Datenpartitionen an verschiedene Abonnenten gesendet werden, ohne dass hierfür mehrere Veröffentlichungen erstellt werden müssen (parametrisierte Filter wurden in früheren Versionen von [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]als dynamische Filter bezeichnet).</span><span class="sxs-lookup"><span data-stu-id="2365b-103">Parameterized row filters allow different partitions of data to be sent to different Subscribers without requiring multiple publications to be created (parameterized filters were referred to as dynamic filters in previous versions of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]).</span></span> <span data-ttu-id="2365b-104">Der Begriff Partition bezeichnet nichts weiter als eine Teilmenge der Zeilen in einer Tabelle. Abhängig von den Einstellungen für den parametrisierten Zeilenfilter, die im Zuge der Erstellung des Filters festgelegt werden, kann jede Zeile in einer veröffentlichten Tabelle entweder nur zu einer Partition (nicht überlappende Partitionen) oder aber zu mehreren Partitionen (überlappende Partitionen) gehören.</span><span class="sxs-lookup"><span data-stu-id="2365b-104">A partition is a subset of the rows in a table; depending on the settings chosen when creating a parameterized row filter, each row in a published table can belong to one partition only (which produces nonoverlapping partitions) or to two or more partitions (which produces overlapping partitions).</span></span>  
  
 <span data-ttu-id="2365b-105">Nicht überlappende Partitionen können für mehrere Abonnenten freigegeben werden, oder es kann einschränkend festgelegt werden, dass eine bestimmte Partition einem Abonnement zugewiesen wird.</span><span class="sxs-lookup"><span data-stu-id="2365b-105">Nonoverlapping partitions can be shared among subscriptions or they can be restricted so that only one subscription receives a given partition.</span></span> <span data-ttu-id="2365b-106">Die Einstellungen, mit denen das Verhalten der Partition gesteuert wird, werden weiter unten unter "Verwenden der richtigen Filteroptionen" erläutert.</span><span class="sxs-lookup"><span data-stu-id="2365b-106">The settings that control partition behavior are described in "Using the Appropriate Filtering Options" later in this topic.</span></span> <span data-ttu-id="2365b-107">Mithilfe dieser Einstellungen können Sie die parametrisierten Filter an die jeweiligen Anwendungs- und Leistungsanforderungen anpassen.</span><span class="sxs-lookup"><span data-stu-id="2365b-107">Using these settings you can tailor parameterized filtering according to application and performance requirements.</span></span> <span data-ttu-id="2365b-108">Allgemein gilt, dass überlappende Partitionen ein höheres Maß an Flexibilität ermöglichen, während nicht überlappende Partitionen, die nur für ein einzelnes Abonnement repliziert werden, eine höhere Leistungsfähigkeit aufweisen.</span><span class="sxs-lookup"><span data-stu-id="2365b-108">In general, overlapping partitions allow for greater flexibility, and nonoverlapping partitions replicated to a single subscription provide better performance.</span></span>  
  
 <span data-ttu-id="2365b-109">Parametrisierte Filter werden in einer einzelnen Tabelle verwendet und in der Regel mit Joinfiltern kombiniert, um auch verknüpfte Tabellen filtern zu können.</span><span class="sxs-lookup"><span data-stu-id="2365b-109">Parameterized filters are used on a single table and are typically combined with join filters to extend filtering to related tables.</span></span> <span data-ttu-id="2365b-110">Weitere Informationen finden Sie unter [Join Filters](join-filters.md).</span><span class="sxs-lookup"><span data-stu-id="2365b-110">For more information, see [Join Filters](join-filters.md).</span></span>  
  
 <span data-ttu-id="2365b-111">Informationen zum Definieren oder Ändern eines parametrisierten Zeilenfilters finden Sie unter [Definieren und Ändern eines parametrisierten Zeilenfilters für einen Mergeartikel](../publish/define-and-modify-a-parameterized-row-filter-for-a-merge-article.md).</span><span class="sxs-lookup"><span data-stu-id="2365b-111">To define or modify a parameterized row filter, see [Define and Modify a Parameterized Row Filter for a Merge Article](../publish/define-and-modify-a-parameterized-row-filter-for-a-merge-article.md).</span></span>  
  
## <a name="how-parameterized-filters-work"></a><span data-ttu-id="2365b-112">Funktionsweise parametrisierter Filter</span><span class="sxs-lookup"><span data-stu-id="2365b-112">How Parameterized Filters Work</span></span>  
 <span data-ttu-id="2365b-113">Parametrisierte Zeilenfilter verwenden zum Auswählen der Daten, die veröffentlicht werden sollen, eine WHERE-Klausel.</span><span class="sxs-lookup"><span data-stu-id="2365b-113">A parameterized row filter uses a WHERE clause to select the appropriate data to be published.</span></span> <span data-ttu-id="2365b-114">Statt in der Klausel einen Literalwert anzugeben (wie dies bei statischen Zeilenfiltern der Fall wäre), wird mindestens eine der folgenden Systemfunktionen angegeben: SUSER_SNAME() und HOST_NAME().</span><span class="sxs-lookup"><span data-stu-id="2365b-114">Rather than specifying a literal value in the clause (as you do with a static row filter), you specify one or both of the following system functions: SUSER_SNAME() and HOST_NAME().</span></span> <span data-ttu-id="2365b-115">Darüber hinaus können auch benutzerdefinierte Funktionen verwendet werden, sofern diese in ihrem Hauptteil SUSER_SNAME() oder HOST_NAME() enthalten bzw. eine dieser Systemfunktionen auswerten (wie beispielsweise `MyUDF(SUSER_SNAME()`).</span><span class="sxs-lookup"><span data-stu-id="2365b-115">User-defined functions can also be used, but they must include SUSER_SNAME() or HOST_NAME() in the body of the function, or evaluate one of these system functions (such as `MyUDF(SUSER_SNAME()`).</span></span> <span data-ttu-id="2365b-116">Wenn eine benutzerdefinierte Funktion in ihrem Hauptteil SUSER_SNAME() oder HOST_NAME() enthält, können dieser Funktion keine Parameter übergeben werden.</span><span class="sxs-lookup"><span data-stu-id="2365b-116">If a user-defined function includes SUSER_SNAME() or HOST_NAME() in the body of the function, you cannot pass parameters to the function.</span></span>  
  
 <span data-ttu-id="2365b-117">Die SUSER_SNAME() und HOST_NAME()-Systemfunktionen können auch für andere Zwecke als die Mergereplikation verwendet werden, sie werden von dieser aber für das parametrisierte Filtern verwendet:</span><span class="sxs-lookup"><span data-stu-id="2365b-117">The system functions SUSER_SNAME() and HOST_NAME() are not specific to merge replication, but they are used by merge replication for parameterized filtering:</span></span>  
  
-   <span data-ttu-id="2365b-118">SUSER_SNAME() gibt Anmeldeinformationen für Verbindungen mit einer Instanz von [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]zurück.</span><span class="sxs-lookup"><span data-stu-id="2365b-118">SUSER_SNAME() returns login information for connections made to an instance of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="2365b-119">Bei Verwendung in einem parametrisierten Filter wird der Anmeldename zurückgegeben, mit dessen Hilfe der Merge-Agent eine Verbindung mit dem Verleger herstellt (den Anmeldenamen müssen Sie beim Erstellen des Abonnements angeben).</span><span class="sxs-lookup"><span data-stu-id="2365b-119">When used in a parameterized filter, it returns the login used by the Merge Agent to connect to the Publisher (you specify a login when you create a subscription).</span></span>  
  
-   <span data-ttu-id="2365b-120">HOST_NAME() gibt den Namen des Computers zurück, der mit einer Instanz von [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]verbunden ist.</span><span class="sxs-lookup"><span data-stu-id="2365b-120">HOST_NAME() returns the name of the computer that is connecting to an instance of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="2365b-121">Bei Verwendung in einem parametrisierten Filter gibt die Funktion standardmäßig den Namen des Computers zurück, auf dem der Merge-Agent ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="2365b-121">When used in a parameterized filter, by default it returns the name of the computer on which the Merge Agent is running.</span></span> <span data-ttu-id="2365b-122">Bei Pullabonnements ist dies der Name des Abonnenten, während bei Pushabonnements der Name des Verteilers zurückgegeben wird.</span><span class="sxs-lookup"><span data-stu-id="2365b-122">For pull subscriptions it is the name of the Subscriber; for push subscriptions it is the name of the Distributor.</span></span>  
  
     <span data-ttu-id="2365b-123">Durch Eingabe eines anderen Wertes als den Namen des Abonnenten oder Verteilers kann diese Funktion überschrieben werden.</span><span class="sxs-lookup"><span data-stu-id="2365b-123">It is also possible to override this function with a value other than the name of the Subscriber or Distributor.</span></span> <span data-ttu-id="2365b-124">In der Regel überschreiben Anwendungen diese Funktion mit sinnvolleren Werten, z. B. einem Vertriebsmitarbeiternamen oder einer Vertriebsmitarbeiter-ID.</span><span class="sxs-lookup"><span data-stu-id="2365b-124">Typically applications override this function with more meaningful values, such as a salesperson name or salesperson ID.</span></span> <span data-ttu-id="2365b-125">Weitere Informationen finden Sie im Abschnitt zu "Überschreiben des HOST_NAME()-Werts" weiter unten in diesem Thema.</span><span class="sxs-lookup"><span data-stu-id="2365b-125">For more information, see the section "Overriding the HOST_NAME() Value" in this topic.</span></span>  
  
 <span data-ttu-id="2365b-126">Der Wert, der von der Systemfunktion zurückgegeben wird, wird mit der von Ihnen angegebenen Spalte in der gefilterten Tabelle verglichen. Danach werden die entsprechenden Daten auf den Abonnenten heruntergeladen.</span><span class="sxs-lookup"><span data-stu-id="2365b-126">The value returned by the system function is compared to a column you specify in the table you are filtering, and the appropriate data is downloaded to the Subscriber.</span></span> <span data-ttu-id="2365b-127">Dieser Vergleich erfolgt sowohl bei der Initialisierung des Abonnements (damit in der Anfangsmomentaufnahme nur die relevanten Daten enthalten sind) als auch bei jeder Abonnementsynchronisierung.</span><span class="sxs-lookup"><span data-stu-id="2365b-127">This comparison is made when the subscription is initialized (so only the appropriate data is contained in the initial snapshot) and every time the subscription is synchronized.</span></span> <span data-ttu-id="2365b-128">Wenn eine Änderung auf dem Verleger dazu führt, dass eine Zeile aus einer Partition verschoben wird, wird die Zeile standardmäßig auf dem Abonnenten gelöscht (dieses Verhalten wird mithilfe des- **@allow_partition_realignment** Parameters von [sp_addmergepublication &#40;Transact-SQL-&#41;](/sql/relational-databases/system-stored-procedures/sp-addmergepublication-transact-sql)gesteuert).</span><span class="sxs-lookup"><span data-stu-id="2365b-128">By default, if a change at the Publisher results in a row being moved out of a partition, the row is deleted at the Subscriber (this behavior is controlled using the **@allow_partition_realignment** parameter of [sp_addmergepublication &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addmergepublication-transact-sql)).</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="2365b-129">Bei Vergleichen für parametrisierte Filter wird in jedem Fall die Datenbanksortierung verwendet.</span><span class="sxs-lookup"><span data-stu-id="2365b-129">When comparisons are made for parameterized filters, the database collation is always used.</span></span> <span data-ttu-id="2365b-130">Wenn die Datenbanksortierung z. B. ohne Unterscheidung von Groß- und Kleinschreibung erfolgt, die Tabellen- oder Spaltensortierung dagegen mit, wird beim Vergleich nicht zwischen Groß-/Kleinschreibung unterschieden.</span><span class="sxs-lookup"><span data-stu-id="2365b-130">For example, if the database collation is case insensitive, but the table or column collation is case sensitive, the comparison will be case insensitive.</span></span>  
  
### <a name="filtering-with-suser_sname"></a><span data-ttu-id="2365b-131">Filtern mit SUSER_SNAME()</span><span class="sxs-lookup"><span data-stu-id="2365b-131">Filtering with SUSER_SNAME()</span></span>  
 <span data-ttu-id="2365b-132">Sehen Sie sich die **Employee-Tabelle** in der [!INCLUDE[ssSampleDBCoShort](../../../includes/sssampledbcoshort-md.md)] -Beispieldatenbank an.</span><span class="sxs-lookup"><span data-stu-id="2365b-132">Consider the **Employee Table** in the [!INCLUDE[ssSampleDBCoShort](../../../includes/sssampledbcoshort-md.md)] sample database.</span></span> <span data-ttu-id="2365b-133">Diese Tabelle enthält die **LoginID**-Spalte, in der Sie die Domäne und den Anmeldenamen (Anmelde-ID) für jeden Mitarbeiter in der Form*domain\login*finden.</span><span class="sxs-lookup"><span data-stu-id="2365b-133">This table includes the column **LoginID**, which contains the login for each employee in the form '*domain\login*'.</span></span> <span data-ttu-id="2365b-134">Wenn Sie diese Tabelle so filtern möchten, dass alle Mitarbeiter nur die Daten erhalten, die für sie jeweils relevant sind, geben Sie folgende Filterklausel an:</span><span class="sxs-lookup"><span data-stu-id="2365b-134">To filter this table so that employees receive only the data related to them, specify a filter clause of:</span></span>  
  
```  
LoginID = SUSER_SNAME()  
```  
  
 <span data-ttu-id="2365b-135">Nehmen wir z. B. an, der Wert für einen der Mitarbeiter ist 'adventure-works\john5'.</span><span class="sxs-lookup"><span data-stu-id="2365b-135">For example, the value for one of the employees is 'adventure-works\john5'.</span></span> <span data-ttu-id="2365b-136">Wenn der Merge-Agent eine Verbindung mit dem Verleger herstellt, verwendet dieser den Anmeldenamen, den Sie bei der Erstellung des Abonnements angegeben haben (in diesem Fall 'adventure-works\john5').</span><span class="sxs-lookup"><span data-stu-id="2365b-136">When the Merge Agent connects to the Publisher, it uses the login you specified when creating the subscription (in this case 'adventure-works\john5').</span></span> <span data-ttu-id="2365b-137">Der Merge-Agent vergleicht dann den von SUSER_SNAME() zurückgegebenen Wert mit den Werten in der Tabelle und lädt nur die Zeile herunter, die in der **LoginID** -Spalte den Wert 'adventure-works\john5' enthält.</span><span class="sxs-lookup"><span data-stu-id="2365b-137">The Merge Agent then compares the value returned by SUSER_SNAME() to the values in the table and downloads only the row that contains a value of 'adventure-works\john5' in the **LoginID** column.</span></span>  
  
### <a name="filtering-with-host_name"></a><span data-ttu-id="2365b-138">Filtern mit HOST_NAME()</span><span class="sxs-lookup"><span data-stu-id="2365b-138">Filtering with HOST_NAME()</span></span>  
 <span data-ttu-id="2365b-139">Sehen Sie sich die **HumanResources.Employee** -Tabelle an.</span><span class="sxs-lookup"><span data-stu-id="2365b-139">Consider the **HumanResources.Employee** table.</span></span> <span data-ttu-id="2365b-140">Nehmen wir an, diese Tabelle enthält eine **ComputerName** -Spalte, in der die Namen der Computer der einzelnen Mitarbeiter aufgeführt sind. Die Einträge weisen die Form '*name_computertype*' auf.</span><span class="sxs-lookup"><span data-stu-id="2365b-140">Suppose this table contained a column such as **ComputerName** with the name of each employee's computer in the form '*name_computertype*'.</span></span> <span data-ttu-id="2365b-141">Wenn Sie diese Tabelle so filtern möchten, dass alle Mitarbeiter nur die Daten erhalten, die für sie jeweils relevant sind, geben Sie folgende Filterklausel an:</span><span class="sxs-lookup"><span data-stu-id="2365b-141">To filter this table so that employees receive only the data related to them, specify a filter clause of:</span></span>  
  
```  
ComputerName = HOST_NAME()  
```  
  
 <span data-ttu-id="2365b-142">Nehmen wir z. B. an, der Wert für einen der Mitarbeiter ist 'john5_laptop'.</span><span class="sxs-lookup"><span data-stu-id="2365b-142">For example, the value for one of the employees could be 'john5_laptop'.</span></span> <span data-ttu-id="2365b-143">Wenn der Merge-Agent eine Verbindung mit dem Verleger hergestellt hat, vergleicht er den von HOST_NAME() zurückgegebenen Wert mit den Werten in der Tabelle und lädt nur die Zeile herunter, die in der **ComputerName** -Spalte den Wert 'john5_laptop' enthält.</span><span class="sxs-lookup"><span data-stu-id="2365b-143">When the Merge Agent connects to the Publisher, it compares the value returned by HOST_NAME() to the values in the table and downloads only the row that contains a value of 'john5_laptop' in the **ComputerName** column.</span></span>  
  
 <span data-ttu-id="2365b-144">Die beiden Funktionen können zu Filterzwecken auch kombiniert werden.</span><span class="sxs-lookup"><span data-stu-id="2365b-144">It is also possible to combine the functions in a filter.</span></span> <span data-ttu-id="2365b-145">Wenn Sie beispielsweise sicherstellen möchten, dass ein Mitarbeiter nur dann Daten erhält, wenn er sich mit seinem Anmeldenamen auf seinem Computer angemeldet hat, könnte folgende Filterklausel eingerichtet werden:</span><span class="sxs-lookup"><span data-stu-id="2365b-145">For example, if you wanted to ensure that an employee received data only if they used their login on their computer, the filter clause could be:</span></span>  
  
```  
LoginID = SUSER_SNAME() AND ComputerName = HOST_NAME()  
```  
  
 <span data-ttu-id="2365b-146">Sofern Sie nicht den HOST_NAME()-Wert überschreiben, wird das Filtern mit HOST_NAME() in der Regel nur bei Pullabonnements verwendet.</span><span class="sxs-lookup"><span data-stu-id="2365b-146">Unless you are overriding the HOST_NAME() value, filtering with HOST_NAME() is typically used only with pull subscriptions.</span></span> <span data-ttu-id="2365b-147">Die Funktion gibt den Namen des Computers zurück, auf dem der Merge-Agent ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="2365b-147">The value returned by the function is the name of the computer on which the Merge Agent is running.</span></span> <span data-ttu-id="2365b-148">Bei Pullabonnements ist dieser Wert für jedes Abonnement anders. Im Falle der Pushabonnements bleibt der Wert jedoch immer gleich, weil bei diesem Abonnementtyp alle Merge-Agents auf dem Verteiler ausgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="2365b-148">For pull subscriptions, the value is different for each subscription, but for push subscriptions, the value is the same (all Merge Agents run at the Distributor for push subscriptions).</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="2365b-149">Der Wert für die HOST_NAME()-Funktion kann überschrieben werden. Daher können Filter, die HOST_NAME() enthalten, nicht für die Steuerung des Zugriffs auf Datenpartitionen verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="2365b-149">The value for the HOST_NAME() function can be overridden; therefore it is not possible to use filters that include HOST_NAME() to control access to partitions of data.</span></span> <span data-ttu-id="2365b-150">Für die Steuerung des Zugriffs auf Datenpartitionen sollten Sie daher SUSER_SNAME(), SUSER_SNAME() in Kombination mit HOST_NAME() oder statische Zeilenfilter verwenden.</span><span class="sxs-lookup"><span data-stu-id="2365b-150">To control access to partitions of data, use SUSER_SNAME(), SUSER_SNAME() in combination with HOST_NAME(), or use static row filters.</span></span>  
  
#### <a name="overriding-the-host_name-value"></a><span data-ttu-id="2365b-151">Überschreiben des HOST_NAME()-Wertes</span><span class="sxs-lookup"><span data-stu-id="2365b-151">Overriding the HOST_NAME() Value</span></span>  
 <span data-ttu-id="2365b-152">Wie bereits erwähnt, gibt HOST_NAME() den Namen des Computers zurück, der eine Verbindung mit einer Instanz von [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]herstellt.</span><span class="sxs-lookup"><span data-stu-id="2365b-152">As noted earlier, HOST_NAME() by default returns the name of the computer that is connecting to an instance of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="2365b-153">Bei der Verwendung parametrisierter Filter wird dieser Wert häufig überschrieben, indem bei der Abonnementerstellung ein anderer Wert angegeben wird.</span><span class="sxs-lookup"><span data-stu-id="2365b-153">When using parameterized filters, it is common to override this value by supplying a value when you create a subscription.</span></span> <span data-ttu-id="2365b-154">Daraufhin wird durch die HOST_NAME()-Funktion nicht der Name des Computers, sondern der von Ihnen angegebene Wert zurückgegeben.</span><span class="sxs-lookup"><span data-stu-id="2365b-154">The HOST_NAME() function then returns the value you specify rather than the name of the computer.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="2365b-155">Wenn Sie HOST_NAME() überschreiben, wird für sämtliche Aufrufe der HOST_NAME()-Funktion der von Ihnen angegebene Wert zurückgegeben.</span><span class="sxs-lookup"><span data-stu-id="2365b-155">If you override HOST_NAME(), all calls to the HOST_NAME() function will return the value you specify.</span></span> <span data-ttu-id="2365b-156">Stellen Sie sicher, dass keine andere Anwendung darauf angewiesen ist, dass HOST_NAME() den Computernamen zurückgibt.</span><span class="sxs-lookup"><span data-stu-id="2365b-156">Ensure that other applications are not depending on HOST_NAME() returning the computer name.</span></span>  
  
 <span data-ttu-id="2365b-157">Sehen Sie sich die **HumanResources.Employee** -Tabelle an.</span><span class="sxs-lookup"><span data-stu-id="2365b-157">Consider the **HumanResources.Employee** table.</span></span> <span data-ttu-id="2365b-158">Diese Tabelle enthält die **EmployeeID**-Spalte.</span><span class="sxs-lookup"><span data-stu-id="2365b-158">This table includes the column **EmployeeID**.</span></span> <span data-ttu-id="2365b-159">Wenn Sie diese Tabelle so filtern möchten, dass jeder Mitarbeiter nur die Daten erhält, die für ihn relevant sind, geben Sie folgende Filterklausel an:</span><span class="sxs-lookup"><span data-stu-id="2365b-159">To filter this table so that each employee receives only the data related to them, specify a filter clause of:</span></span>  
  
 `EmployeeID = CONVERT(int,HOST_NAME())`  
  
 <span data-ttu-id="2365b-160">Der Mitarbeiterin Pamela Ansman-Wolfe wurde z. B. eine Mitarbeiter-ID von 280 zugewiesen.</span><span class="sxs-lookup"><span data-stu-id="2365b-160">For example, employee Pamela Ansman-Wolfe has been assigned an employee ID of 280.</span></span> <span data-ttu-id="2365b-161">Geben Sie bei der Erstellung eines Abonnements für diese Mitarbeiterin als Wert für HOST-NAME() die Mitarbeiternummer (hier: 280) an.</span><span class="sxs-lookup"><span data-stu-id="2365b-161">Specify the value of the employee ID (280 in our example) for the HOST_NAME() value when creating a subscription for this employee.</span></span> <span data-ttu-id="2365b-162">Wenn der Merge-Agent eine Verbindung mit dem Verleger hergestellt hat, vergleicht er den von HOST_NAME() zurückgegebenen Wert mit den Werten in der Tabelle und lädt nur die Zeile herunter, bei der der Wert 280 in der **EmployeeID** -Spalte enthalten ist.</span><span class="sxs-lookup"><span data-stu-id="2365b-162">When the Merge Agent connects to the Publisher, it compares the value returned by HOST_NAME() to the values in the table and downloads only the row that contains a value of 280 in the **EmployeeID** column.</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="2365b-163">Die HOST_NAME()-Funktion gibt einen `nchar`-Wert zurück, sodass Sie CONVERT verwenden müssen, wenn es sich bei der Spalte in der Filterklausel um eine numerische Spalte handelt (wie im Beispiel oben).</span><span class="sxs-lookup"><span data-stu-id="2365b-163">The HOST_NAME() function returns an `nchar` value, so you must use CONVERT if the column in the filter clause is of a numeric data type, as it is in the example above.</span></span> <span data-ttu-id="2365b-164">Zur Verbesserung der Leistung sollten Funktionen nicht auf Spaltennamen in Klauseln für parametrisierte Zeilenfilter (wie `CONVERT(nchar,EmployeeID) = HOST_NAME()`) angewendet werden.</span><span class="sxs-lookup"><span data-stu-id="2365b-164">For performance reasons, we recommended that you do not apply functions to column names in parameterized row filter clauses, such as `CONVERT(nchar,EmployeeID) = HOST_NAME()`.</span></span> <span data-ttu-id="2365b-165">Gehen Sie stattdessen wie im folgenden Beispiel vor: `EmployeeID = CONVERT(int,HOST_NAME())`.</span><span class="sxs-lookup"><span data-stu-id="2365b-165">Instead, we recommend using the approach shown in the example: `EmployeeID = CONVERT(int,HOST_NAME())`.</span></span> <span data-ttu-id="2365b-166">Diese Klausel kann für den- **@subset_filterclause** Parameter von [sp_addmergearticle](/sql/relational-databases/system-stored-procedures/sp-addmergearticle-transact-sql)verwendet werden, kann aber in der Regel nicht im Assistenten für neue Veröffentlichung verwendet werden. (der Assistent führt die Filter Klausel aus, um Sie zu überprüfen. Dies schlägt fehl, da der Computername nicht in einen konvertiert werden kann `int` .)</span><span class="sxs-lookup"><span data-stu-id="2365b-166">This clause can be used for the **@subset_filterclause** parameter of [sp_addmergearticle](/sql/relational-databases/system-stored-procedures/sp-addmergearticle-transact-sql), but it typically cannot be used in the New Publication Wizard (the wizard executes the filter clause to validate it, which fails because the computer name cannot be converted to an `int`).</span></span> <span data-ttu-id="2365b-167">Wenn Sie mit dem Assistenten für neue Veröffentlichung arbeiten, sollten Sie vor dem Erstellen einer Momentaufnahme für die Veröffentlichung `CONVERT(nchar,EmployeeID) = HOST_NAME()` im Assistenten angeben und dann [sp_changemergearticle](/sql/relational-databases/system-stored-procedures/sp-changemergearticle-transact-sql) verwenden, um die Klausel in `EmployeeID = CONVERT(int,HOST_NAME())` zu ändern.</span><span class="sxs-lookup"><span data-stu-id="2365b-167">If you use the New Publication Wizard, we recommend specifying `CONVERT(nchar,EmployeeID) = HOST_NAME()` in the wizard and then use [sp_changemergearticle](/sql/relational-databases/system-stored-procedures/sp-changemergearticle-transact-sql) to change the clause to `EmployeeID = CONVERT(int,HOST_NAME())` before creating a snapshot for the publication.</span></span>  
  
 <span data-ttu-id="2365b-168">**So überschreiben Sie den HOST_NAME()-Wert**</span><span class="sxs-lookup"><span data-stu-id="2365b-168">**To override the HOST_NAME() value**</span></span>  
  
 <span data-ttu-id="2365b-169">Verwenden Sie zum Überschreiben des Wertes für HOST_NAME() eine der folgenden Methoden:</span><span class="sxs-lookup"><span data-stu-id="2365b-169">Use one of the following methods to override the HOST_NAME() value:</span></span>  
  
-   [!INCLUDE[ssManStudioFull](../../../includes/ssmanstudiofull-md.md)]<span data-ttu-id="2365b-170">: Geben Sie auf der Seite **HOST\_NAME\(\)-Werte** des Assistenten für neue Abonnements einen Wert an.</span><span class="sxs-lookup"><span data-stu-id="2365b-170">: specify a value on the **HOST\_NAME\(\) Values** page of the New Subscription Wizard.</span></span> <span data-ttu-id="2365b-171">Weitere Informationen zum Erstellen von Abonnements finden Sie unter [Abonnieren von Veröffentlichungen](../subscribe-to-publications.md).</span><span class="sxs-lookup"><span data-stu-id="2365b-171">For more information about creating subscriptions, see [Subscribe to Publications](../subscribe-to-publications.md).</span></span>  
  
-   <span data-ttu-id="2365b-172">Replikations [!INCLUDE[tsql](../../../includes/tsql-md.md)] Programmierung: Geben Sie einen Wert für den- **@hostname** Parameter [sp_addmergesubscription &#40;Transact-SQL-&#41;](/sql/relational-databases/system-stored-procedures/sp-addmergesubscription-transact-sql) (für Pushabonnements) oder [sp_addmergepullsubscription_agent &#40;Transact-SQL-&#41;](/sql/relational-databases/system-stored-procedures/sp-addmergepullsubscription-agent-transact-sql) (für Pullabonnements) an.</span><span class="sxs-lookup"><span data-stu-id="2365b-172">Replication [!INCLUDE[tsql](../../../includes/tsql-md.md)] programming: specify a value for the **@hostname** parameter of [sp_addmergesubscription &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addmergesubscription-transact-sql) (for push subscriptions) or [sp_addmergepullsubscription_agent &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addmergepullsubscription-agent-transact-sql) (for pull subscriptions).</span></span>  
  
-   <span data-ttu-id="2365b-173">Merge-Agent: Geben Sie in der Befehlszeile oder per Agent-Profil einen Wert für den Parameter **-Hostname** an.</span><span class="sxs-lookup"><span data-stu-id="2365b-173">Merge Agent: specify a value for the **-Hostname** parameter at the command line or through an agent profile.</span></span> <span data-ttu-id="2365b-174">Weitere Informationen zum Merge-Agent finden Sie unter [Replication Merge Agent](../agents/replication-merge-agent.md).</span><span class="sxs-lookup"><span data-stu-id="2365b-174">For more information about the Merge Agent, see [Replication Merge Agent](../agents/replication-merge-agent.md).</span></span> <span data-ttu-id="2365b-175">Weitere Informationen zu Agentprofilen finden Sie unter [Replication Agent Profiles](../agents/replication-agent-profiles.md).</span><span class="sxs-lookup"><span data-stu-id="2365b-175">For more information about agent profiles, see [Replication Agent Profiles](../agents/replication-agent-profiles.md).</span></span>  
  
## <a name="initializing-a-subscription-to-a-publication-with-parameterized-filters"></a><span data-ttu-id="2365b-176">Initialisieren von Veröffentlichungsabonnements mit parametrisierten Filtern</span><span class="sxs-lookup"><span data-stu-id="2365b-176">Initializing a Subscription to a Publication with Parameterized Filters</span></span>  
 <span data-ttu-id="2365b-177">Wenn parametrisierte Zeilenfilter in Mergeveröffentlichungen verwendet werden, wird jedes Abonnement bei der Replikation mit einer zweiteiligen Momentaufnahme initialisiert.</span><span class="sxs-lookup"><span data-stu-id="2365b-177">When parameterized row filters are used in merge publications, replication initializes each subscription with a two-part snapshot.</span></span> <span data-ttu-id="2365b-178">Weitere Informationen finden Sie unter [Snapshots for Merge Publications with Parameterized Filters](../snapshots-for-merge-publications-with-parameterized-filters.md).</span><span class="sxs-lookup"><span data-stu-id="2365b-178">For more information, see [Snapshots for Merge Publications with Parameterized Filters](../snapshots-for-merge-publications-with-parameterized-filters.md).</span></span>  
  
## <a name="using-the-appropriate-filtering-options"></a><span data-ttu-id="2365b-179">Verwenden der richtigen Filteroptionen</span><span class="sxs-lookup"><span data-stu-id="2365b-179">Using the Appropriate Filtering Options</span></span>  
 <span data-ttu-id="2365b-180">Bei der Verwendung von parametrisierten Filtern können Sie die folgenden beiden Schlüsselbereiche steuern:</span><span class="sxs-lookup"><span data-stu-id="2365b-180">There are two key areas over which you have control when using parameterized filters:</span></span>  
  
-   <span data-ttu-id="2365b-181">Sie können festlegen, wie die Filter durch die Mergereplikation verarbeitet werden. Dazu stehen zwei Veröffentlichungseinstellungen zur Verfügung: **use partition groups** und **keep partition changes**.</span><span class="sxs-lookup"><span data-stu-id="2365b-181">How the filters are processed by merge replication, which is controlled by one of two publication settings: **use partition groups** and **keep partition changes**.</span></span>  
  
-   <span data-ttu-id="2365b-182">Sie können steuern, wie die Daten auf die einzelnen Abonnenten aufgeteilt werden. Dies muss sich in der Artikeleinstellung **partition options**widerspiegeln.</span><span class="sxs-lookup"><span data-stu-id="2365b-182">How the data is shared among Subscribers, which must be reflected by the article setting **partition options**.</span></span>  
  
 <span data-ttu-id="2365b-183">Informationen zum Festlegen von Filteroptionen finden Sie unter [Optimize Parameterized Row Filters](../publish/optimize-parameterized-row-filters.md).</span><span class="sxs-lookup"><span data-stu-id="2365b-183">To set filtering options, see [Optimize Parameterized Row Filters](../publish/optimize-parameterized-row-filters.md).</span></span>  
  
### <a name="setting-use-partition-groups-and-keep-partition-changes"></a><span data-ttu-id="2365b-184">Festlegen von 'use partition groups' und 'keep partition changes'</span><span class="sxs-lookup"><span data-stu-id="2365b-184">Setting 'use partition groups' and 'keep partition changes'</span></span>  
 <span data-ttu-id="2365b-185">Die Optionen **use partition groups** und **keep partition changes** verbessern bei Veröffentlichungen mit gefilterten Artikeln die Synchronisierungsleistung, da in der Veröffentlichungsdatenbank zusätzliche Metadaten gespeichert werden.</span><span class="sxs-lookup"><span data-stu-id="2365b-185">Both the **use partition groups** and **keep partition changes** options improve the synchronization performance for publications with filtered articles by storing additional metadata in the publication database.</span></span> <span data-ttu-id="2365b-186">Da die Option **use partition groups** auf vorausberechnete Partitionen zurückgreift, bietet sie das größere Potenzial für eine Leistungserhöhung.</span><span class="sxs-lookup"><span data-stu-id="2365b-186">The **use partition groups** option provides greater performance improvement through the use of the precomputed partitions feature.</span></span> <span data-ttu-id="2365b-187">Diese Option ist standardmäßig auf `true` festgelegt, wenn die Artikel in Ihrer Veröffentlichung einem Satz von Anforderungen entsprechen.</span><span class="sxs-lookup"><span data-stu-id="2365b-187">This option is set to `true` by default if the articles in your publication adhere to a set of requirements.</span></span> <span data-ttu-id="2365b-188">Weitere Informationen zu diesen Anforderungen finden Sie unter [Optimieren der Leistung parametrisierter Filter mithilfe vorausberechneter Partitionen](parameterized-filters-optimize-for-precomputed-partitions.md).</span><span class="sxs-lookup"><span data-stu-id="2365b-188">For more information about these requirements, see [Optimize Parameterized Filter Performance with Precomputed Partitions](parameterized-filters-optimize-for-precomputed-partitions.md).</span></span> <span data-ttu-id="2365b-189">Wenn Ihre Artikel die Anforderungen für die Verwendung Voraus berechneter Partitionen nicht erfüllen, wird die Option **Partitions Änderungen beibehalten** auf festgelegt `true` .</span><span class="sxs-lookup"><span data-stu-id="2365b-189">If your articles do not meet the requirements for using precomputed partitions, the **keep partition changes** option to is set to `true`.</span></span>  
  
### <a name="setting-partition-options"></a><span data-ttu-id="2365b-190">Festlegen von 'partition options'</span><span class="sxs-lookup"><span data-stu-id="2365b-190">Setting 'partition options'</span></span>  
 <span data-ttu-id="2365b-191">Der Wert für die **partition options** -Eigenschaft wird angegeben, wenn Sie einen Artikel erstellen. Ausschlaggebend für den Wert ist dabei die Art und Weise, wie die Daten in der gefilterten Tabelle für mehrere Abonnenten freigegeben werden.</span><span class="sxs-lookup"><span data-stu-id="2365b-191">You specify a value for the **partition options** property when creating an article, according to the way in which data in the filtered table will be shared by Subscribers.</span></span> <span data-ttu-id="2365b-192">Die Eigenschaft kann mithilfe von [sp_addmergearticle](/sql/relational-databases/system-stored-procedures/sp-addmergearticle-transact-sql), [sp_changemergearticle](/sql/relational-databases/system-stored-procedures/sp-changemergearticle-transact-sql)und dem Dialogfeld **Artikeleigenschaften** auf einen von vier Werten festgelegt werden.</span><span class="sxs-lookup"><span data-stu-id="2365b-192">The property can be set to one of four values using [sp_addmergearticle](/sql/relational-databases/system-stored-procedures/sp-addmergearticle-transact-sql), [sp_changemergearticle](/sql/relational-databases/system-stored-procedures/sp-changemergearticle-transact-sql), and the **Article Properties** dialog box.</span></span> <span data-ttu-id="2365b-193">Wird das Dialogfeld **Filter hinzufügen** oder **Filter bearbeiten** verwendet, kann aus zwei Werten ausgewählt werden. Diese beiden Dialogfelder stehen über den Assistenten für neue Veröffentlichung und das Dialogfeld **Veröffentlichungseigenschaften** zur Verfügung.</span><span class="sxs-lookup"><span data-stu-id="2365b-193">The property can be set to one of two values using the **Add Filter** or **Edit Filter** dialog boxes, which are available from the New Publication Wizard and the **Publication Properties** dialog box.</span></span> <span data-ttu-id="2365b-194">Die folgende Tabelle gibt einen Überblick über die verfügbaren Werte für diese Eigenschaft:</span><span class="sxs-lookup"><span data-stu-id="2365b-194">The following table summarizes the available values:</span></span>  
  
|<span data-ttu-id="2365b-195">BESCHREIBUNG</span><span class="sxs-lookup"><span data-stu-id="2365b-195">Description</span></span>|<span data-ttu-id="2365b-196">Wert in Filter hinzufügen und Filter bearbeiten</span><span class="sxs-lookup"><span data-stu-id="2365b-196">Value in Add Filter and Edit Filter</span></span>|<span data-ttu-id="2365b-197">Wert in Artikeleigenschaften</span><span class="sxs-lookup"><span data-stu-id="2365b-197">Value in Article Properties</span></span>|<span data-ttu-id="2365b-198">Wert in gespeicherten Prozeduren</span><span class="sxs-lookup"><span data-stu-id="2365b-198">Value in stored procedures</span></span>|  
|-----------------|-----------------------------------------|---------------------------------|--------------------------------|  
|<span data-ttu-id="2365b-199">Daten in den Partitionen überlappen sich. Der Abonnent kann die Spalten, auf die im parametrisierten Filter verwiesen wird, aktualisieren.</span><span class="sxs-lookup"><span data-stu-id="2365b-199">Data in the partitions is overlapping, and the Subscriber can update columns referenced in a parameterized filter.</span></span>|<span data-ttu-id="2365b-200">**Eine Zeile aus dieser Tabelle wird an mehrere Abonnements gesendet**</span><span class="sxs-lookup"><span data-stu-id="2365b-200">**A row from this table will go to multiple subscriptions**</span></span>|<span data-ttu-id="2365b-201">**Überlappend**</span><span class="sxs-lookup"><span data-stu-id="2365b-201">**Overlapping**</span></span>|<span data-ttu-id="2365b-202">**0**</span><span class="sxs-lookup"><span data-stu-id="2365b-202">**0**</span></span>|  
|<span data-ttu-id="2365b-203">Daten in den Partitionen überlappen sich. Der Abonnent kann die Spalten, auf die in parametrisierten Filtern verwiesen wird, nicht aktualisieren.</span><span class="sxs-lookup"><span data-stu-id="2365b-203">Data in the partitions is overlapping, and the Subscriber cannot update columns referenced in a parameterized filter.</span></span>|<span data-ttu-id="2365b-204">–<sup>1</sup></span><span class="sxs-lookup"><span data-stu-id="2365b-204">N/A<sup>1</sup></span></span>|<span data-ttu-id="2365b-205">**Überlappend, Datenänderungen außerhalb der Partition nicht zulassen**</span><span class="sxs-lookup"><span data-stu-id="2365b-205">**Overlapping, disallow out-of-partition data changes**</span></span>|<span data-ttu-id="2365b-206">**1**</span><span class="sxs-lookup"><span data-stu-id="2365b-206">**1**</span></span>|  
|<span data-ttu-id="2365b-207">Daten in den Partitionen überlappen sich nicht. Die Daten werden für die Abonnements freigegeben.</span><span class="sxs-lookup"><span data-stu-id="2365b-207">Data in the partitions is not overlapping, and the data is shared between subscriptions.</span></span> <span data-ttu-id="2365b-208">Der Abonnent kann Spalten, auf die in einem parametrisierten Filter verwiesen wird, nicht aktualisieren.</span><span class="sxs-lookup"><span data-stu-id="2365b-208">The Subscriber cannot update columns referenced in a parameterized filter.</span></span>|<span data-ttu-id="2365b-209">–<sup>1</sup></span><span class="sxs-lookup"><span data-stu-id="2365b-209">N/A<sup>1</sup></span></span>|<span data-ttu-id="2365b-210">**Nicht überlappend, für mehrere Abonnements freigegeben**</span><span class="sxs-lookup"><span data-stu-id="2365b-210">**Nonoverlapping, shared between subscriptions**</span></span>|<span data-ttu-id="2365b-211">**2**</span><span class="sxs-lookup"><span data-stu-id="2365b-211">**2**</span></span>|  
|<span data-ttu-id="2365b-212">Daten in den Partitionen überlappen sich nicht. Jeder Partition ist genau ein Abonnement zugewiesen.</span><span class="sxs-lookup"><span data-stu-id="2365b-212">Data in the partitions is not overlapping, and there is a single subscription per partition.</span></span> <span data-ttu-id="2365b-213">Der Abonnent kann Spalten, auf die in einem parametrisierten Filter verwiesen wird, nicht aktualisieren. <sup>2</sup></span><span class="sxs-lookup"><span data-stu-id="2365b-213">The Subscriber cannot update columns referenced in a parameterized filter.<sup>2</sup></span></span>|<span data-ttu-id="2365b-214">**Eine Zeile aus dieser Tabelle wird nur an ein Abonnement gesendet**</span><span class="sxs-lookup"><span data-stu-id="2365b-214">**A row from this table will go to only one subscription**</span></span>|<span data-ttu-id="2365b-215">**Nicht überlappend, ein Abonnement**</span><span class="sxs-lookup"><span data-stu-id="2365b-215">**Nonoverlapping, single subscription**</span></span>|<span data-ttu-id="2365b-216">**3**</span><span class="sxs-lookup"><span data-stu-id="2365b-216">**3**</span></span>|  
  
 <span data-ttu-id="2365b-217"><sup>1</sup> wenn die zugrunde liegende Filteroption auf **0**oder **1**oder **2**festgelegt ist, wird in den Dialogfeldern **Filter hinzufügen** und **Filter bearbeiten** angezeigt, dass **eine Zeile aus dieser Tabelle in mehrere Abonnements über**tragen wird.</span><span class="sxs-lookup"><span data-stu-id="2365b-217"><sup>1</sup> If the underlying filtering option is set to **0**, or **1**, or **2**, the **Add Filter** and **Edit Filter** dialog boxes will display **A row from this table will go to multiple subscriptions**.</span></span>  
  
 <span data-ttu-id="2365b-218"><sup>2</sup> Wenn Sie diese Option angeben, kann für jede Daten Partition in diesem Artikel nur ein einzelnes Abonnement vorhanden sein.</span><span class="sxs-lookup"><span data-stu-id="2365b-218"><sup>2</sup> If you specify this option, there can only be a single subscription for each partition of data in that article.</span></span> <span data-ttu-id="2365b-219">Wird ein zweites Abonnement erstellt, in dem das Filterkriterium des neuen Abonnements die gleiche Partition ergibt wie das vorhandene Abonnement, wird das vorhandene Abonnement gelöscht.</span><span class="sxs-lookup"><span data-stu-id="2365b-219">If a second subscription is created in which the filtering criterion of the new subscription resolves to the same partition as the existing subscription, the existing subscription is dropped.</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="2365b-220">Der Wert für **partition options** muss sich danach richten, wie die Daten für mehrere Abonnenten freigegeben werden.</span><span class="sxs-lookup"><span data-stu-id="2365b-220">The **partition options** value must be set according to how data is shared by Subscribers.</span></span> <span data-ttu-id="2365b-221">Wenn Sie beispielsweise für eine Partition angeben, dass sie nicht überlappend und nur einem spezifischen Abonnenten zugewiesen sein soll, die Daten dann aber von einem anderen Abonnenten aktualisiert werden, kann dies zu einem Fehlschlagen der Synchronisierung des Merge-Agents und zu einer Nichtkonvergenz führen.</span><span class="sxs-lookup"><span data-stu-id="2365b-221">If, for example, you specify that a partition is nonoverlapping with a single subscription per partition, but data is then updated at another Subscriber, the Merge Agent can fail during synchronization and non-convergence can occur.</span></span>  
  
#### <a name="selecting-the-appropriate-partition-option"></a><span data-ttu-id="2365b-222">Auswählen der richtigen Partitionsoption</span><span class="sxs-lookup"><span data-stu-id="2365b-222">Selecting the Appropriate Partition Option</span></span>  
 <span data-ttu-id="2365b-223">Nicht überlappende Partitionen arbeiten mit vorausberechneten Partitionen zusammen, um dort, wo einige funktionale Einschränkungen akzeptabel sind, die Leistung zu verbessern.</span><span class="sxs-lookup"><span data-stu-id="2365b-223">Nonoverlapping partitions work in conjunction with precomputed partitions to improve performance in situations where some functional limitations are acceptable.</span></span> <span data-ttu-id="2365b-224">Die vorausberechneten Partitionen beschleunigen Downloads auf Abonnenten, verlangsamen aber Uploads.</span><span class="sxs-lookup"><span data-stu-id="2365b-224">Precomputed partitions quicken downloads to Subscribers, but slow uploads.</span></span> <span data-ttu-id="2365b-225">Nicht überlappende Partitionen minimieren die bei vorausberechneten Partitionen entstehenden Uploadkosten.</span><span class="sxs-lookup"><span data-stu-id="2365b-225">Nonoverlapping partitions minimize the upload cost associated with precomputed partitions.</span></span> <span data-ttu-id="2365b-226">Die Leistungsvorteile nicht überlappender Partitionen treten deutlicher hervor, wenn die verwendeten parametrisierten Filter und Joinfilter komplexer sind.</span><span class="sxs-lookup"><span data-stu-id="2365b-226">The performance benefit of nonoverlapping partitions is more noticeable when the parameterized filters and join filters used are more complex.</span></span>  
  
 <span data-ttu-id="2365b-227">Die folgenden Szenarien sollen veranschaulichen, welche Partitionsoptionen in einer Veröffentlichung ausgewählt werden sollten.</span><span class="sxs-lookup"><span data-stu-id="2365b-227">Consider the following scenarios when deciding which partition options to use in a publication.</span></span>  
  
-   [!INCLUDE[ssSampleDBCoShort](../../../includes/sssampledbcoshort-md.md)] <span data-ttu-id="2365b-228">unterhält einen mobilen Außendienst, wobei die Vertreter jeweils für einen bestimmten Postleitzahlenbereich zuständig sind.</span><span class="sxs-lookup"><span data-stu-id="2365b-228">has a mobile sales force with each sales person responsible for customers in a given zip code.</span></span> <span data-ttu-id="2365b-229">Die Anwendung soll in der Lage sein, bei Umzügen von Kunden von einem Postleitzahlenbereich in einen anderen die Kundenpostleitzahl so zu aktualisieren, dass der Kunde einem anderen Vertreter zugewiesen wird.</span><span class="sxs-lookup"><span data-stu-id="2365b-229">The application requires that  the zip code be updated if a customer moves from one sales territory to another, so that the customer is assigned to a different sales person.</span></span> <span data-ttu-id="2365b-230">Der parametrisierte Filter basiert auf der Postleitzahl des Kunden. Das Update führt dazu, dass die Postleitzahl aus der Partition des früheren Vertreters entfernt und in die Partition des neuen Vertreters eingefügt wird.</span><span class="sxs-lookup"><span data-stu-id="2365b-230">The parameterized filter is based on the customer's zip code, and the update removes the zip code from one sales person's partition and inserts it into another sales person's partition.</span></span> <span data-ttu-id="2365b-231">Dafür sind überlappende Partitionen mit der Möglichkeit erforderlich, Spalten zu aktualisieren, auf die im parametrisierten Filter verwiesen wird.</span><span class="sxs-lookup"><span data-stu-id="2365b-231">This requires overlapping partitions with the ability to update columns referenced in a parameterized filter.</span></span> <span data-ttu-id="2365b-232">Diese Option bietet ein Höchstmaß an Flexibilität, führt aber im Vergleich zu nicht überlappenden Partitionen zu Einbußen bei der Leistung.</span><span class="sxs-lookup"><span data-stu-id="2365b-232">This option maximizes flexibility but might not perform as well as nonoverlapping partitions.</span></span>  
  
-   <span data-ttu-id="2365b-233">Eine Arbeitsvermittlung verfügt über Daten, die an die untergeordneten Behörden in den einzelnen Landkreisen verteilt werden sollen.</span><span class="sxs-lookup"><span data-stu-id="2365b-233">An employment agency has data that is supplied to regional offices in each county of the state.</span></span> <span data-ttu-id="2365b-234">Die Daten sind nicht überlappend, d. h., jede Zeile in der Tabelle in der Landeszentrale gehört nur zu einer Partition, diese Partition wird aber an mehrere Außenstellen im selben Landkreis gesendet.</span><span class="sxs-lookup"><span data-stu-id="2365b-234">The data does not overlap; each row in the table at the agency's headquarters is included in only one partition, but that partition is sent to multiple offices in the same county.</span></span> <span data-ttu-id="2365b-235">In diesem Fall empfiehlt sich die Verwendung von nicht überlappenden Partitionen, die für mehrere Abonnements freigegeben werden. Dies ermöglicht eine höhere Leistung als bei überlappenden Partitionen, ohne dass dabei Abstriche an der Erfüllung der Anwendungsanforderungen gemacht werden müssen.</span><span class="sxs-lookup"><span data-stu-id="2365b-235">The nonoverlapping partition option with partitions shared between subscriptions is appropriate, providing a performance improvement over overlapping partitions while satisfying the application requirements.</span></span>  
  
-   <span data-ttu-id="2365b-236">Wenn Sie nicht überlappende Partitionen haben und nur ein Abonnent die Daten in der Partition empfängt und aktualisiert, lassen sich weitere Leistungsverbesserungen erzielen.</span><span class="sxs-lookup"><span data-stu-id="2365b-236">If you have nonoverlapping partitions and only one subscription receives and updates the data in a partition, further performance benefits can be realized.</span></span> <span data-ttu-id="2365b-237">Dieses Szenario ist beispielsweise für Point-of-Sale-Systeme und Außendienstanwendungen typisch, in denen Daten vor allem auf dem Abonnenten erfasst und zum Verleger hochgeladen werden.</span><span class="sxs-lookup"><span data-stu-id="2365b-237">This scenario is common for point of sale systems, and field force applications in which data is primarily collected at the Subscriber and uploaded to the Publisher.</span></span> <span data-ttu-id="2365b-238">Angenommen, in einer Außendienstanwendung ist eine **Package** -Tabelle vorhanden: Jedes Mal, wenn ein Paket auf einen LKW verladen wird, wird der Status des Pakets in der **Package** -Tabelle entsprechend geändert, und die Änderung wird an die Zentrale zurückrepliziert.</span><span class="sxs-lookup"><span data-stu-id="2365b-238">Consider a **Package** table in a delivery application: as each package is loaded onto a truck, the status of the package is changed in the **Package** table, and the change is replicated back to headquarters.</span></span> <span data-ttu-id="2365b-239">Da der Status ein und desselben Pakets nicht auf zwei unterschiedlichen LKWs aktualisiert werden wird, eignet sich die **Package** -Tabelle hervorragend für eine nicht überlappende Partition mit einem Abonnenten pro Partition.</span><span class="sxs-lookup"><span data-stu-id="2365b-239">Drivers would not update the status of the same package on two different trucks, so the **Package** table is a good candidate for a nonoverlapping partition with a single subscription per partition.</span></span>  
  
#### <a name="considerations-for-nonoverlapping-partitions"></a><span data-ttu-id="2365b-240">Überlegungen zu nicht überlappenden Partitionen</span><span class="sxs-lookup"><span data-stu-id="2365b-240">Considerations for Nonoverlapping Partitions</span></span>  
 <span data-ttu-id="2365b-241">Beachten Sie bei der Verwendung von nicht überlappenden Partitionen Folgendes:</span><span class="sxs-lookup"><span data-stu-id="2365b-241">Keep the following considerations in mind when using nonoverlapping partitions.</span></span>  
  
##### <a name="general-considerations"></a><span data-ttu-id="2365b-242">Allgemeine Überlegungen</span><span class="sxs-lookup"><span data-stu-id="2365b-242">General Considerations</span></span>  
  
-   <span data-ttu-id="2365b-243">Die Veröffentlichung muss vorausberechnete Partitionen verwenden.</span><span class="sxs-lookup"><span data-stu-id="2365b-243">The publication must use precomputed partitions.</span></span>  
  
-   <span data-ttu-id="2365b-244">Jede Zeile darf nur zu einer einzigen Partition gehören.</span><span class="sxs-lookup"><span data-stu-id="2365b-244">A row must belong to only one partition.</span></span>  
  
-   <span data-ttu-id="2365b-245">Artikel dürfen nicht Teil logischer Datensätze sein.</span><span class="sxs-lookup"><span data-stu-id="2365b-245">Articles cannot be part of a logical record.</span></span>  
  
-   <span data-ttu-id="2365b-246">Alternative Synchronisierungspartner werden nicht unterstützt (diese Funktion ist als veraltet markiert).</span><span class="sxs-lookup"><span data-stu-id="2365b-246">Alternate synchronization partners are not supported (this feature is deprecated).</span></span>  
  
-   <span data-ttu-id="2365b-247">Der Abonnent kann Spalten, auf die in einem parametrisierten Filter verwiesen wird, nicht aktualisieren.</span><span class="sxs-lookup"><span data-stu-id="2365b-247">The Subscriber cannot update columns referenced in a parameterized filter.</span></span>  
  
-   <span data-ttu-id="2365b-248">Wenn eine Einfügung bei einem Abonnenten nicht zur Partition gehört, wird sie nicht gelöscht.</span><span class="sxs-lookup"><span data-stu-id="2365b-248">If an insert at a Subscriber does not belong to the partition, it is not deleted.</span></span> <span data-ttu-id="2365b-249">Sie wird aber auch nicht auf die anderen Abonnenten repliziert.</span><span class="sxs-lookup"><span data-stu-id="2365b-249">However, it will not be replicated to other Subscribers.</span></span>  
  
-   <span data-ttu-id="2365b-250">In einigen Fällen kann es bei überlappenden Partitionen passieren, dass Identitätsbereiche angepasst werden, wenn der Merge-Agent Daten einfügt.</span><span class="sxs-lookup"><span data-stu-id="2365b-250">In some circumstances with overlapping partitions, identity ranges are adjusted when the Merge Agent inserts data.</span></span> <span data-ttu-id="2365b-251">Bei nicht überlappenden Partitionen können Bereiche nur während des Einfügens durch einen Benutzer angepasst werden, der zur Anpassung von Identitätsbereichen in der Abonnementdatenbank berechtigt ist.</span><span class="sxs-lookup"><span data-stu-id="2365b-251">With nonoverlapping partitions, ranges can only be adjusted during inserts by a user who has permission to adjust identity ranges in the subscription database.</span></span> <span data-ttu-id="2365b-252">Der Benutzer muss die Tabelle besitzen oder Mitglied der festen Serverrolle **sysadmin** bzw. der festen Datenbankrolle **db_owner** oder **db_ddladmin** sein.</span><span class="sxs-lookup"><span data-stu-id="2365b-252">The user must either own the table, or be a member of the **sysadmin** fixed server role, the **db_owner** fixed database role, or the **db_ddladmin** fixed database role.</span></span>  
  
##### <a name="additional-considerations-for-nonoverlapping-partitions-with-a-single-subscription-per-partition"></a><span data-ttu-id="2365b-253">Zusätzliche Überlegungen für nicht überlappende Partitionen mit einem Abonnenten pro Partition</span><span class="sxs-lookup"><span data-stu-id="2365b-253">Additional Considerations for Nonoverlapping Partitions with a Single Subscription per Partition</span></span>  
  
-   <span data-ttu-id="2365b-254">Artikel können immer nur in einer Veröffentlichung vorhanden sein. Ein erneutes Veröffentlichen ist nicht möglich.</span><span class="sxs-lookup"><span data-stu-id="2365b-254">Articles can exist in only one publication; articles cannot be republished.</span></span>  
  
-   <span data-ttu-id="2365b-255">Die Veröffentlichung muss das Initiieren des Momentaufnahmeprozesses durch Abonnenten zulassen.</span><span class="sxs-lookup"><span data-stu-id="2365b-255">The publication must allow Subscribers to initiate the snapshot process.</span></span> <span data-ttu-id="2365b-256">Weitere Informationen finden Sie unter [Snapshots for Merge Publications with Parameterized Filters](../snapshots-for-merge-publications-with-parameterized-filters.md).</span><span class="sxs-lookup"><span data-stu-id="2365b-256">For more information, see [Snapshots for Merge Publications with Parameterized Filters](../snapshots-for-merge-publications-with-parameterized-filters.md).</span></span>  
  
##### <a name="additional-considerations-for-join-filters"></a><span data-ttu-id="2365b-257">Zusätzliche Überlegungen zu Joinfiltern</span><span class="sxs-lookup"><span data-stu-id="2365b-257">Additional Considerations for Join Filters</span></span>  
  
-   <span data-ttu-id="2365b-258">Artikel mit einer überlappenden Partition dürfen in Joinfilterhierarchien nicht oberhalb von Artikeln mit einer nicht überlappenden Partition angezeigt werden.</span><span class="sxs-lookup"><span data-stu-id="2365b-258">In a join filter hierarchy, an article with an overlapping partition cannot appear above an article with a nonoverlapping partition.</span></span> <span data-ttu-id="2365b-259">Anders ausgedrückt: Ein übergeordneter Artikel muss nicht überlappende Partitionen verwenden, wenn dies für den untergeordneten Artikel zutrifft.</span><span class="sxs-lookup"><span data-stu-id="2365b-259">In other words, a parent article must use nonoverlapping partitions if the child article does.</span></span> <span data-ttu-id="2365b-260">Informationen zu Joinfiltern finden Sie unter [Join Filters](join-filters.md).</span><span class="sxs-lookup"><span data-stu-id="2365b-260">For information about join filters, see [Join Filters](join-filters.md).</span></span>  
  
-   <span data-ttu-id="2365b-261">Bei Joinfiltern, in denen die nicht überlappende Partition untergeordnet ist, muss für die **join unique key** -Eigenschaft der Wert 1 festgelegt sein.</span><span class="sxs-lookup"><span data-stu-id="2365b-261">A join filter in which the nonoverlapping partition is a child must have the **join unique key** property set to 1.</span></span> <span data-ttu-id="2365b-262">Weitere Informationen finden Sie unter [Join Filters](join-filters.md).</span><span class="sxs-lookup"><span data-stu-id="2365b-262">For more information, see [Join Filters](join-filters.md).</span></span>  
  
-   <span data-ttu-id="2365b-263">Der Artikel sollte nur einen einzigen parametrisierten Filter bzw. Joinfilter aufweisen.</span><span class="sxs-lookup"><span data-stu-id="2365b-263">The article should only have one parameterized filter or join filter.</span></span> <span data-ttu-id="2365b-264">Ein Artikel darf einen parametrisierten Filter aufweisen und gleichzeitig in einem Joinfilter übergeordnet sein.</span><span class="sxs-lookup"><span data-stu-id="2365b-264">Having a parameterized filter and being the parent in a join filter is allowed.</span></span> <span data-ttu-id="2365b-265">Hingegen ist es nicht möglich, dass ein Artikel einen parametrisierten Filter aufweist und gleichzeitig in einem Joinfilter untergeordnet ist.</span><span class="sxs-lookup"><span data-stu-id="2365b-265">Having a parameterized filter and being the child in a join filter is not allowed.</span></span> <span data-ttu-id="2365b-266">Darüber hinaus darf der Artikel nicht über mehrere Joinfilter verfügen.</span><span class="sxs-lookup"><span data-stu-id="2365b-266">Having more than one join filter is also not allowed.</span></span>  
  
-   <span data-ttu-id="2365b-267">Wenn zwei Tabellen auf dem Abonnenten über eine Joinfilterbeziehung verfügen und die untergeordnete Tabelle Zeilen enthält, für die es in der übergeordneten Tabelle keine entsprechende Zeile gibt, führt das Einfügen der fehlenden übergeordneten Zeile nicht dazu, dass die zugehörigen Zeilen auf den Abonnenten heruntergeladen werden (bei überlappenden Partitionen würde ein Download erfolgen).</span><span class="sxs-lookup"><span data-stu-id="2365b-267">If two tables at the Publisher have a join filter relationship and the child table has rows that have no corresponding row in the parent table, an insert of the missing parent row will not result in the related rows being downloaded to the Subscriber (the rows would be downloaded with overlapping partitions).</span></span> <span data-ttu-id="2365b-268">Wenn z. B. die **SalesOrderDetail** -Tabelle über Zeilen ohne zugehörige Zeile in der **SalesOrderHeader** -Tabelle verfügt und Sie die fehlende Zeile in **SalesOrderHeader**einfügen, wird zwar die Zeile auf dem Abonnenten heruntergeladen, nicht aber die zugehörigen Zeilen in **SalesOrderDetail** .</span><span class="sxs-lookup"><span data-stu-id="2365b-268">For example, if the **SalesOrderDetail** table has rows with no corresponding row in the **SalesOrderHeader** table, and you insert the missing row in **SalesOrderHeader**, the row is downloaded to the Subscriber, but the corresponding rows in **SalesOrderDetail** are not.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="2365b-269">Weitere Informationen</span><span class="sxs-lookup"><span data-stu-id="2365b-269">See Also</span></span>  
 <span data-ttu-id="2365b-270">[Bewährte Methoden für zeitbasierte Zeilenfilter](best-practices-for-time-based-row-filters.md) </span><span class="sxs-lookup"><span data-stu-id="2365b-270">[Best Practices for Time-Based Row Filters](best-practices-for-time-based-row-filters.md) </span></span>  
 <span data-ttu-id="2365b-271">[Filtern von veröffentlichten Daten](../publish/filter-published-data.md) </span><span class="sxs-lookup"><span data-stu-id="2365b-271">[Filter Published Data](../publish/filter-published-data.md) </span></span>  
 [<span data-ttu-id="2365b-272">Filtern veröffentlichter Daten für die Mergereplikation</span><span class="sxs-lookup"><span data-stu-id="2365b-272">Filter Published Data for Merge Replication</span></span>](filter-published-data-for-merge-replication.md)  
  
  
