---
title: Konfigurieren der Veröffentlichung und der Verteilung | Microsoft Dokumentation
ms.custom: ''
ms.date: 06/30/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: replication
ms.topic: conceptual
helpviewer_keywords:
- replication [SQL Server], distribution
- distribution configuration [SQL Server replication]
- publishing [SQL Server replication], configuring
ms.assetid: 3cfc8966-833e-42fa-80cb-09175d1feed7
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: afd1544b5412c6ce2d83a9a1e9a50ddf662b3056
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 08/04/2020
ms.locfileid: "87608589"
---
# <a name="configure-publishing-and-distribution"></a><span data-ttu-id="a3aaf-102">Konfigurieren der Veröffentlichung und der Verteilung</span><span class="sxs-lookup"><span data-stu-id="a3aaf-102">Configure Publishing and Distribution</span></span>
  <span data-ttu-id="a3aaf-103">In diesem Thema wird beschrieben, wie die Veröffentlichung und die Verteilung in [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] mithilfe von [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)], [!INCLUDE[tsql](../../includes/tsql-md.md)]oder Replikationsverwaltungsobjekten (RMO) konfiguriert werden.</span><span class="sxs-lookup"><span data-stu-id="a3aaf-103">This topic describes how to configure publishing and distribution in [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] by using [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)], [!INCLUDE[tsql](../../includes/tsql-md.md)], or Replication Management Objects (RMO).</span></span>  
  
  
##  <a name="before-you-begin"></a><a name="BeforeYouBegin"></a> <span data-ttu-id="a3aaf-104">Vorbereitungen</span><span class="sxs-lookup"><span data-stu-id="a3aaf-104">Before You Begin</span></span>  
  
###  <a name="security"></a><a name="Security"></a> <span data-ttu-id="a3aaf-105">Sicherheit</span><span class="sxs-lookup"><span data-stu-id="a3aaf-105">Security</span></span>  
 <span data-ttu-id="a3aaf-106">Weitere Informationen finden Sie unter [sichere Replikations Bereitstellung](security/view-and-modify-replication-security-settings.md).</span><span class="sxs-lookup"><span data-stu-id="a3aaf-106">For more information, see [Secure Replication Deployment](security/view-and-modify-replication-security-settings.md).</span></span>  
  
##  <a name="using-sql-server-management-studio"></a><a name="SSMSProcedure"></a> <span data-ttu-id="a3aaf-107">Verwenden von SQL Server Management Studio</span><span class="sxs-lookup"><span data-stu-id="a3aaf-107">Using SQL Server Management Studio</span></span>  
 <span data-ttu-id="a3aaf-108">Sie konfigurieren die Verteilung mit dem Assistenten für neue Veröffentlichung oder mit dem Verteilungskonfigurations-Assistenten.</span><span class="sxs-lookup"><span data-stu-id="a3aaf-108">Configure distribution using the New Publication Wizard or the Configure Distribution Wizard.</span></span> <span data-ttu-id="a3aaf-109">Rufen Sie nach der Konfiguration des Verteilers das Dialogfeld **Verteilereigenschaften – \<Distributor>** auf, und ändern Sie die Eigenschaften.</span><span class="sxs-lookup"><span data-stu-id="a3aaf-109">After the Distributor is configured, view and modify properties in the **Distributor Properties - \<Distributor>** dialog box.</span></span> <span data-ttu-id="a3aaf-110">Verwenden Sie den Verteilungskonfigurations-Assistenten, wenn Sie einen Verteiler so konfigurieren möchten, dass die Mitglieder der festen Datenbankrollen **db_owner** Veröffentlichungen erstellen können, oder wenn Sie einen Remoteverteiler konfigurieren möchten, bei dem es sich nicht um einen Verleger handelt.</span><span class="sxs-lookup"><span data-stu-id="a3aaf-110">Use the Configure Distribution Wizard if you want to configure a Distributor so that members of the **db_owner** fixed database roles can create publications, or because you want to configure a remote Distributor that is not a Publisher.</span></span>  
  
#### <a name="to-configure-distribution"></a><span data-ttu-id="a3aaf-111">So konfigurieren Sie die Verteilung</span><span class="sxs-lookup"><span data-stu-id="a3aaf-111">To configure distribution</span></span>  
  
1.  <span data-ttu-id="a3aaf-112">Stellen Sie in [!INCLUDE[msCoName](../../includes/msconame-md.md)] [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)]eine Verbindung mit dem Server her, der als Verteiler fungieren soll, und erweitern Sie den Serverknoten (in vielen Fällen handelt es sich beim Verleger und beim Verteiler um denselben Server).</span><span class="sxs-lookup"><span data-stu-id="a3aaf-112">In [!INCLUDE[msCoName](../../includes/msconame-md.md)] [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)], connect to the server that will be the Distributor (in many cases, the Publisher and Distributor are the same server), and then expand the server node.</span></span>  
  
2.  <span data-ttu-id="a3aaf-113">Klicken Sie mit der rechten Maustaste auf den Ordner **Replikation** , und klicken Sie dann auf **Verteilung konfigurieren**.</span><span class="sxs-lookup"><span data-stu-id="a3aaf-113">Right-click the **Replication** folder, and then click **Configure Distribution**.</span></span>  
  
3.  <span data-ttu-id="a3aaf-114">Befolgen Sie die Anweisungen im Verteilungskonfigurations-Assistenten, um folgende Vorgänge auszuführen:</span><span class="sxs-lookup"><span data-stu-id="a3aaf-114">Follow the Configure Distribution Wizard to:</span></span>  
  
    -   <span data-ttu-id="a3aaf-115">Auswählen eines Verteilers.</span><span class="sxs-lookup"><span data-stu-id="a3aaf-115">Select a Distributor.</span></span> <span data-ttu-id="a3aaf-116">Wählen Sie zum Verwenden eines lokalen Verteilers **" \<ServerName> " als seinen eigenen Verteiler aus. SQL Server erstellt eine Verteilungs Datenbank und ein Protokoll**.</span><span class="sxs-lookup"><span data-stu-id="a3aaf-116">To use a local Distributor, select **'\<ServerName>' will act as its own Distributor; SQL Server will create a distribution database and log**.</span></span> <span data-ttu-id="a3aaf-117">Aktivieren Sie zum Verwenden eines Remoteverteilers **Folgenden Server als Verteiler verwenden**, und wählen Sie dann einen Server aus.</span><span class="sxs-lookup"><span data-stu-id="a3aaf-117">To use a remote Distributor, select **Use the following server as the Distributor**, and then select a server.</span></span> <span data-ttu-id="a3aaf-118">Der Server muss bereits als Verteiler konfiguriert sein, und auf dem Verleger muss die Verwendung des Verteilers aktiviert sein.</span><span class="sxs-lookup"><span data-stu-id="a3aaf-118">The server must already be configured as a Distributor, and the Publisher must be enabled to use the Distributor.</span></span> <span data-ttu-id="a3aaf-119">Weitere Informationen hierzu finden Sie unter [Aktivieren eines Remoteverlegers auf einem Verteiler &#40;SQL Server Management Studio&#41;](enable-a-remote-publisher-at-a-distributor-sql-server-management-studio.md).</span><span class="sxs-lookup"><span data-stu-id="a3aaf-119">For more information, see [Enable a Remote Publisher at a Distributor &#40;SQL Server Management Studio&#41;](enable-a-remote-publisher-at-a-distributor-sql-server-management-studio.md).</span></span>  
  
         <span data-ttu-id="a3aaf-120">Wenn Sie einen Remoteverteiler auswählen, müssen Sie auf der Seite **Administratorkennwort** ein Kennwort für Verbindungen eingeben, die zwischen dem Verleger und dem Verteiler hergestellt werden.</span><span class="sxs-lookup"><span data-stu-id="a3aaf-120">If you select a remote Distributor, you must enter a password on the **Administrative Password** page for connections made from the Publisher to the Distributor.</span></span> <span data-ttu-id="a3aaf-121">Dieses Kennwort muss mit dem Kennwort übereinstimmen, dass bei der Aktivierung des Verlegers auf dem Remoteverteiler angegeben wurde.</span><span class="sxs-lookup"><span data-stu-id="a3aaf-121">This password must match the password specified when the Publisher was enabled at the remote Distributor.</span></span>  
  
    -   <span data-ttu-id="a3aaf-122">Geben Sie einen Stammordner der Momentaufnahmen an (für einen lokalen Verteiler).</span><span class="sxs-lookup"><span data-stu-id="a3aaf-122">Specify a root snapshot folder (for a local Distributor).</span></span> <span data-ttu-id="a3aaf-123">Der Momentaufnahmeordner ist lediglich ein von Ihnen freigegebenes Verzeichnis. Agents, die aus diesem Ordner lesen bzw. in den Ordner schreiben, benötigen ausreichende Zugriffsberechtigungen.</span><span class="sxs-lookup"><span data-stu-id="a3aaf-123">The snapshot folder is simply a directory that you have designated as a share; agents that read from and write to this folder must have sufficient permissions to access it.</span></span> <span data-ttu-id="a3aaf-124">Jeder Verleger, der diesen Verteiler verwendet, erstellt einen Unterordner des Stammordners, und jede Veröffentlichung erstellt Unterordner des Verlegerordners, in dem die Momentaufnahmedateien gespeichert werden.</span><span class="sxs-lookup"><span data-stu-id="a3aaf-124">Each Publisher that uses this Distributor creates a folder under the root folder, and each publication creates folders under the Publisher folder in which to store snapshot files.</span></span> <span data-ttu-id="a3aaf-125">Weitere Informationen zum angemessenen Sichern des Ordners finden Sie unter [Sichern des Momentaufnahmeordners](security/secure-the-snapshot-folder.md).</span><span class="sxs-lookup"><span data-stu-id="a3aaf-125">For more information on securing the folder appropriately, see [Secure the Snapshot Folder](security/secure-the-snapshot-folder.md).</span></span>  
  
    -   <span data-ttu-id="a3aaf-126">Geben Sie die Verteilungsdatenbank (für einen lokalen Verteiler) an.</span><span class="sxs-lookup"><span data-stu-id="a3aaf-126">Specify the distribution database (for a local Distributor).</span></span> <span data-ttu-id="a3aaf-127">In der Verteilungsdatenbank werden Metadaten und Verlaufsdaten für alle Replikations- und Transaktionstypen für die Transaktionsreplikation gespeichert.</span><span class="sxs-lookup"><span data-stu-id="a3aaf-127">The distribution database stores metadata and history data for all types of replication and transactions for transactional replication.</span></span>  
  
    -   <span data-ttu-id="a3aaf-128">Optional können Sie weitere Verleger für die Verwendung des Verteilers aktivieren.</span><span class="sxs-lookup"><span data-stu-id="a3aaf-128">Optionally enable other Publishers to use the Distributor.</span></span> <span data-ttu-id="a3aaf-129">Wenn die Verwendung des Verteilers auf anderen Verlegern aktiviert ist, müssen Sie auf der Seite **Verteilerkennwort** ein Kennwort für Verbindungen eingeben, die zwischen diesen Verlegern und dem Verteiler hergestellt werden.</span><span class="sxs-lookup"><span data-stu-id="a3aaf-129">If other Publishers are enabled to use the Distributor, you must enter a password on the **Distributor Password** page for connections made from these Publishers to the Distributor.</span></span>  
  
    -   <span data-ttu-id="a3aaf-130">Erstellen Sie optional ein Skript für die Konfigurationseinstellungen.</span><span class="sxs-lookup"><span data-stu-id="a3aaf-130">Optionally script configuration settings.</span></span> <span data-ttu-id="a3aaf-131">Weitere Informationen finden Sie unter [Scripting Replication](scripting-replication.md).</span><span class="sxs-lookup"><span data-stu-id="a3aaf-131">For more information, see [Scripting Replication](scripting-replication.md).</span></span>  
  
##  <a name="using-transact-sql"></a><a name="TsqlProcedure"></a> <span data-ttu-id="a3aaf-132">Verwenden von Transact-SQL</span><span class="sxs-lookup"><span data-stu-id="a3aaf-132">Using Transact-SQL</span></span>  
 <span data-ttu-id="a3aaf-133">Die Replikationsveröffentlichung und -verteilung kann mit gespeicherten Replikationsprozeduren programmgesteuert konfiguriert werden.</span><span class="sxs-lookup"><span data-stu-id="a3aaf-133">Replication publishing and distribution can be configured programmatically using replication stored procedures.</span></span>  
  
#### <a name="to-configure-publishing-using-a-local-distributor"></a><span data-ttu-id="a3aaf-134">So konfigurieren Sie die Veröffentlichung mit einem lokalen Verteiler</span><span class="sxs-lookup"><span data-stu-id="a3aaf-134">To configure publishing using a local distributor</span></span>  
  
1.  <span data-ttu-id="a3aaf-135">Führen Sie [sp_get_distributor &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-get-distributor-transact-sql) aus, um zu ermitteln, ob der Server bereits als Verteiler konfiguriert ist.</span><span class="sxs-lookup"><span data-stu-id="a3aaf-135">Execute [sp_get_distributor &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-get-distributor-transact-sql) to determine if the server is already configured as a Distributor.</span></span>  
  
    -   <span data-ttu-id="a3aaf-136">Wenn der Wert von **installed** im Resultset gleich **0** ist, führen Sie [sp_adddistributor &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-adddistributor-transact-sql) auf dem Verteiler für die master-Datenbank aus.</span><span class="sxs-lookup"><span data-stu-id="a3aaf-136">If the value of **installed** in the result set is **0**, execute [sp_adddistributor &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-adddistributor-transact-sql) at the Distributor on the master database.</span></span>  
  
    -   <span data-ttu-id="a3aaf-137">Wenn der Wert von **distribution db installed** im Resultset gleich **0** ist, führen Sie [sp_adddistributiondb &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-adddistributiondb-transact-sql) auf dem Verteiler für die master-Datenbank aus.</span><span class="sxs-lookup"><span data-stu-id="a3aaf-137">If the value of **distribution db installed** in the result set is **0**, execute [sp_adddistributiondb &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-adddistributiondb-transact-sql) at the Distributor on the master database.</span></span> <span data-ttu-id="a3aaf-138">Geben Sie den Namen der Verteilungs Datenbank für die \*\* \@ Datenbank\*\*an.</span><span class="sxs-lookup"><span data-stu-id="a3aaf-138">Specify the name of the distribution database for **\@database**.</span></span> <span data-ttu-id="a3aaf-139">Optional können Sie die maximale Transaktions Beibehaltungs Dauer für \*\* \@ max_distretention\*\* und die Beibehaltungs Dauer für den Verlauf \*\* \@ history_retention\*\*angeben.</span><span class="sxs-lookup"><span data-stu-id="a3aaf-139">Optionally, you can specify the maximum transactional retention period for **\@max_distretention** and the history retention period for **\@history_retention**.</span></span> <span data-ttu-id="a3aaf-140">Wenn eine neue Datenbank erstellt wird, geben Sie die gewünschten Eigenschaftenparameter für die Datenbank an.</span><span class="sxs-lookup"><span data-stu-id="a3aaf-140">If a new database is being created, specify the desired database property parameters.</span></span>  
  
2.  <span data-ttu-id="a3aaf-141">Führen Sie auf dem Verteiler, der auch der Verleger ist, [sp_adddistpublisher &#40;Transact-SQL-&#41;](/sql/relational-databases/system-stored-procedures/sp-adddistpublisher-transact-sql)aus, und geben Sie die UNC-Freigabe an, die als Standard Momentaufnahme-Ordner für \*\* \@ working_directory\*\*verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="a3aaf-141">At the Distributor, which is also the Publisher, execute [sp_adddistpublisher &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-adddistpublisher-transact-sql), specifying the UNC share that will be used as default snapshot folder for **\@working_directory**.</span></span>  
  
3.  <span data-ttu-id="a3aaf-142">Führen Sie [sp_replicationdboption &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-replicationdboption-transact-sql) auf dem Verleger aus.</span><span class="sxs-lookup"><span data-stu-id="a3aaf-142">At the Publisher, execute [sp_replicationdboption &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-replicationdboption-transact-sql).</span></span> <span data-ttu-id="a3aaf-143">Geben Sie die zu veröffentlichende Datenbank für \*\* \@ dbname**, den Replikationstyp für \*\* \@ optname**und den Wert `true` für \*\* \@ Wert\*\*an.</span><span class="sxs-lookup"><span data-stu-id="a3aaf-143">Specify the database being published for **\@dbname**, the type of replication for **\@optname**, and a value of `true` for **\@value**.</span></span>  
  
#### <a name="to-configure-publishing-using-a-remote-distributor"></a><span data-ttu-id="a3aaf-144">So konfigurieren Sie die Veröffentlichung mit einem Remoteverteiler</span><span class="sxs-lookup"><span data-stu-id="a3aaf-144">To configure publishing using a remote distributor</span></span>  
  
1.  <span data-ttu-id="a3aaf-145">Führen Sie [sp_get_distributor &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-get-distributor-transact-sql) aus, um zu ermitteln, ob der Server bereits als Verteiler konfiguriert ist.</span><span class="sxs-lookup"><span data-stu-id="a3aaf-145">Execute [sp_get_distributor &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-get-distributor-transact-sql) to determine if the server is already configured as a Distributor.</span></span>  
  
    -   <span data-ttu-id="a3aaf-146">Wenn der Wert von **installed** im Resultset gleich **0** ist, führen Sie [sp_adddistributor &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-adddistributor-transact-sql) auf dem Verteiler für die master-Datenbank aus.</span><span class="sxs-lookup"><span data-stu-id="a3aaf-146">If the value of **installed** in the result set is **0**, execute [sp_adddistributor &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-adddistributor-transact-sql) at the Distributor on the master database.</span></span> <span data-ttu-id="a3aaf-147">Geben Sie ein sicheres Kennwort für das \*\* \@ Kennwort\*\*an.</span><span class="sxs-lookup"><span data-stu-id="a3aaf-147">Specify a strong password for **\@password**.</span></span> <span data-ttu-id="a3aaf-148">Dieses Kennwort für das **distributor_admin** -Konto wird vom Verleger verwendet, wenn er eine Verbindung zum Verteiler herstellt.</span><span class="sxs-lookup"><span data-stu-id="a3aaf-148">This password for the **distributor_admin** account will be used by the Publisher when connecting to the Distributor.</span></span>  
  
    -   <span data-ttu-id="a3aaf-149">Wenn der Wert von **distribution db installed** im Resultset gleich **0** ist, führen Sie [sp_adddistributiondb &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-adddistributiondb-transact-sql) auf dem Verteiler für die master-Datenbank aus.</span><span class="sxs-lookup"><span data-stu-id="a3aaf-149">If the value of **distribution db installed** in the result set is **0**, execute [sp_adddistributiondb &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-adddistributiondb-transact-sql) at the Distributor on the master database.</span></span> <span data-ttu-id="a3aaf-150">Geben Sie den Namen der Verteilungs Datenbank für die \*\* \@ Datenbank\*\*an.</span><span class="sxs-lookup"><span data-stu-id="a3aaf-150">Specify the name of the distribution database for **\@database**.</span></span> <span data-ttu-id="a3aaf-151">Optional können Sie die maximale Transaktions Beibehaltungs Dauer für \*\* \@ max_distretention\*\* und die Beibehaltungs Dauer für den Verlauf \*\* \@ history_retention\*\*angeben.</span><span class="sxs-lookup"><span data-stu-id="a3aaf-151">Optionally, you can specify the maximum transactional retention period for **\@max_distretention** and the history retention period for **\@history_retention**.</span></span> <span data-ttu-id="a3aaf-152">Wenn eine neue Datenbank erstellt wird, geben Sie die gewünschten Eigenschaftenparameter für die Datenbank an.</span><span class="sxs-lookup"><span data-stu-id="a3aaf-152">If a new database is being created, specify the desired database property parameters.</span></span>  
  
2.  <span data-ttu-id="a3aaf-153">Führen Sie auf dem Verteiler [sp_adddistpublisher &#40;Transact-SQL-&#41;](/sql/relational-databases/system-stored-procedures/sp-adddistpublisher-transact-sql)aus, und geben Sie die UNC-Freigabe an, die als Standard Momentaufnahme-Ordner für \*\* \@ working_directory\*\*verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="a3aaf-153">At the Distributor, execute [sp_adddistpublisher &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-adddistpublisher-transact-sql), specifying the UNC share that will be used as default snapshot folder for **\@working_directory**.</span></span> <span data-ttu-id="a3aaf-154">Wenn der Verteiler [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] beim Herstellen der Verbindung mit dem Verleger die-Authentifizierung verwendet, müssen Sie auch den Wert **0** für \*\* \@ security_mode\*\* und die [!INCLUDE[msCoName](../../includes/msconame-md.md)] [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Anmelde Informationen für den \*\* \@ Anmelde\*\* Namen und das \*\* \@ Kennwort\*\*angeben.</span><span class="sxs-lookup"><span data-stu-id="a3aaf-154">If the Distributor will use [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Authentication when connecting to the Publisher, you must also specify a value of **0** for **\@security_mode** and the [!INCLUDE[msCoName](../../includes/msconame-md.md)] [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] login information for **\@login** and **\@password**.</span></span>  
  
3.  <span data-ttu-id="a3aaf-155">Führen Sie auf dem Verleger für die master-Datenbank die Prozedur [sp_adddistributor &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-adddistributor-transact-sql) aus.</span><span class="sxs-lookup"><span data-stu-id="a3aaf-155">At the Publisher on the master database, execute [sp_adddistributor &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-adddistributor-transact-sql).</span></span> <span data-ttu-id="a3aaf-156">Geben Sie das in Schritt 1 für das \*\* \@ Kennwort\*\*verwendete starke Kennwort an.</span><span class="sxs-lookup"><span data-stu-id="a3aaf-156">Specify the strong password used in step 1 for **\@password**.</span></span> <span data-ttu-id="a3aaf-157">Dieses Kennwort wird vom Verleger verwendet, wenn er eine Verbindung zum Verteiler herstellt.</span><span class="sxs-lookup"><span data-stu-id="a3aaf-157">This password will be used by the Publisher when connecting to the Distributor.</span></span>  
  
4.  <span data-ttu-id="a3aaf-158">Führen Sie [sp_replicationdboption &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-replicationdboption-transact-sql) auf dem Verleger aus.</span><span class="sxs-lookup"><span data-stu-id="a3aaf-158">At the Publisher, execute [sp_replicationdboption &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-replicationdboption-transact-sql).</span></span> <span data-ttu-id="a3aaf-159">Geben Sie die zu veröffentlichende Datenbank für \*\* \@ dbname**, den Replikationstyp für \*\* \@ optname**und den Wert true für \*\* \@ value\*\*an.</span><span class="sxs-lookup"><span data-stu-id="a3aaf-159">Specify the database being published for **\@dbname**, the type of replication for **\@optname**, and a value of true for **\@value**.</span></span>  
  
###  <a name="example-transact-sql"></a><a name="TsqlExample"></a> <span data-ttu-id="a3aaf-160">Beispiel (Transact-SQL)</span><span class="sxs-lookup"><span data-stu-id="a3aaf-160">Example (Transact-SQL)</span></span>  
 <span data-ttu-id="a3aaf-161">Im folgenden Beispiel wird veranschaulicht, wie die Veröffentlichung und die Verteilung programmgesteuert konfiguriert werden.</span><span class="sxs-lookup"><span data-stu-id="a3aaf-161">The following example demonstrates how to configure publishing and distribution programmatically.</span></span> <span data-ttu-id="a3aaf-162">In diesem Beispiel werden der Name des Servers, der als Verleger konfiguriert wird, und ein lokaler Verteiler mithilfe von Skriptvariablen bereitgestellt.</span><span class="sxs-lookup"><span data-stu-id="a3aaf-162">In this example, the name of the server that is being configured as a publisher and a local distributor is supplied using scripting variables.</span></span> <span data-ttu-id="a3aaf-163">Die Replikationsveröffentlichung und -verteilung kann mit gespeicherten Replikationsprozeduren programmgesteuert konfiguriert werden.</span><span class="sxs-lookup"><span data-stu-id="a3aaf-163">Replication publishing and distribution can be configured programmatically using replication stored procedures.</span></span>  
  
 [!code-sql[HowTo#AddDistPub](../../snippets/tsql/SQL15/replication/howto/tsql/adddistpub.sql#adddistpub)]  
  
##  <a name="using-replication-management-objects-rmo"></a><a name="RMOProcedure"></a> <span data-ttu-id="a3aaf-164">Verwenden von Replikationsverwaltungsobjekten (RMO)</span><span class="sxs-lookup"><span data-stu-id="a3aaf-164">Using Replication Management Objects (RMO)</span></span>  
  
#### <a name="to-configure-publishing-and-distribution-on-a-single-server"></a><span data-ttu-id="a3aaf-165">So konfigurieren Sie Veröffentlichung und Verteilung auf einem einzelnen Server</span><span class="sxs-lookup"><span data-stu-id="a3aaf-165">To configure publishing and distribution on a single server</span></span>  
  
1.  <span data-ttu-id="a3aaf-166">Erstellen Sie eine Verbindung mit dem Server, indem Sie die <xref:Microsoft.SqlServer.Management.Common.ServerConnection> -Klasse verwenden.</span><span class="sxs-lookup"><span data-stu-id="a3aaf-166">Create a connection to the server by using the <xref:Microsoft.SqlServer.Management.Common.ServerConnection> class.</span></span>  
  
2.  <span data-ttu-id="a3aaf-167">Erstellen Sie eine Instanz der <xref:Microsoft.SqlServer.Replication.ReplicationServer>-Klasse.</span><span class="sxs-lookup"><span data-stu-id="a3aaf-167">Create an instance of the <xref:Microsoft.SqlServer.Replication.ReplicationServer> class.</span></span> <span data-ttu-id="a3aaf-168">Übergeben Sie <xref:Microsoft.SqlServer.Management.Common.ServerConnection> von Schritt 1.</span><span class="sxs-lookup"><span data-stu-id="a3aaf-168">Pass the <xref:Microsoft.SqlServer.Management.Common.ServerConnection> from step 1.</span></span>  
  
3.  <span data-ttu-id="a3aaf-169">Erstellen Sie eine Instanz der <xref:Microsoft.SqlServer.Replication.DistributionDatabase>-Klasse.</span><span class="sxs-lookup"><span data-stu-id="a3aaf-169">Create an instance of the <xref:Microsoft.SqlServer.Replication.DistributionDatabase> class.</span></span>  
  
4.  <span data-ttu-id="a3aaf-170">Legen Sie die <xref:Microsoft.SqlServer.Replication.DistributionDatabase.Name%2A> -Eigenschaft auf den Datenbanknamen fest, und legen Sie die <xref:Microsoft.SqlServer.Replication.ReplicationObject.ConnectionContext%2A> -Eigenschaft auf die <xref:Microsoft.SqlServer.Management.Common.ServerConnection> aus Schritt 1 fest.</span><span class="sxs-lookup"><span data-stu-id="a3aaf-170">Set the <xref:Microsoft.SqlServer.Replication.DistributionDatabase.Name%2A> property to the database name and set the <xref:Microsoft.SqlServer.Replication.ReplicationObject.ConnectionContext%2A> property to the <xref:Microsoft.SqlServer.Management.Common.ServerConnection> from step 1.</span></span>  
  
5.  <span data-ttu-id="a3aaf-171">Installieren Sie den Verteiler, indem Sie die <xref:Microsoft.SqlServer.Replication.ReplicationServer.InstallDistributor%2A> -Methode aufrufen.</span><span class="sxs-lookup"><span data-stu-id="a3aaf-171">Install the Distributor by calling the <xref:Microsoft.SqlServer.Replication.ReplicationServer.InstallDistributor%2A> method.</span></span> <span data-ttu-id="a3aaf-172">Übergeben Sie das <xref:Microsoft.SqlServer.Replication.DistributionDatabase> -Objekt aus Schritt 3.</span><span class="sxs-lookup"><span data-stu-id="a3aaf-172">Pass the <xref:Microsoft.SqlServer.Replication.DistributionDatabase> object from step 3.</span></span>  
  
6.  <span data-ttu-id="a3aaf-173">Erstellen Sie eine Instanz der <xref:Microsoft.SqlServer.Replication.DistributionPublisher>-Klasse.</span><span class="sxs-lookup"><span data-stu-id="a3aaf-173">Create an instance of the <xref:Microsoft.SqlServer.Replication.DistributionPublisher> class.</span></span>  
  
7.  <span data-ttu-id="a3aaf-174">Legen Sie dann die folgenden Eigenschaften von <xref:Microsoft.SqlServer.Replication.DistributionPublisher>fest:</span><span class="sxs-lookup"><span data-stu-id="a3aaf-174">Set the following properties of <xref:Microsoft.SqlServer.Replication.DistributionPublisher>:</span></span>  
  
    -   <span data-ttu-id="a3aaf-175"><xref:Microsoft.SqlServer.Replication.DistributionPublisher.Name%2A> &ndash; der Name des Verlegers</span><span class="sxs-lookup"><span data-stu-id="a3aaf-175"><xref:Microsoft.SqlServer.Replication.DistributionPublisher.Name%2A> - name of the Publisher.</span></span>  
  
    -   <span data-ttu-id="a3aaf-176"><xref:Microsoft.SqlServer.Replication.ReplicationObject.ConnectionContext%2A> &ndash; die <xref:Microsoft.SqlServer.Management.Common.ServerConnection> aus Schritt 1.</span><span class="sxs-lookup"><span data-stu-id="a3aaf-176"><xref:Microsoft.SqlServer.Replication.ReplicationObject.ConnectionContext%2A> - the <xref:Microsoft.SqlServer.Management.Common.ServerConnection> from step 1.</span></span>  
  
    -   <span data-ttu-id="a3aaf-177"><xref:Microsoft.SqlServer.Replication.DistributionPublisher.DistributionDatabase%2A> &ndash; der Name der in Schritt 5 erstellten Datenbank.</span><span class="sxs-lookup"><span data-stu-id="a3aaf-177"><xref:Microsoft.SqlServer.Replication.DistributionPublisher.DistributionDatabase%2A> - the name of the database created in step 5.</span></span>  
  
    -   <span data-ttu-id="a3aaf-178"><xref:Microsoft.SqlServer.Replication.DistributionPublisher.WorkingDirectory%2A> &ndash; die Freigabe, die verwendet wird, um auf Momentaufnahmedateien zuzugreifen.</span><span class="sxs-lookup"><span data-stu-id="a3aaf-178"><xref:Microsoft.SqlServer.Replication.DistributionPublisher.WorkingDirectory%2A> - the share used to access snapshot files.</span></span>  
  
    -   <span data-ttu-id="a3aaf-179"><xref:Microsoft.SqlServer.Replication.DistributionPublisher.PublisherSecurity%2A> : Der Sicherheitsmodus, der beim Herstellen einer Verbindung mit dem Verleger verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="a3aaf-179"><xref:Microsoft.SqlServer.Replication.DistributionPublisher.PublisherSecurity%2A> - the security mode used when connecting to the Publisher.</span></span> <span data-ttu-id="a3aaf-180"><xref:Microsoft.SqlServer.Replication.ConnectionSecurityContext.WindowsAuthentication%2A> wird empfohlen.</span><span class="sxs-lookup"><span data-stu-id="a3aaf-180"><xref:Microsoft.SqlServer.Replication.ConnectionSecurityContext.WindowsAuthentication%2A> is recommended.</span></span>  
  
8.  <span data-ttu-id="a3aaf-181">Rufen Sie die <xref:Microsoft.SqlServer.Replication.DistributionPublisher.Create%2A> -Methode auf.</span><span class="sxs-lookup"><span data-stu-id="a3aaf-181">Call the <xref:Microsoft.SqlServer.Replication.DistributionPublisher.Create%2A> method.</span></span>  
  
#### <a name="to-configure-publishing-and-distribution-using-a-remote-distributor"></a><span data-ttu-id="a3aaf-182">So konfigurieren Sie Veröffentlichung und Verteiler mit einem Remoteverteiler</span><span class="sxs-lookup"><span data-stu-id="a3aaf-182">To configure publishing and distribution using a remote Distributor</span></span>  
  
1.  <span data-ttu-id="a3aaf-183">Erstellen Sie mithilfe der <xref:Microsoft.SqlServer.Management.Common.ServerConnection> -Klasse eine Verbindung zum Remoteverteilerserver.</span><span class="sxs-lookup"><span data-stu-id="a3aaf-183">Create a connection to the remote Distributor server by using the <xref:Microsoft.SqlServer.Management.Common.ServerConnection> class.</span></span>  
  
2.  <span data-ttu-id="a3aaf-184">Erstellen Sie eine Instanz der <xref:Microsoft.SqlServer.Replication.ReplicationServer>-Klasse.</span><span class="sxs-lookup"><span data-stu-id="a3aaf-184">Create an instance of the <xref:Microsoft.SqlServer.Replication.ReplicationServer> class.</span></span> <span data-ttu-id="a3aaf-185">Übergeben Sie <xref:Microsoft.SqlServer.Management.Common.ServerConnection> von Schritt 1.</span><span class="sxs-lookup"><span data-stu-id="a3aaf-185">Pass the <xref:Microsoft.SqlServer.Management.Common.ServerConnection> from step 1.</span></span>  
  
3.  <span data-ttu-id="a3aaf-186">Erstellen Sie eine Instanz der <xref:Microsoft.SqlServer.Replication.DistributionDatabase>-Klasse.</span><span class="sxs-lookup"><span data-stu-id="a3aaf-186">Create an instance of the <xref:Microsoft.SqlServer.Replication.DistributionDatabase> class.</span></span>  
  
4.  <span data-ttu-id="a3aaf-187">Legen Sie die <xref:Microsoft.SqlServer.Replication.DistributionDatabase.Name%2A> -Eigenschaft auf den Datenbanknamen fest, und legen Sie die <xref:Microsoft.SqlServer.Replication.ReplicationObject.ConnectionContext%2A> -Eigenschaft auf die <xref:Microsoft.SqlServer.Management.Common.ServerConnection> aus dem Schritt 1 fest.</span><span class="sxs-lookup"><span data-stu-id="a3aaf-187">Set the <xref:Microsoft.SqlServer.Replication.DistributionDatabase.Name%2A> property to the database name, and set the <xref:Microsoft.SqlServer.Replication.ReplicationObject.ConnectionContext%2A> property to the <xref:Microsoft.SqlServer.Management.Common.ServerConnection> from step 1.</span></span>  
  
5.  <span data-ttu-id="a3aaf-188">Installieren Sie den Verteiler, indem Sie die <xref:Microsoft.SqlServer.Replication.ReplicationServer.InstallDistributor%2A> -Methode aufrufen.</span><span class="sxs-lookup"><span data-stu-id="a3aaf-188">Install the Distributor by calling the <xref:Microsoft.SqlServer.Replication.ReplicationServer.InstallDistributor%2A> method.</span></span> <span data-ttu-id="a3aaf-189">Geben Sie ein sicheres Kennwort (das vom Verteiler für den Verbindungsaufbau mit dem Remoteverteiler verwendet wird) und das <xref:Microsoft.SqlServer.Replication.DistributionDatabase> -Objekt aus Schritt 3 an.</span><span class="sxs-lookup"><span data-stu-id="a3aaf-189">Specify a secure password (used by the Publisher when connecting to the remote Distributor) and the <xref:Microsoft.SqlServer.Replication.DistributionDatabase> object from step 3.</span></span> <span data-ttu-id="a3aaf-190">Weitere Informationen finden Sie unter [Schützen des Verteilers](security/secure-the-distributor.md).</span><span class="sxs-lookup"><span data-stu-id="a3aaf-190">For more information, see [Secure the Distributor](security/secure-the-distributor.md).</span></span>  
  
    > [!IMPORTANT]  
    >  <span data-ttu-id="a3aaf-191">Benutzer sollten nach Möglichkeit dazu aufgefordert werden, Anmeldeinformationen zur Laufzeit anzugeben.</span><span class="sxs-lookup"><span data-stu-id="a3aaf-191">When possible, prompt users to enter security credentials at runtime.</span></span> <span data-ttu-id="a3aaf-192">Wenn Sie Anmeldeinformationen speichern müssen, verwenden Sie die [Kryptografiedienste](https://go.microsoft.com/fwlink/?LinkId=34733) von [!INCLUDE[msCoName](../../includes/msconame-md.md)] Windows .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="a3aaf-192">If you must store credentials, use the [cryptographic services](https://go.microsoft.com/fwlink/?LinkId=34733) provided by the [!INCLUDE[msCoName](../../includes/msconame-md.md)] Windows .NET Framework.</span></span>  
  
6.  <span data-ttu-id="a3aaf-193">Erstellen Sie eine Instanz der <xref:Microsoft.SqlServer.Replication.DistributionPublisher>-Klasse.</span><span class="sxs-lookup"><span data-stu-id="a3aaf-193">Create an instance of the <xref:Microsoft.SqlServer.Replication.DistributionPublisher> class.</span></span>  
  
7.  <span data-ttu-id="a3aaf-194">Legen Sie dann die folgenden Eigenschaften von <xref:Microsoft.SqlServer.Replication.DistributionPublisher>fest:</span><span class="sxs-lookup"><span data-stu-id="a3aaf-194">Set the following properties of <xref:Microsoft.SqlServer.Replication.DistributionPublisher>:</span></span>  
  
    -   <span data-ttu-id="a3aaf-195"><xref:Microsoft.SqlServer.Replication.DistributionPublisher.Name%2A> &ndash; der Name des lokalen Verlegerservers.</span><span class="sxs-lookup"><span data-stu-id="a3aaf-195"><xref:Microsoft.SqlServer.Replication.DistributionPublisher.Name%2A> - name of the local Publisher server.</span></span>  
  
    -   <span data-ttu-id="a3aaf-196"><xref:Microsoft.SqlServer.Replication.ReplicationObject.ConnectionContext%2A> &ndash; die <xref:Microsoft.SqlServer.Management.Common.ServerConnection> aus Schritt 1.</span><span class="sxs-lookup"><span data-stu-id="a3aaf-196"><xref:Microsoft.SqlServer.Replication.ReplicationObject.ConnectionContext%2A> - the <xref:Microsoft.SqlServer.Management.Common.ServerConnection> from step 1.</span></span>  
  
    -   <span data-ttu-id="a3aaf-197"><xref:Microsoft.SqlServer.Replication.DistributionPublisher.DistributionDatabase%2A> &ndash; der Name der in Schritt 5 erstellten Datenbank.</span><span class="sxs-lookup"><span data-stu-id="a3aaf-197"><xref:Microsoft.SqlServer.Replication.DistributionPublisher.DistributionDatabase%2A> - the name of the database created in step 5.</span></span>  
  
    -   <span data-ttu-id="a3aaf-198"><xref:Microsoft.SqlServer.Replication.DistributionPublisher.WorkingDirectory%2A> &ndash; die Freigabe, die verwendet wird, um auf Momentaufnahmedateien zuzugreifen.</span><span class="sxs-lookup"><span data-stu-id="a3aaf-198"><xref:Microsoft.SqlServer.Replication.DistributionPublisher.WorkingDirectory%2A> - the share used to access snapshot files.</span></span>  
  
    -   <span data-ttu-id="a3aaf-199"><xref:Microsoft.SqlServer.Replication.DistributionPublisher.PublisherSecurity%2A> : Der Sicherheitsmodus, der beim Herstellen einer Verbindung mit dem Verleger verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="a3aaf-199"><xref:Microsoft.SqlServer.Replication.DistributionPublisher.PublisherSecurity%2A> - the security mode used when connecting to the Publisher.</span></span> <span data-ttu-id="a3aaf-200"><xref:Microsoft.SqlServer.Replication.ConnectionSecurityContext.WindowsAuthentication%2A> wird empfohlen.</span><span class="sxs-lookup"><span data-stu-id="a3aaf-200"><xref:Microsoft.SqlServer.Replication.ConnectionSecurityContext.WindowsAuthentication%2A> is recommended.</span></span>  
  
8.  <span data-ttu-id="a3aaf-201">Rufen Sie die <xref:Microsoft.SqlServer.Replication.DistributionPublisher.Create%2A> -Methode auf.</span><span class="sxs-lookup"><span data-stu-id="a3aaf-201">Call the <xref:Microsoft.SqlServer.Replication.DistributionPublisher.Create%2A> method.</span></span>  
  
9. <span data-ttu-id="a3aaf-202">Erstellen Sie mithilfe der <xref:Microsoft.SqlServer.Management.Common.ServerConnection> -Klasse eine Verbindung zum lokalen Verlegerserver.</span><span class="sxs-lookup"><span data-stu-id="a3aaf-202">Create a connection to the local Publisher server by using the <xref:Microsoft.SqlServer.Management.Common.ServerConnection> class.</span></span>  
  
10. <span data-ttu-id="a3aaf-203">Erstellen Sie eine Instanz der <xref:Microsoft.SqlServer.Replication.ReplicationServer>-Klasse.</span><span class="sxs-lookup"><span data-stu-id="a3aaf-203">Create an instance of the <xref:Microsoft.SqlServer.Replication.ReplicationServer> class.</span></span> <span data-ttu-id="a3aaf-204">Übergeben Sie <xref:Microsoft.SqlServer.Management.Common.ServerConnection> von Schritt 9.</span><span class="sxs-lookup"><span data-stu-id="a3aaf-204">Pass the <xref:Microsoft.SqlServer.Management.Common.ServerConnection> from step 9.</span></span>  
  
11. <span data-ttu-id="a3aaf-205">Rufen Sie die <xref:Microsoft.SqlServer.Replication.ReplicationServer.InstallDistributor%2A> -Methode auf.</span><span class="sxs-lookup"><span data-stu-id="a3aaf-205">Call the <xref:Microsoft.SqlServer.Replication.ReplicationServer.InstallDistributor%2A> method.</span></span> <span data-ttu-id="a3aaf-206">Übergeben Sie den Namen des Remoteverteilers und das Kennwort des Remoteverteilers, der in Schritt 5 angegeben wurde.</span><span class="sxs-lookup"><span data-stu-id="a3aaf-206">Pass the name of the remote Distributor and the password for the remote Distributor specified in step 5.</span></span>  
  
    > [!IMPORTANT]  
    >  <span data-ttu-id="a3aaf-207">Benutzer sollten nach Möglichkeit dazu aufgefordert werden, Anmeldeinformationen zur Laufzeit anzugeben.</span><span class="sxs-lookup"><span data-stu-id="a3aaf-207">When possible, prompt users to enter security credentials at runtime.</span></span> <span data-ttu-id="a3aaf-208">Wenn Sie Anmeldeinformationen speichern müssen, verwenden Sie die [Kryptografiedienste](https://go.microsoft.com/fwlink/?LinkId=34733) von Windows .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="a3aaf-208">If you must store credentials, use the [cryptographic services](https://go.microsoft.com/fwlink/?LinkId=34733) provided by the Windows .NET Framework.</span></span>  
  
###  <a name="example-rmo"></a><a name="PShellExample"></a> <span data-ttu-id="a3aaf-209">Beispiel (RMO)</span><span class="sxs-lookup"><span data-stu-id="a3aaf-209">Example (RMO)</span></span>  
 <span data-ttu-id="a3aaf-210">Sie können die Veröffentlichung und Verteilung mithilfe von Replikationsverwaltungsobjekten (ROM) programmgesteuert konfigurieren.</span><span class="sxs-lookup"><span data-stu-id="a3aaf-210">You can programmatically configure replication publishing and distribution by using Replication Management Objects (RMO).</span></span>  
  
 [!code-csharp[HowTo#rmo_AddDistPub](../../snippets/csharp/SQL15/replication/howto/cs/rmotestevelope.cs#rmo_adddistpub)]  
  
 [!code-vb[HowTo#rmo_vb_AddDistPub](../../snippets/visualbasic/SQL15/replication/howto/vb/rmotestenv.vb#rmo_vb_adddistpub)]  
  
## <a name="see-also"></a><span data-ttu-id="a3aaf-211">Weitere Informationen</span><span class="sxs-lookup"><span data-stu-id="a3aaf-211">See Also</span></span>  
 <span data-ttu-id="a3aaf-212">[Anzeigen und Ändern der Verteiler- und Verlegereigenschaften](view-and-modify-distributor-and-publisher-properties.md) </span><span class="sxs-lookup"><span data-stu-id="a3aaf-212">[View and Modify Distributor and Publisher Properties](view-and-modify-distributor-and-publisher-properties.md) </span></span>  
 <span data-ttu-id="a3aaf-213">[Replication System Stored Procedures Concepts](concepts/replication-system-stored-procedures-concepts.md) </span><span class="sxs-lookup"><span data-stu-id="a3aaf-213">[Replication System Stored Procedures Concepts](concepts/replication-system-stored-procedures-concepts.md) </span></span>  
 <span data-ttu-id="a3aaf-214">[Verteilung konfigurieren](configure-distribution.md) </span><span class="sxs-lookup"><span data-stu-id="a3aaf-214">[Configure Distribution](configure-distribution.md) </span></span>  
 <span data-ttu-id="a3aaf-215">[Replication Management Objects Concepts](concepts/replication-management-objects-concepts.md) </span><span class="sxs-lookup"><span data-stu-id="a3aaf-215">[Replication Management Objects Concepts](concepts/replication-management-objects-concepts.md) </span></span>  
 [<span data-ttu-id="a3aaf-216">Konfigurieren Sie die Replikation für AlwaysOn-Verfügbarkeitsgruppen &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="a3aaf-216">Configure Replication for AlwaysOn Availability Groups &#40;SQL Server&#41;</span></span>](../../database-engine/availability-groups/windows/always-on-availability-groups-sql-server.md) 
  
  
