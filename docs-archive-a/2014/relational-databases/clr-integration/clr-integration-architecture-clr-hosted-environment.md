---
title: Gehostete CLR-Umgebung | Microsoft-Dokumentation
ms.custom: ''
ms.date: 03/06/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: clr
ms.topic: reference
helpviewer_keywords:
- type-safe code [CLR integration]
- UNSAFE permission set
- run-time environments [CLR integration]
- common language runtime [SQL Server], about CLR integration
- application domains [CLR integration]
- host protection attributes [CLR integration]
- managed code [SQL Server], common language runtime
- permission sets [CLR integration]
- reliability [CLR integration]
- SAFE permission set
- code access security [CLR integration]
- EXTERNAL_ACCESS permission set
- verifying type safety
- scalability [CLR integration]
- hosted environments [CLR integration]
- HPAs [CLR integration]
ms.assetid: d280d359-08f0-47b5-a07e-67dd2a58ad73
author: rothja
ms.author: jroth
ms.openlocfilehash: bd04536d1dfb8a4657fbe116cdfd38a6639a6327
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 08/04/2020
ms.locfileid: "87720026"
---
# <a name="clr-hosted-environment"></a><span data-ttu-id="34f67-102">Gehostete CLR-Umgebung</span><span class="sxs-lookup"><span data-stu-id="34f67-102">CLR Hosted Environment</span></span>
  <span data-ttu-id="34f67-103">Die [!INCLUDE[msCoName](../../../includes/msconame-md.md)] .NET Framework-CLR (Common Language Runtime) ist eine Umgebung, die viele moderne Programmiersprachen ausführt, einschließlich [!INCLUDE[msCoName](../../../includes/msconame-md.md)]Visual C#, [!INCLUDE[msCoName](../../../includes/msconame-md.md)]Visual Basic und [!INCLUDE[msCoName](../../../includes/msconame-md.md)]Visual C++.</span><span class="sxs-lookup"><span data-stu-id="34f67-103">The [!INCLUDE[msCoName](../../../includes/msconame-md.md)] .NET Framework common language runtime (CLR) is an environment that executes many modern programming languages, including [!INCLUDE[msCoName](../../../includes/msconame-md.md)] Visual C#, [!INCLUDE[msCoName](../../../includes/msconame-md.md)] Visual Basic, and [!INCLUDE[msCoName](../../../includes/msconame-md.md)] Visual C++.</span></span> <span data-ttu-id="34f67-104">Die CLR bietet der Garbage Collection unterworfenen Arbeitsspeicher, präemptives Threading, Metadatendienste (geben Sie „reflection“ ein), Codeüberprüfbarkeit und Codezugriffssicherheit.</span><span class="sxs-lookup"><span data-stu-id="34f67-104">The CLR features garbage-collected memory, pre-emptive threading, metadata services (type reflection), code verifiability, and code access security.</span></span> <span data-ttu-id="34f67-105">Die CLR verwendet Metadaten zum Suchen und Laden von Klassen, Anordnen von Instanzen im Speicher, Auflösen von Methodenaufrufen, Generieren von systemeigenem Code, Erzwingen von Sicherheit und zum Festlegen von Begrenzungen im Laufzeitkontext.</span><span class="sxs-lookup"><span data-stu-id="34f67-105">The CLR uses metadata to locate and load classes, lay out instances in memory, resolve method invocations, generate native code, enforce security, and set run-time context boundaries.</span></span>  
  
 <span data-ttu-id="34f67-106">Die CLR und [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] unterscheiden sich als Laufzeitumgebungen in der Weise, wie sie Arbeitsspeicher, Threads und Synchronisierung behandeln.</span><span class="sxs-lookup"><span data-stu-id="34f67-106">The CLR and [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] differ as run-time environments in the way they handle memory, threads, and synchronization.</span></span> <span data-ttu-id="34f67-107">Dieses Thema beschreibt, wie die beiden Laufzeiten integriert werden, sodass alle Systemressourcen einheitlich verwaltet werden.</span><span class="sxs-lookup"><span data-stu-id="34f67-107">This topic describes the way in which these two run times are integrated so that all system resources are managed uniformly.</span></span> <span data-ttu-id="34f67-108">Ferner wird hier behandelt, wie CLR-Codezugriffssicherheit (CAS) und [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]-Sicherheit integriert werden, um eine zuverlässige und sichere Ausführungsumgebung für Benutzercode bereitzustellen.</span><span class="sxs-lookup"><span data-stu-id="34f67-108">This topic also covers the way in which CLR code access security (CAS) and [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] security are integrated to provide a reliable and secure execution environment for user code.</span></span>  
  
## <a name="basic-concepts-of-clr-architecture"></a><span data-ttu-id="34f67-109">Grundlegende Konzepte der CLR-Architektur</span><span class="sxs-lookup"><span data-stu-id="34f67-109">Basic Concepts of CLR Architecture</span></span>  
 <span data-ttu-id="34f67-110">In .NET Framework schreibt ein Programmierer in einer Hochsprache, die eine Klasse implementiert, die die Struktur (z. B. die Felder oder Eigenschaften der Klasse) und Methoden definiert.</span><span class="sxs-lookup"><span data-stu-id="34f67-110">In the .NET Framework, a programmer writes in a high-level language that implements a class defining its structure (for example, the fields or properties of the class) and methods.</span></span> <span data-ttu-id="34f67-111">Einige dieser Methoden können statische Funktionen sein.</span><span class="sxs-lookup"><span data-stu-id="34f67-111">Some of these methods can be static functions.</span></span> <span data-ttu-id="34f67-112">Bei der Kompilierung des Programms wird eine Datei erstellt, eine so genannte Assembly, die den kompilierten Code in der [!INCLUDE[msCoName](../../../includes/msconame-md.md)] Intermediate Language (MSIL) sowie ein Manifest enthält, das alle Verweise auf abhängige Assemblys umfasst.</span><span class="sxs-lookup"><span data-stu-id="34f67-112">The compilation of the program produces a file called an assembly that contains the compiled code in the [!INCLUDE[msCoName](../../../includes/msconame-md.md)] intermediate language (MSIL), and a manifest that contains all references to dependent assemblies.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="34f67-113">Assemblys sind ein wichtiges Element in der Architektur der CLR.</span><span class="sxs-lookup"><span data-stu-id="34f67-113">Assemblies are a vital element in the architecture of the CLR.</span></span> <span data-ttu-id="34f67-114">Sie sind die Einheiten für Verpackung, Bereitstellung und Versionsverwaltung des Anwendungscodes in .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="34f67-114">They are the units of packaging, deployment, and versioning of application code in the .NET Framework.</span></span> <span data-ttu-id="34f67-115">Durch die Verwendung von Assemblys können Sie Anwendungscode in der Datenbank verfügbar machen und eine einheitliche Methode zur Verwaltung, Sicherung und Wiederherstellung kompletter Datenbankanwendungen bereitstellen.</span><span class="sxs-lookup"><span data-stu-id="34f67-115">Using assemblies, you can deploy application code inside the database and provide a uniform way to administer, back up, and restore complete database applications.</span></span>  
  
 <span data-ttu-id="34f67-116">Das Assemblymanifest enthält Metadaten über die Assembly, die sämtliche Strukturen, Felder, Eigenschaften, Klassen, Vererbungsbeziehungen, Funktionen und Methoden beschreiben, die im Programm definiert sind.</span><span class="sxs-lookup"><span data-stu-id="34f67-116">The assembly manifest contains metadata about the assembly, describing all of the structures, fields, properties, classes, inheritance relationships, functions, and methods defined in the program.</span></span> <span data-ttu-id="34f67-117">Das Manifest legt die Identität der Assembly fest, gibt die Dateien an, aus denen die Assemblyimplementierung besteht, gibt die Typen und Ressourcen an, aus denen die Assembly besteht, legt die Abhängigkeiten von anderen Assemblys für die Kompilierungszeit einzeln fest und gibt den Berechtigungssatz an, der für die ordnungsgemäße Ausführung der Assembly erforderlich ist.</span><span class="sxs-lookup"><span data-stu-id="34f67-117">The manifest establishes the assembly identity, specifies the files that make up the assembly implementation, specifies the types and resources that make up the assembly, itemizes the compile-time dependencies on other assemblies, and specifies the set of permissions required for the assembly to run properly.</span></span> <span data-ttu-id="34f67-118">Diese Informationen werden zur Laufzeit verwendet, um Verweise aufzulösen, Versionsbindungsrichtlinien zu erzwingen und die Integrität geladener Assemblys zu validieren.</span><span class="sxs-lookup"><span data-stu-id="34f67-118">This information is used at run time to resolve references, enforce version binding policy, and validate the integrity of loaded assemblies.</span></span>  
  
 <span data-ttu-id="34f67-119">.NET Framework unterstützt benutzerdefinierte Attribute zum Hinzufügen von Anmerkungen zu Klassen, Eigenschaften, Funktionen und Methoden in Form von zusätzlichen Informationen, die von der Anwendung in Metadaten erfasst werden können.</span><span class="sxs-lookup"><span data-stu-id="34f67-119">The .NET Framework supports custom attributes for annotating classes, properties, functions, and methods with additional information the application may capture in metadata.</span></span> <span data-ttu-id="34f67-120">Alle .NET Framework-Compiler verwenden diese Anmerkungen ohne Auslegung und speichern sie als Assemblymetadaten.</span><span class="sxs-lookup"><span data-stu-id="34f67-120">All .NET Framework compilers consume these annotations without interpretation and store them as assembly metadata.</span></span> <span data-ttu-id="34f67-121">Diese Anmerkungen können auf die gleiche Weise wie beliebige andere Metadaten untersucht werden.</span><span class="sxs-lookup"><span data-stu-id="34f67-121">These annotations can be examined in the same way as any other metadata.</span></span>  
  
 <span data-ttu-id="34f67-122">Verwalteter Code ist MSIL-Code, der in der CLR anstatt direkt vom Betriebssystem ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="34f67-122">Managed code is MSIL executed in the CLR, rather than directly by the operating system.</span></span> <span data-ttu-id="34f67-123">Anwendungen mit verwaltetem Code verfügen über CLR-Dienste, z. B. automatische Garbage Collection, Typüberprüfung zur Laufzeit, Sicherheitsunterstützung usw.</span><span class="sxs-lookup"><span data-stu-id="34f67-123">Managed code applications acquire CLR services, such as automatic garbage collection, run-time type checking, and security support.</span></span> <span data-ttu-id="34f67-124">Diese Dienste bieten ein einheitliches Platt Form-und sprachunabhängiges Verhalten von Anwendungen mit verwaltetem Code.</span><span class="sxs-lookup"><span data-stu-id="34f67-124">These services help provide uniform platform- and language-independent behavior of managed code applications.</span></span>  
  
## <a name="design-goals-of-clr-integration"></a><span data-ttu-id="34f67-125">Entwurfsziele der CLR-Integration</span><span class="sxs-lookup"><span data-stu-id="34f67-125">Design Goals of CLR Integration</span></span>  
 <span data-ttu-id="34f67-126">Bei der Ausführung von Benutzercode in der CLR-gehosteten Umgebung in [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] (CLR-Integration genannt), gelten die folgenden Entwurfsziele:</span><span class="sxs-lookup"><span data-stu-id="34f67-126">When user code runs inside the CLR-hosted environment in [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] (called CLR integration), the following design goals apply:</span></span>  
  
###### <a name="reliability-safety"></a><span data-ttu-id="34f67-127">Zuverlässigkeit (Sicherheit)</span><span class="sxs-lookup"><span data-stu-id="34f67-127">Reliability (Safety)</span></span>  
 <span data-ttu-id="34f67-128">Vom Benutzercode sollten keine Vorgänge ausgeführt werden dürfen, die die Integrität des Prozesses der Datenbank-Engine gefährden, z. B. die Anzeige eines Meldungsfelds, in dem eine Benutzerantwort verlangt wird, oder in dem der Prozess beendet wird.</span><span class="sxs-lookup"><span data-stu-id="34f67-128">User code should not be allowed to perform operations that compromise the integrity of the Database Engine process, such as popping a message box requesting a user response or exiting the process.</span></span> <span data-ttu-id="34f67-129">Benutzercode sollte nicht in der Lage sein, Arbeitsspeicherpuffer der Datenbank-Engine oder interne Datenstrukturen zu überschreiben.</span><span class="sxs-lookup"><span data-stu-id="34f67-129">User code should not be able to overwrite Database Engine memory buffers or internal data structures.</span></span>  
  
###### <a name="scalability"></a><span data-ttu-id="34f67-130">Skalierbarkeit</span><span class="sxs-lookup"><span data-stu-id="34f67-130">Scalability</span></span>  
 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] <span data-ttu-id="34f67-131">und CLR verwenden unterschiedliche interne Modelle für Planung und Speicherverwaltung.</span><span class="sxs-lookup"><span data-stu-id="34f67-131">and the CLR have different internal models for scheduling and memory management.</span></span> [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] <span data-ttu-id="34f67-132">unterstützt ein kooperatives, nicht präemptives Threadingmodell, in dem die Threads freiwillig die Ausführung in regelmäßigen Abständen oder beim Warten auf Sperren oder Eingaben/Ausgaben unterbrechen.</span><span class="sxs-lookup"><span data-stu-id="34f67-132">supports a cooperative, non-preemptive threading model in which the threads voluntarily yield execution periodically, or when they are waiting on locks or I/O.</span></span> <span data-ttu-id="34f67-133">Die CLR unterstützt ein präemptives Threadingmodell.</span><span class="sxs-lookup"><span data-stu-id="34f67-133">The CLR supports a preemptive threading model.</span></span> <span data-ttu-id="34f67-134">Wenn die Threadinggrundelemente des Betriebssystems direkt von Benutzercode aufgerufen werden können, der in [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] ausgeführt wird, ist keine einwandfreie Integration in den [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]-Taskplaner möglich, und die Skalierbarkeit des Systems kann beeinträchtigt werden.</span><span class="sxs-lookup"><span data-stu-id="34f67-134">If user code running inside [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] can directly call the operating system threading primitives, then it does not integrate well into the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] task scheduler and can degrade the scalability of the system.</span></span> <span data-ttu-id="34f67-135">Die CLR macht keinen Unterschied zwischen virtuellem und physischem Arbeitsspeicher, [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] verwaltet physischen Arbeitsspeicher jedoch direkt und muss physischen Arbeitsspeicher innerhalb eines konfigurierbaren Grenzwerts verwenden.</span><span class="sxs-lookup"><span data-stu-id="34f67-135">The CLR does not distinguish between virtual and physical memory, but [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] directly manages physical memory and is required to use physical memory within a configurable limit.</span></span>  
  
 <span data-ttu-id="34f67-136">Die unterschiedlichen Modelle für Threading, Planung und Arbeitsspeicherverwaltung stellen eine Integrationsherausforderung für ein relationales Datenbankverwaltungssystem (RDBMS) dar, das durch Skalierung Tausende von gleichzeitigen Benutzersitzungen unterstützt.</span><span class="sxs-lookup"><span data-stu-id="34f67-136">The different models for threading, scheduling, and memory management present an integration challenge for a relational database management system (RDBMS) that scales to support thousands of concurrent user sessions.</span></span> <span data-ttu-id="34f67-137">Durch die Architektur sollte sichergestellt werden, dass die Skalierbarkeit des Systems nicht durch Benutzercode beeinträchtigt wird, der APIs (Application Programming Interfaces, Schnittstellen zur Anwendungsprogrammierung) für Threading-, Arbeitsspeicher- und Synchronisierungsgrundelemente direkt aufruft.</span><span class="sxs-lookup"><span data-stu-id="34f67-137">The architecture should ensure that the scalability of the system is not compromised by user code calling application programming interfaces (APIs) for threading, memory, and synchronization primitives directly.</span></span>  
  
###### <a name="security"></a><span data-ttu-id="34f67-138">Sicherheit</span><span class="sxs-lookup"><span data-stu-id="34f67-138">Security</span></span>  
 <span data-ttu-id="34f67-139">In der Datenbank ausgeführter Benutzercode muss beim Zugreifen auf Datenbankobjekte, wie Tabellen und Spalten, [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]-Authentifizierungs- und Autorisierungsregeln folgen.</span><span class="sxs-lookup"><span data-stu-id="34f67-139">User code running in the database must follow [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] authentication and authorization rules when accessing database objects such as tables and columns.</span></span> <span data-ttu-id="34f67-140">Darüber hinaus sollten Datenbankadministratoren in der Lage sein, den Zugriff auf Ressourcen des Betriebssystems, wie Dateien und Netzwerkzugriff, vom Benutzercode aus zu steuern, der in der Datenbank ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="34f67-140">In addition, database administrators should be able to control access to operating system resources, such as files and network access, from user code running in the database.</span></span> <span data-ttu-id="34f67-141">Dies ist wichtig, da verwaltete Programmiersprachen (im Gegensatz zu nicht verwalteten Sprachen wie Transact-SQL) APIs zum Zugreifen auf diese Ressourcen bereitstellen.</span><span class="sxs-lookup"><span data-stu-id="34f67-141">This becomes important as managed programming languages (unlike non-managed languages such as Transact-SQL) provide APIs to access such resources.</span></span> <span data-ttu-id="34f67-142">Das System muss eine sichere Methode bereitstellen, damit über Benutzercode außerhalb des [!INCLUDE[ssDE](../../../includes/ssde-md.md)]-Prozesses auf Computerressourcen zugegriffen werden kann.</span><span class="sxs-lookup"><span data-stu-id="34f67-142">The system must provide a secure way for user code to access machine resources outside the [!INCLUDE[ssDE](../../../includes/ssde-md.md)] process.</span></span> <span data-ttu-id="34f67-143">Weitere Informationen finden Sie unter [CLR Integration Security](security/clr-integration-security.md).</span><span class="sxs-lookup"><span data-stu-id="34f67-143">For more information, see [CLR Integration Security](security/clr-integration-security.md).</span></span>  
  
###### <a name="performance"></a><span data-ttu-id="34f67-144">Leistung</span><span class="sxs-lookup"><span data-stu-id="34f67-144">Performance</span></span>  
 <span data-ttu-id="34f67-145">In [!INCLUDE[ssDE](../../../includes/ssde-md.md)] ausgeführter verwalteter Benutzercode sollte über eine vergleichbare Ausführungsleistung verfügen wie derselbe Code, der außerhalb des Servers ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="34f67-145">Managed user code running in the [!INCLUDE[ssDE](../../../includes/ssde-md.md)] should have computational performance comparable to the same code run outside the server.</span></span> <span data-ttu-id="34f67-146">Datenbankzugriff von verwaltetem Benutzercode ist nicht so schnell wie systemeigener [!INCLUDE[tsql](../../../includes/tsql-md.md)].</span><span class="sxs-lookup"><span data-stu-id="34f67-146">Database access from managed user code is not as fast as native [!INCLUDE[tsql](../../../includes/tsql-md.md)].</span></span> <span data-ttu-id="34f67-147">Weitere Informationen finden Sie unter [Leistung der CLR-Integration](clr-integration-architecture-performance.md).</span><span class="sxs-lookup"><span data-stu-id="34f67-147">For more information, see [Performance of CLR Integration](clr-integration-architecture-performance.md).</span></span>  
  
## <a name="clr-services"></a><span data-ttu-id="34f67-148">CLR Services</span><span class="sxs-lookup"><span data-stu-id="34f67-148">CLR Services</span></span>  
 <span data-ttu-id="34f67-149">Die CLR bietet eine Reihe von Diensten, um die Entwurfsziele der CLR-Integration mit [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] zu erreichen.</span><span class="sxs-lookup"><span data-stu-id="34f67-149">The CLR provides a number of services to help achieve the design goals of CLR integration with [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span></span>  
  
###### <a name="type-safety-verification"></a><span data-ttu-id="34f67-150">Typsicherheitsüberprüfung</span><span class="sxs-lookup"><span data-stu-id="34f67-150">Type safety verification</span></span>  
 <span data-ttu-id="34f67-151">Als typsicherer Code wird Code bezeichnet, der nur auf genau definierte Weise auf Arbeitsspeicherstrukturen zugreift.</span><span class="sxs-lookup"><span data-stu-id="34f67-151">Type-safe code is code that accesses memory structures only in well-defined ways.</span></span> <span data-ttu-id="34f67-152">Bei typsicherem Code ist z. B. bei einem gültigen Objektverweis der Speicherzugriff an festen Offsets möglich, die tatsächlichen Feldmembern entsprechen.</span><span class="sxs-lookup"><span data-stu-id="34f67-152">For example, given a valid object reference, type-safe code can access memory at fixed offsets corresponding to actual field members.</span></span> <span data-ttu-id="34f67-153">Wenn der Code jedoch auf den Speicher an beliebigen Offsets innerhalb oder außerhalb des Gültigkeitsbereichs des Speichers zugreift, der zu dem Objekt gehört, ist er nicht typsicher.</span><span class="sxs-lookup"><span data-stu-id="34f67-153">However, if the code accesses memory at arbitrary offsets inside or outside the range of memory that belongs to the object, then it is not type-safe.</span></span> <span data-ttu-id="34f67-154">Wenn Assemblys in die CLR geladen werden, bevor die MSIL mithilfe der JIT-Kompilierung (Just-In-Time) kompiliert wurde, führt die Laufzeit eine Überprüfungsphase aus, die den Code hinsichtlich seiner Typsicherheit untersucht.</span><span class="sxs-lookup"><span data-stu-id="34f67-154">When assemblies are loaded in the CLR, prior to the MSIL being compiled using just-in-time (JIT) compilation, the runtime performs a verification phase that examines code to determine its type-safety.</span></span> <span data-ttu-id="34f67-155">Code, der diese Überprüfung erfolgreich besteht, wird nachweisbar typsicherer Code genannt.</span><span class="sxs-lookup"><span data-stu-id="34f67-155">Code that successfully passes this verification is called verifiably type-safe code.</span></span>  
  
###### <a name="application-domains"></a><span data-ttu-id="34f67-156">Anwendungsdomänen</span><span class="sxs-lookup"><span data-stu-id="34f67-156">Application domains</span></span>  
 <span data-ttu-id="34f67-157">Die CLR unterstützt die Definition von Anwendungsdomänen als Ausführungszonen in einem Hostprozess, bei dem verwaltete Codeassemblys geladen und ausgeführt werden können.</span><span class="sxs-lookup"><span data-stu-id="34f67-157">The CLR supports the notion of application domains as execution zones within a host process where managed code assemblies can be loaded and executed.</span></span> <span data-ttu-id="34f67-158">Die Anwendungsdomänengrenze bietet Isolierung zwischen Assemblys.</span><span class="sxs-lookup"><span data-stu-id="34f67-158">The application domain boundary provides isolation between assemblies.</span></span> <span data-ttu-id="34f67-159">Die Assemblys werden hinsichtlich der Sichtbarkeit von statischen Variablen und Datenelementen und der Möglichkeit, Code dynamisch aufzurufen, isoliert.</span><span class="sxs-lookup"><span data-stu-id="34f67-159">The assemblies are isolated in terms of visibility of static variables and data members and the ability to call code dynamically.</span></span> <span data-ttu-id="34f67-160">Anwendungsdomänen sind auch der Mechanismus zum Laden und Entladen von Code.</span><span class="sxs-lookup"><span data-stu-id="34f67-160">Application domains are also the mechanism for loading and unloading code.</span></span> <span data-ttu-id="34f67-161">Code kann aus dem Arbeitsspeicher durch das Entladen der Anwendungsdomäne entfernt werden.</span><span class="sxs-lookup"><span data-stu-id="34f67-161">Code can be unloaded from memory only by unloading the application domain.</span></span> <span data-ttu-id="34f67-162">Weitere Informationen finden Sie unter [Anwendungs Domänen und Sicherheit der CLR-Integration](../../database-engine/dev-guide/application-domains-and-clr-integration-security.md).</span><span class="sxs-lookup"><span data-stu-id="34f67-162">For more information, see [Application Domains and CLR Integration Security](../../database-engine/dev-guide/application-domains-and-clr-integration-security.md).</span></span>  
  
###### <a name="code-access-security-cas"></a><span data-ttu-id="34f67-163">Codezugriffssicherheit (Code Access Security, CAS)</span><span class="sxs-lookup"><span data-stu-id="34f67-163">Code Access Security (CAS)</span></span>  
 <span data-ttu-id="34f67-164">Das CLR-Sicherheitssystem bietet eine Methode zum Steuern der Vorgangstypen, die von verwaltetem Code ausgeführt werden können, indem dem Code Berechtigungen zugewiesen werden.</span><span class="sxs-lookup"><span data-stu-id="34f67-164">The CLR security system provides a way to control what kinds of operations managed code can perform by assigning permissions to code.</span></span> <span data-ttu-id="34f67-165">Codezugriffsberechtigungen werden auf der Grundlage der Identität des Codes (z. B. die Signatur der Assembly oder die Quelle des Codes) zugewiesen.</span><span class="sxs-lookup"><span data-stu-id="34f67-165">Code access permissions are assigned based on code identity (for example, the signature of the assembly or the origin of the code).</span></span>  
  
 <span data-ttu-id="34f67-166">Die CLR sorgt für eine Richtlinie, die auf dem gesamten Computer gilt und vom Computeradministrator festgelegt werden kann.</span><span class="sxs-lookup"><span data-stu-id="34f67-166">The CLR provides for a computer-wide policy that can be set by the computer administrator.</span></span> <span data-ttu-id="34f67-167">Diese Richtlinie definiert die Berechtigungen für den gesamten verwalteten Code, der auf dem Computer ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="34f67-167">This policy defines the permission grants for any managed code running on the machine.</span></span> <span data-ttu-id="34f67-168">Ferner besteht eine Sicherheitsrichtlinie auf Hostebene, die vom Host verwendet werden kann, z. B. [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] zum Festlegen zusätzlicher Einschränkungen des verwalteten Codes.</span><span class="sxs-lookup"><span data-stu-id="34f67-168">In addition, there is a host-level security policy that can be used by hosts such as [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] to specify additional restrictions on managed code.</span></span>  
  
 <span data-ttu-id="34f67-169">Wenn eine verwaltete API in .NET Framework Operationen für Ressourcen verfügbar macht, die durch eine Codezugriffsberechtigung geschützt sind, fordert die API vor dem Zugriff auf die Ressource diese Berechtigung an.</span><span class="sxs-lookup"><span data-stu-id="34f67-169">If a managed API in the .NET Framework exposes operations on resources that are protected by a code access permission, the API will demand that permission before accessing the resource.</span></span> <span data-ttu-id="34f67-170">Diese Anforderung löst im CLR-Sicherheitssystem eine umfangreiche Überprüfung jeder Codeeinheit (Assembly) in der Aufrufliste aus.</span><span class="sxs-lookup"><span data-stu-id="34f67-170">This demand causes the CLR security system to trigger a comprehensive check of every unit of code (assembly) in the call stack.</span></span> <span data-ttu-id="34f67-171">Nur wenn die ganze Aufrufkette über eine Berechtigung verfügt, wird der Zugriff auf die Ressource gewährt.</span><span class="sxs-lookup"><span data-stu-id="34f67-171">Only if the entire call chain has permission will access to the resource be granted.</span></span>  
  
 <span data-ttu-id="34f67-172">Beachten Sie, dass die Funktion zum dynamischen Generieren von verwaltetem Code mit der Reflexionsausgabe-API innerhalb der CLR-gehosteten Umgebung in [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] nicht unterstützt wird.</span><span class="sxs-lookup"><span data-stu-id="34f67-172">Note that the ability to generate managed code dynamically, using the Reflection.Emit API, is not supported inside the CLR-hosted environment in [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="34f67-173">Solcher Code hätte die CAS-Berechtigungen zum Ausführen nicht und würde deshalb zur Laufzeit fehlschlagen.</span><span class="sxs-lookup"><span data-stu-id="34f67-173">Such code would not have the CAS permissions to run and would therefore fail at run time.</span></span> <span data-ttu-id="34f67-174">Weitere Informationen finden Sie unter [CLR-Integration Code Zugriffssicherheit](security/clr-integration-code-access-security.md).</span><span class="sxs-lookup"><span data-stu-id="34f67-174">For more information, see [CLR Integration Code Access Security](security/clr-integration-code-access-security.md).</span></span>  
  
###### <a name="host-protection-attributes-hpas"></a><span data-ttu-id="34f67-175">Host Schutz Attribute (HPAs)</span><span class="sxs-lookup"><span data-stu-id="34f67-175">Host Protection Attributes (HPAs)</span></span>  
 <span data-ttu-id="34f67-176">Die CLR stellt einen Mechanismus zur Verfügung, um verwaltete APIs, die Teil von .NET Framework sind, mit Anmerkungen in Form von bestimmten Attributen zu versehen, die für einen Host der CLR interessant sein können.</span><span class="sxs-lookup"><span data-stu-id="34f67-176">The CLR provides a mechanism to annotate managed APIs that are part of the .NET Framework with certain attributes that may be of interest to a host of the CLR.</span></span> <span data-ttu-id="34f67-177">Beispiele für solche Attribute:</span><span class="sxs-lookup"><span data-stu-id="34f67-177">Examples of such attributes include:</span></span>  
  
-   <span data-ttu-id="34f67-178">SharedState - gibt an, ob die API die Fähigkeit zur Verfügung stellt, einen Freigabezustand (z. B. statische Klassenfelder) zu erstellen oder zu verwalten.</span><span class="sxs-lookup"><span data-stu-id="34f67-178">SharedState, which indicates whether the API exposes the ability to create or manage shared state (for example, static class fields).</span></span>  
  
-   <span data-ttu-id="34f67-179">Synchronization - gibt an, ob die API die Fähigkeit zur Verfügung stellt, die Synchronisierung zwischen Threads auszuführen.</span><span class="sxs-lookup"><span data-stu-id="34f67-179">Synchronization, which indicates whether the API exposes the ability to perform synchronization between threads.</span></span>  
  
-   <span data-ttu-id="34f67-180">ExternalProcessMgmt - gibt an, ob die API eine Möglichkeit zur Kontrolle des Hostprozesses zur Verfügung stellt.</span><span class="sxs-lookup"><span data-stu-id="34f67-180">ExternalProcessMgmt, which indicates whether the API exposes a way to control the host process.</span></span>  
  
 <span data-ttu-id="34f67-181">Anhand dieser Attribute kann der Host eine Liste mit Hostschutzattributen festlegen, wie das SharedState-Attribut, die in der gehosteten Umgebung nicht zugelassen werden.</span><span class="sxs-lookup"><span data-stu-id="34f67-181">Given these attributes, the host can specify a list of HPAs, such as the SharedState attribute, that should be disallowed in the hosted environment.</span></span> <span data-ttu-id="34f67-182">In diesem Fall weist die CLR Versuche des Benutzercodes zurück, APIs aufzurufen, die mit nicht zugelassenen Hostschutzattributen aus der Liste versehen sind.</span><span class="sxs-lookup"><span data-stu-id="34f67-182">In this case, the CLR denies attempts by user code to call APIs that are annotated by the HPAs in the prohibited list.</span></span> <span data-ttu-id="34f67-183">Weitere Informationen finden Sie unter [Host Schutz Attribute und Programmierung der CLR-Integration](../clr-integration-security-host-protection-attributes/host-protection-attributes-and-clr-integration-programming.md).</span><span class="sxs-lookup"><span data-stu-id="34f67-183">For more information, see [Host Protection Attributes and CLR Integration Programming](../clr-integration-security-host-protection-attributes/host-protection-attributes-and-clr-integration-programming.md).</span></span>  
  
## <a name="how-sql-server-and-the-clr-work-together"></a><span data-ttu-id="34f67-184">Zusammenarbeit von SQL Server und der CLR</span><span class="sxs-lookup"><span data-stu-id="34f67-184">How SQL Server and the CLR Work Together</span></span>  
 <span data-ttu-id="34f67-185">In diesem Abschnitt wird besprochen, wie [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] die Modelle für Threading, Planung, Synchronisierung und Arbeitsspeicherverwaltung von [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] und der CLR integriert.</span><span class="sxs-lookup"><span data-stu-id="34f67-185">This section discusses how [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] integrates the threading, scheduling, synchronization, and memory management models of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] and the CLR.</span></span> <span data-ttu-id="34f67-186">Genauer wird in diesem Abschnitt auf die Integration im Hinblick auf Skalierbarkeit, Zuverlässigkeit und Sicherheit eingegangen.</span><span class="sxs-lookup"><span data-stu-id="34f67-186">In particular, this section examines the integration in light of scalability, reliability, and security goals.</span></span> [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] <span data-ttu-id="34f67-187">agiert im Grunde als Betriebssystem für die CLR, wenn sie in [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] gehostet wird.</span><span class="sxs-lookup"><span data-stu-id="34f67-187">essentially acts as the operating system for the CLR when it is hosted inside [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="34f67-188">Die CLR ruft von [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] für Threading, Planung, Synchronisierung und Speicherverwaltung implementierte Routinen auf niedriger Ebene auf.</span><span class="sxs-lookup"><span data-stu-id="34f67-188">The CLR calls low-level routines implemented by [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] for threading, scheduling, synchronization, and memory management.</span></span> <span data-ttu-id="34f67-189">Diese sind dieselben Grundelemente, die von der übrigen [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]-Engine verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="34f67-189">These are the same primitives that the rest of the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] engine uses.</span></span> <span data-ttu-id="34f67-190">Dieser Ansatz bietet mehrere Vorteile für Skalierbarkeit, Zuverlässigkeit und Sicherheit.</span><span class="sxs-lookup"><span data-stu-id="34f67-190">This approach provides several scalability, reliability, and security benefits.</span></span>  
  
###### <a name="scalability-common-threading-scheduling-and-synchronization"></a><span data-ttu-id="34f67-191">Skalierbarkeit: Allgemeines Threading, Planung und Synchronisierung</span><span class="sxs-lookup"><span data-stu-id="34f67-191">Scalability: Common threading, scheduling, and synchronization</span></span>  
 <span data-ttu-id="34f67-192">CLR ruft [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]-APIs zur Erstellung von Threads auf, sowohl für ausgeführten Benutzercode als auch zur eigenen internen Verwendung.</span><span class="sxs-lookup"><span data-stu-id="34f67-192">CLR calls [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] APIs for creating threads, both for running user code and for its own internal use.</span></span> <span data-ttu-id="34f67-193">Um zwischen mehreren Threads zu synchronisieren, ruft die CLR [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]-Synchronisierungsobjekte auf.</span><span class="sxs-lookup"><span data-stu-id="34f67-193">In order to synchronize between multiple threads, the CLR calls [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] synchronization objects.</span></span> <span data-ttu-id="34f67-194">Dadurch kann das [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]-Zeitplanungsmodul andere Aufgaben planen, wenn ein Thread auf ein Synchronisierungsobjekt wartet.</span><span class="sxs-lookup"><span data-stu-id="34f67-194">This allows the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] scheduler to schedule other tasks when a thread is waiting on a synchronization object.</span></span> <span data-ttu-id="34f67-195">Wenn die CLR beispielsweise die Garbage Collection initiiert, warten alle zugehörigen Threads auf die Fertigstellung der Garbage Collection.</span><span class="sxs-lookup"><span data-stu-id="34f67-195">For example, when the CLR initiates garbage collection, all of its threads wait for garbage collection to finish.</span></span> <span data-ttu-id="34f67-196">Da das [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]-Zeitplanungsmodul die CLR-Threads und die Synchronisierungsobjekte, auf die sie warten, kennt, kann [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Threads planen, die andere Datenbankaufgaben ausführen, bei denen die CLR nicht benötigt wird.</span><span class="sxs-lookup"><span data-stu-id="34f67-196">Because the CLR threads and the synchronization objects they are waiting on are known to the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] scheduler, [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] can schedule threads that are running other database tasks not involving the CLR.</span></span> <span data-ttu-id="34f67-197">Ferner kann [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] dadurch Deadlocks erkennen, an denen von CLR-Synchronisierungsobjekten benötigte Sperren beteiligt sind, und traditionelle Techniken zur Entfernung von Deadlocks einsetzen.</span><span class="sxs-lookup"><span data-stu-id="34f67-197">This also enables [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] to detect deadlocks that involve locks taken by CLR synchronization objects and employ traditional techniques for deadlock removal.</span></span>  
  
 <span data-ttu-id="34f67-198">Verwalteter Code wird präemptiv in [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="34f67-198">Managed code runs preemptively in [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="34f67-199">Das [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]-Zeitplanungsmodul kann Threads, die über eine längere Zeitspanne nicht aktiv waren, erkennen und anhalten.</span><span class="sxs-lookup"><span data-stu-id="34f67-199">The [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] scheduler has the ability to detect and stop threads that have not yielded for a significant amount of time.</span></span> <span data-ttu-id="34f67-200">Die Funktion zum Verknüpfen von CLR-Threads mit [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]-Threads beinhaltet, dass das [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]-Zeitplanungsmodul „Ausreißerthreads“ in der CLR erkennen und deren Priorität verwalten kann.</span><span class="sxs-lookup"><span data-stu-id="34f67-200">The ability to hook CLR threads to [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] threads implies that the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] scheduler can identify "runaway" threads in the CLR and manage their priority.</span></span> <span data-ttu-id="34f67-201">Solche Ausreißerthreads werden angehalten und in die Warteschlange zurückgestellt.</span><span class="sxs-lookup"><span data-stu-id="34f67-201">Such runaway threads are suspended and put back in the queue.</span></span> <span data-ttu-id="34f67-202">Threads, die mehrfach als Ausreißerthreads identifiziert werden, dürfen für einen gewissen Zeitraum nicht ausgeführt werden, damit andere Arbeitsthreads ausgeführt werden können.</span><span class="sxs-lookup"><span data-stu-id="34f67-202">Threads that are repeatedly identified as runaway threads are not allowed to run for a given period of time so that other executing workers can run.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="34f67-203">Verwalteter Code mit langer Laufzeit, der auf Daten zugreift oder genug Arbeitsspeicher zuordnet, um Garbage Collection auszulösen, wird automatisch aktiv.</span><span class="sxs-lookup"><span data-stu-id="34f67-203">Long-running managed code that accesses data or allocates enough memory to trigger garbage collection will yield automatically.</span></span> <span data-ttu-id="34f67-204">Verwalteter Code mit langer Laufzeit, der nicht auf Daten zugreift oder nicht genug Arbeitsspeicher zuweist, um Garbage Collection auszulösen, sollte explizit durch Aufrufen der Funktion System.Thread.Sleep() von .NET Framework aktiv werden.</span><span class="sxs-lookup"><span data-stu-id="34f67-204">Long-running managed code that does not access data or allocate enough managed memory to trigger garbage collection should explicitly yield by calling the System.Thread.Sleep() function of the .NET Framework.</span></span>  
  
###### <a name="scalability-common-memory-management"></a><span data-ttu-id="34f67-205">Skalierbarkeit: Allgemeine Arbeitsspeicherverwaltung</span><span class="sxs-lookup"><span data-stu-id="34f67-205">Scalability: Common memory management</span></span>  
 <span data-ttu-id="34f67-206">Die CLR ruft [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]-Grundelemente zum Zuordnen und zum Aufheben der Zuordnung von Arbeitsspeicher auf.</span><span class="sxs-lookup"><span data-stu-id="34f67-206">The CLR calls [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] primitives for allocating and de-allocating its memory.</span></span> <span data-ttu-id="34f67-207">Da der von der CLR verwendete Arbeitsspeicher in der Gesamtspeicherauslastung des System berücksichtigt wird, kann [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] innerhalb der konfigurierten Arbeitsspeichergrenzwerte bleiben und sicherstellen, dass die CLR und [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] nicht gegenseitig um Arbeitsspeicher konkurrieren.</span><span class="sxs-lookup"><span data-stu-id="34f67-207">Because the memory used by the CLR is accounted for in the total memory usage of the system, [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] can stay within its configured memory limits and ensure the CLR and [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] are not competing with each other for memory.</span></span> [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] <span data-ttu-id="34f67-208">kann CLR-Arbeitsspeicheranforderungen auch ablehnen, wenn der verfügbare Systemspeicher gering ist, und die CLR anweisen, die Arbeitsspeicherverwendung zu reduzieren, wann andere Tasks Arbeitsspeicher benötigen.</span><span class="sxs-lookup"><span data-stu-id="34f67-208">can also reject CLR memory requests when system memory is constrained, and ask CLR to reduce its memory use when other tasks need memory.</span></span>  
  
###### <a name="reliability-application-domains-and-unrecoverable-exceptions"></a><span data-ttu-id="34f67-209">Zuverlässigkeit: Anwendungsdomänen und nicht behebbare Ausnahmen</span><span class="sxs-lookup"><span data-stu-id="34f67-209">Reliability: Application domains and unrecoverable exceptions</span></span>  
 <span data-ttu-id="34f67-210">Wenn in verwaltetem Code in .NET Framework-APIs schwerwiegende Ausnahmen auftreten, wie nicht genügend Arbeitsspeicher oder Stapelüberlauf, ist es nicht immer möglich, diese Fehler zu beheben und konsistente und korrekte Semantik für die Implementierung zu gewährleisten.</span><span class="sxs-lookup"><span data-stu-id="34f67-210">When managed code in the .NET Framework APIs encounters critical exceptions, such as out-of-memory or stack overflow, it is not always possible to recover from such failures and ensure consistent and correct semantics for their implementation.</span></span> <span data-ttu-id="34f67-211">Diese APIs lösen als Reaktion auf diese Fehler eine Threadabbruchausnahme aus.</span><span class="sxs-lookup"><span data-stu-id="34f67-211">These APIs raise a thread abort exception in response to these failures.</span></span>  
  
 <span data-ttu-id="34f67-212">Beim Hosten in [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] werden solche Threadabbrüche folgendermaßen behandelt: Die CLR erkennt jeden Freigabezustand in der Anwendungsdomäne, in der der Threadabbruch auftritt.</span><span class="sxs-lookup"><span data-stu-id="34f67-212">When hosted in [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)], such thread aborts are handled as follows: the CLR detects any shared state in the application domain in which the thread abort occurs.</span></span> <span data-ttu-id="34f67-213">Die CLR überprüft dazu das Vorhandensein von Synchronisierungsobjekten.</span><span class="sxs-lookup"><span data-stu-id="34f67-213">The CLR does this by checking for the presence of synchronization objects.</span></span> <span data-ttu-id="34f67-214">Wenn es einen Freigabezustand in der Anwendungsdomäne gibt, dann wird die Anwendungsdomäne selbst entladen.</span><span class="sxs-lookup"><span data-stu-id="34f67-214">If there is shared state in the application domain, then the application domain itself is unloaded.</span></span> <span data-ttu-id="34f67-215">Die Entladung aus der Anwendungsdomäne beendet Datenbanktransaktionen, die gerade in dieser Anwendungsdomäne ausgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="34f67-215">The unloading of the application domain stops database transactions that are currently running in that application domain.</span></span> <span data-ttu-id="34f67-216">Da das Vorhandensein eines Freigabezustands die Auswirkungen dieser schwerwiegenden Ausnahmen auf Benutzersitzungen außer der Sitzung, die die Ausnahme ausgelöst hat, vergrößern kann, haben [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] und die CLR Schritte unternommen, um die Wahrscheinlichkeit eines Freigabezustands zu verringern.</span><span class="sxs-lookup"><span data-stu-id="34f67-216">Because the presence of shared state can widen the impact of such critical exceptions to user sessions other than the one triggering the exception, [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] and the CLR have taken steps to reduce the likelihood of shared state.</span></span> <span data-ttu-id="34f67-217">Weitere Informationen hierzu finden Sie in der .NET Framework- Dokumentation.</span><span class="sxs-lookup"><span data-stu-id="34f67-217">For more information, see the .NET Framework documentation.</span></span>  
  
###### <a name="security-permission-sets"></a><span data-ttu-id="34f67-218">Sicherheit: Berechtigungssätze</span><span class="sxs-lookup"><span data-stu-id="34f67-218">Security: Permission sets</span></span>  
 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]<span data-ttu-id="34f67-219">-Benutzer können die Zuverlässigkeits- und Sicherheitsanforderungen für Code angeben, der in der Datenbank bereitgestellt wird.</span><span class="sxs-lookup"><span data-stu-id="34f67-219">allows users to specify the reliability and security requirements for code deployed into the database.</span></span> <span data-ttu-id="34f67-220">Beim Hochladen von Assemblys in die Datenbank kann der Verfasser der Assembly für diese einen von drei Berechtigungssätzen angeben: SAFE, EXTERNAL_ACCESS und UNSAFE.</span><span class="sxs-lookup"><span data-stu-id="34f67-220">When assemblies are uploaded into the database, the author of the assembly can specify one of three permission sets for that assembly: SAFE, EXTERNAL_ACCESS and UNSAFE.</span></span>  
  
|||||  
|-|-|-|-|  
|<span data-ttu-id="34f67-221">Berechtigungssatz</span><span class="sxs-lookup"><span data-stu-id="34f67-221">Permission set</span></span>|<span data-ttu-id="34f67-222">SAFE</span><span class="sxs-lookup"><span data-stu-id="34f67-222">SAFE</span></span>|<span data-ttu-id="34f67-223">EXTERNAL_ACCESS</span><span class="sxs-lookup"><span data-stu-id="34f67-223">EXTERNAL_ACCESS</span></span>|<span data-ttu-id="34f67-224">UNSAFE</span><span class="sxs-lookup"><span data-stu-id="34f67-224">UNSAFE</span></span>|  
|<span data-ttu-id="34f67-225">Codezugriffssicherheit</span><span class="sxs-lookup"><span data-stu-id="34f67-225">Code Access Security</span></span>|<span data-ttu-id="34f67-226">Nur ausführen</span><span class="sxs-lookup"><span data-stu-id="34f67-226">Execute only</span></span>|<span data-ttu-id="34f67-227">Ausführen + Zugriff auf externe Ressourcen</span><span class="sxs-lookup"><span data-stu-id="34f67-227">Execute + access to external resources</span></span>|<span data-ttu-id="34f67-228">Nicht eingeschränkt</span><span class="sxs-lookup"><span data-stu-id="34f67-228">Unrestricted</span></span>|  
|<span data-ttu-id="34f67-229">Beschränkungen des Programmiermodells</span><span class="sxs-lookup"><span data-stu-id="34f67-229">Programming model restrictions</span></span>|<span data-ttu-id="34f67-230">Ja</span><span class="sxs-lookup"><span data-stu-id="34f67-230">Yes</span></span>|<span data-ttu-id="34f67-231">Ja</span><span class="sxs-lookup"><span data-stu-id="34f67-231">Yes</span></span>|<span data-ttu-id="34f67-232">Keine Einschränkungen</span><span class="sxs-lookup"><span data-stu-id="34f67-232">No restrictions</span></span>|  
|<span data-ttu-id="34f67-233">Überprüfbarkeit erforderlich</span><span class="sxs-lookup"><span data-stu-id="34f67-233">Verifiability requirement</span></span>|<span data-ttu-id="34f67-234">Ja</span><span class="sxs-lookup"><span data-stu-id="34f67-234">Yes</span></span>|<span data-ttu-id="34f67-235">Ja</span><span class="sxs-lookup"><span data-stu-id="34f67-235">Yes</span></span>|<span data-ttu-id="34f67-236">Nein</span><span class="sxs-lookup"><span data-stu-id="34f67-236">No</span></span>|  
|<span data-ttu-id="34f67-237">Aufrufbarkeit von systemeigenem Code</span><span class="sxs-lookup"><span data-stu-id="34f67-237">Ability to call native code</span></span>|<span data-ttu-id="34f67-238">Nein</span><span class="sxs-lookup"><span data-stu-id="34f67-238">No</span></span>|<span data-ttu-id="34f67-239">Nein</span><span class="sxs-lookup"><span data-stu-id="34f67-239">No</span></span>|<span data-ttu-id="34f67-240">Ja</span><span class="sxs-lookup"><span data-stu-id="34f67-240">Yes</span></span>|  
  
 <span data-ttu-id="34f67-241">SAFE ist der zuverlässigste und sicherste Modus, der mit Einschränkungen hinsichtlich des zulässigen Programmiermodells einhergeht.</span><span class="sxs-lookup"><span data-stu-id="34f67-241">SAFE is the most reliable and secure mode with associated restrictions in terms of the allowed programming model.</span></span> <span data-ttu-id="34f67-242">Assemblys der Stufe SAFE verfügen über ausreichende Berechtigungen für die Ausführung, die Durchführung von Berechnungen und den Zugriff auf die lokale Datenbank.</span><span class="sxs-lookup"><span data-stu-id="34f67-242">SAFE assemblies are given enough permission to run, perform computations, and have access to the local database.</span></span> <span data-ttu-id="34f67-243">Assemblys der Stufe SAFE müssen nachweislich typsicher sein und dürfen keinen nicht verwalteten Code aufrufen.</span><span class="sxs-lookup"><span data-stu-id="34f67-243">SAFE assemblies need to be verifiably type safe and are not allowed to call unmanaged code.</span></span>  
  
 <span data-ttu-id="34f67-244">UNSAFE ist für hoch vertrauenswürdigen Code vorgesehen, der nur von Datenbankadministratoren erstellt werden kann.</span><span class="sxs-lookup"><span data-stu-id="34f67-244">UNSAFE is for highly trusted code that can only be created by database administrators.</span></span> <span data-ttu-id="34f67-245">Dieser vertrauenswürdige Code verfügt über keine Codezugriffs-Sicherheitsbeschränkungen und kann nicht verwalteten (systemeigenen) Code aufrufen.</span><span class="sxs-lookup"><span data-stu-id="34f67-245">This trusted code has no code access security restrictions, and it can call unmanaged (native) code.</span></span>  
  
 <span data-ttu-id="34f67-246">EXTERNAL_ACCESS stellt eine mittlere Sicherheitsebene dar, bei der Code auf Ressourcen außerhalb der Datenbank zugreifen kann, die aber dennoch so zuverlässig wie SAFE ist.</span><span class="sxs-lookup"><span data-stu-id="34f67-246">EXTERNAL_ACCESS provides an intermediate security option, allowing code to access resources external to the database but still having the reliability guarantees of SAFE.</span></span>  
  
 <span data-ttu-id="34f67-247">In [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] wird mithilfe der auf Hostebene festgelegten Stufe der CAS-Richtlinie eine Hostrichtlinie eingerichtet, die anhand des in den [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]-Katalogen gespeicherten Berechtigungssatzes einen von drei Berechtigungssätzen gewährt.</span><span class="sxs-lookup"><span data-stu-id="34f67-247">[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] uses the host-level CAS policy layer to set up a host policy that grants one of the three sets of permissions based on the permission set stored in [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] catalogs.</span></span> <span data-ttu-id="34f67-248">Verwaltetem Code, der in der Datenbank ausgeführt wird, wird immer einer dieser Codezugriffsberechtigungssätze abgerufen.</span><span class="sxs-lookup"><span data-stu-id="34f67-248">Managed code running inside the database always gets one of these code access permission sets.</span></span>  
  
### <a name="programming-model-restrictions"></a><span data-ttu-id="34f67-249">Einschränkungen des Programmiermodells</span><span class="sxs-lookup"><span data-stu-id="34f67-249">Programming Model Restrictions</span></span>  
 <span data-ttu-id="34f67-250">Im Programmiermodell für verwalteten Code in [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] werden Funktionen zum Schreiben, Prozeduren und Typen benötigt, für die normalerweise weder der über mehrere Aufrufe gespeicherte Zustand noch die Freigabe des Zustands über mehrere Benutzersitzungen erforderlich sind.</span><span class="sxs-lookup"><span data-stu-id="34f67-250">The programming model for managed code in [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] involves writing functions, procedures, and types which typically do not require the use of state held across multiple invocations or the sharing of state across multiple user sessions.</span></span> <span data-ttu-id="34f67-251">Darüber hinaus kann ein Freigabezustand, wie bereits erläutert, zu schwerwiegenden Ausnahmen führen, die die Skalierbarkeit und Zuverlässigkeit der Anwendung gefährden können.</span><span class="sxs-lookup"><span data-stu-id="34f67-251">Further, as described earlier, the presence of shared state can cause critical exceptions that impact the scalability and the reliability of the application.</span></span>  
  
 <span data-ttu-id="34f67-252">Aus diesen Gründen raten wir von der Verwendung von statischen Variablen und Datenelementen von Klassen ab, die in [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="34f67-252">Given these considerations, we discourage the use of static variables and static data members of classes used in [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="34f67-253">Bei Assemblys vom Typ SAFE und EXTERNAL_ACCESS untersucht [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] bei der Ausführung von CREATE ASSEMBLY die Metadaten der Assembly. Wenn die Verwendung statischer Datenelemente oder Variablen ermittelt wird, wird die Assembly nicht erstellt.</span><span class="sxs-lookup"><span data-stu-id="34f67-253">For SAFE and EXTERNAL_ACCESS assemblies, [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] examines the metadata of the assembly at CREATE ASSEMBLY time and fails the creation of such assemblies if it finds the use of static data members and variables.</span></span>  
  
 <span data-ttu-id="34f67-254">Darüber hinaus ist in [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] das Aufrufen von .NET Framework-APIs nicht möglich, die mit den Hostschutzattributen `SharedState`, `Synchronization` und `ExternalProcessMgmt` versehen sind.</span><span class="sxs-lookup"><span data-stu-id="34f67-254">[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] also disallows calls to .NET Framework APIs that are annotated with the `SharedState`, `Synchronization` and `ExternalProcessMgmt` host protection attributes.</span></span> <span data-ttu-id="34f67-255">Dies verhindert, dass Assemblys des Typs SAFE und EXTERNAL_ACCESS APIs aufrufen, die die Freigabe des Zustands aktivieren, Synchronisierungen durchführen und die Integrität des [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]-Prozesses beeinträchtigen.</span><span class="sxs-lookup"><span data-stu-id="34f67-255">This prevents SAFE and EXTERNAL_ACCESS assemblies from calling any APIs that enable sharing state, performing synchronization, and affecting the integrity of the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] process.</span></span> <span data-ttu-id="34f67-256">Weitere Informationen finden Sie unter [Einschränkungen für das CLR-Integrations Programmiermodell](database-objects/clr-integration-programming-model-restrictions.md).</span><span class="sxs-lookup"><span data-stu-id="34f67-256">For more information, see [CLR Integration Programming Model Restrictions](database-objects/clr-integration-programming-model-restrictions.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="34f67-257">Weitere Informationen</span><span class="sxs-lookup"><span data-stu-id="34f67-257">See Also</span></span>  
 <span data-ttu-id="34f67-258">[Sicherheit der CLR-Integration](security/clr-integration-security.md) </span><span class="sxs-lookup"><span data-stu-id="34f67-258">[CLR Integration Security](security/clr-integration-security.md) </span></span>  
 [<span data-ttu-id="34f67-259">Leistungsfähigkeit der CLR-Integration</span><span class="sxs-lookup"><span data-stu-id="34f67-259">Performance of CLR Integration</span></span>](clr-integration-architecture-performance.md)  
  
  
