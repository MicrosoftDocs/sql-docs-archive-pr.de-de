---
title: Übersicht über räumliche Indizes | Microsoft-Dokumentation
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: ''
ms.topic: conceptual
helpviewer_keywords:
- spatial indexes [SQL Server]
ms.assetid: b1ae7b78-182a-459e-ab28-f743e43f8293
author: MladjoA
ms.author: mlandzic
ms.openlocfilehash: 36406bd60b4204469aca3d20862020870a8832fe
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 08/04/2020
ms.locfileid: "87619060"
---
# <a name="spatial-indexes-overview"></a><span data-ttu-id="b507d-102">Übersicht über räumliche Indizes</span><span class="sxs-lookup"><span data-stu-id="b507d-102">Spatial Indexes Overview</span></span>
  [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] <span data-ttu-id="b507d-103">unterstützt räumliche Daten und räumliche Indizes.</span><span class="sxs-lookup"><span data-stu-id="b507d-103">supports spatial data and spatial indexes.</span></span> <span data-ttu-id="b507d-104">Ein *räumlicher Index* ist ein erweiterter Index, der es Ihnen ermöglicht, eine räumliche Spalte zu indizieren.</span><span class="sxs-lookup"><span data-stu-id="b507d-104">A *spatial index* is a type of extended index that allows you to index a spatial column.</span></span> <span data-ttu-id="b507d-105">Eine räumliche Spalte ist eine Tabellenspalte mit Daten eines räumlichen Datentyps wie beispielsweise `geometry` oder `geography`.</span><span class="sxs-lookup"><span data-stu-id="b507d-105">A spatial column is a table column that contains data of a spatial data type, such as `geometry` or `geography`.</span></span>

> [!IMPORTANT]
>  <span data-ttu-id="b507d-106">Um eine ausführliche Beschreibung und Beispiele der in [!INCLUDE[ssSQL11](../../includes/sssql11-md.md)]eingeführten räumlichen Funktionen (z.B. Funktionen, die räumliche Indizes beeinflussen) zu erhalten, laden Sie das Whitepaper [New Spatial Features in SQL Server 2012](https://go.microsoft.com/fwlink/?LinkId=226407)(Neue räumliche Funktionen in SQL Server 2012) herunter.</span><span class="sxs-lookup"><span data-stu-id="b507d-106">For a detailed description and examples of spatial features introduced in [!INCLUDE[ssSQL11](../../includes/sssql11-md.md)], including features that affect spatial indexes, download the white paper, [New Spatial Features in SQL Server 2012](https://go.microsoft.com/fwlink/?LinkId=226407).</span></span>

##  <a name="about-spatial-indexes"></a><a name="about"></a> <span data-ttu-id="b507d-107">Informationen zu räumlichen Indizes</span><span class="sxs-lookup"><span data-stu-id="b507d-107">About Spatial Indexes</span></span>

###  <a name="decomposing-indexed-space-into-a-grid-hierarchy"></a><a name="decompose"></a> <span data-ttu-id="b507d-108">Zerlegen von indiziertem Raum in eine Rasterhierarchie</span><span class="sxs-lookup"><span data-stu-id="b507d-108">Decomposing Indexed Space into a Grid Hierarchy</span></span>
 <span data-ttu-id="b507d-109">In [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]werden räumliche Indizes mithilfe von B-Strukturen erstellt; das heißt, dass die Indizes die zweidimensionalen räumlichen Daten in der linearen Reihenfolge der B-Strukturen darstellen müssen.</span><span class="sxs-lookup"><span data-stu-id="b507d-109">In [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)], spatial indexes are built using B-trees, which means that the indexes must represent the 2-dimensional spatial data in the linear order of B-trees.</span></span> <span data-ttu-id="b507d-110">Bevor Daten in einen räumlichen Index eingelesen werden, implementiert [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] daher eine einheitliche hierarchische Zerlegung des Raums.</span><span class="sxs-lookup"><span data-stu-id="b507d-110">Therefore, before reading data into a spatial index, [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] implements a hierarchical uniform decomposition of space.</span></span> <span data-ttu-id="b507d-111">Während der Indexerstellung wird der Raum in eine vier Ebenen umfassende *Rasterhierarchie* *zerlegt*.</span><span class="sxs-lookup"><span data-stu-id="b507d-111">The index-creation process *decomposes* the space into a four-level *grid hierarchy*.</span></span> <span data-ttu-id="b507d-112">Diese Ebenen werden als *Ebene 1* (die oberste Ebene), *Ebene 2*, *Ebene 3*und *Ebene 4*bezeichnet.</span><span class="sxs-lookup"><span data-stu-id="b507d-112">These levels are referred to as *level 1* (the top level), *level 2*, *level 3*, and *level 4*.</span></span>

 <span data-ttu-id="b507d-113">Auf jeder nachfolgenden Ebene wird die ihr übergeordnete Ebene weiter zerlegt, sodass jede Zelle der übergeordneten Ebene ein vollständiges Raster der nächsten Ebene enthält.</span><span class="sxs-lookup"><span data-stu-id="b507d-113">Each successive level further decomposes the level above it, so each upper-level cell contains a complete grid at the next level.</span></span> <span data-ttu-id="b507d-114">Auf einer gegebenen Ebene verfügen alle Raster an beiden Achsen über die gleiche Anzahl von Zellen (beispielweise 4&nbsp;x&nbsp;4 oder 8&nbsp;x&nbsp;8), und die Zellen sind alle gleich groß.</span><span class="sxs-lookup"><span data-stu-id="b507d-114">On a given level, all the grids have the same number of cells along both axes (for example, 4x4 or 8x8), and the cells are all one size.</span></span>

 <span data-ttu-id="b507d-115">In der folgenden Abbildung wird dargestellt, wie die rechte obere Zelle auf jeder Ebene der Rasterhierarchie in ein Raster der Größe 4&nbsp;x&nbsp;4 zerlegt wird.</span><span class="sxs-lookup"><span data-stu-id="b507d-115">The following illustration shows the decomposition for the upper-right cell at each level of the grid hierarchy into a 4x4 grid.</span></span> <span data-ttu-id="b507d-116">In Wirklichkeit werden alle Zellen auf diese Art und Weise zerlegt.</span><span class="sxs-lookup"><span data-stu-id="b507d-116">In reality, all the cells are decomposed in this way.</span></span> <span data-ttu-id="b507d-117">Wenn beispielsweise ein Raum in vier Ebenen von 4&nbsp;x&nbsp;4-Rastern zerlegt wird, resultieren daraus insgesamt 65.536&nbsp;Zellen auf Ebene&nbsp;4.</span><span class="sxs-lookup"><span data-stu-id="b507d-117">Thus, for example, decomposing a space into four levels of 4x4 grids actually produces a total of 65,536 level-four cells.</span></span>

 <span data-ttu-id="b507d-118">![Vier Ebenen des rekursiven Mosaiks](../../database-engine/media/spndx-recursive-levels-telescoped.gif "Vier Ebenen des rekursiven Mosaiks")</span><span class="sxs-lookup"><span data-stu-id="b507d-118">![Four-levels of recursive tessellation](../../database-engine/media/spndx-recursive-levels-telescoped.gif "Four-levels of recursive tessellation")</span></span>

> [!NOTE]
>  <span data-ttu-id="b507d-119">Die Zerlegung des Raums in einen räumlichen Index ist unabhängig von der Maßeinheit, die die Anwendung verwendet.</span><span class="sxs-lookup"><span data-stu-id="b507d-119">The decomposition of space for a spatial index is independent of the unit of measurement that the application data uses.</span></span>

 <span data-ttu-id="b507d-120">Die Zellen einer Rasterhierarchie werden mithilfe einer Variante der Raum füllenden Hilbert-Kurve linear nummeriert.</span><span class="sxs-lookup"><span data-stu-id="b507d-120">Grid hierarchy cells are numbered in a linear fashion by using a variation of the Hilbert space-filling curve.</span></span> <span data-ttu-id="b507d-121">Zur Veranschaulichung wird hier jedoch eine einfache zeilenweise Nummerierung statt der durch die Hilbert-Kurve erzeugten Nummerierung verwendet.</span><span class="sxs-lookup"><span data-stu-id="b507d-121">For the purpose of illustration, however, this discussion uses a simple row-wise numbering, instead of the numbering that is actually produced by the Hilbert curve.</span></span> <span data-ttu-id="b507d-122">In der folgenden Abbildung wurden bereits verschiedene Polygone, die Gebäude darstellen, und Linien, die Straßen darstellen, in einem 4 x 4-Raster der Ebene 1 platziert.</span><span class="sxs-lookup"><span data-stu-id="b507d-122">In the following illustration, several polygons that represent buildings, and lines that represent streets, have already been placed into a 4x4, level-1 grid.</span></span> <span data-ttu-id="b507d-123">Die Zellen der Ebene 1 werden ab der linken oberen Zelle von 1 bis 16 nummeriert.</span><span class="sxs-lookup"><span data-stu-id="b507d-123">The level-1 cells are numbered from 1 through 16, starting with the upper-left cell.</span></span>

 <span data-ttu-id="b507d-124">![Polygone und Linien, platziert in einem 4x4-Raster der Ebene 1](../../database-engine/media/spndx-level-1-objects.gif "Polygone und Linien, platziert in einem 4x4-Raster der Ebene 1")</span><span class="sxs-lookup"><span data-stu-id="b507d-124">![Polygons and lines placed into a 4x4 level-1 grid](../../database-engine/media/spndx-level-1-objects.gif "Polygons and lines placed into a 4x4 level-1 grid")</span></span>

#### <a name="grid-density"></a><span data-ttu-id="b507d-125">Rasterdichte</span><span class="sxs-lookup"><span data-stu-id="b507d-125">Grid Density</span></span>
 <span data-ttu-id="b507d-126">Die Anzahl der Zellen entlang der Achsen eines Rasters bestimmt deren *Dichte*: je größer die Anzahl, desto dichter das Raster.</span><span class="sxs-lookup"><span data-stu-id="b507d-126">The number of cells along the axes of a grid determines its *density*: the larger the number, the denser the grid.</span></span> <span data-ttu-id="b507d-127">Beispielsweise ist ein 8&nbsp;x&nbsp;8-Raster (das 64&nbsp;Zellen ergibt), dichter als ein 4&nbsp;x&nbsp;4-Raster(das 16&nbsp;Zellen ergibt).</span><span class="sxs-lookup"><span data-stu-id="b507d-127">For example, an 8x8 grid (which produces 64 cells), is denser than a 4x4 grid (which produces 16 cells).</span></span> <span data-ttu-id="b507d-128">Die Rasterdichte wird pro Ebene definiert.</span><span class="sxs-lookup"><span data-stu-id="b507d-128">Grid density is defined on a per-level basis.</span></span>

 <span data-ttu-id="b507d-129">In der [CREATE SPATIAL INDEX](/sql/t-sql/statements/create-spatial-index-transact-sql)[!INCLUDE[tsql](../../../includes/tsql-md.md)] -Anweisung kann eine GRIDS-Klausel angegeben werden, die es ermöglicht, für verschiedene Ebenen verschiedene Rasterdichten anzugeben.</span><span class="sxs-lookup"><span data-stu-id="b507d-129">The [CREATE SPATIAL INDEX](/sql/t-sql/statements/create-spatial-index-transact-sql)[!INCLUDE[tsql](../../../includes/tsql-md.md)] statement supports a GRIDS clause that enables you to specify different grid densities at different levels.</span></span> <span data-ttu-id="b507d-130">Die Rasterdichte für eine gegebene Ebene wird mit einem der folgenden Schlüsselwörter angegeben:</span><span class="sxs-lookup"><span data-stu-id="b507d-130">The grid density for a given level is specified by using one of the following keywords.</span></span>

|<span data-ttu-id="b507d-131">Schlüsselwort</span><span class="sxs-lookup"><span data-stu-id="b507d-131">Keyword</span></span>|<span data-ttu-id="b507d-132">Rasterkonfiguration</span><span class="sxs-lookup"><span data-stu-id="b507d-132">Grid configuration</span></span>|<span data-ttu-id="b507d-133">Anzahl von Zellen</span><span class="sxs-lookup"><span data-stu-id="b507d-133">Number of cells</span></span>|
|-------------|------------------------|---------------------|
|<span data-ttu-id="b507d-134">LOW</span><span class="sxs-lookup"><span data-stu-id="b507d-134">LOW</span></span>|<span data-ttu-id="b507d-135">4X4</span><span class="sxs-lookup"><span data-stu-id="b507d-135">4X4</span></span>|<span data-ttu-id="b507d-136">16</span><span class="sxs-lookup"><span data-stu-id="b507d-136">16</span></span>|
|<span data-ttu-id="b507d-137">MEDIUM</span><span class="sxs-lookup"><span data-stu-id="b507d-137">MEDIUM</span></span>|<span data-ttu-id="b507d-138">8X8</span><span class="sxs-lookup"><span data-stu-id="b507d-138">8X8</span></span>|<span data-ttu-id="b507d-139">64</span><span class="sxs-lookup"><span data-stu-id="b507d-139">64</span></span>|
|<span data-ttu-id="b507d-140">HIGH</span><span class="sxs-lookup"><span data-stu-id="b507d-140">HIGH</span></span>|<span data-ttu-id="b507d-141">16X16</span><span class="sxs-lookup"><span data-stu-id="b507d-141">16X16</span></span>|<span data-ttu-id="b507d-142">256</span><span class="sxs-lookup"><span data-stu-id="b507d-142">256</span></span>|

 <span data-ttu-id="b507d-143">In [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]ist die Standardeinstellung für alle Ebenen MEDIUM, wenn der Datenbank-Kompatibilitätsgrad auf 100 oder niedriger festgelegt wird.</span><span class="sxs-lookup"><span data-stu-id="b507d-143">In [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)], when the database compatibility level is set to 100 or lower, then the default is MEDIUM on all levels.</span></span> <span data-ttu-id="b507d-144">Wenn der Datenbank-Kompatibilitätsgrad auf 110 oder höher festgelegt wird, ist die Standardeinstellung ein automatisches Rasterschema.</span><span class="sxs-lookup"><span data-stu-id="b507d-144">When the database compatibility level is set to 110 or higher, then the default is an auto grid scheme.</span></span>

 <span data-ttu-id="b507d-145">Sie können den Zerlegungsprozess steuern, indem Sie nicht standardmäßige Rasterdichten angeben.</span><span class="sxs-lookup"><span data-stu-id="b507d-145">You can control the decomposition process by specifying non-default grid densities.</span></span> <span data-ttu-id="b507d-146">Beispielsweise können verschiedene Dichten auf verschiedenen Ebenen hilfreich sein, um einen Index auf die Größe des indizierten Raums und der Objekte in der räumlichen Spalte fein abzustimmen.</span><span class="sxs-lookup"><span data-stu-id="b507d-146">For example, different grid densities on different levels might be useful for fine tuning an index based on the size of the indexed space and the objects in the spatial column.</span></span>

> [!NOTE]
>  <span data-ttu-id="b507d-147">Die Rasterdichten eines räumlichen Index sind in den Spalten level_1_grid, level_2_grid, level_3_grid und level_4_grid der [sys.spatial_index_tessellations](/sql/relational-databases/system-catalog-views/sys-spatial-index-tessellations-transact-sql) -Katalogsicht sichtbar, wenn der Datenbank-Kompatibilitätsgrad auf 100 oder niedriger festgelegt wird.</span><span class="sxs-lookup"><span data-stu-id="b507d-147">The grid densities of a spatial index are visible in the level_1_grid, level_2_grid, level_3_grid, and level_4_grid columns of the [sys.spatial_index_tessellations](/sql/relational-databases/system-catalog-views/sys-spatial-index-tessellations-transact-sql) catalog view when the database compatibility level is set to 100 or lower.</span></span> <span data-ttu-id="b507d-148">Die Mosaik `GEOMETRY_AUTO_GRID` / `GEOGRAPHY_AUTO_GRID` Schema Optionen füllen diese Spalten nicht auf.</span><span class="sxs-lookup"><span data-stu-id="b507d-148">The `GEOMETRY_AUTO_GRID`/`GEOGRAPHY_AUTO_GRID` tessellation scheme options do not populate these columns.</span></span> <span data-ttu-id="b507d-149">die sys. spatial_index_tessellations-Katalog Sicht enthält `NULL` Werte für diese Spalten, wenn die automatischen Raster Optionen verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="b507d-149">sys.spatial_index_tessellations catalog view has `NULL` values for these columns when the auto grid options are used.</span></span>

###  <a name="tessellation"></a><a name="tessellation"></a><span data-ttu-id="b507d-150">Mosaik</span><span class="sxs-lookup"><span data-stu-id="b507d-150">Tessellation</span></span>
 <span data-ttu-id="b507d-151">Nach der Zerlegung eines indizierten Raums in eine Rasterhierarchie werden die Daten anhand des räumlichen Indexes zeilenweise aus der räumlichen Spalte gelesen.</span><span class="sxs-lookup"><span data-stu-id="b507d-151">After decomposition of an indexed space into a grid hierarchy, the spatial index reads the data from the spatial column, row by row.</span></span> <span data-ttu-id="b507d-152">Nachdem die Daten für ein räumliches Objekt (bzw. eine räumliche Instanz) gelesen wurden, wird unter Verwendung des räumlichen Index ein *Mosaikprozess* für dieses Objekt durchgeführt.</span><span class="sxs-lookup"><span data-stu-id="b507d-152">After reading the data for a spatial object (or instance), the spatial index performs a *tessellation process* for that object.</span></span> <span data-ttu-id="b507d-153">Durch den Mosaikprozess wird das Objekt in die Rasterhierarchie eingepasst, indem das Objekt einer Menge von Rasterzellen zugeordnet wird, die es berührt (*berührte Zellen*).</span><span class="sxs-lookup"><span data-stu-id="b507d-153">The tessellation processfits the object into the grid hierarchy by associating the object with a set of grid cells that it touches (*touched cells*).</span></span> <span data-ttu-id="b507d-154">Auf Ebene 1 der Rasterhierarchie beginnend, verläuft der Mosaikprozess *breitenorientiert* über der Ebene.</span><span class="sxs-lookup"><span data-stu-id="b507d-154">Starting at level 1 of the grid hierarchy, the tessellation process proceeds *breadth first* across the level.</span></span> <span data-ttu-id="b507d-155">Potenziell kann der Prozess über alle vier Ebenen fortgesetzt werden, wobei zu einem Zeitpunkt jeweils nur eine Ebene bearbeitet werden kann.</span><span class="sxs-lookup"><span data-stu-id="b507d-155">Potentially, the process can continue through all four levels, one level at a time.</span></span>

 <span data-ttu-id="b507d-156">Ergebnis des Mosaikprozesses ist eine Menge berührter Zellen, die im räumlichen Index für das betreffende Objekt verzeichnet sind.</span><span class="sxs-lookup"><span data-stu-id="b507d-156">The output of the tessellation process is a set of touched cells that are recorded in the spatial index for the object.</span></span> <span data-ttu-id="b507d-157">Durch das Verweisen auf diese aufgezeichneten Zellen kann mit dem räumlichen Index die Position des Objekts im Raum relativ zu anderen Objekten der räumlichen Spalte, die ebenfalls im Index gespeichert sind, bestimmt werden.</span><span class="sxs-lookup"><span data-stu-id="b507d-157">By referring to these recorded cells, the spatial index can locate the object in space relative to other objects in the spatial column that are also stored in the index.</span></span>

#### <a name="tessellation-rules"></a><span data-ttu-id="b507d-158">Mosaikregeln</span><span class="sxs-lookup"><span data-stu-id="b507d-158">Tessellation Rules</span></span>
 <span data-ttu-id="b507d-159">Um die Anzahl berührter Zellen zu beschränken, die für ein Objekt verzeichnet werden, werden im Mosaikprozess einige Mosaikregeln berücksichtigt.</span><span class="sxs-lookup"><span data-stu-id="b507d-159">To limit the number of touched cells that are recorded for an object, the tessellation process applies several tessellation rules.</span></span> <span data-ttu-id="b507d-160">Diese Regeln bestimmen die Tiefe des Mosaikprozesses, und sie legen fest, welche der berührten Zellen im räumlichen Index verzeichnet werden.</span><span class="sxs-lookup"><span data-stu-id="b507d-160">These rules determine the depth of the tessellation process and which of the touched cells are recorded in the index.</span></span>

 <span data-ttu-id="b507d-161">Nachfolgend sind diese Regeln aufgeführt:</span><span class="sxs-lookup"><span data-stu-id="b507d-161">These rules are as follows:</span></span>

-   <span data-ttu-id="b507d-162">Die Überlagerungsregel</span><span class="sxs-lookup"><span data-stu-id="b507d-162">The covering rule</span></span>

     <span data-ttu-id="b507d-163">Wenn das Objekt eine Zelle völlig bedeckt, heißt es, dass die Zelle vom Objekt *überlagert* wird.</span><span class="sxs-lookup"><span data-stu-id="b507d-163">If the object completely covers a cell, that cell is said to be *covered* by the object.</span></span> <span data-ttu-id="b507d-164">Eine überlagerte Zelle wird gezählt und nicht im Mosaikprozess berücksichtigt.</span><span class="sxs-lookup"><span data-stu-id="b507d-164">A covered cell is counted and is not tessellated.</span></span> <span data-ttu-id="b507d-165">Diese Regel ist auf allen Ebenen der Rasterhierarchie gültig.</span><span class="sxs-lookup"><span data-stu-id="b507d-165">This rule applies at all levels of the grid hierarchy.</span></span> <span data-ttu-id="b507d-166">Die Überlagerungsregel vereinfacht den Mosaikprozess und verringert die Datenmenge, die in einem räumlichen Index aufgezeichnet wird.</span><span class="sxs-lookup"><span data-stu-id="b507d-166">The covering rule simplifies the tessellation process and reduces the amount of data that a spatial index records.</span></span>

-   <span data-ttu-id="b507d-167">Die Zellen-pro-Objekt-Regel</span><span class="sxs-lookup"><span data-stu-id="b507d-167">The cells-per-object rule</span></span>

     <span data-ttu-id="b507d-168">Diese Regel erzwingt den *Zellen-pro-Objekt-Grenzwert*, der die maximale Anzahl von Zellen festlegt, die für jedes Objekt gezählt werden können. Dieser Grenzwert gilt nicht für Ebene 1.</span><span class="sxs-lookup"><span data-stu-id="b507d-168">This rule enforces the *cells-per-object limit*, which determines the maximum number of cells that can be counted for each object, except on level 1.</span></span> <span data-ttu-id="b507d-169">Auf tieferen Ebenen steuert die Zellen-pro-Objekt-Regel die Informationsmenge, die über das Objekt aufgezeichnet werden kann.</span><span class="sxs-lookup"><span data-stu-id="b507d-169">At lower levels, the cells-per-object rule controls the amount of information that can be recorded about the object.</span></span>

-   <span data-ttu-id="b507d-170">Die Tiefste-Zelle-Regel</span><span class="sxs-lookup"><span data-stu-id="b507d-170">The deepest-cell rule</span></span>

     <span data-ttu-id="b507d-171">Die Tiefste-Zelle-Regel generiert die beste Näherung für ein Objekt, indem nur die Zellen der untersten Ebene aufgezeichnet werden, die im Mosaikprozess für das Objekt berücksichtigt wurden.</span><span class="sxs-lookup"><span data-stu-id="b507d-171">The deepest-cell rule generates the best approximation of an object by recording only the bottom-most cells that have been tessellated for the object.</span></span> <span data-ttu-id="b507d-172">Übergeordnete Zellen tragen nicht zur Zellen-pro-Objekt-Anzahl bei, und sie werden nicht im Index aufgezeichnet.</span><span class="sxs-lookup"><span data-stu-id="b507d-172">Parent cells do not contribute to the cells-per-object count, and they are not recorded in the index.</span></span>

 <span data-ttu-id="b507d-173">Diese Mosaikregeln werden rekursiv auf jeder Rasterebene angewendet.</span><span class="sxs-lookup"><span data-stu-id="b507d-173">These tessellation rules are applied recursively on each grid level.</span></span> <span data-ttu-id="b507d-174">Im restlichen Teil dieses Abschnitts werden diese Mosaikregeln eingehender beschrieben.</span><span class="sxs-lookup"><span data-stu-id="b507d-174">The rest of this section describes the tessellation rules in more detail.</span></span>

#### <a name="covering-rule"></a><span data-ttu-id="b507d-175">Überlagerungsregel</span><span class="sxs-lookup"><span data-stu-id="b507d-175">Covering Rule</span></span>
 <span data-ttu-id="b507d-176">Wenn ein Objekt eine Zelle völlig bedeckt, heißt es, dass die Zelle vom Objekt *überlagert* wird.</span><span class="sxs-lookup"><span data-stu-id="b507d-176">If an object completely covers a cell, that cell is said to be *covered* by the object.</span></span> <span data-ttu-id="b507d-177">In der folgenden Abbildung wird beispielsweise eine Zelle der zweiten Ebene (15.11) völlig vom mittleren Teil eines Oktagons überlagert.</span><span class="sxs-lookup"><span data-stu-id="b507d-177">For example, in the following illustration, one of the second-level cells, 15.11, is completely covered by the middle portion of an octagon.</span></span>

 <span data-ttu-id="b507d-178">![Überlagerungsoptimierung](../../database-engine/media/spndx-opt-covering.gif "Überlagerungsoptimierung")</span><span class="sxs-lookup"><span data-stu-id="b507d-178">![Covering optimization](../../database-engine/media/spndx-opt-covering.gif "Covering optimization")</span></span>

 <span data-ttu-id="b507d-179">Überlagerte Zellen werden gezählt und im Index verzeichnet. Diese Zellen unterliegen dem Mosaikprozess nicht weiter.</span><span class="sxs-lookup"><span data-stu-id="b507d-179">A covered cell is counted and recorded in the index, and the cell is not tessellated any further.</span></span>

#### <a name="cells-per-object-rule"></a><span data-ttu-id="b507d-180">Zellen-pro-Objekt-Regel</span><span class="sxs-lookup"><span data-stu-id="b507d-180">Cells-Per-Object Rule</span></span>
 <span data-ttu-id="b507d-181">Inwieweit ein Objekt dem Mosaikprozess unterliegt, hängt hauptsächlich vom *Zellen-pro-Objekt-Grenzwert* des räumlichen Index ab.</span><span class="sxs-lookup"><span data-stu-id="b507d-181">The extent of tessellation of each object depends primarily on the *cells-per-object limit* of the spatial index.</span></span> <span data-ttu-id="b507d-182">Dieser Grenzwert definiert die maximale Anzahl von Zellen, die das Mosaik pro Objekt umfassen kann.</span><span class="sxs-lookup"><span data-stu-id="b507d-182">This limit defines the maximum number of cells that tessellation can count per object.</span></span> <span data-ttu-id="b507d-183">Beachten Sie jedoch, dass dieser Grenzwert überschritten werden kann, weil die Einhaltung der Zellen-pro-Objekt-Regel auf Ebene&nbsp;1 nicht erzwungen wird.</span><span class="sxs-lookup"><span data-stu-id="b507d-183">Note, however, that the cells-per-object rule is not enforced for level 1, so it is possible to exceed this limit.</span></span> <span data-ttu-id="b507d-184">Wenn die Anzahl auf Ebene&nbsp;1 den Zellen-pro-Objekt-Grenzwert erreicht oder überschreitet, wird der Mosaikprozess auf den unteren Ebenen nicht weiter fortgesetzt.</span><span class="sxs-lookup"><span data-stu-id="b507d-184">If the level-1 count reaches, or exceeds, the cells-per-object limit, no further tessellation occurs at the lower levels.</span></span>

 <span data-ttu-id="b507d-185">Solange die Anzahl kleiner als der Zellen-pro-Objekt-Grenzwert ist, wird der Mosaikprozess fortgesetzt.</span><span class="sxs-lookup"><span data-stu-id="b507d-185">As long as the count is less than the cells-per-object limit, the tessellation process continues.</span></span> <span data-ttu-id="b507d-186">Beginnend mit der überlagerten Zelle mit der niedrigsten Anzahl (in der vorstehenden Abbildung beispielsweise Zelle&nbsp;15,6), werden in diesem Prozess alle Zellen daraufhin überprüft, ob sie gezählt oder weiter zusammengesetzt werden sollen.</span><span class="sxs-lookup"><span data-stu-id="b507d-186">Starting with the lowest-number touched cell (for example, cell 15.6 in the preceding illustration), the process tests each cell to evaluate whether to count it or tessellate it.</span></span> <span data-ttu-id="b507d-187">Wenn eine Zelle bei einer weiteren Mosaikbearbeitung den Zellen-pro-Objekt-Grenzwert übersteigen würde, wird die Zelle gezählt und nicht weiter dem Mosaikprozess unterzogen.</span><span class="sxs-lookup"><span data-stu-id="b507d-187">If tessellating a cell would exceed the cells-per-object limit, the cell is counted and not tessellated.</span></span> <span data-ttu-id="b507d-188">Andernfalls wird die Zelle im Mosaikprozess berücksichtigt, und es werden die Zellen der untergeordneten Ebene gezählt, die vom Objekt überlagert werden.</span><span class="sxs-lookup"><span data-stu-id="b507d-188">Otherwise, the cell is tessellated, and the lower-level cells that are touched by the object are counted.</span></span> <span data-ttu-id="b507d-189">Der Mosaikprozess wird auf diese Art breitenorientiert über die gesamte Ebene hinweg fortgesetzt.</span><span class="sxs-lookup"><span data-stu-id="b507d-189">The tessellation process continues in this way, breadth-wise, across the level.</span></span> <span data-ttu-id="b507d-190">Dieser Prozess wird solange rekursiv in den Rastern untergeordneter Ebenen des Mosaikprozesses fortgesetzt, bis der Grenzwert erreicht wird oder keine zu zählenden Zellen mehr vorhanden sind.</span><span class="sxs-lookup"><span data-stu-id="b507d-190">This process is repeated recursively for the lower-level grids of the tessellated cells until the limit is reached or there are no more cells to count.</span></span>

 <span data-ttu-id="b507d-191">Betrachten Sie beispielsweise die vorstehende Abbildung, die ein Oktagon zeigt, das vollständig in Zelle&nbsp;15 des Rasters der Ebene&nbsp;1 passt.</span><span class="sxs-lookup"><span data-stu-id="b507d-191">For example, consider the preceding illustration, which shows an octagon that fits completely into cell 15 of the level-1 grid.</span></span> <span data-ttu-id="b507d-192">In der Abbildung wurde Zelle&nbsp;15 dem Mosaikprozess unterzogen, wodurch das Oktagon in neun Zellen der Ebene&nbsp;2 zerlegt wurde.</span><span class="sxs-lookup"><span data-stu-id="b507d-192">In the figure, cell 15 has been tessellated, dissecting the octagon into nine level-2 cells.</span></span> <span data-ttu-id="b507d-193">In dieser Illustration wird davon ausgegangen, dass der Zellen-pro-Objekt-Grenzwert gleich&nbsp;9 oder höher ist.</span><span class="sxs-lookup"><span data-stu-id="b507d-193">This illustration assumes that the cells-per-object limit is 9 or more.</span></span> <span data-ttu-id="b507d-194">Wäre der Zellen-pro-Objekt-Grenzwert gleich 8 oder kleiner, dann würde Zelle&nbsp;15 nicht im Mosaikprozess berücksichtigt, und nur diese eine Zelle&nbsp;15 würde für das Objekt gezählt.</span><span class="sxs-lookup"><span data-stu-id="b507d-194">If the cells-per-object limit were 8 or less, however, cell 15 would not be tessellated, and only that cell 15 would be counted for the object.</span></span>

 <span data-ttu-id="b507d-195">In der Standardeinstellung ist der Zellen-pro-Objekt-Grenzwert mit 16&nbsp;Zellen pro Objekt definiert, was für die meisten räumlichen Indizes einen zufriedenstellenden Kompromiss zwischen Raum und Genauigkeit darstellt.</span><span class="sxs-lookup"><span data-stu-id="b507d-195">By default, the cells-per-object limit is 16 cells per object, which provides a satisfactory trade-off between space and precision for most spatial indexes.</span></span> <span data-ttu-id="b507d-196">Die [CREATE SPATIAL Index](/sql/t-sql/statements/create-spatial-index-transact-sql) [!INCLUDE[tsql](../../../includes/tsql-md.md)] -Anweisung unterstützt jedoch eine CELLS_PER_OBJECT `=` *n* -Klausel, die es Ihnen ermöglicht, einen Zellen-pro-Objekt-Grenzwert zwischen 1 und 8192 (einschließlich) anzugeben.</span><span class="sxs-lookup"><span data-stu-id="b507d-196">However, the [CREATE SPATIAL INDEX](/sql/t-sql/statements/create-spatial-index-transact-sql)[!INCLUDE[tsql](../../../includes/tsql-md.md)] statement supports a CELLS_PER_OBJECT`=`*n* clause that enables you to specify a cells-per-object limit between 1 and 8192, inclusive.</span></span>

> [!NOTE]
>  <span data-ttu-id="b507d-197">Die **cells_per_object** -Einstellung eines räumlichen Index wird in der [sys.spatial_index_tessellations](/sql/relational-databases/system-catalog-views/sys-spatial-index-tessellations-transact-sql) -Katalogsicht angezeigt.</span><span class="sxs-lookup"><span data-stu-id="b507d-197">The **cells_per_object** setting of a spatial index is visible in the [sys.spatial_index_tessellations](/sql/relational-databases/system-catalog-views/sys-spatial-index-tessellations-transact-sql) catalog view.</span></span>

#### <a name="deepest-cell-rule"></a><span data-ttu-id="b507d-198">Tiefste-Zelle-Regel</span><span class="sxs-lookup"><span data-stu-id="b507d-198">Deepest-Cell Rule</span></span>
 <span data-ttu-id="b507d-199">Bei der Tiefste-Zelle-Regel wird die Tatsache genutzt, dass jede Zelle einer untergeordneten Ebene zu der ihr übergeordneten Zelle gehört: Eine Zelle auf Ebene 4 gehört zu einer Zelle auf Ebene 3, eine Zelle auf Ebene 3 gehört zu einer Zelle auf Ebene 2, und eine Zelle auf Ebene 2 gehört zu einer Zelle auf Ebene 1.</span><span class="sxs-lookup"><span data-stu-id="b507d-199">The deepest-cell rule exploits the fact that every lower-level cell belongs to the cell above it: a level-4 cell belongs to a level-3 cell, a level-3 cell belongs to a level-2 cell, and a level-2 cell belongs to a level-1 cell.</span></span> <span data-ttu-id="b507d-200">Zum Beispiel gehört ein Objekt, das zu Zelle 1.1.1.1 gehört, auch zu Zelle 1.1.1, Zelle 1.1 und Zelle 1.</span><span class="sxs-lookup"><span data-stu-id="b507d-200">For example, an object that belongs to cell 1.1.1.1 also belongs to cell 1.1.1, cell 1.1, and cell 1.</span></span> <span data-ttu-id="b507d-201">Die Kenntnis solcher Beziehungen in der Zellenhierarchie wurde in den Abfrageprozessor integriert.</span><span class="sxs-lookup"><span data-stu-id="b507d-201">Knowledge of such cell-hierarchy relationships is built into the query processor.</span></span> <span data-ttu-id="b507d-202">Daher müssen nur die Zellen der tiefsten Ebene im Index verzeichnet werden, sodass im Index nur die minimale Menge an Informationen gespeichert werden muss.</span><span class="sxs-lookup"><span data-stu-id="b507d-202">Therefore, only the deepest-level cells need to be recorded in the index, minimizing the information that the index needs to store.</span></span>

 <span data-ttu-id="b507d-203">In der folgenden Abbildung wird ein relativ kleines rautenförmiges Polygon durch den Mosaikprozess unterteilt.</span><span class="sxs-lookup"><span data-stu-id="b507d-203">In the following illustration, a relatively small diamond-shaped polygon is tessellated.</span></span> <span data-ttu-id="b507d-204">Für den Index wird der vordefinierte Zellen-pro-Objekt-Grenzwert 16 verwendet, die bei diesem kleinen Objekt nicht erreicht wird.</span><span class="sxs-lookup"><span data-stu-id="b507d-204">The index uses the default cells-per-object limit of 16, which is not reached for this small object.</span></span> <span data-ttu-id="b507d-205">Deshalb wird der Mosaikprozess bis zu Ebene 4 fortgesetzt.</span><span class="sxs-lookup"><span data-stu-id="b507d-205">Therefore, tessellation continues down to level 4.</span></span> <span data-ttu-id="b507d-206">Das Polygon befindet sich in den folgenden Zellen der Ebene 1 bis Ebene 3: 4, 4.4, 4.4.10 und 4.4.14.</span><span class="sxs-lookup"><span data-stu-id="b507d-206">The polygon resides in the following level-1 through level-3 cells: 4, 4.4, and 4.4.10 and 4.4.14.</span></span> <span data-ttu-id="b507d-207">Bei Verwendung der Tiefste-Zelle-Regel zählt das Mosaik jedoch nur die 12 Zellen auf Ebene 4: 4.4.10.13-15, 4.4.14.1-3, 4.4.14.5-7 und 4.4.14.9-11.</span><span class="sxs-lookup"><span data-stu-id="b507d-207">However, using the deepest-cell rule, the tessellation counts only the twelve level-4 cells: 4.4.10.13-15 and 4.4.14.1-3, 4.4.14.5-7, and 4.4.14.9-11.</span></span>

 <span data-ttu-id="b507d-208">![Tiefste-Zelle-Optimierung](../../database-engine/media/spndx-opt-deepest-cell.gif "Tiefste-Zelle-Optimierung")</span><span class="sxs-lookup"><span data-stu-id="b507d-208">![Deepest-cell optimization](../../database-engine/media/spndx-opt-deepest-cell.gif "Deepest-cell optimization")</span></span>

###  <a name="tessellation-schemes"></a><a name="schemes"></a> <span data-ttu-id="b507d-209">Mosaikschemas</span><span class="sxs-lookup"><span data-stu-id="b507d-209">Tessellation Schemes</span></span>
 <span data-ttu-id="b507d-210">Das Verhalten eines räumlichen Indexes hängt teilweise von seinem *Mosaikschema*ab.</span><span class="sxs-lookup"><span data-stu-id="b507d-210">The behavior of a spatial index depends partly on its *tessellation scheme*.</span></span> <span data-ttu-id="b507d-211">Das Mosaikschema ist datentypspezifisch.</span><span class="sxs-lookup"><span data-stu-id="b507d-211">The tessellation scheme is data-type specific.</span></span> <span data-ttu-id="b507d-212">In [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]werden zwei Mosaikschemas für räumliche Indizes unterstützt:</span><span class="sxs-lookup"><span data-stu-id="b507d-212">In [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)], spatial indexes support two tessellation schemes:</span></span>

-   <span data-ttu-id="b507d-213">*Geometrie Raster*Mosaik, das das Schema für den `geometry` Datentyp darstellt.</span><span class="sxs-lookup"><span data-stu-id="b507d-213">*Geometry grid tessellation*, which is the scheme for the `geometry` data type.</span></span>

-   <span data-ttu-id="b507d-214">*Geografieraster*-Mosaik, das für Spalten des- `geography` Datentyps gilt.</span><span class="sxs-lookup"><span data-stu-id="b507d-214">*Geography grid tessellation*, which applies to columns of the `geography` data type.</span></span>

> [!NOTE]
>  <span data-ttu-id="b507d-215">Die **tessellation_scheme** -Einstellung eines räumlichen Index wird in der [sys.spatial_index_tessellations](/sql/relational-databases/system-catalog-views/sys-spatial-index-tessellations-transact-sql) -Katalogansicht angezeigt.</span><span class="sxs-lookup"><span data-stu-id="b507d-215">The **tessellation_scheme** setting of a spatial index is visible in the [sys.spatial_index_tessellations](/sql/relational-databases/system-catalog-views/sys-spatial-index-tessellations-transact-sql) catalog view.</span></span>

#### <a name="geometry-grid-tessellation-scheme"></a><span data-ttu-id="b507d-216">Geometrieraster-Mosaikschema</span><span class="sxs-lookup"><span data-stu-id="b507d-216">Geometry Grid Tessellation Scheme</span></span>
 <span data-ttu-id="b507d-217">Das GEOMETRY_AUTO_GRID-Mosaik ist das Standardschema für den `geometry`-Datentyp für [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] und höher.</span><span class="sxs-lookup"><span data-stu-id="b507d-217">GEOMETRY_AUTO_GRID tessellation is the default tessellation scheme for the `geometry` data type for [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] and later.</span></span>  <span data-ttu-id="b507d-218">Das GEOMETRY_GRID-Mosaik ist das einzige Mosaikschema, das für geometry-Datentypen in [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]verfügbar ist.</span><span class="sxs-lookup"><span data-stu-id="b507d-218">GEOMETRY_GRID tessellation is the only tessellation scheme available for geometry data types in [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="b507d-219">In diesem Abschnitt werden die Aspekte des Geometrierastermosaikschemas behandelt, die für die Arbeit mit räumlichen Indizes relevant sind: unterstützte Methoden und umgebende Felder.</span><span class="sxs-lookup"><span data-stu-id="b507d-219">This section discusses aspects of geometry grid tessellation that are relevant to working with spatial indexes: supported methods and bounding boxes.</span></span>

> [!NOTE]
>  <span data-ttu-id="b507d-220">Dieses Mosaik Schema kann mit der using (GEOMETRY_AUTO_GRID/GEOMETRY_GRID)-Klausel der [CREATE SPATIAL Index](/sql/t-sql/statements/create-spatial-index-transact-sql) -Anweisung explizit angegeben werden [!INCLUDE[tsql](../../../includes/tsql-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="b507d-220">You can explicitly specify this tessellation scheme by using the USING (GEOMETRY_AUTO_GRID/GEOMETRY_GRID) clause of the [CREATE SPATIAL INDEX](/sql/t-sql/statements/create-spatial-index-transact-sql)[!INCLUDE[tsql](../../../includes/tsql-md.md)] statement.</span></span>

##### <a name="the-bounding-box"></a><span data-ttu-id="b507d-221">Das umgebende Feld</span><span class="sxs-lookup"><span data-stu-id="b507d-221">The Bounding Box</span></span>
 <span data-ttu-id="b507d-222">Geometrische Daten belegen eine Fläche, die unendlich sein kann.</span><span class="sxs-lookup"><span data-stu-id="b507d-222">Geometric data occupies a plane that can be infinite.</span></span> <span data-ttu-id="b507d-223">In [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]erfordert ein räumlicher Index jedoch einen endlichen Raum.</span><span class="sxs-lookup"><span data-stu-id="b507d-223">In [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)], however, a spatial index requires a finite space.</span></span> <span data-ttu-id="b507d-224">Um einen endlichen Raum für die Zerlegung einzurichten, erfordert das Geometrierastermosaikschema ein rechteckiges *umgebendes Feld*.</span><span class="sxs-lookup"><span data-stu-id="b507d-224">To establish a finite space for decomposition, the geometry grid tessellation scheme requires a rectangular *bounding box*.</span></span> <span data-ttu-id="b507d-225">Das umgebende Feld wird durch vier Koordinaten ( `(` _x-min_**,**_y-min_ `)` und `(` _x-max_**,**_y-max_) definiert `)` , die als Eigenschaften des räumlichen Indexes gespeichert werden.</span><span class="sxs-lookup"><span data-stu-id="b507d-225">The bounding box is defined by four coordinates, `(`_x-min_**,**_y-min_`)` and `(`_x-max_**,**_y-max_`)`, which are stored as properties of the spatial index.</span></span> <span data-ttu-id="b507d-226">Diese Koordinaten stellen Folgendes dar:</span><span class="sxs-lookup"><span data-stu-id="b507d-226">These coordinates represent the following:</span></span>

-   <span data-ttu-id="b507d-227">*x-min* ist die X-Koordinate der linken unteren Ecke des umgebenden Felds.</span><span class="sxs-lookup"><span data-stu-id="b507d-227">*x-min* is the x-coordinate of the lower-left corner of the bounding box.</span></span>

-   <span data-ttu-id="b507d-228">*y-min* ist die Y-Koordinate der unteren linken Ecke.</span><span class="sxs-lookup"><span data-stu-id="b507d-228">*y-min* is the y-coordinate of the lower-left corner.</span></span>

-   <span data-ttu-id="b507d-229">*x-max* ist die X-Koordinate der oberen rechten Ecke.</span><span class="sxs-lookup"><span data-stu-id="b507d-229">*x-max* is the x-coordinate of the upper-right corner.</span></span>

-   <span data-ttu-id="b507d-230">*y-max* ist die Y-Koordinate der oberen rechten Ecke.</span><span class="sxs-lookup"><span data-stu-id="b507d-230">*y-max* is the y-coordinate of upper-right corner.</span></span>

> [!NOTE]
>  <span data-ttu-id="b507d-231">Diese Koordinaten werden durch die BOUNDING_BOX-Klausel der [CREATE SPATIAL Index](/sql/t-sql/statements/create-spatial-index-transact-sql) - [!INCLUDE[tsql](../../../includes/tsql-md.md)] Anweisung angegeben.</span><span class="sxs-lookup"><span data-stu-id="b507d-231">These coordinates are specified by the BOUNDING_BOX clause of the [CREATE SPATIAL INDEX](/sql/t-sql/statements/create-spatial-index-transact-sql)[!INCLUDE[tsql](../../../includes/tsql-md.md)] statement.</span></span>

 <span data-ttu-id="b507d-232">Die `(` Koordinaten _x-min_**,**_y-min_ `)` und `(` _x-max_**,**_y-max_ `)` bestimmen die Platzierung und Abmessungen des umgebenden Felds.</span><span class="sxs-lookup"><span data-stu-id="b507d-232">The `(`_x-min_**,**_y-min_`)` and `(`_x-max_**,**_y-max_`)` coordinates determine the placement and dimensions of the bounding box.</span></span> <span data-ttu-id="b507d-233">Der Raum außerhalb des umgebenden Felds wird als einzelne Zelle behandelt, die die Nummer&nbsp;0 erhält.</span><span class="sxs-lookup"><span data-stu-id="b507d-233">The space outside of the bounding box is treated as a single cell that is numbered 0.</span></span>

 <span data-ttu-id="b507d-234">Der räumliche Index zerlegt den Raum im umgebenden Feld.</span><span class="sxs-lookup"><span data-stu-id="b507d-234">The spatial index decomposes the space inside the bounding box.</span></span> <span data-ttu-id="b507d-235">Das Raster der Ebene&nbsp;1 der Rasterhierarchie füllt das umgebende Feld aus.</span><span class="sxs-lookup"><span data-stu-id="b507d-235">The level-1 grid of the grid hierarchy fills the bounding box.</span></span> <span data-ttu-id="b507d-236">Zur Platzierung eines geometrischen Objekts in der Rasterhierarchie vergleicht der räumliche Index die Koordinaten des Objekts mit den Koordinaten des umgebenden Felds.</span><span class="sxs-lookup"><span data-stu-id="b507d-236">To place a geometric object in the grid hierarchy, the spatial index compares the coordinates of the object to the bounding-box coordinates.</span></span>

 <span data-ttu-id="b507d-237">Die folgende Abbildung zeigt die Punkte, die durch die `(` _x-min_**,**_y-min_ `)` und `(` _x-max_**,**_y-max-_ `)` Koordinaten des umgebenden Felds definiert werden.</span><span class="sxs-lookup"><span data-stu-id="b507d-237">The following illustration shows the points defined by the `(`_x-min_**,**_y-min_`)` and `(`_x-max_**,**_y-max_`)` coordinates of the bounding box.</span></span> <span data-ttu-id="b507d-238">Die obersten Ebene der Rasterhierarchie wird als 4&nbsp;x&nbsp;4-Raster angezeigt.</span><span class="sxs-lookup"><span data-stu-id="b507d-238">The top-level of the grid hierarchy is shown as a 4x4 grid.</span></span> <span data-ttu-id="b507d-239">Zur Veranschaulichung werden die niedrigeren Ebenen weggelassen.</span><span class="sxs-lookup"><span data-stu-id="b507d-239">For the purpose of illustration, the lower levels are omitted.</span></span> <span data-ttu-id="b507d-240">Der Raum außerhalb des umgebenden Felds wird durch eine Null (0) angegeben.</span><span class="sxs-lookup"><span data-stu-id="b507d-240">The space outside of the bounding box is indicated by a zero (0).</span></span> <span data-ttu-id="b507d-241">Beachten Sie, dass Objekt 'A' teilweise über das Feld hinausragt und dass sich Objekt 'B' komplett außerhalb des Felds in Zelle&nbsp;0 befindet.</span><span class="sxs-lookup"><span data-stu-id="b507d-241">Note that object 'A' extends partly beyond the box, and object 'B' lies completely outside the box in cell 0.</span></span>

 <span data-ttu-id="b507d-242">![Umgebendes Feld mit Koordinaten und Zelle 0.](../../database-engine/media/spndx-bb-4x4-objects.gif "Umgebendes Feld mit Koordinaten und Zelle 0.")</span><span class="sxs-lookup"><span data-stu-id="b507d-242">![Bounding box showing coordinates and cell 0.](../../database-engine/media/spndx-bb-4x4-objects.gif "Bounding box showing coordinates and cell 0.")</span></span>

 <span data-ttu-id="b507d-243">Ein umgebendes Feld entspricht zu einem gewissen Teil den räumlichen Daten einer Anwendung.</span><span class="sxs-lookup"><span data-stu-id="b507d-243">A bounding box corresponds to some portion of an application's spatial data.</span></span> <span data-ttu-id="b507d-244">Ob das umgebende Feld des Indexes die in der räumlichen Spalte gespeicherten Daten vollständig oder nur zum Teil enthält, hängt von der Anwendung ab.</span><span class="sxs-lookup"><span data-stu-id="b507d-244">Whether the bounding-box of the index completely contains the data stored in the spatial column, or only contains a portion, is up to the application.</span></span> <span data-ttu-id="b507d-245">Nur Vorgänge, die mit Objekten berechnet werden, die vollständig im umgebenden Feld liegen, profitieren vom räumlichen Index.</span><span class="sxs-lookup"><span data-stu-id="b507d-245">Only operations computed on objects that are entirely inside of the bounding box benefit from the spatial index.</span></span> <span data-ttu-id="b507d-246">Damit der räumliche Index für eine `geometry`-Spalte den größtmöglichen Nutzen bietet, müssen Sie ein umgebendes Feld angeben, das alle oder die meisten Objekte enthält.</span><span class="sxs-lookup"><span data-stu-id="b507d-246">Therefore, to gain the greatest advantage from a spatial index on a `geometry` column, you need to specify a bounding-box that contains all or most of the objects.</span></span>

> [!NOTE]
>  <span data-ttu-id="b507d-247">Die Rasterdichten eines räumlichen Index werden in den Spalten bounding_box_xmin, bounding_box_ymin, bounding_box_xmax und bounding_box_ymax der [sys.spatial_index_tessellations](/sql/relational-databases/system-catalog-views/sys-spatial-index-tessellations-transact-sql) -Katalogsicht angezeigt.</span><span class="sxs-lookup"><span data-stu-id="b507d-247">The grid densities of a spatial index are visible in the bounding_box_xmin, bounding_box_ymin, bounding_box_xmax, and bounding_box_ymax columns of the [sys.spatial_index_tessellations](/sql/relational-databases/system-catalog-views/sys-spatial-index-tessellations-transact-sql) catalog view.</span></span>

#### <a name="the-geography-grid-tessellation-scheme"></a><span data-ttu-id="b507d-248">Das Geografierastermosaikschema</span><span class="sxs-lookup"><span data-stu-id="b507d-248">The Geography Grid Tessellation Scheme</span></span>
 <span data-ttu-id="b507d-249">Dieses Mosaikschema gilt nur für `geography`-Spalten.</span><span class="sxs-lookup"><span data-stu-id="b507d-249">This tessellation scheme applies only to a `geography` column.</span></span> <span data-ttu-id="b507d-250">In diesem Abschnitt werden die Methoden zusammengefasst, die vom Geografierastermosaikschema unterstützt werden, und es wird erläutert, wie geodätischer Raum auf eine Ebene projiziert wird, die dann in eine Rasterhierarchie zerlegt wird.</span><span class="sxs-lookup"><span data-stu-id="b507d-250">This section summarizes the methods that are supported by geography grid tessellation and discusses how geodetic space is projected onto a plane, which is then decomposed into a grid hierarchy.</span></span>

> [!NOTE]
>  <span data-ttu-id="b507d-251">Dieses Mosaik Schema kann mit der using (GEOGRAPHY_AUTO_GRID/GEOGRAPHY_GRID)-Klausel der [CREATE SPATIAL Index](/sql/t-sql/statements/create-spatial-index-transact-sql) -Anweisung explizit angegeben werden [!INCLUDE[tsql](../../../includes/tsql-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="b507d-251">You can explicitly specify this tessellation scheme by using the USING (GEOGRAPHY_AUTO_GRID/GEOGRAPHY_GRID) clause of the [CREATE SPATIAL INDEX](/sql/t-sql/statements/create-spatial-index-transact-sql)[!INCLUDE[tsql](../../../includes/tsql-md.md)] statement.</span></span>

##### <a name="projection-of-the-geodetic-space-onto-a-plane"></a><span data-ttu-id="b507d-252">Projektion des geodätischen Raums auf eine Ebene</span><span class="sxs-lookup"><span data-stu-id="b507d-252">Projection of the Geodetic Space onto a Plane</span></span>
 <span data-ttu-id="b507d-253">In Berechnungen mit `geography`-Instanzen (Objekten) wird der Raum, der die Objekte enthält, als geodätisches Ellipsoid behandelt.</span><span class="sxs-lookup"><span data-stu-id="b507d-253">Computations on `geography` instances (objects) treat the space containing the objects as a geodetic ellipsoid.</span></span> <span data-ttu-id="b507d-254">Zur Zerlegung dieses Raums unterteilt das Geografierastermosaikschema die Oberfläche des Ellipsoids in eine obere und eine untere Hemisphäre und führt dann die folgenden Schritte aus:</span><span class="sxs-lookup"><span data-stu-id="b507d-254">To decompose this space, the geography grid tessellation scheme divides the surface of the ellipsoid into its upper and lower hemispheres and then performs the following steps:</span></span>

1.  <span data-ttu-id="b507d-255">Jede Hemisphäre wird auf die Facetten einer vierseitigen Pyramide projiziert.</span><span class="sxs-lookup"><span data-stu-id="b507d-255">Projects each hemisphere onto the facets of a quadrilateral pyramid.</span></span>

2.  <span data-ttu-id="b507d-256">Die beiden Pyramiden werden auf eine Ebene reduziert.</span><span class="sxs-lookup"><span data-stu-id="b507d-256">Flattens the two pyramids.</span></span>

3.  <span data-ttu-id="b507d-257">Die vereinfachten Pyramiden werden verbunden, sodass sie eine nicht-euklidische Ebene bilden.</span><span class="sxs-lookup"><span data-stu-id="b507d-257">Joins the flattened pyramids to form a non-Euclidean plane.</span></span>

 <span data-ttu-id="b507d-258">In der folgenden Illustration wird dieser dreistufige Zerlegungsprozess schematisch dargestellt.</span><span class="sxs-lookup"><span data-stu-id="b507d-258">The following illustration shows a schematic view of the three-step decomposition process.</span></span> <span data-ttu-id="b507d-259">In den Pyramiden stellen die gepunkteten Linien die Begrenzungen der vier Facetten jeder Pyramide dar.</span><span class="sxs-lookup"><span data-stu-id="b507d-259">In the pyramids, the dotted lines represent the boundaries of the four facets of each pyramid.</span></span> <span data-ttu-id="b507d-260">Die Schritte 1&nbsp;und&nbsp;2 veranschaulichen das geodätische Ellipsoid, wobei eine grüne waagrechte Linie den Längengrad am Äquator und eine Reihe von grünen senkrechten Linien verschiedene Breitengrade darstellt.</span><span class="sxs-lookup"><span data-stu-id="b507d-260">Steps 1 and 2 illustrate the geodetic ellipsoid, using a green horizontal line to represent the equatorial longitude line and a series of green vertical lines to represent several latitude lines.</span></span> <span data-ttu-id="b507d-261">Schritt&nbsp;1 zeigt die Pyramiden, die über die zwei Hemisphären projiziert werden.</span><span class="sxs-lookup"><span data-stu-id="b507d-261">Step 1 shows the pyramids being projected over the two hemispheres.</span></span> <span data-ttu-id="b507d-262">Schritt&nbsp;2 zeigt, wie die Pyramiden auf eine Ebene reduziert werden.</span><span class="sxs-lookup"><span data-stu-id="b507d-262">Step 2 shows the pyramids being flattened.</span></span> <span data-ttu-id="b507d-263">Schritt&nbsp;3 veranschaulicht die reduzierten Pyramiden, nachdem diese zu einer Ebene kombiniert wurden, und zeigt einige projizierte Längengrade.</span><span class="sxs-lookup"><span data-stu-id="b507d-263">Step 3 illustrates the flattened pyramids, after they have been combined to form a plane, showing a number of projected longitude lines.</span></span> <span data-ttu-id="b507d-264">Beachten Sie, dass diese projizierten Linien geglättet sind und eine unterschiedliche Länge haben, die davon abhängt, wo sie auf die Pyramiden auftreffen.</span><span class="sxs-lookup"><span data-stu-id="b507d-264">Notice that these projected lines are straightened and vary in length, depending on where they fall on the pyramids.</span></span>

 <span data-ttu-id="b507d-265">![Projektion des Ellipsoids auf eine Ebene](../../database-engine/media/spndx-geodetic-projection.gif "Projektion des Ellipsoids auf eine Ebene")</span><span class="sxs-lookup"><span data-stu-id="b507d-265">![Projection of the ellipsoid onto a plane](../../database-engine/media/spndx-geodetic-projection.gif "Projection of the ellipsoid onto a plane")</span></span>

 <span data-ttu-id="b507d-266">Nachdem der Raum auf eine Ebene projiziert wurde, wird der Raum in die vier Ebenen umfassende Rasterhierarchie zerlegt.</span><span class="sxs-lookup"><span data-stu-id="b507d-266">Once the space has been projected onto the plane, the plane is decomposed into the four-level grid hierarchy.</span></span> <span data-ttu-id="b507d-267">In anderen Ebenen können andere Rasterdichten verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="b507d-267">Different levels can use different grid densities.</span></span> <span data-ttu-id="b507d-268">Die folgende Illustration zeigt die Ebene, nachdem sie in ein 4&nbsp;x&nbsp;4-Raster der Ebene&nbsp;1 zerlegt wurde.</span><span class="sxs-lookup"><span data-stu-id="b507d-268">The following illustration shows the plane after it has been decomposed into a 4x4 level-1 grid.</span></span> <span data-ttu-id="b507d-269">Zur Veranschaulichung werden die niedrigeren Ebenen der Rasterhierarchie hier weggelassen.</span><span class="sxs-lookup"><span data-stu-id="b507d-269">For the purposes of illustration, the lower-levels of the grid hierarchy are omitted.</span></span> <span data-ttu-id="b507d-270">In Wirklichkeit wird die Ebene vollständig in eine vier Ebenen umfassende Rasterhierarchie zerlegt.</span><span class="sxs-lookup"><span data-stu-id="b507d-270">In actuality, the plane is fully decomposed into a four-level grid hierarchy.</span></span> <span data-ttu-id="b507d-271">Nach Abschluss des Zerlegungsprozesses werden die geografischen Daten zeilenweise aus der geography-Spalte gelesen, und der Mosaikprozess wird wiederum für jedes Objekt durchgeführt.</span><span class="sxs-lookup"><span data-stu-id="b507d-271">After the decomposition process finishes, the geographic data is read, row by row, from the geography column, and the tessellation process is performed for each object in turn.</span></span>

 <span data-ttu-id="b507d-272">![Geografieraster der Ebene 1](../../database-engine/media/spndx-geodetic-level1grid.gif "Geografieraster der Ebene 1")</span><span class="sxs-lookup"><span data-stu-id="b507d-272">![Level-1 geography grid](../../database-engine/media/spndx-geodetic-level1grid.gif "Level-1 geography grid")</span></span>

##  <a name="methods-supported-by-spatial-indexes"></a><a name="methods"></a> <span data-ttu-id="b507d-273">Von räumlichen Indizes unterstützte Methoden</span><span class="sxs-lookup"><span data-stu-id="b507d-273">Methods Supported by Spatial Indexes</span></span>

###  <a name="geometry-methods-supported-by-spatial-indexes"></a><a name="geometry"></a><span data-ttu-id="b507d-274">Von räumlichen Indizes unterstützte geometry-Methoden</span><span class="sxs-lookup"><span data-stu-id="b507d-274">Geometry Methods Supported by Spatial Indexes</span></span>
 <span data-ttu-id="b507d-275">Räumliche Indizes unterstützen unter bestimmten Bedingungen die folgenden mengenorientierten geometry-Methoden: STContains(), STDistance(), STEquals(), STIntersects(), STOverlaps(), STTouches() und STWithin().</span><span class="sxs-lookup"><span data-stu-id="b507d-275">Spatial indexes support the following set-oriented geometry methods under certain conditions: STContains(), STDistance(), STEquals(), STIntersects(), STOverlaps(), STTouches(), and STWithin().</span></span> <span data-ttu-id="b507d-276">Diese Methoden werden nur dann von einem räumlichen Index unterstützt, wenn sie in der WHERE-Klausel oder JOIN ON-Klausel einer Abfrage verwendet werden und in einem Prädikat der folgenden allgemeinen Form stehen:</span><span class="sxs-lookup"><span data-stu-id="b507d-276">To be supported by a spatial index, these methods must be used within the WHERE or JOIN ON clause of a query, and they must occur within a predicate of the following general form:</span></span>

 <span data-ttu-id="b507d-277">*Geometry1*. *method_name*(*Geometry2*)*comparison_operator \* \* valid_number*</span><span class="sxs-lookup"><span data-stu-id="b507d-277">*geometry1*.*method_name*(*geometry2*)*comparison_operator\*\*valid_number*</span></span>

 <span data-ttu-id="b507d-278">Es wird nur dann ein Ergebnis ungleich NULL zurückgegeben, wenn *geometry1* und *geometry2* über den gleichen [SRID (Spatial Reference Identifier)](../spatial/spatial-reference-identifiers-srids.md)verfügen.</span><span class="sxs-lookup"><span data-stu-id="b507d-278">To return a non-null result, *geometry1* and *geometry2* must have the same [spatial reference identifier (SRID)](../spatial/spatial-reference-identifiers-srids.md).</span></span> <span data-ttu-id="b507d-279">Anderenfalls gibt die Methode NULL zurück.</span><span class="sxs-lookup"><span data-stu-id="b507d-279">Otherwise, the method returns NULL.</span></span>

 <span data-ttu-id="b507d-280">Räumliche Indizes unterstützen die folgenden Prädikatformen:</span><span class="sxs-lookup"><span data-stu-id="b507d-280">Spatial indexes support the following predicate forms:</span></span>

-   <span data-ttu-id="b507d-281">*geometry1*.[STContains](/sql/t-sql/spatial-geometry/stcontains-geometry-data-type)(*geometry2*) = 1</span><span class="sxs-lookup"><span data-stu-id="b507d-281">*geometry1*.[STContains](/sql/t-sql/spatial-geometry/stcontains-geometry-data-type)(*geometry2*) = 1</span></span>

-   <span data-ttu-id="b507d-282">*Geometry1*. [STDistance](/sql/t-sql/spatial-geometry/stdistance-geometry-data-type)(*Geometry2*) < *Nummer*</span><span class="sxs-lookup"><span data-stu-id="b507d-282">*geometry1*.[STDistance](/sql/t-sql/spatial-geometry/stdistance-geometry-data-type)(*geometry2*) < *number*</span></span>

-   <span data-ttu-id="b507d-283">*geometry1*.[STDistance](/sql/t-sql/spatial-geometry/stdistance-geometry-data-type)(*geometry2*) <= *number*</span><span class="sxs-lookup"><span data-stu-id="b507d-283">*geometry1*.[STDistance](/sql/t-sql/spatial-geometry/stdistance-geometry-data-type)(*geometry2*) <= *number*</span></span>

-   <span data-ttu-id="b507d-284">*geometry1*.[STEquals](/sql/t-sql/spatial-geometry/stequals-geometry-data-type)(*geometry2*)= 1</span><span class="sxs-lookup"><span data-stu-id="b507d-284">*geometry1*.[STEquals](/sql/t-sql/spatial-geometry/stequals-geometry-data-type)(*geometry2*)= 1</span></span>

-   <span data-ttu-id="b507d-285">*geometry1*.[STIntersects](/sql/t-sql/spatial-geometry/stintersects-geometry-data-type)(*geometry2*)= 1</span><span class="sxs-lookup"><span data-stu-id="b507d-285">*geometry1*.[STIntersects](/sql/t-sql/spatial-geometry/stintersects-geometry-data-type)(*geometry2*)= 1</span></span>

-   <span data-ttu-id="b507d-286">*geometry1.*</span><span class="sxs-lookup"><span data-stu-id="b507d-286">*geometry1.*</span></span> <span data-ttu-id="b507d-287">[STOverlaps](/sql/t-sql/spatial-geometry/stoverlaps-geometry-data-type) *(geometry2) = 1*</span><span class="sxs-lookup"><span data-stu-id="b507d-287">[STOverlaps](/sql/t-sql/spatial-geometry/stoverlaps-geometry-data-type) *(geometry2) = 1*</span></span>

-   <span data-ttu-id="b507d-288">*geometry1*.[STTouches](/sql/t-sql/spatial-geometry/sttouches-geometry-data-type)(*geometry2*) = 1</span><span class="sxs-lookup"><span data-stu-id="b507d-288">*geometry1*.[STTouches](/sql/t-sql/spatial-geometry/sttouches-geometry-data-type)(*geometry2*) = 1</span></span>

-   <span data-ttu-id="b507d-289">*geometry1*.[STWithin](/sql/t-sql/spatial-geometry/stwithin-geometry-data-type)(*geometry2*)= 1</span><span class="sxs-lookup"><span data-stu-id="b507d-289">*geometry1*.[STWithin](/sql/t-sql/spatial-geometry/stwithin-geometry-data-type)(*geometry2*)= 1</span></span>

###  <a name="geography-methods-supported-by-spatial-indexes"></a><a name="geography"></a><span data-ttu-id="b507d-290">Von räumlichen Indizes unterstützte geography-Methoden</span><span class="sxs-lookup"><span data-stu-id="b507d-290">Geography Methods Supported by Spatial Indexes</span></span>
 <span data-ttu-id="b507d-291">Unter bestimmten Bedingungen unterstützen räumliche Indizes die folgenden mengenorientierten geography-Methoden: STIntersects(),STEquals() und STDistance().</span><span class="sxs-lookup"><span data-stu-id="b507d-291">Under certain conditions, spatial indexes support the following set-oriented geography methods: STIntersects(),STEquals(), and STDistance().</span></span> <span data-ttu-id="b507d-292">Diese Methoden werden nur dann von einem räumlichen Index unterstützt, wenn sie in der WHERE-Klausel einer Abfrage verwendet werden und in einem Prädikat der folgenden allgemeinen Form stehen:</span><span class="sxs-lookup"><span data-stu-id="b507d-292">To be supported by a spatial index, these methods must be used within the WHERE clause of a query, and they must occur within a predicate of the following general form:</span></span>

 <span data-ttu-id="b507d-293">*geography1*. *method_name*(*geography2*)*comparison_operator \* \* valid_number*</span><span class="sxs-lookup"><span data-stu-id="b507d-293">*geography1*.*method_name*(*geography2*)*comparison_operator\*\*valid_number*</span></span>

 <span data-ttu-id="b507d-294">Es wird nur dann ein Ergebnis ungleich NULL zurückgegeben, wenn *geography1* und *geography2* über den gleichen [SRID (Spatial Reference Identifier)](../spatial/spatial-reference-identifiers-srids.md)verfügen.</span><span class="sxs-lookup"><span data-stu-id="b507d-294">To return a non-null result, *geography1* and *geography2* must have the same [Spatial Reference Identifier (SRID)](../spatial/spatial-reference-identifiers-srids.md).</span></span> <span data-ttu-id="b507d-295">Anderenfalls gibt die Methode NULL zurück.</span><span class="sxs-lookup"><span data-stu-id="b507d-295">Otherwise, the method returns NULL.</span></span>

 <span data-ttu-id="b507d-296">Räumliche Indizes unterstützen die folgenden Prädikatformen:</span><span class="sxs-lookup"><span data-stu-id="b507d-296">Spatial indexes support the following predicate forms:</span></span>

-   <span data-ttu-id="b507d-297">*geography1*.[STIntersects](/sql/t-sql/spatial-geography/stintersects-geography-data-type)(*geography2*)= 1</span><span class="sxs-lookup"><span data-stu-id="b507d-297">*geography1*.[STIntersects](/sql/t-sql/spatial-geography/stintersects-geography-data-type)(*geography2*)= 1</span></span>

-   <span data-ttu-id="b507d-298">*geography1*.[STEquals](/sql/t-sql/spatial-geography/stequals-geography-data-type)(*geography2*)= 1</span><span class="sxs-lookup"><span data-stu-id="b507d-298">*geography1*.[STEquals](/sql/t-sql/spatial-geography/stequals-geography-data-type)(*geography2*)= 1</span></span>

-   <span data-ttu-id="b507d-299">*geography1*. [STDistance](/sql/t-sql/spatial-geography/stdistance-geography-data-type)(*geography2*) < *Nummer*</span><span class="sxs-lookup"><span data-stu-id="b507d-299">*geography1*.[STDistance](/sql/t-sql/spatial-geography/stdistance-geography-data-type)(*geography2*) < *number*</span></span>

-   <span data-ttu-id="b507d-300">*geography1*.[STDistance](/sql/t-sql/spatial-geography/stdistance-geography-data-type)(*geography2*) <= *number*</span><span class="sxs-lookup"><span data-stu-id="b507d-300">*geography1*.[STDistance](/sql/t-sql/spatial-geography/stdistance-geography-data-type)(*geography2*) <= *number*</span></span>

### <a name="queries-that-use-spatial-indexes"></a><span data-ttu-id="b507d-301">Abfragen auf der Grundlage räumlicher Indizes</span><span class="sxs-lookup"><span data-stu-id="b507d-301">Queries that use Spatial Indexes</span></span>
 <span data-ttu-id="b507d-302">Räumliche Indizes werden nur in Abfragen unterstützt, die einen indizierten räumlichen Operator in der `WHERE`-Klausel enthalten.</span><span class="sxs-lookup"><span data-stu-id="b507d-302">Spatial indexes are only supported in queries that include an indexed spatial operator in the `WHERE` clause.</span></span> <span data-ttu-id="b507d-303">Beispiele für diese Syntax sind:</span><span class="sxs-lookup"><span data-stu-id="b507d-303">For example syntax such as:</span></span>

```
[spatial object].SpatialMethod([reference spatial object]) [ = | < ] [const literal or variable]
```

 <span data-ttu-id="b507d-304">Der Abfrageoptimierer versteht die Vertauschbarkeit räumlicher Vorgänge ( `@a.STIntersects(@b) = @b.STInterestcs(@a)` ).</span><span class="sxs-lookup"><span data-stu-id="b507d-304">The query optimizer understands the commutativity of spatial operations (that `@a.STIntersects(@b) = @b.STInterestcs(@a)` ).</span></span> <span data-ttu-id="b507d-305">Der räumliche Index wird jedoch nicht verwendet, wenn am Anfang eines Vergleichs kein räumlicher Operator steht (bei `WHERE 1 = spatial op` wird z. B. kein räumlicher Index verwendet).</span><span class="sxs-lookup"><span data-stu-id="b507d-305">However, the spatial index will not be used if the beginning of a comparison does not contain the spatial operator (for example `WHERE 1 = spatial op` will not use the spatial index).</span></span> <span data-ttu-id="b507d-306">Um den räumlichen Index zu verwenden, schreiben Sie den Vergleich um (z. B. `WHERE spatial op = 1`).</span><span class="sxs-lookup"><span data-stu-id="b507d-306">To use the spatial index, rewrite the comparison (for example `WHERE spatial op = 1`).</span></span>

 <span data-ttu-id="b507d-307">Wenn räumliche Indizes unterstützt werden, wird die Entscheidung für die Verwendung des räumlichen Indexes wie bei jedem anderen Index auf Basis der Kosten gefällt. So kann es sein, dass der räumliche Index vom Abfrageoptimierer nicht ausgewählt wird, auch wenn alle Voraussetzungen für die Nutzung dieses Indexes erfüllt sind.</span><span class="sxs-lookup"><span data-stu-id="b507d-307">As with any other index, when a spatial index is supported, the use of the spatial index is chosen based on cost, so the query optimizer might not choose to use the spatial index even though all requirements for using it are met.</span></span> <span data-ttu-id="b507d-308">Verwenden Sie Showplan, um festzustellen, ob der räumliche Index verwendet wurde, und geben Sie ggf. Abfragehinweise an, um einen gewünschten Abfrageplan zu erzwingen.</span><span class="sxs-lookup"><span data-stu-id="b507d-308">Use showplan to see if the spatial index was used and if necessary provide query hints to force a desired query plan.</span></span>

 <span data-ttu-id="b507d-309">Der nächste Nachbartyp der Abfrage unterstützt ebenfalls räumliche Indizes, allerdings erfordert dies eine bestimmte Abfragesyntax.</span><span class="sxs-lookup"><span data-stu-id="b507d-309">The nearest neighbor type of query also supports spatial indexes however only if a specific query syntax is written.</span></span> <span data-ttu-id="b507d-310">Die erforderliche Syntax lautet:</span><span class="sxs-lookup"><span data-stu-id="b507d-310">The appropriate syntax is:</span></span>

```
SELECT TOP(K) [WITH TIES] * 
FROM <Table> AS T [WITH(INDEX(<SpatialIndex>))]
WHERE <SpatialColumn>.STDistance(@reference_object) IS NOT NULL
ORDER BY <SpatialColumn>.STDistance(@reference_object) [;]
```

## <a name="see-also"></a><span data-ttu-id="b507d-311">Weitere Informationen</span><span class="sxs-lookup"><span data-stu-id="b507d-311">See Also</span></span>
 [<span data-ttu-id="b507d-312">Räumliche Daten &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="b507d-312">Spatial Data &#40;SQL Server&#41;</span></span>](../spatial/spatial-data-sql-server.md)


