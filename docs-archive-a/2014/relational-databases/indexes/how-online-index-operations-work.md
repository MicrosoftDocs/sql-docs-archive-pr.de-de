---
title: Funktionsweise von Onlineindexvorgängen | Microsoft-Dokumentation
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: table-view-index
ms.topic: conceptual
helpviewer_keywords:
- online index operations
- source indexes [SQL Server]
- preexisting indexes [SQL Server]
- target indexes [SQL Server]
- temporary mapping index [SQL Server]
- index temporary mappings [SQL Server]
ms.assetid: eef0c9d1-790d-46e4-a758-d0bf6742e6ae
author: MikeRayMSFT
ms.author: mikeray
ms.openlocfilehash: 9b74690c9dfb980787087899200ffb45c2c4b6b6
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 08/04/2020
ms.locfileid: "87622091"
---
# <a name="how-online-index-operations-work"></a><span data-ttu-id="bd6ca-102">Funktionsweise von Onlineindexvorgängen</span><span class="sxs-lookup"><span data-stu-id="bd6ca-102">How Online Index Operations Work</span></span>
  <span data-ttu-id="bd6ca-103">In diesem Thema werden die während eines Onlineindexvorgangs vorhandenen Strukturen definiert und die mit diesen Strukturen verbundenen Aktivitäten aufgezeigt.</span><span class="sxs-lookup"><span data-stu-id="bd6ca-103">This topic defines the structures that exist during an online index operation and shows the activities associated with these structures.</span></span>  
  
## <a name="online-index-structures"></a><span data-ttu-id="bd6ca-104">Onlineindexstrukturen</span><span class="sxs-lookup"><span data-stu-id="bd6ca-104">Online Index Structures</span></span>  
 <span data-ttu-id="bd6ca-105">Um gleichzeitige Benutzeraktivitäten während eines Index-DLL-Vorgangs (Data Definition Language, Datendefinitionssprache) zu ermöglichen, werden folgende Strukturen im Rahmen des Onlineindexvorgangs verwendet: Quellindizes und bereits vorhandene Indizes, Zielindizes sowie ein temporärer Zuordnungsindex zum Neuerstellen eines Heaps oder Löschen eines gruppierten Indexes im Onlinemodus.</span><span class="sxs-lookup"><span data-stu-id="bd6ca-105">To allow for concurrent user activity during an index data definition language (DDL) operation, the following structures are used during the online index operation: source and preexisting indexes, target, and for rebuilding a heap or dropping a clustered index online, a temporary mapping index.</span></span>  
  
-   <span data-ttu-id="bd6ca-106">**Quell-und bereits vorhandene Indizes**</span><span class="sxs-lookup"><span data-stu-id="bd6ca-106">**Source and preexisting indexes**</span></span>  
  
     <span data-ttu-id="bd6ca-107">Als Quelle werden die Daten der ursprünglichen Tabelle oder des gruppierten Indexes bezeichnet.</span><span class="sxs-lookup"><span data-stu-id="bd6ca-107">The source is the original table or clustered index data.</span></span> <span data-ttu-id="bd6ca-108">Bereits vorhandene Indizes sind sämtliche nicht gruppierten Indizes, die der Quellstruktur zugeordnet sind.</span><span class="sxs-lookup"><span data-stu-id="bd6ca-108">Preexisting indexes are any nonclustered indexes that are associated with the source structure.</span></span> <span data-ttu-id="bd6ca-109">Wenn der Onlineindexvorgang beispielsweise einen gruppierten Index neu erstellt, dem vier nicht gruppierte Indizes zugeordnet sind, stellen die vorhandenen gruppierten Indizes die Quelle dar, und die bereits vorhandenen Indizes sind die nicht gruppierten Indizes.</span><span class="sxs-lookup"><span data-stu-id="bd6ca-109">For example, if the online index operation is rebuilding a clustered index that has four associated nonclustered indexes, the source is the existing clustered index and the preexisting indexes are the nonclustered indexes.</span></span>  
  
     <span data-ttu-id="bd6ca-110">Die bereits vorhandenen Indizes stehen den gleichzeitigen Benutzern für Auswahl-, Einfüge-, Update- und Löschvorgänge zur Verfügung.</span><span class="sxs-lookup"><span data-stu-id="bd6ca-110">The preexisting indexes are available to concurrent users for select, insert, update, and delete operations.</span></span> <span data-ttu-id="bd6ca-111">Hierzu zählen auch Masseneinfügungen (wir unterstützt aber nicht empfohlen) und implizite Updates durch Trigger und Einschränkungen der referenziellen Integrität.</span><span class="sxs-lookup"><span data-stu-id="bd6ca-111">This includes bulk inserts (supported but not recommended) and implicit updates by triggers and referential integrity constraints.</span></span> <span data-ttu-id="bd6ca-112">Alle bereits vorhandenen Indizes sind für Abfragen und Suchvorgänge verfügbar.</span><span class="sxs-lookup"><span data-stu-id="bd6ca-112">All preexisting indexes are available for queries and searches.</span></span> <span data-ttu-id="bd6ca-113">Dies bedeutet, dass sie vom Abfrageoptimierer ausgewählt und gegebenenfalls in Indexhinweisen angegeben werden können.</span><span class="sxs-lookup"><span data-stu-id="bd6ca-113">This means they may be selected by the query optimizer and, if necessary, specified in index hints.</span></span>  
  
-   <span data-ttu-id="bd6ca-114">**Ziel**</span><span class="sxs-lookup"><span data-stu-id="bd6ca-114">**Target**</span></span>  
  
     <span data-ttu-id="bd6ca-115">Das Ziel bzw. die Ziele stellen den neuen Index (Heap) oder eine Gruppe neuer Indizes dar, die erstellt oder neu erstellt wird.</span><span class="sxs-lookup"><span data-stu-id="bd6ca-115">The target or targets is the new index (or heap) or a set of new indexes that is being created or rebuilt.</span></span> <span data-ttu-id="bd6ca-116">Einfüge-, Update- und Löschvorgänge durch den Benutzer an der Quelle werden von [!INCLUDE[ssDEnoversion](../../includes/ssdenoversion-md.md)] während des Indexvorgangs auf das Ziel angewendet.</span><span class="sxs-lookup"><span data-stu-id="bd6ca-116">User insert, update, and delete operations to the source are applied by the [!INCLUDE[ssDEnoversion](../../includes/ssdenoversion-md.md)] to the target during the index operation.</span></span> <span data-ttu-id="bd6ca-117">Wenn der Onlineindexvorgang beispielsweise einen gruppierten Index neu erstellt, ist der neu erstellte gruppierte Index das Ziel, [!INCLUDE[ssDE](../../includes/ssde-md.md)] erstellt nicht gruppierte Indizes nicht neu, wenn ein gruppierter Index neu erstellt wird.</span><span class="sxs-lookup"><span data-stu-id="bd6ca-117">For example, if the online index operation is rebuilding a clustered index, the target is the rebuilt clustered index; the [!INCLUDE[ssDE](../../includes/ssde-md.md)] does not rebuild nonclustered indexes when a clustered index is rebuilt.</span></span>  
  
     <span data-ttu-id="bd6ca-118">Der Zielindex wird während der Verarbeitung von SELECT-Anweisungen erst durchsucht, nachdem ein Commit für den Vorgang ausgeführt wurde.</span><span class="sxs-lookup"><span data-stu-id="bd6ca-118">The target index is not searched while processing SELECT statements until the index operation is committed.</span></span> <span data-ttu-id="bd6ca-119">Intern wird der Index als schreibgeschützt markiert.</span><span class="sxs-lookup"><span data-stu-id="bd6ca-119">Internally, the index is marked as write-only.</span></span>  
  
-   <span data-ttu-id="bd6ca-120">**Temporärer Zuordnungsindex**</span><span class="sxs-lookup"><span data-stu-id="bd6ca-120">**Temporary mapping index**</span></span>  
  
     <span data-ttu-id="bd6ca-121">Onlineindexvorgänge, die einen gruppierten Index erstellen, löschen oder neu erstellen, benötigen auch einen temporären Zuordnungsindex.</span><span class="sxs-lookup"><span data-stu-id="bd6ca-121">Online index operations that create, drop, or rebuild a clustered index also require a temporary mapping index.</span></span> <span data-ttu-id="bd6ca-122">Dieser temporäre Index wird von gleichzeitigen Transaktionen verwendet, um zu bestimmen, welche Datensätze in den neuen Indizes gelöscht werden sollen, die erstellt werden, wenn Zeilen in der zugrunde liegenden Tabelle aktualisiert oder gelöscht werden.</span><span class="sxs-lookup"><span data-stu-id="bd6ca-122">This temporary index is used by concurrent transactions to determine which records to delete in the new indexes that are being built when rows in the underlying table are updated or deleted.</span></span> <span data-ttu-id="bd6ca-123">Dieser nicht gruppierte Index wird im gleichen Schritt erstellt wie der neue gruppierte Index (oder Heap) und erfordert keinen separaten Sortiervorgang.</span><span class="sxs-lookup"><span data-stu-id="bd6ca-123">This nonclustered index is created in the same step as the new clustered index (or heap) and does not require a separate sort operation.</span></span> <span data-ttu-id="bd6ca-124">Gleichzeitige Transaktionen behalten zudem den temporären Zuordnungsindex in all ihren Einfüge-, Update- und Löschvorgängen bei.</span><span class="sxs-lookup"><span data-stu-id="bd6ca-124">Concurrent transactions also maintain the temporary mapping index in all their insert, update, and delete operations.</span></span>  
  
## <a name="online-index-activities"></a><span data-ttu-id="bd6ca-125">Onlineindexaktivitäten</span><span class="sxs-lookup"><span data-stu-id="bd6ca-125">Online Index Activities</span></span>  
 <span data-ttu-id="bd6ca-126">Während eines einfachen Onlineindexvorgangs, wie beispielsweise der Erstellung eines gruppierten Indexes für eine nicht gruppierte Tabelle (Heap), durchlaufen die Quelle und das Ziel drei Phasen: Vorbereitung, Erstellung und Endphase.</span><span class="sxs-lookup"><span data-stu-id="bd6ca-126">During a simple online index operation, such as creating a clustered index on a nonindexed table (heap), the source and target go through three phases: preparation, build, and final.</span></span>  
  
 <span data-ttu-id="bd6ca-127">Die folgende Abbildung zeigt den Prozess der Onlineerstellung eines anfänglichen gruppierten Indexes.</span><span class="sxs-lookup"><span data-stu-id="bd6ca-127">The following illustration shows the process for creating an initial clustered index online.</span></span> <span data-ttu-id="bd6ca-128">Das Quellobjekt (der Heap) weist keine anderen Indizes auf.</span><span class="sxs-lookup"><span data-stu-id="bd6ca-128">The source object (the heap) has no other indexes.</span></span> <span data-ttu-id="bd6ca-129">Die Aktivitäten der Quell- und Zielstrukturen werden für die einzelnen Phasen dargestellt. Außerdem werden gleichzeitige Auswahl-, Einfüge-, Update- und Löschvorgänge von Benutzern angezeigt.</span><span class="sxs-lookup"><span data-stu-id="bd6ca-129">The source and target structure activities are shown for each phase; concurrent user select, insert, update, and delete operations are also shown.</span></span> <span data-ttu-id="bd6ca-130">Die Vorbereitungs-, Erstellungs- und Endphase werden zusammen mit dem in der jeweiligen Phase verwendeten Sperrmodus angezeigt.</span><span class="sxs-lookup"><span data-stu-id="bd6ca-130">The preparation, build, and final phases are indicated together with the lock modes used in each phase.</span></span>  
  
 <span data-ttu-id="bd6ca-131">![Während eines Onlineindexvorgangs ausgeführte Aktionen](../../database-engine/media/online-index.gif "Während eines Onlineindexvorgangs ausgeführte Aktionen")</span><span class="sxs-lookup"><span data-stu-id="bd6ca-131">![Activities performed during online index operation](../../database-engine/media/online-index.gif "Activities performed during online index operation")</span></span>  
  
## <a name="source-structure-activities"></a><span data-ttu-id="bd6ca-132">Quellstrukturaktivitäten</span><span class="sxs-lookup"><span data-stu-id="bd6ca-132">Source Structure Activities</span></span>  
 <span data-ttu-id="bd6ca-133">Die folgende Tabelle enthält die Aktivitäten in Bezug auf die Quellstrukturen während der einzelnen Phasen des Indexvorgangs und die entsprechende Sperrstrategie.</span><span class="sxs-lookup"><span data-stu-id="bd6ca-133">The following table lists the activities involving the source structures during each phase of the index operation and the corresponding locking strategy.</span></span>  
  
|<span data-ttu-id="bd6ca-134">Phase</span><span class="sxs-lookup"><span data-stu-id="bd6ca-134">Phase</span></span>|<span data-ttu-id="bd6ca-135">Quellaktivität</span><span class="sxs-lookup"><span data-stu-id="bd6ca-135">Source activity</span></span>|<span data-ttu-id="bd6ca-136">Quellsperren</span><span class="sxs-lookup"><span data-stu-id="bd6ca-136">Source locks</span></span>|  
|-----------|---------------------|------------------|  
|<span data-ttu-id="bd6ca-137">Vorbereitung</span><span class="sxs-lookup"><span data-stu-id="bd6ca-137">Preparation</span></span><br /><br /> <span data-ttu-id="bd6ca-138">Sehr kurze Phase</span><span class="sxs-lookup"><span data-stu-id="bd6ca-138">Very short phase</span></span>|<span data-ttu-id="bd6ca-139">Vorbereitung der Systemmetadaten auf die Erstellung der neuen leeren Indexstruktur.</span><span class="sxs-lookup"><span data-stu-id="bd6ca-139">System metadata preparation to create the new empty index structure.</span></span><br /><br /> <span data-ttu-id="bd6ca-140">Es wird eine Momentaufnahme der Tabelle definiert.</span><span class="sxs-lookup"><span data-stu-id="bd6ca-140">A snapshot of the table is defined.</span></span> <span data-ttu-id="bd6ca-141">Das heißt, dass mithilfe der Zeilenversionsverwaltung eine Lesekonsistenz auf Transaktionsebene ermöglicht wird.</span><span class="sxs-lookup"><span data-stu-id="bd6ca-141">That is, row versioning is used to provide transaction-level read consistency.</span></span><br /><br /> <span data-ttu-id="bd6ca-142">Schreibvorgänge durch gleichzeitige Benutzer an der Quelle werden für einen sehr kurzen Zeitraum gesperrt.</span><span class="sxs-lookup"><span data-stu-id="bd6ca-142">Concurrent user write operations on the source are blocked for a very short period.</span></span><br /><br /> <span data-ttu-id="bd6ca-143">Es werden mit Ausnahme der Erstellung mehrerer nicht gruppierter Indizes keine gleichzeitigen DDL-Vorgänge zugelassen.</span><span class="sxs-lookup"><span data-stu-id="bd6ca-143">No concurrent DDL operations are allowed except creating multiple nonclustered indexes.</span></span>|<span data-ttu-id="bd6ca-144">S (Shared) für Tabelle\*</span><span class="sxs-lookup"><span data-stu-id="bd6ca-144">S (Shared) on the table\*</span></span><br /><br /> <span data-ttu-id="bd6ca-145">Beabsichtigte freigegebene Sperre (Intent Shared, IS)</span><span class="sxs-lookup"><span data-stu-id="bd6ca-145">IS (Intent Shared)</span></span><br /><br /> <span data-ttu-id="bd6ca-146">INDEX_BUILD_INTERNAL_RESOURCE\*\*</span><span class="sxs-lookup"><span data-stu-id="bd6ca-146">INDEX_BUILD_INTERNAL_RESOURCE\*\*</span></span>|  
|<span data-ttu-id="bd6ca-147">Entwickeln</span><span class="sxs-lookup"><span data-stu-id="bd6ca-147">Build</span></span><br /><br /> <span data-ttu-id="bd6ca-148">Hauptphase</span><span class="sxs-lookup"><span data-stu-id="bd6ca-148">Main phase</span></span>|<span data-ttu-id="bd6ca-149">Die Daten werden gescannt, sortiert, zusammengeführt und in Massenladevorgängen in das Ziel eingefügt.</span><span class="sxs-lookup"><span data-stu-id="bd6ca-149">The data is scanned, sorted, merged, and inserted into the target in bulk load operations.</span></span><br /><br /> <span data-ttu-id="bd6ca-150">Auswahl-, Einfüge-, Update- und Löschvorgänge durch gleichzeitige Benutzer werden sowohl auf die bereits vorhandenen Indizes als auch auf sämtliche neu erstellten Indizes angewendet.</span><span class="sxs-lookup"><span data-stu-id="bd6ca-150">Concurrent user select, insert, update, and delete operations are applied to both the preexisting indexes and any new indexes being built.</span></span>|<span data-ttu-id="bd6ca-151">IS</span><span class="sxs-lookup"><span data-stu-id="bd6ca-151">IS</span></span><br /><br /> <span data-ttu-id="bd6ca-152">INDEX_BUILD_INTERNAL_RESOURCE\*\*</span><span class="sxs-lookup"><span data-stu-id="bd6ca-152">INDEX_BUILD_INTERNAL_RESOURCE\*\*</span></span>|  
|<span data-ttu-id="bd6ca-153">Endphase</span><span class="sxs-lookup"><span data-stu-id="bd6ca-153">Final</span></span><br /><br /> <span data-ttu-id="bd6ca-154">Sehr kurze Phase</span><span class="sxs-lookup"><span data-stu-id="bd6ca-154">Very short phase</span></span>|<span data-ttu-id="bd6ca-155">Alle Transaktionen ohne Commit müssen abgeschlossen werden, bevor diese Phase gestartet wird.</span><span class="sxs-lookup"><span data-stu-id="bd6ca-155">All uncommitted update transactions must complete before this phase starts.</span></span> <span data-ttu-id="bd6ca-156">Je nach der eingerichteten Sperre werden alle Lese- und Schreibtransaktionen für einen sehr kurzen Zeitraum gesperrt, bis diese Phase abgeschlossen ist.</span><span class="sxs-lookup"><span data-stu-id="bd6ca-156">Depending on the acquired lock, all new user read or write transactions are blocked for a very short period until this phase is completed.</span></span><br /><br /> <span data-ttu-id="bd6ca-157">Sie Systemmetadaten werden aktualisiert; d. h., die Quelle wurde durch das Ziel ersetzt.</span><span class="sxs-lookup"><span data-stu-id="bd6ca-157">System metadata is updated to replace the source with the target.</span></span><br /><br /> <span data-ttu-id="bd6ca-158">Die Quelle wird gelöscht, falls dies erforderlich ist.</span><span class="sxs-lookup"><span data-stu-id="bd6ca-158">The source is dropped if it is required.</span></span> <span data-ttu-id="bd6ca-159">Beispielsweise nach dem erneuten Erstellen oder dem Löschen eines gruppierten Indexes.</span><span class="sxs-lookup"><span data-stu-id="bd6ca-159">For example, after rebuilding or dropping a clustered index.</span></span>|<span data-ttu-id="bd6ca-160">INDEX_BUILD_INTERNAL_RESOURCE\*\*</span><span class="sxs-lookup"><span data-stu-id="bd6ca-160">INDEX_BUILD_INTERNAL_RESOURCE\*\*</span></span><br /><br /> <span data-ttu-id="bd6ca-161">S für die Tabelle, sofern ein nicht gruppierter Index erstellt wird.\*</span><span class="sxs-lookup"><span data-stu-id="bd6ca-161">S on the table if creating a nonclustered index.\*</span></span><br /><br /> <span data-ttu-id="bd6ca-162">Schemaänderungssperre (SCH-M, Schema Modification), sofern eine Quellstruktur (Index oder Tabelle) gelöscht wird.\*</span><span class="sxs-lookup"><span data-stu-id="bd6ca-162">SCH-M (Schema Modification) if any source structure (index or table) is dropped.\*</span></span>|  
  
 <span data-ttu-id="bd6ca-163">\* Der Indexvorgang wartet, bis Updatetransaktionen ohne Commit abgeschlossen sind, bevor er die S- oder SCH-M-Sperre für die Tabelle einrichtet.</span><span class="sxs-lookup"><span data-stu-id="bd6ca-163">\* The index operation will wait for any uncommitted update transactions to complete before acquiring the S lock or SCH-M lock on the table.</span></span>  
  
 <span data-ttu-id="bd6ca-164">\*\* Die Ressourcensperre INDEX_BUILD_INTERNAL_RESOURCE verhindert die Ausführung gleichzeitiger DDL-Vorgänge (Datendefinitionssprache) für die Quelle und bereits vorhandene Strukturen, während der Indexvorgang ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="bd6ca-164">\*\* The resource lock INDEX_BUILD_INTERNAL_RESOURCE prevents the execution of concurrent data definition language (DDL) operations on the source and preexisting structures while the index operation is in progress.</span></span> <span data-ttu-id="bd6ca-165">Diese Sperre verhindert beispielsweise die gleichzeitige Neuerstellung zweier Indizes für dieselbe Tabelle.</span><span class="sxs-lookup"><span data-stu-id="bd6ca-165">For example, this lock prevents concurrent rebuild of two indexes on the same table.</span></span> <span data-ttu-id="bd6ca-166">Obwohl diese Ressourcensperre der Sch-M-Sperre zugeordnet ist, verhindert sie keine Datenbearbeitungsanweisungen.</span><span class="sxs-lookup"><span data-stu-id="bd6ca-166">Although this resource lock is associated with the Sch-M lock, it does not prevent data manipulation statements.</span></span>  
  
 <span data-ttu-id="bd6ca-167">Die vorherige Tabelle zeigt eine einzelne freigegebene Sperre (Shared, S) an, die während der Erstellungsphase eines Onlineindexvorgangs, der einen einzelnen Index einschließt, eingerichtet wurde.</span><span class="sxs-lookup"><span data-stu-id="bd6ca-167">The previous table shows a single Shared (S) lock acquired during the build phase of an online index operation that involves a single index.</span></span> <span data-ttu-id="bd6ca-168">Wenn gruppierte und nicht gruppierte Indizes erstellt oder neu erstellt werden, werden bei einem einzelnen Onlineindexvorgang (z. B. während der anfänglichen Erstellung eines gruppierten Indexes für eine Tabelle, die einen oder mehrere nicht gruppierte Indizes enthält) zwei kurzfristige S-Sperren gefolgt von langfristigen beabsichtigten gemeinsamen Sperren (IS-Sperren) während der Erstellungsphase eingerichtet.</span><span class="sxs-lookup"><span data-stu-id="bd6ca-168">When clustered and nonclustered indexes are built, or rebuilt, in a single online index operation (for example, during the initial clustered index creation on a table that contains one or more nonclustered indexes) two short-term S locks are acquired during the build phase followed by long-term Intent Shared (IS) locks.</span></span> <span data-ttu-id="bd6ca-169">Eine S-Sperre wird zunächst für die Erstellung des gruppierten Indexes eingerichtet, und wenn die Erstellung des gruppierten Indexes abgeschlossen ist, wird eine zweite kurzfristige S-Sperre für die Erstellung der nicht gruppierten Indizes eingerichtet.</span><span class="sxs-lookup"><span data-stu-id="bd6ca-169">One S lock is acquired first for the clustered index creation and when creating the clustered index is completed, a second short-term S lock is acquired for creating the nonclustered indexes.</span></span> <span data-ttu-id="bd6ca-170">Nachdem die nicht gruppierten Indizes erstellt wurden, wird die S-Sperre bis zur Endphase des Onlineindexvorgangs auf eine IS-Sperre herabgestuft.</span><span class="sxs-lookup"><span data-stu-id="bd6ca-170">After the nonclustered indexes are created, the S lock is downgraded to an IS lock until the final phase of the online index operation.</span></span>  
  
### <a name="target-structure-activities"></a><span data-ttu-id="bd6ca-171">Zielstrukturaktivitäten</span><span class="sxs-lookup"><span data-stu-id="bd6ca-171">Target Structure Activities</span></span>  
 <span data-ttu-id="bd6ca-172">Die folgende Tabelle enthält die Aktivitäten in Bezug auf die Zielstrukturen während der einzelnen Phasen des Indexvorgangs und die entsprechende Sperrstrategie.</span><span class="sxs-lookup"><span data-stu-id="bd6ca-172">The following table lists the activities that involve the target structure during each phase of the index operation and the corresponding locking strategy.</span></span>  
  
|<span data-ttu-id="bd6ca-173">Phase</span><span class="sxs-lookup"><span data-stu-id="bd6ca-173">Phase</span></span>|<span data-ttu-id="bd6ca-174">Zielaktivität</span><span class="sxs-lookup"><span data-stu-id="bd6ca-174">Target activity</span></span>|<span data-ttu-id="bd6ca-175">Zielsperren</span><span class="sxs-lookup"><span data-stu-id="bd6ca-175">Target locks</span></span>|  
|-----------|---------------------|------------------|  
|<span data-ttu-id="bd6ca-176">Vorbereitung</span><span class="sxs-lookup"><span data-stu-id="bd6ca-176">Preparation</span></span>|<span data-ttu-id="bd6ca-177">Neuer Index wird erstellt und auf schreibgeschützt festgelegt.</span><span class="sxs-lookup"><span data-stu-id="bd6ca-177">New index is created and set to write-only.</span></span>|<span data-ttu-id="bd6ca-178">IS</span><span class="sxs-lookup"><span data-stu-id="bd6ca-178">IS</span></span>|  
|<span data-ttu-id="bd6ca-179">Entwickeln</span><span class="sxs-lookup"><span data-stu-id="bd6ca-179">Build</span></span>|<span data-ttu-id="bd6ca-180">Daten werden aus der Quelle eingefügt.</span><span class="sxs-lookup"><span data-stu-id="bd6ca-180">Data is inserted from source.</span></span><br /><br /> <span data-ttu-id="bd6ca-181">Änderungen durch den Benutzer (Einfügungen, Updates, Löschungen), die auf die Quelle angewendet werden, werden angewendet.</span><span class="sxs-lookup"><span data-stu-id="bd6ca-181">User modifications (inserts, updates, deletes) applied to the source are applied.</span></span><br /><br /> <span data-ttu-id="bd6ca-182">Diese Aktivität ist für den Benutzer sichtbar.</span><span class="sxs-lookup"><span data-stu-id="bd6ca-182">This activity is transparent to the user.</span></span>|<span data-ttu-id="bd6ca-183">IS</span><span class="sxs-lookup"><span data-stu-id="bd6ca-183">IS</span></span>|  
|<span data-ttu-id="bd6ca-184">Endphase</span><span class="sxs-lookup"><span data-stu-id="bd6ca-184">Final</span></span>|<span data-ttu-id="bd6ca-185">Indexmetadaten werden aktualisiert.</span><span class="sxs-lookup"><span data-stu-id="bd6ca-185">Index metadata is updated.</span></span><br /><br /> <span data-ttu-id="bd6ca-186">Lese-/Schreibstatus wird für Index festgelegt.</span><span class="sxs-lookup"><span data-stu-id="bd6ca-186">Index is set to read/write status.</span></span>|<span data-ttu-id="bd6ca-187">E</span><span class="sxs-lookup"><span data-stu-id="bd6ca-187">S</span></span><br /><br /> <span data-ttu-id="bd6ca-188">oder</span><span class="sxs-lookup"><span data-stu-id="bd6ca-188">or</span></span><br /><br /> <span data-ttu-id="bd6ca-189">SCH-M</span><span class="sxs-lookup"><span data-stu-id="bd6ca-189">SCH-M</span></span>|  
  
 <span data-ttu-id="bd6ca-190">Der Zugriff auf das Ziel durch SELECT-Anweisungen, die vom Benutzer ausgegeben werden, ist erst nach Abschluss des Vorgangs möglich.</span><span class="sxs-lookup"><span data-stu-id="bd6ca-190">The target is not accessed by SELECT statements issued by the user until the index operation is completed.</span></span>  
  
 <span data-ttu-id="bd6ca-191">Nach Abschluss der Vorbereitungs- und Endphase werden die im Prozedurcache gespeicherten Abfrage- und Updatepläne für ungültig erklärt.</span><span class="sxs-lookup"><span data-stu-id="bd6ca-191">After the preparation and final phase is completed, the query and update plans that are stored in the procedure cache are invalidated.</span></span> <span data-ttu-id="bd6ca-192">Folgeabfragen verwenden den neuen Index.</span><span class="sxs-lookup"><span data-stu-id="bd6ca-192">Subsequent queries will use the new index.</span></span>  
  
 <span data-ttu-id="bd6ca-193">Die Lebensdauer eines Cursors, der für eine Tabelle deklariert wurde, die an einem Onlineindexvorgang beteiligt ist, wird durch die Onlineindexphasen begrenzt.</span><span class="sxs-lookup"><span data-stu-id="bd6ca-193">The lifetime of a cursor declared on a table that is involved in an online index operation is limited by the online index phases.</span></span> <span data-ttu-id="bd6ca-194">Updatecursor werden in den einzelnen Phasen für ungültig erklärt.</span><span class="sxs-lookup"><span data-stu-id="bd6ca-194">Update cursors are invalidated at each phase.</span></span> <span data-ttu-id="bd6ca-195">Schreibgeschützte Cursor werden nur nach der Endphase für ungültig erklärt.</span><span class="sxs-lookup"><span data-stu-id="bd6ca-195">Read-only cursors are invalidated only after the final phase.</span></span>  
  
## <a name="related-content"></a><span data-ttu-id="bd6ca-196">Verwandte Inhalte</span><span class="sxs-lookup"><span data-stu-id="bd6ca-196">Related Content</span></span>  
 [<span data-ttu-id="bd6ca-197">Ausführen von Onlineindexvorgängen</span><span class="sxs-lookup"><span data-stu-id="bd6ca-197">Perform Index Operations Online</span></span>](perform-index-operations-online.md)  
  
 [<span data-ttu-id="bd6ca-198">Richtlinien für Onlineindexvorgänge</span><span class="sxs-lookup"><span data-stu-id="bd6ca-198">Guidelines for Online Index Operations</span></span>](guidelines-for-online-index-operations.md)  
  
  
