---
title: SORT_IN_TEMPDB-Option für Indizes | Microsoft-Dokumentation
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: table-view-index
ms.topic: conceptual
helpviewer_keywords:
- SORT_IN_TEMPDB option
- disk space [SQL Server], indexes
- space [SQL Server], indexes
- tempdb database [SQL Server], indexes
- indexes [SQL Server], tempdb database
- index creation [SQL Server], tempdb database
ms.assetid: 754a003f-fe51-4d10-975a-f6b8c04ebd35
author: MikeRayMSFT
ms.author: mikeray
ms.openlocfilehash: 8feccc5b1d29617193f481569e10648c6ed77242
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 08/04/2020
ms.locfileid: "87723853"
---
# <a name="sort_in_tempdb-option-for-indexes"></a><span data-ttu-id="a772d-102">SORT_IN_TEMPDB-Option für Indizes</span><span class="sxs-lookup"><span data-stu-id="a772d-102">SORT_IN_TEMPDB Option For Indexes</span></span>
  <span data-ttu-id="a772d-103">Wenn Sie einen Index erstellen oder neu erstellen, indem Sie die SORT_IN_TEMPDB-Option auf ON setzen, wird [!INCLUDE[ssDEnoversion](../../includes/ssdenoversion-md.md)] angewiesen, zum Speichern der Zwischenergebnisse der Sortierung für die Erstellung eines Indexes **tempdb** zu verwenden.</span><span class="sxs-lookup"><span data-stu-id="a772d-103">When you create or rebuild an index, by setting the SORT_IN_TEMPDB option to ON you can direct the [!INCLUDE[ssDEnoversion](../../includes/ssdenoversion-md.md)] to use **tempdb** to store the intermediate sort results that are used to build the index.</span></span> <span data-ttu-id="a772d-104">Obwohl durch diese Option die Menge an Speicherplatz erhöht wird, die zur Indexerstellung verwendet wird, kann dadurch die Zeit verringert werden, die zum Erstellen eines Indexes erforderlich ist, wenn **tempdb** auf einer anderen Gruppe von Datenträgern gespeichert ist als die Benutzerdatenbank.</span><span class="sxs-lookup"><span data-stu-id="a772d-104">Although this option increases the amount of temporary disk space that is used to create an index, the option could reduce the time that is required to create or rebuild an index when **tempdb** is on a set of disks different from that of the user database.</span></span> <span data-ttu-id="a772d-105">Weitere Informationen zu **tempdb**finden Sie unter [Konfigurieren der Serverkonfigurationsoption Speicher für Indexerstellung](../../database-engine/configure-windows/configure-the-index-create-memory-server-configuration-option.md).</span><span class="sxs-lookup"><span data-stu-id="a772d-105">For more information about **tempdb**, see [Configure the index create memory Server Configuration Option](../../database-engine/configure-windows/configure-the-index-create-memory-server-configuration-option.md).</span></span>  
  
## <a name="phases-of-index-building"></a><span data-ttu-id="a772d-106">Phasen der Indexerstellung</span><span class="sxs-lookup"><span data-stu-id="a772d-106">Phases of Index Building</span></span>  
 <span data-ttu-id="a772d-107">Wenn [!INCLUDE[ssDE](../../includes/ssde-md.md)] einen Index erstellt, werden die folgenden Phasen durchlaufen:</span><span class="sxs-lookup"><span data-stu-id="a772d-107">As the [!INCLUDE[ssDE](../../includes/ssde-md.md)] builds an index, it goes through the following phases:</span></span>  
  
-   <span data-ttu-id="a772d-108">Zunächst scannt [!INCLUDE[ssDE](../../includes/ssde-md.md)] die Datenseiten, um Schlüsselwerte abzurufen, und erstellt eine Indexzeile auf Blattebene für jede Datenzeile.</span><span class="sxs-lookup"><span data-stu-id="a772d-108">The [!INCLUDE[ssDE](../../includes/ssde-md.md)] first scans the data pages of the base table to retrieve key values and builds an index leaf row for each data row.</span></span> <span data-ttu-id="a772d-109">Wenn die internen Puffer der Sortierung mit Indexeinträgen auf Blattebene aufgefüllt wurden, werden die Einträge sortiert und als Zwischensortierlauf auf den Datenträger geschrieben.</span><span class="sxs-lookup"><span data-stu-id="a772d-109">When the internal sort buffers have been filled with leaf index entries, the entries are sorted and written to disk as an intermediate sort run.</span></span> <span data-ttu-id="a772d-110">Dann setzt [!INCLUDE[ssDE](../../includes/ssde-md.md)] den Scanvorgang der Datenseiten fort, bis die Puffer der Sortierung erneut aufgefüllt sind.</span><span class="sxs-lookup"><span data-stu-id="a772d-110">The [!INCLUDE[ssDE](../../includes/ssde-md.md)] then resumes the data page scan until the sort buffers are again filled.</span></span> <span data-ttu-id="a772d-111">Dieses Muster des Scannens mehrerer Datenseiten, gefolgt vom Sortieren und Schreiben eines Sortierlaufs, wird so lange fortgesetzt, bis alle Zeilen der Basistabelle verarbeitet worden sind.</span><span class="sxs-lookup"><span data-stu-id="a772d-111">This pattern of scanning multiple data pages followed by sorting and writing a sort run continues until all the rows of the base table have been processed.</span></span>  
  
     <span data-ttu-id="a772d-112">Bei einem gruppierten Index handelt es sich bei den Blattzeilen des Indexes um die Datenzeilen der Tabelle, sodass die Zwischensortierläufe alle Datenzeilen enthalten.</span><span class="sxs-lookup"><span data-stu-id="a772d-112">In a clustered index, the leaf rows of the index are the data rows of the table; therefore, the intermediate sort runs contain all the data rows.</span></span> <span data-ttu-id="a772d-113">In einem nicht gruppierten Index können die Blattzeilen Nichtschlüsselspalten enthalten, daher sind sie jedoch in der Regel kleiner als bei einem gruppierten Index.</span><span class="sxs-lookup"><span data-stu-id="a772d-113">In a nonclustered index, the leaf rows may contain nonkey columns, but are generally smaller than a clustered index.</span></span> <span data-ttu-id="a772d-114">Ein nicht gruppierter Sortierlauf kann jedoch umfangreich sein, wenn die Indexschlüssel groß sind oder wenn mehrere Nichtschlüsselspalten in den Index einbezogen sind.</span><span class="sxs-lookup"><span data-stu-id="a772d-114">If the index keys are large, or there are several nonkey columns included in the index, a nonclustered sort run can be large.</span></span> <span data-ttu-id="a772d-115">Weitere Informationen zum Einbeziehen von Nichtschlüsselspalten finden Sie unter [Create Indexes with Included Columns](create-indexes-with-included-columns.md).</span><span class="sxs-lookup"><span data-stu-id="a772d-115">For more information about including nonkey columns, see [Create Indexes with Included Columns](create-indexes-with-included-columns.md).</span></span>  
  
-   <span data-ttu-id="a772d-116">[!INCLUDE[ssDE](../../includes/ssde-md.md)] führt die sortierten Läufe der Indexzeilen auf Blattebene in einem einzelnen, sortierten Strom zusammen.</span><span class="sxs-lookup"><span data-stu-id="a772d-116">The [!INCLUDE[ssDE](../../includes/ssde-md.md)] merges the sorted runs of index leaf rows into a single, sorted stream.</span></span> <span data-ttu-id="a772d-117">Die Komponente von [!INCLUDE[ssDE](../../includes/ssde-md.md)] für das Zusammenführen der Sortierung beginnt mit der ersten Seite jedes Sortierlaufs, sucht nach dem niedrigsten Schlüssel in allen Seiten und gibt die Blattzeile an die Indexerstellungskomponente weiter.</span><span class="sxs-lookup"><span data-stu-id="a772d-117">The sort merge component of the [!INCLUDE[ssDE](../../includes/ssde-md.md)] starts with the first page of each sort run, finds the lowest key in all the pages, and passes that leaf row to the index create component.</span></span> <span data-ttu-id="a772d-118">Danach wird der nächste niedrigste Schlüssel verarbeitet, dann der darauf folgende usw.</span><span class="sxs-lookup"><span data-stu-id="a772d-118">The next lowest key is processed, and then the next, and so on.</span></span> <span data-ttu-id="a772d-119">Wenn die letzte Indexzeile auf Blattebene aus einer Sortierlaufseite extrahiert wurde, wechselt der Prozess zur nächsten Seite dieses Sortierlaufs.</span><span class="sxs-lookup"><span data-stu-id="a772d-119">When the last leaf index row is extracted from a sort run page, the process shifts to the next page from that sort run.</span></span> <span data-ttu-id="a772d-120">Wenn alle Seiten in einem Sortierlaufblock verarbeitet worden sind, wird der Block freigegeben.</span><span class="sxs-lookup"><span data-stu-id="a772d-120">When all the pages in a sort run extent have been processed, the extent is freed.</span></span> <span data-ttu-id="a772d-121">Bei der Übergabe jeder Blattindexzeile an die Indexerstellungskomponente wird diese Zeile in einer Blattindexseite im Puffer eingeschlossen.</span><span class="sxs-lookup"><span data-stu-id="a772d-121">As each leaf index row is passed to the index create component, it is included in a leaf index page in the buffer.</span></span> <span data-ttu-id="a772d-122">In jede Blattseite wird geschrieben, wenn sie aufgefüllt wird.</span><span class="sxs-lookup"><span data-stu-id="a772d-122">Each leaf page is written as it is filled.</span></span> <span data-ttu-id="a772d-123">Während des Beschreibens von Blattseiten erstellt [!INCLUDE[ssDE](../../includes/ssde-md.md)] außerdem die oberen Ebenen des Indexes.</span><span class="sxs-lookup"><span data-stu-id="a772d-123">As leaf pages are written, the [!INCLUDE[ssDE](../../includes/ssde-md.md)] also builds the upper levels of the index.</span></span> <span data-ttu-id="a772d-124">In jede Indexseite einer oberen Ebene wird geschrieben, wenn sie aufgefüllt wird.</span><span class="sxs-lookup"><span data-stu-id="a772d-124">Each upper level index page is written when it is filled.</span></span>  
  
## <a name="sort_in_tempdb-option"></a><span data-ttu-id="a772d-125">SORT_IN_TEMPDB-Option</span><span class="sxs-lookup"><span data-stu-id="a772d-125">SORT_IN_TEMPDB Option</span></span>  
 <span data-ttu-id="a772d-126">Wenn die SORT_IN_TEMPDB-Option auf OFF gesetzt ist (Standardeinstellung), werden die Sortierläufe in der Zieldateigruppe gespeichert.</span><span class="sxs-lookup"><span data-stu-id="a772d-126">When SORT_IN_TEMPDB is set to OFF, the default, the sort runs are stored in the destination filegroup.</span></span> <span data-ttu-id="a772d-127">Während der ersten Phase der Indexerstellung werden durch die sich abwechselnden Lesevorgänge in den Basistabellenseiten und den Schreibvorgängen der Sortierläufe die Schreib-/Leseköpfe des Datenträgers von einem Bereich des Datenträgers in einen anderen Bereich verschoben.</span><span class="sxs-lookup"><span data-stu-id="a772d-127">During the first phase of creating the index, the alternating reads of the base table pages and writes of the sort runs move the disk read/write heads from one area of the disk to another.</span></span> <span data-ttu-id="a772d-128">Die Köpfe befinden sich in dem Bereich der Datenseiten, während die Datenseiten gescannt werden.</span><span class="sxs-lookup"><span data-stu-id="a772d-128">The heads are in the data page area as the data pages are scanned.</span></span> <span data-ttu-id="a772d-129">Sie werden in einen Bereich mit freiem Speicherplatz verschoben, wenn die Sortierpuffer aufgefüllt werden und der aktuelle Sortierlauf auf den Datenträger geschrieben werden muss. Anschließend werden sie wieder in den Bereich der Datenseiten verschoben, wenn der Seitenscanvorgang in der Tabelle fortgesetzt wird.</span><span class="sxs-lookup"><span data-stu-id="a772d-129">They move to an area of free space when the sort buffers fill and the current sort run has to be written to disk, and then move back to the data page area as the table page scan is resumed.</span></span> <span data-ttu-id="a772d-130">Das Verschieben der Schreib-/Leseköpfe nimmt in der zweiten Phase zu.</span><span class="sxs-lookup"><span data-stu-id="a772d-130">The read/write head movement is greater in the second phase.</span></span> <span data-ttu-id="a772d-131">Zu dieser Zeit wechselt der Sortierprozess in der Regel die Lesevorgänge in jedem Sortierlaufbereich.</span><span class="sxs-lookup"><span data-stu-id="a772d-131">At that time the sort process is typically alternating reads from each sort run area.</span></span> <span data-ttu-id="a772d-132">Sowohl die Sortierläufe als auch die neuen Indexseiten werden in der Zieldateigruppe erstellt.</span><span class="sxs-lookup"><span data-stu-id="a772d-132">Both the sort runs and the new index pages are built in the destination filegroup.</span></span> <span data-ttu-id="a772d-133">Dies bedeutet, dass zur gleichen Zeit, wenn das [!INCLUDE[ssDE](../../includes/ssde-md.md)] Lesevorgänge auf die Sortierläufe verteilt, ein regelmäßiges Springen zu den Indexblöcken erforderlich ist, um neue Indexseiten zu schreiben, während sie aufgefüllt werden.</span><span class="sxs-lookup"><span data-stu-id="a772d-133">This means that at the same time the [!INCLUDE[ssDE](../../includes/ssde-md.md)] is spreading reads across the sort runs, it has to periodically jump to the index extents to write new index pages as they are filled.</span></span>  
  
 <span data-ttu-id="a772d-134">Falls die Option SORT_IN_TEMPDB auf ON festgelegt ist und **tempdb** auf einer anderen Datenträgergruppe als der Zieldateigruppe gespeichert ist, finden die Lesevorgänge der Datenseiten während der ersten Phase auf einem anderen Datenträger statt als die Schreibvorgänge in den Bereich der Sortierarbeit in **tempdb**.</span><span class="sxs-lookup"><span data-stu-id="a772d-134">If the SORT_IN_TEMPDB option is set to ON and **tempdb** is on a separate set of disks from the destination filegroup, during the first phase, the reads of the data pages occur on a different disk from the writes to the sort work area in **tempdb**.</span></span> <span data-ttu-id="a772d-135">Dies bedeutet, dass die Lesevorgänge der Datenschlüssel auf dem Datenträger eher seriell auf dem Datenträger verlaufen und dass die Schreibvorgänge auf dem Datenträger mit **tempdb** ebenfalls seriell sind, genauso wie die Schreibvorgänge zum Erstellen des endgültigen Indexes.</span><span class="sxs-lookup"><span data-stu-id="a772d-135">This means the disk reads of the data keys generally continue more serially across the disk, and the writes to the **tempdb** disk also are generally serial, as do the writes to build the final index.</span></span> <span data-ttu-id="a772d-136">Auch wenn andere Benutzer die Datenbank verwenden und auf unterschiedliche Datenträgeradressen zugreifen, ist die Gesamtstruktur der Lese- und Schreibvorgänge viel effizienter, wenn die Option SORT_IN_TEMPDB angegeben ist.</span><span class="sxs-lookup"><span data-stu-id="a772d-136">Even if other users are using the database and accessing separate disk addresses, the overall pattern of reads and writes are more efficient when SORT_IN_TEMPDB is specified than when it is not.</span></span>  
  
 <span data-ttu-id="a772d-137">Mithilfe der Option SORT_IN_TEMPDB stehen die Indexblöcke möglicherweise näher zusammen, besonders wenn der CREATE INDEX-Vorgang nicht parallel ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="a772d-137">The SORT_IN_TEMPDB option may improve the contiguity of index extents, especially if the CREATE INDEX operation is not being processed in parallel.</span></span> <span data-ttu-id="a772d-138">Die Blöcke im Bereich der Sortierarbeit werden im Hinblick auf ihren Speicherort in der Datenbank eher nach dem Zufallsprinzip freigegeben.</span><span class="sxs-lookup"><span data-stu-id="a772d-138">The sort work area extents are freed on a somewhat random basis with regard to their location in the database.</span></span> <span data-ttu-id="a772d-139">Wenn die Bereiche der Sortierarbeit in der Zieldateigruppe enthalten sind, können sie bei der Freigabe der Blöcke der Sortierarbeit durch Anforderungen von Blöcken reserviert werden, in denen die Indexstruktur während ihrer Erstellung gespeichert werden soll.</span><span class="sxs-lookup"><span data-stu-id="a772d-139">If the sort work areas are contained in the destination filegroup, as the sort work extents are freed, they can be acquired by the requests for extents to hold the index structure as it is built.</span></span> <span data-ttu-id="a772d-140">Dabei können die Speicherorte der Indexblöcke bis zu einem gewissen Grad zufällig ausgewählt werden.</span><span class="sxs-lookup"><span data-stu-id="a772d-140">This can randomize the locations of the index extents to a degree.</span></span> <span data-ttu-id="a772d-141">Wenn die Sortierblöcke separat in **tempdb**gespeichert werden, steht die Abfolge, in der sie freigegeben werden, in keinem Zusammenhang mit dem Speicherort der Indexblöcke.</span><span class="sxs-lookup"><span data-stu-id="a772d-141">If the sort extents are held separately in **tempdb**, the sequence in which they are freed has no effect on the location of the index extents.</span></span> <span data-ttu-id="a772d-142">Wenn darüber hinaus die Zwischensortierläufe in **tempdb** anstelle der Zieldateigruppe gespeichert werden, steht mehr Speicherplatz in der Zieldateigruppe zur Verfügung,</span><span class="sxs-lookup"><span data-stu-id="a772d-142">Also, when the intermediate sort runs are stored in **tempdb** instead of the destination filegroup, there is more space available in the destination filegroup.</span></span> <span data-ttu-id="a772d-143">Dadurch werden die Möglichkeiten verbessert, dass die Indexblöcke zusammenhängend sind.</span><span class="sxs-lookup"><span data-stu-id="a772d-143">This increases the chances that index extents will be contiguous.</span></span>  
  
 <span data-ttu-id="a772d-144">Die Option SORT_IN_TEMPDB wirkt sich nur auf die aktuelle Anweisung aus.</span><span class="sxs-lookup"><span data-stu-id="a772d-144">The SORT_IN_TEMPDB option affects only the current statement.</span></span> <span data-ttu-id="a772d-145">Ob der Index in **tempdb**sortiert wurde, wird nicht in Metadaten aufgezeichnet.</span><span class="sxs-lookup"><span data-stu-id="a772d-145">No metadata records that the index was or was not sorted in **tempdb**.</span></span> <span data-ttu-id="a772d-146">Wenn Sie z. B. einen nicht gruppierten Index mithilfe der Option SORT_IN_TEMPDB und später einen gruppierten Index ohne Angabe dieser Option erstellen, verwendet [!INCLUDE[ssDE](../../includes/ssde-md.md)] diese Option nicht, wenn es den nicht gruppierten Index neu erstellt.</span><span class="sxs-lookup"><span data-stu-id="a772d-146">For example, if you create a nonclustered index using the SORT_IN_TEMPDB option, and at a later time create a clustered index without specifying the option, the [!INCLUDE[ssDE](../../includes/ssde-md.md)] does not use the option when it re-creates the nonclustered index.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="a772d-147">Wenn kein Sortiervorgang erforderlich ist oder die Sortierung im Arbeitsspeicher erfolgen kann, wird die Option SORT_IN_TEMPDB ignoriert.</span><span class="sxs-lookup"><span data-stu-id="a772d-147">If a sort operation is not required or if the sort can be performed in memory, the SORT_IN_TEMPDB option is ignored.</span></span>  
  
## <a name="disk-space-requirements"></a><span data-ttu-id="a772d-148">Anforderungen an den Datenträgerspeicher</span><span class="sxs-lookup"><span data-stu-id="a772d-148">Disk Space Requirements</span></span>  
 <span data-ttu-id="a772d-149">Wenn Sie die Option SORT_IN_TEMPDB auf ON setzen, muss in **tempdb** genügend freier Speicherplatz zum Speichern der Zwischensortierläufe zur Verfügung stehen, und es muss in der Zieldateigruppe genügend Speicherplatz verfügbar sein, damit der neue Index gespeichert werden kann.</span><span class="sxs-lookup"><span data-stu-id="a772d-149">When you set the SORT_IN_TEMPDB option to ON, you must have sufficient free disk space available in **tempdb** to hold the intermediate sort runs, and enough free disk space in the destination filegroup to hold the new index.</span></span> <span data-ttu-id="a772d-150">Die CREATE INDEX-Anweisung erzeugt einen Fehler, wenn nicht genügend freier Speicherplatz zur Verfügung steht und es eine Ursache dafür gibt, dass die Datenbanken keine automatische Vergrößerung durchführen können, um mehr Speicherplatz zu reservieren (wenn z. B. kein Datenträgerspeicher verfügbar ist oder die automatische Vergrößerung ausgeschaltet ist).</span><span class="sxs-lookup"><span data-stu-id="a772d-150">The CREATE INDEX statement fails if there is insufficient free space and there is some reason the databases cannot autogrow to acquire more space, such as no space on the disk or autogrow is set to off.</span></span>  
  
 <span data-ttu-id="a772d-151">Falls SORT_IN_TEMPDB auf OFF gesetzt ist, muss der verfügbare Speicherplatz in der Zieldateigruppe ungefähr der Größe des endgültigen Indexes entsprechen.</span><span class="sxs-lookup"><span data-stu-id="a772d-151">If SORT_IN_TEMPDB is set to OFF, the available free disk space in the destination filegroup must be roughly the size of the final index.</span></span> <span data-ttu-id="a772d-152">Während der ersten Phase werden die Sortierläufe erstellt, sie benötigen ungefähr gleich viel Speicherplatz wie der endgültige Index.</span><span class="sxs-lookup"><span data-stu-id="a772d-152">During the first phase, the sort runs are built and require about the same amount of space as the final index.</span></span> <span data-ttu-id="a772d-153">Während der zweiten Phase wird jeder Block mit Sortierläufen freigegeben, nachdem er verarbeitet worden ist.</span><span class="sxs-lookup"><span data-stu-id="a772d-153">During the second phase, each sort run extent is freed after it has been processed.</span></span> <span data-ttu-id="a772d-154">Die Blöcke mit Sortierläufen werden demnach ungefähr genauso häufig freigegeben, wie Blöcke zum Speichern der Seiten des endgültigen Indexes reserviert werden, sodass die gesamten Speicherplatzanforderungen nicht bedeutend über der Größe des endgültigen Indexes liegen.</span><span class="sxs-lookup"><span data-stu-id="a772d-154">This means that sort run extents are freed at about the same rate at which extents are acquired to hold the final index pages; therefore, the overall space requirements do not greatly exceed the size of the final index.</span></span> <span data-ttu-id="a772d-155">Als Nebeneffekt hiervon tendiert [!INCLUDE[ssDE](../../includes/ssde-md.md)] dazu, die Blöcke mit Sortierläufen sehr schnell nach ihrer Freigabe wieder zu verwenden, wenn die Menge an verfügbarem Speicherplatz ungefähr der Größe des endgültigen Indexes entspricht.</span><span class="sxs-lookup"><span data-stu-id="a772d-155">One side effect of this is that if the amount of free space is very close to the size of the final index, the [!INCLUDE[ssDE](../../includes/ssde-md.md)] will generally reuse the sort run extents very quickly after they are freed.</span></span> <span data-ttu-id="a772d-156">Da die Blöcke mit Sortierläufen eher nach dem Zufallsprinzip freigegeben werden, wird dadurch die Kontinuität der Indexblöcke in dieser Szenario verringert.</span><span class="sxs-lookup"><span data-stu-id="a772d-156">Because the sort run extents are freed in a somewhat random manner, this reduces the continuity of the index extents in this scenario.</span></span> <span data-ttu-id="a772d-157">Wenn SORT_IN_TEMPDB auf OFF gesetzt ist, wird die Kontinuität der Indexblöcke verbessert, wenn ausreichend freier Speicherplatz in der Zieldateigruppe verfügbar ist, sodass für die Indexblöcke ein zusammenhängender Pool anstatt der Blöcke, deren Zuordnung soeben aufgehoben wurde, mit Sortierläufen zugeordnet werden können.</span><span class="sxs-lookup"><span data-stu-id="a772d-157">If SORT_IN_TEMPDB is set to OFF, the continuity of the index extents is improved if there is sufficient free space available in the destination filegroup that the index extents can be allocated from a contiguous pool instead of from the freshly deallocated sort run extents.</span></span>  
  
 <span data-ttu-id="a772d-158">Wenn Sie einen nicht gruppierten Index erstellen, muss die folgende Menge an Speicherplatz zur Verfügung stehen:</span><span class="sxs-lookup"><span data-stu-id="a772d-158">When you create a nonclustered index, you must have available as free space:</span></span>  
  
-   <span data-ttu-id="a772d-159">Falls SORT_IN_TEMPDB auf ON gesetzt ist, muss in **tempdb** ausreichend freier Speicherplatz zur Verfügung stehen, um die Sortierläufe zu speichern, und es muss ausreichend freier Speicherplatz in der Zieldateigruppe vorhanden sein, um die endgültige Indexstruktur zu speichern.</span><span class="sxs-lookup"><span data-stu-id="a772d-159">If SORT_IN_TEMPDB is set to ON, there must be sufficient free space in **tempdb** to store the sort runs, and sufficient free space in the destination filegroup to store the final index structure.</span></span> <span data-ttu-id="a772d-160">Die Sortierläufe enthalten die Blattzeilen des Indexes.</span><span class="sxs-lookup"><span data-stu-id="a772d-160">The sort runs contain the leaf rows of the index.</span></span>  
  
-   <span data-ttu-id="a772d-161">Falls SORT_IN_TEMPDB auf OFF gesetzt ist, muss genügend freier Speicherplatz für das Speichern der endgültigen Indexstruktur in der Zieldateigruppe verfügbar sein.</span><span class="sxs-lookup"><span data-stu-id="a772d-161">If SORT_IN_TEMPDB is set to OFF, the free space in the destination filegroup must be large enough to store the final index structure.</span></span> <span data-ttu-id="a772d-162">Die Kontinuität der Indexblöcke kann verbessert werden, wenn mehr freier Speicherplatz zur Verfügung steht.</span><span class="sxs-lookup"><span data-stu-id="a772d-162">The continuity of the index extends may be improved if more free space is available.</span></span>  
  
 <span data-ttu-id="a772d-163">Wenn Sie einen gruppierten Index für eine Tabelle erstellen, die über keine nicht gruppierten Indizes verfügen, muss die folgende Menge an Speicherplatz zur Verfügung stehen:</span><span class="sxs-lookup"><span data-stu-id="a772d-163">When you create a clustered index on a table that does not have nonclustered indexes, you must have available as free space:</span></span>  
  
-   <span data-ttu-id="a772d-164">Wenn SORT_IN_TEMPDB auf ON gesetzt ist, muss in **tempdb** ausreichend freier Speicherplatz zur Verfügung stehen, um die Sortierläufe zu speichern.</span><span class="sxs-lookup"><span data-stu-id="a772d-164">If SORT_IN_TEMPDB is set to ON, there must be sufficient free space in **tempdb** to store the sort runs.</span></span> <span data-ttu-id="a772d-165">Diese schließen die Datenzeilen der Tabelle ein.</span><span class="sxs-lookup"><span data-stu-id="a772d-165">These include the data rows of the table.</span></span> <span data-ttu-id="a772d-166">Es muss ausreichend freier Speicherplatz in der Zieldateigruppe vorhanden sein, um die endgültige Indexstruktur zu speichern.</span><span class="sxs-lookup"><span data-stu-id="a772d-166">There must be sufficient free space in the destination filegroup to store the final index structure.</span></span> <span data-ttu-id="a772d-167">Dies schließt die Datenzeilen der Tabelle und des B-Baumes des Indexes ein.</span><span class="sxs-lookup"><span data-stu-id="a772d-167">This includes the data rows of the table and the index B-tree.</span></span> <span data-ttu-id="a772d-168">Sie müssen evtl. die Schätzung für Faktoren wie eine große Schlüsselgröße oder ein Füllfaktor mit einem niedrigen Wert entsprechend anpassen.</span><span class="sxs-lookup"><span data-stu-id="a772d-168">You may have to adjust the estimate for factors such as having a large key size or a fill factor with a low value.</span></span>  
  
-   <span data-ttu-id="a772d-169">Falls SORT_IN_TEMPDB auf OFF gesetzt ist, muss genügend freier Speicherplatz für das Speichern der endgültigen Tabelle in der Zieldateigruppe verfügbar sein.</span><span class="sxs-lookup"><span data-stu-id="a772d-169">If SORT_IN_TEMPDB is set to OFF, the free space in the destination filegroup must be large enough to store the final table.</span></span> <span data-ttu-id="a772d-170">Dies schließt die Indexstruktur ein.</span><span class="sxs-lookup"><span data-stu-id="a772d-170">This includes the index structure.</span></span> <span data-ttu-id="a772d-171">Die Kontinuität der Tabelle und Indexblöcke kann verbessert werden, wenn mehr freier Speicherplatz zur Verfügung steht.</span><span class="sxs-lookup"><span data-stu-id="a772d-171">The continuity of the table and index extents may be improved if more free space is available.</span></span>  
  
 <span data-ttu-id="a772d-172">Wenn Sie einen gruppierten Index für eine Tabelle erstellen, die über nicht gruppierten Indizes verfügen, muss die folgende Menge an Speicherplatz zur Verfügung stehen:</span><span class="sxs-lookup"><span data-stu-id="a772d-172">When you create a clustered index on a table that has nonclustered indexes, you must have available as free space:</span></span>  
  
-   <span data-ttu-id="a772d-173">Falls SORT_IN_TEMPDB auf ON gesetzt ist, muss in **tempdb** ausreichend freier Speicherplatz zur Verfügung stehen, um die Auflistung von Sortierläufen für den größten Index (üblicherweise der gruppierte Index) zu speichern, und es muss ausreichend freier Speicherplatz in der Zieldateigruppe vorhanden sein, um die endgültigen Strukturen aller Indizes zu speichern.</span><span class="sxs-lookup"><span data-stu-id="a772d-173">If SORT_IN_TEMPDB is set to ON, there must be sufficient free space in **tempdb** to store the collection of sort runs for the largest index, typically the clustered index, and sufficient free space in the destination filegroup to store the final structures of all the indexes.</span></span> <span data-ttu-id="a772d-174">Das schließt den gruppierten Index ein, der die Datenzeilen der Tabelle enthält.</span><span class="sxs-lookup"><span data-stu-id="a772d-174">This includes the clustered index that contains the data rows of the table.</span></span>  
  
-   <span data-ttu-id="a772d-175">Falls SORT_IN_TEMPDB auf OFF gesetzt ist, muss genügend freier Speicherplatz für das Speichern der endgültigen Tabelle in der Zieldateigruppe verfügbar sein.</span><span class="sxs-lookup"><span data-stu-id="a772d-175">If SORT_IN_TEMPDB is set to OFF, the free space in the destination filegroup must be large enough to store the final table.</span></span> <span data-ttu-id="a772d-176">Das schließt die Strukturen aller Indizes ein.</span><span class="sxs-lookup"><span data-stu-id="a772d-176">This includes the structures of all the indexes.</span></span> <span data-ttu-id="a772d-177">Die Kontinuität der Tabelle und Indexblöcke kann verbessert werden, wenn mehr freier Speicherplatz zur Verfügung steht.</span><span class="sxs-lookup"><span data-stu-id="a772d-177">The continuity of the table and index extents may be improved if more free space is available.</span></span>  
  
## <a name="related-tasks"></a><span data-ttu-id="a772d-178">Related Tasks</span><span class="sxs-lookup"><span data-stu-id="a772d-178">Related Tasks</span></span>  
 [<span data-ttu-id="a772d-179">CREATE INDEX &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="a772d-179">CREATE INDEX &#40;Transact-SQL&#41;</span></span>](/sql/t-sql/statements/create-index-transact-sql)  
  
 [<span data-ttu-id="a772d-180">Neuorganisieren und Neuerstellen von Indizes</span><span class="sxs-lookup"><span data-stu-id="a772d-180">Reorganize and Rebuild Indexes</span></span>](indexes.md)  
  
## <a name="related-content"></a><span data-ttu-id="a772d-181">Verwandte Inhalte</span><span class="sxs-lookup"><span data-stu-id="a772d-181">Related Content</span></span>  
 [<span data-ttu-id="a772d-182">ALTER INDEX &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="a772d-182">ALTER INDEX &#40;Transact-SQL&#41;</span></span>](/sql/t-sql/statements/alter-index-transact-sql)  
  
 [<span data-ttu-id="a772d-183">Konfigurieren der Serverkonfigurationsoption Speicher für Indexerstellung</span><span class="sxs-lookup"><span data-stu-id="a772d-183">Configure the index create memory Server Configuration Option</span></span>](../../database-engine/configure-windows/configure-the-index-create-memory-server-configuration-option.md)  
  
 [<span data-ttu-id="a772d-184">Speicherplatzanforderungen für Index-DDL-Vorgänge</span><span class="sxs-lookup"><span data-stu-id="a772d-184">Disk Space Requirements for Index DDL Operations</span></span>](disk-space-requirements-for-index-ddl-operations.md)  
  
  
