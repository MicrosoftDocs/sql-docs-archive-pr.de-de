---
title: OPENXML (SQL Server) | Microsoft-Dokumentation
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: xml
ms.topic: conceptual
helpviewer_keywords:
- ColPattern [XML in SQL Server]
- OPENXML statement, about OPENXML statement
- writing XML, OPENXML statement
- OPENXML statement, querying XML
- attribute-centric mapping
- SELECT statement [SQL Server], OPENXML keyword
- column patterns [XML in SQL Server]
- row patterns [XML in SQL Server]
- rowpattern [XML in SQL Server]
- queries [XML in SQL Server], OPENXML statement
- XML [SQL Server], OPENXML statement
- element-centric mapping [SQL Server]
ms.assetid: 060126fc-ed0f-478f-830a-08e418d410dc
author: rothja
ms.author: jroth
ms.openlocfilehash: 1849029e6654fcd629499cceeff9957e5389370f
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 08/04/2020
ms.locfileid: "87726725"
---
# <a name="openxml-sql-server"></a><span data-ttu-id="2f4ad-102">OPENXML (SQL Server)</span><span class="sxs-lookup"><span data-stu-id="2f4ad-102">OPENXML (SQL Server)</span></span>
  <span data-ttu-id="2f4ad-103">OPENXML ist ein [!INCLUDE[tsql](../../includes/tsql-md.md)] -Schlüsselwort, das für arbeitsspeicherinterne XML-Dokumente ein Rowset bereitstellt, das mit einer Tabelle oder einer Sicht vergleichbar ist.</span><span class="sxs-lookup"><span data-stu-id="2f4ad-103">OPENXML, a [!INCLUDE[tsql](../../includes/tsql-md.md)] keyword, provides a rowset over in-memory XML documents that is similar to a table or a view.</span></span> <span data-ttu-id="2f4ad-104">OPENXML ermöglicht es, auf XML-Daten so zuzugreifen, wie auf ein relationales Rowset.</span><span class="sxs-lookup"><span data-stu-id="2f4ad-104">OPENXML allows access to XML data as though it is a relational rowset.</span></span> <span data-ttu-id="2f4ad-105">Dies geschieht, indem eine Rowsetsicht der internen Darstellung eines XML-Dokuments bereitgestellt wird.</span><span class="sxs-lookup"><span data-stu-id="2f4ad-105">It does this by providing a rowset view of the internal representation of an XML document.</span></span> <span data-ttu-id="2f4ad-106">Die Datensätze im Rowset können in Datenbanktabellen gespeichert werden.</span><span class="sxs-lookup"><span data-stu-id="2f4ad-106">The records in the rowset can be stored in database tables.</span></span>

 <span data-ttu-id="2f4ad-107">OPENXML kann immer dann in SELECT- und SELECT INTO-Anweisungen verwendet werden, wenn Rowsetanbieter, eine Sicht oder OPENROWSET als Quelle verwendet werden können.</span><span class="sxs-lookup"><span data-stu-id="2f4ad-107">OPENXML can be used in SELECT and SELECT INTO statements wherever rowset providers, a view, or OPENROWSET can appear as the source.</span></span> <span data-ttu-id="2f4ad-108">Informationen zur Syntax von OPENXML finden Sie unter [OPENXML &#40;Transact-SQL&#41;](/sql/t-sql/functions/openxml-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="2f4ad-108">For information about the syntax of OPENXML, see [OPENXML &#40;Transact-SQL&#41;](/sql/t-sql/functions/openxml-transact-sql).</span></span>

 <span data-ttu-id="2f4ad-109">Um Abfragen für ein XML-Dokument mithilfe von OPENXML zu schreiben, müssen Sie zuerst den Befehl verwenden `sp_xml_preparedocument` .</span><span class="sxs-lookup"><span data-stu-id="2f4ad-109">To write queries against an XML document by using OPENXML, you must first call `sp_xml_preparedocument`.</span></span> <span data-ttu-id="2f4ad-110">Dies analysiert das XML-Dokument und gibt ein Handle auf das analysierte Dokument zurück, das zur Verwendung bereit ist.</span><span class="sxs-lookup"><span data-stu-id="2f4ad-110">This parses the XML document and returns a handle to the parsed document that is ready for consumption.</span></span> <span data-ttu-id="2f4ad-111">Das analysierte Dokument ist eine strukturierte Dokumentobjektdarstellung (DOM - Document Object Model) der verschiedenen Knoten des XML-Dokuments.</span><span class="sxs-lookup"><span data-stu-id="2f4ad-111">The parsed document is a document object model (DOM) tree representation of various nodes in the XML document.</span></span> <span data-ttu-id="2f4ad-112">Das Dokumenthandle wird an OPENXML übergeben.</span><span class="sxs-lookup"><span data-stu-id="2f4ad-112">The document handle is passed to OPENXML.</span></span> <span data-ttu-id="2f4ad-113">OPENXML erstellt dann auf der Grundlage der übergebenen Parameter eine Rowsetsicht des Dokuments.</span><span class="sxs-lookup"><span data-stu-id="2f4ad-113">OPENXML then provides a rowset view of the document, based on the parameters passed to it.</span></span>

> [!NOTE]
>  <span data-ttu-id="2f4ad-114">`sp_xml_preparedocument`verwendet eine SQL-aktualisierte Version des MSXML-Parsers, Msxmlsql.dll.</span><span class="sxs-lookup"><span data-stu-id="2f4ad-114">`sp_xml_preparedocument` uses a SQL-updated version of the MSXML parser, Msxmlsql.dll.</span></span> <span data-ttu-id="2f4ad-115">Diese Version des MSXML-Parsers wurde für [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] entwickelt und ist abwärtskompatibel zu MSXML Version 2.6.</span><span class="sxs-lookup"><span data-stu-id="2f4ad-115">This version of the MSXML parser was designed to support [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] and remain backward compatible with MSXML version 2.6.</span></span>

 <span data-ttu-id="2f4ad-116">Die interne Darstellung eines XML-Dokuments muss durch einen Aufruf der gespeicherten Systemprozedur **sp_xml_removedocument** aus dem Arbeitsspeicher gelöscht werden, um den Arbeitsspeicher zu leeren.</span><span class="sxs-lookup"><span data-stu-id="2f4ad-116">The internal representation of an XML document must be removed from memory by calling the **sp_xml_removedocument** system stored procedure to free the memory.</span></span>

 <span data-ttu-id="2f4ad-117">Der Vorgang wird in der folgenden Abbildung veranschaulicht.</span><span class="sxs-lookup"><span data-stu-id="2f4ad-117">The following illustration shows the process.</span></span>

 <span data-ttu-id="2f4ad-118">![Analysieren von XML mit OPENXML](../../database-engine/media/xmlsp.gif "Analysieren von XML mit OPENXML")</span><span class="sxs-lookup"><span data-stu-id="2f4ad-118">![Parsing XML with OPENXML](../../database-engine/media/xmlsp.gif "Parsing XML with OPENXML")</span></span>

 <span data-ttu-id="2f4ad-119">Um die Funktionsweise von OPENXML zu verstehen, benötigen Sie Kenntnisse über XPath-Abfragen und XML.</span><span class="sxs-lookup"><span data-stu-id="2f4ad-119">Note that to understand OPENXML, familiarity with XPath queries and an understanding of XML is required.</span></span> <span data-ttu-id="2f4ad-120">Weitere Informationen zur XPath-Unterstützung in SQL Server finden Sie unter [Verwenden von XPath-Abfragen in SQLXML 4.0](../sqlxml-annotated-xsd-schemas-xpath-queries/using-xpath-queries-in-sqlxml-4-0.md).</span><span class="sxs-lookup"><span data-stu-id="2f4ad-120">For more information about XPath support in SQL Server, see [Using XPath Queries in SQLXML 4.0](../sqlxml-annotated-xsd-schemas-xpath-queries/using-xpath-queries-in-sqlxml-4-0.md).</span></span>

> [!NOTE]
>  <span data-ttu-id="2f4ad-121">Mit OpenXML können die XPath-Muster für die Zeilen und Spalten als Variablen parametrisiert werden.</span><span class="sxs-lookup"><span data-stu-id="2f4ad-121">OpenXML allows the row and column XPath patterns to be parameterized as variables.</span></span> <span data-ttu-id="2f4ad-122">Diese Art der Parametrisierung kann zu XPath-Ausdrucksangriffen führen, wenn der Programmierer die Parametrisierung für externe Benutzer offen legt (wenn Parameter beispielsweise über eine extern aufgerufene gespeicherte Prozedur bereitgestellt werden).</span><span class="sxs-lookup"><span data-stu-id="2f4ad-122">Such parameterization could lead to XPath expression injections, if the programmer exposes the parameterization to outside users (for example, if the parameters are provided via an externally called stored procedure).</span></span> <span data-ttu-id="2f4ad-123">Um solche potenziellen Sicherheitsprobleme zu vermeiden, sollten XPath-Parameter niemals für externe aufrufende Prozesse offen gelegt werden.</span><span class="sxs-lookup"><span data-stu-id="2f4ad-123">To avoid such potential security issues, it is recommended that XPath parameters should never be exposed to external callers.</span></span>

## <a name="example"></a><span data-ttu-id="2f4ad-124">Beispiel</span><span class="sxs-lookup"><span data-stu-id="2f4ad-124">Example</span></span>
 <span data-ttu-id="2f4ad-125">Das folgende Beispiel veranschaulicht die Verwendung von `OPENXML` in einer `INSERT` - und einer `SELECT` -Anweisung.</span><span class="sxs-lookup"><span data-stu-id="2f4ad-125">The following example shows the use of `OPENXML` in an `INSERT` statement and a `SELECT` statement.</span></span> <span data-ttu-id="2f4ad-126">Das XML-Beispieldokument setzt sich aus `<Customers>` - und `<Orders>` -Elementen zusammen.</span><span class="sxs-lookup"><span data-stu-id="2f4ad-126">The sample XML document contains `<Customers>` and `<Orders>` elements.</span></span>

 <span data-ttu-id="2f4ad-127">Zuerst analysiert die gespeicherte Prozedur `sp_xml_preparedocument` das XML-Dokument.</span><span class="sxs-lookup"><span data-stu-id="2f4ad-127">First, the `sp_xml_preparedocument` stored procedure parses the XML document.</span></span> <span data-ttu-id="2f4ad-128">Das analysierte Dokument ist eine strukturierte Darstellung der Knoten im XML-Dokument (Elemente, Attribute, Text und Kommentare).</span><span class="sxs-lookup"><span data-stu-id="2f4ad-128">The parsed document is a tree representation of the nodes (elements, attributes, text, and comments) in the XML document.</span></span> <span data-ttu-id="2f4ad-129">`OPENXML` verweist dann auf dieses analysierte XML-Dokument und erstellt eine Rowsetansicht für das gesamte oder Teile des XML-Dokuments.</span><span class="sxs-lookup"><span data-stu-id="2f4ad-129">`OPENXML` then refers to this parsed XML document and provides a rowset view of all or parts of this XML document.</span></span> <span data-ttu-id="2f4ad-130">Eine `INSERT` -Anweisung kann mithilfe von `OPENXML` Daten aus einem solchen Rowset in eine Datenbanktabelle einfügen.</span><span class="sxs-lookup"><span data-stu-id="2f4ad-130">An `INSERT` statement using `OPENXML` can insert data from such a rowset into a database table.</span></span> <span data-ttu-id="2f4ad-131">Es können mehrere `OPENXML` -Aufrufe verwendet werden, um eine Rowsetsicht verschiedener Teile des XML-Dokuments bereitzustellen und sie zu verarbeiten, indem sie z. B. in unterschiedliche Tabellen eingefügt werden.</span><span class="sxs-lookup"><span data-stu-id="2f4ad-131">Several `OPENXML` calls can be used to provide a rowset view of various parts of the XML document and process them, for example, by inserting them into different tables.</span></span> <span data-ttu-id="2f4ad-132">Dieses Verfahren wird auch als Aufteilen von XML-Daten in Tabellen bezeichnet.</span><span class="sxs-lookup"><span data-stu-id="2f4ad-132">This process is also referred to as shredding XML into tables.</span></span>

 <span data-ttu-id="2f4ad-133">Im folgenden Beispiel wird ein XML-Dokument so aufgeteilt, dass mithilfe von zwei `<Customers>` -Anweisungen `Customers` -Elemente in der `<Orders>` -Tabelle und `Orders` -Elemente in der `INSERT` -Tabelle gespeichert werden.</span><span class="sxs-lookup"><span data-stu-id="2f4ad-133">In the following example, an XML document is shredded in a way that `<Customers>` elements are stored in the `Customers` table and `<Orders>` elements are stored in the `Orders` table by using two `INSERT` statements.</span></span> <span data-ttu-id="2f4ad-134">Das Beispiel enthält auch eine `SELECT` -Anweisung mit `OPENXML` , die `CustomerID` und `OrderDate` aus dem XML-Dokument abruft.</span><span class="sxs-lookup"><span data-stu-id="2f4ad-134">The example also shows a `SELECT` statement with `OPENXML` that retrieves `CustomerID` and `OrderDate` from the XML document.</span></span> <span data-ttu-id="2f4ad-135">Der letzte Schritt in diesem Verfahren besteht darin, `sp_xml_removedocument`erneut aufzurufen.</span><span class="sxs-lookup"><span data-stu-id="2f4ad-135">The last step in the process is to call `sp_xml_removedocument`.</span></span> <span data-ttu-id="2f4ad-136">Dadurch wird der der internen XML-Darstellung, die während der Analysephase erstellt wurde, zugewiesene Arbeitsspeicher freigegeben.</span><span class="sxs-lookup"><span data-stu-id="2f4ad-136">This is done in order to release the memory allocated to contain the internal XML tree representation that was created during the parse phase.</span></span>

```
-- Create tables for later population using OPENXML.
CREATE TABLE Customers (CustomerID varchar(20) primary key,
                ContactName varchar(20), 
                CompanyName varchar(20));
GO
CREATE TABLE Orders( CustomerID varchar(20), OrderDate datetime);
GO
DECLARE @docHandle int;
DECLARE @xmlDocument nvarchar(max); -- or xml type
SET @xmlDocument = N'<ROOT>
<Customers CustomerID="XYZAA" ContactName="Joe" CompanyName="Company1">
<Orders CustomerID="XYZAA" OrderDate="2000-08-25T00:00:00"/>
<Orders CustomerID="XYZAA" OrderDate="2000-10-03T00:00:00"/>
</Customers>
<Customers CustomerID="XYZBB" ContactName="Steve"
CompanyName="Company2">No Orders yet!
</Customers>
</ROOT>';
EXEC sp_xml_preparedocument @docHandle OUTPUT, @xmlDocument;
-- Use OPENXML to provide rowset consisting of customer data.
INSERT Customers 
SELECT * 
FROM OPENXML(@docHandle, N'/ROOT/Customers') 
  WITH Customers;
-- Use OPENXML to provide rowset consisting of order data.
INSERT Orders 
SELECT * 
FROM OPENXML(@docHandle, N'//Orders') 
  WITH Orders;
-- Using OPENXML in a SELECT statement.
SELECT * FROM OPENXML(@docHandle, N'/ROOT/Customers/Orders') WITH (CustomerID nchar(5) '../@CustomerID', OrderDate datetime);
-- Remove the internal representation of the XML document.
EXEC sp_xml_removedocument @docHandle; 
```

 <span data-ttu-id="2f4ad-137">Die folgende Abbildung zeigt die analysierte XML-Struktur des vorherigen XML-Dokuments, das mithilfe von sp_xml_preparedocument erstellt wurde.</span><span class="sxs-lookup"><span data-stu-id="2f4ad-137">The following illustration shows the parsed XML tree of the previous XML document that was created by using sp_xml_preparedocument.</span></span>

 <span data-ttu-id="2f4ad-138">![Analysierter XML-Baum](../../database-engine/media/xmlparsedtree.gif "Analysierter XML-Baum")</span><span class="sxs-lookup"><span data-stu-id="2f4ad-138">![Parsed XML tree](../../database-engine/media/xmlparsedtree.gif "Parsed XML tree")</span></span>

## <a name="openxml-parameters"></a><span data-ttu-id="2f4ad-139">OPENXML-Parameter</span><span class="sxs-lookup"><span data-stu-id="2f4ad-139">OPENXML Parameters</span></span>
 <span data-ttu-id="2f4ad-140">Zu den Parametern für OPENXML gehören:</span><span class="sxs-lookup"><span data-stu-id="2f4ad-140">The parameters to OPENXML include the following:</span></span>

-   <span data-ttu-id="2f4ad-141">Ein XML-Dokumenthandle (*idoc*)</span><span class="sxs-lookup"><span data-stu-id="2f4ad-141">An XML document handle (*idoc*)</span></span>

-   <span data-ttu-id="2f4ad-142">Ein XPath-Ausdruck zur Identifizierung der Knoten, die Zeilen zugeordnet werden (*rowpattern*)</span><span class="sxs-lookup"><span data-stu-id="2f4ad-142">An XPath expression to identify the nodes to be mapped to rows (*rowpattern*)</span></span>

-   <span data-ttu-id="2f4ad-143">Eine Beschreibung des zu generierenden Rowsets</span><span class="sxs-lookup"><span data-stu-id="2f4ad-143">A description of the rowset to be generated</span></span>

-   <span data-ttu-id="2f4ad-144">Die Zuordnung zwischen den Rowsetspalten und den XML-Knoten</span><span class="sxs-lookup"><span data-stu-id="2f4ad-144">Mapping between the rowset columns and the XML nodes</span></span>

### <a name="xml-document-handle-idoc"></a><span data-ttu-id="2f4ad-145">XML-Dokumenthandle (idoc)</span><span class="sxs-lookup"><span data-stu-id="2f4ad-145">XML Document Handle (idoc)</span></span>
 <span data-ttu-id="2f4ad-146">Das Dokument Handle wird von der `sp_xml_preparedocument` gespeicherten Prozedur zurückgegeben.</span><span class="sxs-lookup"><span data-stu-id="2f4ad-146">The document handle is returned by the `sp_xml_preparedocument` stored procedure.</span></span>

### <a name="xpath-expression-to-identify-the-nodes-to-be-processed-rowpattern"></a><span data-ttu-id="2f4ad-147">XPath-Ausdruck zur Identifizierung der zu verarbeitenden Knoten (rowpattern)</span><span class="sxs-lookup"><span data-stu-id="2f4ad-147">XPath Expression to Identify the Nodes to Be Processed (rowpattern)</span></span>
 <span data-ttu-id="2f4ad-148">Der als *rowpattern* angegebene XPath-Ausdruck bezeichnet einen Knotensatz im XML-Dokument.</span><span class="sxs-lookup"><span data-stu-id="2f4ad-148">The XPath expression specified as *rowpattern* identifies a set of nodes in the XML document.</span></span> <span data-ttu-id="2f4ad-149">Jeder von *rowpattern* identifizierte Knoten entspricht in dem von OPENXML generierten Rowset einer einzelnen Zeile.</span><span class="sxs-lookup"><span data-stu-id="2f4ad-149">Each node that is identified by *rowpattern* corresponds to a single row in the rowset that is generated by OPENXML.</span></span>

 <span data-ttu-id="2f4ad-150">Bei den durch den XPath-Ausdruck identifizierten Knoten kann es sich um jeden im XML-Dokument enthaltenen Knoten handeln.</span><span class="sxs-lookup"><span data-stu-id="2f4ad-150">The nodes identified by the XPath expression can be any XML node in the XML document.</span></span> <span data-ttu-id="2f4ad-151">Wenn *rowpattern* eine Reihe von Elementen im XML-Dokument identifiziert, wird für jeden identifizierten Elementknoten eine Zeile im Rowset erstellt.</span><span class="sxs-lookup"><span data-stu-id="2f4ad-151">If *rowpattern* identifies a set of elements in the XML document, there is one row in the rowset for each element node identified.</span></span> <span data-ttu-id="2f4ad-152">Wenn z. B. *rowpattern* mit einem Attribut endet, wird für jeden von *rowpattern*ausgewählten Attributknoten eine Zeile erstellt.</span><span class="sxs-lookup"><span data-stu-id="2f4ad-152">For example, if *rowpattern* ends in an attribute, a row is created for each attribute node selected by *rowpattern*.</span></span>

### <a name="description-of-the-rowset-to-be-generated"></a><span data-ttu-id="2f4ad-153">Beschreibung des zu generierenden Rowsets</span><span class="sxs-lookup"><span data-stu-id="2f4ad-153">Description of the Rowset to Be Generated</span></span>
 <span data-ttu-id="2f4ad-154">Zum Generieren des Rowsets verwendet OPENXML ein Rowsetschema.</span><span class="sxs-lookup"><span data-stu-id="2f4ad-154">A rowset schema is used by OPENXML to generate the resulting rowset.</span></span> <span data-ttu-id="2f4ad-155">Ein Rowsetschema kann über die folgenden Optionen angegeben werden.</span><span class="sxs-lookup"><span data-stu-id="2f4ad-155">You can use the following options when specifying a rowset schema.</span></span>

#### <a name="using-the-edge-table-format"></a><span data-ttu-id="2f4ad-156">Verwenden des Rahmentabellenformats</span><span class="sxs-lookup"><span data-stu-id="2f4ad-156">Using the Edge Table Format</span></span>
 <span data-ttu-id="2f4ad-157">Um ein Rowsetschema anzugeben, müssen Sie das Rahmentabellenformat verwenden.</span><span class="sxs-lookup"><span data-stu-id="2f4ad-157">You should use the edge table format to specify a rowset schema.</span></span> <span data-ttu-id="2f4ad-158">Verwenden Sie keine WITH-Klausel.</span><span class="sxs-lookup"><span data-stu-id="2f4ad-158">Do not use the WITH clause.</span></span>

 <span data-ttu-id="2f4ad-159">In diesem Fall gibt OPENXML ein Rowset im Rahmentabellenformat zurück.</span><span class="sxs-lookup"><span data-stu-id="2f4ad-159">When you do this, OPENXML returns a rowset in the edge table format.</span></span> <span data-ttu-id="2f4ad-160">Die Bezeichnung Rahmentabelle geht darauf zurück, dass jeder Rahmen in der analysierten XML-Dokumentstruktur einer Zeile im Rowset zugeordnet wird.</span><span class="sxs-lookup"><span data-stu-id="2f4ad-160">This is referred to as an edge table, because every edge in the parsed XML document tree maps to a row in the rowset.</span></span>

 <span data-ttu-id="2f4ad-161">Rahmentabellen stellen die detaillierte XML-Dokumentstruktur in einer einzigen Tabelle dar.</span><span class="sxs-lookup"><span data-stu-id="2f4ad-161">Edge tables represent within a single table the fine-grained XML document structure.</span></span> <span data-ttu-id="2f4ad-162">Diese Struktur enthält die Element- und Attributnamen, die Dokumenthierarchie, die Namespaces und die Verarbeitungsanweisungen.</span><span class="sxs-lookup"><span data-stu-id="2f4ad-162">This structure includes the element and attribute names, the document hierarchy, the namespaces, and the processing instructions.</span></span> <span data-ttu-id="2f4ad-163">Durch das Rahmentabellenformat erhalten Sie zusätzliche Informationen, die nicht über die Metaeigenschaften offen gelegt werden.</span><span class="sxs-lookup"><span data-stu-id="2f4ad-163">The edge table format allows you to obtain additional information that is not exposed through the metaproperties.</span></span> <span data-ttu-id="2f4ad-164">Weitere Informationen zu Metaeigenschaften finden Sie unter [Specify Metaproperties in OPENXML](../xml/specify-metaproperties-in-openxml.md).</span><span class="sxs-lookup"><span data-stu-id="2f4ad-164">For more information about metaproperties, see [Specify Metaproperties in OPENXML](../xml/specify-metaproperties-in-openxml.md).</span></span>

 <span data-ttu-id="2f4ad-165">Die von Rahmentabellen gebotenen zusätzlichen Informationen ermöglichen Ihnen das Speichern und Abfragen des Datentyps eines Elements oder Attributs, des Knotentyps sowie das Speichern und Abfragen von Informationen zur Struktur von XML-Dokumenten.</span><span class="sxs-lookup"><span data-stu-id="2f4ad-165">The additional information provided by an edge table allows you to store and query the data type of an element and attribute, and the node type, and also store and query information about the XML document structure.</span></span> <span data-ttu-id="2f4ad-166">Die zusätzlichen Informationen ermöglichen außerdem das Erstellen eines eigenen XML-Dokumentmanagementsystems.</span><span class="sxs-lookup"><span data-stu-id="2f4ad-166">With this additional information, it may also be possible to build your own XML document management system.</span></span>

 <span data-ttu-id="2f4ad-167">Mithilfe einer Rahmentabelle können Sie gespeicherte Prozeduren schreiben, die XML-Dokumente als BLOB-Eingabe (Binary Large OBject) verwenden, die Rahmentabelle ausgeben und dann das Dokument auf einer detaillierteren Ebene extrahieren und analysieren.</span><span class="sxs-lookup"><span data-stu-id="2f4ad-167">By using an edge table, you can write stored procedures that take XML documents as binary large object (BLOB) input, produce the edge table, and then extract and analyze the document on a more detailed level.</span></span> <span data-ttu-id="2f4ad-168">Diese detaillierte Ebene kann die Dokumenthierarchie, die Element- und Attributnamen, die Namespaces und die Verarbeitungsanweisungen enthalten.</span><span class="sxs-lookup"><span data-stu-id="2f4ad-168">This detailed level could include finding the document hierarchy, the element and attribute names, the namespaces, and the processing instructions.</span></span>

 <span data-ttu-id="2f4ad-169">Die Rahmentabelle kann auch als Speicherformat für XML-Dokumente dienen, wenn keine andere Zuordnung zu relationalen Formaten logisch ist und ein ntext-Feld keine ausreichenden strukturellen Informationen bietet.</span><span class="sxs-lookup"><span data-stu-id="2f4ad-169">The edge table also can serve as a storage format for XML documents when mapping to other relational formats is not logical and an ntext field is not providing enough structural information.</span></span>

 <span data-ttu-id="2f4ad-170">Wenn die Überprüfung des XML-Dokuments mit einem XML-Parser möglich ist, können Sie dieselben Informationen stattdessen auch mit einer Rahmentabelle erhalten.</span><span class="sxs-lookup"><span data-stu-id="2f4ad-170">In situations where you can use an XML parser to examine an XML document, you can use an edge table instead to obtain the same information.</span></span>

 <span data-ttu-id="2f4ad-171">In der folgenden Tabelle wird die Struktur der Rahmentabelle beschrieben.</span><span class="sxs-lookup"><span data-stu-id="2f4ad-171">The following table describes the structure of the edge table.</span></span>

|<span data-ttu-id="2f4ad-172">Spaltenname</span><span class="sxs-lookup"><span data-stu-id="2f4ad-172">Column name</span></span>|<span data-ttu-id="2f4ad-173">Datentyp</span><span class="sxs-lookup"><span data-stu-id="2f4ad-173">Data type</span></span>|<span data-ttu-id="2f4ad-174">BESCHREIBUNG</span><span class="sxs-lookup"><span data-stu-id="2f4ad-174">Description</span></span>|
|-----------------|---------------|-----------------|
|<span data-ttu-id="2f4ad-175">**id**</span><span class="sxs-lookup"><span data-stu-id="2f4ad-175">**id**</span></span>|<span data-ttu-id="2f4ad-176">**bigint**</span><span class="sxs-lookup"><span data-stu-id="2f4ad-176">**bigint**</span></span>|<span data-ttu-id="2f4ad-177">Die eindeutige ID des Dokumentknotens.</span><span class="sxs-lookup"><span data-stu-id="2f4ad-177">Is the unique ID of the document node.</span></span><br /><br /> <span data-ttu-id="2f4ad-178">Das Stammelement weist den ID-Wert 0 auf.</span><span class="sxs-lookup"><span data-stu-id="2f4ad-178">The root element has an ID value of 0.</span></span> <span data-ttu-id="2f4ad-179">Die negativen ID-Werte sind reserviert.</span><span class="sxs-lookup"><span data-stu-id="2f4ad-179">The negative ID values are reserved.</span></span>|
|<span data-ttu-id="2f4ad-180">**parentid**</span><span class="sxs-lookup"><span data-stu-id="2f4ad-180">**parentid**</span></span>|<span data-ttu-id="2f4ad-181">**bigint**</span><span class="sxs-lookup"><span data-stu-id="2f4ad-181">**bigint**</span></span>|<span data-ttu-id="2f4ad-182">Identifiziert das übergeordnete Element des Knotens.</span><span class="sxs-lookup"><span data-stu-id="2f4ad-182">Identifies the parent of the node.</span></span> <span data-ttu-id="2f4ad-183">Bei dem über diese ID identifizierten übergeordneten Objekt muss es sich nicht unbedingt um das übergeordnete Element handeln.</span><span class="sxs-lookup"><span data-stu-id="2f4ad-183">The parent identified by this ID is not necessarily the parent element.</span></span> <span data-ttu-id="2f4ad-184">Dies hängt jedoch vom NodeType des Knotens ab, dessen übergeordnetes Objekt durch diese ID identifiziert wird.</span><span class="sxs-lookup"><span data-stu-id="2f4ad-184">However, this depends on the NodeType of the node whose parent is identified by this ID.</span></span> <span data-ttu-id="2f4ad-185">Wenn es sich bei dem Knoten beispielsweise um einen Textknoten handelt, kann das übergeordnete Objekt ein Attributknoten sein.</span><span class="sxs-lookup"><span data-stu-id="2f4ad-185">For example, if the node is a text node, its parent may be an attribute node.</span></span><br /><br /> <span data-ttu-id="2f4ad-186">Wenn sich der Knoten auf der obersten Ebene im XML-Dokument befindet, ist **ParentID** gleich NULL.</span><span class="sxs-lookup"><span data-stu-id="2f4ad-186">If the node is at the top level in the XML document, its **ParentID** is NULL.</span></span>|
|<span data-ttu-id="2f4ad-187">**node type**</span><span class="sxs-lookup"><span data-stu-id="2f4ad-187">**node type**</span></span>|<span data-ttu-id="2f4ad-188">**int**</span><span class="sxs-lookup"><span data-stu-id="2f4ad-188">**int**</span></span>|<span data-ttu-id="2f4ad-189">Identifiziert den Knotentyp. Eine ganze Zahl, die der Nummer des Knotentyps des XML-Objektmodells (DOM) entspricht.</span><span class="sxs-lookup"><span data-stu-id="2f4ad-189">Identifies the node type and is an integer that corresponds to the XML object model (DOM) node type numbering.</span></span><br /><br /> <span data-ttu-id="2f4ad-190">In dieser Spalte können folgende Werte den Knotentyp angeben:</span><span class="sxs-lookup"><span data-stu-id="2f4ad-190">Following are the values that can appear in this column to indicate the node type:</span></span><br /><br /> <span data-ttu-id="2f4ad-191">**1** = Elementknoten</span><span class="sxs-lookup"><span data-stu-id="2f4ad-191">**1** = Element node</span></span><br /><br /> <span data-ttu-id="2f4ad-192">**2** = Attributknoten</span><span class="sxs-lookup"><span data-stu-id="2f4ad-192">**2** = Attribute node</span></span><br /><br /> <span data-ttu-id="2f4ad-193">**3** = Textknoten</span><span class="sxs-lookup"><span data-stu-id="2f4ad-193">**3** = Text node</span></span><br /><br /> <span data-ttu-id="2f4ad-194">**4** = CDATA-Abschnittsknoten</span><span class="sxs-lookup"><span data-stu-id="2f4ad-194">**4** = CDATA section node</span></span><br /><br /> <span data-ttu-id="2f4ad-195">**5** = Entitätsverweisknoten</span><span class="sxs-lookup"><span data-stu-id="2f4ad-195">**5** = Entity reference node</span></span><br /><br /> <span data-ttu-id="2f4ad-196">**6** = Entitätsknoten</span><span class="sxs-lookup"><span data-stu-id="2f4ad-196">**6** = Entity node</span></span><br /><br /> <span data-ttu-id="2f4ad-197">**7** = Verarbeitungsanweisungsknoten</span><span class="sxs-lookup"><span data-stu-id="2f4ad-197">**7** = Processing instruction node</span></span><br /><br /> <span data-ttu-id="2f4ad-198">**8** = Kommentarknoten</span><span class="sxs-lookup"><span data-stu-id="2f4ad-198">**8** = Comment node</span></span><br /><br /> <span data-ttu-id="2f4ad-199">**9** = Dokumentknoten</span><span class="sxs-lookup"><span data-stu-id="2f4ad-199">**9** = Document node</span></span><br /><br /> <span data-ttu-id="2f4ad-200">**10** = Dokumenttypknoten</span><span class="sxs-lookup"><span data-stu-id="2f4ad-200">**10** = Document Type node</span></span><br /><br /> <span data-ttu-id="2f4ad-201">**11** = Dokumentfragmentknoten</span><span class="sxs-lookup"><span data-stu-id="2f4ad-201">**11** = Document Fragment node</span></span><br /><br /> <span data-ttu-id="2f4ad-202">**12** = Notationsknoten</span><span class="sxs-lookup"><span data-stu-id="2f4ad-202">**12** = Notation node</span></span><br /><br /> <span data-ttu-id="2f4ad-203">Weitere Informationen finden Sie im Microsoft XML (MSXML) SDK im Abschnitt über die nodeType-Eigenschaft.</span><span class="sxs-lookup"><span data-stu-id="2f4ad-203">For more information, see the "nodeType Property" topic in the Microsoft XML (MSXML) SDK.</span></span>|
|<span data-ttu-id="2f4ad-204">**localname**</span><span class="sxs-lookup"><span data-stu-id="2f4ad-204">**localname**</span></span>|<span data-ttu-id="2f4ad-205">**nvarchar(max)**</span><span class="sxs-lookup"><span data-stu-id="2f4ad-205">**nvarchar(max)**</span></span>|<span data-ttu-id="2f4ad-206">Gibt den lokalen Namen des Elements oder Attributs an.</span><span class="sxs-lookup"><span data-stu-id="2f4ad-206">Gives the local name of the element or attribute.</span></span> <span data-ttu-id="2f4ad-207">Ist NULL, wenn das DOM-Objekt keinen Namen hat.</span><span class="sxs-lookup"><span data-stu-id="2f4ad-207">Is NULL if the DOM object does not have a name.</span></span>|
|<span data-ttu-id="2f4ad-208">**Präfix**</span><span class="sxs-lookup"><span data-stu-id="2f4ad-208">**prefix**</span></span>|<span data-ttu-id="2f4ad-209">**nvarchar(max)**</span><span class="sxs-lookup"><span data-stu-id="2f4ad-209">**nvarchar(max)**</span></span>|<span data-ttu-id="2f4ad-210">Das Namespacepräfix des Knotennamens.</span><span class="sxs-lookup"><span data-stu-id="2f4ad-210">Is the namespace prefix of the node name.</span></span>|
|<span data-ttu-id="2f4ad-211">**namespaceuri**</span><span class="sxs-lookup"><span data-stu-id="2f4ad-211">**namespaceuri**</span></span>|<span data-ttu-id="2f4ad-212">**nvarchar(max)**</span><span class="sxs-lookup"><span data-stu-id="2f4ad-212">**nvarchar(max)**</span></span>|<span data-ttu-id="2f4ad-213">Der Namespace-URI (Universal Resource Identifier) des Knotens.</span><span class="sxs-lookup"><span data-stu-id="2f4ad-213">Is the namespace URI of the node.</span></span> <span data-ttu-id="2f4ad-214">Ist der Wert NULL, ist kein Namespace vorhanden.</span><span class="sxs-lookup"><span data-stu-id="2f4ad-214">If the value is NULL, no namespace is present.</span></span>|
|<span data-ttu-id="2f4ad-215">**datatype**</span><span class="sxs-lookup"><span data-stu-id="2f4ad-215">**datatype**</span></span>|<span data-ttu-id="2f4ad-216">**nvarchar(max)**</span><span class="sxs-lookup"><span data-stu-id="2f4ad-216">**nvarchar(max)**</span></span>|<span data-ttu-id="2f4ad-217">Der eigentliche Datentyp der Element- oder Attributzeile, der anderenfalls NULL ist.</span><span class="sxs-lookup"><span data-stu-id="2f4ad-217">Is the actual data type of the element or attribute row and is otherwise NULL.</span></span> <span data-ttu-id="2f4ad-218">Der Datentyp wird aus der Inline-DTD (Document Type Definition) oder aus dem Inlineschema abgeleitet.</span><span class="sxs-lookup"><span data-stu-id="2f4ad-218">The data type is inferred from the inline DTD or from the inline schema.</span></span>|
|<span data-ttu-id="2f4ad-219">**prev**</span><span class="sxs-lookup"><span data-stu-id="2f4ad-219">**prev**</span></span>|<span data-ttu-id="2f4ad-220">**bigint**</span><span class="sxs-lookup"><span data-stu-id="2f4ad-220">**bigint**</span></span>|<span data-ttu-id="2f4ad-221">Die XML-ID des vorhergehenden gleichgeordneten Elements.</span><span class="sxs-lookup"><span data-stu-id="2f4ad-221">Is the XML ID of the previous sibling element.</span></span> <span data-ttu-id="2f4ad-222">Ist NULL, wenn kein direktes vorhergehendes gleichgeordnetes Element vorhanden ist.</span><span class="sxs-lookup"><span data-stu-id="2f4ad-222">Is NULL if there is no direct previous sibling.</span></span>|
|<span data-ttu-id="2f4ad-223">**text**</span><span class="sxs-lookup"><span data-stu-id="2f4ad-223">**text**</span></span>|<span data-ttu-id="2f4ad-224">**ntext**</span><span class="sxs-lookup"><span data-stu-id="2f4ad-224">**ntext**</span></span>|<span data-ttu-id="2f4ad-225">Enthält den Attributwert oder den Elementinhalt als Text.</span><span class="sxs-lookup"><span data-stu-id="2f4ad-225">Contains the attribute value or the element content in text form.</span></span> <span data-ttu-id="2f4ad-226">Oder ist NULL, wenn für den Rahmentabelleneintrag kein Wert benötigt wird.</span><span class="sxs-lookup"><span data-stu-id="2f4ad-226">Or is NULL, if the edge table entry does not need a value.</span></span>|

#### <a name="using-the-with-clause-to-specify-an-existing-table"></a><span data-ttu-id="2f4ad-227">Verwenden der WITH-Klausel, um eine vorhandene Tabelle anzugeben</span><span class="sxs-lookup"><span data-stu-id="2f4ad-227">Using the WITH Clause to Specify an Existing Table</span></span>
 <span data-ttu-id="2f4ad-228">Mit der WITH-Klausel können Sie den Namen einer vorhandenen Tabelle angeben.</span><span class="sxs-lookup"><span data-stu-id="2f4ad-228">You can use the WITH clause to specify the name of an existing table.</span></span> <span data-ttu-id="2f4ad-229">Hierzu geben Sie einfach den Namen einer vorhandenen Tabelle an, deren Schema OPENXML zum Generieren des Rowsets verwenden kann.</span><span class="sxs-lookup"><span data-stu-id="2f4ad-229">To do this, just specify an existing table name whose schema can be used by OPENXML to generate the rowset.</span></span>

#### <a name="using-the-with-clause-to-specify-a-schema"></a><span data-ttu-id="2f4ad-230">Verwenden der WITH-Klausel, um ein Schema anzugeben</span><span class="sxs-lookup"><span data-stu-id="2f4ad-230">Using the WITH Clause to Specify a Schema</span></span>
 <span data-ttu-id="2f4ad-231">Mit der WITH-Klausel können Sie ein vollständiges Schema angeben.</span><span class="sxs-lookup"><span data-stu-id="2f4ad-231">You can use the WITH Clause to specify a complete schema.</span></span> <span data-ttu-id="2f4ad-232">Ein Rowsetschema wird durch Angeben der Spaltennamen, der zugehörigen Datentypen und der Zuordnung zum XML-Dokument angegeben.</span><span class="sxs-lookup"><span data-stu-id="2f4ad-232">In specifying the rowset schema, you specify the column names, their data types, and their mapping to the XML document.</span></span>

 <span data-ttu-id="2f4ad-233">Sie können das Spaltenmuster mithilfe des ColPattern-Parameters in SchemaDeclaration angeben.</span><span class="sxs-lookup"><span data-stu-id="2f4ad-233">You can specify the column pattern by using the ColPattern parameter in the SchemaDeclaration.</span></span> <span data-ttu-id="2f4ad-234">Das angegebene Spaltenmuster wird zur Zuordnung einer Rowsetspalte zum von rowpattern bezeichneten XML-Knoten und zur Bestimmung des Zuordnungstyps verwendet.</span><span class="sxs-lookup"><span data-stu-id="2f4ad-234">The specified column pattern is used to map a rowset column to the XML node that is identified by rowpattern and is also used to determine the type of mapping.</span></span>

 <span data-ttu-id="2f4ad-235">Wenn ColPattern für eine Spalte nicht angegeben ist, wird die Rowsetspalte basierend auf der vom *flags* -Parameter angegebenen Zuordnung dem XML-Knoten mit demselben Namen zugeordnet.</span><span class="sxs-lookup"><span data-stu-id="2f4ad-235">If ColPattern is not specified for a column, the rowset column maps to the XML node with the same name, based on the mapping specified by the *flags* parameter.</span></span> <span data-ttu-id="2f4ad-236">Wenn ColPattern in der WITH-Klausel jedoch als Teil der Schemaspezifikation angegeben ist, wird die im *flags* -Parameter angegebene Zuordnung überschrieben.</span><span class="sxs-lookup"><span data-stu-id="2f4ad-236">However, if ColPattern is specified as part of the schema specification in the WITH clause, it overwrites the mapping that is specified in the *flags* parameter.</span></span>

### <a name="mapping-between-the-rowset-columns-and-the-xml-nodes"></a><span data-ttu-id="2f4ad-237">Die Zuordnung zwischen den Rowsetspalten und den XML-Knoten</span><span class="sxs-lookup"><span data-stu-id="2f4ad-237">Mapping Between the Rowset Columns and the XML Nodes</span></span>
 <span data-ttu-id="2f4ad-238">In der OPENXML-Anweisung können Sie optional den Typ der Zuordnung – wie attributzentriert oder elementzentriert – zwischen den Rowsetspalten und den von *rowpattern*identifizierten XML-Knoten angeben.</span><span class="sxs-lookup"><span data-stu-id="2f4ad-238">In the OPENXML statement, you can optionally specify the type of mapping, such as attribute-centric or element-centric, between the rowset columns and the XML nodes that are identified by the *rowpattern*.</span></span> <span data-ttu-id="2f4ad-239">Diese Information wird bei der Transformation zwischen XML-Knoten und Rowsetspalten verwendet.</span><span class="sxs-lookup"><span data-stu-id="2f4ad-239">This information is used in the transformation between the XML nodes and the rowset columns.</span></span>

 <span data-ttu-id="2f4ad-240">Die Zuordnung kann auf zwei Arten angegeben werden, wobei Sie auch beide angeben können:</span><span class="sxs-lookup"><span data-stu-id="2f4ad-240">You can specify the mapping in two ways, and you can also specify both:</span></span>

-   <span data-ttu-id="2f4ad-241">Mit dem *flags* -Parameter</span><span class="sxs-lookup"><span data-stu-id="2f4ad-241">By using the *flags* parameter</span></span>

     <span data-ttu-id="2f4ad-242">Die vom *flags* -Parameter angegebene Zuordnung geht von einer Namensentsprechung aus, bei der die XML-Knoten den entsprechenden Rowsetspalten mit demselben Namen zugeordnet werden.</span><span class="sxs-lookup"><span data-stu-id="2f4ad-242">The mapping that is specified by the *flags* parameter assumes name correspondence in which the XML nodes map to the corresponding rowset columns with same name.</span></span>

-   <span data-ttu-id="2f4ad-243">Mit dem *ColPattern* -Parameter</span><span class="sxs-lookup"><span data-stu-id="2f4ad-243">By using the *ColPattern* parameter</span></span>

     <span data-ttu-id="2f4ad-244">*ColPattern*, ein XPath-Ausdruck, wird in der WITH-Klausel als Teil von *SchemaDeclaration* angegeben.</span><span class="sxs-lookup"><span data-stu-id="2f4ad-244">*ColPattern*, an XPath expression, is specified as part of *SchemaDeclaration* in the WITH clause.</span></span> <span data-ttu-id="2f4ad-245">Durch die in *ColPattern* angegebene Zuordnung wird die Zuordnung des *flags* -Parameters überschrieben.</span><span class="sxs-lookup"><span data-stu-id="2f4ad-245">The mapping specified in *ColPattern* overwrites the mapping specified by the *flags* parameter.</span></span>

     <span data-ttu-id="2f4ad-246">*ColPattern* kann zur Angabe des Zuordnungstyps – wie attributzentriert oder elementzentriert – verwendet werden, der die vom Parameter *flags*angegebene Standardzuordnung überschreibt oder erweitert.</span><span class="sxs-lookup"><span data-stu-id="2f4ad-246">*ColPattern* can be used to specify the type of mapping, such as attribute-centric or element-centric, that overwrites or enhances the default mapping indicated by the *flags*.</span></span>

     <span data-ttu-id="2f4ad-247">*ColPattern* wird in folgenden Situationen angegeben:</span><span class="sxs-lookup"><span data-stu-id="2f4ad-247">*ColPattern* is specified under the following circumstances:</span></span>

    -   <span data-ttu-id="2f4ad-248">Der Spaltenname im Rowset unterscheidet sich vom Element- oder Attributnamen, dem er zugeordnet ist.</span><span class="sxs-lookup"><span data-stu-id="2f4ad-248">The column name in the rowset is different from the element or attribute name to which it is mapped.</span></span> <span data-ttu-id="2f4ad-249">In diesem Fall wird *ColPattern* zur Identifizierung des XML-Element- und Attributnamens verwendet, dem die Rowsetspalte zugeordnet ist.</span><span class="sxs-lookup"><span data-stu-id="2f4ad-249">In this case, *ColPattern* is used to identify the XML element and attribute name to which the rowset column maps.</span></span>

    -   <span data-ttu-id="2f4ad-250">Der Spalte soll ein Metaeigenschaftsattribut zugeordnet werden.</span><span class="sxs-lookup"><span data-stu-id="2f4ad-250">You want to map a metaproperty attribute to the column.</span></span> <span data-ttu-id="2f4ad-251">In diesem Fall wird *ColPattern* zur Identifizierung der Metaeigenschaft verwendet, der die Rowsetspalte zugeordnet ist.</span><span class="sxs-lookup"><span data-stu-id="2f4ad-251">In this case, *ColPattern* is used to identify the metaproperty to which the rowset column maps.</span></span> <span data-ttu-id="2f4ad-252">Weitere Informationen zur Verwendung von Metaeigenschaften finden Sie unter [Angeben von Metaeigenschaften in OPENXML](../xml/specify-metaproperties-in-openxml.md).</span><span class="sxs-lookup"><span data-stu-id="2f4ad-252">For more information about how to use metaproperties, see [Specify Metaproperties in OPENXML](../xml/specify-metaproperties-in-openxml.md).</span></span>

 <span data-ttu-id="2f4ad-253">Sowohl der *flags* -Parameter als auch der *ColPattern* -Parameter sind optional.</span><span class="sxs-lookup"><span data-stu-id="2f4ad-253">Both the *flags* and *ColPattern* parameters are optional.</span></span> <span data-ttu-id="2f4ad-254">Wenn keine Zuordnung angegeben ist, wird eine attributzentrierte Zuordnung vorgenommen.</span><span class="sxs-lookup"><span data-stu-id="2f4ad-254">If no mapping is specified, attribute-centric mapping is assumed.</span></span> <span data-ttu-id="2f4ad-255">Die attributzentrierte Zuordnung ist der Standardwert des *flags* -Parameters.</span><span class="sxs-lookup"><span data-stu-id="2f4ad-255">Attribute-centric mapping is the default value of the *flags* parameter.</span></span>

#### <a name="attribute-centric-mapping"></a><span data-ttu-id="2f4ad-256">Attributzentrierte Zuordnung</span><span class="sxs-lookup"><span data-stu-id="2f4ad-256">Attribute-centric Mapping</span></span>
 <span data-ttu-id="2f4ad-257">Wenn der *flags* -Parameter in OPENXML auf 1 festgelegt ist (XML_ATTRIBUTES), wird die **attributzentrierte** Zuordnung durchgeführt.</span><span class="sxs-lookup"><span data-stu-id="2f4ad-257">Setting the *flags* parameter in OPENXML to 1 (XML_ATTRIBUTES) specifies **attribute-centric** mapping.</span></span> <span data-ttu-id="2f4ad-258">Wenn *flags* XML_ATTRIBUTES enthält, enthält oder verwendet das verfügbar gemachte Rowset Zeilen, in denen jedes XML-Element als eine Zeile dargestellt ist.</span><span class="sxs-lookup"><span data-stu-id="2f4ad-258">If *flags* contains XML_ ATTRIBUTES, the exposed rowset provides or consumes rows where each XML element is represented as a row.</span></span> <span data-ttu-id="2f4ad-259">Die XML-Attribute werden anhand ihres Namens den Attributen zugeordnet, die in SchemaDeclaration definiert sind, oder die in der WITH-Klausel über Tablename bereitgestellt werden.</span><span class="sxs-lookup"><span data-stu-id="2f4ad-259">The XML attributes are mapped to the attributes that are defined in the SchemaDeclaration or that are provided by the Tablename of the WITH clause, based on name correspondence.</span></span> <span data-ttu-id="2f4ad-260">Die Namensübereinstimmung bedeutet, dass XML-Attribute eines bestimmten Namens in einer Spalte im Rowset mit demselben Namen gespeichert werden.</span><span class="sxs-lookup"><span data-stu-id="2f4ad-260">Name correspondence means that the XML attributes of a particular name are stored in a column in the rowset with the same name.</span></span>

 <span data-ttu-id="2f4ad-261">Wenn sich der Spaltenname vom zugeordneten Attributnamen unterscheidet, muss der *ColPattern* -Parameter angegeben werden.</span><span class="sxs-lookup"><span data-stu-id="2f4ad-261">If the column name is different from the attribute name that it maps to, *ColPattern* must be specified.</span></span>

 <span data-ttu-id="2f4ad-262">Wenn das XML-Attribut über einen Namespacequalifizierer verfügt, muss der Spaltenname im Rowset ebenfalls über einen Qualifizierer verfügen.</span><span class="sxs-lookup"><span data-stu-id="2f4ad-262">If the XML attribute has a namespace qualifier, the column name in the rowset must also have the qualifier.</span></span>

#### <a name="element-centric-mapping"></a><span data-ttu-id="2f4ad-263">Elementzentrierte Zuordnung</span><span class="sxs-lookup"><span data-stu-id="2f4ad-263">Element-centric Mapping</span></span>
 <span data-ttu-id="2f4ad-264">Wenn der *flags* -Parameter in OPENXML auf 2 (XML_ELEMENTS) festgelegt ist, wird die **elementzentrierte** Zuordnung vorgenommen.</span><span class="sxs-lookup"><span data-stu-id="2f4ad-264">Setting the *flags* parameter in OPENXML to 2 (XML_ELEMENTS) specifies **element-centric** mapping.</span></span> <span data-ttu-id="2f4ad-265">Sie ist, abgesehen von den folgenden Unterschieden, mit der **attributzentrierten** Zuordnung vergleichbar:</span><span class="sxs-lookup"><span data-stu-id="2f4ad-265">It is similar to **attribute-centric** mapping, except for the following differences:</span></span>

-   <span data-ttu-id="2f4ad-266">Die Namensübereinstimmung der Zuordnung (z. B. eine Spaltenzuordnung zu einem XML-Element desselben Namens) wählt die nicht komplexen Teilelemente aus, es sei denn, es wurde ein Muster auf Spaltenebene angegeben.</span><span class="sxs-lookup"><span data-stu-id="2f4ad-266">The name correspondence of the mapping example, a column mapping to an XML element with the same name chooses the noncomplex subelements, unless a column-level pattern is specified.</span></span> <span data-ttu-id="2f4ad-267">Wenn das Teilelement komplex ist, weil es weitere Teilelemente enthält, wird die Spalte während des Abfrageprozesses auf NULL festgelegt.</span><span class="sxs-lookup"><span data-stu-id="2f4ad-267">In the retrieval process, if the subelement is complex because it contains additional subelements, the column is set to NULL.</span></span> <span data-ttu-id="2f4ad-268">Attributwerte der Teilelemente werden dann ignoriert.</span><span class="sxs-lookup"><span data-stu-id="2f4ad-268">Attribute values of the subelements are then ignored.</span></span>

-   <span data-ttu-id="2f4ad-269">Wenn mehrere Teilelemente denselben Namen besitzen, wird der erste Knoten zurückgeliefert.</span><span class="sxs-lookup"><span data-stu-id="2f4ad-269">For multiple subelements that have the same name, the first node is returned.</span></span>

## <a name="see-also"></a><span data-ttu-id="2f4ad-270">Weitere Informationen</span><span class="sxs-lookup"><span data-stu-id="2f4ad-270">See Also</span></span>
 <span data-ttu-id="2f4ad-271">[sp_xml_preparedocument &#40;Transact-SQL-&#41;](/sql/relational-databases/system-stored-procedures/sp-xml-preparedocument-transact-sql) [sp_xml_removedocument &#40;&#41;von Transact-SQL](/sql/relational-databases/system-stored-procedures/sp-xml-removedocument-transact-sql) &#40;&#41;&#40;von Transact [-SQL SQL Server](/sql/t-sql/functions/openxml-transact-sql) [&#41;](../xml/xml-data-sql-server.md)</span><span class="sxs-lookup"><span data-stu-id="2f4ad-271">[sp_xml_preparedocument &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-xml-preparedocument-transact-sql) [sp_xml_removedocument &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-xml-removedocument-transact-sql) [OPENXML &#40;Transact-SQL&#41;](/sql/t-sql/functions/openxml-transact-sql) [XML Data &#40;SQL Server&#41;](../xml/xml-data-sql-server.md)</span></span>


