---
title: Neuerstellen von Systemdatenbanken | Microsoft-Dokumentation
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: ''
ms.topic: conceptual
helpviewer_keywords:
- master database [SQL Server], rebuilding
- REBUILDDATABASE parameter
- rebuilding databases, master
- system databases [SQL Server], rebuilding
ms.assetid: af457ecd-523e-4809-9652-bdf2e81bd876
author: stevestein
ms.author: sstein
ms.openlocfilehash: 5f695589fa0fc1b86d4433d36afa1bc6357aabd6
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 08/04/2020
ms.locfileid: "87617096"
---
# <a name="rebuild-system-databases"></a><span data-ttu-id="61e14-102">Neuerstellen von Systemdatenbanken</span><span class="sxs-lookup"><span data-stu-id="61e14-102">Rebuild System Databases</span></span>
  <span data-ttu-id="61e14-103">Systemdatenbanken müssen neu erstellt werden, um Beschädigungen der Systemdatenbanken [master](master-database.md), [model](model-database.md), [msdb](msdb-database.md)oder [resource](resource-database.md) zu beheben oder die Standardsortierung auf Serverebene zu ändern.</span><span class="sxs-lookup"><span data-stu-id="61e14-103">System databases must be rebuilt to fix corruption problems in the [master](master-database.md), [model](model-database.md), [msdb](msdb-database.md), or [resource](resource-database.md) system databases or to modify the default server-level collation.</span></span> <span data-ttu-id="61e14-104">Dieses Thema enthält schrittweise Anweisungen für die Neuerstellung von Systemdatenbanken in [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)].</span><span class="sxs-lookup"><span data-stu-id="61e14-104">This topic provides step-by-step instructions to rebuild system databases in [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)].</span></span>  
  
 <span data-ttu-id="61e14-105">**In diesem Thema**</span><span class="sxs-lookup"><span data-stu-id="61e14-105">**In This Topic**</span></span>  
  
-   <span data-ttu-id="61e14-106">**Vorbereitungen:**</span><span class="sxs-lookup"><span data-stu-id="61e14-106">**Before you begin:**</span></span>  
  
     [<span data-ttu-id="61e14-107">Einschränkungen</span><span class="sxs-lookup"><span data-stu-id="61e14-107">Limitations and Restrictions</span></span>](#Restrictions)  
  
     [<span data-ttu-id="61e14-108">Voraussetzungen</span><span class="sxs-lookup"><span data-stu-id="61e14-108">Prerequisites</span></span>](#Prerequisites)  
  
-   <span data-ttu-id="61e14-109">**Vorgehensweisen:**</span><span class="sxs-lookup"><span data-stu-id="61e14-109">**Procedures:**</span></span>  
  
     [<span data-ttu-id="61e14-110">Neuerstellen von Systemdatenbanken</span><span class="sxs-lookup"><span data-stu-id="61e14-110">Rebuild System Databases</span></span>](#RebuildProcedure)  
  
     [<span data-ttu-id="61e14-111">Neuerstellen der resource-Datenbank</span><span class="sxs-lookup"><span data-stu-id="61e14-111">Rebuild the resource Database</span></span>](#Resource)  
  
     [<span data-ttu-id="61e14-112">Erstellen einer neuen msdb-Datenbank</span><span class="sxs-lookup"><span data-stu-id="61e14-112">Create a New msdb Database</span></span>](#CreateMSDB)  
  
-   <span data-ttu-id="61e14-113">**Nachverfolgung:**</span><span class="sxs-lookup"><span data-stu-id="61e14-113">**Follow Up:**</span></span>  
  
     [<span data-ttu-id="61e14-114">Problembehandlung von Fehlern bei der Neuerstellung</span><span class="sxs-lookup"><span data-stu-id="61e14-114">Troubleshoot Rebuild Errors</span></span>](#Troubleshoot)  
  
##  <a name="before-you-begin"></a><a name="BeforeYouBegin"></a> <span data-ttu-id="61e14-115">Vorbereitungen</span><span class="sxs-lookup"><span data-stu-id="61e14-115">Before You Begin</span></span>  
  
###  <a name="limitations-and-restrictions"></a><a name="Restrictions"></a> <span data-ttu-id="61e14-116">Einschränkungen</span><span class="sxs-lookup"><span data-stu-id="61e14-116">Limitations and Restrictions</span></span>  
 <span data-ttu-id="61e14-117">Bei der Neuerstellung der Systemdatenbanken master, model, msdb und tempdb werden die Datenbanken abgelegt und an ihrem ursprünglichen Speicherort neu erstellt.</span><span class="sxs-lookup"><span data-stu-id="61e14-117">When the master, model, msdb, and tempdb system databases are rebuilt, the databases are dropped and re-created in their original location.</span></span> <span data-ttu-id="61e14-118">Wenn in der REBUILD-Anweisung eine neue Sortierung angegeben wird, werden die Systemdatenbanken unter Verwendung dieser Sortiereinstellung erstellt.</span><span class="sxs-lookup"><span data-stu-id="61e14-118">If a new collation is specified in the rebuild statement, the system databases are created using that collation setting.</span></span> <span data-ttu-id="61e14-119">Alle Benutzeränderungen an diesen Datenbanken gehen verloren.</span><span class="sxs-lookup"><span data-stu-id="61e14-119">Any user modifications to these databases are lost.</span></span> <span data-ttu-id="61e14-120">Beispielsweise kann die master&lt;/ -Datenbank benutzerdefinierte Objekte, die msdb&lt;/ -Datenbank geplante Aufträge und die model&lt;/ -Datenbank Änderungen der Standardeinstellungen für Datenbanken enthalten.</span><span class="sxs-lookup"><span data-stu-id="61e14-120">For example, you may have user-defined objects in the master database, scheduled jobs in msdb, or changes to the default database settings in the model database.</span></span>  
  
###  <a name="prerequisites"></a><a name="Prerequisites"></a> <span data-ttu-id="61e14-121">Voraussetzungen</span><span class="sxs-lookup"><span data-stu-id="61e14-121">Prerequisites</span></span>  
 <span data-ttu-id="61e14-122">Führen Sie die folgenden Aufgaben aus, bevor Sie die Systemdatenbanken neu erstellen, um sicherzustellen, dass Sie die Systemdatenbanken mit ihren aktuellen Einstellungen wiederherstellen können.</span><span class="sxs-lookup"><span data-stu-id="61e14-122">Perform the following tasks before you rebuild the system databases to ensure that you can restore the system databases to their current settings.</span></span>  
  
1.  <span data-ttu-id="61e14-123">Zeichnen Sie alle serverweiten Konfigurationswerte auf.</span><span class="sxs-lookup"><span data-stu-id="61e14-123">Record all server-wide configuration values.</span></span>  
  
    ```  
    SELECT * FROM sys.configurations;  
    ```  
  
2.  <span data-ttu-id="61e14-124">Zeichnen Sie alle auf die [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] -Instanz angewendeten Service Packs und Hotfixes sowie die aktuelle Sortierung auf.</span><span class="sxs-lookup"><span data-stu-id="61e14-124">Record all service packs and hotfixes applied to the instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] and the current collation.</span></span> <span data-ttu-id="61e14-125">Sie müssen diese Updates erneut ausführen, nachdem Sie die Systemdatenbanken neu erstellt haben.</span><span class="sxs-lookup"><span data-stu-id="61e14-125">You must reapply these updates after rebuilding the system databases.</span></span>  
  
    ```  
    SELECT  
    SERVERPROPERTY('ProductVersion ') AS ProductVersion,  
    SERVERPROPERTY('ProductLevel') AS ProductLevel,  
    SERVERPROPERTY('ResourceVersion') AS ResourceVersion,  
    SERVERPROPERTY('ResourceLastUpdateDateTime') AS ResourceLastUpdateDateTime,  
    SERVERPROPERTY('Collation') AS Collation;  
    ```  
  
3.  <span data-ttu-id="61e14-126">Zeichnen Sie den aktuellen Speicherort aller Daten und Protokolldateien für die Systemdatenbanken auf.</span><span class="sxs-lookup"><span data-stu-id="61e14-126">Record the current location of all data and log files for the system databases.</span></span> <span data-ttu-id="61e14-127">Durch die erneute Erstellung der Systemdatenbanken werden alle Systemdatenbanken an ihrem ursprünglichen Speicherort installiert.</span><span class="sxs-lookup"><span data-stu-id="61e14-127">Rebuilding the system databases installs all system databases to their original location.</span></span> <span data-ttu-id="61e14-128">Wenn Sie Systemdatenbank-Daten oder Protokolldateien an einen anderen Speicherort verschoben haben, müssen Sie die Dateien erneut verschieben.</span><span class="sxs-lookup"><span data-stu-id="61e14-128">If you have moved system database data or log files to a different location, you must move the files again.</span></span>  
  
    ```  
    SELECT name, physical_name AS current_file_location  
    FROM sys.master_files  
    WHERE database_id IN (DB_ID('master'), DB_ID('model'), DB_ID('msdb'), DB_ID('tempdb'));  
    ```  
  
4.  <span data-ttu-id="61e14-129">Suchen Sie die aktuelle Sicherung der Datenbanken master, model und msdb.</span><span class="sxs-lookup"><span data-stu-id="61e14-129">Locate the current backup of the master, model, and msdb databases.</span></span>  
  
5.  <span data-ttu-id="61e14-130">Wenn die Instanz von [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] als Replikationsverteiler konfiguriert ist, suchen Sie die aktuelle Sicherung der Verteilungsdatenbank.</span><span class="sxs-lookup"><span data-stu-id="61e14-130">If the instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] is configured as a replication Distributor, locate the current backup of the distribution database.</span></span>  
  
6.  <span data-ttu-id="61e14-131">Stellen Sie sicher, dass Sie die geeigneten Berechtigungen haben, um die Systemdatenbanken neu zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="61e14-131">Ensure you have appropriate permissions to rebuild the system databases.</span></span> <span data-ttu-id="61e14-132">Um diesen Vorgang ausführen zu können, müssen Sie Mitglied der festen Serverrolle `sysadmin` sein.</span><span class="sxs-lookup"><span data-stu-id="61e14-132">To perform this operation, you must be a member of the `sysadmin` fixed server role.</span></span> <span data-ttu-id="61e14-133">Weitere Informationen finden Sie unter [Rollen auf Serverebene](../security/authentication-access/server-level-roles.md).</span><span class="sxs-lookup"><span data-stu-id="61e14-133">For more information, see [Server-Level Roles](../security/authentication-access/server-level-roles.md).</span></span>  
  
7.  <span data-ttu-id="61e14-134">Überprüfen Sie, ob Kopien der Daten und Protokollvorlagendateien der Datenbanken master, model und msdb auf dem lokalen Server vorhanden sind.</span><span class="sxs-lookup"><span data-stu-id="61e14-134">Verify that copies of the master, model, msdb data and log template files exist on the local server.</span></span> <span data-ttu-id="61e14-135">Der Standardspeicherort für die Vorlagendateien ist C:\Programme\Microsoft SQL Server\MSSQL12.MSSQLSERVER\MSSQL\Binn\Vorlagen.</span><span class="sxs-lookup"><span data-stu-id="61e14-135">The default location for the template files is C:\Program Files\Microsoft SQL Server\MSSQL12.MSSQLSERVER\MSSQL\Binn\Templates.</span></span> <span data-ttu-id="61e14-136">Diese Dateien werden während der Neuerstellung verwendet und müssen vorhanden sein, um Setup erfolgreich ausführen zu können.</span><span class="sxs-lookup"><span data-stu-id="61e14-136">These files are used during the rebuild process and must be present for Setup to succeed.</span></span> <span data-ttu-id="61e14-137">Wenn sie fehlen, führen Sie die Reparaturfunktion von Setup aus, oder kopieren Sie die Dateien manuell vom Installationsmedium.</span><span class="sxs-lookup"><span data-stu-id="61e14-137">If they are missing, run the Repair feature of Setup, or manually copy the files from your installation media.</span></span> <span data-ttu-id="61e14-138">Um die Dateien auf dem Installationsmedium zu suchen, navigieren Sie zum entsprechenden Plattformverzeichnis (x86 oder x64) und dann zu setup\sql_engine_core_inst_msi\Pfiles\SqlServr\MSSQL.X\MSSQL\Binn\Vorlagen.</span><span class="sxs-lookup"><span data-stu-id="61e14-138">To locate the files on the installation media, navigate to the appropriate platform directory (x86 or x64) and then navigate to setup\sql_engine_core_inst_msi\Pfiles\SqlServr\MSSQL.X\MSSQL\Binn\Templates.</span></span>  
  
##  <a name="rebuild-system-databases"></a><a name="RebuildProcedure"></a> <span data-ttu-id="61e14-139">Neuerstellen von Systemdatenbanken</span><span class="sxs-lookup"><span data-stu-id="61e14-139">Rebuild System Databases</span></span>  
 <span data-ttu-id="61e14-140">Mit der folgenden Vorgehensweise werden die Systemdatenbanken master, model, msdb und tempdb  neu erstellt.</span><span class="sxs-lookup"><span data-stu-id="61e14-140">The following procedure rebuilds the master, model, msdb, and tempdb system databases.</span></span> <span data-ttu-id="61e14-141">Sie können die Systemdatenbanken, die neu erstellt werden sollen, nicht angeben.</span><span class="sxs-lookup"><span data-stu-id="61e14-141">You cannot specify the system databases to be rebuilt.</span></span> <span data-ttu-id="61e14-142">Für gruppierte Instanzen muss diese Vorgehensweise für den aktiven Knoten ausgeführt werden, und die [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] -Ressource in der entsprechenden Clusteranwendungsgruppe muss zuvor offline geschaltet werden.</span><span class="sxs-lookup"><span data-stu-id="61e14-142">For clustered instances, this procedure must be performed on the active node and the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] resource in the corresponding cluster application group must be taken offline before performing the procedure.</span></span>  
  
 <span data-ttu-id="61e14-143">Durch diese Vorgehensweise wird die Ressourcendatenbank nicht neu erstellt.</span><span class="sxs-lookup"><span data-stu-id="61e14-143">This procedure does not rebuild the resource database.</span></span> <span data-ttu-id="61e14-144">Führen Sie hierzu die Schritte im Abschnitt "Vorgehensweise zum Neuerstellen der resource-Datenbank" weiter unten in diesem Thema aus.</span><span class="sxs-lookup"><span data-stu-id="61e14-144">See the section, "Rebuild the resource Database Procedure" later in this topic.</span></span>  
  
#### <a name="to-rebuild-system-databases-for-an-instance-of-sql-server"></a><span data-ttu-id="61e14-145">So erstellen Sie Systemdatenbanken für eine Instanz von SQL Server neu</span><span class="sxs-lookup"><span data-stu-id="61e14-145">To rebuild system databases for an instance of SQL Server:</span></span>  
  
1.  <span data-ttu-id="61e14-146">Legen Sie das [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] -Installationsmedium in das Laufwerk ein, oder wechseln Sie an einer Eingabeaufforderung zum Speicherort der Datei setup.exe auf dem lokalen Server.</span><span class="sxs-lookup"><span data-stu-id="61e14-146">Insert the [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] installation media into the disk drive, or, from a command prompt, change directories to the location of the setup.exe file on the local server.</span></span> <span data-ttu-id="61e14-147">Der Standardspeicherort auf dem Server ist C:\Programme\Microsoft SQL Server\120\Setup Bootstrap\Release.</span><span class="sxs-lookup"><span data-stu-id="61e14-147">The default location on the server is C:\Program Files\Microsoft SQL Server\120\Setup Bootstrap\Release.</span></span>  
  
2.  <span data-ttu-id="61e14-148">Geben Sie den folgenden Befehl in das Eingabeaufforderungsfenster ein.</span><span class="sxs-lookup"><span data-stu-id="61e14-148">From a command prompt window, enter the following command.</span></span> <span data-ttu-id="61e14-149">Die eckigen Klammern zeigen optionale Parameter an.</span><span class="sxs-lookup"><span data-stu-id="61e14-149">Square brackets are used to indicate optional parameters.</span></span> <span data-ttu-id="61e14-150">Geben Sie den Befehl ohne die eckigen Klammern ein.</span><span class="sxs-lookup"><span data-stu-id="61e14-150">Do not enter the brackets.</span></span> <span data-ttu-id="61e14-151">Wenn Sie Windows als Betriebssystem verwenden und die Benutzerkontensteuerung aktiviert ist, sind für die Ausführung des Setups erhöhte Rechte erforderlich.</span><span class="sxs-lookup"><span data-stu-id="61e14-151">When using a Windows operating system that has User Account Control (UAC) enabled, running Setup requires elevated privileges.</span></span> <span data-ttu-id="61e14-152">Die Eingabeaufforderung muss als Administrator ausgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="61e14-152">The command prompt must be run as Administrator.</span></span>  
  
     `Setup /QUIET /ACTION=REBUILDDATABASE /INSTANCENAME=InstanceName /SQLSYSADMINACCOUNTS=accounts [ /SAPWD= StrongPassword ] [ /SQLCOLLATION=CollationName]`  
  
    |<span data-ttu-id="61e14-153">Parametername</span><span class="sxs-lookup"><span data-stu-id="61e14-153">Parameter name</span></span>|<span data-ttu-id="61e14-154">BESCHREIBUNG</span><span class="sxs-lookup"><span data-stu-id="61e14-154">Description</span></span>|  
    |--------------------|-----------------|  
    |<span data-ttu-id="61e14-155">/QUIET oder /Q</span><span class="sxs-lookup"><span data-stu-id="61e14-155">/QUIET or /Q</span></span>|<span data-ttu-id="61e14-156">Gibt an, dass Setup ohne Benutzeroberfläche ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="61e14-156">Specifies that Setup run without any user interface.</span></span>|  
    |<span data-ttu-id="61e14-157">/ACTION=REBUILDDATABASE</span><span class="sxs-lookup"><span data-stu-id="61e14-157">/ACTION=REBUILDDATABASE</span></span>|<span data-ttu-id="61e14-158">Gibt an, dass die Systemdatenbanken vom Setup neu erstellt werden.</span><span class="sxs-lookup"><span data-stu-id="61e14-158">Specifies that Setup re-create the system databases.</span></span>|  
    |<span data-ttu-id="61e14-159">/INSTANCENAME=*InstanceName*</span><span class="sxs-lookup"><span data-stu-id="61e14-159">/INSTANCENAME=*InstanceName*</span></span>|<span data-ttu-id="61e14-160">Der Name der [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]-Instanz.</span><span class="sxs-lookup"><span data-stu-id="61e14-160">Is the name of the instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="61e14-161">Geben Sie MSSQLSERVER für die Standardinstanz ein.</span><span class="sxs-lookup"><span data-stu-id="61e14-161">For the default instance, enter MSSQLSERVER.</span></span>|  
    |<span data-ttu-id="61e14-162">/SQLSYSADMINACCOUNTS=*accounts*</span><span class="sxs-lookup"><span data-stu-id="61e14-162">/SQLSYSADMINACCOUNTS=*accounts*</span></span>|<span data-ttu-id="61e14-163">Gibt die Windows-Gruppen oder die individuellen Konten an, die der festen Serverrolle `sysadmin` hinzugefügt werden sollen.</span><span class="sxs-lookup"><span data-stu-id="61e14-163">Specifies the Windows groups or individual accounts to add to the `sysadmin` fixed server role.</span></span> <span data-ttu-id="61e14-164">Wenn Sie mehr als ein Konto angeben, trennen Sie die Konten mit einem Leerzeichen.</span><span class="sxs-lookup"><span data-stu-id="61e14-164">When specifying more than one account, separate the accounts with a blank space.</span></span> <span data-ttu-id="61e14-165">Geben Sie z.B. **BUILTIN\Administrators MyDomain\MyUser**ein.</span><span class="sxs-lookup"><span data-stu-id="61e14-165">For example, enter **BUILTIN\Administrators MyDomain\MyUser**.</span></span> <span data-ttu-id="61e14-166">Wenn Sie ein Konto angeben, dessen Name ein Leerzeichen enthält, setzen Sie den Kontonamen in doppelte Anführungszeichen.</span><span class="sxs-lookup"><span data-stu-id="61e14-166">When you are specifying an account that contains a blank space within the account name, enclose the account in double quotation marks.</span></span> <span data-ttu-id="61e14-167">Geben Sie beispielsweise `NT AUTHORITY\SYSTEM` ein.</span><span class="sxs-lookup"><span data-stu-id="61e14-167">For example, enter `NT AUTHORITY\SYSTEM`.</span></span>|  
    |<span data-ttu-id="61e14-168">[ /SAPWD=*StrongPassword* ]</span><span class="sxs-lookup"><span data-stu-id="61e14-168">[ /SAPWD=*StrongPassword* ]</span></span>|<span data-ttu-id="61e14-169">Gibt das Kennwort für das [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] `sa` Konto an.</span><span class="sxs-lookup"><span data-stu-id="61e14-169">Specifies the password for the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] `sa` account.</span></span> <span data-ttu-id="61e14-170">Dieser Parameter ist erforderlich, wenn die Instanz den gemischten Authentifizierungsmodus ([!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] - und Windows-Authentifizierung) verwendet.</span><span class="sxs-lookup"><span data-stu-id="61e14-170">This parameter is required if the instance uses Mixed Authentication ([!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] and Windows Authentication) mode.</span></span><br /><br /> <span data-ttu-id="61e14-171">\*\* \* \* Sicherheits \* Hinweis \* \*\* das `sa` Konto ist ein bekanntes Konto, das [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] häufig von böswilligen Benutzern betroffen ist.</span><span class="sxs-lookup"><span data-stu-id="61e14-171">**\*\* Security Note \*\*** The `sa` account is a well-known [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] account and it is often targeted by malicious users.</span></span> <span data-ttu-id="61e14-172">Es ist sehr wichtig, dass Sie ein sicheres Kennwort für die `sa`-Anmeldung verwenden.</span><span class="sxs-lookup"><span data-stu-id="61e14-172">It is very important that you use a strong password for the `sa` login.</span></span><br /><br /> <span data-ttu-id="61e14-173">Geben Sie diesen Parameter nicht für den Windows-Authentifizierungsmodus an.</span><span class="sxs-lookup"><span data-stu-id="61e14-173">Do not specify this parameter for Windows Authentication mode.</span></span>|  
    |<span data-ttu-id="61e14-174">[ /SQLCOLLATION=*CollationName* ]</span><span class="sxs-lookup"><span data-stu-id="61e14-174">[ /SQLCOLLATION=*CollationName* ]</span></span>|<span data-ttu-id="61e14-175">Gibt eine neue Sortierung auf Serverebene an.</span><span class="sxs-lookup"><span data-stu-id="61e14-175">Specifies a new server-level collation.</span></span> <span data-ttu-id="61e14-176">Dieser Parameter ist optional.</span><span class="sxs-lookup"><span data-stu-id="61e14-176">This parameter is optional.</span></span> <span data-ttu-id="61e14-177">Wenn keine Sortierung angegeben wird, wird die aktuelle Sortierung des Servers verwendet.</span><span class="sxs-lookup"><span data-stu-id="61e14-177">When not specified, the current collation of the server is used.</span></span><br /><br /> <span data-ttu-id="61e14-178">**\*\* Wichtig \*\*** Die Änderung der Sortierung auf Serverebene ändert nicht die Sortierung vorhandener Benutzerdatenbanken.</span><span class="sxs-lookup"><span data-stu-id="61e14-178">**\*\* Important \*\*** Changing the server-level collation does not change the collation of existing user databases.</span></span> <span data-ttu-id="61e14-179">Alle neu erstellten Benutzerdatenbanken verwenden standardmäßig die neue Sortierung.</span><span class="sxs-lookup"><span data-stu-id="61e14-179">All newly created user databases will use the new collation by default.</span></span><br /><br /> <span data-ttu-id="61e14-180">Weitere Informationen finden Sie unter [Festlegen oder Ändern der Serversortierung](../collations/set-or-change-the-server-collation.md).</span><span class="sxs-lookup"><span data-stu-id="61e14-180">For more information, see [Set or Change the Server Collation](../collations/set-or-change-the-server-collation.md).</span></span>|  
  
3.  <span data-ttu-id="61e14-181">Wenn Setup die Neuerstellung der Systemdatenbanken abgeschlossen hat, wechselt es ohne Meldungen zur Eingabeaufforderung zurück.</span><span class="sxs-lookup"><span data-stu-id="61e14-181">When Setup has completed rebuilding the system databases, it returns to the command prompt with no messages.</span></span> <span data-ttu-id="61e14-182">Lesen Sie die Protokolldatei Summary.txt, um zu überprüfen, ob der Prozess erfolgreich abgeschlossen wurde.</span><span class="sxs-lookup"><span data-stu-id="61e14-182">Examine the Summary.txt log file to verify that the process completed successfully.</span></span> <span data-ttu-id="61e14-183">Diese Datei befindet sich unter C:\Programme\Microsoft SQL Server\120\Setup Bootstrap\Logs.</span><span class="sxs-lookup"><span data-stu-id="61e14-183">This file is located at C:\Program Files\Microsoft SQL Server\120\Setup Bootstrap\Logs.</span></span>  
  
## <a name="post-rebuild-tasks"></a><span data-ttu-id="61e14-184">Aufgaben nach der Neuerstellung</span><span class="sxs-lookup"><span data-stu-id="61e14-184">Post-Rebuild Tasks</span></span>  
 <span data-ttu-id="61e14-185">Nach der Neuerstellung der Datenbank müssen Sie möglicherweise die folgenden zusätzlichen Aufgaben ausführen:</span><span class="sxs-lookup"><span data-stu-id="61e14-185">After rebuilding the database you may need to perform the following additional tasks:</span></span>  
  
-   <span data-ttu-id="61e14-186">Stellen Sie die letzten vollständigen Sicherungen der Datenbanken master, model und msdb wieder her.</span><span class="sxs-lookup"><span data-stu-id="61e14-186">Restore your most recent full backups of the master, model, and msdb databases.</span></span> <span data-ttu-id="61e14-187">Weitere Informationen finden Sie unter [Sichern und Wiederherstellen von Systemdatenbanken &#40;SQL Server&#41;](../backup-restore/back-up-and-restore-of-system-databases-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="61e14-187">For more information, see [Back Up and Restore of System Databases &#40;SQL Server&#41;](../backup-restore/back-up-and-restore-of-system-databases-sql-server.md).</span></span>  
  
    > [!IMPORTANT]  
    >  <span data-ttu-id="61e14-188">Wenn Sie die Serversortierung geändert haben, stellen Sie die Systemdatenbanken nicht wieder her.</span><span class="sxs-lookup"><span data-stu-id="61e14-188">If you have changed the server collation, do not restore the system databases.</span></span> <span data-ttu-id="61e14-189">Auf diese Weise wird die neue Sortierung durch die vorherige Sortiereinstellung ersetzt.</span><span class="sxs-lookup"><span data-stu-id="61e14-189">Doing so will replace the new collation with the previous collation setting.</span></span>  
  
     <span data-ttu-id="61e14-190">Wenn keine Sicherung verfügbar ist oder wenn die wiederhergestellte Sicherung nicht aktuell ist, erstellen Sie alle fehlenden Einträge neu.</span><span class="sxs-lookup"><span data-stu-id="61e14-190">If a backup is not available or if the restored backup is not current, re-create any missing entries.</span></span> <span data-ttu-id="61e14-191">Erstellen Sie z.B. alle fehlenden Einträge für die Benutzerdatenbanken, Sicherungsmedien, [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] -Anmeldenamen, Endpunkte usw. neu.</span><span class="sxs-lookup"><span data-stu-id="61e14-191">For example, re-create all missing entries for your user databases, backup devices, [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] logins, end points, and so on.</span></span> <span data-ttu-id="61e14-192">Die beste Möglichkeit zur Neuerstellung der Einträge besteht darin, die ursprünglichen Skripts auszuführen, mit denen sie erstellt wurden.</span><span class="sxs-lookup"><span data-stu-id="61e14-192">The best way to re-create entries is to run the original scripts that created them.</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="61e14-193">Es wird empfohlen, Skripts vor unerlaubtem Zugriff zu schützen. Auf diese Weise können Sie verhindern, dass sie von nicht autorisierten Personen geändert werden.</span><span class="sxs-lookup"><span data-stu-id="61e14-193">We recommend that you secure your scripts to prevent their being altered by unauthorized by individuals.</span></span>  
  
-   <span data-ttu-id="61e14-194">Sie müssen die Verteilungsdatenbank wiederherstellen, wenn die Instanz von [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] als Replikationsverteiler konfiguriert ist.</span><span class="sxs-lookup"><span data-stu-id="61e14-194">If the instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] is configured as a replication Distributor, you must restore the distribution database.</span></span> <span data-ttu-id="61e14-195">Weitere Informationen finden Sie unter [Sichern und Wiederherstellen von replizierten Datenbanken](../replication/administration/back-up-and-restore-replicated-databases.md).</span><span class="sxs-lookup"><span data-stu-id="61e14-195">For more information, see [Back Up and Restore Replicated Databases](../replication/administration/back-up-and-restore-replicated-databases.md).</span></span>  
  
-   <span data-ttu-id="61e14-196">Verschieben Sie die Systemdatenbanken an die Speicherorte, die Sie zuvor aufgezeichnet haben.</span><span class="sxs-lookup"><span data-stu-id="61e14-196">Move the system databases to the locations you recorded previously.</span></span> <span data-ttu-id="61e14-197">Weitere Informationen finden Sie unter [Verschieben von Systemdatenbanken](system-databases.md).</span><span class="sxs-lookup"><span data-stu-id="61e14-197">For more information, see [Move System Databases](system-databases.md).</span></span>  
  
-   <span data-ttu-id="61e14-198">Überprüfen Sie, ob die serverweiten Konfigurationswerte zu den Werten passen, die Sie zuvor aufgezeichnet haben.</span><span class="sxs-lookup"><span data-stu-id="61e14-198">Verify the server-wide configuration values match the values you recorded previously.</span></span>  
  
##  <a name="rebuild-the-resource-database"></a><a name="Resource"></a> <span data-ttu-id="61e14-199">Neuerstellen der resource-Datenbank</span><span class="sxs-lookup"><span data-stu-id="61e14-199">Rebuild the resource Database</span></span>  
 <span data-ttu-id="61e14-200">Mit der folgenden Vorgehensweise wird die Ressourcensystemdatenbank neu erstellt.</span><span class="sxs-lookup"><span data-stu-id="61e14-200">The following procedure rebuilds the resource system database.</span></span> <span data-ttu-id="61e14-201">Wenn Sie die Ressourcendatenbank neu erstellen, gehen alle Service Packs und Hotfixes verloren und müssen daher noch einmal angewendet werden.</span><span class="sxs-lookup"><span data-stu-id="61e14-201">When you rebuild the resource database, all service packs and hot fixes are lost, and therefore must be reapplied.</span></span>  
  
#### <a name="to-rebuild-the-resource-system-database"></a><span data-ttu-id="61e14-202">So erstellen Sie die Systemdatenbank "resource" neu</span><span class="sxs-lookup"><span data-stu-id="61e14-202">To rebuild the resource system database:</span></span>  
  
1.  <span data-ttu-id="61e14-203">Starten Sie von den Installationsmedien das [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] -Setupprogramm (setup.exe).</span><span class="sxs-lookup"><span data-stu-id="61e14-203">Launch the [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] Setup program (setup.exe) from the distribution media.</span></span>  
  
2.  <span data-ttu-id="61e14-204">Klicken Sie im linken Navigationsbereich auf **Wartung**und dann auf **Reparieren**.</span><span class="sxs-lookup"><span data-stu-id="61e14-204">In the left navigation area, click **Maintenance**, and then click **Repair**.</span></span>  
  
3.  <span data-ttu-id="61e14-205">Es werden Unterstützungsregeln für Setup und Dateiroutinen ausgeführt, um sicherzustellen, dass die erforderlichen Komponenten auf dem System installiert sind und dass der Computer den Setupüberprüfungsregeln erfüllt.</span><span class="sxs-lookup"><span data-stu-id="61e14-205">Setup support rule and file routines run to ensure that your system has prerequisites installed and that the computer passes Setup validation rules.</span></span> <span data-ttu-id="61e14-206">Klicken Sie zum Fortsetzen auf **OK** oder auf **Installieren** .</span><span class="sxs-lookup"><span data-stu-id="61e14-206">Click **OK** or **Install** to continue.</span></span>  
  
4.  <span data-ttu-id="61e14-207">Wählen Sie auf der Seite Instanz auswählen die zu reparierende Instanz aus, und klicken Sie dann zum auf **Weiter**, um den Vorgang fortzusetzen.</span><span class="sxs-lookup"><span data-stu-id="61e14-207">On the Select Instance page, select the instance to repair, and then click **Next**.</span></span>  
  
5.  <span data-ttu-id="61e14-208">Die Reparaturregeln werden ausgeführt, um den Vorgang zu überprüfen.</span><span class="sxs-lookup"><span data-stu-id="61e14-208">The repair rules will run to validate the operation.</span></span> <span data-ttu-id="61e14-209">Klicken Sie auf **Weiter**, um den Vorgang fortzusetzen.</span><span class="sxs-lookup"><span data-stu-id="61e14-209">To continue, click **Next**.</span></span>  
  
6.  <span data-ttu-id="61e14-210">Klicken Sie auf der Seite **Bereit zum Reparieren** auf **Reparieren**.</span><span class="sxs-lookup"><span data-stu-id="61e14-210">From the **Ready to Repair** page, click **Repair**.</span></span> <span data-ttu-id="61e14-211">Wenn die Seite Abgeschlossen angezeigt wird, wurde der Vorgang abgeschlossen.</span><span class="sxs-lookup"><span data-stu-id="61e14-211">The Complete page indicates that the operation is finished.</span></span>  
  
##  <a name="create-a-new-msdb-database"></a><a name="CreateMSDB"></a> <span data-ttu-id="61e14-212">Erstellen einer neuen msdb-Datenbank</span><span class="sxs-lookup"><span data-stu-id="61e14-212">Create a New msdb Database</span></span>  
 <span data-ttu-id="61e14-213">Wenn die `msdb` Datenbank beschädigt ist und Sie nicht über eine Sicherung der- `msdb` Datenbank verfügen, können Sie mit `msdb` dem **instmsdb** -Skript eine neue erstellen.</span><span class="sxs-lookup"><span data-stu-id="61e14-213">If the `msdb` database is damaged and you do not have a backup of the `msdb` database, you can create a new `msdb` by using the **instmsdb** script.</span></span>  
  
> [!WARNING]  
>  <span data-ttu-id="61e14-214">Durch das erneute Erstellen der `msdb` Datenbank mit dem **instmsdb** -Skript werden alle in gespeicherten Informationen, wie z. b. `msdb` Aufträge, Warnungen, Operatoren, Wartungspläne, Sicherungs Verlauf, Einstellungen der Richtlinien basierten Verwaltung, Datenbank-E-Mail, Leistungs Data Warehouse usw., vermieden.</span><span class="sxs-lookup"><span data-stu-id="61e14-214">Rebuilding the `msdb` database using the **instmsdb** script will eliminate all the information stored in `msdb` such as jobs, alert, operators, maintenance plans, backup history, Policy-Based Management settings, Database Mail, Performance Data Warehouse, etc.</span></span>  
  
1.  <span data-ttu-id="61e14-215">Beenden Sie alle Dienste, die mit [!INCLUDE[ssDE](../../includes/ssde-md.md)]verbunden sind, einschließlich dem [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] -Agent, [!INCLUDE[ssRS](../../includes/ssrs.md)], [!INCLUDE[ssIS](../../includes/ssis-md.md)]und allen Anwendungen, die [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] als Datenspeicher verwenden.</span><span class="sxs-lookup"><span data-stu-id="61e14-215">Stop all services connecting to the [!INCLUDE[ssDE](../../includes/ssde-md.md)], including [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent, [!INCLUDE[ssRS](../../includes/ssrs.md)], [!INCLUDE[ssIS](../../includes/ssis-md.md)], and all applications using [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] as data store.</span></span>  
  
2.  <span data-ttu-id="61e14-216">Starten Sie [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] über die Befehlszeile mit dem Befehl: `NET START MSSQLSERVER /T3608`</span><span class="sxs-lookup"><span data-stu-id="61e14-216">Start [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] from the command line using the command: `NET START MSSQLSERVER /T3608`</span></span>  
  
     <span data-ttu-id="61e14-217">Weitere Informationen finden Sie unter [Starten, Beenden, Anhalten, Fortsetzen und Neustarten von SQL Server-Diensten](../../database-engine/configure-windows/start-stop-pause-resume-restart-sql-server-services.md).</span><span class="sxs-lookup"><span data-stu-id="61e14-217">For more information, see [Start, Stop, Pause, Resume, Restart the Database Engine, SQL Server Agent, or SQL Server Browser Service](../../database-engine/configure-windows/start-stop-pause-resume-restart-sql-server-services.md).</span></span>  
  
3.  <span data-ttu-id="61e14-218">Trennen Sie die Datenbank in einem anderen Befehlszeilenfenster `msdb` , indem Sie den folgenden Befehl ausführen und *\<servername>* dabei durch die Instanz von ersetzen [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] :`SQLCMD -E -S<servername> -dmaster -Q"EXEC sp_detach_db msdb"`</span><span class="sxs-lookup"><span data-stu-id="61e14-218">In another command line window, detach the `msdb` database by executing the following command, replacing *\<servername>* with the instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]: `SQLCMD -E -S<servername> -dmaster -Q"EXEC sp_detach_db msdb"`</span></span>  
  
4.  <span data-ttu-id="61e14-219">Benennen Sie die Datenbankdateien mithilfe von Windows-Explorer um `msdb` .</span><span class="sxs-lookup"><span data-stu-id="61e14-219">Using the Windows Explorer, rename the `msdb` database files.</span></span> <span data-ttu-id="61e14-220">Diese befinden sich standardmäßig im Unterordner DATA der [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] -Instanz.</span><span class="sxs-lookup"><span data-stu-id="61e14-220">By default these are in the DATA sub-folder for the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] instance.</span></span>  
  
5.  <span data-ttu-id="61e14-221">Verwenden Sie den [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] -Konfigurations-Manager zum Beenden und erneuten Starten des [!INCLUDE[ssDE](../../includes/ssde-md.md)] -Diensts.</span><span class="sxs-lookup"><span data-stu-id="61e14-221">Using [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Configuration Manager, stop and restart the [!INCLUDE[ssDE](../../includes/ssde-md.md)] service normally.</span></span>  
  
6.  <span data-ttu-id="61e14-222">Stellen Sie in einem Befehlszeilenfenster eine Verbindung mit [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] her, und führen Sie folgenden Befehl aus: `SQLCMD -E -S<servername> -i"C:\Program Files\Microsoft SQL Server\MSSQL12.MSSQLSERVER\MSSQL\Install\instmsdb.sql" -o" C:\Program Files\Microsoft SQL Server\MSSQL12.MSSQLSERVER\MSSQL\Install\instmsdb.out"`</span><span class="sxs-lookup"><span data-stu-id="61e14-222">In a command line window, connect to [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] and execute the command: `SQLCMD -E -S<servername> -i"C:\Program Files\Microsoft SQL Server\MSSQL12.MSSQLSERVER\MSSQL\Install\instmsdb.sql" -o" C:\Program Files\Microsoft SQL Server\MSSQL12.MSSQLSERVER\MSSQL\Install\instmsdb.out"`</span></span>  
  
     <span data-ttu-id="61e14-223">Ersetzen Sie *\<servername>* durch die Instanz von [!INCLUDE[ssDE](../../includes/ssde-md.md)].</span><span class="sxs-lookup"><span data-stu-id="61e14-223">Replace *\<servername>* with the instance of the [!INCLUDE[ssDE](../../includes/ssde-md.md)].</span></span> <span data-ttu-id="61e14-224">Verwenden Sie den Dateisystempfad der [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]-Instanz.</span><span class="sxs-lookup"><span data-stu-id="61e14-224">Use the file system path of the instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span>  
  
7.  <span data-ttu-id="61e14-225">Öffnen Sie die Datei **instmsdb.out** im Windows-Editor, und prüfen Sie, ob die Ausgabe fehlerfrei ist.</span><span class="sxs-lookup"><span data-stu-id="61e14-225">Using the Windows Notepad, open the **instmsdb.out** file and check the output for any errors.</span></span>  
  
8.  <span data-ttu-id="61e14-226">Wenden Sie alle installierten Service Packs und Hotfixes auf die Instanz an.</span><span class="sxs-lookup"><span data-stu-id="61e14-226">Re-apply any service packs or hotfix installed on the instance.</span></span>  
  
9. <span data-ttu-id="61e14-227">Erstellen Sie den in der Datenbank gespeicherten Benutzer Inhalt `msdb` , z. b. Aufträge, Warnungen usw. neu.</span><span class="sxs-lookup"><span data-stu-id="61e14-227">Recreate the user content stored in the `msdb` database, such as jobs, alert, etc.</span></span>  
  
10. <span data-ttu-id="61e14-228">Sichern Sie die `msdb` -Datenbank.</span><span class="sxs-lookup"><span data-stu-id="61e14-228">Backup the `msdb` database.</span></span>  
  
##  <a name="troubleshoot-rebuild-errors"></a><a name="Troubleshoot"></a> <span data-ttu-id="61e14-229">Problembehandlung von Fehlern bei der Neuerstellung</span><span class="sxs-lookup"><span data-stu-id="61e14-229">Troubleshoot Rebuild Errors</span></span>  
 <span data-ttu-id="61e14-230">Syntaxfehler und andere Laufzeitfehler werden im Eingabeaufforderungsfenster angezeigt.</span><span class="sxs-lookup"><span data-stu-id="61e14-230">Syntax and other run-time errors are displayed in the command prompt window.</span></span> <span data-ttu-id="61e14-231">Überprüfen Sie die SETUP-Anweisung auf folgende Syntaxfehler:</span><span class="sxs-lookup"><span data-stu-id="61e14-231">Examine the Setup statement for the following syntax errors:</span></span>  
  
-   <span data-ttu-id="61e14-232">Fehlender Schrägstrich (/) vor jedem Parameternamen</span><span class="sxs-lookup"><span data-stu-id="61e14-232">Missing slash mark (/) in front of each parameter name.</span></span>  
  
-   <span data-ttu-id="61e14-233">Fehlendes Gleichheitszeichen (=) zwischen dem Parameternamen und dem Parameterwert</span><span class="sxs-lookup"><span data-stu-id="61e14-233">Missing equal sign (=) between the parameter name and the parameter value.</span></span>  
  
-   <span data-ttu-id="61e14-234">Leerzeichen zwischen dem Parameternamen und dem Gleichheitszeichen</span><span class="sxs-lookup"><span data-stu-id="61e14-234">Presence of blank spaces between the parameter name and the equal sign.</span></span>  
  
-   <span data-ttu-id="61e14-235">Kommas (,) oder andere Zeichen, die nicht in der Syntax angegeben sind.</span><span class="sxs-lookup"><span data-stu-id="61e14-235">Presence of commas (,) or other characters that are not specified in the syntax.</span></span>  
  
 <span data-ttu-id="61e14-236">Wenn der Neuerstellungsvorgang abgeschlossen ist, überprüfen Sie die [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] -Protokolle auf Fehler.</span><span class="sxs-lookup"><span data-stu-id="61e14-236">After the rebuild operation is complete, examine the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] logs for any errors.</span></span> <span data-ttu-id="61e14-237">Der Standardprotokollspeicherort ist C:\Programme\Microsoft SQL Server\120\Setup Bootstrap\Protokolle.</span><span class="sxs-lookup"><span data-stu-id="61e14-237">The default log location is C:\Program Files\Microsoft SQL Server\120\Setup Bootstrap\Logs.</span></span> <span data-ttu-id="61e14-238">Um die Protokolldatei zu suchen, die die Ergebnisse des Neuerstellungsprozesses enthält, wechseln Sie über eine Eingabeaufforderung zum Ordner Protokolle, und führen Sie dann `findstr /s RebuildDatabase summary*.*`aus.</span><span class="sxs-lookup"><span data-stu-id="61e14-238">To locate the log file that contains the results of the rebuild process, change directories to the Logs folder from a command prompt, and then run `findstr /s RebuildDatabase summary*.*`.</span></span> <span data-ttu-id="61e14-239">Diese Suche führt Sie zu den Protokolldateien, die die Ergebnisse der Neuerstellung der Systemdatenbanken enthalten.</span><span class="sxs-lookup"><span data-stu-id="61e14-239">This search will point you to any log files that contain the results of rebuilding system databases.</span></span> <span data-ttu-id="61e14-240">Öffnen Sie die Protokolldateien, und untersuchen Sie sie auf relevante Fehlermeldungen.</span><span class="sxs-lookup"><span data-stu-id="61e14-240">Open the log files and examine them for relevant error messages.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="61e14-241">Weitere Informationen</span><span class="sxs-lookup"><span data-stu-id="61e14-241">See Also</span></span>  
 [<span data-ttu-id="61e14-242">Systemdatenbanken</span><span class="sxs-lookup"><span data-stu-id="61e14-242">System Databases</span></span>](system-databases.md)  
  
  
