---
title: Anfügen und Trennen von Datenbanken (SQL Server) | Microsoft-Dokumentation
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: backup-restore
ms.topic: conceptual
helpviewer_keywords:
- upgrading databases
- databases [SQL Server], detaching
- detach database [SQL Server]
- databases [SQL Server], attaching
- removing databases
- transaction logs [SQL Server], detaching
- databases [SQL Server], removing
- restoring [SQL Server], attached databases
- transaction logs [SQL Server], attaching
- differential backups, after detaching
- moving databases
- attach database [SQL Server]
- detaching databases [SQL Server]
- differential base [SQL Server]
- attaching databases [SQL Server]
- databases [SQL Server], moving
ms.assetid: d0de0639-bc54-464e-98b1-6af22a27eb86
author: stevestein
ms.author: sstein
ms.openlocfilehash: 54eeeec995e390b71ce8871b680c26138fc88783
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 08/04/2020
ms.locfileid: "87617116"
---
# <a name="database-detach-and-attach-sql-server"></a><span data-ttu-id="4f7d2-102">Anfügen und Trennen von Datenbanken (SQL Server)</span><span class="sxs-lookup"><span data-stu-id="4f7d2-102">Database Detach and Attach (SQL Server)</span></span>
  <span data-ttu-id="4f7d2-103">Die Daten- und Transaktionsprotokolldateien einer Datenbank können getrennt und anschließend an dieselbe oder eine andere Instanz von [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]angefügt werden.</span><span class="sxs-lookup"><span data-stu-id="4f7d2-103">The data and transaction log files of a database can be detached and then reattached to the same or another instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="4f7d2-104">Das Trennen und Anfügen einer Datenbank ist hilfreich, wenn Sie die Datenbank in eine andere Instanz von [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] auf demselben Computer ändern oder wenn Sie die Datenbank verschieben möchten.</span><span class="sxs-lookup"><span data-stu-id="4f7d2-104">Detaching and attaching a database is useful if you want to change the database to a different instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] on the same computer or to move the database.</span></span>  
  
 <span data-ttu-id="4f7d2-105">Das [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]-Speicherformat für Datenträger stimmt in 64-Bit- und in 32-Bit-Umgebungen überein.</span><span class="sxs-lookup"><span data-stu-id="4f7d2-105">The [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] on-disk storage format is the same in the 64-bit and 32-bit environments.</span></span> <span data-ttu-id="4f7d2-106">Daher können Anfügevorgänge für 32-Bit- und 64-Bit-Umgebungen übergreifend ausgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="4f7d2-106">Therefore, attach works across 32-bit and 64-bit environments.</span></span>  <span data-ttu-id="4f7d2-107">Eine Datenbank, die von einer in der einen Umgebung ausgeführten Serverinstanz getrennt wird, kann an eine Serverinstanz angefügt werden, die in einer anderen Umgebung ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="4f7d2-107">A database detached from a server instance running in one environment can be attached on a server instance that runs in another environment.</span></span>  
  
  
  
##  <a name="security"></a><a name="Security"></a> <span data-ttu-id="4f7d2-108">Sicherheit</span><span class="sxs-lookup"><span data-stu-id="4f7d2-108">Security</span></span>  
 <span data-ttu-id="4f7d2-109">Dateizugriffsberechtigungen werden während einer Reihe von Datenbankvorgängen festgelegt, einschließlich des Trennens oder Anfügens einer Datenbank.</span><span class="sxs-lookup"><span data-stu-id="4f7d2-109">File access permissions are set during a number of database operations, including detaching or attaching a database.</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="4f7d2-110">Das Anfügen oder Wiederherstellen von Datenbanken aus unbekannten oder nicht vertrauenswürdigen Quellen wird nicht empfohlen.</span><span class="sxs-lookup"><span data-stu-id="4f7d2-110">We recommend that you do not attach or restore databases from unknown or untrusted sources.</span></span> <span data-ttu-id="4f7d2-111">Solche Datenbanken können bösartigen Code enthalten, der möglicherweise unbeabsichtigten [!INCLUDE[tsql](../../includes/tsql-md.md)] -Code ausführt oder Fehler verursacht, indem er das Schema oder die physische Datenbankstruktur ändert.</span><span class="sxs-lookup"><span data-stu-id="4f7d2-111">Such databases could contain malicious code that might execute unintended [!INCLUDE[tsql](../../includes/tsql-md.md)] code or cause errors by modifying the schema or the physical database structure.</span></span> <span data-ttu-id="4f7d2-112">Bevor Sie eine Datenbank aus einer unbekannten oder nicht vertrauenswürdigen Quelle verwenden, führen Sie auf einem Nichtproduktionsserver [DBCC CHECKDB](/sql/t-sql/database-console-commands/dbcc-checkdb-transact-sql) für die Datenbank aus. Überprüfen Sie außerdem den Code in der Datenbank, z.B. gespeicherte Prozeduren oder anderen benutzerdefinierten Code.</span><span class="sxs-lookup"><span data-stu-id="4f7d2-112">Before you use a database from an unknown or untrusted source, run [DBCC CHECKDB](/sql/t-sql/database-console-commands/dbcc-checkdb-transact-sql) on the database on a nonproduction server and also examine the code, such as stored procedures or other user-defined code, in the database.</span></span>  
  
##  <a name="detaching-a-database"></a><a name="DetachDb"></a> <span data-ttu-id="4f7d2-113">Trennen einer Datenbank</span><span class="sxs-lookup"><span data-stu-id="4f7d2-113">Detaching a Database</span></span>  
 <span data-ttu-id="4f7d2-114">Durch das Trennen einer Datenbank wird diese aus der Instanz von [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] entfernt. Die Datenbank selbst bleibt jedoch innerhalb der Daten- und Transaktionsprotokolldateien intakt.</span><span class="sxs-lookup"><span data-stu-id="4f7d2-114">Detaching a database removes it from the instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] but leaves the database intact within its data files and transaction log files.</span></span> <span data-ttu-id="4f7d2-115">Diese Dateien können anschließend verwendet werden, um die Datenbank einer beliebigen Instanz von [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]anzufügen. Darin eingeschlossen ist der Server, von dem die Datenbank ursprünglich getrennt wurde.</span><span class="sxs-lookup"><span data-stu-id="4f7d2-115">These files can then be used to attach the database to any instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], including the server from which the database was detached.</span></span>  
  
 <span data-ttu-id="4f7d2-116">Eine Datenbank kann in folgenden Fällen nicht getrennt werden:</span><span class="sxs-lookup"><span data-stu-id="4f7d2-116">You cannot detach a database if any of the following are true:</span></span>  
  
-   <span data-ttu-id="4f7d2-117">Die Datenbank ist repliziert und veröffentlicht.</span><span class="sxs-lookup"><span data-stu-id="4f7d2-117">The database is replicated and published.</span></span> <span data-ttu-id="4f7d2-118">Wenn die Datenbank repliziert ist, muss deren Veröffentlichung aufgehoben werden.</span><span class="sxs-lookup"><span data-stu-id="4f7d2-118">If replicated, the database must be unpublished.</span></span> <span data-ttu-id="4f7d2-119">Bevor Sie die Datenbank trennen können, müssen Sie die Veröffentlichung deaktivieren, indem Sie [sp_replicationdboption](/sql/relational-databases/system-stored-procedures/sp-replicationdboption-transact-sql)ausführen.</span><span class="sxs-lookup"><span data-stu-id="4f7d2-119">Before you can detach it, you must disable publishing by running [sp_replicationdboption](/sql/relational-databases/system-stored-procedures/sp-replicationdboption-transact-sql).</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="4f7d2-120">Wenn Sie **sp_replicationdboption**nicht verwenden können, können Sie die Replikation durch Ausführen von [sp_removedbreplication](/sql/relational-databases/system-stored-procedures/sp-removedbreplication-transact-sql)entfernen.</span><span class="sxs-lookup"><span data-stu-id="4f7d2-120">If you cannot use **sp_replicationdboption**, you can remove replication by running [sp_removedbreplication](/sql/relational-databases/system-stored-procedures/sp-removedbreplication-transact-sql).</span></span>  
  
-   <span data-ttu-id="4f7d2-121">Eine Datenbankmomentaufnahme ist in der Datenbank vorhanden.</span><span class="sxs-lookup"><span data-stu-id="4f7d2-121">A database snapshot exists on the database.</span></span>  
  
     <span data-ttu-id="4f7d2-122">Bevor Sie die Datenbank trennen können, müssen Sie alle Momentaufnahmen löschen.</span><span class="sxs-lookup"><span data-stu-id="4f7d2-122">Before you can detach the database, you must drop all of its snapshots.</span></span> <span data-ttu-id="4f7d2-123">Weitere Informationen finden Sie unter [Löschen einer Datenbank-Momentaufnahme &#40;Transact-SQL&#41;](drop-a-database-snapshot-transact-sql.md)angefügt werden.</span><span class="sxs-lookup"><span data-stu-id="4f7d2-123">For more information, see [Drop a Database Snapshot &#40;Transact-SQL&#41;](drop-a-database-snapshot-transact-sql.md).</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="4f7d2-124">Eine Datenbankmomentaufnahme kann nicht getrennt oder angefügt werden.</span><span class="sxs-lookup"><span data-stu-id="4f7d2-124">A database snapshot cannot be detached or attached.</span></span>  
  
-   <span data-ttu-id="4f7d2-125">Die Datenbank wird in einer Datenbank-Spiegelungssitzung gespiegelt.</span><span class="sxs-lookup"><span data-stu-id="4f7d2-125">The database is being mirrored in a database mirroring session.</span></span>  
  
     <span data-ttu-id="4f7d2-126">Die Datenbank kann nur getrennt werden, wenn die Sitzung beendet wird.</span><span class="sxs-lookup"><span data-stu-id="4f7d2-126">The database cannot be detached unless the session is terminated.</span></span> <span data-ttu-id="4f7d2-127">Weitere Informationen finden Sie unter [Entfernen der Datenbankspiegelung &#40;SQL Server&#41;](../../database-engine/database-mirroring/database-mirroring-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="4f7d2-127">For more information, see [Removing Database Mirroring &#40;SQL Server&#41;](../../database-engine/database-mirroring/database-mirroring-sql-server.md).</span></span>  
  
-   <span data-ttu-id="4f7d2-128">Die Datenbank ist fehlerverdächtig.</span><span class="sxs-lookup"><span data-stu-id="4f7d2-128">The database is suspect.</span></span> <span data-ttu-id="4f7d2-129">Eine fehlerverdächtige Datenbank kann nicht getrennt werden. Zum Trennen müssen Sie für die Datenbank den Notfallmodus aktivieren.</span><span class="sxs-lookup"><span data-stu-id="4f7d2-129">A suspect database cannot be detached; before you can detach it, you must put it into emergency mode.</span></span> <span data-ttu-id="4f7d2-130">Weitere Informationen zum Aktivieren des Notfallmodus für eine Datenbank finden Sie unter [ALTER DATABASE &#40;Transact-SQL&#41;](/sql/t-sql/statements/alter-database-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="4f7d2-130">For more information about how to put a database into emergency mode, see [ALTER DATABASE &#40;Transact-SQL&#41;](/sql/t-sql/statements/alter-database-transact-sql).</span></span>  
  
-   <span data-ttu-id="4f7d2-131">Die Datenbank ist eine Systemdatenbank.</span><span class="sxs-lookup"><span data-stu-id="4f7d2-131">The database is a system database.</span></span>  
  
### <a name="backup-and-restore-and-detach"></a><span data-ttu-id="4f7d2-132">Sichern, Wiederherstellen und Trennen</span><span class="sxs-lookup"><span data-stu-id="4f7d2-132">Backup and Restore and Detach</span></span>  
 <span data-ttu-id="4f7d2-133">Beim Trennen einer schreibgeschützten Datenbank gehen Informationen zu den differenziellen Basen von differenziellen Sicherungen verloren.</span><span class="sxs-lookup"><span data-stu-id="4f7d2-133">Detaching a read-only database loses information about the differential bases of differential backups.</span></span> <span data-ttu-id="4f7d2-134">Weitere Informationen finden Sie unter [Differenzielle Sicherungen &#40;SQL Server&#41;](../backup-restore/differential-backups-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="4f7d2-134">For more information, see [Differential Backups &#40;SQL Server&#41;](../backup-restore/differential-backups-sql-server.md).</span></span>  
  
### <a name="responding-to-detach-errors"></a><span data-ttu-id="4f7d2-135">Antworten auf Fehler beim Trennen</span><span class="sxs-lookup"><span data-stu-id="4f7d2-135">Responding to Detach Errors</span></span>  
 <span data-ttu-id="4f7d2-136">Fehler beim Trennen einer Datenbank können verhindern, dass die Datenbank ordnungsgemäß geschlossen wird und das Transaktionsprotokoll neu erstellt wird.</span><span class="sxs-lookup"><span data-stu-id="4f7d2-136">Errors produced while detaching a database can prevent the database from closing cleanly and the transaction log from being rebuilt.</span></span> <span data-ttu-id="4f7d2-137">Führen Sie die folgenden Maßnahmen aus, falls eine Fehlermeldung angezeigt wird:</span><span class="sxs-lookup"><span data-stu-id="4f7d2-137">If you receive an error message, perform the following corrective actions:</span></span>  
  
1.  <span data-ttu-id="4f7d2-138">Fügen Sie alle zur Datenbank gehörenden Dateien neu an, nicht nur die primäre Datei.</span><span class="sxs-lookup"><span data-stu-id="4f7d2-138">Reattach all files associated with the database, not just the primary file.</span></span>  
  
2.  <span data-ttu-id="4f7d2-139">Beheben Sie das Problem, das die Fehlermeldung verursacht hat.</span><span class="sxs-lookup"><span data-stu-id="4f7d2-139">Resolve the problem that caused the error message.</span></span>  
  
3.  <span data-ttu-id="4f7d2-140">Trennen Sie die Datenbank erneut.</span><span class="sxs-lookup"><span data-stu-id="4f7d2-140">Detach the database again.</span></span>  
  
##  <a name="attaching-a-database"></a><a name="AttachDb"></a> <span data-ttu-id="4f7d2-141">Anfügen einer Datenbank</span><span class="sxs-lookup"><span data-stu-id="4f7d2-141">Attaching a Database</span></span>  
 <span data-ttu-id="4f7d2-142">Eine kopierte oder getrennte [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] -Datenbank kann angefügt werden.</span><span class="sxs-lookup"><span data-stu-id="4f7d2-142">You can attach a copied or detached [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] database.</span></span> <span data-ttu-id="4f7d2-143">Wenn Sie eine [!INCLUDE[ssVersion2005](../../includes/sscurrent-md.md)] Serverinstanz anfügen, werden die Katalogdateien von Ihrem vorherigen Speicherort aus zusammen mit den anderen Datenbankdateien angefügt, wie in [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="4f7d2-143">When you attach a [!INCLUDE[ssVersion2005](../../includes/sscurrent-md.md)] server instance, the catalog files are attached from their previous location along with the other database files, the same as in [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)].</span></span> <span data-ttu-id="4f7d2-144">Weitere Informationen finden Sie unter [Upgrade der Volltextsuche](../search/upgrade-full-text-search.md).</span><span class="sxs-lookup"><span data-stu-id="4f7d2-144">For more information, see [Upgrade Full-Text Search](../search/upgrade-full-text-search.md).</span></span>  
  
 <span data-ttu-id="4f7d2-145">Wenn Sie eine Datenbank anfügen, müssen alle Datendateien (MDF- und NDF-Dateien) verfügbar sein.</span><span class="sxs-lookup"><span data-stu-id="4f7d2-145">When you attach a database, all data files (MDF and NDF files) must be available.</span></span> <span data-ttu-id="4f7d2-146">Wenn eine Datendatei einen anderen Pfad als beim Erstellen oder beim letzten Anfügen der Datenbank aufweist, müssen Sie den aktuellen Pfad der Datei angeben.</span><span class="sxs-lookup"><span data-stu-id="4f7d2-146">If any data file has a different path from when the database was first created or last attached, you must specify the current path of the file.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="4f7d2-147">Wenn die angefügte primäre Datendatei schreibgeschützt ist, geht [!INCLUDE[ssDE](../../includes/ssde-md.md)] davon aus, dass auch die Datenbank schreibgeschützt ist.</span><span class="sxs-lookup"><span data-stu-id="4f7d2-147">If the primary data file being attached is read-only, the [!INCLUDE[ssDE](../../includes/ssde-md.md)] assumes that the database is read-only.</span></span>  
  
 <span data-ttu-id="4f7d2-148">Wenn eine verschlüsselte Datenbank zum ersten Mal an eine Instanz von angefügt wird [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] , muss der Datenbankbesitzer den Masterschlüssel der Datenbank öffnen, indem er die folgende Anweisung ausführt: Open Master Key entschlüsseln by password = **' *`password`* '**.</span><span class="sxs-lookup"><span data-stu-id="4f7d2-148">When an encrypted database is first attached to an instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], the database owner must open the master key of the database by executing the following statement: OPEN MASTER KEY DECRYPTION BY PASSWORD = **'*`password`*'**.</span></span> <span data-ttu-id="4f7d2-149">Es empfiehlt sich, die automatische Entschlüsselung des Masterschlüssels zu aktivieren, indem folgende Anweisung ausgeführt wird: ALTER MASTER KEY ADD ENCRYPTION BY SERVICE MASTER KEY.</span><span class="sxs-lookup"><span data-stu-id="4f7d2-149">We recommend that you enable automatic decryption of the master key by executing the following statement: ALTER MASTER KEY ADD ENCRYPTION BY SERVICE MASTER KEY.</span></span> <span data-ttu-id="4f7d2-150">Weitere Informationen finden Sie unter [CREATE MASTER KEY &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-master-key-transact-sql) und [ALTER MASTER KEY &#40;Transact-SQL&#41;](/sql/t-sql/statements/alter-master-key-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="4f7d2-150">For more information, see [CREATE MASTER KEY &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-master-key-transact-sql) and [ALTER MASTER KEY &#40;Transact-SQL&#41;](/sql/t-sql/statements/alter-master-key-transact-sql).</span></span>  
  
 <span data-ttu-id="4f7d2-151">Die Anforderungen für das Anfügen von Protokolldateien hängen wie im Folgenden beschrieben teilweise davon ab, ob die Datenbank Lese-/Schreibzugriff aufweist oder schreibgeschützt ist:</span><span class="sxs-lookup"><span data-stu-id="4f7d2-151">The requirement for attaching log files depends partly on whether the database is read-write or read-only, as follows:</span></span>  
  
-   <span data-ttu-id="4f7d2-152">Für eine Datenbank mit Lese-/Schreibzugriff können Sie gewöhnlich eine Protokolldatei in einem neuen Speicherort anfügen.</span><span class="sxs-lookup"><span data-stu-id="4f7d2-152">For a read-write database, you can usually attach a log file in a new location.</span></span> <span data-ttu-id="4f7d2-153">In manchen Fällen sind zum erneuten Anfügen der Datenbank jedoch die vorhandenen Protokolldateien erforderlich.</span><span class="sxs-lookup"><span data-stu-id="4f7d2-153">However, in some cases, reattaching a database requires its existing log files.</span></span> <span data-ttu-id="4f7d2-154">Bewahren Sie daher unbedingt immer alle getrennten Protokolldateien auf, bis die Datenbank erfolgreich ohne sie angefügt wurde.</span><span class="sxs-lookup"><span data-stu-id="4f7d2-154">Therefore, it is important to always keep all the detached log files until the database has been successfully attached without them.</span></span>  
  
     <span data-ttu-id="4f7d2-155">Wenn eine Datenbank mit Lese-/Schreibzugriff eine einzige Protokolldatei aufweist und Sie keinen neuen Speicherort für die Protokolldatei angeben, wird beim Anfügen im alten Speicherort nach der Datei gesucht.</span><span class="sxs-lookup"><span data-stu-id="4f7d2-155">If a read-write database has a single log file and you do not specify a new location for the log file, the attach operation looks in the old location for the file.</span></span> <span data-ttu-id="4f7d2-156">Wenn sie gefunden wird, wird die alte Protokolldatei verwendet, unabhängig davon, ob die Datenbank ordnungsgemäß heruntergefahren wurde.</span><span class="sxs-lookup"><span data-stu-id="4f7d2-156">If it is found, the old log file is used, regardless of whether the database was shut down cleanly.</span></span> <span data-ttu-id="4f7d2-157">Wenn allerdings die alte Protokolldatei nicht gefunden wird und die Datenbank ordnungsgemäß heruntergefahren wurde und keine aktive Protokollkette aufweist, wird beim Anfügen versucht, eine neue Protokolldatei für die Datenbank zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="4f7d2-157">However, if the old log file is not found and if the database was shut down cleanly and has no active log chain, the attach operation attempts to build a new log file for the database.</span></span>  
  
-   <span data-ttu-id="4f7d2-158">Wenn die angefügte primäre Datendatei schreibgeschützt ist, kann den [!INCLUDE[ssDE](../../includes/ssnoversion-md.md)] in der primären Datei gespeicherten Protokoll Speicherort nicht aktualisieren.</span><span class="sxs-lookup"><span data-stu-id="4f7d2-158">If the primary data file being attached is read-only, the [!INCLUDE[ssDE](../../includes/ssnoversion-md.md)] cannot update the log location stored in the primary file.</span></span>  
  
  
  
###  <a name="metadata-changes-on-attaching-a-database"></a><a name="Metadata"></a> <span data-ttu-id="4f7d2-159">Ändern von Metadaten beim Anfügen einer Datenbank</span><span class="sxs-lookup"><span data-stu-id="4f7d2-159">Metadata Changes on Attaching a Database</span></span>  
 <span data-ttu-id="4f7d2-160">Wenn eine schreibgeschützte Datenbank getrennt und dann erneut angefügt wird, gehen die Sicherungsinformationen zur aktuellen differenziellen Basis verloren.</span><span class="sxs-lookup"><span data-stu-id="4f7d2-160">When a read-only database is detached and then reattached, the backup information about the current differential base is lost.</span></span> <span data-ttu-id="4f7d2-161">Bei der *differenziellen Basis* handelt es sich um die letzte vollständige Sicherung aller Daten in der Datenbank oder einer Teilmenge ihrer Dateien oder Dateigruppen.</span><span class="sxs-lookup"><span data-stu-id="4f7d2-161">The *differential base* is the most recent full backup of all the data in the database or in a subset of the files or filegroups of the database.</span></span> <span data-ttu-id="4f7d2-162">Ohne die Basissicherungsinformationen ist die **master** -Datenbank nicht mehr mit der schreibgeschützten Datenbank synchronisiert. Daher können später erstellte differenzielle Sicherungen zu unerwarteten Ergebnissen führen.</span><span class="sxs-lookup"><span data-stu-id="4f7d2-162">Without the base-backup information, the **master** database becomes unsynchronized with the read-only database, so differential backups taken thereafter may provide unexpected results.</span></span> <span data-ttu-id="4f7d2-163">Wenn Sie deshalb differenzielle Sicherungen für eine schreibgeschützte Datenbank verwenden, sollten Sie nach dem erneuten Anfügen der Datenbank eine neue differenzielle Basis einrichten, indem Sie eine vollständige Sicherung erstellen.</span><span class="sxs-lookup"><span data-stu-id="4f7d2-163">Therefore, if you are using differential backups with a read-only database, you should establish a new differential base by taking a full backup after you reattach the database.</span></span> <span data-ttu-id="4f7d2-164">Informationen zum Verwenden von differenziellen Sicherungen finden Sie unter [Differenzielle Sicherungen &#40;SQL Server&#41;](../backup-restore/differential-backups-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="4f7d2-164">For information about differential backups, see [Differential Backups &#40;SQL Server&#41;](../backup-restore/differential-backups-sql-server.md).</span></span>  
  
 <span data-ttu-id="4f7d2-165">Beim Anfügen wird die Datenbank gestartet.</span><span class="sxs-lookup"><span data-stu-id="4f7d2-165">On attach, database startup occurs.</span></span> <span data-ttu-id="4f7d2-166">Im Allgemeinen wird die Datenbank beim Anfügen in genau demselben Status wieder verfügbar gemacht, in dem sie sich unmittelbar vor dem Trennen oder Kopieren befunden hat.</span><span class="sxs-lookup"><span data-stu-id="4f7d2-166">Generally, attaching a database places it in the same state that it was in when it was detached or copied.</span></span> <span data-ttu-id="4f7d2-167">Die datenbankübergreifenden Besitzketten für die Datenbank werden durch Trenn- und Anfügevorgänge jedoch deaktiviert.</span><span class="sxs-lookup"><span data-stu-id="4f7d2-167">However, attach-and-detach operations both disable cross-database ownership chaining for the database.</span></span> <span data-ttu-id="4f7d2-168">Informationen zum Aktivieren der Verkettung finden Sie unter [Datenbankübergreifende Besitzverkettung (Serverkonfigurationsoption)](../../database-engine/configure-windows/cross-db-ownership-chaining-server-configuration-option.md).</span><span class="sxs-lookup"><span data-stu-id="4f7d2-168">For information about how to enable chaining, see [cross db ownership chaining Server Configuration Option](../../database-engine/configure-windows/cross-db-ownership-chaining-server-configuration-option.md).</span></span> <span data-ttu-id="4f7d2-169">Außerdem wird TRUSTWORTHY auf OFF festgelegt, wenn die Datenbank angefügt wird.</span><span class="sxs-lookup"><span data-stu-id="4f7d2-169">Also, TRUSTWORTHY is set to OFF whenever the database is attached.</span></span> <span data-ttu-id="4f7d2-170">Informationen zum Festlegen von TRUSTWORTHY auf ON finden Sie unter [ALTER DATABASE &#40;Transact-SQL&#41;](/sql/t-sql/statements/alter-database-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="4f7d2-170">For information about how to set TRUSTWORTHY to ON, see [ALTER DATABASE &#40;Transact-SQL&#41;](/sql/t-sql/statements/alter-database-transact-sql).</span></span>  
  
### <a name="backup-and-restore-and-attach"></a><span data-ttu-id="4f7d2-171">Sichern, Wiederherstellen und Anfügen</span><span class="sxs-lookup"><span data-stu-id="4f7d2-171">Backup and Restore and Attach</span></span>  
 <span data-ttu-id="4f7d2-172">Eine Datenbank mit Wiederherstellungsdateien kann ebenso wie eine Datenbank, die vollständig oder teilweise offline ist, nicht angefügt werden.</span><span class="sxs-lookup"><span data-stu-id="4f7d2-172">Like any database that is fully or partially offline, a database with restoring files cannot be attached.</span></span> <span data-ttu-id="4f7d2-173">Sie können die Datenbank anfügen, wenn Sie die Wiederherstellungssequenz beenden.</span><span class="sxs-lookup"><span data-stu-id="4f7d2-173">If you stop the restore sequence, you can attach the database.</span></span> <span data-ttu-id="4f7d2-174">Sie können die Wiederherstellungssequenz anschließend erneut starten.</span><span class="sxs-lookup"><span data-stu-id="4f7d2-174">Then, you can restart the restore sequence.</span></span>  
  
###  <a name="attaching-a-database-to-another-server-instance"></a><a name="OtherServerInstance"></a> <span data-ttu-id="4f7d2-175">Anfügen einer Datenbank an eine andere Serverinstanz</span><span class="sxs-lookup"><span data-stu-id="4f7d2-175">Attaching a Database to Another Server Instance</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="4f7d2-176">Eine Datenbank, die in einer neueren Version von [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] erstellt wurde, kann in früheren Versionen nicht angefügt werden.</span><span class="sxs-lookup"><span data-stu-id="4f7d2-176">A database created by a more recent version of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] cannot be attached in earlier versions.</span></span>  
  
 <span data-ttu-id="4f7d2-177">Wenn Sie eine Datenbank an eine andere Serverinstanz anfügen, müssen Sie die Metadaten für die Datenbank, wie Anmeldenamen und Aufträge, auf der anderen Serverinstanz unter Umständen teilweise oder vollständig neu erstellen, um Benutzern und Anwendungen ein konsistentes Verhalten zu bieten.</span><span class="sxs-lookup"><span data-stu-id="4f7d2-177">When you attach a database onto another server instance, to provide a consistent experience to users and applications, you might have to re-create some or all of the metadata for the database, such as logins and jobs, on the other server instance.</span></span> <span data-ttu-id="4f7d2-178">Weitere Informationen finden Sie unter [Verwalten von Metadaten beim Bereitstellen einer Datenbank auf einer anderen Serverinstanz &#40;SQL Server&#41;](manage-metadata-when-making-a-database-available-on-another-server.md).</span><span class="sxs-lookup"><span data-stu-id="4f7d2-178">For more information, see [Manage Metadata When Making a Database Available on Another Server Instance &#40;SQL Server&#41;](manage-metadata-when-making-a-database-available-on-another-server.md).</span></span>  
  
##  <a name="related-tasks"></a><a name="RelatedTasks"></a> <span data-ttu-id="4f7d2-179">Verwandte Aufgaben</span><span class="sxs-lookup"><span data-stu-id="4f7d2-179">Related Tasks</span></span>  
 <span data-ttu-id="4f7d2-180">**So trennen Sie eine Datenbank**</span><span class="sxs-lookup"><span data-stu-id="4f7d2-180">**To detach a database**</span></span>  
  
-   [<span data-ttu-id="4f7d2-181">sp_detach_db &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="4f7d2-181">sp_detach_db &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-stored-procedures/sp-detach-db-transact-sql)  
  
-   [<span data-ttu-id="4f7d2-182">Trennen einer Datenbank</span><span class="sxs-lookup"><span data-stu-id="4f7d2-182">Detach a Database</span></span>](detach-a-database.md)  
  
 <span data-ttu-id="4f7d2-183">**So fügen Sie eine Datenbank an**</span><span class="sxs-lookup"><span data-stu-id="4f7d2-183">**To attach a database**</span></span>  
  
-   [<span data-ttu-id="4f7d2-184">CREATE DATABASE &#40;SQL Server Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="4f7d2-184">CREATE DATABASE &#40;SQL Server Transact-SQL&#41;</span></span>](/sql/t-sql/statements/create-database-sql-server-transact-sql)  
  
-   [<span data-ttu-id="4f7d2-185">Anfügen einer Datenbank</span><span class="sxs-lookup"><span data-stu-id="4f7d2-185">Attach a Database</span></span>](attach-a-database.md)  
  
-   [<span data-ttu-id="4f7d2-186">sp_attach_db &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="4f7d2-186">sp_attach_db &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-stored-procedures/sp-attach-db-transact-sql)  
  
-   [<span data-ttu-id="4f7d2-187">sp_attach_single_file_db &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="4f7d2-187">sp_attach_single_file_db &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-stored-procedures/sp-attach-single-file-db-transact-sql)  
  
 <span data-ttu-id="4f7d2-188">**So aktualisieren Sie eine Datenbank durch Trennen und Anfügen**</span><span class="sxs-lookup"><span data-stu-id="4f7d2-188">**To upgrade a database using detach and attach operations**</span></span>  
  
-   [<span data-ttu-id="4f7d2-189">Aktualisieren einer Datenbank durch Trennen und Anfügen &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="4f7d2-189">Upgrade a Database Using Detach and Attach &#40;Transact-SQL&#41;</span></span>](upgrade-a-database-using-detach-and-attach-transact-sql.md)  
  
 <span data-ttu-id="4f7d2-190">**So verschieben Sie eine Datenbank durch Trennen und Anfügen**</span><span class="sxs-lookup"><span data-stu-id="4f7d2-190">**To move a database using detach and attach operations**</span></span>  
  
-   [<span data-ttu-id="4f7d2-191">Verschieben einer Datenbank durch Trennen und Anfügen &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="4f7d2-191">Move a Database Using Detach and Attach &#40;Transact-SQL&#41;</span></span>](move-a-database-using-detach-and-attach-transact-sql.md)  
  
 <span data-ttu-id="4f7d2-192">**So löschen Sie eine Datenbank-Momentaufnahme**</span><span class="sxs-lookup"><span data-stu-id="4f7d2-192">**To delete a database snapshot**</span></span>  
  
-   [<span data-ttu-id="4f7d2-193">Löschen einer Datenbankmomentaufnahme &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="4f7d2-193">Drop a Database Snapshot &#40;Transact-SQL&#41;</span></span>](drop-a-database-snapshot-transact-sql.md)  
  
## <a name="see-also"></a><span data-ttu-id="4f7d2-194">Weitere Informationen</span><span class="sxs-lookup"><span data-stu-id="4f7d2-194">See Also</span></span>  
 [<span data-ttu-id="4f7d2-195">Datenbankdateien und Dateigruppen</span><span class="sxs-lookup"><span data-stu-id="4f7d2-195">Database Files and Filegroups</span></span>](database-files-and-filegroups.md)  
  
  
