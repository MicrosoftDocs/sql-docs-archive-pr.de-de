---
title: Grundlegendes zu Sicherheitsrichtlinien| Microsoft-Dokumentation
ms.custom: ''
ms.date: 03/06/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: reporting-services
ms.topic: reference
helpviewer_keywords:
- code groups [Reporting Services]
- code access security [Reporting Services], security policies
- Execution permission set
- custom assemblies [Reporting Services], security
- permission sets [Reporting Services]
- expressions [Reporting Services], security
- evidence [Reporting Services]
- FullTrust permission set
- security policies [Reporting Services]
- named permission sets [Reporting Services]
ms.assetid: a9bf043a-139a-4929-9a58-244815323df0
author: maggiesMSFT
ms.author: maggies
manager: kfile
ms.openlocfilehash: e03f2ca7aae75f692ba2c888d1fb6bd3f60fb4a4
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 08/04/2020
ms.locfileid: "87622437"
---
# <a name="understanding-security-policies"></a><span data-ttu-id="13030-102">Grundlegendes zu Sicherheitsrichtlinien</span><span class="sxs-lookup"><span data-stu-id="13030-102">Understanding Security Policies</span></span>
  <span data-ttu-id="13030-103">Jeder Code, der von einem Berichtsserver ausgeführt wird, muss Teil einer bestimmten Codezugriff-Sicherheitsrichtlinie sein.</span><span class="sxs-lookup"><span data-stu-id="13030-103">Any code that is executed by a report server must be part of a specific code access security policy.</span></span> <span data-ttu-id="13030-104">Diese Sicherheitsrichtlinien bestehen aus Codegruppen, die einem Satz von benannten Berechtigungen Beweise zuordnen.</span><span class="sxs-lookup"><span data-stu-id="13030-104">These security policies consist of code groups that map evidence to a set of named permission sets.</span></span> <span data-ttu-id="13030-105">Häufig sind Codegruppen einem benannten Berechtigungssatz zugeordnet, der die zulässigen Berechtigungen für Code in dieser Gruppe angibt.</span><span class="sxs-lookup"><span data-stu-id="13030-105">Often, code groups are associated with a named permission set that specifies the allowable permissions for code in that group.</span></span> <span data-ttu-id="13030-106">Die Laufzeit bestimmt anhand von Beweisen, die von einem vertrauenswürdigen Host oder dem Ladeprogramm bereitgestellt werden, zu welchen Codegruppen der Code gehört und welche Berechtigungen ihm daher zuzuweisen sind.</span><span class="sxs-lookup"><span data-stu-id="13030-106">The runtime uses evidence provided by a trusted host or by the loader to determine which code groups the code belongs to and, therefore, which permissions to grant the code.</span></span> [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] <span data-ttu-id="13030-107">verwendet diese von der [!INCLUDE[msCoName](../../../includes/msconame-md.md)] [!INCLUDE[dnprdnshort](../../../includes/dnprdnshort-md.md)]-Common Language Runtime (CLR) definierte Sicherheitsrichtlinienarchitektur.</span><span class="sxs-lookup"><span data-stu-id="13030-107">adheres to this security policy architecture as defined by the [!INCLUDE[msCoName](../../../includes/msconame-md.md)] [!INCLUDE[dnprdnshort](../../../includes/dnprdnshort-md.md)] common language runtime (CLR).</span></span> <span data-ttu-id="13030-108">In den nachfolgenden Abschnitten werden die verschiedenen Codetypen in [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] sowie die damit verknüpften Richtlinienregeln aufgeführt.</span><span class="sxs-lookup"><span data-stu-id="13030-108">The following sections describe the various types of code in [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] and the policy rules associated with them.</span></span>  
  
## <a name="report-server-assemblies"></a><span data-ttu-id="13030-109">Berichtsserverassemblys</span><span class="sxs-lookup"><span data-stu-id="13030-109">Report Server Assemblies</span></span>  
 <span data-ttu-id="13030-110">Berichtsserverassemblys sind Assemblys mit Code, der zu [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] gehört.</span><span class="sxs-lookup"><span data-stu-id="13030-110">Report server assemblies are those that contain code that is part of the [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] product.</span></span> [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] <span data-ttu-id="13030-111">wurde mit verwalteten Codeassemblys geschrieben. Alle diese Assemblys verfügen über starke Namen (sind digital signiert).</span><span class="sxs-lookup"><span data-stu-id="13030-111">is written using managed code assemblies; all of these assemblies are strong-named (that is, digitally signed).</span></span> <span data-ttu-id="13030-112">Die Codegruppen für diese Assemblys werden mit **StrongNameMembershipCondition** definiert, die Beweise auf der Grundlage des öffentlichen Schlüssels für den starken Namen der Assembly bereitstellen.</span><span class="sxs-lookup"><span data-stu-id="13030-112">The code groups for these assemblies are defined using the **StrongNameMembershipCondition**, which provides evidence based on public key information for the assembly's strong name.</span></span> <span data-ttu-id="13030-113">Der Codegruppe werden die **FullTrust**-Berechtigungen gewährt.</span><span class="sxs-lookup"><span data-stu-id="13030-113">The code group is granted the **FullTrust** permission set.</span></span>  
  
## <a name="report-server-extensions-rendering-data-delivery-and-security"></a><span data-ttu-id="13030-114">Berichtsservererweiterungen (Rendering, Daten, Übermittlung und Sicherheit)</span><span class="sxs-lookup"><span data-stu-id="13030-114">Report Server Extensions (Rendering, Data, Delivery, and Security)</span></span>  
 <span data-ttu-id="13030-115">Berichtsservererweiterungen sind benutzerdefinierte Erweiterungen für Daten, Übermittlung, Rendering und Sicherheit, die Sie selbst oder Drittanbieter zur Erweiterung der Funktionen von [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] erstellen.</span><span class="sxs-lookup"><span data-stu-id="13030-115">Report server extensions are custom data, delivery, rendering, and security extensions that you or other third-parties create in order to extend the functionality of [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)].</span></span> <span data-ttu-id="13030-116">Sie müssen diesen Erweiterungen oder dem Assemblycode in den Richtlinienkonfigurationsdateien, die mit der zu erweiternden [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)]-Komponente verknüpft sind, **FullTrust** gewähren.</span><span class="sxs-lookup"><span data-stu-id="13030-116">You must grant **FullTrust** to these extensions or assembly code in the policy configuration files associated with the [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] component you are extending.</span></span> <span data-ttu-id="13030-117">Erweiterungen, die im Lieferumfang von [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] enthalten sind, sind mit dem öffentlichen Schlüssel des Berichtsservers signiert und erhalten den **FullTrust**-Berechtigungssatz.</span><span class="sxs-lookup"><span data-stu-id="13030-117">Extensions shipped as a part of [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] are signed with the report server public key and receive the **FullTrust** permission set.</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="13030-118">Sie müssen die [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)]-Richtlinienkonfigurationsdateien ändern, um **FullTrust** für Erweiterungen von Drittanbietern zu gewähren.</span><span class="sxs-lookup"><span data-stu-id="13030-118">You must modify the [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] policy configuration files to allow **FullTrust** for any third-party extensions.</span></span> <span data-ttu-id="13030-119">Wenn Sie den benutzerdefinierten Erweiterungen keine Codegruppe mit **FullTrust** hinzufügen, können sie nicht vom Berichtsserver verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="13030-119">If you do not add a code group with **FullTrust** for your custom extensions, they cannot be used by the report server.</span></span>  
  
 <span data-ttu-id="13030-120">Weitere Informationen zu den Richtlinienkonfigurationsdateien in [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] finden Sie unter [Using Reporting Services Security Policy Files (Verwenden von Reporting Services-Sicherheitsrichtliniendateien)](using-reporting-services-security-policy-files.md).</span><span class="sxs-lookup"><span data-stu-id="13030-120">For more information about the policy configuration files in [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)], see [Using Reporting Services Security Policy Files](using-reporting-services-security-policy-files.md).</span></span>  
  
## <a name="expressions-used-in-reports"></a><span data-ttu-id="13030-121">In Berichten verwendete Ausdrücke</span><span class="sxs-lookup"><span data-stu-id="13030-121">Expressions Used in Reports</span></span>  
 <span data-ttu-id="13030-122">Berichtsausdrücke sind Inlinecodeausdrücke oder benutzerdefinierte Methoden im **Code**-Element einer Berichtsdefinitions-Sprachdatei.</span><span class="sxs-lookup"><span data-stu-id="13030-122">Report expressions are inline code expressions or user-defined methods contained within the **Code** element of a report definition language file.</span></span> <span data-ttu-id="13030-123">In den Richtliniendateien ist bereits eine Codegruppe definiert, die diesen Ausdrücken die standardmäßig festgelegte Berechtigung **Execution** gewährt.</span><span class="sxs-lookup"><span data-stu-id="13030-123">There is a code group that is already configured in the policy files that grants these expressions the **Execution** permission set by default.</span></span> <span data-ttu-id="13030-124">Die Codegruppe sieht wie folgt aus:</span><span class="sxs-lookup"><span data-stu-id="13030-124">The code group looks like the following:</span></span>  
  
```  
<CodeGroup  
   class="UnionCodeGroup"  
   version="1"  
   PermissionSetName="Execution"  
   Name="Report_Expressions_Default_Permissions"  
   Description="This code group grants default permissions for code in report expressions and Code element. ">  
    <IMembershipCondition  
       class="StrongNameMembershipCondition"  
       version="1"  
       PublicKeyBlob="002400..."  
    />  
</CodeGroup>  
```  
  
 <span data-ttu-id="13030-125">Die Berechtigung **Execution** lässt zu, dass Code ausgeführt werden kann, wobei jedoch keine geschützten Ressourcen verwendet werden können.</span><span class="sxs-lookup"><span data-stu-id="13030-125">**Execution** permission allows code to run (execute), but not to use protected resources.</span></span> <span data-ttu-id="13030-126">Alle in einem Bericht gefundenen Ausdrücke werden in einer Assembly kompiliert ("Ausdruckshostassembly"), die als Teil des kompilierten Berichts gespeichert wird.</span><span class="sxs-lookup"><span data-stu-id="13030-126">All expressions found within a report are compiled into an assembly (called an "expression host" assembly) that is stored as a part of the compiled report.</span></span> <span data-ttu-id="13030-127">Beim Ausführen des Berichts lädt der Berichtsserver die Ausdruckshostassembly und führt Aufrufe für diese Assembly zum Ausführen von Berechtigungen durch.</span><span class="sxs-lookup"><span data-stu-id="13030-127">When the report is executed, the report server loads the expression host assembly and makes calls into that assembly to execute expressions.</span></span> <span data-ttu-id="13030-128">Ausdruckshostassemblys werden mit einem bestimmten Schlüssel signiert, der zum Definieren der Codegruppe für alle Ausdruckshosts verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="13030-128">Expression host assemblies are signed with a specific key that is used to define the code group for all expression hosts.</span></span>  
  
 <span data-ttu-id="13030-129">Berichtsausdrücke beziehen sich auf Berichtsobjekt-Modellauflistungen (Felder, Parameter usw.) und führen einfache Aufgaben wie arithmetische und Zeichenfolgenoperationen aus.</span><span class="sxs-lookup"><span data-stu-id="13030-129">Report expressions reference report object model collections (fields, parameters, etc.) and perform simple tasks like arithmetic and string operations.</span></span> <span data-ttu-id="13030-130">Code, der diese einfachen Vorgänge ausführt, erfordert nur die Berechtigung **Execution**.</span><span class="sxs-lookup"><span data-stu-id="13030-130">Code that performs these simple operations only requires **Execution** permission.</span></span> <span data-ttu-id="13030-131">Standardmäßig wird benutzerdefinierten Methoden im **Code**-Element und benutzerdefinierten Assemblys in [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] die Berechtigung **Execution** gewährt.</span><span class="sxs-lookup"><span data-stu-id="13030-131">By default, user-defined methods in the **Code** element and any custom assemblies are granted **Execution** permission in [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)].</span></span> <span data-ttu-id="13030-132">Daher muss bei den meisten Ausdrücken die aktuelle Konfiguration nicht in den Sicherheitsrichtliniendateien geändert werden.</span><span class="sxs-lookup"><span data-stu-id="13030-132">Thus, for most expressions, the current configuration does not require that you modify any security policy files.</span></span> <span data-ttu-id="13030-133">Um Ausdruckshostassemblys weitere Berechtigungen gewähren zu können, muss ein Administrator die Riechlinienkonfigurationsdateien des Berichtsservers und des Berichts-Designers anpassen sowie die Berichtsausdruck-Codegruppe ändern.</span><span class="sxs-lookup"><span data-stu-id="13030-133">To grant additional permissions to expression host assemblies, an administrator needs to modify the policy configuration files of the report server and Report Designer, and change the report expressions code group.</span></span> <span data-ttu-id="13030-134">Da es sich um eine globale Einsstellung handelt, wirkt sich eine Änderung der Standardberechtigungen für den Ausdruckshost auf alle Berichte aus.</span><span class="sxs-lookup"><span data-stu-id="13030-134">Because it is a global setting, changing default permissions for the expression hosts affects all reports.</span></span> <span data-ttu-id="13030-135">Aus diesem Grund wird empfohlen, jeglichen Code, der zusätzliche Sicherheit erfordert, in einer benutzerdefinierten Assembly zu speichern.</span><span class="sxs-lookup"><span data-stu-id="13030-135">For this reason, it is highly recommended that you place all code that requires additional security into a custom assembly.</span></span> <span data-ttu-id="13030-136">Nur dieser Assembly werden die benötigten Berechtigungen gewährt.</span><span class="sxs-lookup"><span data-stu-id="13030-136">Only this assembly will be granted the permissions you need.</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="13030-137">Code, der externe Assemblys oder geschützte Ressourcen aufruft, muss zur Verwendung in Berichten in eine benutzerdefinierte Assembly einbezogen werden.</span><span class="sxs-lookup"><span data-stu-id="13030-137">Code that calls external assemblies or protected resources should be incorporated into a custom assembly for use in reports.</span></span> <span data-ttu-id="13030-138">Auf diese Weise können Sie die vom Code angeforderten und durchgesetzten Berechtigungen besser steuern.</span><span class="sxs-lookup"><span data-stu-id="13030-138">Doing so gives you more control over the permissions requested and asserted by your code.</span></span> <span data-ttu-id="13030-139">Es sollten keine Aufrufe von sicheren Methoden im **Code**-Element erfolgen.</span><span class="sxs-lookup"><span data-stu-id="13030-139">You should not make calls to secure methods within the **Code** element.</span></span> <span data-ttu-id="13030-140">Hierzu müssen Sie dem Berichtsausdruckshost **FullTrust** sowie dem gesamten benutzerdefinierten Code Vollzugriff auf die CLR gewähren.</span><span class="sxs-lookup"><span data-stu-id="13030-140">Doing so requires you to grant **FullTrust** to the report expression host and grants all custom code full access to the CLR.</span></span>  
  
> [!CAUTION]  
>  <span data-ttu-id="13030-141">Gewähren Sie der Codegruppe für einen Berichtsausdruckshost keine **FullTrust**-Berechtigung.</span><span class="sxs-lookup"><span data-stu-id="13030-141">Do not grant **FullTrust** to the code group for a report expression host.</span></span> <span data-ttu-id="13030-142">Ansonsten können alle Berichtsausdrücke geschützte Systemaufrufe ausführen.</span><span class="sxs-lookup"><span data-stu-id="13030-142">If you do, you enable all report expressions to make protected system calls.</span></span>  
  
## <a name="custom-assemblies-referenced-in-reports"></a><span data-ttu-id="13030-143">In Berichten referenzierte benutzerdefinierte Assemblys</span><span class="sxs-lookup"><span data-stu-id="13030-143">Custom Assemblies Referenced in Reports</span></span>  
 <span data-ttu-id="13030-144">Einige Berichtsausdrücke können Codeassemblys von Drittanbietern aufrufen, die in [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] auch als benutzerdefinierte Assemblys bezeichnet werden.</span><span class="sxs-lookup"><span data-stu-id="13030-144">Some report expressions can call third-party code assemblies, also known in [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] as custom assemblies.</span></span> <span data-ttu-id="13030-145">Der Berichtsserver erwartet, dass diese Assemblys mindestens über die Berechtigung **Execution** in den Richtlinienkonfigurationsdateien verfügen.</span><span class="sxs-lookup"><span data-stu-id="13030-145">The report server expects these assemblies to have at least **Execution** permission in the policy configuration files.</span></span> <span data-ttu-id="13030-146">Standardmäßig gewähren die im Lieferumfang von [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] enthaltenen Richtliniendateien allen Assemblys beginnend mit der Zone „Arbeitsplatz“ die Berechtigung **Execution**.</span><span class="sxs-lookup"><span data-stu-id="13030-146">By default, policy files that ship with [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] grant **Execution** permission to all assemblies starting from the 'My Computer' zone.</span></span> <span data-ttu-id="13030-147">Sie können benutzerdefinierten Assemblys nach Bedarf zusätzliche Berechtigungen gewähren.</span><span class="sxs-lookup"><span data-stu-id="13030-147">You can grant additional permissions to custom assemblies as needed.</span></span>  
  
 <span data-ttu-id="13030-148">In einigen Fällen müssen Sie einen Vorgang ausführen, der bestimmte Codeberechtigungen in einem Berichtsausdruck erfordert.</span><span class="sxs-lookup"><span data-stu-id="13030-148">In some cases, you may need to perform an operation that requires specific code permissions in a report expression.</span></span> <span data-ttu-id="13030-149">In der Regel bedeutet dies, dass ein Berichtsausdruck einen Aufruf einer sicheren CLR-Bibliotheksmethode (z. B. einer Methode, die auf Dateien oder die Systemregistrierung zugreift) durchführen muss.</span><span class="sxs-lookup"><span data-stu-id="13030-149">Typically, this means that a report expression needs to make a call to a secured CLR library method (such as one that accesses files or the system registry).</span></span> <span data-ttu-id="13030-150">In der Dokumentation zu [!INCLUDE[dnprdnshort](../../../includes/dnprdnshort-md.md)] werden die Codeberechtigungen beschrieben, die zum Durchführen dieses sicheren Aufrufs notwendig sind. Um den Aufruf ausführen zu können, müssen dem aufrufenden Code diese speziellen, sicheren Berechtigungen gewährt werden.</span><span class="sxs-lookup"><span data-stu-id="13030-150">The [!INCLUDE[dnprdnshort](../../../includes/dnprdnshort-md.md)] documentation describes the code permissions that are required to make this secure call; to execute the call, the calling code must be granted these specific, secure permissions.</span></span> <span data-ttu-id="13030-151">Wenn Sie den Aufruf von einem Berichtsausdruck oder dem **Code**-Element aus durchführen, müssen der Ausdruckshostassembly die entsprechenden Berechtigungen gewährt werden.</span><span class="sxs-lookup"><span data-stu-id="13030-151">If you make the call from a report expression or the **Code** element, the expression host assembly must be granted the appropriate permissions.</span></span> <span data-ttu-id="13030-152">Nachdem Sie dem Ausdruckshost jedoch die Berechtigung gewährt haben, gilt diese spezielle Berechtigung für jeglichen Code, der in einem Ausdruck eines beliebigen Berichts ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="13030-152">However, once you grant the expression host the permissions, all code that runs in any expression in any report is now granted that specific permission.</span></span> <span data-ttu-id="13030-153">Es ist sicher, diesen Aufruf von einer benutzerdefinierten Assembly auszuführen und dieser benutzerdefinierten Assembly die speziellen Berechtigungen zuzuweisen.</span><span class="sxs-lookup"><span data-stu-id="13030-153">It is much more secure to make the call from a custom assembly and grant that custom assembly the specific permissions.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="13030-154">Weitere Informationen</span><span class="sxs-lookup"><span data-stu-id="13030-154">See Also</span></span>  
 <span data-ttu-id="13030-155">[Code Access Security in Reporting Services (Codezugriffssicherheit in Reporting Services)](code-access-security-in-reporting-services.md) </span><span class="sxs-lookup"><span data-stu-id="13030-155">[Code Access Security in Reporting Services](code-access-security-in-reporting-services.md) </span></span>  
 [<span data-ttu-id="13030-156">Sichere Entwicklung (Reporting Services)</span><span class="sxs-lookup"><span data-stu-id="13030-156">Secure Development &#40;Reporting Services&#41;</span></span>](secure-development-reporting-services.md)  
  
  
