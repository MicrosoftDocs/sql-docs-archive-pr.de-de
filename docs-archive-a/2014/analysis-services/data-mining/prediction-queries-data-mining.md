---
title: Vorhersage Abfragen (Data Mining) | Microsoft-Dokumentation
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: analysis-services
ms.topic: conceptual
ms.assetid: e5e6686c-1360-480e-8c0d-8a56204fbed9
author: minewiskan
ms.author: owend
ms.openlocfilehash: 543055aaed5d8991ed2c913a6ae46575c774e216
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 08/04/2020
ms.locfileid: "87718967"
---
# <a name="prediction-queries-data-mining"></a><span data-ttu-id="6584c-102">Vorhersageabfragen (Data Mining)</span><span class="sxs-lookup"><span data-stu-id="6584c-102">Prediction Queries (Data Mining)</span></span>
  <span data-ttu-id="6584c-103">Das Ziel eines typischen Data Mining-Projekts besteht darin, mithilfe des Miningmodells Vorhersagen zu treffen.</span><span class="sxs-lookup"><span data-stu-id="6584c-103">The goal of a typical data mining project is to use the mining model to make predictions.</span></span> <span data-ttu-id="6584c-104">Beispiel: Sie möchten die zu erwartenden Ausfallzeiten für einen bestimmten Servercluster vorhersagen oder die Wahrscheinlichkeit ermitteln, mit der bestimmte Kundensegmente auf eine Werbekampagne reagieren.</span><span class="sxs-lookup"><span data-stu-id="6584c-104">For example, you might want to predict the amount of expected downtime for a certain cluster of servers, or generate a score that indicates whether segments of customers are likely to respond to an advertising campaign.</span></span> <span data-ttu-id="6584c-105">Für all diese Aufgaben können Sie eine Vorhersageabfrage erstellen.</span><span class="sxs-lookup"><span data-stu-id="6584c-105">To do all these things, you would create a prediction query.</span></span>  
  
 <span data-ttu-id="6584c-106">Funktionell gibt es unterschiedliche Typen von Vorhersageabfragen, die in SQL Server unterstützt wurden, abhängig von der Art der Eingabe für die Abfrage:</span><span class="sxs-lookup"><span data-stu-id="6584c-106">Functionally, there are different types of prediction queries supported in SQL Server, depending on the type of inputs to the query:</span></span>  
  
|<span data-ttu-id="6584c-107">Abfragetyp</span><span class="sxs-lookup"><span data-stu-id="6584c-107">Query Type</span></span>|<span data-ttu-id="6584c-108">Abfrageoptionen</span><span class="sxs-lookup"><span data-stu-id="6584c-108">Query Options</span></span>|  
|----------------|-------------------|  
|<span data-ttu-id="6584c-109">SINGLETON-Vorhersageabfragen</span><span class="sxs-lookup"><span data-stu-id="6584c-109">Singleton prediction queries</span></span>|<span data-ttu-id="6584c-110">Verwenden Sie eine SINGLETON-Abfrage, wenn Sie die Ergebnisse für einen einzelnen neuen Fall oder für mehrere neue Fälle vorhersagen möchten.</span><span class="sxs-lookup"><span data-stu-id="6584c-110">Use a singleton query when you want to predict outcomes for a single new case, or multiple new cases.</span></span> <span data-ttu-id="6584c-111">Sie stellen die Eingabewerte direkt in der Abfrage bereit, und die Abfrage wird als einzelne Sitzung ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="6584c-111">You provide the input values directly in the query, and the query is executed as a single session.</span></span>|  
|<span data-ttu-id="6584c-112">Batchvorhersagen</span><span class="sxs-lookup"><span data-stu-id="6584c-112">Batch predictions</span></span>|<span data-ttu-id="6584c-113">Verwenden Sie Batchvorhersagen, wenn externe Daten vorliegen, die Sie an das Modell übergeben möchten und die als Grundlage für Vorhersagen dienen sollen.</span><span class="sxs-lookup"><span data-stu-id="6584c-113">Use batch predictions when you have external data that you want to feed into the model, to use as the basis for predictions.</span></span> <span data-ttu-id="6584c-114">Um Vorhersagen für einen ganzen Satz von Daten zu treffen, ordnen Sie die Daten in der externen Quelle den Spalten im Modell zu, und geben Sie anschließend den Typ der Vorhersagedaten an, die Sie ausgeben möchten.</span><span class="sxs-lookup"><span data-stu-id="6584c-114">To make predictions for an entire set of data, you map the data in the external source to the columns in the model, and then specify the type of predictive data you want to output.</span></span><br /><br /> <span data-ttu-id="6584c-115">Die Abfrage für das ganze Dataset wird in einer einzelnen Sitzung ausgeführt. Diese Option ist viel effizienter als das wiederholte Senden mehrerer Abfragen.</span><span class="sxs-lookup"><span data-stu-id="6584c-115">The query for the entire dataset is executed in a single session, making this option much more efficient than sending multiple repeated queries.</span></span>|  
|<span data-ttu-id="6584c-116">Zeitreihenvorhersagen</span><span class="sxs-lookup"><span data-stu-id="6584c-116">Time Series predictions</span></span>|<span data-ttu-id="6584c-117">Verwenden Sie eine Zeitreihenabfrage, wenn Sie eine Vorhersage eines Werts für mehrere zukünftige Schritte erstellen möchten.</span><span class="sxs-lookup"><span data-stu-id="6584c-117">Use a time series query when you want to predict a value over some number of future steps.</span></span> <span data-ttu-id="6584c-118">SQL Server Data Mining stellt für Zeitreihenabfragen zusätzlich die folgende Funktionalität bereit:</span><span class="sxs-lookup"><span data-stu-id="6584c-118">SQL Server Data Mining also provides the following functionality in time series queries:</span></span><br /><br /> <span data-ttu-id="6584c-119">Sie können ein vorhandenes Modell erweitern, indem Sie neue Daten als Teil der Abfrage hinzufügen, und anschließend Vorhersagen auf Grundlage der zusammengesetzten Reihe treffen.</span><span class="sxs-lookup"><span data-stu-id="6584c-119">You can extend an existing model by adding new data as part of the query, and make predictions based on the composite series.</span></span><br /><br /> <span data-ttu-id="6584c-120">Sie können ein vorhandenes Modell mit der REPLACE_MODEL_CASES-Option auf eine neue Datenreihe anwenden.</span><span class="sxs-lookup"><span data-stu-id="6584c-120">You can apply an existing model to a new data series by using the REPLACE_MODEL_CASES option.</span></span><br /><br /> <span data-ttu-id="6584c-121">Sie können Kreuzvorhersagen durchführen.</span><span class="sxs-lookup"><span data-stu-id="6584c-121">You can perform cross-prediction.</span></span>|  
  
 <span data-ttu-id="6584c-122">In den folgenden Abschnitten werden die allgemeine Syntax von Vorhersageabfragen und die verschiedenen Typen von Vorhersageabfragen beschrieben. Außerdem wird erläutert, wie Sie mit den Ergebnissen von Vorhersageabfragen arbeiten.</span><span class="sxs-lookup"><span data-stu-id="6584c-122">The following sections describe the general syntax of prediction queries, the different types of prediction queries, and how to work with the results of prediction queries.</span></span>  
  
 [<span data-ttu-id="6584c-123">Grundlegender Entwurf von Vorhersage Abfragen</span><span class="sxs-lookup"><span data-stu-id="6584c-123">Basic Prediction Query Design</span></span>](#bkmk_PredQuery)  
  
-   [<span data-ttu-id="6584c-124">Hinzufügen von Vorhersagefunktionen</span><span class="sxs-lookup"><span data-stu-id="6584c-124">Adding Prediction Functions</span></span>](#bkmk_PredFunc)  
  
-   [<span data-ttu-id="6584c-125">SINGLETON-Abfragen</span><span class="sxs-lookup"><span data-stu-id="6584c-125">Singleton Queries</span></span>](#bkmk_SingletonQuery)  
  
-   [<span data-ttu-id="6584c-126">Batch Vorhersage Abfragen</span><span class="sxs-lookup"><span data-stu-id="6584c-126">Batch Prediction Queries</span></span>](#bkmk_BatchQuery)  
  
 [<span data-ttu-id="6584c-127">Arbeiten mit den Abfrageergebnissen</span><span class="sxs-lookup"><span data-stu-id="6584c-127">Working with the Results of Queries</span></span>](#bkmk_WorkResults)  
  
##  <a name="basic-prediction-query-design"></a><a name="bkmk_PredQuery"></a> <span data-ttu-id="6584c-128">Grundentwurf von Vorhersageabfragen</span><span class="sxs-lookup"><span data-stu-id="6584c-128">Basic Prediction Query Design</span></span>  
 <span data-ttu-id="6584c-129">Wenn Sie eine Vorhersage erstellen, geben Sie in der Regel neue Daten an und lassen das Modell auf Basis dieser neuen Daten eine Vorhersage erstellen.</span><span class="sxs-lookup"><span data-stu-id="6584c-129">When you create a prediction, you typically provide some piece of new data and ask the model to generate a prediction based on the new data.</span></span>  
  
-   <span data-ttu-id="6584c-130">Bei einer Batchvorhersageabfrage ordnen Sie das Modell mit einem *PREDICTION JOIN*einer externen Datenquelle zu.</span><span class="sxs-lookup"><span data-stu-id="6584c-130">In a batch prediction query, you map the model to an external source of data by using a *prediction join*.</span></span>  
  
-   <span data-ttu-id="6584c-131">In einer Singleton-Vorhersageabfrage geben Sie einen oder mehrere Werte ein, die als Eingaben verwendet werden sollen.</span><span class="sxs-lookup"><span data-stu-id="6584c-131">In a singleton prediction query, you type one or more values to use as inputs.</span></span> <span data-ttu-id="6584c-132">Sie können mit einer Singleton-Vorhersageabfrage mehrere Vorhersagen erstellen.</span><span class="sxs-lookup"><span data-stu-id="6584c-132">You can create multiple predictions using a singleton prediction query.</span></span> <span data-ttu-id="6584c-133">Wenn Sie jedoch viele Vorhersagen erstellen müssen, erzielen Sie mit einer Batchabfrage eine höhere Leistung.</span><span class="sxs-lookup"><span data-stu-id="6584c-133">However, if you need to create many predictions, performance is better when you use a batch query.</span></span>  
  
 <span data-ttu-id="6584c-134">Sowohl SINGLETON- als auch Batchvorhersageabfragen verwenden die PREDICTION JOIN-Syntax, um die neuen Daten zu definieren.</span><span class="sxs-lookup"><span data-stu-id="6584c-134">Both singleton and batch prediction queries use the PREDICTION JOIN syntax to define the new data.</span></span> <span data-ttu-id="6584c-135">Der Unterschied besteht darin, wie die Eingabeseite des PREDICTION JOINS angegeben wird.</span><span class="sxs-lookup"><span data-stu-id="6584c-135">The difference is in how the input side of the prediction join is specified.</span></span>  
  
-   <span data-ttu-id="6584c-136">In einer Batchvorhersageabfrage stammen die Daten aus einer externen Datenquelle, die mit der OPENQUERY-Syntax angegeben wird.</span><span class="sxs-lookup"><span data-stu-id="6584c-136">In a batch prediction query, the data comes from an external data source that is specified by using the OPENQUERY syntax.</span></span>  
  
-   <span data-ttu-id="6584c-137">In einer SINGLETON-Vorhersageabfrage werden die Daten inline als Teil der Abfrage angegeben.</span><span class="sxs-lookup"><span data-stu-id="6584c-137">In a singleton prediction query, the data is supplied inline as part of the query.</span></span>  
  
 <span data-ttu-id="6584c-138">Bei Zeitreihenmodellen sind nicht immer Eingabedaten erforderlich. Es ist auch möglich, Vorhersagen ausschließlich anhand der bereits im Modell enthaltenen Daten zu generieren.</span><span class="sxs-lookup"><span data-stu-id="6584c-138">For time series models, input data is not always required; it is possible to make predictions using just the data already in the model.</span></span> <span data-ttu-id="6584c-139">Wenn Sie jedoch neue Eingabedaten angeben, müssen Sie entscheiden, ob Sie die neuen Daten zum Aktualisieren und Erweitern des Modells verwenden möchten, oder ob die Daten die ursprüngliche Datenreihe im Modell ersetzen sollen.</span><span class="sxs-lookup"><span data-stu-id="6584c-139">However, if you do specify new input data, you must decide whether you will use the new data to update and extend the model, or to replace the original series of data that was used in the model.</span></span>  <span data-ttu-id="6584c-140">Weitere Informationen zu diesen Optionen finden Sie unter [Time Series Model Query Examples](time-series-model-query-examples.md).</span><span class="sxs-lookup"><span data-stu-id="6584c-140">For more information about these options, see [Time Series Model Query Examples](time-series-model-query-examples.md).</span></span>  
  
###  <a name="adding-prediction-functions"></a><a name="bkmk_PredFunc"></a><span data-ttu-id="6584c-141">Fügen von Vorhersagefunktionen</span><span class="sxs-lookup"><span data-stu-id="6584c-141">Adding Prediction Functions</span></span>  
 <span data-ttu-id="6584c-142">Sie können nicht nur einen Wert vorhersagen, sondern eine Vorhersageabfrage anpassen, um verschiedene Arten von Informationen, die mit der Vorhersage verknüpft sind, zurückzugeben.</span><span class="sxs-lookup"><span data-stu-id="6584c-142">In addition to predicting a value, you can customize a prediction query to return various kinds of information that are related to the prediction.</span></span> <span data-ttu-id="6584c-143">Wenn durch die Vorhersage z. B. eine Liste mit Produktempfehlungen für einen Kunden erstellt wird, können Sie auch die Wahrscheinlichkeit für jede Vorhersage ermitteln, eine Rangfolge erstellen und dem Benutzer nur die besten Empfehlungen präsentieren.</span><span class="sxs-lookup"><span data-stu-id="6584c-143">For example, if the prediction creates a list of products to recommend to a customer, you might also want to return the probability for each prediction, so that you can rank them and present only the top recommendations to the user.</span></span>  
  
 <span data-ttu-id="6584c-144">Dazu müssen Sie der Abfrage *Vorhersagefunktionen* hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="6584c-144">To do this, you add *prediction functions* to the query.</span></span> <span data-ttu-id="6584c-145">Jedes Modell oder jeder Abfragetyp unterstützt bestimmte Funktionen.</span><span class="sxs-lookup"><span data-stu-id="6584c-145">Each model or query type supports specific functions.</span></span> <span data-ttu-id="6584c-146">Clustermodelle unterstützen beispielsweise spezielle Vorhersagefunktionen, die zusätzliche Details über die vom Modell vorgenommenen Cluster bereitstellen, wohingegen Zeitreihenmodelle über Funktionen zur Berechnung der Unterschiede im zeitlichen Verlauf verfügen.</span><span class="sxs-lookup"><span data-stu-id="6584c-146">For example, clustering models support special prediction functions that provide extra detail about the clusters created by the model, whereas time series models have functions that calculate differences over time.</span></span> <span data-ttu-id="6584c-147">Es gibt auch allgemeine Vorhersagefunktionen, die mit fast allen Modelltypen funktionieren.</span><span class="sxs-lookup"><span data-stu-id="6584c-147">There are also general prediction functions that work with almost all model types.</span></span> <span data-ttu-id="6584c-148">Eine Liste der Vorhersagefunktionen, die in verschiedenen Abfragen unterstützt werden, finden Sie unter folgendem Thema in der DMX-Referenz: [Allgemeine Vorhersagefunktionen &#40;DMX&#41;](/sql/dmx/general-prediction-functions-dmx).</span><span class="sxs-lookup"><span data-stu-id="6584c-148">For a list of the prediction functions supported in different types of queries, see this topic the DMX reference:  [General Prediction Functions &#40;DMX&#41;](/sql/dmx/general-prediction-functions-dmx).</span></span>  
  
###  <a name="creating-singleton-prediction-queries"></a><a name="bkmk_SingletonQuery"></a><span data-ttu-id="6584c-149">Erstellen von SINGLETON-Vorhersage Abfragen</span><span class="sxs-lookup"><span data-stu-id="6584c-149">Creating Singleton Prediction Queries</span></span>  
 <span data-ttu-id="6584c-150">Eine SINGLETON-Vorhersageabfrage ist nützlich, wenn Sie schnelle Vorhersagen in Echtzeit erstellen möchten.</span><span class="sxs-lookup"><span data-stu-id="6584c-150">A singleton prediction query is useful when you want to create quick predictions in real time.</span></span> <span data-ttu-id="6584c-151">Ein häufiges Szenario sind z. B. Informationen vom Kunden, die etwa über ein Formular auf einer Website abgerufen wurden und als Eingabedaten für eine SINGLETON-Vorhersageabfrage verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="6584c-151">A common scenario might be that you have obtained information from a customer, perhaps by using a form on a Web site, and you want to submit that data as the input to a singleton prediction query.</span></span> <span data-ttu-id="6584c-152">Wenn ein Kunde z. B. ein Produkt aus einer Liste auswählt, können Sie diese Auswahl als Eingabe für eine Abfrage verwenden, die eine Liste geeigneter Produktempfehlungen erstellt.</span><span class="sxs-lookup"><span data-stu-id="6584c-152">For example, when a customer chooses a product from a list, you could use that selection as the input to a query that predicts the best products to recommend.</span></span>  
  
 <span data-ttu-id="6584c-153">SINGLETON-Vorhersageabfragen erfordern keine separate Tabelle mit Eingaben.</span><span class="sxs-lookup"><span data-stu-id="6584c-153">Singleton prediction queries do not require a separate table that contains input.</span></span> <span data-ttu-id="6584c-154">Sie stellen stattdessen eine oder mehrere Zeilen mit Werten als Eingabe für das Modell bereit, und die Vorhersagen werden in Echtzeit zurückgegeben.</span><span class="sxs-lookup"><span data-stu-id="6584c-154">Instead, you provide one or multiple rows of values as input to the model, and the prediction or predictions are returned in real time.</span></span>  
  
> [!WARNING]  
>  <span data-ttu-id="6584c-155">Trotz des Namens führen SINGLETON-Vorhersage Abfragen nicht nur für einzelne Vorhersagen aus. Sie können mehrere Vorhersagen für jeden Satz von Eingaben generieren.</span><span class="sxs-lookup"><span data-stu-id="6584c-155">Despite the name, singleton prediction queries do not just make single predictions-you can generate multiple predictions for each set of inputs.</span></span> <span data-ttu-id="6584c-156">Mehrere Eingabefälle geben Sie mithilfe von SELECT-Anweisungen für jeden Eingabefall an, die Sie dann mit dem UNION-Operator kombinieren.</span><span class="sxs-lookup"><span data-stu-id="6584c-156">You provide multiple input cases by creating a SELECT statement for each input case and combining them with the UNION operator.</span></span>  
  
 <span data-ttu-id="6584c-157">Beim Erstellen einer SINGLETON-Vorhersageabfrage müssen Sie die neuen Daten in Form einer PREDICTION JOIN-Anweisung für das Modell bereitstellen.</span><span class="sxs-lookup"><span data-stu-id="6584c-157">When you create a singleton prediction query, you must provide the new data to the model in the form of a PREDICTION JOIN.</span></span> <span data-ttu-id="6584c-158">Dies bedeutet, dass Sie zwar keine Zuordnung zu einer tatsächlichen Tabelle vornehmen, jedoch dennoch sicherstellen müssen, dass die neuen Daten mit den vorhandenen Spalten des Miningmodells übereinstimmen.</span><span class="sxs-lookup"><span data-stu-id="6584c-158">This means that even though you are not mapping to an actual table, you must make sure that the new data matches the existing columns in the mining model.</span></span> <span data-ttu-id="6584c-159">Wenn die neuen Datenspalten und die neuen Daten genau übereinstimmen, übernimmt [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] die Zuordnung der Spalten.</span><span class="sxs-lookup"><span data-stu-id="6584c-159">If the new data columns and the new data match exactly, [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] will map the columns for you.</span></span> <span data-ttu-id="6584c-160">Dies wird als *NATURAL PREDICTION JOIN*bezeichnet.</span><span class="sxs-lookup"><span data-stu-id="6584c-160">This is called a *NATURAL PREDICTION JOIN*.</span></span> <span data-ttu-id="6584c-161">Wenn die Spalten jedoch nicht übereinstimmen oder die neuen Daten nicht dieselbe Art und Menge von Daten enthalten wie das Modell, müssen Sie angeben, welche Spalten im Modell den neuen Daten zuzuordnen sind, oder Sie legen die fehlenden Werte fest.</span><span class="sxs-lookup"><span data-stu-id="6584c-161">However, if the columns do not match, or if the new data does not contain the same kind and amount of data that is in the model, you must specify which columns in the model map to the new data, or specify the missing values.</span></span>  
  
###  <a name="batch-prediction-queries"></a><a name="bkmk_BatchQuery"></a> <span data-ttu-id="6584c-162">Batchvorhersageabfragen</span><span class="sxs-lookup"><span data-stu-id="6584c-162">Batch Prediction Queries</span></span>  
 <span data-ttu-id="6584c-163">Eine Batchvorhersageabfrage ist nützlich, wenn Sie externe Daten vorliegen haben, die Sie für Vorhersagen verwenden möchten.</span><span class="sxs-lookup"><span data-stu-id="6584c-163">A batch prediction query is useful when you have external data that you want to use in making predictions.</span></span> <span data-ttu-id="6584c-164">Angenommen, Sie haben ein Modell erstellt, das Kunden anhand ihrer Onlineaktivität und Kaufhistorie kategorisiert.</span><span class="sxs-lookup"><span data-stu-id="6584c-164">For example, you might have built a model that categorizes customers by their online activity and purchasing history.</span></span> <span data-ttu-id="6584c-165">Sie können dieses Modell auf eine Liste neu abgerufener Werte anwenden, um Projektionen für Verkäufe zu erstellen oder Ziele für vorgeschlagene Kampagnen zu identifizieren.</span><span class="sxs-lookup"><span data-stu-id="6584c-165">You could apply that model to a list of newly acquired leads, to create projections for sales, or to identify targets for proposed campaigns.</span></span>  
  
 <span data-ttu-id="6584c-166">Wenn Sie einen PREDICTION JOIN ausführen, müssen Sie die Spalten im Modell den Spalten in der neuen Datenquelle zuordnen.</span><span class="sxs-lookup"><span data-stu-id="6584c-166">When you perform a prediction join, you must map the columns the model to the columns in the new data source.</span></span> <span data-ttu-id="6584c-167">Daher muss die Datenquelle, die Sie für die Eingabe auswählen, Daten enthalten, die denen im Modell zumindest ähneln.</span><span class="sxs-lookup"><span data-stu-id="6584c-167">Therefore, the data source that you choose for an input must data that is somewhat similar to the data in the model.</span></span> <span data-ttu-id="6584c-168">Die neuen Informationen müssen nicht exakt übereinstimmen und dürfen unvollständig sein.</span><span class="sxs-lookup"><span data-stu-id="6584c-168">The new information does not have to match exactly, and can be incomplete.</span></span> <span data-ttu-id="6584c-169">Beispiel: Angenommen, das Modell wurde mit Informationen zu Einkommen und Alter trainiert, doch die Kundenliste, die Sie für Vorhersagen verwenden, enthält nur Angaben zum Alter und nicht zum Einkommen.</span><span class="sxs-lookup"><span data-stu-id="6584c-169">For example, suppose the model was trained using information about income and age, but the customer list you are using for predictions has age but nothing about income.</span></span> <span data-ttu-id="6584c-170">In diesem Szenario können die neuen Daten immer noch dem Modell zugeordnet werden, und es kann eine Vorhersage für jeden Kunden erstellt werden.</span><span class="sxs-lookup"><span data-stu-id="6584c-170">In this scenario, you could still map the new data to the model and create a prediction for each customer.</span></span> <span data-ttu-id="6584c-171">Wenn das Einkommen jedoch ein wichtiger Vorhersagefaktor für das Modell sein sollte, würde das Fehlen vollständiger Informationen die Qualität der Vorhersagen beeinflussen.</span><span class="sxs-lookup"><span data-stu-id="6584c-171">However, if income was an important predictor for the model, the lack of complete information would affect the quality of predictions.</span></span>  
  
 <span data-ttu-id="6584c-172">Die besten Ergebnisse erzielen Sie, wenn Sie möglichst viele der zwischen den neuen Daten und dem Modell übereinstimmenden Spalten verknüpfen.</span><span class="sxs-lookup"><span data-stu-id="6584c-172">To get the best results, you should join as many of the matching columns as possible between the new data and the model.</span></span> <span data-ttu-id="6584c-173">Die Abfrage wird jedoch auch dann erfolgreich durchgeführt, wenn keine Übereinstimmungen vorhanden sind.</span><span class="sxs-lookup"><span data-stu-id="6584c-173">However, the query will succeed even if there are no matches.</span></span> <span data-ttu-id="6584c-174">Wenn keine Spalten verknüpft werden, gibt die Abfrage die marginale Vorhersage zurück. Diese entspricht der Anweisung `SELECT <predictable-column> FROM <model>` ohne PREDICTION JOIN-Klausel.</span><span class="sxs-lookup"><span data-stu-id="6584c-174">If no columns are joined, the query will return the marginal prediction, which is equivalent to the statement `SELECT <predictable-column> FROM <model>` without a PREDICTION JOIN clause.</span></span>  
  
 <span data-ttu-id="6584c-175">Nachdem Sie alle relevanten Spalten erfolgreich zugeordnet haben, führen Sie die Abfrage aus. [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] erstellt für jede Zeile in den neuen Daten Vorhersagen auf Grundlage der Muster im Modell.</span><span class="sxs-lookup"><span data-stu-id="6584c-175">After you have successfully mapped all relevant columns, you run the query, and [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] makes predictions for each row in the new data based on patterns in the model.</span></span> <span data-ttu-id="6584c-176">Sie können die Ergebnisse in einer neuen Tabelle in der Datenquellensicht speichern, die die externen Daten enthält, oder Sie können die Daten kopieren und einfügen, wenn Sie [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)] oder [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)]verwenden.</span><span class="sxs-lookup"><span data-stu-id="6584c-176">You can save the results back to a new table in the data source view that contains the external data, or you can copy and paste the data is you are using [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)] or [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)].</span></span>  
  
> [!WARNING]  
>  <span data-ttu-id="6584c-177">Wenn Sie den Designer in [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)]verwenden, muss die externe Datenquelle zuerst als Datenquellensicht definiert werden.</span><span class="sxs-lookup"><span data-stu-id="6584c-177">If you use the designer in [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)], the external data source must first be defined as a data source view.</span></span>  
  
 <span data-ttu-id="6584c-178">Wenn Sie einen PREDICTION JOIN mit DMX erstellen, können Sie die externe Datenquelle anhand der Befehle OPENQUERY, OPENROWSET oder SHAPE angeben.</span><span class="sxs-lookup"><span data-stu-id="6584c-178">If you use DMX to create a prediction join, you can specify the external data source by using the OPENQUERY, OPENROWSET, or SHAPE commands.</span></span> <span data-ttu-id="6584c-179">Die Standard-Datenzugriffsmethode in den DMX-Vorlagen ist OPENQUERY.</span><span class="sxs-lookup"><span data-stu-id="6584c-179">The default data access method in the DMX templates is OPENQUERY.</span></span> <span data-ttu-id="6584c-180">Informationen zu diesen Methoden finden Sie unter [Quelldatenabfrage &#60;source data query&#62;](/sql/dmx/source-data-query).</span><span class="sxs-lookup"><span data-stu-id="6584c-180">For information about these methods, see [&#60;source data query&#62;](/sql/dmx/source-data-query).</span></span>  
  
###  <a name="predictions-in-time-series-mining-models"></a><a name="bkmk_TSQuery"></a> <span data-ttu-id="6584c-181">Vorhersagen für Zeitreihenminingmodelle</span><span class="sxs-lookup"><span data-stu-id="6584c-181">Predictions in Time Series Mining Models</span></span>  
 <span data-ttu-id="6584c-182">Zeitreihenmodelle unterscheiden sich von anderen Modelltypen. Sie können entweder das unveränderte Modell verwenden, um Vorhersagen zu treffen, oder Sie können neue Daten für das Modell bereitstellen, um das Modell zu aktualisieren und Vorhersagen auf Grundlage der aktuellen Trends zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="6584c-182">Time series models are different from other models types; you can either use the model as it is to create predictions, or you can provide new data to the model to update the model and create predictions based on recent trends.</span></span> <span data-ttu-id="6584c-183">Wenn Sie neue Daten hinzufügen, können Sie angeben, wie die neuen Daten verwendet werden sollen.</span><span class="sxs-lookup"><span data-stu-id="6584c-183">If you add new data, you can specify the way the new data should be used.</span></span>  
  
-   <span data-ttu-id="6584c-184">Beim*Erweitern der Modellfälle* werden die neuen Daten der vorhandenen Datenreihe im Zeitreihenmodell hinzugefügt.</span><span class="sxs-lookup"><span data-stu-id="6584c-184">*Extending the model cases* means that you add the new data onto the existing series of data in the time series model.</span></span> <span data-ttu-id="6584c-185">Damit basieren alle nachfolgenden Vorhersagen auf der neuen, kombinierten Reihe.</span><span class="sxs-lookup"><span data-stu-id="6584c-185">Henceforth, predictions are based on the new, combined series.</span></span> <span data-ttu-id="6584c-186">Diese Option empfiehlt sich, wenn Sie einem vorhandenen Modell lediglich einige Datenpunkte hinzufügen möchten.</span><span class="sxs-lookup"><span data-stu-id="6584c-186">This option is good when you want to simply add a few data points to an existing model.</span></span>  
  
     <span data-ttu-id="6584c-187">Angenommen, es ist ein Zeitreihenmodell vorhanden, das mit Umsatzdaten vom vergangenen Jahr trainiert wurde.</span><span class="sxs-lookup"><span data-stu-id="6584c-187">For example, suppose that you have an existing time series model that has been trained on the sales data from the previous year.</span></span> <span data-ttu-id="6584c-188">Nachdem Sie einige Monate neue Umsatzdaten gesammelt haben, möchten Sie Ihre Verkaufsprognosen für das laufende Jahr aktualisieren.</span><span class="sxs-lookup"><span data-stu-id="6584c-188">After you have collected several months of new sales data, you decide to update your sales forecasts for the current year.</span></span> <span data-ttu-id="6584c-189">Sie können einen PREDICTION JOIN erstellen, der das Modell durch Hinzufügen neuer Daten aktualisiert und es um neue Vorhersagen erweitert.</span><span class="sxs-lookup"><span data-stu-id="6584c-189">You can create a prediction join that updates the model by adding new data and extends the model to make new predictions.</span></span>  
  
-   <span data-ttu-id="6584c-190">Beim*Ersetzen der Modellfälle* behalten Sie das trainierte Modell bei, ersetzen jedoch die zugrunde liegenden Fälle durch einen Satz neuer Falldaten.</span><span class="sxs-lookup"><span data-stu-id="6584c-190">*Replacing the model cases* means that you keep the trained model, but replace the underlying cases with a new set of case data.</span></span> <span data-ttu-id="6584c-191">Diese Option ist nützlich, wenn Sie den Trend im Modell behalten, diesen aber auf einen anderen Satz von Daten anwenden möchten.</span><span class="sxs-lookup"><span data-stu-id="6584c-191">This option is useful when you want to keep the trend in the model, but apply it to a different set of data.</span></span>  
  
     <span data-ttu-id="6584c-192">Das ursprüngliche Modell könnte z. B. mit einem Satz von Daten mit sehr hohen Verkaufsvolumen trainiert worden sein. Wenn Sie die zugrunde liegenden Daten durch eine neue Reihe (vielleicht aus einer Filiale mit niedrigerem Verkaufsvolumen) ersetzen, wird der Trend beibehalten, aber die Vorhersagen beginnen mit den Werten der neuen ersetzten Reihe.</span><span class="sxs-lookup"><span data-stu-id="6584c-192">For example, your original model might have been trained on a set of data with very high sales volumes; when you replace the underlying data with a new series (perhaps from a store with lower sales volume), you preserve the trend, but the predictions begin from the values in the replacement series.</span></span>  
  
 <span data-ttu-id="6584c-193">Unabhängig vom verwendeten Ansatz ist der Ausgangspunkt für Vorhersagen stets das Ende der ursprünglichen Reihe.</span><span class="sxs-lookup"><span data-stu-id="6584c-193">Regardless of which approach you use, the starting point for predictions is always the end of the original series.</span></span>  
  
 <span data-ttu-id="6584c-194">Weitere Informationen zum Erstellen von PREDICTION JOINS für Zeitreihenmodelle finden Sie unter [Abfragebeispiel Zeitreihenmodell](time-series-model-query-examples.md) oder [PredictTimeSeries &#40;DMX&#41;](/sql/dmx/predicttimeseries-dmx).</span><span class="sxs-lookup"><span data-stu-id="6584c-194">For more information about how to create prediction joins on time series models, see [Time Series Model Query Examples](time-series-model-query-examples.md) or [PredictTimeSeries &#40;DMX&#41;](/sql/dmx/predicttimeseries-dmx).</span></span>  
  
##  <a name="working-with-the-results-of-a-prediction-query"></a><a name="bkmk_WorkResults"></a> <span data-ttu-id="6584c-195">Arbeiten mit den Ergebnissen einer Vorhersageabfrage</span><span class="sxs-lookup"><span data-stu-id="6584c-195">Working with the Results of a Prediction Query</span></span>  
 <span data-ttu-id="6584c-196">Die Optionen zum Speichern der Ergebnisse einer Data Mining-Vorhersageabfrage unterscheiden sich abhängig von der Methode der Abfragenerstellung.</span><span class="sxs-lookup"><span data-stu-id="6584c-196">Your options for saving the results of a data mining prediction query are different depending on how you create the query.</span></span>  
  
-   <span data-ttu-id="6584c-197">Wenn Sie mit dem Vorhersage-Abfrage-Generator entweder in [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] oder [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)]eine Abfrage erstellen, können Sie die Ergebnisse einer Vorhersageabfrage in einer vorhandenen [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] -Datenquelle speichern.</span><span class="sxs-lookup"><span data-stu-id="6584c-197">When you build a query using Prediction Query Builder in either [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] or [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)], you can save the results of a prediction query to an existing [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] data source.</span></span> <span data-ttu-id="6584c-198">Weitere Informationen finden Sie unter [Anzeigen und Speichern der Ergebnisse einer Vorhersageabfrage](view-and-save-the-results-of-a-prediction-query.md).</span><span class="sxs-lookup"><span data-stu-id="6584c-198">For more information, see [View and Save the Results of a Prediction Query](view-and-save-the-results-of-a-prediction-query.md).</span></span>  
  
-   <span data-ttu-id="6584c-199">Wenn Sie Vorhersageabfragen mit DMX im Abfragebereich von [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)]erstellen, können Sie mithilfe der Abfrageausgabemöglichkeiten die Ergebnisse in einer Datei oder im Bereich der Abfrageergebnisse als Text oder in einem Raster speichern.</span><span class="sxs-lookup"><span data-stu-id="6584c-199">When you create prediction queries using DMX in the Query pane of [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)], you can use the query output options to save the results to a file, or to the Query Results pane as text or in a grid.</span></span> <span data-ttu-id="6584c-200">Weitere Informationen finden Sie unter [Abfrage- und Text-Editoren &#40;SQL Server Management Studio&#41;](../../relational-databases/scripting/query-and-text-editors-sql-server-management-studio.md).</span><span class="sxs-lookup"><span data-stu-id="6584c-200">For more information, see [Query and Text Editors &#40;SQL Server Management Studio&#41;](../../relational-databases/scripting/query-and-text-editors-sql-server-management-studio.md).</span></span>  
  
-   <span data-ttu-id="6584c-201">Wenn Sie mit den Integration Services-Komponenten eine Vorhersageabfrage ausführen, bieten die Tasks die Möglichkeit, die Ergebnisse mithilfe eines verfügbaren ADO.NET- oder OLEDB-Verbindungs-Managers in eine Datenbank zu schreiben.</span><span class="sxs-lookup"><span data-stu-id="6584c-201">When you run a prediction query using the Integration Services components, the tasks provides the ability to write the results to a database by using an available ADO.NET connection manager or OLEDB connection manager.</span></span> <span data-ttu-id="6584c-202">Weitere Informationen finden Sie unter [Data Mining Query Task](../../integration-services/control-flow/data-mining-query-task.md).</span><span class="sxs-lookup"><span data-stu-id="6584c-202">For more information, see [Data Mining Query Task](../../integration-services/control-flow/data-mining-query-task.md).</span></span>  
  
 <span data-ttu-id="6584c-203">Sie müssen sich darüber im Klaren sein, dass die Ergebnisse einer Vorhersageabfrage nicht den Ergebnissen einer Abfrage in einer relationalen Datenbank entsprechen, die immer eine einzelne Zeile mit verknüpften Werten zurückgibt.</span><span class="sxs-lookup"><span data-stu-id="6584c-203">It is important to understand that the results of a prediction query are not like the results of a query on a relational database, which always returns a single row of related values.</span></span> <span data-ttu-id="6584c-204">Jede DMX-Vorhersagefunktion, die Sie einer Abfrage hinzufügen, gibt ein eigenes Rowset zurück.</span><span class="sxs-lookup"><span data-stu-id="6584c-204">Each DMX prediction function that you add to a query returns its own rowset.</span></span> <span data-ttu-id="6584c-205">Wenn Sie eine Vorhersage für einen Einzelfall treffen, kann das Ergebnis aus einem vorhergesagten Wert und mehreren Spalten geschachtelter Tabellen mit zusätzlichen Details bestehen.</span><span class="sxs-lookup"><span data-stu-id="6584c-205">Therefore, when you make a prediction on a single case, the result might be a predicted value together with several columns of nested tables containing additional detail.</span></span>  
  
 <span data-ttu-id="6584c-206">Wenn Sie mehrere Funktionen in einer Abfrage kombinieren, werden die Rückgabeergebnisse als hierarchisches Rowset kombiniert.</span><span class="sxs-lookup"><span data-stu-id="6584c-206">If you combine multiple functions in one query, the return results are combined as a hierarchical rowset.</span></span> <span data-ttu-id="6584c-207">Beispiel: Sie verwenden ein Zeitreihenmodell, um zukünftige Werte für Umsatz und Verkaufsmenge vorherzusagen, und zwar mithilfe einer Abfrage wie der folgenden DMX-Anweisung:</span><span class="sxs-lookup"><span data-stu-id="6584c-207">For example, say you use a time series model to predict future values for sales amount and sales quantity, using a query such as this DMX statement:</span></span>  
  
```  
SELECT  
  PredictTimeSeries([Forecasting].[Amount]) as [PredictedAmount]  
, PredictTimeSeries([Forecasting].[Quantity]) as [PredictedQty]  
FROM  
  [Forecasting]  
  
```  
  
 <span data-ttu-id="6584c-208">Die Ergebnisse dieser Abfrage sind zwei Spalten, und zwar jeweils eine Spalte für jede vorhergesagte Reihe, wobei jede Zeile eine geschachtelte Tabelle mit den vorhergesagten Werten enthält:</span><span class="sxs-lookup"><span data-stu-id="6584c-208">The results of this query are two columns, one for each predicted series, where each row contains a nested table with the predicted values:</span></span>  
  
 <span data-ttu-id="6584c-209">**PredictedAmount**</span><span class="sxs-lookup"><span data-stu-id="6584c-209">**PredictedAmount**</span></span>  
  
|<span data-ttu-id="6584c-210">$TIME</span><span class="sxs-lookup"><span data-stu-id="6584c-210">$TIME</span></span>|<span data-ttu-id="6584c-211">Betrag</span><span class="sxs-lookup"><span data-stu-id="6584c-211">Amount</span></span>|  
|-----------|------------|  
|<span data-ttu-id="6584c-212">201101</span><span class="sxs-lookup"><span data-stu-id="6584c-212">201101</span></span>|<span data-ttu-id="6584c-213">172067.11</span><span class="sxs-lookup"><span data-stu-id="6584c-213">172067.11</span></span>|  
  
|<span data-ttu-id="6584c-214">$TIME</span><span class="sxs-lookup"><span data-stu-id="6584c-214">$TIME</span></span>|<span data-ttu-id="6584c-215">Betrag</span><span class="sxs-lookup"><span data-stu-id="6584c-215">Amount</span></span>|  
|-----------|------------|  
|<span data-ttu-id="6584c-216">201102</span><span class="sxs-lookup"><span data-stu-id="6584c-216">201102</span></span>|<span data-ttu-id="6584c-217">363390.68</span><span class="sxs-lookup"><span data-stu-id="6584c-217">363390.68</span></span>|  
  
 <span data-ttu-id="6584c-218">**PredictedQty**</span><span class="sxs-lookup"><span data-stu-id="6584c-218">**PredictedQty**</span></span>  
  
|<span data-ttu-id="6584c-219">$TIME</span><span class="sxs-lookup"><span data-stu-id="6584c-219">$TIME</span></span>|<span data-ttu-id="6584c-220">Menge</span><span class="sxs-lookup"><span data-stu-id="6584c-220">Quantity</span></span>|  
|-----------|--------------|  
|<span data-ttu-id="6584c-221">201101</span><span class="sxs-lookup"><span data-stu-id="6584c-221">201101</span></span>|<span data-ttu-id="6584c-222">77</span><span class="sxs-lookup"><span data-stu-id="6584c-222">77</span></span>|  
  
|<span data-ttu-id="6584c-223">$TIME</span><span class="sxs-lookup"><span data-stu-id="6584c-223">$TIME</span></span>|<span data-ttu-id="6584c-224">Menge</span><span class="sxs-lookup"><span data-stu-id="6584c-224">Quantity</span></span>|  
|-----------|--------------|  
|<span data-ttu-id="6584c-225">201102</span><span class="sxs-lookup"><span data-stu-id="6584c-225">201102</span></span>|<span data-ttu-id="6584c-226">260</span><span class="sxs-lookup"><span data-stu-id="6584c-226">260</span></span>|  
  
 <span data-ttu-id="6584c-227">Wenn Ihr Anbieter keine hierarchischen Rowsets verarbeiten kann, können Sie die Ergebnisse mit dem FLATTEN-Schlüsselwort in der Vorhersageabfrage vereinfachen.</span><span class="sxs-lookup"><span data-stu-id="6584c-227">If your provider cannot handle hierarchical rowsets, you can flatten the results by using the FLATTEN keyword in the prediction query.</span></span> <span data-ttu-id="6584c-228">Weitere Informationen sowie Beispiele vereinfachter Rowsets finden Sie unter [SELECT &#40;DMX&#41;](/sql/dmx/select-dmx).</span><span class="sxs-lookup"><span data-stu-id="6584c-228">For more information, including examples of flattened rowsets, see [SELECT &#40;DMX&#41;](/sql/dmx/select-dmx).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="6584c-229">Weitere Informationen</span><span class="sxs-lookup"><span data-stu-id="6584c-229">See Also</span></span>  
 <span data-ttu-id="6584c-230">[Inhalts Abfragen &#40;Data Mining-&#41;](content-queries-data-mining.md) </span><span class="sxs-lookup"><span data-stu-id="6584c-230">[Content Queries &#40;Data Mining&#41;](content-queries-data-mining.md) </span></span>  
 [<span data-ttu-id="6584c-231">Datendefinitionsabfragen &#40;Data Mining&#41;</span><span class="sxs-lookup"><span data-stu-id="6584c-231">Data Definition Queries &#40;Data Mining&#41;</span></span>](data-definition-queries-data-mining.md)  
  
  
