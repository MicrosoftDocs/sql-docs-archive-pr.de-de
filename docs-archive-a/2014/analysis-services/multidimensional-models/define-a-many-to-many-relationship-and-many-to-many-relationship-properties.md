---
title: Definieren einer m:n-Beziehung und der m:n-Beziehungseigenschaften | Microsoft-Dokumentation
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: analysis-services
ms.topic: conceptual
helpviewer_keywords:
- many-to-many relationships [Analysis Services]
ms.assetid: edb5f61a-a581-467a-a367-134b7f9b849f
author: minewiskan
ms.author: owend
ms.openlocfilehash: 1cd5d46ce07ff8eb6a3893c0dac261797c6ef19e
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 08/04/2020
ms.locfileid: "87621700"
---
# <a name="define-a-many-to-many-relationship-and-many-to-many-relationship-properties"></a><span data-ttu-id="e680b-102">Definieren einer m:n-Beziehung und deren Eigenschaften</span><span class="sxs-lookup"><span data-stu-id="e680b-102">Define a Many-to-Many Relationship and Many-to-Many Relationship Properties</span></span>
  <span data-ttu-id="e680b-103">In diesem Thema werden m:n-Dimensionen in Analysis Services erläutert. Zusätzlich wird beschrieben, in welchen Fällen sie verwendet und wie sie erstellt werden.</span><span class="sxs-lookup"><span data-stu-id="e680b-103">This topic explains many-to-many dimensions in Analysis Services, including when to use them and how to create them.</span></span>  
  
## <a name="introduction"></a><span data-ttu-id="e680b-104">Einführung</span><span class="sxs-lookup"><span data-stu-id="e680b-104">Introduction</span></span>  
 <span data-ttu-id="e680b-105">Analysis Services unterstützt m:n-Dimensionen und ermöglicht so komplexere Analysen als diejenigen, die in einem klassischen Sternschema modelliert werden können.</span><span class="sxs-lookup"><span data-stu-id="e680b-105">Analysis Services supports many-to-many dimensions, allowing for more complex analytics than what can be described in a classic star schema.</span></span> <span data-ttu-id="e680b-106">In einem klassischen Sternschema verfügen alle Dimensionen über eine 1:n-Beziehung mit einer Faktentabelle.</span><span class="sxs-lookup"><span data-stu-id="e680b-106">In a classic star schema, all dimensions have a one-to-many relationship with a fact table.</span></span> <span data-ttu-id="e680b-107">Jeder Fakt ist mit einem Dimensionselement verknüpft, und ein einzelnes Dimensionselement ist vielen Fakten zugeordnet.</span><span class="sxs-lookup"><span data-stu-id="e680b-107">Each fact joins to one dimension member; a single dimension member is associated with many facts.</span></span>  
  
 <span data-ttu-id="e680b-108">Durch m:n-Beziehungen wird diese Modellierungsbeschränkung aufgehoben, da ein Fakt (z. B. ein Kontensaldo) mehreren Elementen derselben Dimension zugeordnet werden kann (der Saldo eines Gemeinschaftskontos kann zwei oder mehr Besitzern eines Gemeinschaftskontos zugeordnet werden).</span><span class="sxs-lookup"><span data-stu-id="e680b-108">Many-to-many removes this modeling restriction by enabling a fact (such as an account balance) to be associated with multiple members of the same dimension (the balance of a joint account can be attributed to two or more owners of a joint account).</span></span>  
  
 <span data-ttu-id="e680b-109">Grundsätzlich entspricht eine m:n-Dimensionsbeziehung in Analysis Services m:n-Beziehungen in einem relationalen Modell und unterstützt dieselben Szenarien.</span><span class="sxs-lookup"><span data-stu-id="e680b-109">Conceptually, a many-to-many dimensional relationship in Analysis Services is equivalent to many-to-many relationships in a relational model, supporting the same kinds of scenarios.</span></span> <span data-ttu-id="e680b-110">Typische Beispiele für m:n-Beziehungen:</span><span class="sxs-lookup"><span data-stu-id="e680b-110">Common examples of many-to-many include:</span></span>  
  
-   <span data-ttu-id="e680b-111">Studenten schreiben sich in viele Kurse ein, und an jedem Kurs nehmen zahlreiche Studenten teil.</span><span class="sxs-lookup"><span data-stu-id="e680b-111">Students are enrolled in many courses; each course has many students.</span></span>  
  
-   <span data-ttu-id="e680b-112">Ärzte verfügen über viele Patienten, und Patienten verfügen über viele Ärzte.</span><span class="sxs-lookup"><span data-stu-id="e680b-112">Doctors have many patients; patients have many doctors.</span></span>  
  
-   <span data-ttu-id="e680b-113">Kunden verfügen über viele Bankkonten, und Bankkonten können sich im Besitz mehrerer Kunden befinden.</span><span class="sxs-lookup"><span data-stu-id="e680b-113">Customers have many bank accounts; bank accounts might belong to more than one customer.</span></span>  
  
-   <span data-ttu-id="e680b-114">In Adventure Works haben viele Kunden viele Gründe, ein Produkt zu bestellen, und ein Verkaufsgrund kann vielen Bestellungen zugeordnet werden.</span><span class="sxs-lookup"><span data-stu-id="e680b-114">In Adventure Works, many customers have many reasons for ordering a product, and a sales reason can be associated with many orders.</span></span>  
  
 <span data-ttu-id="e680b-115">Aus analytischer Sicht entspricht das Problem, das durch eine m:n-Beziehung aufgelöst wird, einer genauen Darstellung einer Anzahl oder Summe im Verhältnis zur Dimensionsbeziehung (bei der Ausführung von Berechnungen für ein bestimmtes Dimensionselement werden Doppelzählungen normalerweise entfernt).</span><span class="sxs-lookup"><span data-stu-id="e680b-115">Analytically, the problem that a many-to-many relationship solves is accurate representation of a count or sum relative to the dimensional relationship (usually by eliminating double-counts when performing calculations for a specific dimension member).</span></span> <span data-ttu-id="e680b-116">Dieser Zusammenhang wird anhand eines Beispiels deutlich.</span><span class="sxs-lookup"><span data-stu-id="e680b-116">An example is necessary to clarify this point.</span></span> <span data-ttu-id="e680b-117">Angenommen, ein Produkt oder Dienst gehört mehr als einer Kategorie an.</span><span class="sxs-lookup"><span data-stu-id="e680b-117">Consider a product or service that belongs to more than one category.</span></span> <span data-ttu-id="e680b-118">Wenn Sie die Anzahl der Dienste nach Kategorie ermitteln, sollte ein Dienst, der beiden Kategorien angehört in jeder Kategorie enthalten sein.</span><span class="sxs-lookup"><span data-stu-id="e680b-118">If you were counting the number of services by category, you would want a service belonging to both categories to be included in each one.</span></span> <span data-ttu-id="e680b-119">Gleichzeitig möchten Sie nicht mehr Dienste angeben, als Sie tatsächlich bereitstellen.</span><span class="sxs-lookup"><span data-stu-id="e680b-119">At the same time, you would not want to overstate the number of services that you provide.</span></span> <span data-ttu-id="e680b-120">Wenn Sie die m:n-Dimensionsbeziehung angeben, erhöht sich die Wahrscheinlichkeit, dass bei der Abfrage nach Kategorie oder nach Dienst die richtigen Ergebnisse zurückgegeben werden.</span><span class="sxs-lookup"><span data-stu-id="e680b-120">By specifying the many-to-many dimensional relationship, you are more likely to get the correct results back when querying by category or by service.</span></span> <span data-ttu-id="e680b-121">Um sicherzustellen, dass diese Annahme zutrifft, sollten jedoch eingehende Tests durchgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="e680b-121">However, thorough testing is always necessary to ensure that this is the case.</span></span>  
  
 <span data-ttu-id="e680b-122">Aus struktureller Sicht ist das Erstellen einer m:n-Dimensionsbeziehung mit dem Erstellen einer m:n-Beziehung in einem relationalen Datenmodell vergleichbar.</span><span class="sxs-lookup"><span data-stu-id="e680b-122">Structurally, creating a many-to-many dimensional relationship is similar to how you might create many-to-many in a relational data model.</span></span> <span data-ttu-id="e680b-123">Während ein relationales Modell eine *Verknüpfungstabelle* zum Speichern von Zeilenzuordnungen verwendet, nutzt ein mehrdimensionales Modell eine *Zwischenmeasuregruppe*.</span><span class="sxs-lookup"><span data-stu-id="e680b-123">Whereas a relational model uses a *junction table* to store row associations, a multidimensional model uses an *intermediate measure group*.</span></span> <span data-ttu-id="e680b-124">Als "Zwischenmeasuregruppe" wird eine Tabelle bezeichnet, durch die Elemente aus unterschiedlichen Dimensionen zugeordnet werden.</span><span class="sxs-lookup"><span data-stu-id="e680b-124">Intermediate measure group is the term we use to refer to a table that maps members from different dimensions.</span></span>  
  
 <span data-ttu-id="e680b-125">Eine m:n-Dimensionsbeziehung wird in einem Cubediagramm nicht visuell dargestellt.</span><span class="sxs-lookup"><span data-stu-id="e680b-125">Visually, a many-to-many dimensional relationship is not indicated in a cube diagram.</span></span> <span data-ttu-id="e680b-126">Stattdessen sollten Sie die m:n-Beziehungen in einem Modell mithilfe der Registerkarte Dimensionsverwendung identifizieren.</span><span class="sxs-lookup"><span data-stu-id="e680b-126">Instead, use the Dimension Usage tab to quickly identify any many-to-many relationships in a model.</span></span> <span data-ttu-id="e680b-127">Eine m:n-Beziehung wird durch das folgende Symbol gekennzeichnet.</span><span class="sxs-lookup"><span data-stu-id="e680b-127">A many-to-many relationship is indicated by the following icon.</span></span>  
  
 <span data-ttu-id="e680b-128">![m:n-Symbol in Dimensionsverwendung](../media/ssas-m2m-icondimusage.png "m:n-Symbol in Dimensionsverwendung")</span><span class="sxs-lookup"><span data-stu-id="e680b-128">![Many-to-many icon in dimension usage](../media/ssas-m2m-icondimusage.png "Many-to-many icon in dimension usage")</span></span>  
  
 <span data-ttu-id="e680b-129">Klicken Sie auf die Schaltfläche, um das Dialogfeld Beziehung definieren zu öffnen und zu überprüfen, ob die Beziehung vom Typ m:n ist, und um zu ermitteln, welche Zwischenmeasuregruppe in der Beziehung verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="e680b-129">Click the button to open the Define Relationship dialog box to verify the relationship type is many-to-many, and to view which intermediate measure group is used in the relationship.</span></span>  
  
 <span data-ttu-id="e680b-130">![Schaltfläche "Beziehung definieren" in der Dimensions Verwendung](../media/ssas-m2m-btndimusage.png "Schaltfläche "Beziehung definieren" in der Dimensions Verwendung")</span><span class="sxs-lookup"><span data-stu-id="e680b-130">![Define Relationship button  in dimension usage](../media/ssas-m2m-btndimusage.png "Define Relationship button  in dimension usage")</span></span>  
  
 <span data-ttu-id="e680b-131">In den nachfolgenden Abschnitten erfahren Sie, wie eine m:n-Dimension eingerichtet wird und Verhaltensweisen von Modellen getestet werden.</span><span class="sxs-lookup"><span data-stu-id="e680b-131">In subsequent sections, you will learn how to set up a many-to-many dimension and test model behaviors.</span></span> <span data-ttu-id="e680b-132">Wenn Sie zusätzliche Informationen benötigen oder zunächst die Tutorials ausführen möchten, finden Sie Hinweise unter **Weitere Informationen** am Ende dieses Artikels.</span><span class="sxs-lookup"><span data-stu-id="e680b-132">If you would rather review additional information or try tutorials first, see **Learn More** at the end of this article.</span></span>  
  
## <a name="create-a-many-to-many-dimension"></a><span data-ttu-id="e680b-133">Erstellen einer m:n-Dimension</span><span class="sxs-lookup"><span data-stu-id="e680b-133">Create a many-to-many dimension</span></span>  
 <span data-ttu-id="e680b-134">Eine einfache m:n-Beziehung umfasst zwei Dimensionen mit einer m:n-Kardinalität, eine Zwischenmeasuregruppe zum Speichern von Elementzuordnungen und eine Faktenmeasuregruppe, die messbare Daten enthält, z. B. den Gesamtumsatz oder den Saldo eines Bankkontos.</span><span class="sxs-lookup"><span data-stu-id="e680b-134">A simple many-to-many relationship includes two dimensions having a many-to-many cardinality, an intermediate measure group for storing member associations, and a fact measure group containing measurable data, such as sum of total sales or the balance of a bank account.</span></span>  
  
 <span data-ttu-id="e680b-135">Dimensionen in einer m:n-Beziehung können über entsprechende Tabellen in der DSV verfügen, wobei jede Dimension im Modell auf einer vorhandenen Tabelle in einer Datenquelle basiert.</span><span class="sxs-lookup"><span data-stu-id="e680b-135">Dimensions in a many-to-many relationship might have correspondent tables in the DSV, where each dimension in the model is based on an existing table in a data source.</span></span> <span data-ttu-id="e680b-136">Umgekehrt können die Dimensionen im Modell von weniger bzw. anderen physischen Tabellen in der DSV abgeleitet sein.</span><span class="sxs-lookup"><span data-stu-id="e680b-136">Conversely, the dimensions in your model might derive from fewer or different physical tables in the DSV.</span></span> <span data-ttu-id="e680b-137">Der Adventure Works-Beispielcube veranschaulicht anhand von Sales Reasons und Sales Orders eine m:n-Beziehung unter Verwendung von Dimensionen, die als reine Modelldatenstrukturen vorkommen und keine physischen Entsprechungen in der DSV besitzen.</span><span class="sxs-lookup"><span data-stu-id="e680b-137">Using Sales Reasons and Sales Orders as a case in point, the Adventure Works sample cube demonstrates a many-to-many relationship using dimensions that exist as model-only data structures, without physical counterparts in the DSV.</span></span> <span data-ttu-id="e680b-138">Die Sales Order-Dimension basiert auf einer Faktentabelle in der zugrundeliegenden Datenquelle und nicht auf einer Dimensionstabelle.</span><span class="sxs-lookup"><span data-stu-id="e680b-138">The Sales Order dimension is based on a fact table, rather than a dimension table, in the underlying data source.</span></span>  
  
 <span data-ttu-id="e680b-139">Im nächsten Verfahren wird davon ausgegangen, dass Sie bereits wissen, welche Entitäten an der m:n-Beziehung beteiligt sind.</span><span class="sxs-lookup"><span data-stu-id="e680b-139">The next procedure assumes that you already know which entities participate in the many-to-many relationship.</span></span> <span data-ttu-id="e680b-140">Unter **Weitere Informationen** finden Sie weiterführende Inhalte.</span><span class="sxs-lookup"><span data-stu-id="e680b-140">See **Learn More** for further study.</span></span>  
  
 <span data-ttu-id="e680b-141">Zur Veranschaulichung der Schritte, die zum Erstellen einer m:n-Beziehung erforderlich sind, wird in diesem Verfahren eine der m:n-Beziehungen im Adventure Works-Beispielcube erneut erstellt.</span><span class="sxs-lookup"><span data-stu-id="e680b-141">To illustrate the steps used to create a many-to-many relationship, this procedure re-creates one of the many-to-many relationships in the Adventure Works sample cube.</span></span> <span data-ttu-id="e680b-142">Wenn Sie die Quelldaten (d. h. das Data Warehouse-Beispiel für AdventureWorks) auf der Instanz einer relationalen Datenbank-Engine installiert haben, können Sie diesen Schritten folgen.</span><span class="sxs-lookup"><span data-stu-id="e680b-142">If you have the source data (that is, the Adventure Works sample data warehouse) installed on a relational database engine instance, you can follow these steps.</span></span>  
  
#### <a name="step-1-verify-dsv-relationships"></a><span data-ttu-id="e680b-143">Schritt 1: Überprüfen der DSV-Beziehungen</span><span class="sxs-lookup"><span data-stu-id="e680b-143">Step 1: Verify DSV relationships</span></span>  
  
1.  <span data-ttu-id="e680b-144">Erstellen Sie in SQL Server Data Tools in einem mehrdimensionalen Projekt eine Datenquelle für das relationale Data Warehouse Adventure Works DW 2012, das auf einer SQL Server-Datenbank-Engine-Instanz gehostet wird.</span><span class="sxs-lookup"><span data-stu-id="e680b-144">In SQL Server Data Tools, in a multidimensional project, create a data source to the Adventure Works DW 2012 relational data warehouse, hosted on a SQL Server Database Engine instance.</span></span>  
  
2.  <span data-ttu-id="e680b-145">Erstellen Sie unter Verwendung der folgenden vorhandenen Tabellen eine Datenquellensicht:</span><span class="sxs-lookup"><span data-stu-id="e680b-145">Create a Data Source View using the following existing tables:</span></span>  
  
    -   <span data-ttu-id="e680b-146">FactInternetSales</span><span class="sxs-lookup"><span data-stu-id="e680b-146">FactInternetSales</span></span>  
  
    -   <span data-ttu-id="e680b-147">FactInternetSalesReason</span><span class="sxs-lookup"><span data-stu-id="e680b-147">FactInternetSalesReason</span></span>  
  
    -   <span data-ttu-id="e680b-148">DimSalesReason</span><span class="sxs-lookup"><span data-stu-id="e680b-148">DimSalesReason</span></span>  
  
3.  <span data-ttu-id="e680b-149">Stellen Sie sicher, dass alle Tabellen, die in den m:n-Beziehungen verwendet werden sollen, in der DSV durch Primärschlüsselbeziehungen zueinander in Beziehung stehen.</span><span class="sxs-lookup"><span data-stu-id="e680b-149">Verify that all of the tables you plan to use in the many-to-many relationships are related in the DSV through primary key relationships.</span></span> <span data-ttu-id="e680b-150">Dies ist erforderlich, damit in einem nachfolgenden Schritt eine Verknüpfung mit der Zwischenmeasuregruppe erstellt werden kann.</span><span class="sxs-lookup"><span data-stu-id="e680b-150">This is a requirement for establishing a link to the intermediate measure group in a subsequent step.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="e680b-151">Wenn die zugrunde liegende Datenquelle keine Primär- und Fremdschlüsselbeziehungen aufweist, können Sie die Beziehungen in der DSV manuell erstellen.</span><span class="sxs-lookup"><span data-stu-id="e680b-151">If the underlying data source does not provide primary and foreign key relationships, you can create the relationships manually in the DSV.</span></span> <span data-ttu-id="e680b-152">Weitere Informationen finden Sie unter [Definieren von logischen Beziehungen in einer Datenquellensicht &#40;Analysis Services&#41;](define-logical-relationships-in-a-data-source-view-analysis-services.md).</span><span class="sxs-lookup"><span data-stu-id="e680b-152">For more information, see [Define Logical Relationships in a Data Source View &#40;Analysis Services&#41;](define-logical-relationships-in-a-data-source-view-analysis-services.md).</span></span>  
  
     <span data-ttu-id="e680b-153">Aus dem folgenden Beispiel ist ersichtlich, dass die in diesem Verfahren verwendeten Tabellen mit Primärschlüsseln verknüpft sind.</span><span class="sxs-lookup"><span data-stu-id="e680b-153">The following example confirms that the tables used in this procedure are linked using primary keys.</span></span>  
  
     <span data-ttu-id="e680b-154">![DSV mit verknüpften Tabellen](../media/ssas-m2m-dsvpkeys.PNG "DSV mit verknüpften Tabellen")</span><span class="sxs-lookup"><span data-stu-id="e680b-154">![DSV showing related tables](../media/ssas-m2m-dsvpkeys.PNG "DSV showing related tables")</span></span>  
  
#### <a name="step-2-create-dimensions-and-measure-groups"></a><span data-ttu-id="e680b-155">Schritt 2: Erstellen von Dimensionen und Measuregruppen</span><span class="sxs-lookup"><span data-stu-id="e680b-155">Step 2: Create dimensions and measure groups</span></span>  
  
1.  <span data-ttu-id="e680b-156">Klicken Sie in SQL Server Data Tools in einem mehrdimensionalen Projekt mit der rechten Maustaste auf **Dimensionen** , und wählen Sie **Neue Dimension**aus.</span><span class="sxs-lookup"><span data-stu-id="e680b-156">In SQL Server Data Tools, in a multidimensional project, right-click **Dimensions** and select **New Dimension**.</span></span>  
  
2.  <span data-ttu-id="e680b-157">Erstellen Sie basierend auf der vorhandenen **DimSalesReason**-Tabelle eine neue Dimension.</span><span class="sxs-lookup"><span data-stu-id="e680b-157">Create a new dimension based on existing table, **DimSalesReason**.</span></span> <span data-ttu-id="e680b-158">Übernehmen Sie bei der Angabe der Quelle alle Standardwerte.</span><span class="sxs-lookup"><span data-stu-id="e680b-158">Accept all of the default values when specifying the source.</span></span>  
  
     <span data-ttu-id="e680b-159">Wählen Sie alle Attribute aus.</span><span class="sxs-lookup"><span data-stu-id="e680b-159">For attributes, select all.</span></span>  
  
     <span data-ttu-id="e680b-160">![Attributliste in neuer Dimension](../media/ssas-m2m-dimsalesreason.PNG "Attributliste in neuer Dimension")</span><span class="sxs-lookup"><span data-stu-id="e680b-160">![Attributes list in new dimension](../media/ssas-m2m-dimsalesreason.PNG "Attributes list in new dimension")</span></span>  
  
3.  <span data-ttu-id="e680b-161">Erstellen Sie basierend auf der vorhandenen Fact Internet Sales-Tabelle eine zweite Dimension.</span><span class="sxs-lookup"><span data-stu-id="e680b-161">Create a second dimension based on existing table, Fact Internet Sales.</span></span> <span data-ttu-id="e680b-162">Obwohl dies eine Faktentabelle ist, enthält sie Sales Order-Informationen.</span><span class="sxs-lookup"><span data-stu-id="e680b-162">Although this is a fact table, it contains Sales Order information.</span></span> <span data-ttu-id="e680b-163">Wir verwenden sie, um eine Sales Order-Dimension zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="e680b-163">We'll use it to build a Sales Order dimension.</span></span>  
  
4.  <span data-ttu-id="e680b-164">In Quellinformationen angeben wird eine Warnung mit dem Hinweis angezeigt, dass eine Namensspalte angegeben werden muss.</span><span class="sxs-lookup"><span data-stu-id="e680b-164">In Specify Source Information, you will see a warning that indicates a Name column must be specified.</span></span> <span data-ttu-id="e680b-165">Wählen Sie als Namen **SalesOrderNumber** aus.</span><span class="sxs-lookup"><span data-stu-id="e680b-165">Choose **SalesOrderNumber** as the Name.</span></span>  
  
     <span data-ttu-id="e680b-166">![Sales Order-Dimension mit Namensspalte](../media/ssas-m2m-dimsalesordersource.PNG "Sales Order-Dimension mit Namensspalte")</span><span class="sxs-lookup"><span data-stu-id="e680b-166">![Sales Order dimension showing the name column](../media/ssas-m2m-dimsalesordersource.PNG "Sales Order dimension showing the name column")</span></span>  
  
5.  <span data-ttu-id="e680b-167">Wählen Sie auf der nächsten Assistentenseite die Attribute aus.</span><span class="sxs-lookup"><span data-stu-id="e680b-167">On the next page of the wizard, choose the attributes.</span></span> <span data-ttu-id="e680b-168">In diesem Beispiel reicht es aus, **SalesOrderNumber**auszuwählen.</span><span class="sxs-lookup"><span data-stu-id="e680b-168">In this example, you can select just **SalesOrderNumber**.</span></span>  
  
     <span data-ttu-id="e680b-169">![Sales Order-Dimension mit Attributliste](../media/ssas-m2m-dimsalesorderattrib.PNG "Sales Order-Dimension mit Attributliste")</span><span class="sxs-lookup"><span data-stu-id="e680b-169">![Sales order dimension showing attribute list](../media/ssas-m2m-dimsalesorderattrib.PNG "Sales order dimension showing attribute list")</span></span>  
  
6.  <span data-ttu-id="e680b-170">Benennen Sie die Dimension in **Dim Sales Orders**um, damit eine konsistente Benennungskonvention für die Dimensionen verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="e680b-170">Rename the dimension to **Dim Sales Orders**, so that you have a consistent naming convention for the dimensions.</span></span>  
  
     <span data-ttu-id="e680b-171">![Assistentenseite zum Umbenennen der Dimension](../media/ssas-m2m-dimsalesorders.PNG "Assistentenseite zum Umbenennen der Dimension")</span><span class="sxs-lookup"><span data-stu-id="e680b-171">![Wizard page showing dimension rename](../media/ssas-m2m-dimsalesorders.PNG "Wizard page showing dimension rename")</span></span>  
  
7.  <span data-ttu-id="e680b-172">Klicken Sie mit der rechten Maustaste auf **Cubes** , und wählen Sie **Neuer Cube**aus.</span><span class="sxs-lookup"><span data-stu-id="e680b-172">Right-click **Cubes** and select **New Cube**.</span></span>  
  
8.  <span data-ttu-id="e680b-173">Wählen Sie in den Measuregruppentabellen **FactInternetSales** und **FactInternetSalesReason**aus.</span><span class="sxs-lookup"><span data-stu-id="e680b-173">In measure group tables, choose **FactInternetSales** and **FactInternetSalesReason**.</span></span>  
  
     <span data-ttu-id="e680b-174">Sie wählen die **FactInternetSales** -Tabelle aus, da sie die Measures enthält, die Sie im Cube verwenden möchten.</span><span class="sxs-lookup"><span data-stu-id="e680b-174">You are choosing **FactInternetSales** because it contains the measures you want to use in the cube.</span></span> <span data-ttu-id="e680b-175">Sie wählen die **FactInternetSalesReason** -Tabelle aus, da sie die Zwischenmeasuregruppe darstellt, die die Elementzuordnungsdaten bereitstellt, durch die Bestellungen und Verkaufsgründe zueinander in Beziehung gesetzt werden.</span><span class="sxs-lookup"><span data-stu-id="e680b-175">You are choosing **FactInternetSalesReason** because it is the intermediate measure group, providing member association data that relates sales orders to sales reasons.</span></span>  
  
9. <span data-ttu-id="e680b-176">Wählen Sie Measures für jede Faktentabelle aus.</span><span class="sxs-lookup"><span data-stu-id="e680b-176">Choose measures for each fact table.</span></span>  
  
     <span data-ttu-id="e680b-177">Löschen Sie alle Measures, und wählen Sie nur **Sales Amount** und **Fact Internet Sales Count** unten in der Liste aus, um das Modell zu vereinfachen.</span><span class="sxs-lookup"><span data-stu-id="e680b-177">To simplify your model, clear all the measures, and then select just **Sales Amount** and **Fact Internet Sales Count** at the bottom of the list.</span></span> <span data-ttu-id="e680b-178">Da **FactInternetSalesReason** nur über ein Measure verfügt, wird es automatisch ausgewählt.</span><span class="sxs-lookup"><span data-stu-id="e680b-178">The **FactInternetSalesReason** only has one measure, so it is selected for you automatically.</span></span>  
  
10. <span data-ttu-id="e680b-179">In der Dimensionsliste sollten **Dim Sales Reason** und **Dim Sales Orders**angezeigt werden.</span><span class="sxs-lookup"><span data-stu-id="e680b-179">In the dimension list, you should see **Dim Sales Reason** and **Dim Sales Orders**.</span></span>  
  
     <span data-ttu-id="e680b-180">Auf der Seite „Neue Dimensionen auswählen“ werden Sie vom Assistenten aufgefordert, eine neue Dimension für **Fact Internet Sales Dimension**zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="e680b-180">In the Select New Dimensions page, the wizard prompts you to create a new dimension for **Fact Internet Sales Dimension**.</span></span> <span data-ttu-id="e680b-181">Da Sie diese Dimension nicht benötigen, können Sie sie aus der Liste löschen.</span><span class="sxs-lookup"><span data-stu-id="e680b-181">You do not need this dimension, so you can clear it from the list.</span></span>  
  
11. <span data-ttu-id="e680b-182">Geben Sie dem Cube einen Namen, und klicken Sie auf **Fertig stellen**.</span><span class="sxs-lookup"><span data-stu-id="e680b-182">Name the cube and click **Finish**.</span></span>  
  
#### <a name="step-3-define-many-to-many-relationship"></a><span data-ttu-id="e680b-183">Schritt 3: Definieren einer m:n-Beziehung</span><span class="sxs-lookup"><span data-stu-id="e680b-183">Step 3: Define Many-to-Many relationship</span></span>  
  
1.  <span data-ttu-id="e680b-184">Klicken Sie im Cube-Designer auf die Registerkarte Dimensions Verwendung. Beachten Sie, dass zwischen **Dim Sales Reason** und **Fact Internet Sales**bereits eine m:n-Beziehung besteht.</span><span class="sxs-lookup"><span data-stu-id="e680b-184">In cube designer, click Dimension Usage tab. Notice that there is already a many-to-many relationship between **Dim Sales Reason** and **Fact Internet Sales**.</span></span> <span data-ttu-id="e680b-185">Wie Sie wissen, kennzeichnet das folgende Symbol eine m:n-Beziehung.</span><span class="sxs-lookup"><span data-stu-id="e680b-185">Recall that the following icon indicates a many-to-many relationship.</span></span>  
  
     <span data-ttu-id="e680b-186">![m:n-Symbol in Dimensionsverwendung](../media/ssas-m2m-icondimusage.png "m:n-Symbol in Dimensionsverwendung")</span><span class="sxs-lookup"><span data-stu-id="e680b-186">![Many-to-many icon in dimension usage](../media/ssas-m2m-icondimusage.png "Many-to-many icon in dimension usage")</span></span>  
  
2.  <span data-ttu-id="e680b-187">Klicken Sie auf die Zelle am Schnittpunkt zwischen **Dim Sales Reason** und **Fact Internet Sales**, und klicken Sie dann auf die Schaltfläche, um das Dialogfeld „Beziehung definieren“ zu öffnen.</span><span class="sxs-lookup"><span data-stu-id="e680b-187">Click on the intersection cell between **Dim Sales Reason** and **Fact Internet Sales**, and then click the button to open the Define Relationship dialog box.</span></span>  
  
     <span data-ttu-id="e680b-188">Wie Sie sehen, wird dieses Dialogfeld zum Angeben einer m:n-Beziehung verwendet.</span><span class="sxs-lookup"><span data-stu-id="e680b-188">You can see that this dialog box is used to specify a many-to-many relationship.</span></span> <span data-ttu-id="e680b-189">Wenn Sie stattdessen Dimensionen mit einer regulären Beziehung hinzufügen würden, könnten Sie dieses Dialogfeld verwenden, um sie in eine m:n-Beziehung zu ändern.</span><span class="sxs-lookup"><span data-stu-id="e680b-189">If you were adding dimensions that had a regular relationship instead, you would use this dialog box to change it to many-to-many.</span></span>  
  
     <span data-ttu-id="e680b-190">![Schaltfläche "Beziehung definieren" in der Dimensions Verwendung](../media/ssas-m2m-btndimusage.png "Schaltfläche "Beziehung definieren" in der Dimensions Verwendung")</span><span class="sxs-lookup"><span data-stu-id="e680b-190">![Define Relationship button  in dimension usage](../media/ssas-m2m-btndimusage.png "Define Relationship button  in dimension usage")</span></span>  
  
3.  <span data-ttu-id="e680b-191">Stellen Sie das Projekt auf einer mehrdimensionalen Analysis Services-Instanz bereit.</span><span class="sxs-lookup"><span data-stu-id="e680b-191">Deploy the project to an Analysis Services multidimensional instance.</span></span> <span data-ttu-id="e680b-192">Im nächsten Schritt durchsuchen Sie den Cube in Excel, um dessen Verhalten zu überprüfen.</span><span class="sxs-lookup"><span data-stu-id="e680b-192">In the next step, you will browse the cube in Excel to verify its behaviors.</span></span>  
  
## <a name="testing-many-to-many"></a><span data-ttu-id="e680b-193">Testen der m:n-Beziehung</span><span class="sxs-lookup"><span data-stu-id="e680b-193">Testing Many-to-Many</span></span>  
 <span data-ttu-id="e680b-194">Wenn Sie eine m:n-Beziehung in einem Cube definieren, sollte dieser unbedingt getestet werden, um sicherzustellen, dass Abfragen die erwarteten Ergebnisse zurückgeben.</span><span class="sxs-lookup"><span data-stu-id="e680b-194">When you define a many-to-many relationship in a cube, testing is imperative to ensure queries return expected results.</span></span> <span data-ttu-id="e680b-195">Der Cube sollte unter Verwendung des Clientanwendungstools getestet werden, das von Endbenutzern verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="e680b-195">You should test the cube using the client application tool that will be used by end-users.</span></span> <span data-ttu-id="e680b-196">Im nächsten Verfahren verwenden Sie Excel, um eine Verbindung mit dem Cube herzustellen und die Abfrageergebnisse zu überprüfen.</span><span class="sxs-lookup"><span data-stu-id="e680b-196">In this next procedure, you will use Excel to connect to the cube and verify query results.</span></span>  
  
#### <a name="browse-the-cube-in-excel"></a><span data-ttu-id="e680b-197">Durchsuchen des Cubes in Excel</span><span class="sxs-lookup"><span data-stu-id="e680b-197">Browse the cube in Excel</span></span>  
  
1.  <span data-ttu-id="e680b-198">Stellen Sie das Projekt bereit, und durchsuchen Sie den Cube, um sicherzustellen, dass die Aggregationen gültig sind.</span><span class="sxs-lookup"><span data-stu-id="e680b-198">Deploy the project and then browse the cube to confirm the aggregations are valid.</span></span>  
  
2.  <span data-ttu-id="e680b-199">Klicken Sie in Excel in Analysis Services auf **Daten**  |  **aus anderen Quellen**  |  **From Analysis Services**.</span><span class="sxs-lookup"><span data-stu-id="e680b-199">In Excel, click **Data** | **From Other Sources** | **From Analysis Services**.</span></span> <span data-ttu-id="e680b-200">Geben Sie den Servernamen ein, und wählen Sie die Datenbank und den Cube aus.</span><span class="sxs-lookup"><span data-stu-id="e680b-200">Enter the name of the server, choose the database and cube.</span></span>  
  
3.  <span data-ttu-id="e680b-201">Erstellen Sie eine PivotTable mit folgenden Elementen:</span><span class="sxs-lookup"><span data-stu-id="e680b-201">Create a PivotTable that uses the following:</span></span>  
  
    -   <span data-ttu-id="e680b-202">**Sales Amount** als Wert</span><span class="sxs-lookup"><span data-stu-id="e680b-202">**Sales Amount** as the Value</span></span>  
  
    -   <span data-ttu-id="e680b-203">**Sales Reason Name** für Spalten</span><span class="sxs-lookup"><span data-stu-id="e680b-203">**Sales Reason Name** on Columns</span></span>  
  
    -   <span data-ttu-id="e680b-204">**Sales Order Number** für Zeilen</span><span class="sxs-lookup"><span data-stu-id="e680b-204">**Sales Order Number** on Rows</span></span>  
  
4.  <span data-ttu-id="e680b-205">Analysieren Sie die Ergebnisse.</span><span class="sxs-lookup"><span data-stu-id="e680b-205">Analyze the results.</span></span> <span data-ttu-id="e680b-206">Da wir Beispieldaten verwenden, entsteht zunächst der Eindruck, dass alle Bestellungen identische Werte aufweisen.</span><span class="sxs-lookup"><span data-stu-id="e680b-206">Because we are using sample data, the initial impression is that all sales orders have identical values.</span></span> <span data-ttu-id="e680b-207">Wenn Sie jedoch einen Bildlauf nach unten durchführen, sehen Sie, dass die Daten variieren.</span><span class="sxs-lookup"><span data-stu-id="e680b-207">However, if you scroll down, you begin to see data variation.</span></span>  
  
     <span data-ttu-id="e680b-208">Etwas weiter unten finden Sie den Verkaufsbetrag und die Verkaufsgründe für die Bestellnummer **SO5382**.</span><span class="sxs-lookup"><span data-stu-id="e680b-208">Part way down, you can find the sales amount and sales reasons for order number **SO5382**.</span></span> <span data-ttu-id="e680b-209">Die Gesamtsumme dieser Bestellung beträgt **539,99**, und die dieser Bestellung zugeordneten Verkaufsgründe sind Promotion, Other und Price.</span><span class="sxs-lookup"><span data-stu-id="e680b-209">Grand total of this particular order is **539.99**, and the purchase reasons attributed to this order include Promotion, Other and Price.</span></span>  
  
     <span data-ttu-id="e680b-210">![Excel-Arbeitsblatt mit m:n-Aggregationen](../media/ssas-m2m-excel.png "Excel-Arbeitsblatt mit m:n-Aggregationen")</span><span class="sxs-lookup"><span data-stu-id="e680b-210">![Excel worksheet showing many-to-many aggregations](../media/ssas-m2m-excel.png "Excel worksheet showing many-to-many aggregations")</span></span>  
  
     <span data-ttu-id="e680b-211">Beachten Sie, dass der Verkaufsbetrag für die Bestellung korrekt berechnet wurde. Er beträgt **539,99** für die gesamte Bestellung.</span><span class="sxs-lookup"><span data-stu-id="e680b-211">Notice that the Sales Amount is correctly calculated for the order; it is **539.99** for the entire order.</span></span> <span data-ttu-id="e680b-212">Obwohl für jeden Grund **539,99** angegeben ist, wurde dieser Wert nicht für alle drei Gründe summiert, wodurch die Gesamtsumme fälschlicherweise überhöht ist.</span><span class="sxs-lookup"><span data-stu-id="e680b-212">Although **539.99** is indicated for each reason, that value is not summed for all three reasons, erroneously inflating our grand total.</span></span>  
  
     <span data-ttu-id="e680b-213">Warum sollte unter jedem Verkaufsgrund unbedingt ein Verkaufsbetrag eingefügt werden?</span><span class="sxs-lookup"><span data-stu-id="e680b-213">Why put a sales amount under each sales reason in the first place?</span></span> <span data-ttu-id="e680b-214">Ganz einfach: Auf diese Weise können wir die Verkäufe quantifizieren, die den einzelnen Gründen zugeordnet sind.</span><span class="sxs-lookup"><span data-stu-id="e680b-214">The answer is that it allows us to identify the amount of sales we can attribute to each reason.</span></span>  
  
5.  <span data-ttu-id="e680b-215">Führen Sie einen Bildlauf zum Ende des Arbeitsblatts durch.</span><span class="sxs-lookup"><span data-stu-id="e680b-215">Scroll to the bottom of the worksheet.</span></span> <span data-ttu-id="e680b-216">Es ist deutlich zu erkennen, dass Price im Verhältnis zu anderen Gründen und der Gesamtsumme der wichtigste Grund für Kundenkäufe ist.</span><span class="sxs-lookup"><span data-stu-id="e680b-216">It is now easy to see that Price is the most important reason for customer purchases, relative to other reasons as well as the grand total.</span></span>  
  
     <span data-ttu-id="e680b-217">![Excel-Arbeitsmappe mit Gesamtsummen in m:n-Beziehung](../media/ssas-m2m-excelgrandtotal.png "Excel-Arbeitsmappe mit Gesamtsummen in m:n-Beziehung")</span><span class="sxs-lookup"><span data-stu-id="e680b-217">![Excel workbook showing totals in many-to-many](../media/ssas-m2m-excelgrandtotal.png "Excel workbook showing totals in many-to-many")</span></span>  
  
#### <a name="tips-for-handling-unexpected-query-results"></a><span data-ttu-id="e680b-218">Tipps zum Behandeln unerwarteter Abfrageergebnisse</span><span class="sxs-lookup"><span data-stu-id="e680b-218">Tips for handling unexpected query results</span></span>  
  
1.  <span data-ttu-id="e680b-219">Measures, die in einer Abfrage keine sinnvollen Ergebnisse zurückgeben, z. B. die Anzahl, sollten in der Zwischenmeasuregruppe ausgeblendet werden.</span><span class="sxs-lookup"><span data-stu-id="e680b-219">Hide measures in the intermediate measure group, such as the count, that do not return meaningful results in a query.</span></span> <span data-ttu-id="e680b-220">So wird verhindert, dass Benutzer Aggregationen verwenden, die bedeutungslose Daten erzeugen.</span><span class="sxs-lookup"><span data-stu-id="e680b-220">This prevents people from trying to use aggregations producing meaningless data.</span></span> <span data-ttu-id="e680b-221">Um ein Measure auszublenden, legen Sie im Dimensions-Designer **Sichtbarkeit** für das Attribut auf **FALSE** fest.</span><span class="sxs-lookup"><span data-stu-id="e680b-221">To hide a measure, set **Visibility** to **False** on the attribute in dimension designer.</span></span>  
  
2.  <span data-ttu-id="e680b-222">Erstellen Sie Perspektiven, um eine Teilmenge mit Measures und Dimensionen zu verwenden, die die Analysemöglichkeiten unterstützt, die Sie bereitstellen möchten.</span><span class="sxs-lookup"><span data-stu-id="e680b-222">Create perspectives to use a subset of measures and dimensions that support the analytical experience you want to provide.</span></span> <span data-ttu-id="e680b-223">Ein Cube kann zahlreiche Measuregruppen und Dimensionen enthalten, die nicht in allen Situationen reibungslos zusammenwirken.</span><span class="sxs-lookup"><span data-stu-id="e680b-223">Possibly, a cube that contains many measure groups and dimensions do not work well together in all cases.</span></span> <span data-ttu-id="e680b-224">Indem Sie die Dimensionen und Measuregruppen, die zusammen verwendet werden sollen, isolieren, ist das Ergebnis besser vorhersagbar.</span><span class="sxs-lookup"><span data-stu-id="e680b-224">By isolating the dimensions and measure groups that you intend to be used together, you ensure a more predictable outcome.</span></span>  
  
3.  <span data-ttu-id="e680b-225">Achten Sie darauf, ein Modell bereitzustellen und erneut eine Verbindung herzustellen, nachdem Sie es geändert haben.</span><span class="sxs-lookup"><span data-stu-id="e680b-225">Always remember to deploy and reconnect after changing a model.</span></span> <span data-ttu-id="e680b-226">Verwenden Sie in Excel die Schaltfläche Aktualisieren im PivotTable-Menüband Analysieren.</span><span class="sxs-lookup"><span data-stu-id="e680b-226">In Excel, use the Refresh button on the PivotTable Analyze ribbon.</span></span>  
  
4.  <span data-ttu-id="e680b-227">Es sollten keine verknüpften Measuregruppen in mehreren m:n-Beziehungen verwendet werden, insbesondere wenn sich diese Beziehungen in verschiedenen Cubes befinden.</span><span class="sxs-lookup"><span data-stu-id="e680b-227">Avoid using linked measure groups in multiple many-to-many relationships, especially when those relationships are in different cubes.</span></span> <span data-ttu-id="e680b-228">Andernfalls können mehrdeutige Aggregationen entstehen.</span><span class="sxs-lookup"><span data-stu-id="e680b-228">Doing so can result in ambiguous aggregations.</span></span> <span data-ttu-id="e680b-229">Weitere Informationen finden Sie unter [Falsche Mengen für verknüpfte Measures in Cubes mit m:n-Beziehungen](https://social.technet.microsoft.com/wiki/contents/articles/22911.incorrect-amounts-for-linked-measures-in-cubes-containing-many-to-many-relationships-ssas-troubleshooting.aspx).</span><span class="sxs-lookup"><span data-stu-id="e680b-229">For more information, see [Incorrect Amounts for Linked Measures in Cubes containing Many-to-Many Relationships](https://social.technet.microsoft.com/wiki/contents/articles/22911.incorrect-amounts-for-linked-measures-in-cubes-containing-many-to-many-relationships-ssas-troubleshooting.aspx).</span></span>  
  
##  <a name="learn-more"></a><a name="bkmk_Learn"></a><span data-ttu-id="e680b-230">Weitere Informationen</span><span class="sxs-lookup"><span data-stu-id="e680b-230">Learn more</span></span>  
 <span data-ttu-id="e680b-231">Über die folgenden Links erhalten Sie zusätzliche Informationen, mit denen Sie Ihr Wissen vertiefen können.</span><span class="sxs-lookup"><span data-stu-id="e680b-231">Use the following links to get additional information that helps you master the concepts.</span></span>  
  
 [<span data-ttu-id="e680b-232">Definieren einer m:n-Dimension in Analysis Services</span><span class="sxs-lookup"><span data-stu-id="e680b-232">How do I define a many-to-many dimension in Analysis Services</span></span>](../lesson-5-3-defining-a-many-to-many-relationship.md)  
  
 [<span data-ttu-id="e680b-233">Die m:n-Revolution 2.0</span><span class="sxs-lookup"><span data-stu-id="e680b-233">The many-to-many Revolution 2.0</span></span>](https://go.microsoft.com/fwlink/?LinkId=324760)  
  
 [<span data-ttu-id="e680b-234">Lernprogramm: Beispiel einer m:n-Dimension für SQL Server Analysis Services</span><span class="sxs-lookup"><span data-stu-id="e680b-234">Tutorial: Many-to-many dimension example for SQL Server Analysis Services</span></span>](https://go.microsoft.com/fwlink/?LinkId=324761)  
  
## <a name="see-also"></a><span data-ttu-id="e680b-235">Weitere Informationen</span><span class="sxs-lookup"><span data-stu-id="e680b-235">See Also</span></span>  
 <span data-ttu-id="e680b-236">[Dimensions Beziehungen](../multidimensional-models-olap-logical-cube-objects/dimension-relationships.md) </span><span class="sxs-lookup"><span data-stu-id="e680b-236">[Dimension Relationships](../multidimensional-models-olap-logical-cube-objects/dimension-relationships.md) </span></span>  
 <span data-ttu-id="e680b-237">[Installieren von Beispiel Daten und-Projekten für das Tutorial zur Analysis Services mehrdimensionalen Modellierung](../install-sample-data-and-projects.md) </span><span class="sxs-lookup"><span data-stu-id="e680b-237">[Install Sample Data and Projects for the Analysis Services Multidimensional Modeling Tutorial](../install-sample-data-and-projects.md) </span></span>  
 <span data-ttu-id="e680b-238">[Bereitstellen von Analysis Services Projekten &#40;SSDT&#41;](deploy-analysis-services-projects-ssdt.md) </span><span class="sxs-lookup"><span data-stu-id="e680b-238">[Deploy Analysis Services Projects &#40;SSDT&#41;](deploy-analysis-services-projects-ssdt.md) </span></span>  
 [<span data-ttu-id="e680b-239">Perspektiven in mehrdimensionalen Modellen</span><span class="sxs-lookup"><span data-stu-id="e680b-239">Perspectives in Multidimensional Models</span></span>](perspectives-in-multidimensional-models.md)  
  
  
