---
title: Protokoll Vorgänge in Analysis Services | Microsoft-Dokumentation
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: analysis-services
ms.topic: conceptual
ms.assetid: aa1db060-95dc-4198-8aeb-cffdda44b140
author: minewiskan
ms.author: owend
ms.openlocfilehash: 95d0e41576e449ab10b243ef49cbe283940afe0b
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 08/04/2020
ms.locfileid: "87620041"
---
# <a name="log-operations-in-analysis-services"></a><span data-ttu-id="61c8a-102">Protokollvorgänge in Analysis Services</span><span class="sxs-lookup"><span data-stu-id="61c8a-102">Log operations in Analysis Services</span></span>
  <span data-ttu-id="61c8a-103">Eine Analysis Services Instanz protokolliert Server Benachrichtigungen, Fehler und Warnungen in der Datei "msmdsrv. log": eine für jede Instanz, die Sie installieren.</span><span class="sxs-lookup"><span data-stu-id="61c8a-103">An Analysis Services instance will log server notifications, errors, and warnings to the msmdsrv.log file - one for each instance you install.</span></span> <span data-ttu-id="61c8a-104">Administratoren finden in diesem Protokoll Einblicke in routinemäßige und außergewöhnliche Ereignisse.</span><span class="sxs-lookup"><span data-stu-id="61c8a-104">Administrators refer to this log for insights into routine and extraordinary events alike.</span></span> <span data-ttu-id="61c8a-105">In neueren Versionen wurde die Protokollierung verbessert, um weitere Informationen zu erfassen.</span><span class="sxs-lookup"><span data-stu-id="61c8a-105">In recent releases, logging has been enhanced to include more information.</span></span> <span data-ttu-id="61c8a-106">Protokolldatensätze enthalten jetzt die Produktversion und Editionsinformationen sowie Prozessor, Speicher, Konnektivität und blockierende Ereignisse.</span><span class="sxs-lookup"><span data-stu-id="61c8a-106">Log records now include product version and edition information, as well as processor, memory, connectivity, and blocking events.</span></span> <span data-ttu-id="61c8a-107">Sie können die gesamte Änderungsliste unter [Protokollierungsverbesserungen](https://support.microsoft.com/kb/2965035)einsehen.</span><span class="sxs-lookup"><span data-stu-id="61c8a-107">You can review the entire change list at [Logging improvements](https://support.microsoft.com/kb/2965035).</span></span>  
  
 <span data-ttu-id="61c8a-108">Neben dem integrierten Protokollierungsfeature verwenden viele Administratoren und Entwickler auch die von der Analysis Services-Community bereitgestellten Tools zum Sammeln von Daten zu Servervorgängen, wie z.B. **ASTrace**.</span><span class="sxs-lookup"><span data-stu-id="61c8a-108">Besides the built-in logging feature, many administrators and developers also use tools provided by the Analysis Services community to collect data about server operations, such as **ASTrace**.</span></span> <span data-ttu-id="61c8a-109">Die Download-Links finden Sie unter [Microsoft SQL Server Community Samples: Analysis Services](https://sqlsrvanalysissrvcs.codeplex.com/) (Microsoft SQL Server-Community-Beispiele: Analysis Services).</span><span class="sxs-lookup"><span data-stu-id="61c8a-109">See [Microsoft SQL Server Community Samples: Analysis Services](https://sqlsrvanalysissrvcs.codeplex.com/) for the download links.</span></span>  
  
 <span data-ttu-id="61c8a-110">Dieses Thema enthält folgende Abschnitte:</span><span class="sxs-lookup"><span data-stu-id="61c8a-110">This topic contains the following sections:</span></span>  
  
-   [<span data-ttu-id="61c8a-111">Speicherort und Arten von Protokollen</span><span class="sxs-lookup"><span data-stu-id="61c8a-111">Location and types of logs</span></span>](#bkmk_location)  
  
-   [<span data-ttu-id="61c8a-112">Allgemeine Informationen zu Konfigurationseinstellungen für Protokolldateien</span><span class="sxs-lookup"><span data-stu-id="61c8a-112">General information on log file configuration settings</span></span>](#bkmk_general)  
  
-   [<span data-ttu-id="61c8a-113">MSMDSRV-Dienstprotokolldatei</span><span class="sxs-lookup"><span data-stu-id="61c8a-113">MSMDSRV service log file</span></span>](#bkmk_msmdsrv)  
  
-   [<span data-ttu-id="61c8a-114">Abfrageprotokolle</span><span class="sxs-lookup"><span data-stu-id="61c8a-114">Query logs</span></span>](#bkmk_querylog)  
  
-   [<span data-ttu-id="61c8a-115">Minidumpdateien (. mdmp)</span><span class="sxs-lookup"><span data-stu-id="61c8a-115">Mini dump (.mdmp) files</span></span>](#bkmk_mdmp)  
  
-   [<span data-ttu-id="61c8a-116">Tipps und Best Practices</span><span class="sxs-lookup"><span data-stu-id="61c8a-116">Tips and best practices</span></span>](#bkmk_tips)  
  
> [!NOTE]  
>  <span data-ttu-id="61c8a-117">Wenn Sie Informationen zur Protokollierung suchen, interessiert Sie möglicherweise auch die Ablaufverfolgung von Vorgängen, die Verarbeitungs- und Abfrageausführungspfade anzeigen.</span><span class="sxs-lookup"><span data-stu-id="61c8a-117">If you're looking for information about logging, you might also be interested in tracing operations that show processing and query execution paths.</span></span> <span data-ttu-id="61c8a-118">Ablaufverfolgungsobjekte für die Ad-hoc- und die andauernde Ablaufverfolgung (z.B. Überwachung des Cubezugriffs), sowie Empfehlungen dazu, wie Sie Flight Recorder, SQL Server Profiler und xEvents optimal verwenden, finden Sie über die Links auf dieser Seite: [Überwachen einer Analysis Services-Instanz](monitor-an-analysis-services-instance.md).</span><span class="sxs-lookup"><span data-stu-id="61c8a-118">Trace objects for ad hoc and sustained tracing (such as auditing cube access) ─ as well as recommendations on how to best use Flight Recorder, SQL Server Profiler, and xEvents ─ can be found through the links on this page: [Monitor an Analysis Services Instance](monitor-an-analysis-services-instance.md).</span></span>  
  
##  <a name="location-and-types-of-logs"></a><a name="bkmk_location"></a><span data-ttu-id="61c8a-119">Speicherort und Arten von Protokollen</span><span class="sxs-lookup"><span data-stu-id="61c8a-119">Location and types of logs</span></span>  
 <span data-ttu-id="61c8a-120">Analysis Services stellt die unten beschriebenen Protokolle zur Verfügung.</span><span class="sxs-lookup"><span data-stu-id="61c8a-120">Analysis Services provides the logs described below.</span></span>  
  
|<span data-ttu-id="61c8a-121">Dateiname oder Speicherort</span><span class="sxs-lookup"><span data-stu-id="61c8a-121">File name or Location</span></span>|<span data-ttu-id="61c8a-122">type</span><span class="sxs-lookup"><span data-stu-id="61c8a-122">Type</span></span>|<span data-ttu-id="61c8a-123">Syntaxelemente</span><span class="sxs-lookup"><span data-stu-id="61c8a-123">Used for</span></span>|<span data-ttu-id="61c8a-124">Standardmäßig aktiviert</span><span class="sxs-lookup"><span data-stu-id="61c8a-124">On by default</span></span>|  
|---------------------------|----------|--------------|-------------------|  
|<span data-ttu-id="61c8a-125">Msmdsrv.log</span><span class="sxs-lookup"><span data-stu-id="61c8a-125">Msmdsrv.log</span></span>|<span data-ttu-id="61c8a-126">Fehlerprotokoll</span><span class="sxs-lookup"><span data-stu-id="61c8a-126">Error log</span></span>|<span data-ttu-id="61c8a-127">Routinemäßige Überwachung und grundlegende Problembehandlung</span><span class="sxs-lookup"><span data-stu-id="61c8a-127">Routine monitoring and basic troubleshooting</span></span>|<span data-ttu-id="61c8a-128">Ja</span><span class="sxs-lookup"><span data-stu-id="61c8a-128">Yes</span></span>|  
|<span data-ttu-id="61c8a-129">OlapQueryLog-Tabelle in einer relationalen Datenbank</span><span class="sxs-lookup"><span data-stu-id="61c8a-129">OlapQueryLog table in a relational database</span></span>|<span data-ttu-id="61c8a-130">Abfrageprotokoll</span><span class="sxs-lookup"><span data-stu-id="61c8a-130">Query log</span></span>|<span data-ttu-id="61c8a-131">Sammeln von Eingaben für den Assistenten für die Nutzungsoptimierung</span><span class="sxs-lookup"><span data-stu-id="61c8a-131">Collect inputs for the Usage Optimization Wizard</span></span>|<span data-ttu-id="61c8a-132">Nein</span><span class="sxs-lookup"><span data-stu-id="61c8a-132">No</span></span>|  
|<span data-ttu-id="61c8a-133">Sqldmp \<guid> . mdmp-Dateien</span><span class="sxs-lookup"><span data-stu-id="61c8a-133">SQLDmp\<guid>.mdmp files</span></span>|<span data-ttu-id="61c8a-134">Abstürze und Ausnahmen</span><span class="sxs-lookup"><span data-stu-id="61c8a-134">Crashes and exceptions</span></span>|<span data-ttu-id="61c8a-135">Umfassende Problembehandlung</span><span class="sxs-lookup"><span data-stu-id="61c8a-135">Deep troubleshooting</span></span>|<span data-ttu-id="61c8a-136">Nein</span><span class="sxs-lookup"><span data-stu-id="61c8a-136">No</span></span>|  
  
 <span data-ttu-id="61c8a-137">Es wird dringend empfohlen, den folgenden Link für zusätzliche Informationsquellen zu nutzen, die in diesem Thema nicht behandelt werden: [Initial data collection tips from Microsoft Support](https://blogs.msdn.com/b/as_emea/archive/2012/01/02/initial-data-collection-for-troubleshooting-analysis-services-issues.aspx)(Tipps vom Microsoft Support zur anfänglichen Datensammlung).</span><span class="sxs-lookup"><span data-stu-id="61c8a-137">We highly recommend the following link for additional information resources not covered in this topic: [Initial data collection tips from Microsoft Support](https://blogs.msdn.com/b/as_emea/archive/2012/01/02/initial-data-collection-for-troubleshooting-analysis-services-issues.aspx).</span></span>  
  
##  <a name="general-information-on-log-file-configuration-settings"></a><a name="bkmk_general"></a> <span data-ttu-id="61c8a-138">Allgemeine Informationen zu den Konfigurationseinstellungen der Protokolldatei</span><span class="sxs-lookup"><span data-stu-id="61c8a-138">General information on log file configuration settings</span></span>  
 <span data-ttu-id="61c8a-139">Sie finden Abschnitte für jedes Protokoll in der Serverkonfigurationsdatei "msmdsrv.ini" im Verzeichnis "\Programme\Microsoft SQL Server\MSAS12.MSSQLSERVER\OLAP\Config".</span><span class="sxs-lookup"><span data-stu-id="61c8a-139">You can find sections for each log in the msmdsrv.ini server configuration file, located in the \Program Files\Microsoft SQL Server\MSAS12.MSSQLSERVER\OLAP\Config folder.</span></span> <span data-ttu-id="61c8a-140">Anweisungen zum Bearbeiten der Datei finden Sie unter [Konfigurieren von Server Eigenschaften in Analysis Services](../server-properties/server-properties-in-analysis-services.md) .</span><span class="sxs-lookup"><span data-stu-id="61c8a-140">See [Configure Server Properties in Analysis Services](../server-properties/server-properties-in-analysis-services.md) for instructions on editing the file.</span></span>  
  
 <span data-ttu-id="61c8a-141">Wenn möglich wird empfohlen, die Eigenschaften für die Protokollierung auf der Servereigenschaftenseite von Management Studio festzulegen.</span><span class="sxs-lookup"><span data-stu-id="61c8a-141">Where possible, we suggest that you set logging properties in the server properties page of Management Studio.</span></span> <span data-ttu-id="61c8a-142">In einigen Fällen müssen Sie die Datei "msmdsrv.ini" jedoch direkt bearbeiten, um Einstellungen zu konfigurieren, die nicht in den Verwaltungstools angezeigt werden.</span><span class="sxs-lookup"><span data-stu-id="61c8a-142">Although in some cases, you must edit the msmdsrv.ini file directly to configure settings that are not visible in the administrative tools.</span></span>  
  
 <span data-ttu-id="61c8a-143">![Abschnitt der Config-Datei mit Protokolleinstellungen](../media/ssas-logfilesettings.png "Abschnitt der Config-Datei mit Protokolleinstellungen")</span><span class="sxs-lookup"><span data-stu-id="61c8a-143">![Section of the config file showing log settings](../media/ssas-logfilesettings.png "Section of the config file showing log settings")</span></span>  
  
##  <a name="msmdsrv-service-log-file"></a><a name="bkmk_msmdsrv"></a><span data-ttu-id="61c8a-144">Msmdsrv-Dienst Protokolldatei</span><span class="sxs-lookup"><span data-stu-id="61c8a-144">MSMDSRV service log file</span></span>  
 <span data-ttu-id="61c8a-145">Analysis Services protokolliert Servervorgänge in der Datei „msmdsrv.log“ (eine pro Instanz) im Verzeichnis „\Programme\Microsoft SQL Server\\<Instanz\>\Olap\Log“.</span><span class="sxs-lookup"><span data-stu-id="61c8a-145">Analysis Services logs server operations to the msmdsrv.log file, one per instance, located at \program files\Microsoft SQL Server\\<instance\>\Olap\Log.</span></span>  
  
 <span data-ttu-id="61c8a-146">Diese Protokolldatei wird bei jedem Dienstneustart geleert.</span><span class="sxs-lookup"><span data-stu-id="61c8a-146">This log file is emptied at each service restart.</span></span> <span data-ttu-id="61c8a-147">In früheren Versionen mussten Administratoren manchmal den Dienst neu starten, nur um die Protokolldatei zu leeren, bevor sie so groß wurde, dass sie nicht mehr verwendet werden konnte.</span><span class="sxs-lookup"><span data-stu-id="61c8a-147">In previous releases, administrators would sometimes restart the service for the sole purpose of flushing the log file before it could grow so large as to become unusable.</span></span> <span data-ttu-id="61c8a-148">Dies ist nicht mehr erforderlich.</span><span class="sxs-lookup"><span data-stu-id="61c8a-148">This is no longer necessary.</span></span> <span data-ttu-id="61c8a-149">Mit den Konfigurationseinstellungen, die in SQL Server 2012 SP2 und höher eingeführt wurden, erhalten Sie die Kontrolle über die Größe der Protokolldatei und des dazugehörigen Verlaufs:</span><span class="sxs-lookup"><span data-stu-id="61c8a-149">Configuration settings, introduced in SQL Server 2012 SP2 and later, give you control over the size of the log file and its history:</span></span>  
  
-   <span data-ttu-id="61c8a-150">`MaxFileSizeMB` gibt die maximale Protokolldateigröße in Megabytes an.</span><span class="sxs-lookup"><span data-stu-id="61c8a-150">`MaxFileSizeMB` specifies a maximum log file size in megabytes.</span></span> <span data-ttu-id="61c8a-151">Der Standardwert ist 256.</span><span class="sxs-lookup"><span data-stu-id="61c8a-151">The default is 256.</span></span> <span data-ttu-id="61c8a-152">Ein gültiger Ersatzwert muss eine positive ganze Zahl sein.</span><span class="sxs-lookup"><span data-stu-id="61c8a-152">A valid replacement value must be a positive integer.</span></span> <span data-ttu-id="61c8a-153">Wenn `MaxFileSizeMB` erreicht ist, benennt Analysis Services die aktuelle Datei in "msmdsrv{aktueller Zeitstempel}.log" um und beginnt eine neue Datei "msmdsrv.log".</span><span class="sxs-lookup"><span data-stu-id="61c8a-153">When `MaxFileSizeMB` is reached, Analysis Services renames the current file as msmdsrv{current timestamp}.log file, and starts a new msmdsrv.log file.</span></span>  
  
-   <span data-ttu-id="61c8a-154">`MaxNumberFiles`Gibt die Aufbewahrung älterer Protokolldateien an.</span><span class="sxs-lookup"><span data-stu-id="61c8a-154">`MaxNumberFiles` specifies retention of older log files.</span></span> <span data-ttu-id="61c8a-155">Der Standardwert ist 0 (deaktiviert).</span><span class="sxs-lookup"><span data-stu-id="61c8a-155">The default is 0 (disabled).</span></span> <span data-ttu-id="61c8a-156">Sie können den Wert in eine positive ganze Zahl ändern, um Versionen der Protokolldatei beizubehalten.</span><span class="sxs-lookup"><span data-stu-id="61c8a-156">You can change it to a positive integer to keep versions of the log file.</span></span> <span data-ttu-id="61c8a-157">Wenn `MaxNumberFiles` erreicht ist, löscht Analysis Services die Datei mit dem ältesten Zeitstempel im Namen.</span><span class="sxs-lookup"><span data-stu-id="61c8a-157">When `MaxNumberFiles` is reached, Analysis Services deletes the file with the oldest timestamp in its name.</span></span>  
  
 <span data-ttu-id="61c8a-158">Um diese Einstellungen zu verwenden, führen Sie folgende Schritte aus:</span><span class="sxs-lookup"><span data-stu-id="61c8a-158">To use these settings, do the following:</span></span>  
  
1.  <span data-ttu-id="61c8a-159">Öffnen Sie die Datei "msmdsrv.ini" im Editor.</span><span class="sxs-lookup"><span data-stu-id="61c8a-159">Open msmdsrv.ini in NotePad.</span></span>  
  
2.  <span data-ttu-id="61c8a-160">Kopieren Sie die folgenden zwei Zeilen:</span><span class="sxs-lookup"><span data-stu-id="61c8a-160">Copy the following two lines:</span></span>  
  
    ```  
    <MaxFileSizeMB>256</MaxFileSizeMB>  
    <MaxNumberOfLogFiles>5</MaxNumberOfLogFiles>  
    ```  
  
3.  <span data-ttu-id="61c8a-161">Fügen Sie diese zwei Zeilen in den Abschnitt "Log" der Datei "msmdsrv.ini" ein, unterhalb des Dateinamens für "msmdsrv.log".</span><span class="sxs-lookup"><span data-stu-id="61c8a-161">Paste the two lines into the Log section of msmdsrv.ini, below the filename for msmdsrv.log.</span></span> <span data-ttu-id="61c8a-162">Beide Einstellungen müssen manuell hinzugefügt werden.</span><span class="sxs-lookup"><span data-stu-id="61c8a-162">Both settings must be added manually.</span></span> <span data-ttu-id="61c8a-163">Es gibt keine Platzhalter dafür in der Datei "msmdsrv.ini".</span><span class="sxs-lookup"><span data-stu-id="61c8a-163">There are no placeholders for them in the msmdsrv.ini file.</span></span>  
  
     <span data-ttu-id="61c8a-164">Die geänderte Konfigurationsdatei sollte wie folgt aussehen:</span><span class="sxs-lookup"><span data-stu-id="61c8a-164">The changed configuration file should look like the following:</span></span>  
  
    ```  
    <Log>  
    <File>msmdsrv.log</File>  
    <MaxFileSizeMB>256</MaxFileSizeMB>  
    <MaxNumberOfLogFiles>5</MaxNumberOfLogFiles>  
    <FileBufferSize>0</FileBufferSize>  
  
    ```  
  
4.  <span data-ttu-id="61c8a-165">Bearbeiten Sie die Werte bei Bedarf.</span><span class="sxs-lookup"><span data-stu-id="61c8a-165">Edit the values if those provided differ from what you want.</span></span>  
  
5.  <span data-ttu-id="61c8a-166">Speichern Sie die Datei .</span><span class="sxs-lookup"><span data-stu-id="61c8a-166">Save the file.</span></span>  
  
6.  <span data-ttu-id="61c8a-167">Starten Sie den Dienst neu.</span><span class="sxs-lookup"><span data-stu-id="61c8a-167">Restart the service.</span></span>  
  
##  <a name="query-logs"></a><a name="bkmk_querylog"></a> <span data-ttu-id="61c8a-168">Abfrageprotokolle</span><span class="sxs-lookup"><span data-stu-id="61c8a-168">Query logs</span></span>  
 <span data-ttu-id="61c8a-169">Der Begriff "Abfrageprotokoll" ist ein wenig irreführend, da hierin keine der MDX- oder DAX-Abfrageaktivitäten Ihrer Benutzer protokolliert werden.</span><span class="sxs-lookup"><span data-stu-id="61c8a-169">The query log is a bit of a misnomer in that it does not log the MDX or DAX query activity of your users.</span></span> <span data-ttu-id="61c8a-170">Stattdessen sammelt dieses Protokoll Daten zu von Analysis Services generierten Abfragen, die anschließend als Dateneingabe im verwendungsbasierten Optimierung-Assistenten verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="61c8a-170">Instead, it collects data about queries generated by Analysis Services, which is subsequently used as data input in the Usage Based Optimization Wizard.</span></span> <span data-ttu-id="61c8a-171">Die im Abfrageprotokoll gesammelten Daten dienen nicht zur direkten Analyse.</span><span class="sxs-lookup"><span data-stu-id="61c8a-171">The data collected in the query log is not intended for direct analysis.</span></span> <span data-ttu-id="61c8a-172">Insbesondere werden die Datasets in Bitarrays beschrieben, wobei eine 0 oder 1 angibt, welche Teile des Datasets in der Abfrage enthalten sind.</span><span class="sxs-lookup"><span data-stu-id="61c8a-172">Specifically, the datasets are described in bit arrays, with a zero or a one indicating the parts of dataset is included in the query.</span></span> <span data-ttu-id="61c8a-173">Diese Daten sind für den Assistenten vorgesehen.</span><span class="sxs-lookup"><span data-stu-id="61c8a-173">Again, this data is meant for the wizard.</span></span>  
  
 <span data-ttu-id="61c8a-174">Bei der Abfrageüberwachung und Problembehandlung verwenden viele Entwickler und Administratoren das Communitytool **ASTrace**zum Überwachen von Abfragen.</span><span class="sxs-lookup"><span data-stu-id="61c8a-174">For query monitoring and troubleshooting, many developers and administrators use a community tool, **ASTrace**, to monitor queries.</span></span> <span data-ttu-id="61c8a-175">Sie können auch SQL Server Profiler, xEvents oder eine Analysis Services-Ablaufverfolgung verwenden.</span><span class="sxs-lookup"><span data-stu-id="61c8a-175">You can also use SQL Server Profiler, xEvents, or an Analysis Services trace.</span></span> <span data-ttu-id="61c8a-176">Links zu weiteren Informationen finden Sie unter [Überwachen einer Instanz von Analysis Services](monitor-an-analysis-services-instance.md) .</span><span class="sxs-lookup"><span data-stu-id="61c8a-176">See [Monitor an Analysis Services Instance](monitor-an-analysis-services-instance.md) for tracing-related links.</span></span>  
  
 <span data-ttu-id="61c8a-177">Wann sollten Sie das Abfrageprotokoll verwenden?</span><span class="sxs-lookup"><span data-stu-id="61c8a-177">When should you use the query log?</span></span> <span data-ttu-id="61c8a-178">Es wird empfohlen, das Abfrageprotokoll im Rahmen einer Übung zur Abfrageleistungsoptimierung zu aktivieren, die den verwendungsbasierten Optimierung-Assistenten umfasst.</span><span class="sxs-lookup"><span data-stu-id="61c8a-178">We recommend enabling the query log as part of a query performance tuning exercise that includes the Usage Based Optimization Wizard.</span></span> <span data-ttu-id="61c8a-179">Das Abfrageprotokoll ist erst vorhanden, nachdem Sie das Feature aktiviert, die unterstützenden Datenstrukturen erstellt und Eigenschaften festgelegt haben, die von Analysis Services zum Suchen und Ausfüllen des Protokolls verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="61c8a-179">The query log does not exist until you enable the feature, create the data structures to support it, and set properties used by Analysis Services to locate and populate the log.</span></span>  
  
 <span data-ttu-id="61c8a-180">Führen Sie die folgenden Schritte aus, um das Abfrageprotokoll zu aktivieren:</span><span class="sxs-lookup"><span data-stu-id="61c8a-180">To enable the query log, follow these steps:</span></span>  
  
1.  <span data-ttu-id="61c8a-181">Erstellen Sie eine relationale SQL Server-Datenbank zum Speichern des Abfrageprotokolls.</span><span class="sxs-lookup"><span data-stu-id="61c8a-181">Create a SQL Server relational database to store the query log.</span></span>  
  
2.  <span data-ttu-id="61c8a-182">Gewähren Sie dem Analysis Services-Dienstkonto ausreichende Berechtigungen für die Datenbank.</span><span class="sxs-lookup"><span data-stu-id="61c8a-182">Grant the Analysis Services service account sufficient permissions on the database.</span></span> <span data-ttu-id="61c8a-183">Das Konto benötigt die Berechtigung zum Erstellen einer Tabelle, zum Schreiben in die Tabelle und zum Lesen aus der Tabelle.</span><span class="sxs-lookup"><span data-stu-id="61c8a-183">The account needs permission to create a table, write to the table, and read from the table.</span></span>  
  
3.  <span data-ttu-id="61c8a-184">Klicken Sie in SQL Server Management Studio mit der rechten Maustaste auf **Analysis Services**  |  **Eigenschaften**  |  **Allgemein**, und legen Sie den Wert für "" auf "true" fest. **CreateQueryLogTable**</span><span class="sxs-lookup"><span data-stu-id="61c8a-184">In SQL Server Management Studio, right-click **Analysis Services** | **Properties** | **General**, set **CreateQueryLogTable** to true.</span></span>  
  
4.  <span data-ttu-id="61c8a-185">Ändern Sie ggf. **QueryLogSampling** oder **QueryLogTableName** , wenn Sie Stichprobenabfragen mit einer anderen Rate durchführen oder einen anderen Namen für die Tabelle verwenden möchten.</span><span class="sxs-lookup"><span data-stu-id="61c8a-185">Optionally, change **QueryLogSampling** or **QueryLogTableName** if you want to sample queries at a different rate, or use a different name for the table.</span></span>  
  
 <span data-ttu-id="61c8a-186">Die Abfrageprotokolltabelle wird erst dann erstellt, wenn Sie genügend MDX-Abfragen zur Erfüllung der Stichprobenanforderungen ausgeführt haben.</span><span class="sxs-lookup"><span data-stu-id="61c8a-186">The query log table will not be created until you have run enough MDX queries to meet the sampling requirements.</span></span> <span data-ttu-id="61c8a-187">Wenn Sie z. B. den Standardwert 10 beibehalten, müssen Sie mindestens zehn Abfragen ausführen, bevor die Tabelle erstellt wird.</span><span class="sxs-lookup"><span data-stu-id="61c8a-187">For example, if you keep the default value of 10, you must run at least 10 queries before the table will be created.</span></span>  
  
 <span data-ttu-id="61c8a-188">Die Abfrageprotokolleinstellungen gelten serverweit.</span><span class="sxs-lookup"><span data-stu-id="61c8a-188">Query log settings are server wide.</span></span> <span data-ttu-id="61c8a-189">Die von Ihnen angegebenen Einstellungen werden von allen auf diesem Server ausgeführten Datenbanken verwendet.</span><span class="sxs-lookup"><span data-stu-id="61c8a-189">The settings you specify will be used by all databases running on this server.</span></span>  
  
 <span data-ttu-id="61c8a-190">![Abfrage-Protokolleinstellungen in Management Studio](../media/ssas-querylogsettings.png "Abfrage-Protokolleinstellungen in Management Studio")</span><span class="sxs-lookup"><span data-stu-id="61c8a-190">![Query log settings in Management Studio](../media/ssas-querylogsettings.png "Query log settings in Management Studio")</span></span>  
  
 <span data-ttu-id="61c8a-191">Führen Sie nach der Festlegen der Konfigurationseinstellungen mehrmals eine MDX-Abfrage aus.</span><span class="sxs-lookup"><span data-stu-id="61c8a-191">After the configuration settings are specified, run an MDX query multiple times.</span></span> <span data-ttu-id="61c8a-192">Wenn die Stichprobenanforderung auf 10 festgelegt sind, wird führen Sie die Abfrage elf Mal aus. Überprüfen Sie, ob die Tabelle erstellt wurde.</span><span class="sxs-lookup"><span data-stu-id="61c8a-192">If sampling is set to 10, run the query 11 times.Verify the table is created.</span></span> <span data-ttu-id="61c8a-193">Stellen Sie in Management Studio eine Verbindung mit der relationalen Datenbank-Engine her, öffnen Sie den Datenbankordner, öffnen Sie den Ordner **Tabellen** , und überprüfen Sie, ob **OlapQueryLog** vorhanden ist.</span><span class="sxs-lookup"><span data-stu-id="61c8a-193">In Management Studio, connect to the relational database engine, open the database folder, open the **Tables** folder, and verify that **OlapQueryLog** exists.</span></span> <span data-ttu-id="61c8a-194">Wenn Sie die Tabelle nicht sofort sehen, aktualisieren Sie den Ordner, um Änderungen am Inhalt zu übernehmen.</span><span class="sxs-lookup"><span data-stu-id="61c8a-194">If you do not immediately see the table, refresh the folder to pick up any changes to its contents.</span></span>  
  
 <span data-ttu-id="61c8a-195">Lassen Sie das Abfrageprotokoll ausreichend Daten für den verwendungsbasierten Optimierung-Assistenten sammeln.</span><span class="sxs-lookup"><span data-stu-id="61c8a-195">Allow the query log to accumulate sufficient data for the Usage Based Optimization Wizard.</span></span> <span data-ttu-id="61c8a-196">Wenn die Abfragemengen zyklisch sind, erfassen Sie genügend Datenverkehr, um eine repräsentative Menge von Daten zu erhalten.</span><span class="sxs-lookup"><span data-stu-id="61c8a-196">If query volumes are cyclical, capture enough traffic to have a representative set of data.</span></span> <span data-ttu-id="61c8a-197">Anweisungen zum Ausführen des Assistenten finden Sie unter [Assistent für verwendungsbasierte Optimierung](https://msdn.microsoft.com/library/ms189706.aspx) .</span><span class="sxs-lookup"><span data-stu-id="61c8a-197">See [Usage Based Optimization Wizard](https://msdn.microsoft.com/library/ms189706.aspx) for instructions on how to run the wizard.</span></span>  
  
 <span data-ttu-id="61c8a-198">Weitere Informationen zur Abfrageprotokollkonfiguration finden Sie unter [Konfigurieren des Abfrageprotokolls von Analysis Services](https://technet.microsoft.com/library/Cc917676) .</span><span class="sxs-lookup"><span data-stu-id="61c8a-198">See [Configuring the Analysis Services Query Log](https://technet.microsoft.com/library/Cc917676) to learn more about query log configuration.</span></span> <span data-ttu-id="61c8a-199">Dieses Dokument ist zwar ziemlich alt, die Abfrageprotokollkonfiguration hat sich jedoch in neueren Versionen nicht geändert, und die darin enthaltenen Informationen gelten weiterhin.</span><span class="sxs-lookup"><span data-stu-id="61c8a-199">Although the paper is quite old, query log configuration has not changed in recent releases and the information it contains still applies.</span></span>  
  
##  <a name="mini-dump-mdmp-files"></a><a name="bkmk_mdmp"></a> <span data-ttu-id="61c8a-200">Miniabbilddateien (.mdmp)</span><span class="sxs-lookup"><span data-stu-id="61c8a-200">Mini dump (.mdmp) files</span></span>  
 <span data-ttu-id="61c8a-201">Abbilddateien erfassen Daten, die für die Analyse außergewöhnlicher Ereignisse verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="61c8a-201">Dump files capture data used for analyzing extraordinary events.</span></span> <span data-ttu-id="61c8a-202">Analysis Services generiert automatisch Miniabbilder (.mdmp) als Reaktion auf einen Serverabsturz oder bei Ausnahme- und einigen Konfigurationsfehlern.</span><span class="sxs-lookup"><span data-stu-id="61c8a-202">Analysis Services automatically generates mini dumps (.mdmp) in response to a server crash, exception, and some configuration errors.</span></span> <span data-ttu-id="61c8a-203">Das Feature ist aktiviert, sendet aber Absturzberichte nicht automatisch.</span><span class="sxs-lookup"><span data-stu-id="61c8a-203">The feature is enabled, but does not send crash reports automatically.</span></span>  
  
 <span data-ttu-id="61c8a-204">Absturzberichte werden über den Abschnitt "Exception" in der Datei "Msmdsrv.ini" konfiguriert.</span><span class="sxs-lookup"><span data-stu-id="61c8a-204">Crash reports are configured through the Exception section in the Msmdsrv.ini file.</span></span> <span data-ttu-id="61c8a-205">Diese Einstellungen steuern die Generierung von Abbilddateien des Arbeitsspeichers.</span><span class="sxs-lookup"><span data-stu-id="61c8a-205">These settings control memory dump file generation.</span></span> <span data-ttu-id="61c8a-206">Der folgende Codeausschnitt zeigt die Standardwerte:</span><span class="sxs-lookup"><span data-stu-id="61c8a-206">The following snippet shows the default values:</span></span>  
  
```  
<Exception>  
<CreateAndSendCrashReports>1</CreateAndSendCrashReports>  
<CrashReportsFolder/>  
<SQLDumperFlagsOn>0x0</SQLDumperFlagsOn>  
<SQLDumperFlagsOff>0x0</SQLDumperFlagsOff>  
<MiniDumpFlagsOn>0x0</MiniDumpFlagsOn>  
<MiniDumpFlagsOff>0x0</MiniDumpFlagsOff>  
<MinidumpErrorList>0xC1000000, 0xC1000001, 0xC102003F, 0xC1360054, 0xC1360055</MinidumpErrorList>  
<ExceptionHandlingMode>0</ExceptionHandlingMode>  
<CriticalErrorHandling>1</CriticalErrorHandling>  
<MaxExceptions>500</MaxExceptions>  
<MaxDuplicateDumps>1</MaxDuplicateDumps>  
</Exception>  
```  
  
 <span data-ttu-id="61c8a-207">**Konfigurieren von Absturzberichten**</span><span class="sxs-lookup"><span data-stu-id="61c8a-207">**Configure Crash Reports**</span></span>  
  
 <span data-ttu-id="61c8a-208">Sofern vom Microsoft Support nicht anders angegeben, verwenden die meisten Administratoren die Standardeinstellungen.</span><span class="sxs-lookup"><span data-stu-id="61c8a-208">Unless otherwise directed by Microsoft Support, most administrators use the default settings.</span></span> <span data-ttu-id="61c8a-209">Der ältere KB-Artikel bietet weiterhin Anweisungen zum Konfigurieren von Abbilddateien: [Konfigurieren von Analysis Services zum Generieren von Speicherabbilddateien](https://support.microsoft.com/kb/919711).</span><span class="sxs-lookup"><span data-stu-id="61c8a-209">This older KB article is still used to provide instruction on how to configure dump files: [How to configure Analysis Services to generate memory dump files](https://support.microsoft.com/kb/919711).</span></span>  
  
 <span data-ttu-id="61c8a-210">Die Konfigurationseinstellung, die wahrscheinlich geändert werden muss, ist die `CreateAndSendCrashReports`-Einstellung, die bestimmt, ob eine Speicherabbilddatei generiert wird.</span><span class="sxs-lookup"><span data-stu-id="61c8a-210">The configuration setting most likely to be modified is the `CreateAndSendCrashReports` setting used to determine whether a memory dump file will be generated.</span></span>  
  
|<span data-ttu-id="61c8a-211">Wert</span><span class="sxs-lookup"><span data-stu-id="61c8a-211">Value</span></span>|<span data-ttu-id="61c8a-212">BESCHREIBUNG</span><span class="sxs-lookup"><span data-stu-id="61c8a-212">Description</span></span>|  
|-----------|-----------------|  
|<span data-ttu-id="61c8a-213">0</span><span class="sxs-lookup"><span data-stu-id="61c8a-213">0</span></span>|<span data-ttu-id="61c8a-214">Deaktiviert die Speicherabbilddatei.</span><span class="sxs-lookup"><span data-stu-id="61c8a-214">Turns off the memory dump file.</span></span> <span data-ttu-id="61c8a-215">Alle anderen Einstellungen im Abschnitt "Exception" werden ignoriert.</span><span class="sxs-lookup"><span data-stu-id="61c8a-215">All other settings under the Exception section are ignored.</span></span>|  
|<span data-ttu-id="61c8a-216">1</span><span class="sxs-lookup"><span data-stu-id="61c8a-216">1</span></span>|<span data-ttu-id="61c8a-217">(Standard) Aktiviert die Speicherabbilddatei, sendet sie aber nicht.</span><span class="sxs-lookup"><span data-stu-id="61c8a-217">(Default) Enables, but does not send, the memory dump file.</span></span>|  
|<span data-ttu-id="61c8a-218">2</span><span class="sxs-lookup"><span data-stu-id="61c8a-218">2</span></span>|<span data-ttu-id="61c8a-219">Aktiviert das Feature und sendet automatisch einen Fehlerbericht an Microsoft.</span><span class="sxs-lookup"><span data-stu-id="61c8a-219">Enables and automatically sends an error report to Microsoft.</span></span>|  
  
 <span data-ttu-id="61c8a-220">`CrashReportsFolder` ist der Speicherort der Abbilddateien.</span><span class="sxs-lookup"><span data-stu-id="61c8a-220">`CrashReportsFolder` is the location of the dump files.</span></span> <span data-ttu-id="61c8a-221">Standardmäßig werden MDMP-Dateien und die zugehörigen Protokolldatensätze im Ordner "\Olap\Log" gespeichert.</span><span class="sxs-lookup"><span data-stu-id="61c8a-221">By default, an .mdmp file and associated log records can be found in the \Olap\Log folder.</span></span>  
  
 <span data-ttu-id="61c8a-222">`SQLDumperFlagsOn` wird verwendet, um ein vollständiges Speicherabbild zu generieren.</span><span class="sxs-lookup"><span data-stu-id="61c8a-222">`SQLDumperFlagsOn` is used to generate a full dump.</span></span> <span data-ttu-id="61c8a-223">Vollständige Speicherabbilder sind standardmäßig nicht aktiviert.</span><span class="sxs-lookup"><span data-stu-id="61c8a-223">By default, full dumps are not enabled.</span></span> <span data-ttu-id="61c8a-224">Sie können diese Eigenschaft auf `0x34` festlegen.</span><span class="sxs-lookup"><span data-stu-id="61c8a-224">You can set this property to `0x34`.</span></span>  
  
 <span data-ttu-id="61c8a-225">Die folgenden Links enthalten weitere Hintergrundinformationen:</span><span class="sxs-lookup"><span data-stu-id="61c8a-225">The following links provide more background:</span></span>  
  
-   [<span data-ttu-id="61c8a-226">Tiefere Einblicke in SQL Server mithilfe von Miniabbildern</span><span class="sxs-lookup"><span data-stu-id="61c8a-226">Looking Deeper into SQL Server using Minidumps</span></span>](https://blogs.msdn.com/b/sqlcat/archive/2009/09/11/looking-deeper-into-sql-server-using-minidumps.aspx)  
  
-   [<span data-ttu-id="61c8a-227">Erstellen einer Abbilddatei für den Benutzermodus</span><span class="sxs-lookup"><span data-stu-id="61c8a-227">How to create a user mode dump file</span></span>](https://support.microsoft.com/kb/931673)  
  
-   [<span data-ttu-id="61c8a-228">Verwenden des Hilfsprogramms Sqldumper.exe zum Erstellen einer Abbilddatei in SQL Server</span><span class="sxs-lookup"><span data-stu-id="61c8a-228">How to use the Sqldumper.exe utility to generate a dump file in SQL Server</span></span>](https://support.microsoft.com/kb/917825)  
  
##  <a name="tips-and-best-practices"></a><a name="bkmk_tips"></a><span data-ttu-id="61c8a-229">Tipps und bewährte Methoden</span><span class="sxs-lookup"><span data-stu-id="61c8a-229">Tips and best practices</span></span>  
 <span data-ttu-id="61c8a-230">In diesem Abschnitt werden kurz die Tipps aus diesem Artikel zusammengefasst.</span><span class="sxs-lookup"><span data-stu-id="61c8a-230">This section is a recap of the tips mentioned throughout this article.</span></span>  
  
-   <span data-ttu-id="61c8a-231">Konfigurieren Sie die Datei "msmdsrv.log", um die Größe und Anzahl der msmdsrv-Protokolldateien zu steuern.</span><span class="sxs-lookup"><span data-stu-id="61c8a-231">Configure the msmdsrv.log file to control the size and number of msmdsrv log file.</span></span> <span data-ttu-id="61c8a-232">Die Einstellungen sind nicht standardmäßig aktiviert, fügen Sie diese daher nach der Installation hinzu.</span><span class="sxs-lookup"><span data-stu-id="61c8a-232">The settings are not enabled by default, so be sure to add them as post-installation step.</span></span> <span data-ttu-id="61c8a-233">Weitere Informationen finden Sie in diesem Thema unter [MSMDSRV-Dienstprotokolldatei](#bkmk_msmdsrv) .</span><span class="sxs-lookup"><span data-stu-id="61c8a-233">See [MSMDSRV service log file](#bkmk_msmdsrv) in this topic.</span></span>  
  
-   <span data-ttu-id="61c8a-234">Lesen Sie diesen Blogbeitrag vom Microsoft-Kundensupport, um zu erfahren, welche Ressourcen die Mitarbeiter zum Abrufen von Informationen zu Servervorgängen verwenden: [Initial Data Collection](https://blogs.msdn.com/b/as_emea/archive/2012/01/02/initial-data-collection-for-troubleshooting-analysis-services-issues.aspx)(Anfängliche Datensammlung).</span><span class="sxs-lookup"><span data-stu-id="61c8a-234">Review this blog post from Microsoft Customer Support to learn what resources they use to get information about server operations: [Initial Data Collection](https://blogs.msdn.com/b/as_emea/archive/2012/01/02/initial-data-collection-for-troubleshooting-analysis-services-issues.aspx)</span></span>  
  
-   <span data-ttu-id="61c8a-235">Verwenden Sie ASTrace2012, statt ein Abfrageprotokoll auszuführen, um herauszufinden, wer Cubes abfragt.</span><span class="sxs-lookup"><span data-stu-id="61c8a-235">Use ASTrace2012, rather than a query log, to find out who is querying cubes.</span></span> <span data-ttu-id="61c8a-236">Das Abfrageprotokoll dient in der Regel zur Bereitstellung von Eingaben für den verwendungsbasierten Optimierung-Assistenten, und die erfassten Daten können nicht einfach gelesen oder interpretiert werden.</span><span class="sxs-lookup"><span data-stu-id="61c8a-236">The query log is typically used to provide input into the Usage Based Optimization Wizard, and the data it captures is not easy to read or interpret.</span></span> <span data-ttu-id="61c8a-237">ASTrace2012 ist ein Communitytool, das weit verbreitet ist und die Abfragevorgänge erfasst.</span><span class="sxs-lookup"><span data-stu-id="61c8a-237">ASTrace2012 is a community tool, widely used, that captures query operations.</span></span> <span data-ttu-id="61c8a-238">Weitere Informationen finden Sie unter [Microsoft SQL Server Community Samples: Analysis Services](https://sqlsrvanalysissrvcs.codeplex.com/)(Microsoft SQL Server-Community-Beispiele: Analysis Services).</span><span class="sxs-lookup"><span data-stu-id="61c8a-238">See [Microsoft SQL Server Community Samples: Analysis Services](https://sqlsrvanalysissrvcs.codeplex.com/).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="61c8a-239">Weitere Informationen</span><span class="sxs-lookup"><span data-stu-id="61c8a-239">See Also</span></span>  
 <span data-ttu-id="61c8a-240">[Analysis Services Instanzverwaltung](analysis-services-instance-management.md) </span><span class="sxs-lookup"><span data-stu-id="61c8a-240">[Analysis Services Instance Management](analysis-services-instance-management.md) </span></span>  
 <span data-ttu-id="61c8a-241">[Einführung in die Überwachung von Analysis Services mit SQL Server Profiler](introduction-to-monitoring-analysis-services-with-sql-server-profiler.md) </span><span class="sxs-lookup"><span data-stu-id="61c8a-241">[Introduction to Monitoring Analysis Services with SQL Server Profiler](introduction-to-monitoring-analysis-services-with-sql-server-profiler.md) </span></span>  
 [<span data-ttu-id="61c8a-242">Konfigurieren von Servereigenschaften in Analysis Services</span><span class="sxs-lookup"><span data-stu-id="61c8a-242">Configure Server Properties in Analysis Services</span></span>](../server-properties/server-properties-in-analysis-services.md)  
  
  
